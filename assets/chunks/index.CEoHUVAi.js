import{W as g,a as S,b as y,c as T,d as b,P as G,O as I,I as x,e as F,G as C,f as P,E as w,g as L,S as M,h as O,i as W,j as _,V as R,H as j,k as V,C as v,l as E,Z as U,U as A,T as B,m as D,n as X,o as K,R as q,p as z,q as J,r as N,s as k,t as H,u as Y,v as Z,w as $,x as Q,y as ee,D as te,z as ae,B as se}from"./geojson.Ca4I1QxC.js";import{T as ie,K as re,r as oe,L as ne,a as h,o as le,c as ce,b as d,V as ue,d as me,U as de,S as pe,I as ge}from"./OSM.aQ6pgj5c.js";import{W as he}from"./WKT.n-xUC2SY.js";import{L as fe}from"./Group.CiSBx5zz.js";import{p as Se}from"./index.Du0sVlOV.js";import{P as p,F as ye,a as Te,t as be,G as Ge}from"./GeoJSON.BxIvHmzC.js";import{R as Ie}from"./map.CsNO4Xxn.js";import"./math.CNQr2BuL.js";import"./item.Bx-rtsOD.js";import"./commonjsHelpers.BosuxZz1.js";import"./framework.DIIUVAST.js";window.eoxMapAdvancedOlFormats={EsriJSON:w,GML:P,GPX:C,IGC:F,IIIFInfo:x,KML:re,OWS:I,Polyline:G,TopoJSON:ie,WFS:b,WKB:T,WKT:he,WMSCapabilities:y,WMSGetFeatureInfo:S,WMTSCapabilities:g};class xe extends fe{constructor(e={}){const{mapboxStyle:t,applyOptions:a,...o}=e;super(o),t&&this.applyMapboxStyle(t,a)}applyMapboxStyle(e,t){return L(this,e,t)}}oe(Se);window.eoxMapAdvancedOlLayers={Graticule:V,Heatmap:j,Layer:ne,VectorImage:R,WebGLPoints:_,WebGLTile:W,WebGLVector:O,STAC:M,MapboxStyle:xe};class l extends v{constructor(e={}){super({...e,createCluster:l.defaultCreateCluster,geometryFunction:l.defaultGeometryFunction})}static defaultCreateCluster(e,t){const a=t.length===1&&t[0].getGeometry()instanceof p?t[0].getGeometry():e,o=new ye({geometry:a,features:t});if(t.length===1){const s=t[0];for(const i in s.getProperties())i!=="geometry"&&o.set(i,s.get(i))}return o}static defaultGeometryFunction(e){const t=e&&e.getGeometry();return t instanceof Te?t:t instanceof p?t.getInteriorPoint():null}}class Fe extends h{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"application/xml")).then(t=>{this.handleCapabilitiesResponse(t,e)})}handleCapabilitiesResponse(e,t){const o=new g().read(e),s=le(o,t);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=ce(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.getState()!=="ready"&&this.setState("ready")}createFromWMTSTemplate(e){const t=this.requestEncoding_,a={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==="KVP"&&Object.assign(a,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t==="KVP"?d(e,a):e.replace(/\{(\w+?)\}/g,(i,r)=>r.toLowerCase()in a?a[r.toLowerCase()]:i);const o=this.tileGrid,s=this.dimensions_;return function(i){if(!i)return;const r={TileMatrix:o.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object.assign(r,s);let n=e;return t==="KVP"?n=d(n,r):n=n.replace(/\{(\w+?)\}/g,(m,c)=>r[c]),n}}}class Ce extends ue{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX,strategy:me}),this.dataProjection=e.projection||Ie.dataProjection,this.resourceURL=e.url,super.setLoader(this.loader)}fgbBoundingBox(e,t){const a=be(e,t.getCode(),this.dataProjection);return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}async loader(e,t,a,o,s){const i=this.fgbBoundingBox(e,a);try{if(i.minX!==-1/0){const r=[],n=E(this.resourceURL,i),m=new Ge({featureProjection:a,dataProjection:this.dataProjection});for await(const c of n){const f=m.readFeature(c);r.push(f)}super.clear(),super.addFeatures(r),o(r)}}catch{s()}}}window.eoxMapAdvancedOlSources={BingMaps:se,CartoDB:ae,Cluster:l,DataTile:te,GeoTIFF:ee,Google:Q,IIIF:$,Image:ge,ImageArcGISRest:Z,ImageCanvas:Y,ImageMapGuide:H,ImageStatic:k,ImageTile:N,OGCMapTile:J,OGCVectorTile:z,Raster:q,Source:pe,StadiaMaps:K,TileArcGISRest:X,TileDebug:D,TileImage:h,TileJSON:B,UrlTile:de,UTFGrid:A,Zoomify:U,WMTSCapabilities:Fe,FlatGeoBuf:Ce};
