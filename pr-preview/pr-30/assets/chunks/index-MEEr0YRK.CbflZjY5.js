var jm=Object.defineProperty;var kh=r=>{throw TypeError(r)};var Xm=(r,e,t)=>e in r?jm(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ri=(r,e,t)=>Xm(r,typeof e!="symbol"?e+"":e,t),p0=(r,e,t)=>e.has(r)||kh("Cannot "+t);var Ge=(r,e,t)=>(p0(r,e,"read from private field"),t?t.call(r):e.get(r)),pt=(r,e,t)=>e.has(r)?kh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Rt=(r,e,t,i)=>(p0(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),Lt=(r,e,t)=>(p0(r,e,"access private method"),t);import{i as Yl,b as Qn,A as Vm}from"./lit-element.CoEtArIh.js";import{B as Ni,E as H,T as Go,l as ge,u as ke,c as $l,a as me,b as se,g as ae,t as S2,m as yi,d as Pt,e as Ba,w as ll,f as or,h as Di,i as mt,j as Jd,k as ie,n as Hl,r as Wm,o as Ie,p as Kl,q as yt,s as En,v as $t,x as Qd,y as pr,z as ts,A as e1,C as ql,D as wn,F as Zm,G as Ne,H as Ym,I as xe,J as rn,K as R2,M as po,V as Jl,N as Ql,O as sn,P as vt,Q as ms,R as As,S as zo,U as $m,W as pn,X as ja,Y as W,Z as Ln,_ as _o,$ as Li,a0 as Oh,a1 as qt,a2 as t1,L as Pn,a3 as In,a4 as Hm,a5 as Kt,a6 as Km,a7 as qm,a8 as Jm,a9 as It,aa as Ma,ab as i1,ac as Qm,ad as fi,ae as L2,af as P2,ag as yo,ah as Et,ai as n1,aj as ps,ak as ec,al as it,am as ot,an as ep,ao as _s,ap as r1,aq as _n,ar as Xa,as as Kr,at as tp,au as ip,av as np,aw as tc,ax as rp}from"./Group.ciW0slf_.js";import{q as sp}from"./index.OUYS7i6-.js";import{r as op}from"./choose.Dh3k58u9.js";import{p as sr}from"./index.Du0sVlOV.js";import{P as ap}from"./index.BYzJOi-i.js";import{g as lp}from"./getElement.CdRlZPdn.js";import{a as cp}from"./addCommonStyleSheet.mCena6sE.js";import{a as hp,S as up,f as dp,b as fp,c as gp,P as mp,p as pp,d as _p}from"./geojson.PNjNbIYg.js";import{_ as yp,aE as Hn,u as xp,s as cl,a as hl,m as Cp,o as bp,d as Nh,f as _0,i as jn,aO as Xn,l as Kn,j as vp,aP as Ep,q as wp,p as Tp,g as Sp,b2 as Rp,b1 as Dh,a4 as Gh,k as Lp,b3 as zh}from"./eo-dash.3KahXt72.js";import{i as Pp}from"./easing-CH0-9wR8.CTB3jml5.js";import Ip from"./EodashMapBtns-Cy3Pdg16.C2PACRzB.js";import{h as Vn,a2 as Uh,p as Ir,ar as Bh,v as s1,c as y0,o as x0,j as Ar,e as C0,k as xt,N as la,G as Ap,x as o1,q as Fp}from"./framework.CXIgxnVy.js";import"./Group.BnugPW7_.js";import"./Tile.gsF6xMKC.js";import"./XYZ.DtVLERao.js";import"./Layer.CNvgX2e5.js";import"./Vector.DMJmXynL.js";import"./DataTile.BP2Evev7.js";import"./item.Bx-rtsOD.js";import"./commonjsHelpers.BosuxZz1.js";import"./mdi.cAXAKF9x.js";import"./ExportState-dPB705Sr.DUzSXJra.js";import"./PopUp-CzIheasn.CLt8_0MH.js";import"./forwardRefs-BEIMqvE_.CiawV92h.js";import"./transition-DbWQ3ZE1.eMSTB_mB.js";import"./VImg-SMHzGG3s.BQrTVEXk.js";import"./EodashItemFilter-NuXT3yxn.BnXosnrL.js";import"./handling-BOnI-wTn.DOkuzyfj.js";import"./async-bF4ZGO7U.BsMgp85F.js";import"./utils.CdF70kIP.js";import"./index.2GfG_t-c.js";import"./directive.CvdRHFdJ.js";import"./unsafe-html.D1x9Zf_C.js";import"./index.BUIxO2d3.js";class Xr extends Ni{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Zi extends Xr{constructor(e,t,i,n,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ce={SINGLECLICK:"singleclick",CLICK:H.CLICK,DBLCLICK:H.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ar=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Mp=ar.includes("safari")&&!ar.includes("chrom"),kp=Mp&&(ar.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ar)),Op=ar.includes("webkit")&&!ar.includes("edge"),ic=ar.includes("macintosh"),Np=typeof devicePixelRatio<"u"?devicePixelRatio:1,Gt=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,nc=typeof Image<"u"&&Image.prototype.decode,a1=typeof createImageBitmap=="function",l1=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}(),Pi={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROUT:"pointerout"};class Dp extends Go{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ge(i,Pi.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ge(i,Pi.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(H.TOUCHMOVE,this.boundHandleTouchMove_,l1?{passive:!1}:!1)}emulateClick_(e){let t=new Zi(Ce.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Zi(Ce.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Zi(Ce.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ce.POINTERUP||t.type==Ce.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==Ce.POINTERDOWN||t.type==Ce.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Zi(Ce.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Zi(Ce.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ge(i,Ce.POINTERMOVE,this.handlePointerMove_,this),ge(i,Ce.POINTERUP,this.handlePointerUp_,this),ge(this.element_,Ce.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ge(this.element_.getRootNode(),Ce.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Zi(Ce.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Zi(Ce.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ke(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(H.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ke(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Si={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},tt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},D={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Va=1/0;class Gp{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,$l(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(e){me(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Va?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,n=t.length,s=t[e],o=i[e],a=e;for(;e<n>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<n&&i[c]<i[l]?c:l;t[e]=t[h],i[e]=i[h],e=h}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,n=this.priorities_,s=i[t],o=n[t];for(;t>e;){const a=this.getParentIndex_(t);if(n[a]>o)i[t]=i[a],n[t]=n[a],t=a;else break}i[t]=s,n[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let n=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==Va?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,t[n++]=o);t.length=n,i.length=n,this.heapify_()}}class c1 extends Gp{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(H.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===D.LOADED||i===D.ERROR||i===D.EMPTY){i!==D.ERROR&&t.removeEventListener(H.CHANGE,this.boundHandleTileChange_);const n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const n=this.dequeue()[0],s=n.getKey();n.getState()===D.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,n.load())}}}function zp(r,e,t,i,n){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Va;const s=r.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n}const Te={ANIMATING:0,INTERACTING:1},Yt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function jh(r,e,t){return function(i,n,s,o,a){if(!i)return;if(!n&&!e)return i;const l=e?0:s[0]*n,c=e?0:s[1]*n,h=a?a[0]:0,u=a?a[1]:0;let d=r[0]+l/2+h,f=r[2]-l/2+h,g=r[1]+c/2+u,p=r[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let m=se(i[0],d,f),_=se(i[1],g,p);if(o&&t&&n){const y=30*n;m+=-y*Math.log(1+Math.max(0,d-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-f)/y),_+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-p)/y)}return[m,_]}}function Up(r){return r}function qn(r,e,t){const i=t!==void 0?r.toFixed(t):""+r;let n=i.indexOf(".");return n=n===-1?i.length:n,n>e?i:new Array(1+e-n).join("0")+i}function I2(r,e){const t=(""+r).split("."),i=(""+e).split(".");for(let n=0;n<Math.max(t.length,i.length);n++){const s=parseInt(t[n]||"0",10),o=parseInt(i[n]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function h1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function rc(r,e){const t=r[0],i=r[1],n=e[0],s=e[1],o=n[0],a=n[1],l=s[0],c=s[1],h=l-o,u=c-a,d=h===0&&u===0?0:(h*(t-o)+u*(i-a))/(h*h+u*u||0);let f,g;return d<=0?(f=o,g=a):d>=1?(f=l,g=c):(f=o+d*h,g=a+d*u),[f,g]}function Xh(r,e,t){const i=yi(e+180,360)-180,n=Math.abs(3600*i),s=t||0;let o=Math.floor(n/3600),a=Math.floor((n-o*3600)/60),l=S2(n-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+qn(a,2)+"′"),l!==0&&(c+=" "+qn(l,2,s)+"″"),i!==0&&(c+=" "+r.charAt(i<0?1:0)),c}function bt(r,e){let t=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=e[i]){t=!1;break}return t}function sc(r,e){const t=Math.cos(e),i=Math.sin(e),n=r[0]*t-r[1]*i,s=r[1]*t+r[0]*i;return r[0]=n,r[1]=s,r}function u1(r,e){return r[0]*=e,r[1]*=e,r}function ys(r,e){const t=r[0]-e[0],i=r[1]-e[1];return t*t+i*i}function qr(r,e){return Math.sqrt(ys(r,e))}function Bp(r,e){return ys(r,rc(r,e))}function A2(r,e){if(e.canWrapX()){const t=ae(e.getExtent()),i=d1(r,e,t);i&&(r[0]-=i*t)}return r}function d1(r,e,t){const i=e.getExtent();let n=0;return e.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(t=t||ae(i),n=Math.floor((r[0]-i[0])/t)),n}function f1(r){return Math.pow(r,3)}function _r(r){return 1-f1(1-r)}function jp(r){return 3*r*r-2*r*r*r}function Xp(r){return r}const F2=63710088e-1;function ul(r,e,t){t=t||F2;const i=Pt(r[1]),n=Pt(e[1]),s=(n-i)/2,o=Pt(e[0]-r[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(n);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function b0(r,e){let t=0;for(let i=0,n=r.length;i<n-1;++i)t+=ul(r[i],r[i+1],e);return t}function g1(r,e){e=e||{};const t=e.radius||F2,i=e.projection||"EPSG:3857",n=r.getType();n!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,c,h,u;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=r.getCoordinates(),s=b0(o,t);break}case"MultiLineString":case"Polygon":{for(o=r.getCoordinates(),l=0,c=o.length;l<c;++l)s+=b0(o[l],t);break}case"MultiPolygon":{for(o=r.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],h=0,u=a.length;h<u;++h)s+=b0(a[h],t);break}case"GeometryCollection":{const d=r.getGeometries();for(l=0,c=d.length;l<c;++l)s+=g1(d[l],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function ca(r,e){let t=0;const i=r.length;let n=r[i-1][0],s=r[i-1][1];for(let o=0;o<i;o++){const a=r[o][0],l=r[o][1];t+=Pt(a-n)*(2+Math.sin(Pt(s))+Math.sin(Pt(l))),n=a,s=l}return t*e*e/2}function m1(r,e){e=e||{};const t=e.radius||F2,i=e.projection||"EPSG:3857",n=r.getType();n!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,c,h,u;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=r.getCoordinates(),s=Math.abs(ca(o[0],t)),l=1,c=o.length;l<c;++l)s-=Math.abs(ca(o[l],t));break}case"MultiPolygon":{for(o=r.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],s+=Math.abs(ca(a[0],t)),h=1,u=a.length;h<u;++h)s-=Math.abs(ca(a[h],t));break}case"GeometryCollection":{const d=r.getGeometries();for(l=0,c=d.length;l<c;++l)s+=m1(d[l],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function Vp(r,e,t,i){i=i||F2;const n=Pt(r[1]),s=Pt(r[0]),o=e/i,a=Math.asin(Math.sin(n)*Math.cos(o)+Math.cos(n)*Math.sin(o)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(n),Math.cos(o)-Math.sin(n)*Math.sin(a));return[Ba(l),Ba(a)]}function p1(...r){console.warn(...r)}function xo(...r){console.error(...r)}const Wp={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function Vh(r){return Wp[r]}const xs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class lr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||xs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Uo=6378137,Jr=Math.PI*Uo,Zp=[-Jr,-Jr,Jr,Jr],Yp=[-180,-85,180,85],ha=Uo*Math.log(Math.tan(Math.PI/2));class Fr extends lr{constructor(e){super({code:e,units:"m",extent:Zp,global:!0,worldExtent:Yp,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Uo)}})}}const Wh=[new Fr("EPSG:3857"),new Fr("EPSG:102100"),new Fr("EPSG:102113"),new Fr("EPSG:900913"),new Fr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Fr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function $p(r,e,t,i){const n=r.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=r.slice():e=new Array(n));for(let s=0;s<n;s+=i){e[s]=Jr*r[s]/180;let o=Uo*Math.log(Math.tan(Math.PI*(+r[s+1]+90)/360));o>ha?o=ha:o<-ha&&(o=-ha),e[s+1]=o}return e}function Hp(r,e,t,i){const n=r.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=r.slice():e=new Array(n));for(let s=0;s<n;s+=i)e[s]=180*r[s]/Jr,e[s+1]=360*Math.atan(Math.exp(r[s+1]/Uo))/Math.PI-90;return e}const Kp=6378137,Zh=[-180,-90,180,90],qp=Math.PI*Kp/180;class Wn extends lr{constructor(e,t){super({code:e,units:"degrees",extent:Zh,axisOrientation:t,global:!0,metersPerUnit:qp,worldExtent:Zh})}}const Yh=[new Wn("CRS:84"),new Wn("EPSG:4326","neu"),new Wn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Wn("urn:ogc:def:crs:OGC:2:84"),new Wn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Wn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Wn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let dl={};function is(r){return dl[r]||dl[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Jp(r,e){dl[r]=e}let ns={};function cr(r,e,t){const i=r.getCode(),n=e.getCode();i in ns||(ns[i]={}),ns[i][n]=t}function ka(r,e){return r in ns&&e in ns[r]?ns[r][e]:null}const Wa=.9996,di=.00669438,M2=di*di,k2=M2*di,er=di/(1-di),$h=Math.sqrt(1-di),Cs=(1-$h)/(1+$h),_1=Cs*Cs,oc=_1*Cs,ac=oc*Cs,y1=ac*Cs,x1=1-di/4-3*M2/64-5*k2/256,Qp=3*di/8+3*M2/32+45*k2/1024,e3=15*M2/256+45*k2/1024,t3=35*k2/3072,i3=3/2*Cs-27/32*oc+269/512*y1,n3=21/16*_1-55/32*ac,r3=151/96*oc-417/128*y1,s3=1097/512*ac,Za=6378137;function o3(r,e,t){const i=r-5e5,o=(t.north?e:e-1e7)/Wa/(Za*x1),a=o+i3*Math.sin(2*o)+n3*Math.sin(4*o)+r3*Math.sin(6*o)+s3*Math.sin(8*o),l=Math.sin(a),c=l*l,h=Math.cos(a),u=l/h,d=u*u,f=d*d,g=1-di*c,p=Math.sqrt(1-di*c),m=Za/p,_=(1-di)/g,y=er*h**2,x=y*y,C=i/(m*Wa),b=C*C,v=b*C,w=v*C,L=w*C,T=L*C,R=a-u/_*(b/2-w/24*(5+3*d+10*y-4*x-9*er))+T/720*(61+90*d+298*y+45*f-252*er-3*x);let M=(C-v/6*(1+2*d+y)+L/120*(5-2*y+28*d-3*x+8*er+24*f))/h;return M=ll(M+Pt(C1(t.number)),-Math.PI,Math.PI),[Ba(M),Ba(R)]}const Hh=-80,Kh=84,a3=-180,l3=180;function c3(r,e,t){r=ll(r,a3,l3),e<Hh?e=Hh:e>Kh&&(e=Kh);const i=Pt(e),n=Math.sin(i),s=Math.cos(i),o=n/s,a=o*o,l=a*a,c=Pt(r),h=C1(t.number),u=Pt(h),d=Za/Math.sqrt(1-di*n**2),f=er*s**2,g=s*ll(c-u,-Math.PI,Math.PI),p=g*g,m=p*g,_=m*g,y=_*g,x=y*g,C=Za*(x1*i-Qp*Math.sin(2*i)+e3*Math.sin(4*i)-t3*Math.sin(6*i)),b=Wa*d*(g+m/6*(1-a+f)+y/120*(5-18*a+l+72*f-58*er))+5e5;let v=Wa*(C+d*o*(p/2+_/24*(5-a+9*f+4*f**2)+x/720*(61-58*a+l+600*f-330*er)));return t.north||(v+=1e7),[b,v]}function C1(r){return(r-1)*6-180+3}const h3=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function b1(r){let e=0;for(const n of h3){const s=r.match(n);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function qh(r,e){return function(t,i,n,s){const o=t.length;n=n>1?n:2,s=s??n,i||(n>2?i=t.slice():i=new Array(o));for(let a=0;a<o;a+=s){const l=t[a],c=t[a+1],h=r(l,c,e);i[a]=h[0],i[a+1]=h[1]}return i}}function u3(r){return b1(r)?new lr({code:r,units:"m"}):null}function d3(r){const e=b1(r.getCode());return e?{forward:qh(c3,e),inverse:qh(o3,e)}:null}const f3=[d3],g3=[u3];let fl=!0;function v1(r){fl=!1}function lc(r,e){if(e!==void 0){for(let t=0,i=r.length;t<i;++t)e[t]=r[t];e=e}else e=r.slice();return e}function E1(r,e){if(e!==void 0&&r!==e){for(let t=0,i=r.length;t<i;++t)e[t]=r[t];r=e}return r}function Ya(r){Jp(r.getCode(),r),cr(r,r,lc)}function m3(r){r.forEach(Ya)}function V(r){if(typeof r!="string")return r;const e=is(r);if(e)return e;for(const t of g3){const i=t(r);if(i)return i}return null}function bs(r,e,t,i){r=V(r);let n;const s=r.getPointResolutionFunc();if(s){if(n=s(e,t),i&&i!==r.getUnits()){const o=r.getMetersPerUnit();o&&(n=n*o/xs[i])}}else{const o=r.getUnits();if(o=="degrees"&&!i||i=="degrees")n=e;else{const a=on(r,V("EPSG:4326"));if(!a&&o!=="degrees")n=e*r.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const h=ul(c.slice(0,2),c.slice(2,4)),u=ul(c.slice(4,6),c.slice(6,8));n=(h+u)/2}const l=i?xs[i]:r.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function gl(r){m3(r),r.forEach(function(e){r.forEach(function(t){e!==t&&cr(e,t,lc)})})}function p3(r,e,t,i){r.forEach(function(n){e.forEach(function(s){cr(n,s,t),cr(s,n,i)})})}function cc(r,e){return r?typeof r=="string"?V(r):r:V(e)}function $a(r){return function(e,t,i,n){const s=e.length;i=i!==void 0?i:2,n=n??i,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=n){const a=r(e.slice(o,o+i)),l=a.length;for(let c=0,h=n;c<h;++c)t[o+c]=c>=l?e[o+c]:a[c]}return t}}function _3(r,e,t,i){const n=V(r),s=V(e);cr(n,s,$a(t)),cr(s,n,$a(i))}function y3(r,e){return v1(),an(r,"EPSG:4326","EPSG:3857")}function Jh(r,e){const t=an(r,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=yi(i+180,360)-180),t}function He(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||on(r,e)===lc)&&t}function on(r,e){const t=r.getCode(),i=e.getCode();let n=ka(t,i);if(n)return n;let s=null,o=null;for(const l of f3)s||(s=l(r)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)n=v0(s.inverse,o.forward);else{const l=ka(t,a);l&&(n=v0(l,o.forward))}else{const l=ka(a,i);l&&(n=v0(s.inverse,l))}return n&&(Ya(r),Ya(e),cr(r,e,n)),n}function v0(r,e){return function(t,i,n,s){return i=r(t,i,n,s),e(i,i,n,s)}}function xi(r,e){const t=V(r),i=V(e);return on(t,i)}function an(r,e,t){const i=xi(e,t);if(!i){const n=V(e).getCode(),s=V(t).getCode();throw new Error(`No transform available between ${n} and ${s}`)}return i(r,void 0,r.length)}function Tn(r,e,t,i){const n=xi(e,t);return or(r,n,void 0,i)}let x3=null;function C3(){return x3}function An(r,e){return r}function Xe(r,e){return fl&&!bt(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(fl=!1,p1("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function Bo(r,e){return r}function zt(r,e){return r}function Qh(r,e,t){return function(i){let n,s;if(r.canWrapX()){const o=r.getExtent(),a=ae(o);i=i.slice(0),s=d1(i,r,a),s&&(i[0]=i[0]-s*a),i[0]=se(i[0],o[0],o[2]),i[1]=se(i[1],o[1],o[3]),n=t(i)}else n=t(i);return s&&e.canWrapX()&&(n[0]+=s*ae(e.getExtent())),n}}function b3(){gl(Wh),gl(Yh),p3(Yh,Wh,$p,Hp)}b3();const hc=new Array(6);function Fe(){return[1,0,0,1,0,0]}function ml(r){return O2(r,1,0,0,1,0,0)}function en(r,e){const t=r[0],i=r[1],n=r[2],s=r[3],o=r[4],a=r[5],l=e[0],c=e[1],h=e[2],u=e[3],d=e[4],f=e[5];return r[0]=t*l+n*c,r[1]=i*l+s*c,r[2]=t*h+n*u,r[3]=i*h+s*u,r[4]=t*d+n*f+o,r[5]=i*d+s*f+a,r}function O2(r,e,t,i,n,s,o){return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r[4]=s,r[5]=o,r}function w1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Ae(r,e){const t=e[0],i=e[1];return e[0]=r[0]*t+r[2]*i+r[4],e[1]=r[1]*t+r[3]*i+r[5],e}function v3(r,e){const t=Math.cos(e),i=Math.sin(e);return en(r,O2(hc,t,i,-i,t,0,0))}function so(r,e,t){return en(r,O2(hc,e,0,0,t,0,0))}function N2(r,e,t){return en(r,O2(hc,1,0,0,1,e,t))}function Jt(r,e,t,i,n,s,o,a){const l=Math.sin(s),c=Math.cos(s);return r[0]=i*c,r[1]=n*l,r[2]=-i*l,r[3]=n*c,r[4]=o*i*c-a*i*l+e,r[5]=o*n*l+a*n*c+t,r}function hr(r,e){const t=E3(e);me(t!==0,"Transformation matrix cannot be inverted");const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return r[0]=o/t,r[1]=-n/t,r[2]=-s/t,r[3]=i/t,r[4]=(s*l-o*a)/t,r[5]=-(i*l-n*a)/t,r}function E3(r){return r[0]*r[3]-r[1]*r[2]}const w3=[1e5,1e5,1e5,1e5,2,2];function T3(r){return"matrix("+r.join(", ")+")"}function pl(r){return r.substring(7,r.length-1).split(",").map(parseFloat)}function S3(r,e){const t=pl(r),i=pl(e);for(let n=0;n<6;++n)if(Math.round((t[n]-i[n])*w3[n])!==0)return!1;return!0}function Fi(r,e,t,i,n,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<t;l+=i){const c=r[l],h=r[l+1];s[a++]=n[0]*c+n[2]*h+n[4],s[a++]=n[1]*c+n[3]*h+n[5];for(let u=2;u<o;u++)s[a++]=r[l+u]}return s&&s.length!=a&&(s.length=a),s}function uc(r,e,t,i,n,s,o){o=o||[];const a=Math.cos(n),l=Math.sin(n),c=s[0],h=s[1];let u=0;for(let d=e;d<t;d+=i){const f=r[d]-c,g=r[d+1]-h;o[u++]=c+f*a-g*l,o[u++]=h+f*l+g*a;for(let p=d+2;p<d+i;++p)o[u++]=r[p]}return o&&o.length!=u&&(o.length=u),o}function R3(r,e,t,i,n,s,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=e;u<t;u+=i){const d=r[u]-l,f=r[u+1]-c;a[h++]=l+n*d,a[h++]=c+s*f;for(let g=u+2;g<u+i;++g)a[h++]=r[g]}return a&&a.length!=h&&(a.length=h),a}function L3(r,e,t,i,n,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=r[l]+n,o[a++]=r[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=r[c]}return o&&o.length!=a&&(o.length=a),o}const eu=Fe(),P3=[NaN,NaN];class dc extends Di{constructor(){super(),this.extent_=mt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Jd((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ie()}closestPointXY(e,t,i,n){return ie()}containsXY(e,t){return this.closestPointXY(e,t,P3,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ie()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Hl(t),this.extentRevision_=this.getRevision()}return Wm(this.extent_,e)}rotate(e,t){ie()}scale(e,t,i){ie()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ie()}getType(){return ie()}applyTransform(e){ie()}intersectsExtent(e){return ie()}translate(e,t){ie()}transform(e,t){const i=V(e),n=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),h=Ie(c)/Ie(l);Jt(eu,c[0],c[3],h,-h,0,0,0);const u=Fi(s,0,s.length,a,eu,o),d=xi(i,t);return d?d(u,u,a):u}:xi(i,t);return this.applyTransform(n),this}}class ki extends dc{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Kl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ie()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Co(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ie()}setLayout(e,t,i){let n;if(e)n=Co(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}n=t.length,e=yr(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();uc(i,0,i.length,n,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=yt(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();R3(n,0,n.length,s,e,t,i,n),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();L3(i,0,i.length,n,e,t,i),this.changed()}}}function yr(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Co(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function I3(r,e,t){const i=r.getFlatCoordinates();if(!i)return null;const n=r.getStride();return Fi(i,0,i.length,n,e,t)}function T1(r,e,t,i){let n=0;const s=r[t-i],o=r[t-i+1];let a=0,l=0;for(;e<t;e+=i){const c=r[e]-s,h=r[e+1]-o;n+=l*c-a*h,a=c,l=h}return n/2}function S1(r,e,t,i){let n=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];n+=T1(r,e,a,i),e=a}return n}function A3(r,e,t,i){let n=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];n+=S1(r,e,a,i),e=a[a.length-1]}return n}function tu(r,e,t,i,n,s,o){const a=r[e],l=r[e+1],c=r[t]-a,h=r[t+1]-l;let u;if(c===0&&h===0)u=e;else{const d=((n-a)*c+(s-l)*h)/(c*c+h*h);if(d>1)u=t;else if(d>0){for(let f=0;f<i;++f)o[f]=$t(r[e+f],r[t+f],d);o.length=i;return}else u=e}for(let d=0;d<i;++d)o[d]=r[u+d];o.length=i}function fc(r,e,t,i,n){let s=r[e],o=r[e+1];for(e+=i;e<t;e+=i){const a=r[e],l=r[e+1],c=En(s,o,a,l);c>n&&(n=c),s=a,o=l}return n}function gc(r,e,t,i,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];n=fc(r,e,a,i,n),e=a}return n}function F3(r,e,t,i,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];n=gc(r,e,a,i,n),e=a[a.length-1]}return n}function mc(r,e,t,i,n,s,o,a,l,c,h){if(e==t)return c;let u,d;if(n===0){if(d=En(o,a,r[e],r[e+1]),d<c){for(u=0;u<i;++u)l[u]=r[e+u];return l.length=i,d}return c}h=h||[NaN,NaN];let f=e+i;for(;f<t;)if(tu(r,f-i,f,i,o,a,h),d=En(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/n|0,1);if(s&&(tu(r,t-i,e,i,o,a,h),d=En(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i}return c}function pc(r,e,t,i,n,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const f=t[u];c=mc(r,e,f,i,n,s,o,a,l,c,h),e=f}return c}function M3(r,e,t,i,n,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const f=t[u];c=pc(r,e,f,i,n,s,o,a,l,c,h),e=f[f.length-1]}return c}function R1(r,e,t,i){for(let n=0,s=t.length;n<s;++n)r[e++]=t[n];return e}function jo(r,e,t,i){for(let n=0,s=t.length;n<s;++n){const o=t[n];for(let a=0;a<i;++a)r[e++]=o[a]}return e}function Xo(r,e,t,i,n){n=n||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=jo(r,e,t[o],i);n[s++]=l,e=l}return n.length=s,n}function L1(r,e,t,i,n){n=n||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Xo(r,e,t[o],i,n[s]);l.length===0&&(l[0]=e),n[s++]=l,e=l[l.length-1]}return n.length=s,n}function yn(r,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let o=e;o<t;o+=i)n[s++]=r.slice(o,o+i);return n.length=s,n}function bo(r,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];n[s++]=yn(r,e,l,i,n[s]),e=l}return n.length=s,n}function _l(r,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];n[s++]=l.length===1&&l[0]===e?[]:bo(r,e,l,i,n[s]),e=l[l.length-1]}return n.length=s,n}function D2(r,e,t,i,n,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=r[e],s[o++]=r[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const g=r[d],p=r[d+1],m=r[u],_=r[u+1];for(let y=d+i;y<u;y+=i){const x=r[y],C=r[y+1],b=Qd(x,C,g,p,m,_);b>f&&(h=y,f=b)}f>n&&(l[(h-e)/i]=1,d+i<h&&c.push(d,h),h+i<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(s[o++]=r[e+u*i],s[o++]=r[e+u*i+1]);return o}function P1(r,e,t,i,n,s,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=D2(r,e,h,i,n,s,o),a.push(o),e=h}return o}function $n(r,e){return e*Math.round(r/e)}function k3(r,e,t,i,n,s,o){if(e==t)return o;let a=$n(r[e],n),l=$n(r[e+1],n);e+=i,s[o++]=a,s[o++]=l;let c,h;do if(c=$n(r[e],n),h=$n(r[e+1],n),e+=i,e==t)return s[o++]=c,s[o++]=h,o;while(c==a&&h==l);for(;e<t;){const u=$n(r[e],n),d=$n(r[e+1],n);if(e+=i,u==c&&d==h)continue;const f=c-a,g=h-l,p=u-a,m=d-l;if(f*m==g*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(g<0&&m<g||g==m||g>0&&m>g)){c=u,h=d;continue}s[o++]=c,s[o++]=h,a=c,l=h,c=u,h=d}return s[o++]=c,s[o++]=h,o}function _c(r,e,t,i,n,s,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=k3(r,e,h,i,n,s,o),a.push(o),e=h}return o}function O3(r,e,t,i,n,s,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l],u=[];o=_c(r,e,h,i,n,s,o,u),a.push(u),e=h[h.length-1]}return o}class Fn extends ki{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Fn(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,n){return n<pr(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,n))}getArea(){return T1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return yn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=D2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Fn(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jo(this.flatCoordinates,0,e,this.stride),this.changed()}}class Oe extends ki{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Oe(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,o=En(e,t,s[0],s[1]);if(o<n){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return ts(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return e1(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=R1(this.flatCoordinates,0,e,this.stride),this.changed()}}function N3(r,e,t,i,n){return!ql(n,function(o){return!tr(r,e,t,i,o[0],o[1])})}function tr(r,e,t,i,n,s){let o=0,a=r[t-i],l=r[t-i+1];for(;e<t;e+=i){const c=r[e],h=r[e+1];l<=s?h>s&&(c-a)*(s-l)-(n-a)*(h-l)>0&&o++:h<=s&&(c-a)*(s-l)-(n-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function yc(r,e,t,i,n,s){if(t.length===0||!tr(r,e,t[0],i,n,s))return!1;for(let o=1,a=t.length;o<a;++o)if(tr(r,t[o-1],t[o],i,n,s))return!1;return!0}function D3(r,e,t,i,n,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(yc(r,e,l,i,n,s))return!0;e=l[l.length-1]}return!1}function xc(r,e,t,i,n,s,o){let a,l,c,h,u,d,f;const g=n[s+1],p=[];for(let y=0,x=t.length;y<x;++y){const C=t[y];for(h=r[C-i],d=r[C-i+1],a=e;a<C;a+=i)u=r[a],f=r[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(u-h)+h,p.push(c)),h=u,d=f}let m=NaN,_=-1/0;for(p.sort(wn),h=p[0],a=1,l=p.length;a<l;++a){u=p[a];const y=Math.abs(u-h);y>_&&(c=(h+u)/2,yc(r,e,t,i,c,g)&&(m=c,_=y)),h=u}return isNaN(m)&&(m=n[s]),o?(o.push(m,g,_),o):[m,g,_]}function I1(r,e,t,i,n){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=xc(r,e,l,i,n,2*o,s),e=l[l.length-1]}return s}function A1(r,e,t,i,n){let s;for(e+=i;e<t;e+=i)if(s=n(r.slice(e-i,e),r.slice(e,e+i)),s)return s;return!1}function G2(r,e,t,i,n,s){return s=s??Zm(mt(),r,e,t,i),Ne(n,s)?s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:A1(r,e,t,i,function(o,a){return Ym(n,o,a)}):!1}function G3(r,e,t,i,n){for(let s=0,o=t.length;s<o;++s){if(G2(r,e,t[s],i,n))return!0;e=t[s]}return!1}function F1(r,e,t,i,n){return!!(G2(r,e,t,i,n)||tr(r,e,t,i,n[0],n[1])||tr(r,e,t,i,n[0],n[3])||tr(r,e,t,i,n[2],n[1])||tr(r,e,t,i,n[2],n[3]))}function M1(r,e,t,i,n){if(!F1(r,e,t[0],i,n))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(N3(r,t[s-1],t[s],i,n)&&!G2(r,t[s-1],t[s],i,n))return!1;return!0}function z3(r,e,t,i,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(M1(r,e,a,i,n))return!0;e=a[a.length-1]}return!1}function U3(r,e,t,i){for(;e<t-i;){for(let n=0;n<i;++n){const s=r[e+n];r[e+n]=r[t-i+n],r[t-i+n]=s}e+=i,t-=i}}function z2(r,e,t,i){let n=0,s=r[t-i],o=r[t-i+1];for(;e<t;e+=i){const a=r[e],l=r[e+1];n+=(a-s)*(l+o),s=a,o=l}return n===0?void 0:n>0}function Cc(r,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=z2(r,e,a,i);if(s===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;e=a}return!0}function k1(r,e,t,i,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!Cc(r,e,a,i,n))return!1;a.length&&(e=a[a.length-1])}return!0}function Ha(r,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=z2(r,e,a,i);(s===0?n&&l||!n&&!l:n&&!l||!n&&l)&&U3(r,e,a,i),e=a}return e}function yl(r,e,t,i,n){for(let s=0,o=t.length;s<o;++s)e=Ha(r,e,t[s],i,n);return e}function bc(r,e){const t=[];let i=0,n=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=z2(r,i,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(n,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[n])}n=o+1,i=l}return t}class Ve extends ki{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?xe(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ve(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<pr(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return yc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return S1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Ha(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,bo(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=yt(this.getExtent());this.flatInteriorPoint_=xc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Oe(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Fn(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Fn(t.slice(s,l),e);n.push(c),s=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Cc(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ha(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=_c(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Ve(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return M1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function B3(r,e,t,i){t=t||32;const n=[];for(let s=0;s<t;++s)xe(n,Vp(r,e,2*Math.PI*s/t,i));return n.push(n[0],n[1]),new Ve(n,"XY",[n.length])}function Ka(r){if(rn(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],i=r[2],n=r[3],s=[e,t,e,n,i,n,i,t,e,t];return new Ve(s,"XY",[s.length])}function vc(r,e,t,i){const n=ae(e)/t[0],s=Ie(e)/t[1];return i?Math.min(r,Math.max(n,s)):Math.min(r,Math.min(n,s))}function Ec(r,e,t){let i=Math.min(r,e);const n=50;return i*=Math.log(1+n*Math.max(0,r/e-1))/n+1,t&&(i=Math.max(i,t),i/=Math.log(1+n*Math.max(0,t/r-1))/n+1),se(i,t/2,e*2)}function j3(r,e,t,i){return e=e!==void 0?e:!0,function(n,s,o,a){if(n!==void 0){const l=r[0],c=r[r.length-1],h=t?vc(l,t,o,i):l;if(a)return e?Ec(n,h,c):se(n,c,h);const u=Math.min(h,n),d=Math.floor(R2(r,u,s));return r[d]>h&&d<r.length-1?r[d+1]:r[d]}}}function X3(r,e,t,i,n,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const h=n?vc(e,n,l,s):e;if(c)return i?Ec(o,h,t):se(o,t,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(r)-u),f=-a*(.5-u)+.5,g=Math.min(h,o),p=Math.floor(Math.log(e/g)/Math.log(r)+f),m=Math.max(d,p),_=e/Math.pow(r,m);return se(_,t,h)}}}function iu(r,e,t,i,n){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=i?vc(r,i,a,n):r;return!t||!l?se(s,e,c):Ec(s,c,e)}}}function wc(r){if(r!==void 0)return 0}function nu(r){if(r!==void 0)return r}function V3(r){const e=2*Math.PI/r;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function W3(r){const e=Pt(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const O1=42,vs=256,E0=0;class ai extends Di{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=cc(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&v1(),e.center&&(e.center=Xe(e.center,this.projection_)),e.extent&&(e.extent=zt(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Yt)delete t[a];this.setProperties(t,!0);const i=Y3(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const n=Z3(e),s=i.constraint,o=$3(e);this.constraints_={center:n,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const n=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-t[3]+t[1]-n[1]),a=s/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=Xe(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Xe(n.anchor,this.getProjection())),t[i]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let n=0;for(;n<t&&!this.isDef();++n){const h=arguments[n];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(n===t){i&&ua(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;n<t;++n){const h=arguments[n],u={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||jp,callback:i};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=yi(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}H3(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(Te.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Te.ANIMATING]>0}getInteracting(){return this.hints_[Te.INTERACTING]>0}cancelAnimations(){this.setHint(Te.ANIMATING,-this.hints_[Te.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const n=this.animations_[t];if(n[0].callback&&ua(n[0].callback,!1),!e)for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+u*(g-d),_=f+u*(p-f);this.targetCenter_=[m,_]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?yi(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Te.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=n[0].callback;o&&ua(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-t[0],n[1]-t[1]],sc(i,e-this.getRotation()),h1(i,t)),i}calculateCenterZoom(e,t){let i;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-n[0])/s,a=t[1]-e*(t[1]-n[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],n=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&An(e,this.getProjection())}getCenterInternal(){return this.get(Yt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Bo(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();me(t,"The view center is not defined");const i=this.getResolution();me(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return me(n!==void 0,"The view rotation is not defined"),po(t,i,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Yt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(zt(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=ae(e)/t[0],n=Ie(e)/t[1];return Math.max(i,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*n)}}getRotation(){return this.get(Yt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();n=w0(n,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,n;if(this.resolutions_){const s=R2(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return t+Math.log(i/e)/Math.log(n)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=se(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,se(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(me(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){me(!rn(e),"Cannot fit empty extent provided as `geometry`");const n=zt(e,this.getProjection());i=Ka(n)}else if(e.getType()==="Circle"){const n=zt(e.getExtent(),this.getProjection());i=Ka(n),i.rotate(this.getRotation(),yt(n))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),n=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=s.length;u<d;u+=o){const f=s[u]*i-s[u+1]*n,g=s[u]*n+s[u+1]*i;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),h=Math.max(h,g)}return[a,l,c,h]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const n=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=yt(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const f=d[0]*u-d[1]*h,g=d[1]*u+d[0]*h,p=this.getConstrainedCenter([f,g],l),m=t.callback?t.callback:Jl;t.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:t.duration,easing:t.easing},m):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),ua(m,!0))}centerOn(e,t,i){this.centerOnInternal(Xe(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(w0(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,n){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=w0(e,n,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=An(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Xe(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,n,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Xe(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Xe(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(Yt.ROTATION)!==n&&this.set(Yt.ROTATION,n),this.get(Yt.RESOLUTION)!==o&&(this.set(Yt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Yt.CENTER)||!bt(this.get(Yt.CENTER),a))&&this.set(Yt.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const n=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,n,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!bt(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:_r,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Te.INTERACTING,1)}endInteraction(e,t,i){i=i&&Xe(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Te.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function ua(r,e){setTimeout(function(){r(e)},0)}function Z3(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return jh(r.extent,r.constrainOnlyCenter,t)}const e=cc(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,jh(t,!1,!1)}return Up}function Y3(r){let e,t,i,o=r.minZoom!==void 0?r.minZoom:E0,a=r.maxZoom!==void 0?r.maxZoom:28;const l=r.zoomFactor!==void 0?r.zoomFactor:2,c=r.multiWorld!==void 0?r.multiWorld:!1,h=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,u=r.showFullExtent!==void 0?r.showFullExtent:!1,d=cc(r.projection,"EPSG:3857"),f=d.getExtent();let g=r.constrainOnlyCenter,p=r.extent;if(!c&&!p&&d.isGlobal()&&(g=!1,p=f),r.resolutions!==void 0){const m=r.resolutions;t=m[o],i=m[a]!==void 0?m[a]:m[m.length-1],r.constrainResolution?e=j3(m,h,!g&&p,u):e=iu(t,i,h,!g&&p,u)}else{const _=(f?Math.max(ae(f),Ie(f)):360*xs.degrees/d.getMetersPerUnit())/vs/Math.pow(2,E0),y=_/Math.pow(2,28-E0);t=r.maxResolution,t!==void 0?o=0:t=_/Math.pow(l,o),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=t/Math.pow(l,a):i=_/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),r.constrainResolution?e=X3(l,t,i,h,!g&&p,u):e=iu(t,i,h,!g&&p,u)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function $3(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?W3():t===!1?nu:typeof t=="number"?V3(t):nu}return wc}function H3(r){return!(r.sourceCenter&&r.targetCenter&&!bt(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function w0(r,e,t,i,n){const s=Math.cos(-n);let o=Math.sin(-n),a=r[0]*s-r[1]*o,l=r[1]*s+r[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,h=l*s+a*o;return[c,h]}const da="ol-hidden",K3="ol-selectable",Oi="ol-unselectable",ru="ol-unsupported",xr="ol-control",qa="ol-collapsed",q3=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),su=["style","variant","weight","size","lineHeight","family"],xl={normal:400,bold:700},Cl=function(r){const e=r.match(q3);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,n=su.length;i<n;++i){const s=e[i+1];s!==void 0&&(t[su[i]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in xl&&(t.weight=xl[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Me(r,e,t,i){let n;return t&&t.length?n=t.shift():Gt?n=new class extends OffscreenCanvas{constructor(){super(...arguments);ri(this,"style",{})}}(r??300,e??150):n=document.createElement("canvas"),r&&(n.width=r),e&&(n.height=e),n.getContext("2d",i)}let T0;function Ja(){return T0||(T0=Me(1,1)),T0}function Vo(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function J3(r){let e=r.offsetWidth;const t=getComputedStyle(r);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function Q3(r){let e=r.offsetHeight;const t=getComputedStyle(r);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Es(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function N1(r){for(;r.lastChild;)r.lastChild.remove()}function e_(r,e){const t=r.childNodes;for(let i=0;;++i){const n=t[i],s=e[i];if(!n&&!s)break;if(n!==s){if(!n){r.appendChild(s);continue}if(!s){r.removeChild(n),--i;continue}r.insertBefore(s,n)}}}function D1(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function xn(r){return typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas}class bi extends Di{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,n=this.listenerKeys.length;i<n;++i)ke(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==Jl&&this.listenerKeys.push(ge(e,Si.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class G1 extends bi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Oi+" "+xr+(this.collapsed_&&this.collapsible_?" "+qa:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(n=>n.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>i.add(n)):i.add(this.attributions_)),!this.overrideCollapsible_){const n=!t.some(s=>{var o;return((o=s.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(n)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(n=>Ql(()=>n))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!sn(t,this.renderedAttributions_)){N1(this.ulElement_);for(let n=0,s=t.length;n<s;++n){const o=document.createElement("li");o.innerHTML=t[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(qa),this.collapsed_?Es(this.collapseLabel_,this.label_):Es(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class z1 extends bi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Oi+" "+xr,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(da)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:_r}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(da);!s&&i===0?this.element.classList.add(da):s&&i!==0&&this.element.classList.remove(da)}this.label_.style.transform=n}this.rotation_=i}}class U1 extends bi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(H.CLICK,this.handleClick_.bind(this,i),!1);const u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(H.CLICK,this.handleClick_.bind(this,-i),!1);const d=t+" "+Oi+" "+xr,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const s=i.getConstrainedZoom(n+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:_r})):i.setZoom(s)}}}function t_(r){r=r||{};const e=new vt;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new U1(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new z1(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new G1(r.attributionOptions)),e}class i_{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const bl={ACTIVE:"active"};class Fs extends Di{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(bl.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(bl.ACTIVE,e)}setMap(e){this.map_=e}}function n_(r,e,t){const i=r.getCenterInternal();if(i){const n=[i[0]+e[0],i[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:Xp,center:r.getConstrainedCenter(n)})}}function Tc(r,e,t,i){const n=r.getZoom();if(n===void 0)return;const s=r.getConstrainedZoom(n+e),o=r.getResolutionForZoom(s);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:_r})}class r_ extends Fs{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ce.DBLCLICK){const i=e.originalEvent,n=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=n.getView();Tc(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}function vl(r){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),!!i);++n);return i}}const s_=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},o_=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},a_=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),i=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},B1=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?a_(r):!0},rs=ms,j1=function(r){const e=r.originalEvent;return"pointerId"in e&&e.button==0&&!(Op&&ic&&e.ctrlKey)},X1=As,l_=function(r){return r.type==Ce.SINGLECLICK},Sc=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ou=function(r){const e=r.originalEvent;return!e.altKey&&(ic?e.metaKey:e.ctrlKey)&&!e.shiftKey},c_=function(r){const e=r.originalEvent;return ic?e.metaKey:e.ctrlKey},El=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},V1=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},S0=function(r){const e=r.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},W1=function(r){const e=r.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Cr extends Fs{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ce.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ce.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ce.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ce.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Rc(r){const e=r.length;let t=0,i=0;for(let n=0;n<e;n++)t+=r[n].clientX,i+=r[n].clientY;return{clientX:t/e,clientY:i/e}}class oo extends Cr{constructor(e){super({stopDown:As}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:vl(Sc,W1);this.condition_=e.onFocusOnly?vl(B1,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,n=t.getEventPixel(Rc(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=e.map.getView();u1(s,a.getResolution()),sc(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-n*Math.cos(s),a[1]-n*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:_r})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class h_ extends Cr{constructor(e){e=e||{},super({stopDown:As}),this.condition_=e.condition?e.condition:o_,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!S0(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===wc)return;const n=t.getSize(),s=e.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return S0(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return S0(e)&&j1(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class u_ extends zo{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+i,n.top=Math.min(e[1],t[1])+i,n.width=Math.abs(t[0]-e[0])+i,n.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Ve([n])}getGeometry(){return this.geometry_}}const Mr={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Zs extends Ni{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class d_ extends Cr{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new u_(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??j1,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const n=i[0]-t[0],s=i[1]-t[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Zs(Mr.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Zs(t?Mr.BOXEND:Mr.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Zs(Mr.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Zs(Mr.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Zs(Mr.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class f_ extends d_{constructor(e){e=e||{};const t=e.condition?e.condition:El;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(n),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;n=n.clone(),n.scale(a*a)}i.fitInternal(n,{duration:this.duration_,easing:_r})}}const Zn={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class g_ extends Fs{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Sc(t)&&V1(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==H.KEYDOWN){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==Zn.DOWN||n==Zn.LEFT||n==Zn.RIGHT||n==Zn.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;n==Zn.DOWN?c=-a:n==Zn.LEFT?l=-a:n==Zn.RIGHT?l=a:c=a;const h=[l,c];sc(h,o.getRotation()),n_(o,h,this.duration_),i.preventDefault(),t=!0}}return!t}}class m_ extends Fs{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!c_(t)&&V1(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==H.KEYDOWN||e.type==H.KEYPRESS){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==="+"||n==="-")){const s=e.map,o=n==="+"?this.delta_:-this.delta_,a=s.getView();Tc(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const p_=40,__=300;class Qa extends Fs{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:rs;this.condition_=e.onFocusOnly?vl(B1,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==H.WHEEL)return!0;const i=e.map,n=e.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=n.deltaY;switch(n.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=p_;break;case WheelEvent.DOM_DELTA_PAGE:s*=__;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-se(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Tc(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class y_ extends Cr{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=As),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==wc&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Rc(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class x_ extends Cr{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=As),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Rc(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Z1(r){r=r||{};const e=new vt,t=new i_(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new h_),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new r_({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new oo({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new y_),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new x_({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new g_),e.push(new m_({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new Qa({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new f_({duration:r.zoomDuration})),e}const ct={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class kn extends $m{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(pn.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(pn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ke(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ge(e,H.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof ai?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let n;if(t.layerStatesArray){if(n=t.layerStatesArray.find(o=>o.layer===this),!n)return!1}else n=this.getLayerState();const s=this.getExtent();return Lc(n,t.viewState)&&(!s||Ne(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const i=e instanceof ai?e.getViewStateAndExtent():e;let n=t(i);return Array.isArray(n)||(n=[n]),n}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(pn.MAP,e)}getMapInternal(){return this.get(pn.MAP)}setMap(e){this.mapPrecomposeKey_&&(ke(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ke(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ge(e,ct.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ge(this,H.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);me(!t.some(n=>n.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(pn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Lc(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const i=e.zoom;return i>r.minZoom&&i<=r.maxZoom}let Pc=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!ga(e,t))return i;const n=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?n(a):a;ga(e,l)&&(t.leaf?i.push(a):L0(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!ga(e,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],o=t.leaf?this.toBBox(s):s;if(ga(e,o)){if(t.leaf||L0(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Vr([]),this}remove(e,t){if(!e)return this;let i=this.data;const n=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const h=C_(e,i.children,t);if(h!==-1)return i.children.splice(h,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&L0(i,n)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,n){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=Vr(e.slice(t,i+1)),kr(a,this.toBBox),a;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),a=Vr([]),a.leaf=!1,a.height=n;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));au(e,t,i,c,this.compareMinX);for(let h=t;h<=i;h+=c){const u=Math.min(h+c-1,i);au(e,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(e,d,f,n-1))}}return kr(a,this.toBBox),a}_chooseSubtree(e,t,i,n){for(;n.push(t),!(t.leaf||n.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],h=R0(c),u=E_(e,c)-h;u<o?(o=u,s=h<s?h:s,a=c):u===o&&h<s&&(s=h,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const n=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),to(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(e,t){const i=e[t],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const o=this._chooseSplitIndex(i,s,n),a=Vr(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,kr(i,this.toBBox),kr(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=Vr([e,t]),this.data.height=e.height+1,this.data.leaf=!1,kr(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let n,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=eo(e,0,a,this.toBBox),c=eo(e,a,i,this.toBBox),h=w_(l,c),u=R0(l)+R0(c);h<s?(s=h,n=a,o=u<o?u:o):h===s&&u<o&&(o=u,n=a)}return n||i-t}_chooseSplitAxis(e,t,i){const n=e.leaf?this.compareMinX:b_,s=e.leaf?this.compareMinY:v_,o=this._allDistMargin(e,t,i,n),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(n)}_allDistMargin(e,t,i,n){e.children.sort(n);const s=this.toBBox,o=eo(e,0,t,s),a=eo(e,i-t,i,s);let l=fa(o)+fa(a);for(let c=t;c<i-t;c++){const h=e.children[c];to(o,e.leaf?s(h):h),l+=fa(o)}for(let c=i-t-1;c>=t;c--){const h=e.children[c];to(a,e.leaf?s(h):h),l+=fa(a)}return l}_adjustParentBBoxes(e,t,i){for(let n=i;n>=0;n--)to(t[n],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():kr(e[t],this.toBBox)}};function C_(r,e,t){if(!t)return e.indexOf(r);for(let i=0;i<e.length;i++)if(t(r,e[i]))return i;return-1}function kr(r,e){eo(r,0,r.children.length,e,r)}function eo(r,e,t,i,n){n||(n=Vr(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<t;s++){const o=r.children[s];to(n,r.leaf?i(o):o)}return n}function to(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function b_(r,e){return r.minX-e.minX}function v_(r,e){return r.minY-e.minY}function R0(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function fa(r){return r.maxX-r.minX+(r.maxY-r.minY)}function E_(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function w_(r,e){const t=Math.max(r.minX,e.minX),i=Math.max(r.minY,e.minY),n=Math.min(r.maxX,e.maxX),s=Math.min(r.maxY,e.maxY);return Math.max(0,n-t)*Math.max(0,s-i)}function L0(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function ga(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function Vr(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function au(r,e,t,i,n){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;sp(r,o,e,t,n),s.push(e,o,o,t)}}const Ic=[NaN,NaN,NaN,0];let P0;function T_(){return P0||(P0=Me(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),P0}const S_=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,R_=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,L_=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,P_=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function ma(r,e){return r.endsWith("%")?Number(r.substring(0,r.length-1))/e:Number(r)}function ao(r){throw new Error('failed to parse "'+r+'" as color')}function Y1(r){if(r.toLowerCase().startsWith("rgb")){const s=r.match(R_)||r.match(S_)||r.match(L_);if(s){const o=s[4],a=100/255;return[se(ma(s[1],a)+.5|0,0,255),se(ma(s[2],a)+.5|0,0,255),se(ma(s[3],a)+.5|0,0,255),o!==void 0?se(ma(o,100),0,1):1]}ao(r)}if(r.startsWith("#")){if(P_.test(r)){const s=r.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let h=parseInt(s.substring(l,l+o),16);o===1&&(h+=h<<4),a[l/o]=h}return a[3]=a[3]/255,a}ao(r)}const e=T_();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=r,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=r,e.fillStyle===t&&ao(r));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return Y1(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const n=Array.from(e.getImageData(0,0,1,1).data);return n[3]=S2(n[3]/255,3),n}function I_(r){return typeof r=="string"?r:Fc(r)}const A_=1024,Ys={};let I0=0;function F_(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function A0(r){return r>.0031308?Math.pow(r,1/2.4)*269.025-14.025:r*3294.6}function F0(r){return r>.2068965?Math.pow(r,3):(r-4/29)*(108/841)}function M0(r){return r>10.314724?Math.pow((r+14.025)/269.025,2.4):r/3294.6}function k0(r){return r>.0088564?Math.pow(r,1/3):r/(108/841)+4/29}function lu(r){const e=M0(r[0]),t=M0(r[1]),i=M0(r[2]),n=k0(e*.222488403+t*.716873169+i*.06060791),s=500*(k0(e*.452247074+t*.399439023+i*.148375274)-n),o=200*(n-k0(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*n-16,Math.sqrt(s*s+o*o),a<0?a+360:a,r[3]]}function M_(r){const e=(r[0]+16)/116,t=r[1],i=r[2]*Math.PI/180,n=F0(e),s=F0(e+t/500*Math.cos(i)),o=F0(e-t/200*Math.sin(i)),a=A0(s*3.021973625-n*1.617392459-o*.404875592),l=A0(s*-.943766287+n*1.916279586+o*.027607165),c=A0(s*.069407491-n*.22898585+o*1.159737864);return[se(a+.5|0,0,255),se(l+.5|0,0,255),se(c+.5|0,0,255),r[3]]}function Ac(r){if(r==="none")return Ic;if(Ys.hasOwnProperty(r))return Ys[r];if(I0>=A_){let t=0;for(const i in Ys)t++&3||(delete Ys[i],--I0)}const e=Y1(r);e.length!==4&&ao(r);for(const t of e)isNaN(t)&&ao(r);return Ys[r]=e,++I0,e}function gi(r){return Array.isArray(r)?r:Ac(r)}function Fc(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);const n=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+n+")"}function cu(r){return r[0]>0&&r[1]>0}function $1(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function De(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}let br=0;const rt=1<<br++,$=1<<br++,ht=1<<br++,Ue=1<<br++,Bt=1<<br++,li=1<<br++,pa=Math.pow(2,br)-1,Mc={[rt]:"boolean",[$]:"number",[ht]:"string",[Ue]:"color",[Bt]:"number[]",[li]:"size"},k_=Object.keys(Mc).map(Number).sort(wn);function O_(r){return r in Mc}function Qr(r){const e=[];for(const t of k_)io(r,t)&&e.push(Mc[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function io(r,e){return(r&e)===e}function wi(r,e){return r===e}class lt{constructor(e,t){if(!O_(e))throw new Error(`literal expressions must have a specific type, got ${Qr(e)}`);this.type=e,this.value=t}}class H1{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function kc(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ft(r,e,t){switch(typeof r){case"boolean":{if(wi(e,ht))return new lt(ht,r?"true":"false");if(!io(e,rt))throw new Error(`got a boolean, but expected ${Qr(e)}`);return new lt(rt,r)}case"number":{if(wi(e,li))return new lt(li,De(r));if(wi(e,rt))return new lt(rt,!!r);if(wi(e,ht))return new lt(ht,r.toString());if(!io(e,$))throw new Error(`got a number, but expected ${Qr(e)}`);return new lt($,r)}case"string":{if(wi(e,Ue))return new lt(Ue,Ac(r));if(wi(e,rt))return new lt(rt,!!r);if(!io(e,ht))throw new Error(`got a string, but expected ${Qr(e)}`);return new lt(ht,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return Z_(r,e,t);for(const i of r)if(typeof i!="number")throw new Error("expected an array of numbers");if(wi(e,li)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new lt(li,r)}if(wi(e,Ue)){if(r.length===3)return new lt(Ue,[...r,1]);if(r.length===4)return new lt(Ue,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!io(e,Bt))throw new Error(`got an array of numbers, but expected ${Qr(e)}`);return new lt(Bt,r)}const P={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},N_={[P.Get]:he(fe(1,1/0),hu),[P.Var]:he(fe(1,1),D_),[P.Has]:he(fe(1,1/0),hu),[P.Id]:he(G_,Or),[P.Concat]:he(fe(2,1/0),Se(ht)),[P.GeometryType]:he(z_,Or),[P.LineMetric]:he(Or),[P.Resolution]:he(O0,Or),[P.Zoom]:he(O0,Or),[P.Time]:he(O0,Or),[P.Any]:he(fe(2,1/0),Se(rt)),[P.All]:he(fe(2,1/0),Se(rt)),[P.Not]:he(fe(1,1),Se(rt)),[P.Equal]:he(fe(2,2),Se(pa)),[P.NotEqual]:he(fe(2,2),Se(pa)),[P.GreaterThan]:he(fe(2,2),Se($)),[P.GreaterThanOrEqualTo]:he(fe(2,2),Se($)),[P.LessThan]:he(fe(2,2),Se($)),[P.LessThanOrEqualTo]:he(fe(2,2),Se($)),[P.Multiply]:he(fe(2,1/0),uu),[P.Coalesce]:he(fe(2,1/0),uu),[P.Divide]:he(fe(2,2),Se($)),[P.Add]:he(fe(2,1/0),Se($)),[P.Subtract]:he(fe(2,2),Se($)),[P.Clamp]:he(fe(3,3),Se($)),[P.Mod]:he(fe(2,2),Se($)),[P.Pow]:he(fe(2,2),Se($)),[P.Abs]:he(fe(1,1),Se($)),[P.Floor]:he(fe(1,1),Se($)),[P.Ceil]:he(fe(1,1),Se($)),[P.Round]:he(fe(1,1),Se($)),[P.Sin]:he(fe(1,1),Se($)),[P.Cos]:he(fe(1,1),Se($)),[P.Atan]:he(fe(1,2),Se($)),[P.Sqrt]:he(fe(1,1),Se($)),[P.Match]:he(fe(4,1/0),du,B_),[P.Between]:he(fe(3,3),Se($)),[P.Interpolate]:he(fe(6,1/0),du,j_),[P.Case]:he(fe(3,1/0),U_,X_),[P.In]:he(fe(2,2),V_),[P.Number]:he(fe(1,1/0),Se(pa)),[P.String]:he(fe(1,1/0),Se(pa)),[P.Array]:he(fe(1,1/0),Se($)),[P.Color]:he(fe(1,4),Se($)),[P.Band]:he(fe(1,3),Se($)),[P.Palette]:he(fe(2,2),W_),[P.ToString]:he(fe(1,1),Se(rt|$|ht|Ue))};function hu(r,e,t){const i=r.length-1,n=new Array(i);for(let s=0;s<i;++s){const o=r[s+1];switch(typeof o){case"number":{n[s]=new lt($,o);break}case"string":{n[s]=new lt(ht,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return n}function D_(r,e,t){const i=r[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new lt(ht,i)]}function G_(r,e,t){t.featureId=!0}function z_(r,e,t){t.geometryType=!0}function O0(r,e,t){t.mapState=!0}function Or(r,e,t){const i=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function fe(r,e){return function(t,i,n){const s=t[0],o=t.length-1;if(r===e){if(o!==r){const a=r===1?"":"s";throw new Error(`expected ${r} argument${a} for ${s}, got ${o}`)}}else if(o<r||o>e){const a=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function uu(r,e,t){const i=r.length-1,n=new Array(i);for(let s=0;s<i;++s){const o=ft(r[s+1],e,t);n[s]=o}return n}function Se(r){return function(e,t,i){const n=e.length-1,s=new Array(n);for(let o=0;o<n;++o){const a=ft(e[o+1],r,i);s[o]=a}return s}}function U_(r,e,t){const i=r[0],n=r.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${n} instead`)}function du(r,e,t){const i=r[0],n=r.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${n} instead`)}function B_(r,e,t){const i=r.length-1,n=ht|$|rt,s=ft(r[1],n,t),o=ft(r[r.length-1],e,t),a=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const c=ft(r[l+2],s.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=ft(r[l+3],o.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function j_(r,e,t){const i=r[1];let n;switch(i[0]){case"linear":n=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);n=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new lt($,n);let o;try{o=ft(r[2],$,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(r.length-3);for(let l=0;l<a.length;l+=2){try{const c=ft(r[l+3],$,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=ft(r[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function X_(r,e,t){const i=ft(r[r.length-1],e,t),n=new Array(r.length-1);for(let s=0;s<n.length-1;s+=2){try{const o=ft(r[s+1],rt,t);n[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=ft(r[s+2],i.type,t);n[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return n[n.length-1]=i,n}function V_(r,e,t){let i=r[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],n=ht}else n=$;const s=new Array(i.length);for(let a=0;a<s.length;a++)try{const l=ft(i[a],n,t);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[ft(r[1],n,t),...s]}function W_(r,e,t){let i;try{i=ft(r[1],$,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const n=r[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const s=new Array(n.length);for(let o=0;o<s.length;o++){let a;try{a=ft(n[o],Ue,t)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof lt))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[i,...s]}function he(...r){return function(e,t,i){const n=e[0];let s;for(let o=0;o<r.length;o++){const a=r[o](e,t,i);if(o==r.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new H1(t,n,...s)}}function Z_(r,e,t){const i=r[0],n=N_[i];if(!n)throw new Error(`unknown operator: ${i}`);return n(r,e,t)}function Oc(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Oc(r.getGeometries()[0]);default:return""}}function K1(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ln(r,e,t){const i=ft(r,e,t);return Ci(i)}function Ci(r,e){if(r instanceof lt){if(r.type===Ue&&typeof r.value=="string"){const i=Ac(r.value);return function(){return i}}return function(){return r.value}}const t=r.operator;switch(t){case P.Number:case P.String:case P.Coalesce:return Y_(r);case P.Get:case P.Var:case P.Has:return $_(r);case P.Id:return i=>i.featureId;case P.GeometryType:return i=>i.geometryType;case P.Concat:{const i=r.args.map(n=>Ci(n));return n=>"".concat(...i.map(s=>s(n).toString()))}case P.Resolution:return i=>i.resolution;case P.Any:case P.All:case P.Between:case P.In:case P.Not:return K_(r);case P.Equal:case P.NotEqual:case P.LessThan:case P.LessThanOrEqualTo:case P.GreaterThan:case P.GreaterThanOrEqualTo:return H_(r);case P.Multiply:case P.Divide:case P.Add:case P.Subtract:case P.Clamp:case P.Mod:case P.Pow:case P.Abs:case P.Floor:case P.Ceil:case P.Round:case P.Sin:case P.Cos:case P.Atan:case P.Sqrt:return q_(r);case P.Case:return J_(r);case P.Match:return Q_(r);case P.Interpolate:return e9(r);case P.ToString:return t9(r);default:throw new Error(`Unsupported operator ${t}`)}}function Y_(r,e){const t=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ci(r.args[s]);switch(t){case P.Coalesce:return s=>{for(let o=0;o<i;++o){const a=n[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case P.Number:case P.String:return s=>{for(let o=0;o<i;++o){const a=n[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function $_(r,e){const i=r.args[0].value;switch(r.operator){case P.Get:return n=>{const s=r.args;let o=n.properties[i];for(let a=1,l=s.length;a<l;++a){const h=s[a].value;o=o[h]}return o};case P.Var:return n=>n.variables[i];case P.Has:return n=>{const s=r.args;if(!(i in n.properties))return!1;let o=n.properties[i];for(let a=1,l=s.length;a<l;++a){const h=s[a].value;if(!o||!Object.hasOwn(o,h))return!1;o=o[h]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function H_(r,e){const t=r.operator,i=Ci(r.args[0]),n=Ci(r.args[1]);switch(t){case P.Equal:return s=>i(s)===n(s);case P.NotEqual:return s=>i(s)!==n(s);case P.LessThan:return s=>i(s)<n(s);case P.LessThanOrEqualTo:return s=>i(s)<=n(s);case P.GreaterThan:return s=>i(s)>n(s);case P.GreaterThanOrEqualTo:return s=>i(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function K_(r,e){const t=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ci(r.args[s]);switch(t){case P.Any:return s=>{for(let o=0;o<i;++o)if(n[o](s))return!0;return!1};case P.All:return s=>{for(let o=0;o<i;++o)if(!n[o](s))return!1;return!0};case P.Between:return s=>{const o=n[0](s),a=n[1](s),l=n[2](s);return o>=a&&o<=l};case P.In:return s=>{const o=n[0](s);for(let a=1;a<i;++a)if(o===n[a](s))return!0;return!1};case P.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function q_(r,e){const t=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ci(r.args[s]);switch(t){case P.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=n[a](s);return o};case P.Divide:return s=>n[0](s)/n[1](s);case P.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=n[a](s);return o};case P.Subtract:return s=>n[0](s)-n[1](s);case P.Clamp:return s=>{const o=n[0](s),a=n[1](s);if(o<a)return a;const l=n[2](s);return o>l?l:o};case P.Mod:return s=>n[0](s)%n[1](s);case P.Pow:return s=>Math.pow(n[0](s),n[1](s));case P.Abs:return s=>Math.abs(n[0](s));case P.Floor:return s=>Math.floor(n[0](s));case P.Ceil:return s=>Math.ceil(n[0](s));case P.Round:return s=>Math.round(n[0](s));case P.Sin:return s=>Math.sin(n[0](s));case P.Cos:return s=>Math.cos(n[0](s));case P.Atan:return i===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case P.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function J_(r,e){const t=r.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Ci(r.args[n]);return n=>{for(let s=0;s<t-1;s+=2)if(i[s](n))return i[s+1](n);return i[t-1](n)}}function Q_(r,e){const t=r.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Ci(r.args[n]);return n=>{const s=i[0](n);for(let o=1;o<t-1;o+=2)if(s===i[o](n))return i[o+1](n);return i[t-1](n)}}function e9(r,e){const t=r.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Ci(r.args[n]);return n=>{const s=i[0](n),o=i[1](n);let a,l;for(let c=2;c<t;c+=2){const h=i[c](n);let u=i[c+1](n);const d=Array.isArray(u);if(d&&(u=F_(u)),h>=o)return c===2?u:d?i9(s,o,a,l,h,u):no(s,o,a,l,h,u);a=h,l=u}return l}}function t9(r,e){const t=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ci(r.args[s]);switch(t){case P.ToString:return s=>{const o=n[0](s);return r.args[0].type===Ue?Fc(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function no(r,e,t,i,n,s){const o=n-t;if(o===0)return i;const a=e-t,l=r===1?a/o:(Math.pow(r,a)-1)/(Math.pow(r,o)-1);return i+l*(s-i)}function i9(r,e,t,i,n,s){if(n-t===0)return i;const a=lu(i),l=lu(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[no(r,e,t,a[0],n,l[0]),no(r,e,t,a[1],n,l[1]),a[2]+no(r,e,t,0,n,c),no(r,e,t,i[3],n,s[3])];return M_(h)}const Y={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class U2 extends Go{constructor(e,t,i,n){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof n=="function"?Y.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(H.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Y.IDLE&&this.loader){this.state=Y.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Ql(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||a1&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Y.LOADED}).catch(i=>{this.state=Y.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function n9(r,e,t){const i=r;let n=!0,s=!1,o=!1;const a=[ja(i,H.LOAD,function(){o=!0,s||e()})];return i.src&&nc?(s=!0,i.decode().then(function(){n&&e()}).catch(function(l){n&&(o?e():t())})):a.push(ja(i,H.ERROR,t)),function(){n=!1,a.forEach(ke)}}function r9(r,e){return new Promise((t,i)=>{function n(){o(),t(r)}function s(){o(),i(new Error("Image load error"))}function o(){r.removeEventListener("load",n),r.removeEventListener("error",s)}r.addEventListener("load",n),r.addEventListener("error",s)})}function q1(r,e){return e&&(r.src=e),r.src&&nc?new Promise((t,i)=>r.decode().then(()=>t(r)).catch(n=>r.complete&&r.width?t(r):i(n))):r9(r)}function On(r,e){return e&&(r.src=e),r.src&&nc&&a1?r.decode().then(()=>createImageBitmap(r)).catch(t=>{if(r.complete&&r.width)return r;throw t}):q1(r)}class s9{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const n=N0(e,t,i);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,i){const n=N0(e,t,i);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,i,n,s){const o=N0(e,t,i),a=o in this.cache_;this.cache_[o]=n,s&&(n.getImageState()===Y.IDLE&&n.load(),n.getImageState()===Y.LOADING?n.ready().then(()=>{this.patternCache_[o]=Ja().createPattern(n.getImage(1),"repeat")}):this.patternCache_[o]=Ja().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function N0(r,e,t){const i=t?gi(t):"null";return e+":"+r+":"+i}const ci=new s9;let $s=null;class J1 extends Go{constructor(e,t,i,n,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=n===void 0?Y.IDLE:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Y.LOADED){$s||($s=Me(1,1,void 0,{willReadFrequently:!0})),$s.drawImage(this.image_,0,0);try{$s.getImageData(0,0,1,1),this.tainted_=!1}catch{$s=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(H.CHANGE)}handleImageError_(){this.imageState_=Y.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Y.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Me(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Y.IDLE){this.image_||this.initializeImage_(),this.imageState_=Y.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&q1(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Y.LOADED)return;const t=this.image_,i=Me(Math.ceil(t.width*e),Math.ceil(t.height*e)),n=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=I_(this.color_),i.fillRect(0,0,n.width/e,n.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Y.LOADED||this.imageState_===Y.ERROR)e();else{const t=()=>{(this.imageState_===Y.LOADED||this.imageState_===Y.ERROR)&&(this.removeEventListener(H.CHANGE,t),e())};this.addEventListener(H.CHANGE,t)}})),this.ready_}}function e2(r,e,t,i,n,s){let o=e===void 0?void 0:ci.get(e,t,n);return o||(o=new J1(r,r&&"src"in r?r.src||void 0:e,t,i,n),ci.set(e,t,n,o,s)),s&&o&&!ci.getPattern(e,t,n)&&ci.set(e,t,n,o,s),o}function Ii(r){return r?Array.isArray(r)?Fc(r):typeof r=="object"&&"src"in r?o9(r):r:null}function o9(r){if(!r.offset||!r.size)return ci.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=ci.getPattern(e,void 0,r.color);if(t)return t;const i=ci.get(r.src,"anonymous",null);if(i.getImageState()!==Y.LOADED)return null;const n=Me(r.size[0],r.size[1]);return n.drawImage(i.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),e2(n.canvas,e,void 0,Y.LOADED,r.color,!0),ci.getPattern(e,void 0,r.color)}const Q1="10px sans-serif",Ot="#000",ws="round",qi=[],Ji=0,Ts="round",vo=10,Eo="#000",wo="center",t2="middle",ir=[0,0,0,0],To=1,Wr=new Di;let Hs=null,fu;const wl={},a9=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function l9(r,e,t){return`${r} ${e} 16px "${t}"`}const c9=function(){let e,t;async function i(s){await t.ready;const o=await t.load(s);if(o.length===0)return!1;const a=Cl(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(h=>{const u=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=xl[h.weight]||h.weight;return u===l&&h.style===a.style&&d==c})}async function n(){await t.ready;let s=!0;const o=Wr.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let h=o[c];h<100&&(await i(c)?($l(wl),Wr.set(c,100)):(h+=10,Wr.set(c,h,!0),h<100&&(s=!1)))}e=void 0,s||(e=setTimeout(n,100))}return async function(s){t||(t=Gt?self.fonts:document.fonts);const o=Cl(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(a9.has(c))continue;const h=l9(o.style,o.weight,c);Wr.get(h)===void 0&&(Wr.set(h,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(n,100))}}(),h9=function(){let r;return function(e){let t=wl[e];if(t==null){if(Gt){const i=Cl(e),n=ef(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);wl[e]=t}return t}}();function ef(r,e){return Hs||(Hs=Me(1,1)),r!=fu&&(Hs.font=r,fu=Hs.font),Hs.measureText(e)}function tf(r,e){return ef(r,e).width}function gu(r,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((n,s)=>Math.max(n,tf(r,s)),0);return t[e]=i,i}function u9(r,e){const t=[],i=[],n=[];let s=0,o=0,a=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const u=e[c];if(u===`
`||c===h){s=Math.max(s,o),n.push(o),o=0,a+=l,l=0;continue}const d=e[c+1]||r.font,f=tf(d,u);t.push(f),o+=f;const g=h9(d);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:t,heights:i,lineWidths:n}}function d9(r,e,t,i,n,s,o,a,l,c,h){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=u=>u.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),i.contextInstructions?(r.translate(l,c),r.scale(h[0],h[1]),f9(i,r)):h[0]<0||h[1]<0?(r.translate(l,c),r.scale(h[0],h[1]),r.drawImage(i,n,s,o,a,0,0,o,a)):r.drawImage(i,n,s,o,a,l,c,o*h[0],a*h[1]),r.restore()}function f9(r,e){const t=r.contextInstructions;for(let i=0,n=t.length;i<n;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class B2{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=De(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new B2({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ie()}getImage(e){return ie()}getHitDetectionImage(){return ie()}getPixelRatio(e){return 1}getImageState(){return ie()}getImageSize(){return ie()}getOrigin(){return ie()}getSize(){return ie()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=De(e)}listenImageChange(e){ie()}load(){ie()}unlistenImageChange(e){ie()}ready(){return Promise.resolve()}}class j2 extends B2{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Y.LOADING:Y.LOADED,this.imageState_===Y.LOADING&&this.ready().then(()=>this.imageState_=Y.LOADED),this.render()}clone(){const e=this.getScale(),t=new j2({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,o;const t=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let n=(o=ci.get(i,null,null))==null?void 0:o.getImage(1);if(!n){const a=this.renderOptions_,l=Math.ceil(a.size*e),c=Me(l,l);this.draw_(a,c,e),n=c.canvas,ci.set(i,null,null,new J1(n,void 0,null,Y.LOADED,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const v=n;n=s,s=v}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),h=n-c,u=Math.sqrt(l*l+h*h),d=u/l;if(e==="miter"&&d<=i)return d*t;const f=t/2/d,g=t/2*(h/u),m=Math.sqrt((n+f)*(n+f)+g*g)-n;if(this.radius2_===void 0||e==="bevel")return m*2;const _=n*Math.sin(a),y=Math.sqrt(n*n-_*_),x=s-y,b=Math.sqrt(_*_+x*x)/_;if(b<=i){const v=b*t/2-s-n;return 2*Math.max(m,v)}return m*2}createRenderOptions(){let e=ws,t=Ts,i=0,n=null,s=0,o,a=0;this.stroke_&&(o=Ii(this.stroke_.getColor()??Eo),a=this.stroke_.getWidth()??To,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ts,e=this.stroke_.getLineCap()??ws,i=this.stroke_.getMiterLimit()??vo);const l=this.calculateLineJoinSize_(t,a,i),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=Ot),t.fillStyle=Ii(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),n=0;typeof i=="string"&&(i=gi(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0&&(t=Me(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?i:n;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ot,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Wo extends j2{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Wo({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class jt{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new jt({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=e2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Y.IDLE&&t.load(),t.getImageState()===Y.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?W(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:gi(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function mu(r,e,t,i){return t!==void 0&&i!==void 0?[t/r,i/e]:t!==void 0?t/r:i!==void 0?i/e:1}class Ms extends B2{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;me(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||W(o)),me(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),me(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Y.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?Y.LOADED:Y.IDLE:l=Y.LOADING:l=Y.LOADED),this.color_=e.color!==void 0?gi(e.color):null,this.iconImage_=e2(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,h;if(e.size)[c,h]=e.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(mu(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(mu(c,h,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Ms({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=e2(null,e,this.crossOrigin_,Y.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Y.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Y.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(H.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(H.CHANGE,e)}ready(){return this.iconImage_.ready()}}class At{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new At({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class et{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=pu,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new et({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=pu,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function g9(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(me(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let D0=null;function nf(r,e){if(!D0){const t=new jt({color:"rgba(255,255,255,0.4)"}),i=new At({color:"#3399CC",width:1.25});D0=[new et({image:new Wo({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return D0}function rf(){const r={},e=[255,255,255,1],t=[0,153,255,1],i=3;return r.Polygon=[new et({fill:new jt({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new et({stroke:new At({color:e,width:i+2})}),new et({stroke:new At({color:t,width:i})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new et({image:new Wo({radius:i*2,fill:new jt({color:t}),stroke:new At({color:e,width:i/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function pu(r){return r.getGeometry()}const m9="#333";class ur{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=De(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new jt({color:m9}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ur({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof jt?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=De(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function p9(r){return!0}function _9(r){const e=kc(),t=y9(r,e),i=K1();return function(n,s){if(i.properties=n.getPropertiesInternal(),i.resolution=s,e.featureId){const o=n.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=Oc(n.getGeometry())),t(i)}}function _u(r){const e=kc(),t=r.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=Tl(r[o],e);const n=K1(),s=new Array(t);return function(o,a){if(n.properties=o.getPropertiesInternal(),n.resolution=a,e.featureId){const c=o.getId();c!==void 0?n.featureId=c:n.featureId=null}let l=0;for(let c=0;c<t;++c){const h=i[c](n);h&&(s[l]=h,l+=1)}return s.length=l,s}}function y9(r,e){const t=r.length,i=new Array(t);for(let n=0;n<t;++n){const s=r[n],o="filter"in s?ln(s.filter,rt,e):p9;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Tl(s.style[c],e)}else a=[Tl(s.style,e)];i[n]={filter:o,styles:a}}return function(n){const s=[];let o=!1;for(let a=0;a<t;++a){const l=i[a].filter;if(l(n)&&!(r[a].else&&o)){o=!0;for(const c of i[a].styles){const h=c(n);h&&s.push(h)}}}return s}}function Tl(r,e){const t=So(r,"",e),i=Ro(r,"",e),n=x9(r,e),s=C9(r,e),o=Dt(r,"z-index",e);if(!t&&!i&&!n&&!s&&!Ln(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const a=new et;return function(l){let c=!0;if(t){const h=t(l);h&&(c=!1),a.setFill(h)}if(i){const h=i(l);h&&(c=!1),a.setStroke(h)}if(n){const h=n(l);h&&(c=!1),a.setText(h)}if(s){const h=s(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function So(r,e,t){let i;if(e+"fill-pattern-src"in r)i=w9(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return s=>null;i=Nc(r,e+"fill-color",t)}if(!i)return null;const n=new jt;return function(s){const o=i(s);return o===Ic?null:(n.setColor(o),n)}}function Ro(r,e,t){const i=Dt(r,e+"stroke-width",t),n=Nc(r,e+"stroke-color",t);if(!i&&!n)return null;const s=Yi(r,e+"stroke-line-cap",t),o=Yi(r,e+"stroke-line-join",t),a=sf(r,e+"stroke-line-dash",t),l=Dt(r,e+"stroke-line-dash-offset",t),c=Dt(r,e+"stroke-miter-limit",t),h=new At;return function(u){if(n){const d=n(u);if(d===Ic)return null;h.setColor(d)}if(i&&h.setWidth(i(u)),s){const d=s(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(o){const d=o(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function x9(r,e){const t="text-",i=Yi(r,t+"value",e);if(!i)return null;const n=So(r,t,e),s=So(r,t+"background-",e),o=Ro(r,t,e),a=Ro(r,t+"background-",e),l=Yi(r,t+"font",e),c=Dt(r,t+"max-angle",e),h=Dt(r,t+"offset-x",e),u=Dt(r,t+"offset-y",e),d=ss(r,t+"overflow",e),f=Yi(r,t+"placement",e),g=Dt(r,t+"repeat",e),p=X2(r,t+"scale",e),m=ss(r,t+"rotate-with-view",e),_=Dt(r,t+"rotation",e),y=Yi(r,t+"align",e),x=Yi(r,t+"justify",e),C=Yi(r,t+"baseline",e),b=ss(r,t+"keep-upright",e),v=sf(r,t+"padding",e),w=V2(r,t+"declutter-mode"),L=new ur({declutterMode:w});return function(T){if(L.setText(i(T)),n&&L.setFill(n(T)),s&&L.setBackgroundFill(s(T)),o&&L.setStroke(o(T)),a&&L.setBackgroundStroke(a(T)),l&&L.setFont(l(T)),c&&L.setMaxAngle(c(T)),h&&L.setOffsetX(h(T)),u&&L.setOffsetY(u(T)),d&&L.setOverflow(d(T)),f){const R=f(T);if(R!=="point"&&R!=="line")throw new Error("Expected point or line for text-placement");L.setPlacement(R)}if(g&&L.setRepeat(g(T)),p&&L.setScale(p(T)),m&&L.setRotateWithView(m(T)),_&&L.setRotation(_(T)),y){const R=y(T);if(R!=="left"&&R!=="center"&&R!=="right"&&R!=="end"&&R!=="start")throw new Error("Expected left, right, center, start, or end for text-align");L.setTextAlign(R)}if(x){const R=x(T);if(R!=="left"&&R!=="right"&&R!=="center")throw new Error("Expected left, right, or center for text-justify");L.setJustify(R)}if(C){const R=C(T);if(R!=="bottom"&&R!=="top"&&R!=="middle"&&R!=="alphabetic"&&R!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");L.setTextBaseline(R)}return v&&L.setPadding(v(T)),b&&L.setKeepUpright(b(T)),L}}function C9(r,e){return"icon-src"in r?b9(r,e):"shape-points"in r?v9(r,e):"circle-radius"in r?E9(r,e):null}function b9(r,e){const t="icon-",i=t+"src",n=of(r[i],i),s=i2(r,t+"anchor",e),o=X2(r,t+"scale",e),a=Dt(r,t+"opacity",e),l=i2(r,t+"displacement",e),c=Dt(r,t+"rotation",e),h=ss(r,t+"rotate-with-view",e),u=xu(r,t+"anchor-origin"),d=Cu(r,t+"anchor-x-units"),f=Cu(r,t+"anchor-y-units"),g=L9(r,t+"color"),p=S9(r,t+"cross-origin"),m=R9(r,t+"offset"),_=xu(r,t+"offset-origin"),y=n2(r,t+"width"),x=n2(r,t+"height"),C=T9(r,t+"size"),b=V2(r,t+"declutter-mode"),v=new Ms({src:n,anchorOrigin:u,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:m,offsetOrigin:_,height:x,width:y,size:C,declutterMode:b});return function(w){return a&&v.setOpacity(a(w)),l&&v.setDisplacement(l(w)),c&&v.setRotation(c(w)),h&&v.setRotateWithView(h(w)),o&&v.setScale(o(w)),s&&v.setAnchor(s(w)),v}}function v9(r,e){const t="shape-",i=t+"points",n=t+"radius",s=Sl(r[i],i),o=Sl(r[n],n),a=So(r,t,e),l=Ro(r,t,e),c=X2(r,t+"scale",e),h=i2(r,t+"displacement",e),u=Dt(r,t+"rotation",e),d=ss(r,t+"rotate-with-view",e),f=n2(r,t+"radius2"),g=n2(r,t+"angle"),p=V2(r,t+"declutter-mode"),m=new j2({points:s,radius:o,radius2:f,angle:g,declutterMode:p});return function(_){return a&&m.setFill(a(_)),l&&m.setStroke(l(_)),h&&m.setDisplacement(h(_)),u&&m.setRotation(u(_)),d&&m.setRotateWithView(d(_)),c&&m.setScale(c(_)),m}}function E9(r,e){const t="circle-",i=So(r,t,e),n=Ro(r,t,e),s=Dt(r,t+"radius",e),o=X2(r,t+"scale",e),a=i2(r,t+"displacement",e),l=Dt(r,t+"rotation",e),c=ss(r,t+"rotate-with-view",e),h=V2(r,t+"declutter-mode"),u=new Wo({radius:5,declutterMode:h});return function(d){return s&&u.setRadius(s(d)),i&&u.setFill(i(d)),n&&u.setStroke(n(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),o&&u.setScale(o(d)),u}}function Dt(r,e,t){if(!(e in r))return;const i=ln(r[e],$,t);return function(n){return Sl(i(n),e)}}function Yi(r,e,t){if(!(e in r))return null;const i=ln(r[e],ht,t);return function(n){return of(i(n),e)}}function w9(r,e,t){const i=Yi(r,e+"pattern-src",t),n=yu(r,e+"pattern-offset",t),s=yu(r,e+"pattern-size",t),o=Nc(r,e+"color",t);return function(a){return{src:i(a),offset:n&&n(a),size:s&&s(a),color:o&&o(a)}}}function ss(r,e,t){if(!(e in r))return null;const i=ln(r[e],rt,t);return function(n){const s=i(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Nc(r,e,t){if(!(e in r))return null;const i=ln(r[e],Ue,t);return function(n){return af(i(n),e)}}function sf(r,e,t){if(!(e in r))return null;const i=ln(r[e],Bt,t);return function(n){return Zo(i(n),e)}}function i2(r,e,t){if(!(e in r))return null;const i=ln(r[e],Bt,t);return function(n){const s=Zo(i(n),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function yu(r,e,t){if(!(e in r))return null;const i=ln(r[e],Bt,t);return function(n){return lf(i(n),e)}}function X2(r,e,t){if(!(e in r))return null;const i=ln(r[e],Bt|$,t);return function(n){return P9(i(n),e)}}function n2(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function T9(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return De(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function S9(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function xu(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Cu(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function R9(r,e){const t=r[e];if(t!==void 0)return Zo(t,e)}function V2(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function L9(r,e){const t=r[e];if(t!==void 0)return af(t,e)}function Zo(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let i=0;i<t;++i)if(typeof r[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function of(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function Sl(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function af(r,e){if(typeof r=="string")return r;const t=Zo(r,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function lf(r,e){const t=Zo(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function P9(r,e){return typeof r=="number"?r:lf(r,e)}const bu={RENDER_ORDER:"renderOrder"};class vr extends kn{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(bu.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new Pc(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(bu.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?nf:e;const t=I9(e);this.styleFunction_=e===null?void 0:g9(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function I9(r){if(r===void 0)return nf;if(!r)return null;if(typeof r=="function"||r instanceof et)return r;if(!Array.isArray(r))return _u([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof et){const n=new Array(e);for(let s=0;s<e;++s){const o=r[s];if(!(o instanceof et))throw new Error("Expected a list of style instances");n[s]=o}return n}if("style"in t){const n=new Array(e);for(let s=0;s<e;++s){const o=r[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");n[s]=o}return _9(n)}return _u(r)}class lo extends Ni{constructor(e,t,i,n){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=n}}class A9 extends zo{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ie()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;Jt(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),hr(n,i)}forEachFeatureAtCoordinate(e,t,i,n,s,o,a,l){let c;const h=t.viewState;function u(C,b,v,w){return s.call(o,b,C?v:null,w)}const d=h.projection,f=A2(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&n){const C=d.getExtent(),b=ae(C);g.push([-b,0],[b,0])}const p=t.layerStatesArray,m=p.length,_=[],y=[];for(let C=0;C<g.length;C++)for(let b=m-1;b>=0;--b){const v=p[b],w=v.layer;if(w.hasRenderer()&&Lc(v,h)&&a.call(l,w)){const L=w.getRenderer(),T=w.getSource();if(L&&T){const R=T.getWrapX()?f:e,M=u.bind(null,v.managed);y[0]=R[0]+g[C][0],y[1]=R[1]+g[C][1],c=L.forEachFeatureAtCoordinate(y,t,i,M,_)}if(c)return c}}if(_.length===0)return;const x=1/_.length;return _.forEach((C,b)=>C.distanceSq+=b*x),_.sort((C,b)=>C.distanceSq-b.distanceSq),_.some(C=>c=C.callback(C.feature,C.layer,C.geometry)),c}hasFeatureAtCoordinate(e,t,i,n,s,o){return this.forEachFeatureAtCoordinate(e,t,i,n,ms,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ie()}scheduleExpireIconCache(e){ci.canExpireCache()&&e.postRenderFunctions.push(F9)}}function F9(r,e){ci.expire()}class M9 extends A9{constructor(e){super(e),this.fontChangeListenerKey_=ge(Wr,_o.PROPERTYCHANGE,e.redrawText,e),this.element_=Gt?D1():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Oi+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const n=new lo(e,void 0,t);i.dispatchEvent(n)}}disposeInternal(){ke(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ct.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,h)=>c.zIndex-h.zIndex);t.some(c=>c.layer instanceof vr&&c.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,h=t.length;c<h;++c){const u=t[c];e.layerIndex=c;const d=u.layer,f=d.getSourceState();if(!Lc(u,n)||f!="ready"&&f!="undefined"){d.unrender();continue}const g=d.render(e,o);g&&(g!==o&&(this.children_.push(g),o=g),s.push(u))}this.declutter(e,s),e_(this.element_,this.children_);const l=this.getMap().getTargetElement();if(xn(l)){const c=l.getContext("2d");for(const h of this.children_){const u=h.firstElementChild||h,d=h.style.backgroundColor;if(d&&(!xn(u)||u.width>0)&&(c.fillStyle=d,c.fillRect(0,0,l.width,l.height)),xn(u)&&u.width>0){const f=h.style.opacity||u.style.opacity;c.globalAlpha=f===""?1:Number(f);const g=u.style.transform;if(g)c.setTransform(...pl(g));else{const p=parseFloat(u.style.width)/u.width,m=parseFloat(u.style.height)/u.height;c.setTransform(p,0,0,m,0,0)}c.drawImage(u,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(ct.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const n=t[i],s=n.layer;s.getDeclutter()&&s.renderDeclutter(e,n)}t.forEach(i=>i.layer.renderDeferred(e))}}}function cf(r){if(r instanceof kn){r.setMapInternal(null);return}r instanceof Pn&&r.getLayers().forEach(cf)}function hf(r,e){if(r instanceof kn){r.setMapInternal(e);return}if(r instanceof Pn){const t=r.getLayers().getArray();for(let i=0,n=t.length;i<n;++i)hf(t[i],e)}}let uf=class extends Di{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=k9(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Np,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Fe(),this.pixelToCoordinateTransform_=Fe(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Gt||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Gt||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Gt?new vt:t_()),this.interactions=t.interactions||(Gt?new vt:Z1({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new c1(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(tt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(tt.VIEW,this.handleViewChanged_),this.addChangeListener(tt.SIZE,this.handleSizeChanged_),this.addChangeListener(tt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof ai)&&e.view.then(function(n){i.setView(new ai(n))}),this.controls.addEventListener(Li.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(Li.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(Li.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(Li.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(Li.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(Li.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){hf(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){var e;this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),(e=this.resizeObserver_)==null||e.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:ms,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(n){i.push(n)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(n){n instanceof Pn?t(n.getLayers()):e.push(n)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const n=t.layerFilter!==void 0?t.layerFilter:ms,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=i.width/n[0],o=i.height/n[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(tt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return An(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ae(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(tt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof vt){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const n=e[t];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Xe(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ae(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(tt.SIZE)}getView(){return this.get(tt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,n){return zp(this.frameState_,e,t,i,n)}handleBrowserEvent(e,t){t=t||e.type;const i=new Zi(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Pi.POINTERDOWN||i===H.WHEEL||i===H.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===n?n.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,s=n;if(e){const o=e.viewHints;if(o[Te.ANIMATING]||o[Te.INTERACTING]){const a=Date.now()-e.time>8;n=a?0:8,s=a?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(ct.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ct.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Xr(Si.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Xr(Si.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let n=0,s=i.length;n<s;++n)i[n](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){var i,n;if(this.mapBrowserEventHandler_){for(let s=0,o=this.targetChangeHandlerKeys_.length;s<o;++s)ke(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(H.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(H.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!xn(this.targetElement_)){(i=this.resizeObserver_)==null||i.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(xn(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new M9(this)),!xn(t)){this.mapBrowserEventHandler_=new Dp(this,this.moveTolerance_);for(const o in Ce)this.mapBrowserEventHandler_.addEventListener(Ce[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(H.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(H.WHEEL,this.boundHandleBrowserEvent_,l1?{passive:!1}:!1);let s;if(this.keyboardEventTarget_)s=this.keyboardEventTarget_;else{const o=t.getRootNode();s=o instanceof ShadowRoot?o.host:t}if(this.targetChangeHandlerKeys_=[ge(s,H.KEYDOWN,this.handleBrowserEvent,this),ge(s,H.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const o=t.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),(n=this.resizeObserver_)==null||n.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ke(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ke(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ge(e,_o.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ge(e,H.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ke),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Oh("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ge(e,_o.PROPERTYCHANGE,this.render,this),ge(e,H.CHANGE,this.render,this),ge(e,"addlayer",this.handleLayerAdd_,this),ge(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){cf(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(t!==void 0&&cu(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:po(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:W(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=po(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!rn(this.previousExtent_)&&!qt(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Xr(Si.MOVESTART,this,n)),this.previousExtent_=Hl(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Te.ANIMATING]&&!s.viewHints[Te.INTERACTING]&&!qt(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Xr(Si.MOVEEND,this,s)),t1(s.extent,this.previousExtent_))),this.dispatchEvent(new Xr(Si.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Si.LOADSTART)||this.hasListener(Si.LOADEND)||this.hasListener(ct.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Oh("removelayer",t)),this.set(tt.LAYERGROUP,e)}setSize(e){this.set(tt.SIZE,e)}setTarget(e){this.set(tt.TARGET,e)}setView(e){if(!e||e instanceof ai){this.set(tt.VIEW,e);return}this.set(tt.VIEW,new ai);const t=this;e.then(function(i){t.setView(new ai(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let n,s;if(xn(e))n=e.width,s=e.height;else{const o=getComputedStyle(e);n=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(n)&&!isNaN(s)&&(t=[Math.max(0,n),Math.max(0,s)],!cu(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&p1("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!sn(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function k9(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Pn({layers:r.layers});t[tt.LAYERGROUP]=i,t[tt.TARGET]=r.target,t[tt.VIEW]=r.view instanceof ai?r.view:new ai;let n;r.controls!==void 0&&(Array.isArray(r.controls)?n=new vt(r.controls.slice()):(me(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=r.controls));let s;r.interactions!==void 0&&(Array.isArray(r.interactions)?s=new vt(r.interactions.slice()):(me(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=r.interactions));let o;return r.overlays!==void 0?Array.isArray(r.overlays)?o=new vt(r.overlays.slice()):(me(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=r.overlays):o=new vt,{controls:n,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const O9=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.ol-overviewmap .ol-viewport:hover{cursor:pointer}';class Ee extends Di{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ee(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ke(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ge(e,H.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?N9(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function N9(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(me(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}class W2 extends ki{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new W2(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<n){if(l===0)for(let c=0;c<this.stride;++c)i[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);i[0]=s[0]+c*o,i[1]=s[1]+c*a;for(let h=2;h<this.stride;++h)i[h]=s[h]}return i.length=this.stride,l}return n}containsXY(e,t){const i=this.flatCoordinates,n=e-i[0],s=t-i[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return In(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Ne(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:ql(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+i;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=R1(n,0,e,this.stride);n[s++]=n[0]+t;for(let o=1,a=this.stride;o<a;++o)n[s++]=n[o];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),n=this.getStride();this.setCenter(uc(i,0,i.length,n,e,t,i)),this.changed()}}W2.prototype.transform;function r2(r,e,t,i,n,s,o){let a,l;const c=(t-e)/i;if(c===1)a=e;else if(c===2)a=e,l=n;else if(c!==0){let h=r[e],u=r[e+1],d=0;const f=[0];for(let m=e+i;m<t;m+=i){const _=r[m],y=r[m+1];d+=Math.sqrt((_-h)*(_-h)+(y-u)*(y-u)),f.push(d),h=_,u=y}const g=n*d,p=Hm(f,g);p<0?(l=(g-f[-p-2])/(f[-p-1]-f[-p-2]),a=e+(-p-2)*i):a=e+p*i}o=o>1?o:2,s=s||new Array(o);for(let h=0;h<o;++h)s[h]=a===void 0?NaN:l===void 0?r[a+h]:$t(r[a+h],r[a+i+h],l);return s}function Rl(r,e,t,i,n,s){if(t==e)return null;let o;if(n<r[e+i-1])return s?(o=r.slice(e,e+i),o[i-1]=n,o):null;if(r[t-1]<n)return s?(o=r.slice(t-i,t),o[i-1]=n,o):null;if(n==r[e+i-1])return r.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const d=a+l>>1;n<r[(d+1)*i-1]?l=d:a=d+1}const c=r[a*i-1];if(n==c)return r.slice((a-1)*i,(a-1)*i+i);const h=r[(a+1)*i-1],u=(n-c)/(h-c);o=[];for(let d=0;d<i-1;++d)o.push($t(r[(a-1)*i+d],r[a*i+d],u));return o.push(n),o}function D9(r,e,t,i,n,s,o){if(o)return Rl(r,e,t[t.length-1],i,n,s);let a;if(n<r[i-1])return s?(a=r.slice(0,i),a[i-1]=n,a):null;if(r[r.length-1]<n)return s?(a=r.slice(r.length-i),a[i-1]=n,a):null;for(let l=0,c=t.length;l<c;++l){const h=t[l];if(e!=h){if(n<r[e+i-1])return null;if(n<=r[h-1])return Rl(r,e,h,i,n,!1);e=h}}return null}function Dc(r,e,t,i){let n=r[e],s=r[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=r[a],c=r[a+1];o+=Math.sqrt((l-n)*(l-n)+(c-s)*(c-s)),n=l,s=c}return o}class ze extends ki{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){xe(this.flatCoordinates,e),this.changed()}clone(){const e=new ze(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<pr(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,n))}forEachSegment(e){return A1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Rl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return yn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return r2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Dc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=D2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new ze(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return G2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jo(this.flatCoordinates,0,e,this.stride),this.changed()}}class wt extends ki{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const n=e,s=[],o=[];for(let l=0,c=n.length;l<c;++l){const h=n[l];xe(s,h.getFlatCoordinates()),o.push(s.length)}const a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){xe(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new wt(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<pr(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,n))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,D9(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return bo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ze(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,n=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new ze(e.slice(s,l),i);n.push(c),s=l}return n}getLength(){const e=this.ends_;let t=0,i=0;for(let n=0,s=e.length;n<s;++n)i+=Dc(this.flatCoordinates,t,e[n],this.stride),t=e[n];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=r2(t,i,l,s,.5);xe(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=P1(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new wt(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return G3(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class mi extends ki{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){xe(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new mi(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<pr(this.getExtent(),e,t))return n;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=En(e,t,s[a],s[a+1]);if(c<n){n=c;for(let h=0;h<o;++h)i[h]=s[a+h];i.length=o}}return n}getCoordinates(){return yn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Oe(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,n=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Oe(e.slice(s,s+i),t);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let n=0,s=t.length;n<s;n+=i){const o=t[n],a=t[n+1];if(e1(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jo(this.flatCoordinates,0,e,this.stride),this.changed()}}function df(r,e,t,i){const n=[];let s=mt();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=Kl(r,e,l[0],i),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return n}class Xt extends ki{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const n=e,s=[],o=[];for(let a=0,l=n.length;a<l;++a){const c=n[a],h=s.length,u=c.getEnds();for(let d=0,f=u.length;d<f;++d)u[d]+=h;xe(s,c.getFlatCoordinates()),o.push(u)}t=n.length===0?this.getLayout():n[0].getLayout(),e=s,i=o}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;xe(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,s=t.length;n<s;++n)t[n]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const i=new Xt(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,n){return n<pr(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F3(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),M3(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return D3(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return A3(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),yl(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,_l(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=df(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=I1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new mi(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;k1(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=yl(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=O3(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new Xt(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),n=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Ve(this.flatCoordinates.slice(t,n),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=s;const h=new Ve(t.slice(s,c),e,l);n.push(h),s=c}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return z3(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=L1(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const n=i[i.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}class ff{drawCustom(e,t,i,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const ne={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},_a=[ne.FILL],Cn=[ne.STROKE],nr=[ne.BEGIN_PATH],vu=[ne.CLOSE_PATH];class Yo extends ff{constructor(e,t,i,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],Kt(i,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(e,t,i,n,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=n);let h=e[t],u=e[t+1];const d=this.tmpCoordinate_;let f=!0,g,p,m;for(g=t+n;g<i;g+=n)d[0]=e[g],d[1]=e[g+1],m=Km(c,d),m!==p?(f&&(a[l++]=h,a[l++]=u,f=!1),a[l++]=d[0],a[l++]=d[1]):m===qm.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,h=d[0],u=d[1],p=m;return(s&&f||g===t+n)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(e,t,i,n,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,n,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,n,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,h,u,d,f;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const g=e.getEndss();f=0;for(let p=0,m=g.length;p<m;++p){const _=[];f=this.drawCustomCoordinates_(c,f,g[p],a,_),d.push(_)}this.instructions.push([ne.CUSTOM,l,d,e,i,_l,s]),this.hitDetectionInstructions.push([ne.CUSTOM,l,d,e,n||i,_l,s]);break;case"Polygon":case"MultiLineString":u=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,u),this.instructions.push([ne.CUSTOM,l,u,e,i,bo,s]),this.hitDetectionInstructions.push([ne.CUSTOM,l,u,e,n||i,bo,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([ne.CUSTOM,l,h,e,i,yn,s]),this.hitDetectionInstructions.push([ne.CUSTOM,l,h,e,n||i,yn,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([ne.CUSTOM,l,h,e,i,yn,s]),this.hitDetectionInstructions.push([ne.CUSTOM,l,h,e,n||i,yn,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([ne.CUSTOM,l,h,e,i,void 0,s]),this.hitDetectionInstructions.push([ne.CUSTOM,l,h,e,n||i,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[ne.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ne.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let n,s,o=-1;for(t=0;t<i;++t)n=e[t],s=n[0],s==ne.END_GEOMETRY?o=t:s==ne.BEGIN_GEOMETRY&&(n[2]=t,Jm(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Ii(i||Ot)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Ii(i||Eo);const n=e.getLineCap();t.lineCap=n!==void 0?n:ws;const s=e.getLineDash();t.lineDash=s?s.slice():qi;const o=e.getLineDashOffset();t.lineDashOffset=o||Ji;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:Ts;const l=e.getWidth();t.lineWidth=l!==void 0?l:To;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:vo,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[ne.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ne.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,n=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=n||s!=e.currentLineDash&&!sn(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=n,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[ne.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=t1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;It(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class G9 extends Yo{constructor(e,t,i,n){super(e,t,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Kt(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,s);this.instructions.push([ne.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=[];for(let l=0,c=n.length;l<c;l+=e.getStride())(!this.maxExtent||Kt(this.maxExtent,n.slice(l,l+2)))&&s.push(n[l],n[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([ne.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),n=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class z9 extends Yo{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinates_(e,t,i,n){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,n,!1,!1),a=[ne.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,qi,Ji],nr);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Cn),this.endGeometry(t)}drawMultiLineString(e,t,i){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,qi,Ji],nr);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,a[u],c);this.hitDetectionInstructions.push(Cn),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Cn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Cn),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(nr)}}class Eu extends Yo{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinatess_(e,t,i,n){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(nr),this.hitDetectionInstructions.push(nr);for(let c=0;c<l;++c){const h=i[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,h,n,!0,!a),f=[ne.MOVE_TO_LINE_TO,u,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(vu),this.hitDetectionInstructions.push(vu)),t=h}return o&&(this.instructions.push(_a),this.hitDetectionInstructions.push(_a)),a&&(this.instructions.push(Cn),this.hitDetectionInstructions.push(Cn)),t}drawCircle(e,t,i){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Ot]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,qi,Ji]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[ne.CIRCLE,c];this.instructions.push(nr,h),this.hitDetectionInstructions.push(nr,h),n.fillStyle!==void 0&&(this.instructions.push(_a),this.hitDetectionInstructions.push(_a)),n.strokeStyle!==void 0&&(this.instructions.push(Cn),this.hitDetectionInstructions.push(Cn)),this.endGeometry(t)}drawPolygon(e,t,i){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Ot]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,qi,Ji]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,i){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Ot]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,qi,Ji]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,a[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,n=t.length;i<n;++i)t[i]=$n(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function U9(r,e,t,i,n){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<r&&o+n<i;){const[c,h]=l.slice(-2),u=e[o+n],d=e[o+n+1],f=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=f,a>=r){const g=(r-a+f)/f,p=$t(c,u,g),m=$t(h,d,g);l.push(p,m),s.push(l),l=[p,m],a==r&&(o+=n),a=0}else if(a<r)l.push(e[o+n],e[o+n+1]),o+=n;else{const g=f-a,p=$t(c,u,g/f),m=$t(h,d,g/f);l.push(p,m),s.push(l),l=[p,m],a=0,o+=n}}return a>0&&s.push(l),s}function B9(r,e,t,i,n){let s=t,o=t,a=0,l=0,c=t,h,u,d,f,g,p,m,_,y,x;for(u=t;u<i;u+=n){const C=e[u],b=e[u+1];g!==void 0&&(y=C-g,x=b-p,f=Math.sqrt(y*y+x*x),m!==void 0&&(l+=d,h=Math.acos((m*y+_*x)/(d*f)),h>r&&(l>a&&(a=l,s=c,o=u),l=0,c=u-n)),d=f,m=y,_=x),g=C,p=b}return l+=f,l>a?[c,u]:[s,o]}const s2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class j9 extends Yo{constructor(e,t,i,n){super(e,t,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ot]={fillStyle:Ot},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const n=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!n&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let h=null,u=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Ne(this.maxExtent,e.getExtent()))return;let d;if(h=e.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=e.getEnds();else if(c=="Polygon")d=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const m=e.getEndss();d=[];for(let _=0,y=m.length;_<y;++_)d.push(m[_][0])}this.beginGeometry(e,t,i);const f=o.repeat,g=f?void 0:o.textAlign;let p=0;for(let m=0,_=d.length;m<_;++m){let y;f?y=U9(f*this.resolution,h,p,d[m],u):y=[h.slice(p,d[m])];for(let x=0,C=y.length;x<C;++x){const b=y[x];let v=0,w=b.length;if(g==null){const T=B9(o.maxAngle,b,0,b.length,2);v=T[0],w=T[1]}for(let T=v;T<w;T+=u)a.push(b[T],b[T+1]);const L=a.length;p=d[m],this.drawChars_(l,L),l=L}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),u=2;break;case"Polygon":h=e.getFlatInteriorPoint(),o.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const C=e.getFlatInteriorPoints();h=[];for(let b=0,v=C.length;b<v;b+=3)o.overflow||d.push(C[b+2]/this.resolution),h.push(C[b],C[b+1]);if(h.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(h,u);if(f===l)return;if(d&&(f-l)/2!==h.length/u){let C=l/2;d=d.filter((b,v)=>{const w=a[(C+v)*2]===h[v*u]&&a[(C+v)*2+1]===h[v*u+1];return w||--C,w})}this.saveTextStates_();const g=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,p=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,i);let m=o.padding;if(m!=ir&&(o.scale[0]<0||o.scale[1]<0)){let C=o.padding[0],b=o.padding[1],v=o.padding[2],w=o.padding[3];o.scale[0]<0&&(b=-b,w=-w),o.scale[1]<0&&(C=-C,v=-v),m=[C,b,v,w]}const _=this.pixelRatio;this.instructions.push([ne.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,m==ir?ir:m.map(function(C){return C*_}),g,p,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/_,x=g?g.slice(0):null;x&&(x[1]=Ot),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,m,x,p,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ot:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||wo,justify:t.justify,textBaseline:t.textBaseline||t2,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=s2[n.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([ne.DRAW_CHARS,e,t,c,n.overflow,a,n.maxAngle,l,h,s,d*l,u,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ne.DRAW_CHARS,e,t,c,n.overflow,a&&Ot,n.maxAngle,l,h,s,d*l,u,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,n,s;if(!e)this.text_="";else{const o=e.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Ii(o.getColor()||Ot)):(n=null,this.textFillState_=n);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||ws,s.lineDash=p?p.slice():qi,s.lineDashOffset=m===void 0?Ji:m,s.lineJoin=a.getLineJoin()||Ts,s.lineWidth=_===void 0?To:_,s.miterLimit=y===void 0?vo:y,s.strokeStyle=Ii(a.getColor()||Eo)}i=this.textState_;const l=e.getFont()||Q1;c9(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||t2,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||ir,i.scale=c===void 0?[1,1]:c;const h=e.getOffsetX(),u=e.getOffsetY(),d=e.getRotateWithView(),f=e.getKeepUpright(),g=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=g===void 0?0:g,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:W(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+W(n.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const X9={Circle:Eu,Default:Yo,Image:G9,LineString:z9,Polygon:Eu,Text:j9};class gf{constructor(e,t,i,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const n in i){const s=i[n].finish();e[t][n]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let s=n[t];if(s===void 0){const o=X9[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=s}return s}}function V9(r,e,t,i,n,s,o,a,l,c,h,u,d=!0){let f=r[e],g=r[e+1],p=0,m=0,_=0,y=0;function x(){p=f,m=g,e+=i,f=r[e],g=r[e+1],y+=_,_=Math.sqrt((f-p)*(f-p)+(g-m)*(g-m))}do x();while(e<t-i&&y+_<s);let C=_===0?0:(s-y)/_;const b=$t(p,f,C),v=$t(m,g,C),w=e-i,L=y,T=s+a*l(c,n,h);for(;e<t-i&&y+_<T;)x();C=_===0?0:(T-y)/_;const R=$t(p,f,C),M=$t(m,g,C);let I=!1;if(d)if(u){const N=[b,v,R,M];uc(N,0,4,2,u,N,N),I=N[0]>N[2]}else I=b>R;const F=Math.PI,A=[],O=w+i===e;e=w,_=0,y=L,f=r[e],g=r[e+1];let j;if(O){x(),j=Math.atan2(g-m,f-p),I&&(j+=j>0?-F:F);const N=(R+b)/2,B=(M+v)/2;return A[0]=[N,B,(T-s)/2,j,n],A}n=n.replace(/\n/g," ");for(let N=0,B=n.length;N<B;){x();let Z=Math.atan2(g-m,f-p);if(I&&(Z+=Z>0?-F:F),j!==void 0){let ye=Z-j;if(ye+=ye>F?-2*F:ye<-F?2*F:0,Math.abs(ye)>o)return null}j=Z;const K=N;let ee=0;for(;N<B;++N){const ye=I?B-N-1:N,We=a*l(c,n[ye],h);if(e+i<t&&y+_<s+ee+We/2)break;ee+=We}if(N===K)continue;const z=I?n.substring(B-K,B-N):n.substring(K,N);C=_===0?0:(s+ee/2-y)/_;const ue=$t(p,f,C),be=$t(m,g,C);A.push([ue,be,ee/2,Z,z]),s+=ee}return A}class Gc{constructor(){ri(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ja(),{get:(e,t)=>{if(typeof Ja()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,n=t.length;i<n;++i){const s=t[i];if(typeof s=="function"){s(e);continue}const o=t[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Nr=mt(),un=[],Xi=[],Vi=[],dn=[];function wu(r){return r[3].declutterBox}const Tu=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function G0(r,e){return e==="start"?e=Tu.test(r)?"right":"left":e==="end"&&(e=Tu.test(r)?"left":"right"),s2[e]}function W9(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}function Z9(r,e,t){return t%2===0&&(r+=e),r}class Y9{constructor(e,t,i,n,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Fe(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new Gc:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,n){const s=e+t+i+n;if(this.labels_[s])return this.labels_[s];const o=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=l.justify?s2[l.justify]:G0(Array.isArray(e)?e[0]:e,l.textAlign||wo),d=n&&o.lineWidth?o.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(W9,[]),{width:g,height:p,widths:m,heights:_,lineWidths:y}=u9(l,f),x=g+d,C=[],b=(x+2)*h[0],v=(p+d)*h[1],w={width:b<0?Math.floor(b):Math.ceil(b),height:v<0?Math.floor(v):Math.ceil(v),contextInstructions:C};(h[0]!=1||h[1]!=1)&&C.push("scale",h),n&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",d),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),i&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const L=.5-u;let T=u*x+L*d;const R=[],M=[];let I=0,F=0,A=0,O=0,j;for(let N=0,B=f.length;N<B;N+=2){const Z=f[N];if(Z===`
`){F+=I,I=0,T=u*x+L*d,++O;continue}const K=f[N+1]||l.font;K!==j&&(n&&R.push("font",K),i&&M.push("font",K),j=K),I=Math.max(I,_[A]);const ee=[Z,T+L*m[A]+u*(m[A]-y[O]),.5*(d+I)+F];T+=m[A],n&&R.push("strokeText",ee),i&&M.push("fillText",ee),++A}return Array.prototype.push.apply(C,R),Array.prototype.push.apply(C,M),this.labels_[s]=w,w}replayTextBackground_(e,t,i,n,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,n,s,o,a,l,c,h,u,d,f,g,p,m){a*=d[0],l*=d[1];let _=i-a,y=n-l;const x=s+c>e?e-c:s,C=o+h>t?t-h:o,b=g[3]+x*d[0]+g[1],v=g[0]+C*d[1]+g[2],w=_-g[3],L=y-g[0];(p||u!==0)&&(un[0]=w,dn[0]=w,un[1]=L,Xi[1]=L,Xi[0]=w+b,Vi[0]=Xi[0],Vi[1]=L+v,dn[1]=Vi[1]);let T;return u!==0?(T=Jt(Fe(),i,n,1,1,u,-i,-n),Ae(T,un),Ae(T,Xi),Ae(T,Vi),Ae(T,dn),In(Math.min(un[0],Xi[0],Vi[0],dn[0]),Math.min(un[1],Xi[1],Vi[1],dn[1]),Math.max(un[0],Xi[0],Vi[0],dn[0]),Math.max(un[1],Xi[1],Vi[1],dn[1]),Nr)):In(Math.min(w,w+b),Math.min(L,L+v),Math.max(w,w+b),Math.max(L,L+v),Nr),f&&(_=Math.round(_),y=Math.round(y)),{drawImageX:_,drawImageY:y,drawImageW:x,drawImageH:C,originX:c,originY:h,declutterBox:{minX:Nr[0],minY:Nr[1],maxX:Nr[2],maxY:Nr[3],value:m},canvasTransform:T,scale:d}}replayImageOrLabel_(e,t,i,n,s,o,a){const l=!!(o||a),c=n.declutterBox,h=a?a[2]*n.scale[0]/2:0;return c.minX-h<=t[0]&&c.maxX+h>=0&&c.minY-h<=t[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,un,Xi,Vi,dn,o,a),d9(e,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Ae(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(i[0]%n,i[1]%n),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,n){const s=this.textStates[t],o=this.createLabel(e,t,n,i),a=this.strokeStates[i],l=this.pixelRatio,c=G0(Array.isArray(e)?e[0]:e,s.textAlign||wo),h=s2[s.textBaseline||t2],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*u,g=h*o.height/l+2*(.5-h)*u;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,i,n,s,o,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&sn(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Fi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),w1(this.renderedTransform_,i));let u=0;const d=n.length;let f=0,g,p,m,_,y,x,C,b,v,w,L,T,R,M=0,I=0;const F=this.coordinateCache_,A=this.viewRotation_,O=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,j={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},N=this.instructions!=n||this.overlaps?0:200;let B,Z,K,ee;for(;u<d;){const z=n[u];switch(z[0]){case ne.BEGIN_GEOMETRY:B=z[1],ee=z[3],B.getGeometry()?a!==void 0&&!Ne(a,ee.getExtent())?u=z[2]+1:++u:u=z[2],c&&(c.zIndex=z[4]);break;case ne.BEGIN_PATH:M>N&&(this.fill_(e),M=0),I>N&&(e.stroke(),I=0),!M&&!I&&(e.beginPath(),y=NaN,x=NaN),++u;break;case ne.CIRCLE:f=z[1];const be=h[f],ye=h[f+1],We=h[f+2],Ze=h[f+3],Qt=We-be,Zt=Ze-ye,Tt=Math.sqrt(Qt*Qt+Zt*Zt);e.moveTo(be+Tt,ye),e.arc(be,ye,Tt,0,2*Math.PI,!0),++u;break;case ne.CLOSE_PATH:e.closePath(),++u;break;case ne.CUSTOM:f=z[1],g=z[2];const Tr=z[3],Bs=z[4],zn=z[5];j.geometry=Tr,j.feature=B,u in F||(F[u]=[]);const zi=F[u];zn?zn(h,f,g,2,zi):(zi[0]=h[f],zi[1]=h[f+1],zi.length=2),c&&(c.zIndex=z[6]),Bs(zi,j),++u;break;case ne.DRAW_IMAGE:f=z[1],g=z[2],v=z[3],p=z[4],m=z[5];let Mt=z[6];const ei=z[7],Sr=z[8],Rr=z[9],js=z[10];let Un=z[11];const Lr=z[12];let Pr=z[13];_=z[14]||"declutter";const dt=z[15];if(!v&&z.length>=20){w=z[19],L=z[20],T=z[21],R=z[22];const ti=this.drawLabelWithPointPlacement_(w,L,T,R);v=ti.label,z[3]=v;const Bn=z[23];p=(ti.anchorX-Bn)*this.pixelRatio,z[4]=p;const ii=z[24];m=(ti.anchorY-ii)*this.pixelRatio,z[5]=m,Mt=v.height,z[6]=Mt,Pr=v.width,z[13]=Pr}let u0;z.length>25&&(u0=z[25]);let d0,oa,aa;z.length>17?(d0=z[16],oa=z[17],aa=z[18]):(d0=ir,oa=null,aa=null),js&&O?Un+=A:!js&&!O&&(Un-=A);let Dm=0;for(;f<g;f+=2){if(u0&&u0[Dm++]<Pr/this.pixelRatio)continue;const ti=this.calculateImageOrLabelDimensions_(v.width,v.height,h[f],h[f+1],Pr,Mt,p,m,Sr,Rr,Un,Lr,s,d0,!!oa||!!aa,B),Bn=[e,t,v,ti,ei,oa,aa];if(l){let ii,vi,ni;if(dt){const qe=g-f;if(!dt[qe]){dt[qe]={args:Bn,declutterMode:_};continue}const St=dt[qe];ii=St.args,vi=St.declutterMode,delete dt[qe],ni=wu(ii)}let Ui,Bi;if(ii&&(vi!=="declutter"||!l.collides(ni))&&(Ui=!0),(_!=="declutter"||!l.collides(ti.declutterBox))&&(Bi=!0),vi==="declutter"&&_==="declutter"){const qe=Ui&&Bi;Ui=qe,Bi=qe}Ui&&(vi!=="none"&&l.insert(ni),this.replayImageOrLabel_.apply(this,ii)),Bi&&(_!=="none"&&l.insert(ti.declutterBox),this.replayImageOrLabel_.apply(this,Bn))}else this.replayImageOrLabel_.apply(this,Bn)}++u;break;case ne.DRAW_CHARS:const Rh=z[1],Lh=z[2],f0=z[3],Gm=z[4];R=z[5];const zm=z[6],Ph=z[7],Ih=z[8];T=z[9];const g0=z[10];w=z[11],Array.isArray(w)&&(w=w.reduce(Z9,"")),L=z[12];const Ah=[z[13],z[13]];_=z[14]||"declutter";const Um=z[15],m0=this.textStates[L],Xs=m0.font,Vs=[m0.scale[0]*Ph,m0.scale[1]*Ph];let Ws;Xs in this.widths_?Ws=this.widths_[Xs]:(Ws={},this.widths_[Xs]=Ws);const Fh=Dc(h,Rh,Lh,2),Mh=Math.abs(Vs[0])*gu(Xs,w,Ws);if(Gm||Mh<=Fh){const ti=this.textStates[L].textAlign,Bn=(Fh-Mh)*G0(w,ti),ii=V9(h,Rh,Lh,2,w,Bn,zm,Math.abs(Vs[0]),gu,Xs,Ws,O?0:this.viewRotation_,Um);e:if(ii){const vi=[];let ni,Ui,Bi,qe,St;if(T)for(ni=0,Ui=ii.length;ni<Ui;++ni){St=ii[ni],Bi=St[4],qe=this.createLabel(Bi,L,"",T),p=St[2]+(Vs[0]<0?-g0:g0),m=f0*qe.height+(.5-f0)*2*g0*Vs[1]/Vs[0]-Ih;const ji=this.calculateImageOrLabelDimensions_(qe.width,qe.height,St[0],St[1],qe.width,qe.height,p,m,0,0,St[3],Ah,!1,ir,!1,B);if(l&&_==="declutter"&&l.collides(ji.declutterBox))break e;vi.push([e,t,qe,ji,1,null,null])}if(R)for(ni=0,Ui=ii.length;ni<Ui;++ni){St=ii[ni],Bi=St[4],qe=this.createLabel(Bi,L,R,""),p=St[2],m=f0*qe.height-Ih;const ji=this.calculateImageOrLabelDimensions_(qe.width,qe.height,St[0],St[1],qe.width,qe.height,p,m,0,0,St[3],Ah,!1,ir,!1,B);if(l&&_==="declutter"&&l.collides(ji.declutterBox))break e;vi.push([e,t,qe,ji,1,null,null])}l&&_!=="none"&&l.load(vi.map(wu));for(let ji=0,Bm=vi.length;ji<Bm;++ji)this.replayImageOrLabel_.apply(this,vi[ji])}}++u;break;case ne.END_GEOMETRY:if(o!==void 0){B=z[1];const ti=o(B,ee,_);if(ti)return ti}++u;break;case ne.FILL:N?M++:this.fill_(e),++u;break;case ne.MOVE_TO_LINE_TO:for(f=z[1],g=z[2],Z=h[f],K=h[f+1],e.moveTo(Z,K),y=Z+.5|0,x=K+.5|0,f+=2;f<g;f+=2)Z=h[f],K=h[f+1],C=Z+.5|0,b=K+.5|0,(f==g-2||C!==y||b!==x)&&(e.lineTo(Z,K),y=C,x=b);++u;break;case ne.SET_FILL_STYLE:this.alignAndScaleFill_=z[2],M&&(this.fill_(e),M=0,I&&(e.stroke(),I=0)),e.fillStyle=z[1],++u;break;case ne.SET_STROKE_STYLE:I&&(e.stroke(),I=0),this.setStrokeStyle_(e,z),++u;break;case ne.STROKE:N?I++:e.stroke(),++u;break;default:++u;break}}M&&this.fill_(e),I&&e.stroke()}execute(e,t,i,n,s,o){this.viewRotation_=n,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,n,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,s)}}const Jn=["Polygon","Circle","LineString","Image","Text","Default"],o2=["Image","Text"],$9=Jn.filter(r=>!o2.includes(r));class mf{constructor(e,t,i,n,s,o,a){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fe(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let n=this.executorsByZIndex_[i];n===void 0&&(n={},this.executorsByZIndex_[i]=n);const s=e[i];for(const o in s){const a=s[o];n[o]=new Y9(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let n=0,s=e.length;n<s;++n)if(e[n]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,n,s,o){n=Math.round(n);const a=n*2+1,l=Jt(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Me(a,a));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=mt(),Ma(u,e),It(u,t*(this.renderBuffer_+n),u));const d=H9(n);let f;function g(b,v,w){const L=h.getImageData(0,0,a,a).data;for(let T=0,R=d.length;T<R;T++)if(L[d[T]]>0){if(!o||w==="none"||f!=="Image"&&f!=="Text"||o.includes(b)){const M=(d[T]-3)/4,I=n-M%a,F=n-(M/a|0),A=s(b,v,I*I+F*F);if(A)return A}h.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(wn);let m,_,y,x,C;for(m=p.length-1;m>=0;--m){const b=p[m].toString();for(y=this.executorsByZIndex_[b],_=Jn.length-1;_>=0;--_)if(f=Jn[_],x=y[f],x!==void 0&&(C=x.executeHitDetection(h,l,i,g,u),C))return C}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],n=t[1],s=t[2],o=t[3],a=[i,n,i,o,s,o,s,n];return Fi(a,0,8,2,e,a),a}isEmpty(){return Ln(this.executorsByZIndex_)}execute(e,t,i,n,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?i1:wn),o=o||Jn;const c=Jn.length;for(let h=0,u=l.length;h<u;++h){const d=l[h].toString(),f=this.executorsByZIndex_[d];for(let g=0,p=o.length;g<p;++g){const m=o[g],_=f[m];if(_!==void 0){const y=a===null?void 0:_.getZIndexContext(),x=y?y.getContext():e,C=this.maxExtent_&&m!=="Image"&&m!=="Text";if(C&&(x.save(),this.clip(x,i)),!y||m==="Text"||m==="Image"?_.execute(x,t,i,n,s,a):y.pushFunction(b=>_.execute(b,t,i,n,s,a)),C&&x.restore(),y){y.offset();const b=l[h]*c+Jn.indexOf(m);this.deferredZIndexContexts_[b]||(this.deferredZIndexContexts_[b]=[]),this.deferredZIndexContexts_[b].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(wn);for(let i=0,n=t.length;i<n;++i)e[t[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[i]].length=0}}const z0={};function H9(r){if(z0[r]!==void 0)return z0[r];const e=r*2+1,t=r*r,i=new Array(t+1);for(let s=0;s<=r;++s)for(let o=0;o<=r;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((r+s)*e+(r+o))*4+3),s>0&&l.push(((r-s)*e+(r+o))*4+3),o>0&&(l.push(((r+s)*e+(r-o))*4+3),s>0&&l.push(((r-s)*e+(r-o))*4+3))}const n=[];for(let s=0,o=i.length;s<o;++s)i[s]&&n.push(...i[s]);return z0[r]=n,n}class pf extends ff{constructor(e,t,i,n,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=n,this.transformRotation_=n?S2(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Fe()}drawImages_(e,t,i,n){if(!this.image_)return;const s=Fi(e,t,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=s.length;h<u;h+=2){const d=s[h]-this.imageAnchorX_,f=s[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,p=f+this.imageAnchorY_;Jt(a,g,p,1,1,c,-g,-p),o.save(),o.transform.apply(o,a),o.translate(g,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Fi(e,t,i,n,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=n){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,n,s){const o=this.context_,a=Fi(e,t,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,t,i,n){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ne(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=I3(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],n=t[3]-t[1],s=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,n=t.length;i<n;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ne(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Ne(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(n,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ne(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ne(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let n=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];n=this.drawRings_(i,n,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),sn(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,n=e.textAlign?e.textAlign:wo;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=n&&(i.textAlign=n,t.textAlign=n),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Ii(i||Ot)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),n=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),h=s||qi;this.strokeState_={lineCap:n!==void 0?n:ws,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(o||Ji)*this.pixelRatio_,lineJoin:a!==void 0?a:Ts,lineWidth:(l!==void 0?l:To)*this.pixelRatio_,miterLimit:c!==void 0?c:vo,strokeStyle:Ii(i||Eo)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:Ii(f||Ot)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),g=i.getLineCap(),p=i.getLineDash(),m=i.getLineDashOffset(),_=i.getLineJoin(),y=i.getWidth(),x=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:ws,lineDash:p||qi,lineDashOffset:m||Ji,lineJoin:_!==void 0?_:Ts,lineWidth:y!==void 0?y:To,miterLimit:x!==void 0?x:vo,strokeStyle:Ii(f||Eo)}}const n=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),h=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:n!==void 0?n:Q1,textAlign:u!==void 0?u:wo,textBaseline:d!==void 0?d:t2},this.text_=h!==void 0?Array.isArray(h)?h.reduce((f,g,p)=>f+=p%2?" ":g,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Ht=.5;function _f(r,e,t,i,n,s,o,a,l){const c=l?Bo(n):n,h=r[0]*Ht,u=r[1]*Ht,d=Me(h,u);d.imageSmoothingEnabled=!1;const f=d.canvas,g=new pf(d,Ht,n,null,o,a,l?on(C3(),l):null),p=t.length,m=Math.floor((256*256*256-1)/p),_={};for(let x=1;x<=p;++x){const C=t[x-1],b=C.getStyleFunction()||i;if(!b)continue;let v=b(C,s);if(!v)continue;Array.isArray(v)||(v=[v]);const L=(x*m).toString(16).padStart(7,"#00000");for(let T=0,R=v.length;T<R;++T){const M=v[T],I=M.getGeometryFunction()(C);if(!I||!Ne(c,I.getExtent()))continue;const F=M.clone(),A=F.getFill();A&&A.setColor(L);const O=F.getStroke();O&&(O.setColor(L),O.setLineDash(null)),F.setText(void 0);const j=M.getImage();if(j){const K=j.getImageSize();if(!K)continue;const ee=Me(K[0],K[1],void 0,{alpha:!1}),z=ee.canvas;ee.fillStyle=L,ee.fillRect(0,0,z.width,z.height),F.setImage(new Ms({img:z,anchor:j.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}const N=F.getZIndex()||0;let B=_[N];B||(B={},_[N]=B,B.Polygon=[],B.Circle=[],B.LineString=[],B.Point=[]);const Z=I.getType();if(Z==="GeometryCollection"){const K=I.getGeometriesArrayRecursive();for(let ee=0,z=K.length;ee<z;++ee){const ue=K[ee];B[ue.getType().replace("Multi","")].push(ue,F)}}else B[Z.replace("Multi","")].push(I,F)}}const y=Object.keys(_).map(Number).sort(wn);for(let x=0,C=y.length;x<C;++x){const b=_[y[x]];for(const v in b){const w=b[v];for(let L=0,T=w.length;L<T;L+=2){g.setStyle(w[L+1]);for(let R=0,M=e.length;R<M;++R)g.setTransform(e[R]),g.drawGeometry(w[L])}}}return d.getImageData(0,0,f.width,f.height)}function yf(r,e,t){const i=[];if(t){const n=Math.floor(Math.round(r[0])*Ht),s=Math.floor(Math.round(r[1])*Ht),o=(se(n,0,t.width-1)+se(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],h=t.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/e.length);h&&h%u===0&&i.push(e[h/u-1])}return i}const K9=.5,xf={Point:r5,LineString:t5,Polygon:o5,MultiPoint:s5,MultiLineString:i5,MultiPolygon:n5,GeometryCollection:e5,Circle:J9};function q9(r,e){return parseInt(W(r),10)-parseInt(W(e),10)}function a2(r,e){const t=Cf(r,e);return t*t}function Cf(r,e){return K9*r/e}function J9(r,e,t,i,n){const s=t.getFill(),o=t.getStroke();if(s||o){const l=r.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i,n)}const a=t.getText();if(a&&a.getText()){const l=r.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function l2(r,e,t,i,n,s,o,a){const l=[],c=t.getImage();if(c){let d=!0;const f=c.getImageState();f==Y.LOADED||f==Y.ERROR?d=!1:f==Y.IDLE&&c.load(),d&&l.push(c.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>n(null)),Q9(r,e,t,i,s,o,a),u}function Q9(r,e,t,i,n,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,n);if(t.getRenderer())bf(r,l,t,e,o);else{const h=xf[l.getType()];h(r,l,t,e,o,s)}}function bf(r,e,t,i,n){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)bf(r,o[a],t,i,n);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),n)}function e5(r,e,t,i,n,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=xf[o[a].getType()];c(r,o[a],t,i,n,s)}}function t5(r,e,t,i,n){const s=t.getStroke();if(s){const a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i,n)}const o=t.getText();if(o&&o.getText()){const a=r.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,n)}}function i5(r,e,t,i,n){const s=t.getStroke();if(s){const a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i,n)}const o=t.getText();if(o&&o.getText()){const a=r.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,n)}}function n5(r,e,t,i,n){const s=t.getFill(),o=t.getStroke();if(o||s){const l=r.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i,n)}const a=t.getText();if(a&&a.getText()){const l=r.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,n)}}function r5(r,e,t,i,n,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Y.LOADED)return;const h=r.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,c),h.drawPoint(e,i,n)}if(l){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(e,i,n)}}function s5(r,e,t,i,n,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),h=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=Y.LOADED)return;const u=r.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,h),u.drawMultiPoint(e,i,n)}if(c){const u=r.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(e,i,n)}}function o5(r,e,t,i,n){const s=t.getFill(),o=t.getStroke();if(s||o){const l=r.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i,n)}const a=t.getText();if(a&&a.getText()){const l=r.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,n)}}const a5=5;class vf extends Qm{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=a5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ie()}getData(e){return null}prepareFrame(e){return ie()}renderFrame(e,t){return ie()}forEachFeatureAtCoordinate(e,t,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Y.LOADED||t.getState()===Y.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Y.LOADED&&t!=Y.ERROR&&e.addEventListener(H.CHANGE,this.boundHandleImageChange_),t==Y.IDLE&&(e.load(),t=e.getState()),t==Y.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Su=[];let Zr=null;function l5(){Zr=Me(1,1,void 0,{willReadFrequently:!0})}class zc extends vf{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Fe(),this.pixelTransform=Fe(),this.inversePixelTransform=Fe(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){Zr||l5(),Zr.clearRect(0,0,1,1);let n;try{Zr.drawImage(e,t,i,1,1,0,0,1,1),n=Zr.getImageData(0,0,1,1).data}catch{return Zr=null,null}return n}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const n=this.getLayer().getClassName();let s,o;if(e&&e.className===n&&(!i||e&&e.style.backgroundColor&&sn(gi(e.style.backgroundColor),gi(i)))){const a=e.firstElementChild;xn(a)&&(o=a.getContext("2d"))}if(o&&S3(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Gt?D1():document.createElement("div"),s.className=n;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Me();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const n=fi(i),s=L2(i),o=P2(i),a=yo(i);Ae(t.coordinateToPixelTransform,n),Ae(t.coordinateToPixelTransform,s),Ae(t.coordinateToPixelTransform,o),Ae(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ae(l,n),Ae(l,s),Ae(l,o),Ae(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,n=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(ae(i)/n*o),l=Math.round(Ie(i)/n*o);Jt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),hr(this.inversePixelTransform,this.pixelTransform);const c=T3(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){const s=new lo(e,this.inversePixelTransform,i,t);n.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(ct.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(ct.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Gc),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(ct.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(ct.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,n,s,o,a){const l=s/2,c=o/2,h=n/t,u=-h,d=-e[0]+a,f=-e[1];return Jt(this.tempTransform,l,c,h,u,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Ef extends zc{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=mt(),this.wrappedRenderedExtent_=mt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const n=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,g=t.viewHints,p=!(g[Te.ANIMATING]||g[Te.INTERACTING]),m=this.context,_=Math.round(ae(n)/a*f),y=Math.round(Ie(n)/a*f),x=u.getWrapX()&&l.canWrapX(),C=x?ae(h):null,b=x?Math.ceil((n[2]-h[2])/C)+1:1;let v=x?Math.floor((n[0]-h[0])/C):0;do{let w=this.getRenderTransform(o,a,0,f,_,y,v*C);t.declutter&&(w=w.slice(0)),e.execute(m,[m.canvas.width,m.canvas.height],w,c,p,i===void 0?Jn:i?o2:$9,i?d&&t.declutter[d]:void 0)}while(++v<b)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Me(this.context.canvas.width,this.context.canvas.height,Su))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Vo(this.context),Su.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const n=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(ct.PRERENDER)||this.getLayer().hasListener(ct.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),n.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const l=zt(i.extent);a=Ne(l,e.extent),this.clipped_=a&&!Et(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),n=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=i[0]*Ht,d=i[1]*Ht;h.push(this.getRenderTransform(n,s,o,Ht,u,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Et(g,l)){let p=l[0];const m=ae(g);let _=0,y;for(;p<g[0];)--_,y=m*_,h.push(this.getRenderTransform(n,s,o,Ht,u,d,y).slice()),p+=m;for(_=0,p=l[2];p>g[2];)++_,y=m*_,h.push(this.getRenderTransform(n,s,o,Ht,u,d,y).slice()),p-=m}this.hitDetectionImageData_=_f(i,h,this.renderedFeatures_,c.getStyleFunction(),l,s,o,a2(s,this.renderedPixelRatio_),null)}t(yf(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,n,s){var d,f;if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},h=function(g,p,m){const _=W(g),y=c[_];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return c[_]=!0,s.splice(s.lastIndexOf(y),1),n(g,l,p);y.geometry=p,y.distanceSq=m}}else{if(m===0)return c[_]=!0,n(g,l,p);s.push(c[_]={feature:g,layer:l,geometry:p,distanceSq:m,callback:n})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,i,h,u?(f=(d=t.declutter)==null?void 0:d[u])==null?void 0:f.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const n=e.viewHints[Te.ANIMATING],s=e.viewHints[Te.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&n||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,h=c.projection,u=c.resolution,d=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let p=t.getRenderOrder();p===void 0&&(p=q9);const m=c.center.slice(),_=It(l,g*u),y=_.slice(),x=[_.slice()],C=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!Et(C,e.extent)){const A=ae(C),O=Math.max(ae(_)/2,A);_[0]=C[0]-O,_[2]=C[2]+O,A2(m,h);const j=n1(x[0],h);j[0]<C[0]&&j[2]<C[2]?x.push([j[0]+A,j[1],j[2]+A,j[3]]):j[0]>C[0]&&j[2]>C[2]&&x.push([j[0]-A,j[1],j[2]-A,j[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==p&&this.renderedFrameDeclutter_===!!e.declutter&&Et(this.wrappedRenderedExtent_,_))return sn(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new gf(Cf(u,d),_,u,d);let v;for(let A=0,O=x.length;A<O;++A)i.loadFeatures(x[A],u,h);const w=a2(u,d);let L=!0;const T=(A,O)=>{let j;const N=A.getStyleFunction()||t.getStyleFunction();if(N&&(j=N(A,u)),j){const B=this.renderFeature(A,w,j,b,v,this.getLayer().getDeclutter(),O);L=L&&!B}},R=Bo(_),M=i.getFeaturesInExtent(R);p&&M.sort(p);for(let A=0,O=M.length;A<O;++A)T(M[A],A);this.renderedFeatures_=M,this.ready=L;const I=b.finish(),F=new mf(_,u,d,i.getOverlaps(),I,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=p,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,n,s,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)l=l2(n,e,i[c],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=l2(n,e,i,t,this.boundHandleStyleImageChange_,s,o,a);return l}}class Mi extends vr{constructor(e){super(e)}createRenderer(){return new Ef(this)}}let c5=!1;function wf(r,e,t,i,n,s,o){const a=new XMLHttpRequest;a.open("GET",typeof r=="function"?r(t,i,n):r,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=c5,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let h;c=="text"||c=="json"?h=a.responseText:c=="xml"?h=a.responseXML||a.responseText:c=="arraybuffer"&&(h=a.response),h?s(e.readFeatures(h,{extent:t,featureProjection:n}),e.readProjection(h)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function Ru(r,e){return function(t,i,n,s,o){wf(r,e,t,i,n,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function h5(r,e){return[[-1/0,-1/0,1/0,1/0]]}function u5(r,e){return[r]}class at extends dc{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ke),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(ge(e[t],H.CHANGE,this.changed,this))}clone(){const e=new at(U0(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<pr(this.getExtent(),e,t))return n;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)n=s[o].closestPointXY(e,t,i,n);return n}containsXY(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].containsXY(e,t))return!0;return!1}computeExtent(e){Hl(e);const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)ps(e,t[i].getExtent());return e}getGeometries(){return U0(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let n=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(n=!0)}return n?new at(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(e,t);this.changed()}scale(e,t,i){i||(i=yt(this.getExtent()));const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)n[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(U0(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function U0(r){return r.map(e=>e.clone())}const Lu=Fe();class _t{constructor(e,t,i,n,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?ts(this.flatCoordinates_):Kl(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=yt(this.getExtent());this.flatInteriorPoints_=xc(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=bc(this.flatCoordinates_,this.ends_),t=df(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=I1(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=r2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let n=0,s=i.length;n<s;++n){const o=i[n],a=r2(e,t,o,2,.5);xe(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=V(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const n=Ie(i)/Ie(t);Jt(Lu,i[0],i[3],n,-n,0,0,0),Fi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Lu,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new _t(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Jd((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=D2(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=P1(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,n);break;case"Polygon":n=[],i.length=_c(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,n);break}return n&&(this.simplifiedGeometry_=new _t(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}_t.prototype.getFlatCoordinates=_t.prototype.getOrientedFlatCoordinates;class Ll{constructor(e){this.rbush_=new Pc(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[W(t)]=i}load(e,t){const i=new Array(t.length);for(let n=0,s=t.length;n<s;n++){const o=e[n],a=t[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[n]=l,this.items_[W(a)]=l}this.rbush_.load(i)}remove(e){const t=W(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[W(t)],n=[i.minX,i.minY,i.maxX,i.maxY];qt(n,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let n=0,s=e.length;n<s;n++)if(i=t(e[n]),i)return i;return i}isEmpty(){return Ln(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return In(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class ks extends Di{constructor(e){super(),this.projection=V(e.projection),this.attributions_=Pu(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,n){t.viewResolver=i,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Pu(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Pu(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const Je={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class fn extends Ni{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class Er extends ks{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Jl,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(me(this.format_,"`format` must be set when `url` is set"),this.loader_=Ru(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:h5;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Ll:null,this.loadedExtentsRtree_=new Ll,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(e.features)?n=e.features:e.features&&(i=e.features,n=i.getArray()),!t&&i===void 0&&(i=new vt(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=W(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new fn(Je.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof _t||(this.featureChangeKeys_[e]=[ge(t,H.CHANGE,this.handleFeatureChange_,this),ge(t,_o.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const n=String(t.getId());if(!(n in this.idIndex_))this.idIndex_[n]=t;else if(t instanceof _t){const s=this.idIndex_[n];s instanceof _t?Array.isArray(s)?s.push(t):this.idIndex_[n]=[s,t]:i=!1}else i=!1}return i&&(me(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],n=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=W(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=W(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();t.push(h),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(Je.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new fn(Je.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Je.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Je.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Li.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Li.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ke);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new fn(Je.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(n){const s=n.getGeometry();if(s instanceof _t||s.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const n=i.getGeometry();if(n instanceof _t||n.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ln(this.nullGeometryFeatures_)||xe(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=ec(e,t);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],n=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||ms,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const h=c.getGeometry(),u=a;if(a=h instanceof _t?0:h.closestPointXY(i,n,o,a),a<u){s=c;const d=Math.sqrt(a);l[0]=i-d,l[1]=n-d,l[2]=i+d,l[3]=n+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=W(t),n=t.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new fn(Je.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:W(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ln(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const n=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];n.forEachInExtent(l,function(h){return Et(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new fn(Je.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new fn(Je.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new fn(Je.FEATURESLOADERROR))}),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(n){if(qt(n.extent,e))return n});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,n=e.length;i<n;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=W(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(ke),delete this.featureChangeKeys_[t];const n=e.getId();if(n!==void 0){const s=n.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Je.REMOVEFEATURE)&&this.dispatchEvent(new fn(Je.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){me(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Ru(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}function bn(r,e){const t=r.length;return e<0?r[e+t]:e>=t?r[e-t]:r[e]}function es(r,e){const t=r.length;let i=Math.floor(e);const n=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=r[i],a=o[0],l=o[1],c=r[s],h=c[0]-a,u=c[1]-l;return[a+h*n,l+u*n]}const ya={index:-1,endIndex:NaN,closestTargetDistance:1/0};function Tf(r,e,t,i){const n=r[0],s=r[1];let o=1/0,a=-1,l=NaN;for(let u=0;u<e.targets.length;++u){const d=e.targets[u],f=d.coordinates;let g=1/0,p;for(let m=0;m<f.length-1;++m){const _=f[m],y=f[m+1],x=Lf(n,s,_,y);x.squaredDistance<g&&(g=x.squaredDistance,p=m+x.along)}g<o&&(o=g,d.ring&&e.targetIndex===u&&(d.endIndex>d.startIndex?p<d.startIndex&&(p+=f.length):d.endIndex<d.startIndex&&p>d.startIndex&&(p-=f.length)),l=p,a=u)}const c=e.targets[a];let h=c.ring;if(e.targetIndex===a&&h){const u=es(c.coordinates,l),d=t.getPixelFromCoordinate(u),f=t.getPixelFromCoordinate(e.startCoord);qr(d,f)>i&&(h=!1)}if(h){const u=c.coordinates,d=u.length,f=c.startIndex,g=l;if(f<g){const p=ba(u,f,g);ba(u,f,g-d)<p&&(l-=d)}else{const p=ba(u,f,g);ba(u,f,g+d)<p&&(l+=d)}}return ya.index=a,ya.endIndex=l,ya.closestTargetDistance=o,ya}function Sf(r,e){const t=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();Rf(r,s,t)}return t}function Rf(r,e,t){if(e instanceof ze){xa(r,e.getCoordinates(),!1,t);return}if(e instanceof wt){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)xa(r,i[n],!1,t);return}if(e instanceof Ve){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)xa(r,i[n],!0,t);return}if(e instanceof Xt){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const o=i[n];for(let a=0,l=o.length;a<l;++a)xa(r,o[a],!0,t)}return}if(e instanceof at){const i=e.getGeometries();for(let n=0;n<i.length;++n)Rf(r,i[n],t);return}}function xa(r,e,t,i){const n=r[0],s=r[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],h=Lf(n,s,l,c);if(h.squaredDistance===0){const u=o+h.along;i.push({coordinates:e,ring:t,startIndex:u,endIndex:u});return}}}function Ca(r,e){return En(r[0],r[1],e[0],e[1])}function ba(r,e,t){let i,n;e<t?(i=e,n=t):(i=t,n=e);const s=Math.ceil(i),o=Math.floor(n);if(s>o){const l=es(r,i),c=es(r,n);return Ca(l,c)}let a=0;if(i<s){const l=es(r,i),c=bn(r,s);a+=Ca(l,c)}if(o<n){const l=bn(r,o),c=es(r,n);a+=Ca(l,c)}for(let l=s;l<o-1;++l){const c=bn(r,l),h=bn(r,l+1);a+=Ca(c,h)}return a}const B0={along:0,squaredDistance:0};function Lf(r,e,t,i){const n=t[0],s=t[1],o=i[0],a=i[1],l=o-n,c=a-s;let h=0,u=n,d=s;return(l!==0||c!==0)&&(h=se(((r-n)*l+(e-s)*c)/(l*l+c*c),0,1),u+=l*h,d+=c*h),B0.along=h,B0.squaredDistance=S2(En(r,e,u,d),10),B0}const va={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Ea extends Ni{constructor(e,t){super(e),this.feature=t}}class d5 extends Cr{constructor(e){const t=e;t.stopDown||(t.stopDown=As),super(t),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=m5(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:ms,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=(s,o,a)=>{const l=o||new W2([NaN,NaN]),c=Xe(s[0]),h=ys(c,Xe(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(h),this.geometryLayout_),l};else{let s;n==="Point"?s=Oe:n==="LineString"?s=ze:n==="Polygon"&&(s=Ve),i=(o,a,l)=>(a?n==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a)}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Mi({source:new Er({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:f5(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Sc,this.freehandCondition_,e.freehand?this.freehandCondition_=rs:this.freehandCondition_=e.freehandCondition?e.freehandCondition:El,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(bl.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=rs:t=e:t=X1,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=rs:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:El}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===H.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Ce.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Ce.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Ce.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Ce.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Ce.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Ce.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Ce.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Zi(Ce.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=it([i,n]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=Sf(e.coordinate,o);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,n=e.startIndex<=t;i===n?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=n-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)n.push(bn(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)n.push(bn(e.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){const a=e.map.getPixelFromCoordinate(t.startCoord);if(qr(a,e.pixel)<this.snapTolerance_)return}const i=Tf(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex;const s=es(n.coordinates,n.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],o=n*n+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const h=s[l],u=a.getPixelFromCoordinate(h),d=e[0]-u[0],f=e[1]-u[1],g=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(d*d+f*f)<=g,i){this.finishCoordinate_=h;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ee(new Oe(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Ee);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new ze(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=Co(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ee(new ze(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Ee,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Ea(va.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),s=Co(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<e;++s){let o;if(n==="LineString"||n==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const i=e.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,n),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new mi([t])):this.type_==="MultiLineString"?e.setGeometry(new wt([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Xt([t])),this.dispatchEvent(new Ea(va.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Ea(va.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&n.shift(),n.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new Ee(new Oe(n)),this.updateSketchFeatures_(),this.dispatchEvent(new Ea(va.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function f5(){const r=rf();return function(e,t){return r[e.getGeometry().getType()]}}function g5(){return function(r,e,t){const i=it([r[0],r[r.length-1]].map(function(s){return Xe(s)})),n=[[yo(i),P2(i),L2(i),fi(i),yo(i)]];return e?e.setCoordinates(n):e=new Ve(n),e}}function m5(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const Iu=0,co=1,Au=[0,0,0,0],os=[],j0={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function X0(r,e,t){let i;switch(e){case"LineString":i=r;break;case"MultiLineString":case"Polygon":i=r[t[0]];break;case"MultiPolygon":i=r[t[1]][t[0]];break}return i}class V0 extends Ni{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class p5 extends Cr{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:W1,this.defaultDeleteCondition_=function(i){return s_(i)&&l_(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:rs,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Ll,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Mi({source:new Er({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:y5(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new vt(this.source_.getFeatures()),this.source_.addEventListener(Je.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Je.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Li.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Li.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let t;e?e===!0?t=rs:t=e:t=X1,this.traceCondition_=t}addFeature_(e){const t=e.getGeometry();if(t){const n=this.SEGMENT_WRITERS_[t.getType()];n&&n(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_),e.addEventListener(H.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new vt;const i=this.featuresBeingModified_.getArray();for(let n=0,s=t.length;n<s;++n){const o=t[n].feature;o&&!i.includes(o)&&this.featuresBeingModified_.push(o)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new V0(j0.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(H.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(n){e===n.feature&&i.push(n)});for(let n=i.length-1;n>=0;--n){const s=i[n];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),n={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const o=i[n],a={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length-1;n<s;++n){const o=i.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert(it(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const o=i[n];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),h={feature:e,geometry:t,depth:[n],index:a,segment:c};this.rBush_.insert(it(c),h)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const o=i[n];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),h={feature:e,geometry:t,depth:[n],index:a,segment:c};this.rBush_.insert(it(c),h)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const o=i[n];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let h=0,u=c.length-1;h<u;++h){const d=c.slice(h,h+2),f={feature:e,geometry:t,depth:[a,n],index:h,segment:d};this.rBush_.insert(it(d),f)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),n={feature:e,geometry:t,index:Iu,segment:[i,i]},s={feature:e,geometry:t,index:co,segment:[i,i]},o=[n,s];n.featureSegments=o,s.featureSegments=o,this.rBush_.insert(ts(i),n);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let n=0;n<i.length;++n){const s=i[n],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,i,n){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new Ee(new Oe(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",i),s.set("existing",n),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Ce.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Ce.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Ce.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;this.getMap().getView().getProjection();const i=[],n=this.vertexFeature_.getGeometry().getCoordinates(),s=it([n]),o=this.rBush_.getInExtent(s),a={};o.sort(_5);for(let l=0,c=o.length;l<c;++l){const h=o[l],u=h.segment;let d=W(h.geometry);const f=h.depth;if(f&&(d+="-"+f.join("-")),a[d]||(a[d]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===co){const g=Mu(e,h);bt(g,n)&&!a[d][0]&&(this.dragSegments_.push([h,0]),a[d][0]=h);continue}if(bt(u[0],n)&&!a[d][0]){this.dragSegments_.push([h,0]),a[d][0]=h;continue}if(bt(u[1],n)&&!a[d][1]){if(a[d][0]&&a[d][0].index===0){let g=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":g=g[f[1]];case"Polygon":if(h.index!==g[f[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),a[d][1]=h;continue}W(u)in this.vertexSegments_&&!a[d][0]&&!a[d][1]&&i.push(h)}return i}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){const t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){const s=e.map.getPixelFromCoordinate(t.startCoord);if(qr(s,e.pixel)<this.pixelTolerance_)return}const i=Tf(e.coordinate,t,e.map,this.pixelTolerance_);if(t.targetIndex===-1&&Math.sqrt(i.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const o=t.targets[t.targetIndex];this.removeTracedCoordinates_(o.startIndex,o.endIndex)}else for(const o of this.traceSegments_){const a=o[0],l=a.geometry,c=o[1],h=l.getCoordinates();X0(h,l.getType(),a.depth).splice(a.index+c,1),l.setCoordinates(h),c===0&&(a.index-=1)}const s=t.targets[i.index];this.addTracedCoordinates_(s,s.startIndex,i.endIndex)}else{const s=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(s,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex}getTraceCandidates_(e){const t=this.getMap(),i=this.pixelTolerance_,n=t.getCoordinateFromPixel([e.pixel[0]-i,e.pixel[1]+i]),s=t.getCoordinateFromPixel([e.pixel[0]+i,e.pixel[1]-i]),o=it([n,s]);return this.traceSource_.getFeaturesInExtent(o)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}const t=this.getTraceCandidates_(e);if(t.length===0)return;const i=Sf(e.coordinate,t);i.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:i,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,n=e.startIndex<=t;i===n?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=n-s+1}if(i>0)for(const n of this.traceSegments_){const s=n[0],o=s.geometry,a=n[1];let l=n[0].index+1;a===1&&(l-=i);const c=o.getCoordinates();X0(c,o.getType(),s.depth).splice(l,i),o.setCoordinates(c),a===1&&(s.index-=i)}}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)n.push(bn(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)n.push(bn(e.coordinates,a))}if(n.length)for(const s of this.traceSegments_){const o=s[0],a=o.geometry,l=s[1],c=o.index+1;l===0&&n.reverse();const h=a.getCoordinates();X0(h,a.getType(),o.depth).splice(c,0,...n),a.setCoordinates(h),l===1&&(o.index+=n.length)}}updateGeometry_(e,t){const i=t[0],n=i.depth;let s;const o=i.segment,a=i.geometry,l=t[1];for(;e.length<a.getStride();)e.push(o[l][e.length]);switch(a.getType()){case"Point":s=e,o[0]=e,o[1]=e;break;case"MultiPoint":s=a.getCoordinates(),s[i.index]=e,o[0]=e,o[1]=e;break;case"LineString":s=a.getCoordinates(),s[i.index+l]=e,o[l]=e;break;case"MultiLineString":s=a.getCoordinates(),s[n[0]][i.index+l]=e,o[l]=e;break;case"Polygon":s=a.getCoordinates(),s[n[0]][i.index+l]=e,o[l]=e;break;case"MultiPolygon":s=a.getCoordinates(),s[n[1]][n[0]][i.index+l]=e,o[l]=e;break;case"Circle":const c=a;if(o[0]=e,o[1]=e,i.index===Iu)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,this.getMap().getView().getProjection();let h=qr(Xe(c.getCenter()),Xe(e));c.setRadius(h),this.changingFeature_=!1}break}s&&this.setGeometryCoordinates_(a,s)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([o])=>o));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],n=[],s=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(s){this.traceSegments_=[];for(const o of this.dragSegments_){const a=o[0];qr(rc(s,a.segment),s)/e.map.getView().getResolution()<1&&this.traceSegments_.push(o)}}for(let o=0,a=this.dragSegments_.length;o<a;++o){const l=this.dragSegments_[o],c=l[0],h=c.feature;i.includes(h)||i.push(h);const u=c.geometry;n.includes(u)||n.push(u),this.updateGeometry_(t,l)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(t,i,n,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,i=this.findInsertVerticesAndUpdateDragSegments_(t);if(i!=null&&i.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,i),this.vertexFeature_)){const n=this.vertexFeature_.getGeometry().getCoordinates();for(let s=i.length-1;s>=0;--s)this.insertVertex_(i[s],n);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],n=i.geometry;if(n.getType()==="Circle"){const s=n,o=s.getCenter(),a=i.featureSegments[0],l=i.featureSegments[1];a.segment[0]=o,a.segment[1]=o,l.segment[0]=o,l.segment[1]=o,this.rBush_.update(ts(o),a);let c=s;this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(it(i.segment),i)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new V0(j0.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){const t=this.getMap(),i=t.getPixelFromCoordinate(e);t.getView().getProjection();const n=function(a,l){return Fu(e,a)-Fu(e,l)};let s,o;if(this.hitDetection_){const a=typeof this.hitDetection_=="object"?l=>l===this.hitDetection_:void 0;t.forEachFeatureAtPixel(i,(l,c,h)=>{h&&h.getType()==="Point"&&(h=new Oe(An(h.getCoordinates())));const u=h||l.getGeometry();if(u&&u.getType()==="Point"&&l instanceof Ee&&this.features_.getArray().includes(l)){o=u;const d=l.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:l,geometry:o,segment:[d,d]}]}return!0},{layerFilter:a})}if(!s){const a=zt(ts(e,Au)),l=t.getView().getResolution()*this.pixelTolerance_,c=Bo(It(a,l,Au));s=this.rBush_.getInExtent(c)}if(s&&s.length>0){const a=s.sort(n)[0],l=a.segment;let c=Mu(e,a);const h=t.getPixelFromCoordinate(c);let u=qr(i,h);if(o||u<=this.pixelTolerance_){const d={};if(d[W(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-e[0],this.delta_[1]=c[1]-e[1]),a.geometry.getType()==="Circle"&&a.index===co)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);else{const f=t.getPixelFromCoordinate(l[0]),g=t.getPixelFromCoordinate(l[1]),p=ys(h,f),m=ys(h,g);if(u=Math.sqrt(Math.min(p,m)),this.snappedToVertex_=u<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(c=p>m?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);const _={};_[W(a.geometry)]=!0;for(let y=1,x=s.length;y<x;++y){const C=s[y].segment;if(bt(l[0],C[0])&&bt(l[1],C[1])||bt(l[0],C[1])&&bt(l[1],C[0])){const b=W(s[y].geometry);b in _||(_[b]=!0,d[W(C)]=!0)}else break}}this.vertexSegments_=d;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,n=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,t);break;default:return!1}this.setGeometryCoordinates_(s,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(s,a,o,1);const h={segment:[i[0],t],feature:n,geometry:s,depth:o,index:a};c.insert(it(h.segment),h),this.dragSegments_.push([h,1]);const u={segment:[t,i[1]],feature:n,geometry:s,depth:o,index:a+1};return c.insert(it(u.segment),u),this.dragSegments_.push([u,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?An(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(it([e])).some(({segment:i})=>bt(i[0],e)||bt(i[1],e))}removePoint(e){if(e&&(e=Xe(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Ce.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([n])=>n));const i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new V0(j0.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,n,s,o,a,l,c,h,u,d,f,g;for(l=e.length-1;l>=0;--l)o=e[l],f=o[0],g=W(f.feature),f.depth&&(g+="-"+f.depth.join("-")),g in t||(t[g]={}),o[1]===0?(t[g].right=f,t[g].index=f.index):o[1]==1&&(t[g].left=f,t[g].index=f.index+1);for(g in t){switch(d=t[g].right,h=t[g].left,c=t[g].index,u=c-1,h!==void 0?f=h:f=d,u<0&&(u=0),a=f.geometry,s=a.getCoordinates(),n=s,i=!1,a.getType()){case"MultiLineString":s[f.depth[0]].length>2&&(s[f.depth[0]].splice(c,1),i=!0);break;case"LineString":s.length>2&&(s.splice(c,1),i=!0);break;case"MultiPolygon":n=n[f.depth[1]];case"Polygon":n=n[f.depth[0]],n.length>4&&(c==n.length-1&&(c=0),n.splice(c,1),i=!0,c===0&&(n.pop(),n.push(n[0]),u=n.length-1));break}if(i){this.setGeometryCoordinates_(a,s);const p=[];if(h!==void 0&&(this.rBush_.remove(h),p.push(h.segment[0])),d!==void 0&&(this.rBush_.remove(d),p.push(d.segment[1])),h!==void 0&&d!==void 0){const m={depth:f.depth,feature:f.feature,geometry:f.geometry,index:u,segment:p};this.rBush_.insert(it(m.segment),m)}this.updateSegmentIndices_(a,c,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(it([e])).some(({segment:i})=>!(bt(i[0],e)||bt(i[1],e)))}insertPoint(e){var n;const t=e?Xe(e,this.getMap().getView().getProjection()):(n=this.vertexFeature_)==null?void 0:n.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((s,o)=>s||this.insertVertex_(o,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(i===void 0||s.depth===void 0||sn(s.depth,i))&&s.index>t&&(s.index+=n)})}}function _5(r,e){return r.index-e.index}function Fu(r,e,t){const i=e.geometry;if(i.getType()==="Circle"){let s=i;if(e.index===co){const o=ys(s.getCenter(),Xe(r)),a=Math.sqrt(o)-s.getRadius();return a*a}}const n=Xe(r);return os[0]=Xe(e.segment[0]),os[1]=Xe(e.segment[1]),Bp(n,os)}function Mu(r,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===co)return An(i.getClosestPoint(Xe(r)));const n=Xe(r);return os[0]=Xe(e.segment[0]),os[1]=Xe(e.segment[1]),An(rc(n,os))}function y5(){const r=rf();return function(e,t){return r.Point}}const x5='.geolocation{top:85px;left:.5em}.geolocation button{background:var(--primary);color:var(--on-primary)}.geolocation button>svg{fill:var(--on-primary);min-inline-size:1.25rem!important;max-inline-size:1.25rem!important;min-block-size:1.25rem!important;max-block-size:1.25rem!important}.ol-touch.geolocation{top:100px}.loading-indicator{position:absolute;pointer-events:none!important;display:flex;align-items:center;justify-content:center;background-color:#0000}.loading-indicator.small{bottom:.5em;left:.5em;width:30px;height:30px}.loading-indicator.fullscreen{width:100%;height:100%}.disabled{filter:brightness(1.7);pointer-events:none}.ol-unselectable{pointer-events:none}.ol-control{background:none}.ol-control button,.ol-control button:hover,.ol-control button:focus{--_round: 32px;border-radius:var(--_round);background:var(--primary);color:var(--on-primary);width:32px;height:32px;cursor:pointer;border:none;outline:none;pointer-events:all;position:relative;font-size:1rem}.ol-control button:hover:after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear;content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%)}.ol-control button.ol-zoom-in,.ol-control button.ol-zoom-in:hover{border-top-left-radius:var(--_round);border-top-right-radius:var(--_round);border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;margin-bottom:.125rem}.ol-control button.ol-zoom-out,.ol-control button.ol-zoom-out:hover{border-top-left-radius:.5rem;border-top-right-radius:.5rem;border-bottom-left-radius:var(--_round);border-bottom-right-radius:var(--_round)}';var w2,Pf;class C5 extends Yl{constructor(){super();pt(this,w2);this.value=50,this.enabled="true"}static get properties(){return{value:{attribute:"value",type:Number},enabled:{attribute:"enabled",type:String}}}render(){return Qn`
      <style>
        :host {
          display: block;
          --thumb-size: 3rem;
        }
        .eox-map-compare {
          --thumb-bgc: #fff;
          --thumb-w: var(--thumb-size);

          position: relative;
          height: 100%;
        }
        .eox-map-compare::after {
          content: "";
          display: block;
        }
        .eox-map-compare__first,
        .eox-map-compare__second {
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          width: 100%;
        }
        .eox-map-compare__first {
          clip-path: polygon(
            0% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            0% 100%
          );
        }
        .eox-map-compare__second {
          clip-path: polygon(
            100% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            100% 100%
          );
        }
        .eox-map-compare__range {
          background-color: transparent;
          box-sizing: border-box;
          font-family: inherit;
          height: 100%;
          margin: 0;
          outline: none;
          position: absolute;
          top: 0;
          width: 100%;
          pointer-events: none;
        }
        .eox-map-compare__range::-moz-range-thumb {
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          background: transparent;
          border: none;
        }
        .eox-map-compare__range::-webkit-slider-thumb {
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          position: relative;
          background: transparent;
          border: none;
        }
        .eox-map-compare__range::-moz-range-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
        }
        .eox-map-compare__range::-webkit-slider-runnable-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
          height: 100%;
        }
        .eox-map-compare__range,
        .eox-map-compare__range::-webkit-slider-runnable-track,
        .eox-map-compare__range::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
        }
        .slider-bar,
        .slider-thumb {
          position: absolute;
          box-shadow: 0 0.125rem 0.125rem 0 rgb(0 0 0 / 0.32);
        }
        .slider-bar {
          pointer-events: none;
          top: 0;
          width: 0.3rem;
          height: 100%;
          background-color: var(--thumb-bgc);
          z-index: 2;
          left: calc(${this.value}% - 0.15rem);
          -webkit-clip-path: inset(0 -5px 0 -5px);
          clip-path: inset(0 -5px 0 -5px);
        }
        .slider-thumb {
          pointer-events: none;
          top: calc(50% - var(--thumb-size) / 2);
          background: var(--primary);
          z-index: 3;
          width: var(--thumb-size);
          aspect-ratio: 1;
          left: calc(${this.value}% - var(--thumb-size) / 2);
          border-radius: 50%;
          padding: 0.7rem;
          color: var(--on-primary);
          display: flex;
          align-items: center;
          justify-content: center;
          box-sizing: border-box;
        }
        .slider-thumb svg {
          fill: currentColor;
        }
      </style>
      ${op(this.enabled,[["first",()=>Qn`<slot name="first"></slot>`],["second",()=>Qn`<slot name="second"></slot>`]],()=>Qn`
          <div class="eox-map-compare">
            <div class="eox-map-compare__first">
              <slot name="first"></slot>
            </div>
            <div class="eox-map-compare__second">
              <slot name="second"></slot>
            </div>
            <input
              type="range"
              class="eox-map-compare__range"
              min="0"
              max="100"
              value=${this.value}
              @input=${Lt(this,w2,Pf)}
            />
            <div class="slider-bar"></div>
            <div class="slider-thumb">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <title>arrow-left-right</title>
                <path
                  d="M6.45,17.45L1,12L6.45,6.55L7.86,7.96L4.83,11H19.17L16.14,7.96L17.55,6.55L23,12L17.55,17.45L16.14,16.04L19.17,13H4.83L7.86,16.04L6.45,17.45Z"
                />
              </svg>
            </div>
          </div>
        `)}
    `}}w2=new WeakSet,Pf=function(t){this.value=parseInt(t.target.value)};customElements.define("eox-map-compare",C5);class $o{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ee,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?V(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=V(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ie()}readFeature(e,t){return ie()}readFeatures(e,t){return ie()}readGeometry(e,t){return ie()}readProjection(e){return ie()}writeFeature(e,t){return ie()}writeFeatures(e,t){return ie()}writeGeometry(e,t){return ie()}}function je(r,e,t){const i=t?V(t.featureProjection):null,n=t?V(t.dataProjection):null;let s=r;if(i&&n&&!He(i,n)){e&&(s=r.clone());const o=e?i:n,a=e?n:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(xi(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*o)/o;return l};s===r&&(s=r.clone()),s.applyTransform(a)}return s}function Uc(r,e){const t=e?V(e.featureProjection):null,i=e?V(e.dataProjection):null;return t&&i&&!He(t,i)?Tn(r,i,t):r}const b5={Point:Oe,LineString:ze,Polygon:Ve,MultiPoint:mi,MultiLineString:wt,MultiPolygon:Xt};function v5(r,e,t){return Array.isArray(e[0])?(k1(r,0,e,t)||(r=r.slice(),yl(r,0,e,t)),r):(Cc(r,0,e,t)||(r=r.slice(),Ha(r,0,e,t)),r)}function If(r,e){var s;const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>If({...r,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const n=t.layout.length;return je(new _t(i,i==="Polygon"?v5(t.flatCoordinates,t.ends,n):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),n,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function Bc(r,e){if(!r)return null;if(Array.isArray(r)){const i=r.map(n=>Bc(n,e));return new at(i)}const t=b5[r.type];return je(new t(r.flatCoordinates,r.layout||"XY",r.ends),!1,e)}class jc extends $o{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(wa(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(wa(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ie()}readFeaturesFromObject(e,t){return ie()}readGeometry(e,t){return this.readGeometryFromObject(wa(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ie()}readProjection(e){return this.readProjectionFromObject(wa(e))}readProjectionFromObject(e){return ie()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ie()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ie()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ie()}}function wa(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}class Ho extends jc{constructor(e){e=e||{},super(),this.dataProjection=V(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=V(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const n=Xc(i.geometry);if(this.featureClass===_t)return If({geometry:n,id:i.id,properties:i.properties},t);const s=new Ee;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(Bc(n,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let n=null;if(i.type==="FeatureCollection"){const s=e;n=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],t);c&&n.push(c)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return E5(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=V(t.properties.name);else if(t.type==="EPSG")i=V("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(i.id=n),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=Pl(o,t),delete s[e.getGeometryName()]),Ln(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return Pl(e,this.adaptOptions(t))}}function Xc(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=T5(r);break}case"LineString":{t=S5(r);break}case"Polygon":{t=I5(r);break}case"MultiPoint":{t=L5(r);break}case"MultiLineString":{t=R5(r);break}case"MultiPolygon":{t=P5(r);break}case"GeometryCollection":{t=w5(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function E5(r,e){const t=Xc(r);return Bc(t,e)}function w5(r,e){return r.geometries.map(function(i){return Xc(i)})}function T5(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:yr(e.length)}}function S5(r){var i;const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:yr(((i=e[0])==null?void 0:i.length)||2)}}function R5(r){var s,o;const e=r.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,i=[],n=Xo(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:n,layout:yr(t)}}function L5(r){var t;const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:yr(((t=e[0])==null?void 0:t.length)||2)}}function P5(r){var s,o;const e=r.coordinates,t=[],i=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,n=L1(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:yr(i)}}function I5(r){var s,o;const e=r.coordinates,t=[],i=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,n=Xo(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:n,layout:yr(i)}}function Pl(r,e){r=je(r,!0,e);const t=r.getType();let i;switch(t){case"Point":{i=N5(r);break}case"LineString":{i=F5(r);break}case"Polygon":{i=D5(r,e);break}case"MultiPoint":{i=k5(r);break}case"MultiLineString":{i=M5(r);break}case"MultiPolygon":{i=O5(r,e);break}case"GeometryCollection":{i=A5(r,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function A5(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(i){return Pl(i,e)})}}function F5(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function M5(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function k5(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function O5(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function N5(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function D5(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}const Vc={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};function Af(r,e,t,i=!1,n=!1,s=!0){const o=i?[r.feature]:r.features;n&&e.getSource().clear();const a=e.getSource().getFeatures();if(!e.get("multipleFeatures")&&(a.length||o.length>1))return console.error("Multiple features detected!");o.forEach(h=>{const u=h.getGeometry();if(u instanceof ze){const f=g1(u,{radius:6378137,projection:t.projection});h.set("measure",f)}else if(u instanceof Ve){const f=m1(u,{radius:6378137,projection:t.projection});h.set("measure",f)}const d=W(h);h.set("id",d),h.setId(d)}),!i&&o.length&&(e.getSource().addFeatures(o),t.map.getView().fit(e.getSource().getExtent(),{duration:s?750:0}));const l=new Ho,c=JSON.parse(l.writeFeatures(o,Vc));(i||n)&&ku(t,"drawend",r,c),ku(t,"addfeatures",r,c)}function ku(r,e,t,i){const n=new CustomEvent(e,{detail:{originalEvent:t,geoJSON:i}});r.dispatchEvent(n)}function Ff(r){r.setRotation(r.getRotation())}class Mf extends jc{constructor(e){super(),e=e||{},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=V(e.dataProjection?e.dataProjection:"EPSG:4326")}readFeaturesFromObject(e,t){if(e.type=="Topology"){const i=e;let n,s=null,o=null;i.transform&&(n=i.transform,s=n.scale,o=n.translate);const a=i.arcs;n&&Z5(a,s,o);const l=[],c=i.objects,h=this.layerName_;let u;for(const d in c)this.layers_&&!this.layers_.includes(d)||(c[d].type==="GeometryCollection"?(u=c[d],l.push.apply(l,W5(u,a,s,o,h,d,t))):(u=c[d],l.push(kf(u,a,s,o,h,d,t))));return l}return[]}readProjectionFromObject(e){return this.dataProjection}}const G5={Point:z5,LineString:B5,Polygon:X5,MultiPoint:U5,MultiLineString:j5,MultiPolygon:V5};function Z2(r,e){const t=[];let i;for(let n=0,s=r.length;n<s;++n)if(i=r[n],n>0&&t.pop(),i>=0){const o=e[i];for(let a=0,l=o.length;a<l;++a)t.push(o[a].slice(0))}else{const o=e[~i];for(let a=o.length-1;a>=0;--a)t.push(o[a].slice(0))}return t}function z5(r,e,t){const i=r.coordinates;return e&&t&&Wc(i,e,t),new Oe(i)}function U5(r,e,t){const i=r.coordinates;if(e&&t)for(let n=0,s=i.length;n<s;++n)Wc(i[n],e,t);return new mi(i)}function B5(r,e){const t=Z2(r.arcs,e);return new ze(t)}function j5(r,e){const t=[];for(let i=0,n=r.arcs.length;i<n;++i)t[i]=Z2(r.arcs[i],e);return new wt(t)}function X5(r,e){const t=[];for(let i=0,n=r.arcs.length;i<n;++i)t[i]=Z2(r.arcs[i],e);return new Ve(t)}function V5(r,e){const t=[];for(let i=0,n=r.arcs.length;i<n;++i){const s=r.arcs[i],o=[];for(let a=0,l=s.length;a<l;++a)o[a]=Z2(s[a],e);t[i]=o}return new Xt(t)}function W5(r,e,t,i,n,s,o){const a=r.geometries,l=[];for(let c=0,h=a.length;c<h;++c)l[c]=kf(a[c],e,t,i,n,s,o);return l}function kf(r,e,t,i,n,s,o){let a=null;const l=r.type;if(l){const u=G5[l];l==="Point"||l==="MultiPoint"?a=u(r,t,i):a=u(r,e),a=je(a,!1,o)}const c=new Ee({geometry:a});r.id!==void 0&&c.setId(r.id);let h=r.properties;return n&&(h||(h={}),h[n]=s),h&&c.setProperties(h,!0),c}function Z5(r,e,t){for(let i=0,n=r.length;i<n;++i)Y5(r[i],e,t)}function Y5(r,e,t){let i=0,n=0;for(let s=0,o=r.length;s<o;++s){const a=r[s];i+=a[0],n+=a[1],a[0]=i,a[1]=n,Wc(a,e,t)}}function Wc(r,e,t){r[0]=r[0]*e[0]+t[0],r[1]=r[1]*e[1]+t[1]}const dr="http://www.w3.org/2001/XMLSchema-instance";function ce(r,e){return Os().createElementNS(r,e)}function Ft(r,e){return Of(r,e,[]).join("")}function Of(r,e,t){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)t.push(r.nodeValue);else{let i;for(i=r.firstChild;i;i=i.nextSibling)Of(i,e,t)}return t}function hi(r){return"documentElement"in r}function $5(r,e,t){return r.getAttributeNS(e,t)||""}function ui(r){return new DOMParser().parseFromString(r,"application/xml")}function c2(r,e){return function(t,i){const n=r.call(e??this,t,i);if(n!==void 0){const s=i[i.length-1];xe(s,n)}}}function J(r,e){return function(t,i){const n=r.call(e??this,t,i);n!==void 0&&i[i.length-1].push(n)}}function te(r,e){return function(t,i){const n=r.call(e??this,t,i);n!==void 0&&(i[i.length-1]=n)}}function Le(r,e,t){return function(i,n){const s=r.call(this,i,n);if(s!==void 0){const o=n[n.length-1],a=i.localName;let l;a in o?l=o[a]:(l=[],o[a]=l),l.push(s)}}}function E(r,e,t){return function(i,n){const s=r.call(this,i,n);if(s!==void 0){const o=n[n.length-1],a=e!==void 0?e:i.localName;o[a]=s}}}function S(r,e){return function(t,i,n){r.call(e??this,t,i,n),n[n.length-1].node.appendChild(t)}}function Nf(r,e){let t,i;return function(n,s,o){if(t===void 0){t={};const a={};a[n.localName]=r,t[n.namespaceURI]=a,i=Ke(n.localName)}Df(t,i,s,o)}}function Ke(r,e){return function(t,i,n){const o=i[i.length-1].node;let a=r;a===void 0&&(a=n);const l=e!==void 0?e:o.namespaceURI;return ce(l,a)}}const gt=Ke();function Vt(r,e){const t=e.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=r[e[n]];return i}function k(r,e,t){t=t!==void 0?t:{};let i,n;for(i=0,n=r.length;i<n;++i)t[r[i]]=e;return t}function Ut(r,e,t,i){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=r[n.namespaceURI];if(s!==void 0){const o=s[n.localName];o!==void 0&&o.call(i,n,t)}}}function G(r,e,t,i,n){return i.push(r),Ut(e,t,i,n),i.pop()}function Df(r,e,t,i,n,s){const o=(n!==void 0?n:t).length;let a,l;for(let c=0;c<o;++c)a=t[c],a!==void 0&&(l=e.call(s,a,i,n!==void 0?n[c]:void 0),l!==void 0&&r[l.namespaceURI][l.localName].call(s,l,a,i))}function le(r,e,t,i,n,s,o){return n.push(r),Df(e,t,i,n,s,o),n.pop()}let W0;function H5(){return W0===void 0&&typeof XMLSerializer<"u"&&(W0=new XMLSerializer),W0}let Z0;function Os(){return Z0===void 0&&typeof document<"u"&&(Z0=document.implementation.createDocument("","",null)),Z0}class Ko extends $o{constructor(){super(),this.xmlSerializer_=H5()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const i=ui(e);return this.readFeatureFromDocument(i,t)}return hi(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const i=this.readFeaturesFromDocument(e,t);return i.length>0?i[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const i=ui(e);return this.readFeaturesFromDocument(i,t)}return hi(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const i=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&xe(i,this.readFeaturesFromNode(n,t));return i}readFeaturesFromNode(e,t){return ie()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const i=ui(e);return this.readGeometryFromDocument(i,t)}return hi(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=ui(e);return this.readProjectionFromDocument(t)}return hi(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const i=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const i=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const i=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(e,t){return null}}function Mn(r){const e=Ft(r,!1);return Nt(e)}function Nt(r){const e=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(e)return e[1]!==void 0||!1}function Y2(r){const e=Ft(r,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function _e(r){const e=Ft(r,!1);return _i(e)}function _i(r){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(e)return parseFloat(e[1])}function Qe(r){const e=Ft(r,!1);return Ki(e)}function Ki(r){const e=/^\s*(\d+)\s*$/.exec(r);if(e)return parseInt(e[1],10)}function U(r){return Ft(r,!1).trim()}function Ss(r,e){oe(r,e?"1":"0")}function K5(r,e){r.appendChild(Os().createCDATASection(e))}function q5(r,e){const t=new Date(e*1e3),i=t.getUTCFullYear()+"-"+qn(t.getUTCMonth()+1,2)+"-"+qn(t.getUTCDate(),2)+"T"+qn(t.getUTCHours(),2)+":"+qn(t.getUTCMinutes(),2)+":"+qn(t.getUTCSeconds(),2)+"Z";r.appendChild(Os().createTextNode(i))}function kt(r,e){const t=e.toPrecision();r.appendChild(Os().createTextNode(t))}function h2(r,e){const t=e.toString();r.appendChild(Os().createTextNode(t))}const J5=/^\s/,Q5=/\s$/,e4=/(\n|\t|\r|<|&| {2})/;function oe(r,e){typeof e=="string"&&(J5.test(e)||Q5.test(e)||e4.test(e))?e.split("]]>").forEach((t,i,n)=>{i<n.length-1&&(t+="]]"),i>0&&(t=">"+t),K5(r,t)}):r.appendChild(Os().createTextNode(e))}const cn=["http://www.google.com/kml/ext/2.2"],Q=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],t4="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Ou={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},i4=k(Q,{ExtendedData:Qf,Region:eg,MultiGeometry:E(Kf,"geometry"),LineString:E($f,"geometry"),LinearRing:E(Hf,"geometry"),Point:E(qf,"geometry"),Polygon:E(Jf,"geometry"),Style:E($c),StyleMap:G4,address:E(U),description:E(U),name:E(U),open:E(Mn),phoneNumber:E(U),styleUrl:E(Xf),visibility:E(Mn)},k(cn,{MultiTrack:E(T4,"geometry"),Track:E(Yf,"geometry")})),n4=k(Q,{ExtendedData:Qf,Region:eg,Link:K4,address:E(U),description:E(U),name:E(U),open:E(Mn),phoneNumber:E(U),visibility:E(Mn)}),r4=k(Q,{href:E(jf)}),s4=k(Q,{Altitude:E(_e),Longitude:E(_e),Latitude:E(_e),Tilt:E(_e),AltitudeMode:E(U),Heading:E(_e),Roll:E(_e)}),Gf=k(Q,{LatLonAltBox:X4,Lod:W4}),o4=k(Q,["Document","Placemark"]),a4=k(Q,{Document:S(ry),Placemark:S(ng)});let as,Oa=null,Il,ho,uo,fo,u2,Al=null,Zc,Fl=null,Ml,rr=null,Nu=null,kl=null;function d2(r){return 32/Math.min(r[0],r[1])}function l4(){as=[255,255,255,1],Oa=new jt({color:as}),Il=[20,2],ho="pixels",uo="pixels",fo=[64,64],u2="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Al=new Ms({anchor:Il,anchorOrigin:"bottom-left",anchorXUnits:ho,anchorYUnits:uo,crossOrigin:"anonymous",rotation:0,scale:d2(fo),size:fo,src:u2}),Zc="NO_IMAGE",Fl=new At({color:as,width:1}),Ml=new At({color:[51,51,51,1],width:2}),rr=new ur({font:"bold 16px Helvetica",fill:Oa,stroke:Ml,scale:.8}),Nu=new et({fill:Oa,image:Al,text:rr,stroke:Fl,zIndex:0}),kl=[Nu]}let Ta;function c4(r){return r}class zf extends Ko{constructor(e){super(),e=e||{},kl||l4(),this.dataProjection=V("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:kl,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:c4,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const i=k(Q,{Document:c2(this.readDocumentOrFolder_,this),Folder:c2(this.readDocumentOrFolder_,this),Placemark:J(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=G([],i,e,t,this);if(n)return n}readPlacemark_(e,t){const i=G({geometry:null},i4,e,t,this);if(!i)return;const n=new Ee,s=e.getAttribute("id");s!==null&&n.setId(s);const o=t[0],a=i.geometry;if(a&&je(a,!1,o),n.setGeometry(a),delete i.geometry,this.extractStyles_){const l=i.Style,c=i.styleUrl,h=u4(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(h)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(e,t){const i=e.getAttribute("id");if(i!==null){const n=$c.call(this,e,t);if(n){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+i,o).href:s="#"+i,this.sharedStyles_[s]=n}}}readSharedStyleMap_(e,t){const i=e.getAttribute("id");if(i===null)return;const n=Wf.call(this,e,t);if(!n)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+i,o).href:s="#"+i,this.sharedStyles_[s]=n}readFeatureFromNode(e,t){if(!Q.includes(e.namespaceURI))return null;const i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i||null}readFeaturesFromNode(e,t){if(!Q.includes(e.namespaceURI))return[];let i;const n=e.localName;if(n=="Document"||n=="Folder")return i=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),i||[];if(n=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(n=="kml"){i=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,t);o&&xe(i,o)}return i}return[]}readName(e){if(e){if(typeof e=="string"){const t=ui(e);return this.readNameFromDocument(t)}return hi(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const i=this.readNameFromNode(t);if(i)return i}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Q.includes(t.namespaceURI)&&t.localName=="name")return U(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const i=t.localName;if(Q.includes(t.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){const n=this.readNameFromNode(t);if(n)return n}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const i=ui(e);xe(t,this.readNetworkLinksFromDocument(i))}else hi(e)?xe(t,this.readNetworkLinksFromDocument(e)):xe(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&xe(t,this.readNetworkLinksFromNode(i));return t}readNetworkLinksFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(Q.includes(i.namespaceURI)&&i.localName=="NetworkLink"){const n=G({},n4,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;Q.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&xe(t,this.readNetworkLinksFromNode(i))}return t}readRegion(e){const t=[];if(typeof e=="string"){const i=ui(e);xe(t,this.readRegionFromDocument(i))}else hi(e)?xe(t,this.readRegionFromDocument(e)):xe(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&xe(t,this.readRegionFromNode(i));return t}readRegionFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(Q.includes(i.namespaceURI)&&i.localName=="Region"){const n=G({},Gf,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;Q.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&xe(t,this.readRegionFromNode(i))}return t}readCamera(e){const t=[];if(typeof e=="string"){const i=ui(e);xe(t,this.readCameraFromDocument(i))}else hi(e)?xe(t,this.readCameraFromDocument(e)):xe(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&xe(t,this.readCameraFromNode(i));return t}readCameraFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(Q.includes(i.namespaceURI)&&i.localName==="Camera"){const n=G({},s4,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;Q.includes(i.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&xe(t,this.readCameraFromNode(i))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=ce(Q[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",cn[0]),i.setAttributeNS(n,"xmlns:xsi",dr),i.setAttributeNS(dr,"xsi:schemaLocation",t4);const s={node:i},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=o4[i.namespaceURI],l=Vt(o,a);return le(s,a4,gt,l,[t],a,this),i}}function h4(r,e){const t=[0,0];let i="start";const n=r.getImage();if(n){const a=n.getSize();if(a&&a.length==2){const l=n.getScaleArray(),c=n.getAnchor();t[0]=l[0]*(a[0]-c[0]),t[1]=l[1]*(a[1]/2-c[1]),i="left"}}let s=r.getText();return s?(s=s.clone(),s.setFont(s.getFont()||rr.getFont()),s.setScale(s.getScale()||rr.getScale()),s.setFill(s.getFill()||rr.getFill()),s.setStroke(s.getStroke()||Ml)):s=rr.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(i),new et({image:n,text:s})}function u4(r,e,t,i,n){return function(s,o){let a=n,l="",c=[];if(a){const u=s.getGeometry();if(u)if(u instanceof at)c=u.getGeometriesArrayRecursive().filter(function(d){const f=d.getType();return f==="Point"||f==="MultiPoint"}),a=c.length>0;else{const d=u.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(Ta||(Ta=document.createElement("textarea")),Ta.innerHTML=l,l=Ta.value));let h=t;if(r?h=r:e&&(h=Uf(e,t,i)),a){const u=h4(h[0],l);if(c.length>0){u.setGeometry(new at(c));const d=new et({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[u,d].concat(h.slice(1))}return u}return h}}function Uf(r,e,t){return Array.isArray(r)?r:typeof r=="string"?Uf(t[r],e,t):e}function $2(r){const e=Ft(r,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const i=t[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function Bf(r){let e=Ft(r,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=i.exec(e);){const s=parseFloat(n[1]),o=parseFloat(n[2]),a=n[3]?parseFloat(n[3]):0;t.push(s,o,a),e=e.substr(n[0].length)}if(e==="")return t}function jf(r){const e=Ft(r,!1).trim();let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Xf(r){const e=Ft(r,!1).trim().replace(/^(?!.*#)/,"#");let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function d4(r){const e=r.getAttribute("xunits"),t=r.getAttribute("yunits");let i;return e!=="insetPixels"?t!=="insetPixels"?i="bottom-left":i="top-left":t!=="insetPixels"?i="bottom-right":i="top-right",{x:parseFloat(r.getAttribute("x")),xunits:Ou[e],y:parseFloat(r.getAttribute("y")),yunits:Ou[t],origin:i}}function Vf(r){return _e(r)}const f4=k(Q,{Pair:D4});function Wf(r,e){return G(void 0,f4,r,e,this)}const g4=k(Q,{Icon:E(L4),color:E($2),heading:E(_e),hotSpot:E(d4),scale:E(Vf)});function m4(r,e){const t=G({},g4,r,e);if(!t)return;const i=e[e.length-1],n="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(n).length>0;let o;const a=n.href;a?o=a:s&&(o=u2);let l,c,h,u="bottom-left";const d=t.hotSpot;d?(l=[d.x,d.y],c=d.xunits,h=d.yunits,u=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=Il,c=ho,h=uo):o.includes("arrow-reverse")?(l=[54,42],c=ho,h=uo):o.includes("paddle")&&(l=[32,1],c=ho,h=uo));let f;const g=n.x,p=n.y;g!==void 0&&p!==void 0&&(f=[g,p]);let m;const _=n.w,y=n.h;_!==void 0&&y!==void 0&&(m=[_,y]);let x;const C=t.heading;C!==void 0&&(x=Pt(C));const b=t.scale,v=t.color;if(s){o==u2&&(m=fo);const w=new Ms({anchor:l,anchorOrigin:u,anchorXUnits:c,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:f,offsetOrigin:"bottom-left",rotation:x,scale:b,size:m,src:this.iconUrlFunction_(o),color:v}),L=w.getScaleArray()[0],T=w.getSize();if(T===null){const R=w.getImageState();if(R===Y.IDLE||R===Y.LOADING){const M=function(){const I=w.getImageState();if(!(I===Y.IDLE||I===Y.LOADING)){const F=w.getSize();if(F&&F.length==2){const A=d2(F);w.setScale(L*A)}w.unlistenImageChange(M)}};w.listenImageChange(M),R===Y.IDLE&&w.load()}}else if(T.length==2){const R=d2(T);w.setScale(L*R)}i.imageStyle=w}else i.imageStyle=Zc}const p4=k(Q,{color:E($2),scale:E(Vf)});function _4(r,e){const t=G({},p4,r,e);if(!t)return;const i=e[e.length-1],n=new ur({fill:new jt({color:"color"in t?t.color:as}),scale:t.scale});i.textStyle=n}const y4=k(Q,{color:E($2),width:E(_e)});function x4(r,e){const t=G({},y4,r,e);if(!t)return;const i=e[e.length-1],n=new At({color:"color"in t?t.color:as,width:"width"in t?t.width:1});i.strokeStyle=n}const C4=k(Q,{color:E($2),fill:E(Mn),outline:E(Mn)});function b4(r,e){const t=G({},C4,r,e);if(!t)return;const i=e[e.length-1],n=new jt({color:"color"in t?t.color:as});i.fillStyle=n;const s=t.fill;s!==void 0&&(i.fill=s);const o=t.outline;o!==void 0&&(i.outline=o)}const v4=k(Q,{coordinates:te(Bf)});function Zf(r,e){return G(null,v4,r,e)}function E4(r,e){const i=e[e.length-1].coordinates,n=Ft(r,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);i.push([a,l,c])}else i.push([])}const w4=k(cn,{Track:J(Yf)});function T4(r,e){const t=G([],w4,r,e);if(t)return new wt(t)}const S4=k(Q,{when:q4},k(cn,{coord:E4}));function Yf(r,e){const t=G({coordinates:[],whens:[]},S4,r,e);if(!t)return;const i=[],n=t.coordinates,s=t.whens;for(let o=0,a=Math.min(n.length,s.length);o<a;++o)n[o].length==3&&i.push(n[o][0],n[o][1],n[o][2],s[o]);return new ze(i,"XYZM")}const R4=k(Q,{href:E(jf)},k(cn,{x:E(_e),y:E(_e),w:E(_e),h:E(_e)}));function L4(r,e){const t=G({},R4,r,e);return t||null}const P4=k(Q,{coordinates:te(Bf)});function Yc(r,e){return G(null,P4,r,e)}const H2=k(Q,{extrude:E(Mn),tessellate:E(Mn),altitudeMode:E(U)});function $f(r,e){const t=G({},H2,r,e),i=Yc(r,e);if(i){const n=new ze(i,"XYZ");return n.setProperties(t,!0),n}}function Hf(r,e){const t=G({},H2,r,e),i=Yc(r,e);if(i){const n=new Ve(i,"XYZ",[i.length]);return n.setProperties(t,!0),n}}const I4=k(Q,{LineString:J($f),LinearRing:J(Hf),MultiGeometry:J(Kf),Point:J(qf),Polygon:J(Jf)});function Kf(r,e){const t=G([],I4,r,e);if(!t)return null;if(t.length===0)return new at(t);let i,n=!0;const s=t[0].getType();let o;for(let a=1,l=t.length;a<l;++a)if(o=t[a],o.getType()!=s){n=!1;break}if(n){let a,l;if(s=="Point"){const c=t[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let h=1,u=t.length;h<u;++h)o=t[h],xe(l,o.getFlatCoordinates());i=new mi(l,a),Y0(i,t)}else if(s=="LineString")i=new wt(t),Y0(i,t);else if(s=="Polygon")i=new Xt(t),Y0(i,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))i=new at(t);else throw new Error("Unknown geometry type found")}else i=new at(t);return i}function qf(r,e){const t=G({},H2,r,e),i=Yc(r,e);if(i){const n=new Oe(i,"XYZ");return n.setProperties(t,!0),n}}const A4=k(Q,{innerBoundaryIs:Y4,outerBoundaryIs:H4});function Jf(r,e){const t=G({},H2,r,e),i=G([null],A4,r,e);if(i&&i[0]){const n=i[0],s=[n.length];for(let a=1,l=i.length;a<l;++a)xe(n,i[a]),s.push(n.length);const o=new Ve(n,"XYZ",s);return o.setProperties(t,!0),o}}const F4=k(Q,{IconStyle:m4,LabelStyle:_4,LineStyle:x4,PolyStyle:b4});function $c(r,e){const t=G({},F4,r,e,this);if(!t)return null;let i="fillStyle"in t?t.fillStyle:Oa;const n=t.fill;n!==void 0&&!n&&(i=null);let s;"imageStyle"in t?t.imageStyle!=Zc&&(s=t.imageStyle):s=Al;const o="textStyle"in t?t.textStyle:rr,a="strokeStyle"in t?t.strokeStyle:Fl,l=t.outline;return l!==void 0&&!l?[new et({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new at(d.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g!=="Polygon"&&g!=="MultiPolygon"}))}if(u!=="Polygon"&&u!=="MultiPolygon")return h},fill:i,image:s,stroke:a,text:o,zIndex:void 0}),new et({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new at(d.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g==="Polygon"||g==="MultiPolygon"}))}if(u==="Polygon"||u==="MultiPolygon")return h},fill:i,stroke:null,zIndex:void 0})]:[new et({fill:i,image:s,stroke:a,text:o,zIndex:void 0})]}function Y0(r,e){const t=e.length,i=new Array(e.length),n=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<t;++c){const h=e[c];i[c]=h.get("extrude"),n[c]=h.get("tessellate"),s[c]=h.get("altitudeMode"),o=o||i[c]!==void 0,a=a||n[c]!==void 0,l=l||s[c]}o&&r.set("extrude",i),a&&r.set("tessellate",n),l&&r.set("altitudeMode",s)}const M4=k(Q,{displayName:E(U),value:E(U)});function k4(r,e){const t=r.getAttribute("name");Ut(M4,r,e);const i=e[e.length-1];t&&i.displayName?i[t]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:t!==null?i[t]=i.value:i.displayName!==null&&(i[i.displayName]=i.value),delete i.value}const O4=k(Q,{Data:k4,SchemaData:U4});function Qf(r,e){Ut(O4,r,e)}function eg(r,e){Ut(Gf,r,e)}const N4=k(Q,{Style:E($c),key:E(U),styleUrl:E(Xf)});function D4(r,e){const t=G({},N4,r,e,this);if(!t)return;const i=t.key;if(i&&i=="normal"){const n=t.styleUrl;n&&(e[e.length-1]=n);const s=t.Style;s&&(e[e.length-1]=s)}}function G4(r,e){const t=Wf.call(this,r,e);if(!t)return;const i=e[e.length-1];if(Array.isArray(t))i.Style=t;else if(typeof t=="string")i.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const z4=k(Q,{SimpleData:B4});function U4(r,e){Ut(z4,r,e)}function B4(r,e){const t=r.getAttribute("name");if(t!==null){const i=U(r),n=e[e.length-1];n[t]=i}}const j4=k(Q,{altitudeMode:E(U),minAltitude:E(_e),maxAltitude:E(_e),north:E(_e),south:E(_e),east:E(_e),west:E(_e)});function X4(r,e){const t=G({},j4,r,e);if(!t)return;const i=e[e.length-1],n=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];i.extent=n,i.altitudeMode=t.altitudeMode,i.minAltitude=parseFloat(t.minAltitude),i.maxAltitude=parseFloat(t.maxAltitude)}const V4=k(Q,{minLodPixels:E(_e),maxLodPixels:E(_e),minFadeExtent:E(_e),maxFadeExtent:E(_e)});function W4(r,e){const t=G({},V4,r,e);if(!t)return;const i=e[e.length-1];i.minLodPixels=parseFloat(t.minLodPixels),i.maxLodPixels=parseFloat(t.maxLodPixels),i.minFadeExtent=parseFloat(t.minFadeExtent),i.maxFadeExtent=parseFloat(t.maxFadeExtent)}const Z4=k(Q,{LinearRing:J(Zf)});function Y4(r,e){const t=G([],Z4,r,e);t.length>0&&e[e.length-1].push(...t)}const $4=k(Q,{LinearRing:te(Zf)});function H4(r,e){const t=G(void 0,$4,r,e);if(t){const i=e[e.length-1];i[0]=t}}function K4(r,e){Ut(r4,r,e)}function q4(r,e){const i=e[e.length-1].whens,n=Ft(r,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}function K2(r,e){const t=gi(e),n=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const o=Math.floor(n[s]).toString(16);n[s]=o.length==1?"0"+o:o}oe(r,n.join(""))}function J4(r,e,t){const i=t[t.length-1],n=i.layout,s=i.stride;let o;if(n=="XY"||n=="XYM")o=2;else if(n=="XYZ"||n=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let h=1;h<o;++h)l+=","+e[c+h]}}oe(r,l)}const Na=k(Q,{Data:S(Q4),value:S(ty),displayName:S(ey)});function Q4(r,e,t){r.setAttribute("name",e.name);const i={node:r},n=e.value;typeof n=="object"?(n!==null&&n.displayName&&le(i,Na,gt,[n.displayName],t,["displayName"]),n!==null&&n.value&&le(i,Na,gt,[n.value],t,["value"])):le(i,Na,gt,[n],t,["value"])}function ey(r,e){oe(r,e)}function ty(r,e){oe(r,e)}const iy=k(Q,{Placemark:S(ng)}),ny=function(r,e,t){const i=e[e.length-1].node;return ce(i.namespaceURI,"Placemark")};function ry(r,e,t){le({node:r},iy,ny,e,t,void 0,this)}const sy=Ke("Data");function oy(r,e,t){const i={node:r},n=e.names,s=e.values,o=n.length;for(let a=0;a<o;a++)le(i,Na,sy,[{name:n[a],value:s[a]}],t)}const Du=k(Q,["href"],k(cn,["x","y","w","h"])),Gu=k(Q,{href:S(oe)},k(cn,{x:S(kt),y:S(kt),w:S(kt),h:S(kt)})),ay=function(r,e,t){return ce(cn[0],"gx:"+t)};function ly(r,e,t){const i={node:r},n=t[t.length-1].node;let s=Du[n.namespaceURI],o=Vt(e,s);le(i,Gu,gt,o,t,s),s=Du[cn[0]],o=Vt(e,s),le(i,Gu,ay,o,t,s)}const cy=k(Q,["scale","heading","Icon","color","hotSpot"]),hy=k(Q,{Icon:S(ly),color:S(K2),heading:S(kt),hotSpot:S(Dy),scale:S(sg)});function uy(r,e,t){const i={node:r},n={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const m=e.getAnchor(),_=e.getOrigin();if(_&&a&&_[0]!==0&&_[1]!==o[1]&&(l.x=_[0],l.y=a[1]-(_[1]+o[1])),m&&(m[0]!==o[0]/2||m[1]!==o[1]/2)){const y={x:m[0],xunits:"pixels",y:o[1]-m[1],yunits:"pixels"};n.hotSpot=y}}n.Icon=l;let c=e.getScaleArray()[0],h=o;if(h===null&&(h=fo),h.length==2){const m=d2(h);c=c/m}c!==1&&(n.scale=c);const u=e.getRotation();u!==0&&(n.heading=u);const d=e.getColor();d&&(n.color=d);const f=t[t.length-1].node,g=cy[f.namespaceURI],p=Vt(n,g);le(i,hy,gt,p,t,g)}const dy=k(Q,["color","scale"]),fy=k(Q,{color:S(K2),scale:S(sg)});function gy(r,e,t){const i={node:r},n={},s=e.getFill();s&&(n.color=s.getColor());const o=e.getScale();o&&o!==1&&(n.scale=o);const a=t[t.length-1].node,l=dy[a.namespaceURI],c=Vt(n,l);le(i,fy,gt,c,t,l)}const my=k(Q,["color","width"]),py=k(Q,{color:S(K2),width:S(kt)});function _y(r,e,t){const i={node:r},n={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,o=my[s.namespaceURI],a=Vt(n,o);le(i,py,gt,a,t,o)}const yy={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},tg=function(r,e,t){if(r){const i=e[e.length-1].node;return ce(i.namespaceURI,yy[r.getType()])}},xy=Ke("Point"),Cy=Ke("LineString"),by=Ke("LinearRing"),vy=Ke("Polygon"),Ey=k(Q,{LineString:S(ls),Point:S(ls),Polygon:S(rg),GeometryCollection:S(ig)});function ig(r,e,t){const i={node:r},n=e.getType();let s=[],o;if(n==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=tg;else if(n==="MultiPoint")s=e.getPoints(),o=xy;else if(n==="MultiLineString")s=e.getLineStrings(),o=Cy;else if(n==="MultiPolygon")s=e.getPolygons(),o=vy;else throw new Error("Unknown geometry type");le(i,Ey,o,s,t)}const wy=k(Q,{LinearRing:S(ls)});function zu(r,e,t){le({node:r},wy,by,[e],t)}const $0=k(Q,{ExtendedData:S(oy),MultiGeometry:S(ig),LineString:S(ls),LinearRing:S(ls),Point:S(ls),Polygon:S(rg),Style:S(Ny),address:S(oe),description:S(oe),name:S(oe),open:S(Ss),phoneNumber:S(oe),styleUrl:S(oe),visibility:S(Ss)}),Ty=k(Q,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Sy=Ke("ExtendedData");function ng(r,e,t){const i={node:r};e.getId()&&r.setAttribute("id",e.getId());const n=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(n||{}).sort().filter(function(f){return!s[f]}),a=e.getStyleFunction();if(a){const f=a(e,0);if(f){const g=Array.isArray(f)?f:[f];let p=g;if(e.getGeometry()&&(p=g.filter(function(m){const _=m.getGeometryFunction()(e);if(_){const y=_.getType();return y==="GeometryCollection"?_.getGeometriesArrayRecursive().filter(function(x){const C=x.getType();return C==="Point"||C==="MultiPoint"}).length:y==="Point"||y==="MultiPoint"}})),this.writeStyles_){let m=g,_=g;e.getGeometry()&&(m=g.filter(function(y){const x=y.getGeometryFunction()(e);if(x){const C=x.getType();return C==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(b){const v=b.getType();return v==="LineString"||v==="MultiLineString"}).length:C==="LineString"||C==="MultiLineString"}}),_=g.filter(function(y){const x=y.getGeometryFunction()(e);if(x){const C=x.getType();return C==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(b){const v=b.getType();return v==="Polygon"||v==="MultiPolygon"}).length:C==="Polygon"||C==="MultiPolygon"}})),n.Style={pointStyles:p,lineStyles:m,polyStyles:_}}if(p.length&&n.name===void 0){const m=p[0].getText();m&&(n.name=m.getText())}}}const l=t[t.length-1].node,c=Ty[l.namespaceURI],h=Vt(n,c);if(le(i,$0,gt,h,t,c),o.length>0){const f=Vt(n,o);le(i,$0,Sy,[{names:o,values:f}],t)}const u=t[0];let d=e.getGeometry();d&&(d=je(d,!0,u)),le(i,$0,tg,[d],t)}const Ry=k(Q,["extrude","tessellate","altitudeMode","coordinates"]),Ly=k(Q,{extrude:S(Ss),tessellate:S(Ss),altitudeMode:S(oe),coordinates:S(J4)});function ls(r,e,t){const i=e.getFlatCoordinates(),n={node:r};n.layout=e.getLayout(),n.stride=e.getStride();const s=e.getProperties();s.coordinates=i;const o=t[t.length-1].node,a=Ry[o.namespaceURI],l=Vt(s,a);le(n,Ly,gt,l,t,a)}const Py=k(Q,["color","fill","outline"]),Uu=k(Q,{outerBoundaryIs:S(zu),innerBoundaryIs:S(zu)}),Iy=Ke("innerBoundaryIs"),Ay=Ke("outerBoundaryIs");function rg(r,e,t){const i=e.getLinearRings(),n=i.shift(),s={node:r};le(s,Uu,Iy,i,t),le(s,Uu,Ay,[n],t)}const Fy=k(Q,{color:S(K2),fill:S(Ss),outline:S(Ss)});function My(r,e,t){const i={node:r},n=e.getFill(),s=e.getStroke(),o={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:s?void 0:!1},a=t[t.length-1].node,l=Py[a.namespaceURI],c=Vt(o,l);le(i,Fy,gt,c,t,l)}function sg(r,e){kt(r,Math.round(e*1e6)/1e6)}const ky=k(Q,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Oy=k(Q,{IconStyle:S(uy),LabelStyle:S(gy),LineStyle:S(_y),PolyStyle:S(My)});function Ny(r,e,t){const i={node:r},n={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(n.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(n.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(n.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!n.LineStyle&&(n.LineStyle=l),n.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,o=ky[s.namespaceURI],a=Vt(n,o);le(i,Oy,gt,a,t,o)}function Dy(r,e){r.setAttribute("x",String(e.x)),r.setAttribute("y",String(e.y)),r.setAttribute("xunits",e.xunits),r.setAttribute("yunits",e.yunits)}function Gy(r,e){const s=r.readFeatures(e)[0].getGeometry().getCoordinates();if(s&&s.length>0){const o=og(s);if(typeof o=="number")return o>=-180&&o<=180?"EPSG:4326":"EPSG:3857"}}function og(r){if(typeof r=="number")return r;if(Array.isArray(r)&&r.length>0)return og(r[0])}function zy(r,e,t,i=!1,n=!0){try{const s=Uy(r);if(!s){console.error("Unsupported format or invalid data");return}const o=Gy(s,r),a=s.readFeatures(r,{dataProjection:o||Vc.dataProjection,featureProjection:t.projection});Af({features:a},e,t,!1,i,n)}catch(s){console.error("Error parsing data:",s)}}function Uy(r){return By(r)?new Ho:jy(r)?new zf({extractStyles:!1}):Xy(r)?new Mf:null}function By(r){try{const e=JSON.parse(r);return e.type==="FeatureCollection"||e.type==="Feature"}catch{return!1}}function jy(r){return r.includes("<kml")&&r.includes("</kml>")}function Xy(r){try{const e=JSON.parse(r);return e.type==="Topology"&&e.objects}catch{return!1}}let ag=null;function qo(r){ag=r;const e=Object.keys(r.defs),t=e.length;let i,n;for(i=0;i<t;++i){const s=e[i];if(!is(s)){const o=r.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),Ya(new lr({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(i=0;i<t;++i){const s=e[i],o=is(s);for(n=0;n<t;++n){const a=e[n],l=is(a);if(!ka(s,a))if(r.defs[s]===r.defs[a])gl([o,l]);else{const c=r(s,a);_3(o,l,Qh(o,l,c.forward),Qh(l,o,c.inverse))}}}}let Vy=async function(r){const e=await fetch(`https://epsg.io/${r}.proj4`);if(!e.ok)throw new Error(`Unexpected response from epsg.io: ${e.status}`);return e.text()};async function Wy(r){typeof r=="string"&&(r=parseInt(r.split(":").pop(),10));const e=ag;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");const t="EPSG:"+r;return e.defs(t)||(e.defs(t,await Vy(r)),qo(e)),is(t)}function Zy(r,e,t=void 0){sr.defs(r,e),qo(sr),typeof t<"u"&&V(r).setExtent(t)}async function Yy(r){return qo(sr),await Wy(r)}function $y(r){return new Ho().writeFeaturesObject(r)}function lg(r,e,t=void 0){return t||(t="EPSG:4326"),an(r,e,t)}function cg(r,e,t=void 0){return t||(t="EPSG:4326"),Tn(r,e,t)}function Bu(r,e=!1){e?(r.addInteraction(new Qa({condition:ou})),"ontouchstart"in window||navigator.maxTouchPoints>0?r.addInteraction(new oo({condition:function(i){return this.getPointerCount()===2||ou(i)}})):r.addInteraction(new oo)):(r.addInteraction(new Qa),r.addInteraction(new oo))}function Hy(r){r.getInteractions().getArray().forEach(e=>{(e instanceof Qa||e instanceof oo)&&r.removeInteraction(e)})}function Ky(r,e,t=.001){let i=!0;for(let n=r.length-1;n>=0;--n)if(!qy(r[n],e[n],t)){i=!1;break}return i}function qy(r,e,t=.001){return Math.abs(r-e)<t}function hg(r){if(r){const e=r;return!bt(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90?y3(e):e}return[0,0]}function Jy(r,e,t){const i=Object.assign({},t);if(r.interactions[i.id])throw Error(`Interaction with id: ${i.id} already exists.`);i.modify=typeof i.modify=="boolean"?i.modify:!0;const n=e.getSource();i.type==="Box"&&(i.geometryFunction=g5(),i.type="Circle");const s=new d5({...i,source:n});i.active===!1&&s.setActive(!1),s.on("drawend",l=>{e.get("isDrawingEnabled")&&Af(l,e,r,!0)}),r.map.addInteraction(s),r.interactions[i.id]=s;const o=new p5({source:n});o.setActive(i.modify),r.map.addInteraction(o),r.interactions[`${i.id}_modify`]=o;const a=()=>{r.getLayerById(e.get("id"))||(r.removeInteraction(i.id),r.removeInteraction(`${i.id}_modify`),r.map.getLayerGroup().un("change",a))};r.map.getLayerGroup().on("change",a)}const Ct={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class ug extends Di{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+K3,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ct.ELEMENT,this.handleElementChanged),this.addChangeListener(Ct.MAP,this.handleMapChanged),this.addChangeListener(Ct.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ct.POSITION,this.handlePositionChanged),this.addChangeListener(Ct.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Ct.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ct.MAP)||null}getOffset(){return this.get(Ct.OFFSET)}getPosition(){return this.get(Ct.POSITION)}getPositioning(){return this.get(Ct.POSITIONING)}handleElementChanged(){N1(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),ke(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ge(e,Si.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Ct.ELEMENT,e)}setMap(e){this.set(Ct.MAP,e)}setOffset(e){this.set(Ct.OFFSET,e)}setPosition(e){this.set(Ct.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Ct.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[J3(n),Q3(n)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Et(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],h=i[3]-s[3],u=[0,0];if(a<0?u[0]=a-o:l<0&&(u[0]=Math.abs(l)+o),c<0?u[1]=c-o:h<0&&(u[1]=Math.abs(h)+o),u[0]!==0||u[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const g=[f[0]+u[0],f[1]+u[1]],p=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(g),duration:p.duration,easing:p.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(Ct.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=`${e[0]+n[0]}px`,a=`${e[1]+n[1]}px`;let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const h=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}class Qy extends Yl{static get properties(){return{feature:{attribute:!1,property:!0,type:Object},propertyTransform:{attribute:!1,property:!0,type:Function}}}constructor(){super(),this.feature=null,this.propertyTransform=(e,t)=>e}render(){return this.feature?Qn` <style>
            ul {
              margin: 0;
              padding: 1rem 1rem 1rem 2rem;
              border-radius: 0.5rem;
              max-width: 250px;
              font-size: small;
              background-color: var(--inverse-surface);
              color: var(--inverse-on-surface);
              box-shadow: 0 0.25rem 0.5rem 0 rgb(0 0 0 / 0.4);
              line-height: normal;
              white-space: normal;
            }
            span {
              font-weight: bold;
            }
          </style>
          <ul>
            ${Object.entries(this.feature.getProperties()).map(([e,t])=>this.propertyTransform({key:e,value:t},this.feature)).filter(e=>e).map(({key:e,value:t})=>Qn`<li><span>${e}</span>: ${t}</li>`)}
          </ul>`:Vm}}customElements.define("eox-map-tooltip",Qy);class e8 extends $o{constructor(e){super(),e=e||{},this.dataProjection=new lr({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:_t,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,n){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,c=0,h=0,u=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),c+=e.readSVarint(),o===1&&h>u&&(n.push(h),u=h),i.push(l,c),h+=2;else if(o===7)h>u&&(i.push(i[u],i[u+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>u&&(n.push(h),u=h)}createFeature_(e,t,i){const n=t.type;if(n===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],c=[];this.readRawGeometry_(e,t,l,c);const h=s8(n,c.length);if(this.featureClass===_t)s=new this.featureClass(h,l,c,2,o,a),s.transform(i.dataProjection);else{let u;if(h=="Polygon"){const g=bc(l,c);u=g.length>1?new Xt(l,"XY",g):new Ve(l,"XY",c)}else u=h==="Point"?new Oe(l,"XY"):h==="LineString"?new ze(l,"XY"):h==="MultiPoint"?new mi(l,"XY"):h==="MultiLineString"?new wt(l,"XY",c):null;const d=this.featureClass;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=je(u,!1,i);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const n=V(t.dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;const s=new ap(e),o=s.readFields(t8,{}),a=[];for(const l in o){if(i&&!i.includes(l))continue;const c=o[l],h=c?[0,0,c.extent,c.extent]:null;n.setExtent(h);for(let u=0,d=c.length;u<d;++u){const f=r8(s,c,u),g=this.createFeature_(s,f,t);g!==null&&a.push(g)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function t8(r,e,t){if(r===3){const i={keys:[],values:[],features:[]},n=t.readVarint()+t.pos;t.readFields(i8,i,n),i.length=i.features.length,i.length&&(e[i.name]=i)}}function i8(r,e,t){if(r===15)e.version=t.readVarint();else if(r===1)e.name=t.readString();else if(r===5)e.extent=t.readVarint();else if(r===2)e.features.push(t.pos);else if(r===3)e.keys.push(t.readString());else if(r===4){let i=null;const n=t.readVarint()+t.pos;for(;t.pos<n;)r=t.readVarint()>>3,i=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null;e.values.push(i)}}function n8(r,e,t){if(r==1)e.id=t.readVarint();else if(r==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const n=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[n]=s}}else r==3?e.type=t.readVarint():r==4&&(e.geometry=t.pos)}function r8(r,e,t){r.pos=e.features[t];const i=r.readVarint()+r.pos,n={layer:e,type:0,properties:{}};return r.readFields(n8,n,i),n}function s8(r,e){let t;return r===1?t=e===1?"Point":"MultiPoint":r===2?t=e===1?"LineString":"MultiLineString":r===3&&(t="Polygon"),t}class dg extends zc{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,n=e.viewState,s=n.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=ot(l,zt(t.extent,n.projection))),!a[Te.ANIMATING]&&!a[Te.INTERACTING]&&!rn(l))if(o){const c=n.projection,h=o.getImage(l,s,i,c);h&&(this.loadImage(h)?this.image=h:h.getState()===Y.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Ae(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Kt(s,n))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=ae(o),c=Math.floor(a.width*((n[0]-o[0])/l));if(c<0||c>=a.width)return null;const h=Ie(o),u=Math.floor(a.height*((o[3]-n[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(e,t){const i=this.image,n=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,u=e.viewState,d=u.center,f=u.resolution,g=h*o/(f*l),p=h*a/(f*l);this.prepareContainer(e,t);const m=this.context.canvas.width,_=this.context.canvas.height,y=this.getRenderContext(e);let x=!1,C=!0;if(c.extent){const T=zt(c.extent,u.projection);C=Ne(T,e.extent),x=C&&!Et(T,e.extent),x&&this.clipUnrotated(y,e,T)}const b=i.getImage(),v=Jt(this.tempTransform,m/2,_/2,g,p,0,l*(n[0]-d[0])/o,l*(d[1]-n[3])/a);this.renderedResolution=a*h/l;const w=b.width*v[0],L=b.height*v[3];if(this.getLayer().getSource().getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,e),C&&w>=.5&&L>=.5){const T=v[4],R=v[5],M=c.opacity;M!==1&&(y.save(),y.globalAlpha=M),y.drawImage(b,0,0,+b.width,+b.height,T,R,w,L),M!==1&&y.restore()}return this.postRender(this.context,e),x&&y.restore(),y.imageSmoothingEnabled=!0,this.container}}class o8 extends kn{constructor(e){e=e||{},super(e)}}class fg extends o8{constructor(e){super(e)}createRenderer(){return new dg(this)}getData(e){return super.getData(e)}}class Ns extends Go{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(H.CHANGE)}release(){this.setState(D.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==D.EMPTY){if(this.state!==D.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){ie()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const n=t-i+1e3/60;return n>=this.transition_?1:f1(n/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Rs(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function Ol(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const a8=new Error("disposed");let Dr=null;function l8(r){Dr||(Dr=Me(r.width,r.height,void 0,{willReadFrequently:!0}));const e=Dr.canvas,t=r.width;e.width!==t&&(e.width=t);const i=r.height;return e.height!==i&&(e.height=i),Dr.clearRect(0,0,t,i),Dr.drawImage(r,0,0),Dr.getImageData(0,0,t,i).data}const c8=[256,256];class Lo extends Ns{constructor(e){const t=D.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Rs(this.data_);return e?[e.width,e.height]:c8}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==D.IDLE&&this.state!==D.ERROR)return;this.state=D.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=D.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=D.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(a8),this.controller_=null),super.disposeInternal()}}class Jo extends Ns{constructor(e,t,i,n,s,o){super(e,t,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_,Gt?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,n!==null&&(this.image_.crossOrigin=n)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=D.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=D.ERROR,this.unlistenImage_(),this.image_=h8(),this.changed()}handleImageLoad_(){if(Gt)this.state=D.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=D.LOADED:this.state=D.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==D.ERROR&&(this.state=D.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==D.IDLE&&(this.state=D.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=n9(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function h8(){const r=Me(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class q2{constructor(e,t,i,n){this.minX=e,this.maxX=t,this.minY=i,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Gr(r,e,t,i,n){return n!==void 0?(n.minX=r,n.maxX=e,n.minY=t,n.maxY=i,n):new q2(r,e,t,i)}let H0;const cs=[];function ju(r,e,t,i,n){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(i,n),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,i)+1,Math.max(t,n)),r.restore()}function K0(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function u8(){if(H0===void 0){const r=Me(6,6,cs);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",ju(r,4,5,4,0),ju(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;H0=K0(e,0)||K0(e,4)||K0(e,8),Vo(r),cs.push(r.canvas)}return H0}function Po(r,e,t,i){const n=an(t,e,r);let s=bs(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=r.getMetersPerUnit();a!==void 0&&(s/=a);const l=r.getExtent();if(!l||Kt(l,n)){const c=bs(r,s,n)/s;isFinite(c)&&c>0&&(s/=c)}return s}function gg(r,e,t,i){const n=yt(t);let s=Po(r,e,n,i);return(!isFinite(s)||s<=0)&&ql(t,function(o){return s=Po(r,e,o,i),isFinite(s)&&s>0}),s}function mg(r,e,t,i,n,s,o,a,l,c,h,u,d,f){const g=Me(Math.round(t*r),Math.round(t*e),cs);if(u||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(t,t);function p(b){return Math.round(b*t)/t}g.globalCompositeOperation="lighter";const m=mt();l.forEach(function(b,v,w){ps(m,b.extent)});let _;const y=t/i,x=(u?1:1+Math.pow(2,-24))/y;if(!d||l.length!==1||c!==0){if(_=Me(Math.round(ae(m)*y),Math.round(Ie(m)*y),cs),u||(_.imageSmoothingEnabled=!1),n&&f){const b=(n[0]-m[0])*y,v=-(n[3]-m[3])*y,w=ae(n)*y,L=Ie(n)*y;_.rect(b,v,w,L),_.clip()}l.forEach(function(b,v,w){if(b.image.width>0&&b.image.height>0){if(b.clipExtent){_.save();const I=(b.clipExtent[0]-m[0])*y,F=-(b.clipExtent[3]-m[3])*y,A=ae(b.clipExtent)*y,O=Ie(b.clipExtent)*y;_.rect(u?I:Math.round(I),u?F:Math.round(F),u?A:Math.round(I+A)-Math.round(I),u?O:Math.round(F+O)-Math.round(F)),_.clip()}const L=(b.extent[0]-m[0])*y,T=-(b.extent[3]-m[3])*y,R=ae(b.extent)*y,M=Ie(b.extent)*y;_.drawImage(b.image,c,c,b.image.width-2*c,b.image.height-2*c,u?L:Math.round(L),u?T:Math.round(T),u?R:Math.round(L+R)-Math.round(L),u?M:Math.round(T+M)-Math.round(T)),b.clipExtent&&_.restore()}})}const C=fi(o);return a.getTriangles().forEach(function(b,v,w){const L=b.source,T=b.target;let R=L[0][0],M=L[0][1],I=L[1][0],F=L[1][1],A=L[2][0],O=L[2][1];const j=p((T[0][0]-C[0])/s),N=p(-(T[0][1]-C[1])/s),B=p((T[1][0]-C[0])/s),Z=p(-(T[1][1]-C[1])/s),K=p((T[2][0]-C[0])/s),ee=p(-(T[2][1]-C[1])/s),z=R,ue=M;R=0,M=0,I-=z,F-=ue,A-=z,O-=ue;const be=[[I,F,0,0,B-j],[A,O,0,0,K-j],[0,0,I,F,Z-N],[0,0,A,O,ee-N]],ye=ep(be);if(!ye)return;if(g.save(),g.beginPath(),u8()||!u){g.moveTo(B,Z);const Ze=4,Qt=j-B,Zt=N-Z;for(let Tt=0;Tt<Ze;Tt++)g.lineTo(B+p((Tt+1)*Qt/Ze),Z+p(Tt*Zt/(Ze-1))),Tt!=Ze-1&&g.lineTo(B+p((Tt+1)*Qt/Ze),Z+p((Tt+1)*Zt/(Ze-1)));g.lineTo(K,ee)}else g.moveTo(B,Z),g.lineTo(j,N),g.lineTo(K,ee);g.clip(),g.transform(ye[0],ye[2],ye[1],ye[3],j,N),g.translate(m[0]-z,m[3]-ue);let We;if(_)We=_.canvas,g.scale(x,-x);else{const Ze=l[0],Qt=Ze.extent;We=Ze.image,g.scale(ae(Qt)/We.width,-Ie(Qt)/We.height)}g.drawImage(We,0,0),g.restore()}),_&&(Vo(_),cs.push(_.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(b,v,w){const L=b.target,T=(L[0][0]-C[0])/s,R=-(L[0][1]-C[1])/s,M=(L[1][0]-C[0])/s,I=-(L[1][1]-C[1])/s,F=(L[2][0]-C[0])/s,A=-(L[2][1]-C[1])/s;g.beginPath(),g.moveTo(M,I),g.lineTo(T,R),g.lineTo(F,A),g.closePath(),g.stroke()}),g.restore()),g.canvas}const d8=10,Xu=.25;class Hc{constructor(e,t,i,n,s,o,a){this.sourceProj_=e,this.targetProj_=t;let l={};const c=a?$a(x=>Ae(a,an(x,this.targetProj_,this.sourceProj_))):xi(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const C=x[0]+"/"+x[1];return l[C]||(l[C]=c(x)),l[C]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&ae(n)>=ae(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ae(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ae(this.targetProj_.getExtent()):null;const h=fi(i),u=L2(i),d=P2(i),f=yo(i),g=this.transformInv_(h),p=this.transformInv_(u),m=this.transformInv_(d),_=this.transformInv_(f),y=d8+(o?Math.max(0,Math.ceil(Math.log2(_s(i)/(o*o*256*256)))):0);if(this.addQuad_(h,u,d,f,g,p,m,_,y),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(C,b,v){x=Math.min(x,C.source[0][0],C.source[1][0],C.source[2][0])}),this.triangles_.forEach(C=>{if(Math.max(C.source[0][0],C.source[1][0],C.source[2][0])-x>this.sourceWorldWidth_/2){const b=[[C.source[0][0],C.source[0][1]],[C.source[1][0],C.source[1][1]],[C.source[2][0],C.source[2][1]]];b[0][0]-x>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-x>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-x>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);const v=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-v<this.sourceWorldWidth_/2&&(C.source=b)}})}l={}}addTriangle_(e,t,i,n,s,o){this.triangles_.push({source:[n,s,o],target:[e,t,i]})}addQuad_(e,t,i,n,s,o,a,l,c){const h=it([s,o,a,l]),u=this.sourceWorldWidth_?ae(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=it([e,t,i,n]);g=ae(m)/this.targetWorldWidth_>Xu||g}!f&&this.sourceProj_.isGlobal()&&u&&(g=u>Xu||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ne(h,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(p=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(c>0){if(!g){const m=[(e[0]+i[0])/2,(e[1]+i[1])/2],_=this.transformInv_(m);let y;f?y=(yi(s[0],d)+yi(a[0],d))/2-yi(_[0],d):y=(s[0]+a[0])/2-_[0];const x=(s[1]+a[1])/2-_[1];g=y*y+x*x>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const m=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(m),y=[(n[0]+e[0])/2,(n[1]+e[1])/2],x=this.transformInv_(y);this.addQuad_(e,t,m,y,s,o,_,x,c-1),this.addQuad_(y,m,i,n,x,_,a,l,c-1)}else{const m=[(e[0]+t[0])/2,(e[1]+t[1])/2],_=this.transformInv_(m),y=[(i[0]+n[0])/2,(i[1]+n[1])/2],x=this.transformInv_(y);this.addQuad_(e,m,y,n,s,_,x,l,c-1),this.addQuad_(m,t,i,y,_,o,a,x,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(e,i,n,s,a,l),p&14||this.addTriangle_(e,i,t,s,a,o),p&&(p&13||this.addTriangle_(t,n,e,o,l,s),p&7||this.addTriangle_(t,n,i,o,l,a))}calculateSourceExtent(){const e=mt();return this.triangles_.forEach(function(t,i,n){const s=t.source;Ma(e,s[0]),Ma(e,s[1]),Ma(e,s[2])}),e}getTriangles(){return this.triangles_}}const Kc=.5;class qc extends Ns{constructor(e,t,i,n,s,o,a,l,c,h,u,d){super(s,D.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=n.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=g?ot(f,g):f;if(_s(m)===0){this.state=D.EMPTY;return}const _=e.getExtent();_&&(p?p=ot(p,_):p=_);const y=n.getResolution(this.wrappedTileCoord_[0]),x=gg(e,i,m,y);if(!isFinite(x)||x<=0){this.state=D.EMPTY;return}const C=h!==void 0?h:Kc;if(this.triangulation_=new Hc(e,i,m,p,x*C,y),this.triangulation_.getTriangles().length===0){this.state=D.EMPTY;return}this.sourceZ_=t.getZForResolution(x);let b=this.triangulation_.calculateSourceExtent();if(p&&(e.canWrapX()?(b[1]=se(b[1],p[1],p[3]),b[3]=se(b[3],p[1],p[3])):b=ot(b,p)),!_s(b))this.state=D.EMPTY;else{let v=0,w=0;e.canWrapX()&&(v=ae(_),w=Math.floor((b[0]-_[0])/v)),ec(b.slice(),e,!0).forEach(T=>{const R=t.getTileRangeForExtentAndZ(T,this.sourceZ_);for(let M=R.minX;M<=R.maxX;M++)for(let I=R.minY;I<=R.maxY;I++){const F=c(this.sourceZ_,M,I,a);if(F){const A=w*v;this.sourceTiles_.push({tile:F,offset:A})}}++w}),this.sourceTiles_.length===0&&(this.state=D.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var n;const i=t.tile;if(i&&i.getState()==D.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(n=this.clipExtent_)==null?void 0:n.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=D.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=mg(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=D.LOADED}this.changed()}load(){if(this.state==D.IDLE){this.state=D.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==D.IDLE||i==D.LOADING){e++;const n=ge(t,H.CHANGE,s=>{const o=t.getState();(o==D.LOADED||o==D.ERROR||o==D.EMPTY)&&(ke(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,n){t.getState()==D.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ke),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Vo(this.canvas_.getContext("2d")),cs.push(this.canvas_),this.canvas_=null),super.release()}}class f2{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof zo&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return me(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return me(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){me(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function fr(r,e,t,i){return i!==void 0?(i[0]=r,i[1]=e,i[2]=t,i):[r,e,t]}function Jc(r,e,t){return r+"/"+e+"/"+t}function Yr(r){return Jc(r[0],r[1],r[2])}function go(r,e,t,i,n){return`${W(r)},${e},${Jc(t,i,n)}`}function Qc(r){return pg(r[0],r[1],r[2])}function pg(r,e,t){return(e<<r)+t}function f8(r,e){const t=r[0],i=r[1],n=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,n):!0}function q0(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const i=r[t],n=i.has(e);return n||i.add(e),!n}function g8(r,e,t){const i=r[t];return i?i.delete(e):!1}function Vu(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=ot(e,zt(t.extent,r.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(r.viewState.projection).getExtent();n&&(e=ot(e,n))}return e}class _g extends zc{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=mt(),this.tempTileRange_=new q2(0,0,0,0),this.tempTileCoord_=fr(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new f2(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new f2(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,n){const s=this.tileCache_,a=this.getLayer().getSource(),l=go(a,a.getKey(),e,t,i);let c;if(s.containsKey(l))c=s.get(l);else{const h=n.viewState.projection,u=a.getProjection();if(c=a.getTile(e,t,i,n.pixelRatio,h,!u||He(u,h)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);return s||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Ae(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Kt(s,n))return null;const o=t.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let h=l.getZForResolution(o.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(n,h),d=this.getTile(h,u[1],u[2],t);if(!d||d.getState()!==D.LOADED)continue;const f=l.getOrigin(h),g=De(l.getTileSize(h)),p=l.getResolution(h);let m;if(d instanceof Jo||d instanceof qc)m=d.getImage();else if(d instanceof Lo){if(m=Rs(d.getData()),!m)continue}else continue;const _=Math.floor(c*((n[0]-f[0])/p-u[1]*g[0])),y=Math.floor(c*((f[1]-n[1])/p-u[2]*g[1])),x=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(m,_+x,y+x)}return null}prepareFrame(e){var n;this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),(n=this.sourceTileCache_)==null||n.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,n,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=W(l);h in e.wantedTiles||(e.wantedTiles[h]={});const u=e.wantedTiles[h],d=a.getMapInternal(),f=Math.max(i-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),g=o.rotation,p=g?r1(o.center,o.resolution,g,e.size):void 0;for(let m=i;m>=f;--m){const _=c.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),y=c.getResolution(m);for(let x=_.minX;x<=_.maxX;++x)for(let C=_.minY;C<=_.maxY;++C){if(g&&!c.tileCoordIntersectsViewport([m,x,C],p))continue;const b=this.getTile(m,x,C,e);if(!b||!q0(n,b,m))continue;const w=b.getKey();if(u[w]=!0,b.getState()===D.IDLE&&!e.tileQueue.isKeyQueued(w)){const L=fr(m,x,C,this.tempTileCoord_);e.tileQueue.enqueue([b,h,c.getTileCoordCenter(L),y])}}}}findStaleTile_(e,t){const i=this.tileCache_,n=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=go(this.getLayer().getSource(),a[l],n,s,o);if(i.containsKey(c)){const h=i.peek(c);if(h.getState()===D.LOADED)return h.endTransition(W(this)),q0(t,h,n),!0}}return!1}findAltTiles_(e,t,i,n){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let u=s.minY;u<=s.maxY;++u){const d=go(l,c,i,h,u);let f=!1;if(a.containsKey(d)){const g=a.peek(d);g.getState()===D.LOADED&&(q0(n,g,i),f=!0)}f||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],n=e.viewState,s=n.projection,o=n.resolution,a=n.center,l=e.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getTileGridForProjection(s),d=u.getZForResolution(o,h.zDirection),f=u.getResolution(d),g=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let p=e.extent;const m=h.getTilePixelRatio(l);this.prepareContainer(e,t);const _=this.context.canvas.width,y=this.context.canvas.height,x=i.extent&&zt(i.extent);x&&(p=ot(p,zt(i.extent)));const C=f*_/2/m,b=f*y/2/m,v=[a[0]-C,a[1]-b,a[0]+C,a[1]+b],w={};this.renderedTiles.length=0;const L=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const B=u.getZForResolution(n.nextResolution,h.zDirection),Z=Vu(e,e.nextExtent);this.enqueueTiles(e,Z,B,w,L)}const T=Vu(e,p);if(this.enqueueTiles(e,T,d,w,0),L>0&&setTimeout(()=>{this.enqueueTiles(e,T,d-1,w,L-1)},0),!(d in w))return this.container;const R=W(this),M=e.time;for(const B of w[d]){const Z=B.getState();if(Z===D.EMPTY)continue;const K=B.tileCoord;if(Z===D.LOADED&&B.getAlpha(R,M)===1){B.endTransition(R);continue}if(Z!==D.ERROR&&(this.renderComplete=!1),this.findStaleTile_(K,w)){g8(w,B,d),e.animate=!0;continue}if(this.findAltTiles_(u,K,d+1,w))continue;const ue=u.getMinZoom();for(let be=d-1;be>=ue&&!this.findAltTiles_(u,K,be,w);--be);}const I=f/o*l/m,F=this.getRenderContext(e);Jt(this.tempTransform,_/2,y/2,I,I,0,-_/2,-y/2),i.extent&&this.clipUnrotated(F,e,x),h.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e);const A=Object.keys(w).map(Number);A.sort(wn);let O;const j=[],N=[];for(let B=A.length-1;B>=0;--B){const Z=A[B],K=h.getTilePixelSize(Z,l,s),z=u.getResolution(Z)/f,ue=K[0]*z*I,be=K[1]*z*I,ye=u.getTileCoordForCoordAndZ(fi(v),Z),We=u.getTileCoordExtent(ye),Ze=Ae(this.tempTransform,[m*(We[0]-v[0])/f,m*(v[3]-We[3])/f]),Qt=m*h.getGutterForProjection(s);for(const Zt of w[Z]){if(Zt.getState()!==D.LOADED)continue;const Tt=Zt.tileCoord,Tr=ye[1]-Tt[1],Bs=Math.round(Ze[0]-(Tr-1)*ue),zn=ye[2]-Tt[2],zi=Math.round(Ze[1]-(zn-1)*be),Mt=Math.round(Ze[0]-Tr*ue),ei=Math.round(Ze[1]-zn*be),Sr=Bs-Mt,Rr=zi-ei,js=A.length===1;let Un=!1;O=[Mt,ei,Mt+Sr,ei,Mt+Sr,ei+Rr,Mt,ei+Rr];for(let Lr=0,Pr=j.length;Lr<Pr;++Lr)if(!js&&Z<N[Lr]){const dt=j[Lr];Ne([Mt,ei,Mt+Sr,ei+Rr],[dt[0],dt[3],dt[4],dt[7]])&&(Un||(F.save(),Un=!0),F.beginPath(),F.moveTo(O[0],O[1]),F.lineTo(O[2],O[3]),F.lineTo(O[4],O[5]),F.lineTo(O[6],O[7]),F.moveTo(dt[6],dt[7]),F.lineTo(dt[4],dt[5]),F.lineTo(dt[2],dt[3]),F.lineTo(dt[0],dt[1]),F.clip())}j.push(O),N.push(Z),this.drawTile(Zt,e,Mt,ei,Sr,Rr,Qt,js),Un&&F.restore(),this.renderedTiles.unshift(Zt),this.updateUsedTiles(e.usedTiles,h,Zt)}}if(this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!qt(this.renderedExtent_,v),this.renderedExtent_=v,this.renderedPixelRatio=l,this.postRender(this.context,e),i.extent&&F.restore(),F.imageSmoothingEnabled=!0,this.renderComplete){const B=(Z,K)=>{var be;const ee=W(h),z=K.wantedTiles[ee],ue=z?Object.keys(z).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache(),(be=this.sourceTileCache_)==null||be.expireCache()};e.postRenderFunctions.push(B)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,n,s,o,a,l){let c;if(e instanceof Lo){if(c=Rs(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const h=this.getRenderContext(t),u=W(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(u,t.time):1),g=f!==h.globalAlpha;g&&(h.save(),h.globalAlpha=f),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,n,s,o),g&&h.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const n=W(t);n in e||(e[n]={}),e[n][i.getKey()]=!0}}const vn={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class yg extends kn{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(vn.PRELOAD)}setPreload(e){this.set(vn.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(vn.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(vn.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class xg extends yg{constructor(e){super(e)}createRenderer(){return new _g(this,{cacheSize:this.getCacheSize()})}}const m8={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Wu={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class p8 extends _g{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Fe(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,i,n,s,o,a,l){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,n,s,o,a,l)}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);if(!s)return null;const o=n.viewState,a=o.resolution,l=n.viewHints,c=this.getLayer().getSource(),h=c.getTileGridForProjection(o.projection),u=!(l[Te.ANIMATING]||l[Te.INTERACTING]),d=h.getZForResolution(a,c.zDirection)===e;return u&&d?s.wantedResolution=a:s.wantedResolution||(s.wantedResolution=h.getResolution(e)),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const n=this.getLayer(),s=n.getRevision(),o=n.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(n);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const c=n.getSource(),h=!!n.getDeclutter(),u=c.getTileGrid(),f=c.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),g=c.getSourceTiles(t,i,e),p=W(n);delete e.hitDetectionImageData[p],e.executorGroups[p]=[],l.dirty=!1;for(let m=0,_=g.length;m<_;++m){const y=g[m];if(y.getState()!=D.LOADED)continue;const x=c.getProjection(),C=y.tileCoord;let b=u.getTileCoordExtent(C);i&&x&&!He(i,x)&&(b=Tn(b,x,i,32));const v=ot(f,b),w=It(v,n.getRenderBuffer()*a,this.tempExtent),L=qt(b,v)?null:w,T=new gf(0,v,a,t),R=a2(a,t),M=function(j,N){let B;const Z=j.getStyleFunction()||n.getStyleFunction();if(Z&&(B=Z(j,a)),B){const K=this.renderFeature(j,R,B,T,h,N);l.dirty=l.dirty||K}},I=y.getFeatures();o&&o!==l.renderedRenderOrder&&I.sort(o);for(let j=0,N=I.length;j<N;++j){let B=I[j];i&&y.projection&&!He(i,y.projection)&&(B=B.clone(),B.getGeometry().applyTransform(xi(y.projection,i))),(!L||Ne(L,B.getGeometry().getExtent()))&&M.call(this,B,j)}const F=T.finish(),A=n.getRenderMode()!=="vector"&&h&&g.length===1?null:v,O=new mf(A,a,t,c.getOverlaps(),F,n.getRenderBuffer(),!0);e.executorGroups[p].push(O)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,n,s){var x,C;const o=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(t.viewState.projection),u=it([e]);It(u,o*i,u);const d={},f=function(b,v,w){let L=b.getId();L===void 0&&(L=W(b));const T=d[L];if(T){if(T!==!0&&w<T.distanceSq){if(w===0)return d[L]=!0,s.splice(s.lastIndexOf(T),1),n(b,l,v);T.geometry=v,T.distanceSq=w}}else{if(w===0)return d[L]=!0,n(b,l,v);s.push(d[L]={feature:b,layer:l,geometry:v,distanceSq:w,callback:n})}},g=this.renderedTiles,p=W(l),m=l.getDeclutter(),_=m?(C=(x=t.declutter)==null?void 0:x[m])==null?void 0:C.all().map(b=>b.value):null;let y;e:for(let b=0,v=g.length;b<v;++b){const w=g[b],L=h.getTileCoordExtent(w.wrappedTileCoord);if(!Ne(L,u))continue;const T=w.executorGroups[p];for(let R=0,M=T.length;R<M;++R)if(y=T[R].forEachFeatureAtCoordinate(e,o,a,i,f,_),y)break e}return y}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const n=this.getLayer(),s=n.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,c=s.getTileGridForProjection(o),h=Ae(this.renderedPixelToCoordinateTransform_,e.slice()),u=c.getTileCoordForCoordAndResolution(h,l).toString(),d=this.renderedTiles.find(x=>x.tileCoord.toString()===u&&x.getState()===D.LOADED);if(!d||d.loadingSourceTiles>0){t([]);return}s.getWrapX()&&o.canWrapX()&&!Et(a,c.getTileCoordExtent(d.tileCoord))&&A2(h,o);const f=W(n),g=c.getTileCoordExtent(d.wrappedTileCoord),p=fi(g),m=[(h[0]-p[0])/l,(p[1]-h[1])/l],_=d.getSourceTiles().reduce((x,C)=>x.concat(C.getFeatures()),[]);let y=d.hitDetectionImageData[f];if(!y){const x=De(c.getTileSize(c.getZForResolution(l,s.zDirection))),C=this.renderedRotation_,b=[this.getRenderTransform(c.getTileCoordCenter(d.wrappedTileCoord),l,0,Ht,x[0]*Ht,x[1]*Ht,0)];y=_f(x,b,_,n.getStyleFunction(),c.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(n).renderedResolution,C),d.hitDetectionImageData[f]=y}t(yf(m,_,y))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=s.getZForResolution(this.renderedResolution),a={};return i.forEach(l=>{if(l.tileCoord[0]!==o||l.getState()!==D.LOADED)return;const c=l.getSourceTiles();for(let h=0,u=c.length;h<u;++h){const d=c[h],f=d.getKey();if(f in a)continue;a[f]=!0;const g=d.tileCoord;if(Ne(e,s.getTileCoordExtent(g))){const p=d.getFeatures();if(p)for(let m=0,_=p.length;m<_;++m){const y=p[m],x=y.getGeometry();Ne(e,x.getExtent())&&t.push(y)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var d;const i=this.context,n=i.globalAlpha;i.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[Te.ANIMATING]||s[Te.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),c=l?(d=e.declutter)==null?void 0:d[l]:void 0,h=W(this.getLayer()),u=this.renderedTiles;for(let f=0,g=u.length;f<g;++f){const p=u[f],m=p.executorGroups[h];if(m)for(let _=m.length-1;_>=0;--_)m[_].execute(this.context,a,this.getTileRenderTransform(p,e),e.viewState.rotation,o,o2,c)}i.globalAlpha=n}renderDeferredInternal(e){const t=this.renderedTiles,i=W(this.getLayer()),n=t.reduce((l,c,h)=>(c.executorGroups[i].forEach(u=>l.push({executorGroup:u,index:h})),l),[]),s=n.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),o={};for(let l=0,c=n.length;l<c;++l){const h=n[l].executorGroup.getDeferredZIndexContexts();for(const u in h)o[u]=!0}Object.keys(o).map(Number).sort(wn).forEach(l=>{s.forEach((c,h)=>{c[l]&&(c[l].forEach(u=>{const{executorGroup:d,index:f}=n[h],g=d.getRenderedContext(),p=g.globalAlpha;g.globalAlpha=this.renderedOpacity_;const m=this.tileClipContexts_[f];m&&m.draw(g),u.draw(g),m&&g.restore(),g.globalAlpha=p,u.clear()}),c[l].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,n=t.viewState,s=n.center,o=n.resolution,a=n.rotation,l=t.size,c=Math.round(l[0]*i),h=Math.round(l[1]*i),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,g=d.getTileCoordExtent(e.wrappedTileCoord),p=d.getTileCoordExtent(f,this.tempExtent)[0]-g[0];return en(so(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,o,a,i,c,h,p))}postRender(e,t){var b;const i=t.viewHints,n=!(i[Te.ANIMATING]||i[Te.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),c=l?Wu[o].filter(v=>!o2.includes(v)):Wu[o],h=t.viewState,u=h.rotation,d=s.getSource(),g=d.getTileGridForProjection(h.projection).getZForResolution(h.resolution,d.zDirection),p=this.renderedTiles,m=[],_=[],y=[],x=W(s);let C=!0;for(let v=p.length-1;v>=0;--v){const w=p[v];C=C&&!w.getReplayState(s).dirty;const L=w.executorGroups[x].filter(O=>O.hasExecutors(c));if(L.length===0)continue;const T=this.getTileRenderTransform(w,t),R=w.tileCoord[0];let M=!1;const I=L[0].getClipCoords(T);let F=e,A;if(I){A=new Gc,F=A.getContext();for(let O=0,j=m.length;O<j;++O)if(g!==R&&R<_[O]){const N=m[O];Ne([I[0],I[3],I[4],I[7]],[N[0],N[3],N[4],N[7]])&&(M||(F.save(),M=!0),F.beginPath(),F.moveTo(I[0],I[1]),F.lineTo(I[2],I[3]),F.lineTo(I[4],I[5]),F.lineTo(I[6],I[7]),F.moveTo(N[6],N[7]),F.lineTo(N[4],N[5]),F.lineTo(N[2],N[3]),F.lineTo(N[0],N[1]),F.clip())}m.push(I),_.push(R)}for(let O=0,j=L.length;O<j;++O)L[O].execute(e,[e.canvas.width,e.canvas.height],T,u,n,c,(b=t.declutter)==null?void 0:b[l]);M&&(F===e?F.restore():y[v]=A)}e.globalAlpha=a,this.ready=C,this.tileClipContexts_=y,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,n,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=l2(n,e,i[l],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=l2(n,e,i,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),n=t.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==n}renderTileImage_(e,t){const i=this.getLayer(),n=e.getReplayState(i),s=i.getRevision(),o=e.executorGroups[W(i)];n.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],c=i.getSource();let h=t.pixelRatio;const d=t.viewState.projection,f=c.getTileGridForProjection(d),g=f.getResolution(e.tileCoord[0]),p=t.pixelRatio/e.wantedResolution*g,m=f.getResolution(l),_=e.getContext();h=Math.round(Math.max(h,p/h));const y=c.getTilePixelSize(l,h,d);_.canvas.width=y[0],_.canvas.height=y[1];const x=h/p;if(x!==1){const w=ml(this.tmpTransform_);so(w,x,x),_.setTransform.apply(_,w)}const C=f.getTileCoordExtent(a,this.tempExtent),b=p/m,v=ml(this.tmpTransform_);so(v,b,-b),N2(v,-C[0],-C[3]);for(let w=0,L=o.length;w<L;++w)o[w].execute(_,[_.canvas.width*x,_.canvas.height*x],v,0,!0,m8[i.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}class Da extends vr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const n=e.renderMode||"hybrid";me(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new p8(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(vn.PRELOAD)}getUseInterimTilesOnError(){return this.get(vn.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(vn.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(vn.USE_INTERIM_TILES_ON_ERROR,e)}}function g2(r){return Array.isArray(r)?Math.min(...r):r}class _8 extends U2{constructor(e,t,i,n,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const h=c?ot(i,c):i,u=yt(h),d=Po(e,t,u,n),f=Kc,g=new Hc(e,t,h,l,d*f,n),p=g.calculateSourceExtent(),m=rn(p)?null:o(p,d,s),_=m?Y.IDLE:Y.EMPTY,y=m?m.getPixelRatio():1;super(i,n,y,_),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=g,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=m,this.sourcePixelRatio_=y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Y.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Y.LOADED){const t=ae(this.targetExtent_)/this.targetResolution_,i=Ie(this.targetExtent_)/this.targetResolution_;this.canvas_=mg(t,i,this.sourcePixelRatio_,g2(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Y.IDLE){this.state=Y.LOADING,this.changed();const e=this.sourceImage_.getState();e==Y.LOADED||e==Y.ERROR?this.reproject_():(this.sourceListenerKey_=ge(this.sourceImage_,H.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Y.LOADED||i==Y.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ke(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Ai=4,J0={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class y8 extends Ni{constructor(e,t){super(e),this.image=t}}class Nn extends ks{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=R2(t,e,0);e=t[i]}return e}getImage(e,t,i,n){const s=this.getProjection();if(!s||!n||He(s,n))return s&&(n=s),this.getImageInternal(e,t,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&He(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&qt(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new _8(s,n,e,t,i,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,n){if(this.loader){const s=Q2(e,t,i,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Et(this.wantedExtent_,s)||Et(this.image.getExtent(),s))&&(this.wantedResolution_&&g2(this.wantedResolution_)===o||g2(this.image.getResolution())===o)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new U2(s,o,i,this.loader),this.image.addEventListener(H.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Y.LOADING:this.loading=!0,i=J0.IMAGELOADSTART;break;case Y.LOADED:this.loading=!1,i=J0.IMAGELOADEND;break;case Y.ERROR:this.loading=!1,i=J0.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new y8(i,t))}}function J2(r,e){r.getImage().src=e}function Q2(r,e,t,i){const n=e/t,s=yt(r),o=_n(ae(r)/n,Ai),a=_n(Ie(r)/n,Ai),l=_n((i-1)*o/2,Ai),c=o+2*l,h=_n((i-1)*a/2,Ai),u=a+2*h;return po(s,n,0,[c,u])}function tn(r,e){const t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});const i=t.join("&");return r=r.replace(/[?&]$/,""),r+=r.includes("?")?"&":"?",r+i}const x8=/\{z\}/g,C8=/\{x\}/g,b8=/\{y\}/g,v8=/\{-y\}/g;function eh(r,e,t,i,n){return r.replace(x8,e.toString()).replace(C8,t.toString()).replace(b8,i.toString()).replace(v8,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-i).toString()})}function E8(r,e,t,i){const n=pg(e,t,i),s=yi(n,r.length);return r[s]}function e0(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const i=t[1].charCodeAt(0),n=t[2].charCodeAt(0);let s;for(s=i;s<=n;++s)e.push(r.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const i=parseInt(t[2],10);for(let n=parseInt(t[1],10);n<=i;n++)e.push(r.replace(t[0],n.toString()));return e}return e.push(r),e}const m2="1.3.0",Zu=[101,101];function Cg(r,e,t,i,n){n.WIDTH=t[0],n.HEIGHT=t[1];const s=i.getAxisOrientation(),o=I2(n.VERSION,"1.3")>=0;n[o?"CRS":"SRS"]=i.getCode();const a=o&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return n.BBOX=a.join(","),tn(r,n)}function bg(r,e,t,i,n,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[Xa(ae(r)/a,Ai),Xa(Ie(r)/a,Ai)];if(t!=1)switch(o){case"geoserver":const h=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return Cg(n,r,l,i,s)}function p2(r,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:m2,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},r)}function w8(r){const e=r.hidpi===void 0?!0:r.hidpi,t=V(r.projection||"EPSG:3857"),i=r.ratio||1.5,n=r.load||On,s=r.crossOrigin??null;return(o,a,l)=>{o=Q2(o,a,l,i),l!=1&&(!e||r.serverType===void 0)&&(l=1);const c=bg(o,a,l,t,r.url,p2(r.params,"GetMap"),r.serverType),h=new Image;return h.crossOrigin=s,n(h,c).then(u=>({image:u,extent:o,pixelRatio:l}))}}function T8(r,e,t){if(r.url===void 0)return;const i=V(r.projection||"EPSG:3857"),n=po(e,t,0,Zu),s={QUERY_LAYERS:r.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,p2(r.params,"GetFeatureInfo"),r.params);const o=Kr((e[0]-n[0])/t,Ai),a=Kr((n[3]-e[1])/t,Ai),l=I2(s.VERSION,"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,Cg(r.url,n,Zu,i,s)}function S8(r,e){if(r.url===void 0)return;const t={SERVICE:"WMS",VERSION:m2,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const i=V(r.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;t.SCALE=e*i/n}if(Object.assign(t,r.params),r.params!==void 0&&t.LAYER===void 0){const i=t.LAYERS;if(!(!Array.isArray(i)||i.length!==1))return;t.LAYER=i}return tn(r.url,t)}class vg extends Nn{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:J2,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,i,n){const s=V(i),o=this.getProjection();o&&o!==s&&(t=Po(o,s,e,t),e=an(e,s,o));const a={url:this.url_,params:{...this.params_,...n},projection:o||s};return T8(a,e,t)}getLegendUrl(e,t){return S8({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,i,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=w8({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),On(s))})),super.getImageInternal(e,t,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const zr=[0,0,0],gn=5;class Dn{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,me(tp(this.resolutions_,(n,s)=>s-n),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,me(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=fi(i)),me(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,me(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:vs,me(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,s)=>{const o=new q2(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const n=this.getTileRangeForExtentAndZ(e,t);for(let s=n.minX,o=n.maxX;s<=o;++s)for(let a=n.minY,l=n.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,n){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,n);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Gr(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Gr(s,s+1,o,o+1,t)}const n=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],s=e[1],o=e[2];if(t===n)return Gr(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-n),c=Math.floor(s*l),h=Math.floor(o*l);if(t<n)return Gr(c,c,h,h,i);const u=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return Gr(c,u,h,d,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,zr);const n=zr[1],s=zr[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,zr);const o=zr[1],a=zr[2];return Gr(n,o,s,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),n=De(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*i,t[1]-(e[2]+.5)*n[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=De(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*n,a=i[1]-(e[2]+1)*s[1]*n,l=o+s[0]*n,c=a+s[1]*n;return In(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,n,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=De(this.getTileSize(o),this.tmpSize_);let h=a*(e-l[0])/i/c[0],u=a*(l[1]-t)/i/c[1];return n?(h=_n(h,gn)-1,u=_n(u,gn)-1):(h=Kr(h,gn),u=Kr(u,gn)),fr(o,h,u,s)}getTileCoordForXYAndZ_(e,t,i,n,s){const o=this.getOrigin(i),a=this.getResolution(i),l=De(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],h=(o[1]-t)/a/l[1];return n?(c=_n(c,gn)-1,h=_n(h,gn)-1):(c=Kr(c,gn),h=Kr(h,gn)),fr(i,c,h,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=R2(this.resolutions_,e,t||0);return se(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return F1(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=i}}class Eg extends Dn{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function R8(r,e,t){const i=[],n=[],s=[],o=[],a=[];t=t!==void 0?t:[];const l="SupportedCRS",c="TileMatrix",h="Identifier",u="ScaleDenominator",d="TopLeftCorner",f="TileWidth",g="TileHeight",p=r[l],m=V(p),_=m.getMetersPerUnit(),y=m.getAxisOrientation().startsWith("ne");return r[c].sort(function(x,C){return C[u]-x[u]}),r[c].forEach(function(x){let C;if(t.length>0?C=t.find(function(b){return x[h]==b[c]?!0:x[h].includes(":")?!1:r[h]+":"+x[h]===b[c]}):C=!0,C){n.push(x[h]);const b=x[u]*28e-5/_,v=x[f],w=x[g];y?s.push([x[d][1],x[d][0]]):s.push(x[d]),i.push(b),o.push(v==w?v:[v,w]),a.push([x.MatrixWidth,x.MatrixHeight])}}),new Eg({extent:e,origins:s,resolutions:i,matrixIds:n,tileSizes:o,sizes:a})}function t0(r){let e=r.getDefaultTileGrid();return e||(e=I8(r),r.setDefaultTileGrid(e)),e}function L8(r,e,t){const i=e[0],n=r.getTileCoordCenter(e),s=hn(t);if(!Kt(s,n)){const o=ae(s),a=Math.ceil((s[0]-n[0])/o);return n[0]+=o*a,r.getTileCoordForCoordAndZ(n,i)}return e}function P8(r,e,t,i){i=i!==void 0?i:"top-left";const n=wg(r,e,t);return new Dn({extent:r,origin:ip(r,i),resolutions:n,tileSize:t})}function Gn(r){const e=r||{},t=e.extent||V("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:wg(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Dn(i)}function wg(r,e,t,i){e=e!==void 0?e:O1,t=De(t!==void 0?t:vs);const n=Ie(r),s=ae(r);i=i>0?i:Math.max(s/t[0],n/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function I8(r,e,t,i){const n=hn(r);return P8(n,e,t,i)}function hn(r){r=V(r);let e=r.getExtent();if(!e){const t=180*xs.degrees/r.getMetersPerUnit();e=In(-t,-t,t,t)}return e}function A8(r,e){return function(t,i,n){if(!t)return;let s;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return eh(r,o,t[1],t[2],s)}}function th(r,e){const t=r.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=A8(r[n],e);return Ls(i)}function Ls(r){return r.length===1?r[0]:function(e,t,i){if(!e)return;const n=Qc(e),s=yi(n,r.length);return r[s](e,t,i)}}function F8(r,e,t){}class Qo extends ks{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&De(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||W(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,n,s,o){return ie()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:t0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=De(n.getTileSize(e),this.tmpSize);return s==1?o:$1(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),n=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=L8(n,e,i)),f8(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Tg extends Ni{constructor(e,t){super(e),this.tile=t}}const hs={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class ea extends Qo{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ea.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=W(t),n=t.getState();let s;n==D.LOADING?(this.tileLoadingKeys_[i]=!0,s=hs.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==D.ERROR?hs.TILELOADERROR:n==D.LOADED?hs.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Tg(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=e0(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(th(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class pi extends ea{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Sg,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Jo,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!He(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||He(t,e)))return this.tileGrid;const i=W(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=t0(e)),this.tileGridForProjection[i]}createTile_(e,t,i,n,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,n,s):void 0,h=new this.tileClass(a,c!==void 0?D.IDLE:D.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(H.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,i,n,s,o){const a=this.getProjection();if(!a||!s||He(a,s))return this.getTileInternal(e,t,i,n,a||s);const l=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(a),u=this.getTileGridForProjection(s),d=this.getTileCoordForTileUrlFunction(l,s),f=new qc(a,h,s,u,l,d,this.getTilePixelRatio(n),this.getGutter(),(g,p,m,_)=>this.getTileInternal(g,p,m,_,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=c,f}getTileInternal(e,t,i,n,s,o){const a=this.getKey(),l=go(this,a,e,t,i);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(e,t,i,n,s,a);return o==null||o.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=V(e);if(i){const n=W(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}}function Sg(r,e){if(Gt){const t=r.getCrossOrigin();let i="same-origin",n="same-origin";t==="anonymous"||t===""?(i="cors",n="omit"):t==="use-credentials"&&(i="cors",n="include"),fetch(e,{mode:i,credentials:n}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{var l;const o=r.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),(l=s.close)==null||l.call(s),o.dispatchEvent(new Event("load"))}).catch(()=>{r.getImage().dispatchEvent(new Event("error"))});return}r.getImage().src=e}class i0 extends pi{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Gn({extent:hn(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Rg='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class M8 extends i0{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Rg];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,o)=>{const a=s.getImage();!Gt&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||Sg)(s,o)},transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}class Lg extends pi{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=mt(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,i,n){const s=V(i),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=an(e,s,o),c=Po(o,s,e,t),h=a.getZForResolution(c,this.zDirection),u=a.getResolution(h),d=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=d[0])return;let f=a.getTileCoordExtent(d,this.tmpExtent_);const g=this.gutter_;g!==0&&(f=It(f,u*g,f));const p={QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,p2(this.params_,"GetFeatureInfo"),n);const m=Math.floor((l[0]-f[0])/u),_=Math.floor((f[3]-l[1])/u);return p[this.v13_?"I":"X"]=m,p[this.v13_?"J":"Y"]=_,this.getRequestUrl_(d,f,1,o||s,p)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:m2,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;i.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;i.SCALE=e*n/s}return Object.assign(i,t),tn(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,i,n,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=yi(Qc(e),o.length);a=o[l]}return bg(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),i,n,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||m2;this.v13_=I2(e,"1.3")>=0}tileUrlFunction(e,t,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=n.getResolution(e[0]);let o=n.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=It(o,s*a,o));const l=Object.assign({},p2(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,i,l)}}const Yu=[];class k8 extends Ns{constructor(e,t,i,n,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Me(1,1,Yu)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=W(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Vo(this.context_),Yu.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let O8=class extends Ns{constructor(e,t,i,n,s,o){super(e,t,o),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==D.IDLE&&(this.setState(D.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(D.ERROR)}setFeatures(e){this.features_=e,this.setState(D.LOADED)}setLoader(e){this.loader_=e}};class Pg extends ea{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||hn(t),n=e.tileGrid||Gn({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:N8,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:O8,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===D.IDLE){i.setState(D.LOADING);const n=i.wrappedTileCoord,s=this.getTileGridForProjection(t);let o=s.getTileCoordExtent(n);const a=n[0],l=s.getResolution(a);It(o,-l,o);const c=this.projection;t&&this.projection&&!He(t,c)&&(o=Tn(o,t,c));const h=this.tileGrid,u=h.getExtent();u&&ot(o,u,o);let d=l;t&&c&&!He(t,c)&&(d=l/c.getMetersPerUnit()/t.getMetersPerUnit());const f=h.getZForResolution(d,this.zDirection);h.forEachTileCoord(o,f,g=>{const p=this.tileUrlFunction(g,e,t);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(g,p?D.IDLE:D.EMPTY,p,this.format_,this.tileLoadFunction));const m=this.sourceTiles_[p];i.sourceTiles.push(m),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(i.getKey());const _=m.getState();if(_<D.LOADED){const y=x=>{this.handleTileChange(x);const C=m.getState();if(C===D.LOADED||C===D.ERROR){const b=m.getKey();b in i.errorTileKeys?m.getState()===D.LOADED&&delete i.errorTileKeys[b]:i.loadingSourceTiles--,C===D.ERROR?i.errorTileKeys[b]=!0:m.removeEventListener(H.CHANGE,y),i.loadingSourceTiles===0&&i.setState(Ln(i.errorTileKeys)?D.LOADED:D.ERROR)}};m.addEventListener(H.CHANGE,y),i.loadingSourceTiles++}_===D.IDLE&&(m.extent=h.getTileCoordExtent(g),m.projection=this.projection,m.resolution=h.getResolution(g[0]),m.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(g=>g.getState()===D.ERROR)?D.ERROR:D.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let n=0,s=i.length;n<s;++n){const o=i[n].getTileUrl();if(!this.tileKeysBySourceTileUrl_[o])return;const a=this.tileKeysBySourceTileUrl_[o].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(a,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,t,i,n,s){const o=[e,t,i];let a=this.getTileCoordForTileUrlFunction(o,s);const l=this.getTileGrid().getExtent(),c=this.projection,h=this.getTileGridForProjection(s);if(a&&l){const f=h.getTileCoordExtent(a);It(f,-h.getResolution(e),f),Ne(l,!s||!c||He(s,c)?f:Tn(f,s,c))||(a=null)}let u=!0;if(a!==null){const f=this.tileGrid,g=h.getResolution(e);let p=g;s&&c&&!He(s,c)&&(p=g/c.getMetersPerUnit()/s.getMetersPerUnit());const m=f.getZForResolution(p,1),_=h.getTileCoordExtent(a);It(_,-g,_),f.forEachTileCoord(!s||!c||He(s,c)?_:Tn(_,s,c),m,y=>{u=u&&!this.tileUrlFunction(y,n,c)})}const d=new k8(o,u?D.EMPTY:D.IDLE,a,this.getSourceTiles.bind(this,n,s),this.removeSourceTiles.bind(this));return d.key=this.getKey(),d}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const n=this.projection;if(n!==null&&!He(n,e))return t0(e);const s=this.tileGrid,o=s.getResolutions().slice(),a=o.map(function(h,u){return s.getOrigin(u)}),l=o.map(function(h,u){return s.getTileSize(u)}),c=O1+1;for(let h=o.length;h<c;++h)o.push(o[h-1]/2),a.push(a[h-1]),l.push(l[h-1]);i=new Dn({extent:s.getExtent(),origins:a,resolutions:o,tileSizes:l}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const n=this.getTileGridForProjection(i),s=De(n.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function N8(r,e){r.setLoader(function(t,i,n){wf(e,r.getFormat(),t,i,n,r.onLoad.bind(r),r.onError.bind(r))})}class D8 extends pi{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=e0(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Ls(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(Ls(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?tn(e,i):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in i?i[a.toLowerCase()]:o});const n=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const c={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(c,s);let h=e;return t=="KVP"?h=tn(h,c):h=h.replace(/\{(\w+?)\}/g,function(u,d){return encodeURIComponent(c[d])}),h}}}function G8(r,e){var F;const t=r.Contents.Layer,i=t==null?void 0:t.find(function(A){return A.Identifier==e.layer});if(!i)return null;const n=r.Contents.TileMatrixSet;let s;i.TileMatrixSetLink.length>1?"projection"in e?s=i.TileMatrixSetLink.findIndex(function(A){const j=n.find(function(Z){return Z.Identifier==A.TileMatrixSet}).SupportedCRS,N=V(j),B=V(e.projection);return N&&B?He(N,B):j==e.projection}):s=i.TileMatrixSetLink.findIndex(function(A){return A.TileMatrixSet==e.matrixSet}):s=0,s<0&&(s=0);const o=i.TileMatrixSetLink[s].TileMatrixSet,a=i.TileMatrixSetLink[s].TileMatrixSetLimits;let l=i.Format[0];"format"in e&&(l=e.format),s=i.Style.findIndex(function(A){return"style"in e?A.Title==e.style:A.isDefault}),s<0&&(s=0);const c=i.Style[s].Identifier,h={};"Dimension"in i&&i.Dimension.forEach(function(A,O,j){const N=A.Identifier;let B=A.Default;B===void 0&&(B=A.Value[0]),h[N]=B});const d=r.Contents.TileMatrixSet.find(function(A){return A.Identifier==o});let f;const g=d.SupportedCRS;if(g&&(f=V(g)),"projection"in e){const A=V(e.projection);A&&(!f||He(A,f))&&(f=A)}let p=!1;const m=f.getAxisOrientation().startsWith("ne");let _=d.TileMatrix[0],y={MinTileCol:0,MinTileRow:0,MaxTileCol:_.MatrixWidth-1,MaxTileRow:_.MatrixHeight-1};if(a){y=a[a.length-1];const A=d.TileMatrix.find(O=>O.Identifier===y.TileMatrix||d.Identifier+":"+O.Identifier===y.TileMatrix);A&&(_=A)}const x=(F=i.BoundingBox)==null?void 0:F.find(A=>V(A.crs)&&He(V(A.crs),f)),C=_.ScaleDenominator*28e-5/f.getMetersPerUnit(),b=m?[_.TopLeftCorner[1],_.TopLeftCorner[0]]:_.TopLeftCorner,v=_.TileWidth*C,w=_.TileHeight*C;let L=(x==null?void 0:x.extent)??d.BoundingBox;L&&m&&(L=[L[1],L[0],L[3],L[2]]);let T=[b[0]+v*y.MinTileCol,b[1]-w*(1+y.MaxTileRow),b[0]+v*(1+y.MaxTileCol),b[1]-w*y.MinTileRow];if(L!==void 0&&!Et(L,T)){const A=i.WGS84BoundingBox,O=V("EPSG:4326").getExtent();if(T=L,A)p=A[0]===O[0]&&A[2]===O[2];else{const j=Tn(L,d.SupportedCRS,"EPSG:4326");p=j[0]-1e-10<=O[0]&&j[2]+1e-10>=O[2]}}const R=R8(d,T,a),M=[];let I=e.requestEncoding;if(I=I!==void 0?I:"","OperationsMetadata"in r&&"GetTile"in r.OperationsMetadata){const A=r.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let O=0,j=A.length;O<j;++O)if(A[O].Constraint){const B=A[O].Constraint.find(function(Z){return Z.name=="GetEncoding"}).AllowedValues.Value;if(I===""&&(I=B[0]),I==="KVP")B.includes("KVP")&&M.push(A[O].href);else break}else A[O].href&&(I="KVP",M.push(A[O].href))}return M.length===0&&(I="REST",i.ResourceURL.forEach(function(A){A.resourceType==="tile"&&(l=A.format,M.push(A.template))})),{urls:M,layer:e.layer,matrixSet:o,format:l,projection:f,requestEncoding:I,tileGrid:R,style:c,dimensions:h,wrapX:p,crossOrigin:e.crossOrigin}}const z8={GeoJSON:Ho,MVT:e8},U8={Group:Pn,Image:fg,Tile:xg,Vector:Mi,VectorTile:Da},B8={ImageWMS:vg,OSM:M8,Tile:Qo,TileWMS:Lg,Vector:Er,VectorTile:Pg,WMTS:D8,XYZ:i0};function Ps(r,e,t=!0){var o;e=JSON.parse(JSON.stringify(e));const n={...window.eoxMapAdvancedOlLayers,...U8}[e.type];if(!n)throw new Error(`Layer type ${e.type} not supported!`);const s=new n({...e,...e.type!=="MapboxStyle"&&e.source&&{source:Ig(e.source)},...e.type==="Group"&&{layers:[]},...e.properties,style:void 0});if(s.set("_jsonDefinition",e,!0),e.type==="Group"){const a=e.layers.reverse().map(l=>Ps(r,l));a.forEach(l=>l.set("_group",s,!0)),s.setLayers(new vt(a))}if("style"in e&&s.setStyle(e.style),t&&((o=e.interactions)!=null&&o.length))for(let a=0;a<e.interactions.length;a++){const l=e.interactions[a];Ag(r,s,l)}return Mg(s,e),s}function Ig(r){const t={...window.eoxMapAdvancedOlSources,...B8}[r.type];if(r&&!t)throw new Error(`Source type ${r.type} not supported!`);const i={...window.eoxMapAdvancedOlFormats,...z8},n=K8(r);return new t({...r,..."format"in r&&r.type!=="WMTS"&&{format:new i[typeof r.format=="object"?r.format.type:r.format]({...typeof r.format=="object"&&{...r.format}})},..."source"in r&&{source:Ig(r.source)},..."tileGrid"in r&&{tileGrid:n},..."projection"in r&&{projection:V(r.projection)}})}function Ag(r,e,t){t.type==="draw"?Jy(r,e,t.options):t.type==="select"?V8(r,e,t.options):t.type==="clusterExplode"&&H8(r,e,t.options)}function Fg(r,e,t){var s,o,a,l;const i=t.get("_jsonDefinition");if(e.type!==i.type||e.type!=="MapboxStyle"&&((s=e.source)==null?void 0:s.type)!==((o=i.source)==null?void 0:o.type))throw new Error("Layers are not compatible to be updated");const n=Ps(r,e,!1);if(e.type!=="MapboxStyle"&&JSON.stringify(e.source)!==JSON.stringify(i.source)&&t.setSource(n.getSource()),e.type==="MapboxStyle"&&JSON.stringify(e.properties.mapboxStyle)!==JSON.stringify(i.properties.mapboxStyle)&&(t.getLayers().clear(),t.applyMapboxStyle(e.properties.mapboxStyle,e.properties.applyOptions)),["Vector","VectorTile"].includes(e.type)&&JSON.stringify(e.style)!==JSON.stringify(i.style)&&t.setStyle(n.getStyle()),JSON.stringify(e.properties)!==JSON.stringify(i.properties)&&t.setProperties(e.properties),e.visible!==i.visible&&t.setVisible(e.visible),e.opacity&&e.opacity!==i.opacity&&t.setOpacity(e.opacity),JSON.stringify(e.interactions)!==JSON.stringify(i.interactions)&&((a=i.interactions)==null||a.forEach(c=>{const h=e.interactions.find(u=>{var d,f;return u.type===c.type&&((d=u.options)==null?void 0:d.id)===((f=c.options)==null?void 0:f.id)});h?h.type==="draw"?(r.interactions[h.options.id].setActive(h.options.active),r.interactions[`${h.options.id}_modify`].setActive(h.options.modify)):(r.selectInteractions[h.options.id]||r.interactions[h.options.id]).setActive(h.options.active):c.type==="select"?r.removeSelect(c.options.id):r.removeInteraction(c.options.id)}),(l=e.interactions)==null||l.forEach(c=>{i.interactions.find(u=>{var d,f;return u.type===c.type&&((d=u.options)==null?void 0:d.id)===((f=c.options)==null?void 0:f.id)})||Ag(r,t,c)})),e.type==="Group"){const c=e.layers.map(f=>{var g;return(g=f.properties)==null?void 0:g.id}),h=t.getLayers();h.getArray().slice().forEach(f=>{c.includes(f.get("id"))||h.remove(f)}),e.layers.forEach(f=>{const g=f.properties.id;if(h.getArray().map(p=>p.get("id")).includes(g))Fg(r,f,r.getLayerById(g));else{const p=Ps(r,f);h.push(p)}});const d=c.toReversed();h.getArray().sort((f,g)=>d.indexOf(f.get("id"))-d.indexOf(g.get("id"))),h.changed()}return Mg(t,e),t.set("_jsonDefinition",e,!0),t}const j8=(r,e)=>e?[...e].reverse().map(t=>Ps(r,t)):[];function Mg(r,e){r.on("change:opacity",()=>{e.opacity=r.getOpacity()}),r.on("change:visible",()=>{e.visible=r.getVisible()}),r.on("change:zIndex",()=>{e.zIndex=r.getZIndex()}),r.on("propertychange",t=>{t.key!=="map"&&(e.properties[t.key]=t.target.get(t.key))})}class X8{constructor(e,t,i){ri(this,"panIntoFeature",(e,t)=>{const i=e instanceof Ee||e instanceof _t?e.getGeometry().getExtent():e;this.eoxMap.map.getView().fit(i,t||{duration:750})});var c,h,u;this.eoxMap=e,this.selectLayer=t,this.options=i,this.active=i.active||t.getVisible(),this.panIn=i.panIn||!1,this.tooltip=i.tooltip!==!1;const n=this.eoxMap.map.getOverlayById("eox-map-tooltip");let s;this.tooltip&&(n?(this.tooltipElement=n.getElement(),s=n):(this.tooltipElement=this.eoxMap.querySelector("eox-map-tooltip")||this.eoxMap.querySelector("[is=eox-map-tooltip]")||((c=i.overlay)==null?void 0:c.element),this.tooltipElement&&(s=new ug({element:this.tooltipElement,position:void 0,offset:[0,0],positioning:"top-left",className:"eox-map-tooltip",id:"eox-map-tooltip",...i.overlay}),this.eoxMap.map.addOverlay(s))));const o=()=>{s&&i.condition==="pointermove"&&s.setPosition(void 0)};e.map.on("change:target",d=>{var f,g;(f=d.oldValue)==null||f.removeEventListener("pointerleave",o),(g=d.target.getTargetElement())==null||g.addEventListener("pointerleave",o)}),(h=e.map.getTargetElement())==null||h.addEventListener("pointerleave",o);const a=d=>{var m,_,y,x;i!=null&&i.projection&&(sr.defs((m=i.projection)==null?void 0:m.name)||(sr.defs((_=i.projection)==null?void 0:_.name,(y=i==null?void 0:i.projection)==null?void 0:y.proj4_string),qo(sr)));const f=V(((x=i==null?void 0:i.projection)==null?void 0:x.name)||"EPSG:4326"),g=e.map.getView().getProjection().getCode(),p=an(d.coordinate,g,f);return{lon:p[0].toFixed((i==null?void 0:i.precision)||2),lat:p[1].toFixed((i==null?void 0:i.precision)||2)}},l=d=>Object.values(d).every(f=>f===0);if(this.selectLayer instanceof Mi||this.selectLayer instanceof Da){this.selectedFids=[];let d;if(this.options.layer)d=this.options.layer;else{const p=this.selectLayer.get("_jsonDefinition");d={...p,style:i.style,properties:{id:this.selectLayer.get("id")+"_select"},source:{type:p.type}}}d.renderMode="vector",delete d.interactions,this.selectStyleLayer=Ps(e,d),this.selectStyleLayer.setSource(this.selectLayer.getSource()),this.selectStyleLayer.setMap(this.eoxMap.map);const f=this.selectStyleLayer.getStyleFunction();this.selectStyleLayer.setStyle((p,m)=>this.selectedFids.length&&this.selectedFids.includes(this.getId(p))?f(p,m):null),this.listener=p=>{if(!this.active||p.dragging)return;const m=this.eoxMap.map.getView().getZoom();if(m<this.selectLayer.getMinZoom()||m>this.selectLayer.getMaxZoom())return;const _=this.eoxMap.map.forEachFeatureAtPixel(p.pixel,b=>b,{layerFilter:b=>b===this.selectLayer}),y=_?[this.getId(_)]:[],x=this.selectedFids[0]!==y[0];if(this.selectedFids=y,x&&(this.selectStyleLayer.changed(),_&&this.panIn&&this.panIntoFeature(_)),s){const b=p.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",v=p.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${v}-${b}`),s.setPosition(_?p.coordinate:null),_&&this.tooltipElement&&(this.tooltipElement.feature=_)}const C=new CustomEvent("select",{detail:{id:i.id,originalEvent:p,feature:_}});this.eoxMap.dispatchEvent(C)},this.eoxMap.map.on(i.condition||"click",this.listener),this.selectLayer.on("change:opacity",()=>{this.selectStyleLayer.setOpacity(this.selectLayer.getOpacity())}),this.selectLayer.on("change:visible",()=>{const p=this.selectLayer.getVisible();this.selectStyleLayer.setVisible(p),this.setActive(p)}),this.changeSourceListener=()=>{this.selectStyleLayer.setSource(this.selectLayer.getSource())},this.selectLayer.on("change:source",this.changeSourceListener);const g=()=>{var p,m;e.getLayerById(t.get("id"))?((p=this.selectStyleLayer)==null||p.setMap(this.eoxMap.map),s==null||s.setMap(this.eoxMap.map)):((m=this.selectStyleLayer)==null||m.setMap(null),s==null||s.setMap(null))};e.map.getLayerGroup().on("change",g),this.pointerMoveListener=p=>{var m;p.dragging||(e.map.getTargetElement().style.cursor=e.map.hasFeatureAtPixel(p.pixel,{layerFilter:_=>{var y,x;return(x=(y=_.get("_jsonDefinition"))==null?void 0:y.interactions)==null?void 0:x.find(C=>{var b;return C.type=="select"&&((b=C.options)==null?void 0:b.condition)==="click"})},...i.atPixelOptions})?i.cursor||"pointer":(m=this.eoxMap.interactions.drawInteraction)!=null&&m.getActive()?"crosshair":"auto")},e.map.on("pointermove",this.pointerMoveListener)}(this.selectLayer.getSource()instanceof vg||this.selectLayer.getSource()instanceof Lg)&&(this.listener=d=>{if(!this.active||d.dragging)return;const f=e.map.getView().getResolution(),g=this.selectLayer.getSource().getFeatureInfoUrl(d.coordinate,f,e.map.getView().getProjection(),{INFO_FORMAT:"application/json"});g&&fetch(g).then(p=>p.text()).then(p=>{if(s){const m=d.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",_=d.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${_}-${m}`)}if(p&&this.tooltipElement){const m=JSON.parse(p);let _;m.type==="FeatureCollection"&&m.features.length>0?_=m.features[0]:m.type==="Feature"?(_=m,this.tooltipElement.innerHTML=`<pre>${JSON.stringify(_.properties,null,2)}</pre>`):s==null||s.setPosition(null),i!=null&&i.coordinates&&_&&Object.assign(_==null?void 0:_.properties,a(d));const y=new Ee({..._==null?void 0:_.properties});this.tooltipElement.feature=y,s.setPosition(_?d.coordinate:null)}})},i.condition=="click"&&this.eoxMap.map.on(i.condition,this.listener)),((u=this.selectLayer.getProperties())==null?void 0:u.type)==="WebGLTile"&&(this.listener=d=>{if(!this.active||d.dragging)return;const f=this.selectLayer.getData(d.pixel);if(f){if(s){const g=d.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",p=d.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${p}-${g}`),s.setPosition(d.coordinate);let m={};for(const[_,y]of f.entries()){const x=(_+1).toString();m[`band${x}`]=y}if(l(m))s==null||s.setPosition(null);else if(this.tooltipElement){i!=null&&i.coordinates&&Object.assign(m,a(d));const _=new Ee({...m});this.tooltipElement.feature=_,s.setPosition(Object.keys(m).length>0?d.coordinate:null)}}}else s==null||s.setPosition(null)},this.eoxMap.map.on(i.condition||"click",this.listener))}setActive(e){this.active=e}highlightById(e,t){if(this.selectedFids=e,e.length&&t){const i=mt();if(this.selectLayer instanceof Mi)for(let n=0;n<this.selectedFids.length;n++){const s=this.selectedFids[n],o=this.selectLayer.getSource().getFeatureById(s);o&&o.getGeometry()&&ps(i,o.getGeometry().getExtent())}else if(this.selectLayer instanceof Da){const n=this.eoxMap.map,s=this.selectLayer.getFeaturesInExtent(n.getView().calculateExtent(n.getSize()));for(let o=0;o<s.length;o++){const a=s[o];this.selectedFids.includes(this.getId(a))&&ps(i,a.getGeometry().getExtent())}}rn(i)||this.panIntoFeature(i,t)}this.selectStyleLayer.changed()}remove(){this.eoxMap.map.un(this.options.condition||"click",this.listener),(this.selectLayer instanceof Mi||this.selectLayer instanceof Da)&&(this.selectStyleLayer.setMap(null),delete this.eoxMap.selectInteractions[this.options.id],this.selectLayer.un("change:source",this.changeSourceListener),this.eoxMap.map.un("pointermove",this.pointerMoveListener))}getId(e){if(this.options.idProperty)return e.get(this.options.idProperty);if(e.getId()!==void 0)return e.getId();if(e.get("id")!==void 0)return e.get("id");if(W(e)!==void 0)return W(e);throw Error("No feature id found. Please provide which feature property should be taken instead using idProperty.")}}function V8(r,e,t){if(r.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);return r.selectInteractions[t.id]=new X8(r,e,t),r.selectInteractions[t.id]}const W8=1,Z8=28,Y8=Math.PI/2;var Hi,Io,Ri,st,Nl,$r,T2,Ga,kg,Dl;class $8 extends Fs{constructor(t,i,n){super(n);pt(this,st);pt(this,Hi,null);pt(this,Io,null);pt(this,Ri,null);pt(this,T2,t=>new Promise(i=>{const n=this.eoxMap.map.getView().getZoom(),s={...Ge(this,Hi).fitOptions};s.callback=o=>{var a,l;i(this.eoxMap.map.getView().getZoom()!==n),(l=(a=Ge(this,Hi).fitOptions).callback)==null||l.call(a,o)},this.eoxMap.map.getView().fit(t,s)}));this.clusterLayer=i,this.eoxMap=t;const s={maxZoom:20,atPixelOptions:{},fitOptions:{duration:500,padding:[40,40,40,40]}},o=structuredClone(n);o.fitOptions&&(s.fitOptions={...s.fitOptions,...o.fitOptions},delete o.fitOptions),Rt(this,Hi,{...s,...o}),this.active=n.active||i.getVisible();const a=new Mi;a.setStyle(n.style),Rt(this,Io,a.getStyleFunction())}handleEvent(t){if(!this.getActive())return!0;if(t.type==="pointermove"){const i=this.eoxMap.map.hasFeatureAtPixel(t.pixel,{layerFilter:n=>n===this.clusterLayer,...Ge(this,Hi).atPixelOptions});return this.eoxMap.map.getTargetElement().style.cursor=i?"pointer":"default",!i}if(t.type==="click"){const i=this.eoxMap.map.getFeaturesAtPixel(t.pixel,{layerFilter:a=>a===this.clusterLayer,...Ge(this,Hi).atPixelOptions});if(i.length===0)return Lt(this,st,$r).call(this),!0;const n=i[0],s=n.get("features");if(s.length===1)return Lt(this,st,Nl).call(this,t,s[0]),Lt(this,st,$r).call(this),!0;if(Ge(this,Ri)&&Ge(this,Ri)===n){const a=Lt(this,st,kg).call(this,n,t.coordinate);Lt(this,st,Nl).call(this,t,a.feature)}if(this.eoxMap.map.getView().getZoom()>Ge(this,Hi).maxZoom-1)return Lt(this,st,Ga).call(this,n),!1;const o=mt();return s.forEach(a=>{ps(o,a.getGeometry().getExtent())}),_s(o)<100?(Lt(this,st,Ga).call(this,n),!1):(Ge(this,T2).call(this,o).then(a=>{a||Lt(this,st,Ga).call(this,n)}),!1)}return!0}setActive(t){t||(Lt(this,st,$r).call(this),this.eoxMap.map.getTargetElement().style.cursor="default"),super.setActive(t)}setMap(t){t||(Lt(this,st,$r).call(this),this.eoxMap.map.getTargetElement().style.cursor="default"),super.setMap(t)}remove(){this.setMap(null)}}Hi=new WeakMap,Io=new WeakMap,Ri=new WeakMap,st=new WeakSet,Nl=function(t,i){const n=new CustomEvent("clusterSelect",{detail:{originalEvent:t,feature:i}});this.eoxMap.dispatchEvent(n)},$r=function(){Ge(this,Ri)&&(Ge(this,Ri).setStyle(void 0),Rt(this,Ri,null))},T2=new WeakMap,Ga=function(t){Ge(this,Ri)&&Lt(this,st,$r).call(this);const i=t.getGeometry().getCoordinates(),n=t.get("features"),s=Lt(this,st,Dl).call(this,n.length,i,this.eoxMap.map.getView().getResolution()).reduce((o,a,l)=>{const c=new Oe(a),h=new ze([i,a]);o.unshift(new et({geometry:h,stroke:new At({color:"rgba(50, 50, 50, 0.5)",width:2.5})}));const u=new Ee({...n[l].getProperties()}),d=Ge(this,Io).call(this,u,this.eoxMap.map.getView().getResolution());return d!=null&&d.length&&d.forEach(f=>{const g=f.clone();g.setGeometry(c),o.unshift(g)}),o},[]);t.setStyle(s),Rt(this,Ri,t)},kg=function(t,i){const n=t.get("features"),s=Lt(this,st,Dl).call(this,n.length,t.getGeometry().getCoordinates(),this.eoxMap.map.getView().getResolution());let o=1/0,a;for(let l=0,c=s.length;l<c;++l){const h=(i[0]-s[l][0])**2+(i[1]-s[l][1])**2;h<o&&(a=l,o=h)}return{feature:n[a],coords:s[a]}},Dl=function(t,i,n){let o=W8*Z8*(2+t)/(Math.PI*2);const a=Math.PI*2/t,l=[];let c;o=Math.max(o,35)*n;for(let h=0;h<t;++h)c=Y8+h*a,l.push([i[0]+o*Math.cos(c),i[1]+o*Math.sin(c)]);return l};function H8(r,e,t){if(r.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);const i=new $8(r,e,t);r.interactions[t.id]=i,r.map.addInteraction(i)}function K8(r){let e;if(!(!r||!("tileGrid"in r))){if(r.type==="WMTS"){const i=V("EPSG:3857").getExtent(),n=ae(i)/128,s=new Array(19),o=new Array(19);for(let a=0;a<19;++a)s[a]=n/Math.pow(2,a),o[a]=a;e=new Eg({resolutions:s,origin:fi(i),projection:r.tileGrid.projection||"EPSG:3857",matrixIds:o,...r.tileGrid})}else e=Gn({...r.tileGrid});return e}}function ih(r,e){return Og(r.map.getLayers().getArray()).find(i=>i.get("id")===e)}function Og(r){const e=[];e.push(...r);let t=e.filter(i=>i instanceof Pn);for(;t.length;){const i=[];for(let n=0;n<t.length;n++){const s=t[n].getLayers().getArray();e.push(...s),i.push(...s.filter(o=>o instanceof Pn))}t=i}return e}function Gl(r){const e=Object.assign({},r.animationOptions),t=r.map.getView();if(Ff(t),!e||!Object.keys(e).length){t.setCenter(r.center),t.setZoom(r.zoom);return}e.center=hg(r.center),e.zoom=r.zoom,t.animate(e)}const Q0="units",q8=[1,2,5],Ks=25.4/.28;class J8 extends bi{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Oi,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Q0,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Q0)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Q0,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,n=this.getUnits(),s=n=="degrees"?"degrees":"m";let o=bs(i,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||Ks)/Ks,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Ks)/Ks:void 0;let c=a*o,h="";if(n=="degrees"){const x=xs.degrees;c*=x,c<x/60?(h="″",o*=3600):c<x?(h="′",o*=60):h="°"}else if(n=="imperial")c<.9144?(h="in",o/=.0254):c<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344);else if(n=="nautical")o/=1852,h="NM";else if(n=="metric")c<1e-6?(h="nm",o*=1e9):c<.001?(h="μm",o*=1e6):c<1?(h="mm",o*=1e3):c<1e3?h="m":(h="km",o/=1e3);else if(n=="us")c<.9144?(h="in",o*=39.37):c<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472);else throw new Error("Invalid units");let u=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,g,p=0,m,_;for(;;){g=Math.floor(u/3);const x=Math.pow(10,g);if(d=q8[(u%3+3)%3]*x,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=p,f=m,g=_;break}else if(f>=a)break;p=d,m=f,_=g,++u}const y=this.scaleBar_?this.createScaleBar(f,d,h):d.toFixed(g<0?-g:0)+" "+h;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let h=0;h<o;++h){const u=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(h%2===0||o===2?this.createStepText(h,e,!1,t,i):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,n,s){const a=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=bs(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Ks,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const $u=["fullscreenchange","webkitfullscreenchange"],Hu={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Q8 extends bi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(H.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Oi} ${xr}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Ku(t))if(qu(t))tx(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?ex(i):Ng(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=qu(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Es(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Hu.ENTERFULLSCREEN)):(Es(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Hu.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(tt.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(tt.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,n=e.length;i<n;++i)ke(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();Ku(i)?this.element.classList.remove(ru):this.element.classList.add(ru);for(let n=0,s=$u.length;n<s;++n)e.push(ge(i,$u[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Ku(r){const e=r.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&r.fullscreenEnabled)}function qu(r){return!!(r.webkitIsFullScreen||r.fullscreenElement)}function Ng(r){r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function ex(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():Ng(r)}function tx(r){r.exitFullscreen?r.exitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}const qs={VERTICAL:0,HORIZONTAL:1};class ix extends bi{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=qs.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=t+"-thumb "+Oi;const n=this.element;n.className=t+" "+Oi+" "+xr,n.appendChild(i),n.addEventListener(Pi.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),n.addEventListener(Pi.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),n.addEventListener(Pi.POINTERUP,this.handleDraggerEnd_.bind(this),!1),n.addEventListener(H.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(H.CLICK,np,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,i=e.offsetHeight;if(t===0&&i===0)return this.sliderInitialized_=!1;const n=getComputedStyle(e);t-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),i-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);const s=e.firstElementChild,o=getComputedStyle(s),a=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],t>i?(this.direction_=qs.HORIZONTAL,this.widthLimit_=t-a):(this.direction_=qs.VERTICAL,this.heightLimit_=i-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i),s=t.getConstrainedZoom(t.getZoomForResolution(n));t.animateInternal({zoom:s,duration:this.duration_,easing:_r})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const i=this.handleDraggerDrag_,n=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(ge(s,Pi.POINTERMOVE,i,this),ge(s,Pi.POINTERUP,n,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,i=e.clientY-this.startY_,n=this.getRelativePosition_(t,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),i=this.element.firstElementChild;this.direction_==qs.HORIZONTAL?i.style.left=this.widthLimit_*t+"px":i.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let i;return this.direction_===qs.HORIZONTAL?i=e/this.widthLimit_:i=t/this.heightLimit_,se(i,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return se(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const el=.75,Sa=.1;class nx extends bi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",n=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof n=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const s=e.label!==void 0?e.label:"›";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(o),a.addEventListener(H.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const l=new uf({view:e.view,controls:new vt,interactions:new vt});this.ovmap_=l,e.layers&&e.layers.forEach(function(_){l.addLayer(_)});const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new ug({position:[0,0],positioning:"center-center",element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const h=t+" "+Oi+" "+xr+(this.collapsed_&&this.collapsible_?" "+qa:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=h,u.appendChild(this.ovmapDiv_),u.appendChild(a);const d=this.boxOverlay_,f=this.boxOverlay_.getElement(),g=_=>({clientX:_.clientX,clientY:_.clientY}),p=function(_){const y=g(_),x=l.getEventCoordinate(y);d.setPosition(x)},m=_=>{const y=l.getEventCoordinateInternal(_),x=this.getMap();x.getView().setCenterInternal(y);const C=x.getOwnerDocument();C.removeEventListener("pointermove",p),C.removeEventListener("pointerup",m)};this.ovmapDiv_.addEventListener("pointerdown",_=>{const y=this.getMap().getOwnerDocument();_.target===f&&y.addEventListener("pointermove",p),y.addEventListener("pointerup",m)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const i=t.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ge(e,_o.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&this.bindView_(i),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===tt.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===tt.TARGET||e.key===tt.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new ai({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(Yt.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(Yt.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&qt(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),l=t.getView().calculateExtentInternal(o),c=t.getPixelFromCoordinateInternal(fi(s)),h=t.getPixelFromCoordinateInternal(P2(s)),u=Math.abs(c[0]-h[0]),d=Math.abs(c[1]-h[1]),f=o[0],g=o[1];u<f*Sa||d<g*Sa||u>f*el||d>g*el?this.resetExtent_():Et(l,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),o=t.getView(),a=Math.log(el/Sa)/Math.LN2,l=1/(Math.pow(2,a/2)*Sa);tc(s,l),o.fitInternal(Ka(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),n=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),c=n.getCenter(),h=n.getResolution(),u=s.getResolution(),d=i[0]*h/u,f=i[1]*h/u;if(a.setPosition(c),l){l.style.width=d+"px",l.style.height=f+"px";const g="rotate("+o+"rad)";l.style.transform=g}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=ja(this.ovmap_,Si.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(qa),this.collapsed_?Es(this.collapseLabel_,this.label_):Es(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}class rx extends bi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null,this.fitOptions=e.fitOptions||{};const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",n=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Oi+" "+xr,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?zt(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(Ka(i),this.fitOptions)}}const tl="projection",Ju="coordinateFormat";class sx extends bi{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(tl,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Ju)}getProjection(){return this.get(tl)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(ge(t,Pi.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(ge(t,Pi.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(Ju,e)}setProjection(e){this.set(tl,V(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=on(this.mapProjection_,s):this.transform_=E1}const n=this.getMap().getCoordinateFromPixelInternal(e);if(n){if(this.transform_(n,n),this.wrapX_){const o=this.getProjection()||this.mapProjection_;A2(n,o)}const s=this.getCoordinateFormat();s?t=s(n):t=n.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const Ye={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},ox={ERROR:"error"};class ax extends Ni{constructor(e){super(ox.ERROR),this.code=e.code,this.message=e.message}}class lx extends Di{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=E1,this.watchId_=void 0,this.addChangeListener(Ye.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(Ye.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=on(V("EPSG:4326"),e),this.position_&&this.set(Ye.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(Ye.ACCURACY,t.accuracy),this.set(Ye.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(Ye.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(Ye.HEADING,t.heading===null?void 0:Pt(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(Ye.POSITION,i.slice()),this.set(Ye.SPEED,t.speed===null?void 0:t.speed);const n=B3(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(Ye.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new ax(e))}getAccuracy(){return this.get(Ye.ACCURACY)}getAccuracyGeometry(){return this.get(Ye.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(Ye.ALTITUDE)}getAltitudeAccuracy(){return this.get(Ye.ALTITUDE_ACCURACY)}getHeading(){return this.get(Ye.HEADING)}getPosition(){return this.get(Ye.POSITION)}getProjection(){return this.get(Ye.PROJECTION)}getSpeed(){return this.get(Ye.SPEED)}getTracking(){return this.get(Ye.TRACKING)}getTrackingOptions(){return this.get(Ye.TRACKING_OPTIONS)}setProjection(e){this.set(Ye.PROJECTION,V(e))}setTracking(e){this.set(Ye.TRACKING,e)}setTrackingOptions(e){this.set(Ye.TRACKING_OPTIONS,e)}}class cx extends bi{constructor(e){const t=e||{},i=document.createElement("div");i.className="geolocation ol-unselectable ol-control";const n=document.createElement("button");n.title="Show your location",n.innerHTML=t.buttonIcon?`
      <img src="${t.buttonIcon}" alt="Geolocation" />
    `:`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>crosshairs-gps</title><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z" /></svg>
    `,i.appendChild(n),super({element:i}),this._centerWhenReady=t.centerWhenReady,this._highAccuracy=t.highAccuracy,this._trackAccuracy=t.trackAccuracy,this._trackHeading=t.trackHeading,this._positionFeature=new Ee({geometry:new Oe([NaN,NaN]),heading:0}),this._source=new Er({features:[this._positionFeature]}),this._trackAccuracy&&(this._accuracyFeature=new Ee,this._accuracyFeature.setStyle(new et({fill:new jt({color:"rgba(0, 0, 0, 0.2)"}),stroke:new At({width:2,color:"rgba(0, 0, 0, 0.7)"})})),this._source.addFeature(this._accuracyFeature)),this._layer=new Mi({source:this._source}),t.style&&this._layer.setStyle(t.style),n.addEventListener("click",this.centerOnPosition.bind(this),!1)}setMap(e){this._layer.setMap(e),super.setMap(e),e&&this._centerWhenReady&&this.initGeolocation()}initGeolocation(){return new Promise((e,t)=>{const i=this.getMap();i&&(this._geolocation=new lx({tracking:!0,trackingOptions:{enableHighAccuracy:this._highAccuracy},projection:i.getView().getProjection()})),this._centerWhenReady&&this._geolocation.once("change:position",n=>{i.getView().setCenter(n.target.getPosition())}),this._geolocation.on("error",n=>t(n)),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())}),this._geolocation.on("change:heading",n=>{this._trackHeading&&this._highAccuracy&&this._positionFeature.set("heading",n.target.getHeading())}),this._geolocation.on("change:position",()=>{const n=this._geolocation.getPosition();this._positionFeature.getGeometry().setCoordinates(n||null),e(n)})})}getElement(){return this.element}async centerOnPosition(){var e,t;try{await this.initGeolocation();const i=(e=this._geolocation)==null?void 0:e.getPosition();i&&((t=this.getMap())==null||t.getView().setCenter(i))}catch(i){console.error(i)}}}class hx extends bi{constructor(e){const t=e||{};t.opacity===void 0&&(t.opacity=1),t.type===void 0&&(t.type="small");const i=document.createElement("div");i.className="LoadingIndicator ol-unselectable ol-control",i.classList.add("loading-indicator"),i.style.opacity=String(t.opacity),t.spinnerSvg?i.innerHTML=t.spinnerSvg:i.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="50" height="50" style="shape-rendering: auto; display: block; background: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink"><g><circle stroke-dasharray="164.93361431346415 56.97787143782138" r="35" stroke-width="12" stroke="#1a467c" fill="none" cy="50" cx="50">
      <animateTransform keyTimes="0;1" values="0 50 50;360 50 50" dur="1.2222222222222223s" repeatCount="indefinite" type="rotate" attributeName="transform"></animateTransform>
      </circle></g></svg>`,t.type==="fullscreen"?i.classList.add("fullscreen"):i.classList.add("small"),super({element:i})}setMap(e){super.setMap(e),e&&(e.on("loadstart",()=>{this.getElement().style.visibility="visible"}),e.on("loadend",()=>{this.getElement().style.visibility="hidden"}))}getElement(){return this.element}}const ux={Zoom:U1,Rotate:z1,ScaleLine:J8,FullScreen:Q8,ZoomSlider:ix,Attribution:G1,OverviewMap:nx,ZoomToExtent:rx,MousePosition:sx,Geolocation:cx,LoadingIndicator:hx};function dx(r,e,t,i){e&&e[t]?JSON.stringify(e[t])!==JSON.stringify(i)&&(r.removeControl(t),Qu(r,t,i)):Qu(r,t,i)}function Qu(r,e,t){const i=Object.assign({},t);t&&t.layers&&(i.layers=j8(r,t.layers));const n=new ux[e](i);r.map.addControl(n),r.mapControls[e]=n}function fx(r,e){let t;const i=(r==null?void 0:r.length)&&Ky(r,e.map.getView().getCenter());return r&&!i&&(!e.projection||e.projection==="EPSG:3857"?t=hg(r):t=r),t}function gx(r,e){if(!r||!r.length)return;const t=e.map.getView();return Ff(t),setTimeout(()=>t.fit(r,e.animationOptions),0),r}function mx(r,e,t){const i=r;if(e){const n=Object.keys(e),s=Object.keys(i);for(let o=0,a=n.length;o<a;o++){const l=n[o];s.includes(l)||t.removeControl(l)}}if(i){const n=Object.keys(r);for(let s=0,o=n.length;s<o;s++){const a=n[s];dx(t,e,a,r[a])}}return i}function px(r){return JSON.parse(JSON.stringify(r)).reverse()}function _x(r,e,t){const i=px(r);e&&e.forEach(l=>{var c,h;if(!((c=l.properties)!=null&&c.id)||!i.find(u=>u.properties.id===l.properties.id)){const u=ih(t,(h=l.properties)==null?void 0:h.id),f=u.get("_jsonDefinition").interactions;f==null||f.forEach(g=>{g.type==="select"?t.removeSelect(g.options.id):t.removeInteraction(g.options.id)}),t.map.removeLayer(u)}}),i.forEach(l=>{t.addOrUpdateLayer(l)});const n=i.map(l=>{var c;return(c=l.properties)==null?void 0:c.id});t.map.getLayers().getArray().sort((l,c)=>n.indexOf(l.get("id"))-n.indexOf(c.get("id")));let s=t.map.getLayers().getArray().reduce((l,c)=>{var h,u,d,f,g,p,m,_;return l.maxZoom=(u=(h=t.config)==null?void 0:h.view)!=null&&u.maxZoom?(f=(d=t.config)==null?void 0:d.view)==null?void 0:f.maxZoom:l.maxZoom===void 0||c.get("maxZoom")<l.maxZoom?c.get("maxZoom"):l.maxZoom,l.minZoom=(p=(g=t.config)==null?void 0:g.view)!=null&&p.minZoom?(_=(m=t.config)==null?void 0:m.view)==null?void 0:_.minZoom:l.minZoom===void 0||c.get("minZoom")>l.minZoom?c.get("minZoom"):l.minZoom,l},{minZoom:0,maxZoom:1/0});t.map.getLayers().getArray().map(l=>l.setMinZoom(l.get("minZoom")-1e-12));const o=t.map.getView().getMinZoom(),a=t.map.getView().getMaxZoom();return o!==s.minZoom&&t.map.getView().setMinZoom(s.minZoom>=0?s.minZoom:0),a!==s.maxZoom&&t.map.getView().setMaxZoom(s.maxZoom),t.map.on("moveend",()=>{var h;if(!((h=t==null?void 0:t.controls)!=null&&h.Zoom))return;const l=t.renderRoot.querySelector("button.ol-zoom-out"),c=t.renderRoot.querySelector("button.ol-zoom-in");t.map.getView().getZoom()>=s.maxZoom?c==null||c.classList.add("disabled"):c==null||c.classList.remove("disabled"),t.map.getView().getZoom()-1e-12<=s.minZoom?l==null||l.classList.add("disabled"):l==null||l.classList.remove("disabled")}),i}function yx(r,e){return r?(Hy(e.map),Bu(e.map,!0)):Bu(e.map),r}function xx(r,e){var t,i,n,s,o,a,l,c;return Object.assign(e,{...(r==null?void 0:r.animationOptions)!==void 0?{animationOptions:r.animationOptions}:{},projection:((t=r==null?void 0:r.view)==null?void 0:t.projection)||"EPSG:3857",layers:(r==null?void 0:r.layers)||[],controls:(r==null?void 0:r.controls)||{},...(r==null?void 0:r.preventScroll)!==void 0&&e.preventScroll===void 0?{preventScroll:r==null?void 0:r.preventScroll}:{},zoom:((i=r==null?void 0:r.view)==null?void 0:i.zoom)||0,center:((n=r==null?void 0:r.view)==null?void 0:n.center)||[0,0],zoomExtent:(s=r==null?void 0:r.view)==null?void 0:s.zoomExtent}),(o=r==null?void 0:r.view)!=null&&o.minZoom&&e.map.getView().setMinZoom((a=r==null?void 0:r.view)==null?void 0:a.minZoom),(l=r==null?void 0:r.view)!=null&&l.maxZoom&&e.map.getView().setMaxZoom((c=r==null?void 0:r.view)==null?void 0:c.maxZoom),r}function Cx(r,e,t){let i=e;const n=t.map.getView();if(r&&V(r)&&r!==n.getProjection().getCode()){const s=an(n.getCenter(),n.getProjection().getCode(),r),o=V(r),a=n.getResolution(),l=n.getProjection().getMetersPerUnit(),c=o.getMetersPerUnit(),h=bs(n.getProjection(),1/l,n.getCenter(),"m")*l,u=bs(o,1/c,s,"m")*c,d=a*h/u,f=new ai({zoom:n.getZoom(),center:s,resolution:d,rotation:n.getRotation(),projection:r});["change:center","change:resolution","change:rotation","propertychange"].forEach(p=>{const m=n.getListeners(p);if(m!=null&&m.length)for(let _=m.length-1;_>=0;_--){const y=m[_];n.un(p,y),f.on(p,y)}}),t.map.setView(f),t.getFlatLayersArray(t.map.getLayers().getArray()).filter(p=>p instanceof Mi).forEach(p=>p.getSource().refresh()),i=r,t.center=s}return i}function bx(r,e){return r&&setTimeout(()=>{const t=lp(r);t&&(e.clientHeight<1&&!t.zoom?t.map.setView(e.map.getView()):e.map.setView(t.map.getView()))}),r}function vx(r){return r.projection==="EPSG:4326"?r.map.getView().getCenter():lg(r.map.getView().getCenter(),r.projection)}function Ex(r){const e=r.map.getView().calculateExtent(r.map.getSize());return r.projection==="EPSG:4326"?e:cg(e,r.projection)}function wx(r){return r.map.getView().calculateExtent(r.map.getSize())}function Tx(r,e){var s;r.interactions||(r.interactions=[]);const t=(s=r.properties)==null?void 0:s.id,i=t?ih(e,t):!1;let n;return i?(Fg(e,r,i),n=i):(n=Ps(e,r),e.map.addLayer(n)),n}function Sx(r,e){e.map.removeInteraction(e.interactions[r]),delete e.interactions[r],e.interactions[`${r}_modify`]&&(e.map.removeInteraction(e.interactions[`${r}_modify`]),delete e.interactions[`${r}_modify`])}function Rx(r,e){e.selectInteractions[r].remove(),delete e.selectInteractions[r]}function Lx(r,e){e.map.removeControl(e.mapControls[r]),delete e.mapControls[r]}function Px(r,e){e.map.once("change:target",t=>{t.target.getView().setCenter(e.center)}),e.map.setTarget(e.renderRoot.querySelector("div")),r?e.map.getView().fit(r,e.animationOptions):Gl(e),e.map.on("loadend",()=>{e.dispatchEvent(new CustomEvent("loadend",{detail:e.map}))}),e.dispatchEvent(new CustomEvent("mapmounted",{detail:e.map}))}const Ix=`@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(/pr-preview/pr-30/assets/material-symbols-outlined.BZinq3R6.woff2?no-inline) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.12.13/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(/pr-preview/pr-30/assets/material-symbols-rounded.DVluyMkh.woff2?no-inline) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.12.13/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(/pr-preview/pr-30/assets/material-symbols-sharp.DQLBrjHA.woff2?no-inline) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.12.13/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(data:font/woff2;base64,d09GMgABAAAAAAeoABEAAAAAEhgAAAdHAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHIM+BmA/U1RBVHAnFgCBDC8sEQgKkGyNSQs8ADCCSAE2AiQDPAQgBYVCByAMBxsTDxHVpB7INFIWzt8P4mutt9/QAgYIUN3acHkkH/VJRx8IFTZiDP7drAkkK3no7pmka0ppHW8d6hJMAhXVv1VPT9w5E//5+7381zqd1U8c0Br5vXPvj/POslM/rhqomirEizJIRvR1qGPaS5qWyFMRyxvljU6yTrgFIMmKi9nPdSBHcLDB4QmVB35LKcAiEpzZ15KDS0GtXL1xJ/nFYzcvk2NyJXmP6m+urp+4eJOe1y+eO0POURUUY3EENz4hG+zIndBY1EBhZpbiO3GAT5Z7juIsMYqpvb1pepJS0J0+DCSjP/3oZ7E3fr2cbpTk9KCkQOhdyHh/eheMMoQZEQWlKVrSl150p8NFA2ZgKtiHAQgK2vdtJx2VZq8ZS8+4GFvcuCOiGrf0uZUNhFZSz3qpDIHYqN70eJueSI7RXfIMy1zDxqJFiba/lLjFmi1b1tDF0L+RGepfQ6oZzYGPZxXdpbuAoUyogUIx1HNTeCZq9bqNG/NccM32ZStFkCtXb9wXhbpz5uxN0WimMpK+olfTKAnkGag23pIKJSl9oyhOSRJpDU6wSdJddA2jl7I0XgQg3QLS2dASvIsX7UuJJmQoRzjFOa5wnVvc/fnjz5y/kfcCVjvCMc5ygevcDJrNPKH/79v9N//Ff/Yf/Qf/rv9S6O3js8Gc3CnKYaMSMqmMbuxppfCN0BdjNk2Q4DJLvKdIaNDGe35io96F6AcFyEzIvlWSeXuY8TUvEKvPR7129XaWej0xWmvdM017piu7snQlGhTAxgWXKYrGxnGapqFxvfM8TyIT9g5DkwSFO35g/zm7d2+2Xw6kJx40m02pWq1W8rDRaFCr1+u7H7akasYP6tQaB6pKXKsVa38mZCq7KHvY86BDbNWZFA/bMbW2+HLhDBa+i+RVJaaqzpzZvnP31r0Fgq3szKRbHzKE0fXKKRlLU+P9OStKy73FVJD42YCvslJZThj5bFci4/HYNpp1yAWHyqhJJ/ZuZ5azR1577Q2RorgWmX399devJdFoNMqipzNflDBqKKBcHZQwRKKUEpqVKiSEkjMySg0ZLQ+t2kqaoPRUuglD6EKZ9bEkrhHPuZHVVLE1WjZGQhjSTjYwhGY72BiJfeY1ihpuDlTnU5FEzkTRoCBGKSeVlUmkAlLbayqr6+NioqRE0na2B/jhvMRLXKxL6WE9xE3c5ZQaTz6oefD93pucN7kXn3r6JucTy66bnDU32Hm8X1i6bAwGjculpcblYHDZWHo5b0nhxF13TawGjJu+0G1LHX9paVtbqflVJU88bH480RnzXYwGIvYWaqABPKuzSZdf3vnhh83NnQn+nDDg6xaWXLC49I6loqXCRb5mUJZC//cffzx14UI4PNX781eud1+4PtAR7gwn3bjTtmOXDYL4a+3RnFCKKeMFaiCrMD10tKpBzFkpLk1PTik1Fa9YDxcXpMYlFsQXH8bvirIjO3qqcsdranPHeiqP7CjTDa9v0ZZVyjNqns1Oqd3Ay7aa+zY6MvXejMXXJiY2eGR2LldnqGEyyqu7tJPrIYij+384d1Z29oez+7flbO+/qX9KNn1Tb/92COKVtofeDllDPz2VC0Gs2aLZUifW6TQ66Kxdl3ZZrdauS7uswRtzPPfYbPSX24V7gtm7/t+HyF18+EkbnGL7D6oa2vqDql2s/NNERz77o+TzPxrpvX9CEBtiLbRRWiE27jHS1/6PDxTnfj51u/r2n0+dO/vzmVvVt/585kz+2D39i+rFewbGJu7uX1Iv3dMHt0Vdv2T3BuZ5/o5L+TuMZaa0tHK94Y5G/sONjapv4nErP25z2EZ5fKDImd4SLLB0FvfW9I7eLLQ23xoZ7q3qLTZ3BgumtkB2exdri5040cQ2puzjU1Ydb5qxxq66owu7a2wuG37duFrzKfo1o5JN1rUwon4hC3lJr7dZ/62QwAHHMv7v+e9BcPZ/z1AGJijzFJgYPZp2J3DIktMkRokeWvGUKLt4kDPZEo3tN3NXhjunfO7QO8s+f9FV6eMrjUr9r2skfdElf3zXuSd3Ng//E/L/aRVGq7QPI3ClxgtqMxrMS1LSB/Ekirx1Fx0wWQLMEAB1GBGBEzETiu6FHTLsaVHM1UjWkk3qoEgVHlcdAfRaE8NTh05yCnqKl0ugoErkUtThNzmNPFyQM7gCS/JVyIK1vYrDhVqitLRPmpFTYJEsl+AycNFSyJShCO1X0yIIZMgBDqsBWsSjCW0oUIpFBdgRQqVyLOqFD20ozIjywxm05VC6XQ/cyEYL7HDBjSyAGM/Ihx1tJqoF/mIVS9ENAQ5ErH0rCtGOIcgLww1XnQV3owRueI0AWXa0oIKMrfjREYTBQYs9SIYGCdydcdg5h34cusXVY/wv6JCNQhQiG7rWN3LRZi0umo4ImtBN4x8EhCtqoEUCOGRjRgRehMxuHPKQh3TsAQcOFgS5OopPq3hqbQV11EF7/j90Aq3eYG64ExLHb6TnAQAAAA==) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.12.13/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}*:after,*:before{all:unset}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}@media (pointer: fine){body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:focus,:hover)::-webkit-scrollbar-thumb,body :has(:focus,:hover)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}}:not(.grid,nav,.row)>:not(progress.max)+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul):not([class*=margin],.right,.left,.top,.bottom){margin-block-start:1rem}:has(>[class*=margin]){padding:.1px}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(nav,.row,li).group>:focus-visible{z-index:1}:is(button,.button,.chip)>:is(span,i,img,svg){pointer-events:none}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}[class*=blur],[class*=blur].light{--_blur: 1rem;-webkit-backdrop-filter:blur(var(--_blur));backdrop-filter:blur(var(--_blur));color:var(--on-surface);background-color:#ffffff80!important}.dark [class*=blur],[class*=blur].dark{background-color:#00000080!important}.small-blur{--_blur: .5rem}.large-blur{--_blur: 1.5rem}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}.round,[class*=-round]{--_round: 2rem;border-radius:var(--_round)!important}.small-round{--_round: .5rem}.large-round{--_round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:.5rem!important}.top-round{border-start-start-radius:var(--_round)!important;border-start-end-radius:var(--_round)!important}.bottom-round{border-end-end-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.left-round{border-start-start-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.right-round{border-start-end-radius:var(--_round)!important;border-end-end-radius:var(--_round)!important}.circle:not(.extend){border-radius:50%}:is(.circle,.square):is(button,.button,.chip){padding:0;block-size:var(--_size);inline-size:var(--_size)}:is(.circle,.square)>span{display:none}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu,article){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}.border:not(.extend,.circle,.square,.badge){box-sizing:content-box}.margin,[class*=-margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(--_margin)!important}.margin,[class*=-margin]{--_margin: 1rem}.no-margin{--_margin: 0}.auto-margin{--_margin: auto}.tiny-margin{--_margin: .25rem}.small-margin{--_margin: .5rem}.large-margin{--_margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(--_margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(--_margin)!important}.top-margin,.vertical-margin{margin-block-start:var(--_margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(--_margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}.padding,[class*=-padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(--_padding)!important}.padding,[class*=-padding]{--_padding: 1rem}.no-padding{--_padding: 0 !important}.tiny-padding{--_padding: .25rem !important}.small-padding{--_padding: .5rem !important}.large-padding{--_padding: 1.5rem !important}.left-padding,.horizontal-padding{padding-inline-start:var(--_padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(--_padding)!important}.top-padding,.vertical-padding{padding-block-start:var(--_padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(--_padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{--_duration: .6s}.fast-ripple{--_duration: .2s}.slow-ripple{--_duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(--_duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto;min-inline-size:0}.no-scroll{overflow:hidden}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)!important}.right-shadow{background-image:linear-gradient(to left,black,transparent)!important}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)!important}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)!important}[class*=-width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,.row,.grid,table,.tooltip,.list,menu,.shape){block-size:.5rem}:is(.space,.small-space):not(nav,.row,.grid,table,.tooltip,.list,menu,.shape){block-size:1rem}.medium-space:not(nav,.row,.grid,table,.tooltip,.list,menu,.shape){block-size:2rem}.large-space:not(nav,.row,.grid,table,.tooltip,.list,menu,.shape){block-size:3rem}.extra-space:not(nav,.row,.grid,table,.tooltip,.list,menu,.shape){block-size:4rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){:is(.m,.l):not(.s){display:none!important}}@media only screen and (min-width: 601px) and (max-width: 992px){:is(.s,.l):not(.m){display:none!important}}@media only screen and (min-width: 993px){:is(.m,.s):not(.l){display:none!important}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}sub{vertical-align:sub}sup{vertical-align:super}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,nav.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):after,nav:is(.left,.right,.bottom,.top).max>a:after,nav:is(.left,.right,.bottom,.top).max>:is(ol,ul)>li>a:after,nav:is(.left,.right,.bottom,.top):not(.max)>a>i:after,nav:is(.left,.right,.bottom,.top):not(.max)>:is(ol,ul)>li>a>i:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none;pointer-events:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,nav.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after,nav:is(.left,.right,.bottom,.top).max>a:not(.button,.chip):is(:focus-visible,:hover):after,nav:is(.left,.right,.bottom,.top).max>:is(ol,ul)>li>a:not(.button,.chip):is(:focus-visible,:hover):after,nav:is(.left,.right,.bottom,.top):not(.max)>a:not(.button,.chip):is(:focus-visible,:hover)>i:after,nav:is(.left,.right,.bottom,.top):not(.max)>:is(ol,ul)>li>a:not(.button,.chip):is(:focus-visible,:hover)>i:after{background-size:22500%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,nav.toolbar>a,nav.max>a):not(.slow-ripple,.ripple,.fast-ripple):active:after,nav:is(.left,.right,.bottom,.top).max>a:active:after,nav:is(.left,.right,.bottom,.top).max>:is(ol,ul)>li>a:active:after,nav:is(.left,.right,.bottom,.top):not(.max)>a:active>i:after,nav:is(.left,.right,.bottom,.top):not(.max)>:is(ol,ul)>li>a:active>i:after{background-size:0%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.zoom,.tiny-zoom{zoom:2}.small-zoom{zoom:3}.medium-zoom{zoom:4}.large-zoom{zoom:5}.extra-zoom{zoom:6}.badge{--_x: 0;--_y: -100%;display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translate(var(--_x, 50%),var(--_y, -50%));font-family:var(--font)}.badge.top{--_y: -100%}.badge.bottom{--_y: 0}.badge.left{--_x: -100%}.badge.right{--_x: 0}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}header,footer{display:grid;align-content:center;border-radius:0;padding:0 1rem}:is(dialog,article)>:is(header,footer){padding-inline:0;top:0;right:0;bottom:0;left:0}header{min-block-size:4rem}footer{min-block-size:5rem}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}header.fixed{inset:calc(-1 * var(--_padding)) 0 0 0;margin-block-start:calc(-1 * var(--_padding))}footer.fixed{inset:0 0 calc(-1 * var(--_padding)) 0;margin-block-end:calc(-1 * var(--_padding))}:is(header,footer).fixed.min{margin-inline:auto}dialog>:is(header,footer){background:none}dialog>:is(header,footer).fixed{background-color:inherit}:is(main,header,footer,section).responsive{max-inline-size:min(100vw,75rem);margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:none}:has(>main)>:is(header,footer).fixed{transform:none;box-sizing:content-box;position:sticky;top:0;right:0;bottom:0;left:0;z-index:12}:has(>main)>header{padding-block-start:var(--top)}:has(>main)>footer{padding-block-end:var(--bottom)}nav.top~header,nav.bottom~footer{padding-block:0}nav.top~header.fixed{inset-block:calc(var(--top) + 4.5rem) 0}nav.bottom~footer.fixed{inset-block:0 calc(var(--bottom) + 4.5rem)}:is(nav,.row)>header{background-color:inherit}.button,button{--_padding: 1rem;--_size: 2.5rem;box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 var(--_padding);background-color:var(--primary);margin:0 .5rem;border-radius:var(--_size);transition:transform var(--speed3),border-radius var(--speed2),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal}:is(button,.button).small{--_size: 2rem;--_padding: .75rem}:is(button,.button).large{--_size: 3rem;--_padding: 1.25rem}:is(.button,button):is(.extra,.extend){--_size: 3.5rem;font-size:1rem;--_padding: 1.5rem}:is(button,.button):is(.square,.circle){--_padding: 0}:is(button,.button).border{border-color:var(--outline-variant);color:var(--primary)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;--_padding: 1.5rem;padding:0 var(--_padding)}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:var(--_padding)}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:calc(1rem + var(--_padding))}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button):not(.chip,.extend).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button):not(.chip,.extend).active{background-color:var(--primary-container);color:var(--on-primary-container)}:is(.button,button):not(.chip,.extend).fill.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}:is(.button,button):not(.chip,.extend).border.active{background-color:var(--inverse-surface)!important;color:var(--inverse-on-surface)!important;border-color:var(--inverse-surface)!important}:is(.button,button):not(.chip):active,:is(.button,button):not(.chip).active{border-radius:.5rem!important}article{--_padding: 1rem;box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:var(--_padding);border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}article.border{box-shadow:none;border:.0625rem solid var(--outline-variant)}.chip{--_padding: .75rem;--_size: 2rem;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);min-inline-size:var(--_size);font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 var(--_padding);margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal;letter-spacing:normal}.chip.medium{--_size: 2.5rem;--_padding: 1rem}.chip.large{--_padding: 1.25rem;--_size: 3rem}.chip.fill{border:none}dialog{--_padding: 1.5rem;--_top: calc(var(--_padding) + var(--top));--_bottom: calc(var(--_padding) + var(--bottom));display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:var(--_padding);z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog:is(.top,.right,.bottom,.left,.max){--_padding: 1rem}dialog:is(.top,.bottom){opacity:1;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%}dialog.top{inset:0 auto auto 0;transform:translateY(-100%);border-radius:0 0 1rem 1rem;padding-block-start:var(--_top)}dialog.bottom{inset:auto auto 0 0;transform:translateY(100%);border-radius:1rem 1rem 0 0;padding-block-end:var(--_bottom)}dialog:is(.left,.right){opacity:1;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;background-color:var(--surface);padding-block:var(--_top) var(--_bottom)}[dir=rtl] dialog.right,dialog.left{inset:0 auto auto 0;border-radius:0 1rem 1rem 0;transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{inset:0 0 auto auto;border-radius:1rem 0 0 1rem;transform:translate(100%)}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface);border-radius:0;padding-block:var(--_top) var(--_bottom)}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}@media (pointer: coarse){body:has(dialog[open],dialog.active){overflow:hidden}}hr,[class*=divider]{all:unset;inline-size:-webkit-fill-available;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}li:has(>hr),li:has(>.divider){padding:0!important;align-self:normal!important;min-inline-size:auto!important;min-block-size:auto!important;inline-size:-webkit-fill-available}hr.vertical,.divider.vertical,li:has(>hr.vertical),li:has(>.divider.vertical){padding:0!important;align-self:center!important;min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{--_size: 3rem;--_start: 1.2rem;block-size:var(--_size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0;max-block-size:12rem}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{--_size: 2.5rem;--_start: 1rem}.field.large{--_size: 3.5rem;--_start: 1.4rem}.field.extra{--_size: 4rem;--_start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):is(:-webkit-autofill,:autofill){-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden auto;position:absolute;top:0;right:0;bottom:0;left:0}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){--_size: 5rem}.field.textarea:not(.min){--_size: 5.5rem}.field.textarea.large:not(.min){--_size: 6rem}.field.textarea.extra:not(.min){--_size: 6.5rem}.field>select{-webkit-user-select:none;user-select:none}@-moz-document url-prefix(){.field>select:focus{background-color:var(--surface)}.field.fill>select:focus{background-color:var(--surface-variant)}.field>select:focus+label{z-index:1}}.field>select>option{background-color:var(--surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(--_start);white-space:pre-wrap;overflow-wrap:break-word}.field>textarea:focus{padding-block-start:calc(var(--_start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(--_start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(--_start) - .56rem)}.field.label>label{--_start: 1rem;position:absolute;inset:-.5rem 1rem 0 var(--_start);display:flex;block-size:calc(var(--_size) + 1rem);line-height:calc(var(--_size) + 1rem);font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}.field.label.round>label{inset:-.5rem 1.75rem 0 var(--_start)}.field.label.textarea:not(.min)>label{block-size:calc(var(--_size) - 1.5rem);line-height:calc(var(--_size) - 1.5rem)}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){--_start: 1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){--_start: 1.5rem}.field.label.prefix>label{--_start: 3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin:.5rem 0 0;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 1rem) .5rem,calc(100% - 1rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,1rem -2%,1rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 1.75rem) .5rem,calc(100% - 1.75rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.75rem -2%,1.75rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{--_gap: 1rem;display:grid;grid-template-columns:repeat(12,1fr);gap:var(--_gap);block-size:auto}.grid.no-space{--_gap: 0rem}.grid.medium-space{--_gap: 1.5rem}.grid.large-space{--_gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{--_size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(--_size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(--_size);min-inline-size:var(--_size);block-size:var(--_size);min-block-size:var(--_size);box-sizing:content-box;line-height:normal;border-radius:0}i:has(.badge){overflow:unset}i.tiny{--_size: 1rem}.chip>i,i.small{--_size: 1.25rem}i.medium{--_size: 1.5rem}i.large{--_size: 1.75rem}i.extra{--_size: 2rem}i.fill,a.active>i,button.active>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(--_size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}:has(>main){display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:auto auto 1fr auto auto;grid-template-areas:"left top right" "left header right" "left main right" "left footer right" "left bottom right";min-block-size:100dvh;box-sizing:border-box;background-color:var(--surface)}nav.left{grid-area:left}nav.right{grid-area:right}nav.top{grid-area:top}nav.bottom{grid-area:bottom}header{grid-area:header}footer{grid-area:footer}main{--_padding: .5rem;grid-area:main;padding:var(--_padding);overflow:hidden}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){--_size: 3rem;object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:var(--_size);inline-size:var(--_size)}:is(img,svg,video).round{--_round: .5rem}:is(img,svg,video).tiny{--_size: 2rem}:is(img,svg,video).small{--_size: 2.5rem}:is(img,svg,video).large{--_size: 3.5rem}:is(img,svg,video).extra{--_size: 4rem}:is(img,svg,video).responsive{--_size: 100%;margin:0 auto}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{--_round: 2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive),.tabs :is(img,svg):not(.responsive){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip):not(.extend)>.responsive:first-child{margin-inline-start:calc(-1 * var(--_padding))}:is(button,.button,.chip):not(.extend)>.responsive:not(:first-child){margin-inline-end:calc(-1 * var(--_padding))}:is(button,.button,.chip,.circle,.square,.extend)>.responsive{--_size: inherit;margin:0 auto}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color;justify-content:flex-start;padding:.5rem 0}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:inherit;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important;padding:0}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top,menu.top.right{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important;border-radius:0}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){--_child: 1;--_type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(--_child) - var(--_type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(--_child) - var(--_type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu.transparent{margin:0 -1rem!important;padding:.5rem}menu.transparent>li{background-color:inherit;box-shadow:none;padding:0}menu>li:nth-last-child(2){--_child: 2}menu>li:nth-last-child(3){--_child: 3}menu>li:nth-last-child(4){--_child: 4}menu>li:nth-last-child(5){--_child: 5}menu>li:nth-last-child(6){--_child: 6}menu>li:nth-last-child(7){--_child: 7}menu>li:nth-last-child(8){--_child: 8}menu>li:nth-last-child(9){--_child: 9}menu>li:nth-last-child(10){--_child: 10}menu>li:nth-last-child(11){--_child: 11}menu>li:nth-last-of-type(2){--_type: 1}menu>li:nth-last-of-type(3){--_type: 2}menu>li:nth-last-of-type(4){--_type: 3}menu>li:nth-last-of-type(5){--_type: 4}menu>li:nth-last-of-type(6){--_type: 5}menu>li:nth-last-of-type(7){--_type: 6}menu>li:nth-last-of-type(8){--_type: 7}menu>li:nth-last-of-type(9){--_type: 8}menu>li:nth-last-of-type(10){--_type: 9}menu>li:nth-last-of-type(11){--_type: 10}@media (pointer: coarse){:not(menu,[data-ui]):hover>menu{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}:not(menu,[data-ui]):hover>menu.top{transform:scale(1) translateY(-100%)}}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row{display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;border-radius:0;min-inline-size:0}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol,header,footer){margin:0;white-space:normal;flex:none}:is(nav,.row).min{display:inline-flex}:is(nav,.row,li).no-space{gap:0}:is(nav,.row,li).tiny-space{gap:.5rem}:is(nav,.row,li).medium-space{gap:1.5rem}:is(nav,.row,li).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}nav:is(.left,.right,.top,.bottom){--_padding: .5rem;--_top: calc(var(--_padding) + var(--top));--_bottom: calc(var(--_padding) + var(--bottom));position:sticky;top:0;right:0;bottom:0;left:0;border:0;color:var(--on-surface);transform:none;z-index:100;text-align:center;padding:var(--_padding);margin:0}nav:is(.left,.right){justify-content:flex-start;flex-direction:column;background-color:var(--surface);block-size:100dvh;min-inline-size:6rem;padding-block:var(--_top) var(--_bottom)}nav:is(.top,.bottom){position:sticky;top:0;right:0;bottom:0;left:0;padding:.5rem;justify-content:center;flex-direction:row;background-color:var(--surface-container);block-size:auto;min-block-size:4.5rem}nav.top{block-size:calc(var(--top) + 4.5rem);padding-block-start:var(--_top)}nav.bottom{block-size:calc(var(--bottom) + 4.5rem);padding-block-end:var(--_bottom)}nav>header{min-block-size:auto;padding:0;margin:0 0 1rem;align-items:flex-start;gap:1rem;background:none!important}nav:is(.top,.bottom)>header{flex-direction:row;align-items:center;margin:0 1rem 0 0}nav>header>*{margin:0}nav>header>.extend:hover{--_padding: 0;inline-size:var(--_size)}nav>header>.extend:hover>span{display:none}nav>:is(ol,ul){all:inherit;min-inline-size:auto;margin:0;padding:0;flex:auto}nav.max:is(.left,.right,.top,.bottom){gap:0;inline-size:auto;align-items:flex-start;min-inline-size:12.75rem;padding:var(--_top) 1.25rem var(--_bottom) 1.25rem}nav.max>:is(ol,ul){padding:0}nav.max>header{margin:0 0 1.25rem}nav.max:is(.top,.bottom)>header{margin:0 1.25rem 0 0}nav.max>header>.extend{--_padding: 1.5rem;inline-size:auto;padding:0 var(--_padding)}nav.max>header>.extend>span{display:block;margin-inline-start:var(--_padding)}nav.max>header>.extend>:is(img,svg)+span{margin-inline-start:calc(1rem + var(--_padding))}nav.max:is(.top,.bottom){padding:0 .5rem;align-items:center;min-inline-size:auto;max-inline-size:none}nav:is(.left,.right,.top,.bottom)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a:not(.button,.chip){display:flex;flex-direction:column;gap:.25rem;line-height:normal;inline-size:3.5rem;font-size:.8rem}nav:not(.max):is(.left,.right,.top,.bottom)>a:not(.button,.chip)>i,nav:not(.max):is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem 1rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav.max:is(.left,.right,.top,.bottom)>a:not(.button,.chip),nav.max:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a:not(.button,.chip){flex-direction:row;gap:.5rem;inline-size:auto;block-size:3.5rem;padding:0 1rem;border-radius:2rem;font-size:inherit}nav.max:is(.top,.bottom)>a:not(.button,.chip),nav.max:is(.top,.bottom)>:is(ol,ul)>li>a:not(.button,.chip){gap:.25rem;block-size:2.5rem;font-size:.8rem}nav.max:is(.left,.right,.top,.bottom)>a.active:not(.button,.chip),nav.max:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a.active:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.max)>a.active:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.max)>:is(ol,ul)>li>a.active:not(.button,.chip)>i{background-color:var(--secondary-container);color:var(--on-secondary-container)}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}nav.toolbar{display:inline-flex;justify-content:space-around;border-radius:2rem;background-color:var(--surface-container);color:var(--on-surface);padding:0 1rem;gap:.5rem;min-block-size:4rem;min-inline-size:4rem}nav.toolbar>a{display:inline-flex;gap:.5rem;min-inline-size:2.5rem;min-block-size:2.5rem;border-radius:1.75rem}nav.toolbar>a:has(>:not(i)){padding:0 1rem}nav.toolbar>a.active{background-color:var(--secondary-container);color:var(--on-secondary-container)}nav.toolbar.fill{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.toolbar.fill>a.active{background-color:var(--surface-container)!important;color:var(--on-surface)!important}nav.toolbar.vertical{flex-direction:column!important;min-inline-size:4rem;padding:1rem 0;align-self:center;align-items:center!important}nav.toolbar.vertical>a{inline-size:2.5rem;block-size:2.5rem}nav.toolbar.vertical>a>:is(div,span):not(.badge,.tooltip){display:none}nav.toolbar.max{border-radius:0;display:flex}nav.group{background:none!important}nav.group:is(.connected,.split){gap:.125rem}nav.group:not(.split)>:is(.button,button):not(.border){background-color:var(--surface-container);color:var(--on-surface-container)}nav.group:not(.split)>:is(.button,button).active{background-color:var(--primary);color:var(--on-primary)}nav.group.connected>:is(.button,button):not(.border){background-color:var(--surface-container);color:var(--on-surface-container)}nav.group.connected>:is(.button,button).active{background-color:var(--secondary-container);color:var(--on-secondary-container)}nav.group:is(.connected,.split)>:is(.button,button).active,nav.split>:is(.button,button):active{border-radius:2rem!important}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}nav.split>:is(.button,button):not(.chip,.fill,.border){background-color:var(--primary);color:var(--on-primary)}nav.group.primary-container>button,nav:is(.max,.toolbar,.tabbed,.group).primary>:is(button,a).active,nav:not(.max,.toolbar,.tabbed,.group).primary>a.active:not(.button,.chip)>i{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.group.primary>button,nav:is(.max,.toolbar,.tabbed,.group).primary-container>:is(button,a).active,nav:not(.max,.toolbar,.tabbed,.group).primary-container>a.active:not(.button,.chip)>i{background-color:var(--primary)!important;color:var(--on-primary)!important}nav.group.secondary-container>button,nav:is(.max,.toolbar,.tabbed,.group).secondary>:is(button,a).active,nav:not(.max,.toolbar,.tabbed,.group).secondary>a.active:not(.button,.chip)>i{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}nav.group.secondary>button,nav:is(.max,.toolbar,.tabbed,.group).secondary-container>:is(button,a).active,nav:not(.max,.toolbar,.tabbed,.group).secondary-container>a.active:not(.button,.chip)>i{background-color:var(--secondary)!important;color:var(--on-secondary)!important}nav.group.tertiary-container>button,nav:is(.max,.toolbar,.tabbed,.group).tertiary>:is(button,a).active,nav:not(.max,.toolbar,.tabbed,.group).tertiary>a.active:not(.button,.chip)>i{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}nav.group.tertiary>button,nav:is(.max,.toolbar,.tabbed,.group).tertiary-container>:is(button,a).active,nav:not(.max,.toolbar,.tabbed,.group).tertiary-container>a.active:not(.button,.chip)>i{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color;border-radius:0}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{--_transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{--_transform: translate(0, -4rem)}.page.active.bottom{--_transform: translate(0, 4rem)}.page.active.left{--_transform: translate(-4rem, 0)}.page.active.right{--_transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(--_transform)}to{opacity:1;transform:translate(0)}}progress{--_light: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR4AWJiYGAQBgAAAP//ZyYa+wAAAAZJREFUAwAAIgAWeX9MsQAAAABJRU5ErkJggg==);--_dark: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR4AWL6//+/FAAAAP//qSv5QwAAAAZJREFUAwAJIAMaJWjIvQAAAABJRU5ErkJggg==);--_size: .25rem;position:relative;inline-size:100%;block-size:var(--_size);color:var(--primary);background:var(--_light);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}.dark progress{background:var(--_dark)}progress.small{--_size: .25rem}progress.medium{--_size: .35rem}progress.large{--_size: .45rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:3.2s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:3.2s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:3.2s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentColor}progress::-moz-progress-bar{background:currentColor}progress.wavy{block-size:calc(var(--_size) * 2);background:none;background-image:var(--_light);background-repeat:repeat-x;background-position:0 50%;background-size:auto calc(var(--_size) / 2)}.dark progress.wavy{background-image:var(--_dark)}progress.wavy::-webkit-progress-value,progress.wavy:not(.circle,[value]):after{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='610%201101%201220%2075'%3e%3cpath%20fill='%23D0BCFF'%20d='M1870.425,1173.746c-29.448,0-58.665-7.477-84.493-21.622c-0.03-0.016-0.061-0.032-0.09-0.049%20c-43.555-23.82-95.546-23.809-139.091,0.039c-0.037,0.021-0.075,0.042-0.113,0.062c-25.803,14.109-54.984,21.567-84.394,21.568%20c-29.449,0-58.667-7.478-84.495-21.623c-43.554-23.852-95.539-23.865-139.089-0.052c-0.03,0.018-0.062,0.034-0.092,0.051%20c-25.83,14.146-55.048,21.623-84.497,21.623c-29.423,0-58.613-7.463-84.425-21.584c-0.025-0.014-0.052-0.028-0.077-0.042%20c-43.572-23.863-95.596-23.862-139.164-0.001c-0.028,0.016-0.057,0.031-0.085,0.046c-25.809,14.117-55.001,21.581-84.418,21.581%20c-0.002,0,0,0-0.001,0c-29.45-0.001-58.669-7.479-84.498-21.625c-43.534-23.845-95.513-23.863-139.063-0.058%20c-0.036,0.021-0.072,0.04-0.108,0.06c-25.829,14.146-55.047,21.623-84.496,21.623c-29.398,0-58.566-7.451-84.362-21.551%20c-0.048-0.024-0.095-0.05-0.142-0.075c-43.568-23.863-95.593-23.863-139.163,0c-0.027,0.015-0.054,0.028-0.081,0.043%20c-25.811,14.12-55.001,21.583-84.421,21.583c-29.45,0-58.668-7.478-84.497-21.624c-7.521-4.118-10.278-13.554-6.159-21.074%20s13.554-10.277,21.074-6.158c43.57,23.862,95.593,23.864,139.163,0c0.033-0.018,0.065-0.035,0.098-0.053%20c25.807-14.114,54.991-21.573,84.406-21.573c29.398,0,58.567,7.451,84.364,21.55c0.047,0.025,0.093,0.051,0.14,0.076%20c43.534,23.843,95.508,23.864,139.056,0.059c0.038-0.021,0.075-0.042,0.113-0.063c25.828-14.145,55.049-21.622,84.496-21.622%20c0.002,0,0,0,0.002,0c29.449,0,58.668,7.478,84.497,21.625c43.57,23.863,95.595,23.862,139.165,0.001%20c0.021-0.013,0.043-0.024,0.065-0.036c25.813-14.124,55.011-21.591,84.438-21.591c29.42,0,58.61,7.463,84.421,21.582%20c0.027,0.015,0.055,0.03,0.082,0.045c43.539,23.847,95.521,23.862,139.074,0.049c0.032-0.018,0.064-0.035,0.096-0.053%20c25.829-14.146,55.047-21.623,84.496-21.623s58.667,7.477,84.496,21.623c43.58,23.867,95.604,23.866,139.172,0.005%20c0.039-0.021,0.079-0.043,0.118-0.064c25.803-14.108,54.98-21.564,84.389-21.564c29.448-0.001,58.666,7.476,84.494,21.62%20c0.038,0.021,0.076,0.042,0.114,0.063c43.549,23.807,95.528,23.791,139.063-0.051c7.52-4.121,16.955-1.361,21.073,6.159%20c4.119,7.521,1.361,16.955-6.159,21.073C1929.089,1166.27,1899.872,1173.746,1870.425,1173.746z'%3e%3canimateTransform%20attributeName='transform'%20type='translate'%20from='0%200'%20to='312.5%200'%20dur='1s'%20calcMode='linear'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='610%201101%201220%2075'%3e%3cpath%20fill='%23D0BCFF'%20d='M1870.425,1173.746c-29.448,0-58.665-7.477-84.493-21.622c-0.03-0.016-0.061-0.032-0.09-0.049%20c-43.555-23.82-95.546-23.809-139.091,0.039c-0.037,0.021-0.075,0.042-0.113,0.062c-25.803,14.109-54.984,21.567-84.394,21.568%20c-29.449,0-58.667-7.478-84.495-21.623c-43.554-23.852-95.539-23.865-139.089-0.052c-0.03,0.018-0.062,0.034-0.092,0.051%20c-25.83,14.146-55.048,21.623-84.497,21.623c-29.423,0-58.613-7.463-84.425-21.584c-0.025-0.014-0.052-0.028-0.077-0.042%20c-43.572-23.863-95.596-23.862-139.164-0.001c-0.028,0.016-0.057,0.031-0.085,0.046c-25.809,14.117-55.001,21.581-84.418,21.581%20c-0.002,0,0,0-0.001,0c-29.45-0.001-58.669-7.479-84.498-21.625c-43.534-23.845-95.513-23.863-139.063-0.058%20c-0.036,0.021-0.072,0.04-0.108,0.06c-25.829,14.146-55.047,21.623-84.496,21.623c-29.398,0-58.566-7.451-84.362-21.551%20c-0.048-0.024-0.095-0.05-0.142-0.075c-43.568-23.863-95.593-23.863-139.163,0c-0.027,0.015-0.054,0.028-0.081,0.043%20c-25.811,14.12-55.001,21.583-84.421,21.583c-29.45,0-58.668-7.478-84.497-21.624c-7.521-4.118-10.278-13.554-6.159-21.074%20s13.554-10.277,21.074-6.158c43.57,23.862,95.593,23.864,139.163,0c0.033-0.018,0.065-0.035,0.098-0.053%20c25.807-14.114,54.991-21.573,84.406-21.573c29.398,0,58.567,7.451,84.364,21.55c0.047,0.025,0.093,0.051,0.14,0.076%20c43.534,23.843,95.508,23.864,139.056,0.059c0.038-0.021,0.075-0.042,0.113-0.063c25.828-14.145,55.049-21.622,84.496-21.622%20c0.002,0,0,0,0.002,0c29.449,0,58.668,7.478,84.497,21.625c43.57,23.863,95.595,23.862,139.165,0.001%20c0.021-0.013,0.043-0.024,0.065-0.036c25.813-14.124,55.011-21.591,84.438-21.591c29.42,0,58.61,7.463,84.421,21.582%20c0.027,0.015,0.055,0.03,0.082,0.045c43.539,23.847,95.521,23.862,139.074,0.049c0.032-0.018,0.064-0.035,0.096-0.053%20c25.829-14.146,55.047-21.623,84.496-21.623s58.667,7.477,84.496,21.623c43.58,23.867,95.604,23.866,139.172,0.005%20c0.039-0.021,0.079-0.043,0.118-0.064c25.803-14.108,54.98-21.564,84.389-21.564c29.448-0.001,58.666,7.476,84.494,21.62%20c0.038,0.021,0.076,0.042,0.114,0.063c43.549,23.807,95.528,23.791,139.063-0.051c7.52-4.121,16.955-1.361,21.073,6.159%20c4.119,7.521,1.361,16.955-6.159,21.073C1929.089,1166.27,1899.872,1173.746,1870.425,1173.746z'%3e%3canimateTransform%20attributeName='transform'%20type='translate'%20from='0%200'%20to='312.5%200'%20dur='1s'%20calcMode='linear'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c/svg%3e");-webkit-mask-position:0 50%;mask-position:0 50%;-webkit-mask-repeat:repeat-x;mask-repeat:repeat-x;-webkit-mask-size:auto 100%;mask-size:auto 100%}progress.wavy::-moz-progress-bar{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='610%201101%201220%2075'%3e%3cpath%20fill='%23D0BCFF'%20d='M1870.425,1173.746c-29.448,0-58.665-7.477-84.493-21.622c-0.03-0.016-0.061-0.032-0.09-0.049%20c-43.555-23.82-95.546-23.809-139.091,0.039c-0.037,0.021-0.075,0.042-0.113,0.062c-25.803,14.109-54.984,21.567-84.394,21.568%20c-29.449,0-58.667-7.478-84.495-21.623c-43.554-23.852-95.539-23.865-139.089-0.052c-0.03,0.018-0.062,0.034-0.092,0.051%20c-25.83,14.146-55.048,21.623-84.497,21.623c-29.423,0-58.613-7.463-84.425-21.584c-0.025-0.014-0.052-0.028-0.077-0.042%20c-43.572-23.863-95.596-23.862-139.164-0.001c-0.028,0.016-0.057,0.031-0.085,0.046c-25.809,14.117-55.001,21.581-84.418,21.581%20c-0.002,0,0,0-0.001,0c-29.45-0.001-58.669-7.479-84.498-21.625c-43.534-23.845-95.513-23.863-139.063-0.058%20c-0.036,0.021-0.072,0.04-0.108,0.06c-25.829,14.146-55.047,21.623-84.496,21.623c-29.398,0-58.566-7.451-84.362-21.551%20c-0.048-0.024-0.095-0.05-0.142-0.075c-43.568-23.863-95.593-23.863-139.163,0c-0.027,0.015-0.054,0.028-0.081,0.043%20c-25.811,14.12-55.001,21.583-84.421,21.583c-29.45,0-58.668-7.478-84.497-21.624c-7.521-4.118-10.278-13.554-6.159-21.074%20s13.554-10.277,21.074-6.158c43.57,23.862,95.593,23.864,139.163,0c0.033-0.018,0.065-0.035,0.098-0.053%20c25.807-14.114,54.991-21.573,84.406-21.573c29.398,0,58.567,7.451,84.364,21.55c0.047,0.025,0.093,0.051,0.14,0.076%20c43.534,23.843,95.508,23.864,139.056,0.059c0.038-0.021,0.075-0.042,0.113-0.063c25.828-14.145,55.049-21.622,84.496-21.622%20c0.002,0,0,0,0.002,0c29.449,0,58.668,7.478,84.497,21.625c43.57,23.863,95.595,23.862,139.165,0.001%20c0.021-0.013,0.043-0.024,0.065-0.036c25.813-14.124,55.011-21.591,84.438-21.591c29.42,0,58.61,7.463,84.421,21.582%20c0.027,0.015,0.055,0.03,0.082,0.045c43.539,23.847,95.521,23.862,139.074,0.049c0.032-0.018,0.064-0.035,0.096-0.053%20c25.829-14.146,55.047-21.623,84.496-21.623s58.667,7.477,84.496,21.623c43.58,23.867,95.604,23.866,139.172,0.005%20c0.039-0.021,0.079-0.043,0.118-0.064c25.803-14.108,54.98-21.564,84.389-21.564c29.448-0.001,58.666,7.476,84.494,21.62%20c0.038,0.021,0.076,0.042,0.114,0.063c43.549,23.807,95.528,23.791,139.063-0.051c7.52-4.121,16.955-1.361,21.073,6.159%20c4.119,7.521,1.361,16.955-6.159,21.073C1929.089,1166.27,1899.872,1173.746,1870.425,1173.746z'%3e%3canimateTransform%20attributeName='transform'%20type='translate'%20from='0%200'%20to='312.5%200'%20dur='1s'%20calcMode='linear'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='610%201101%201220%2075'%3e%3cpath%20fill='%23D0BCFF'%20d='M1870.425,1173.746c-29.448,0-58.665-7.477-84.493-21.622c-0.03-0.016-0.061-0.032-0.09-0.049%20c-43.555-23.82-95.546-23.809-139.091,0.039c-0.037,0.021-0.075,0.042-0.113,0.062c-25.803,14.109-54.984,21.567-84.394,21.568%20c-29.449,0-58.667-7.478-84.495-21.623c-43.554-23.852-95.539-23.865-139.089-0.052c-0.03,0.018-0.062,0.034-0.092,0.051%20c-25.83,14.146-55.048,21.623-84.497,21.623c-29.423,0-58.613-7.463-84.425-21.584c-0.025-0.014-0.052-0.028-0.077-0.042%20c-43.572-23.863-95.596-23.862-139.164-0.001c-0.028,0.016-0.057,0.031-0.085,0.046c-25.809,14.117-55.001,21.581-84.418,21.581%20c-0.002,0,0,0-0.001,0c-29.45-0.001-58.669-7.479-84.498-21.625c-43.534-23.845-95.513-23.863-139.063-0.058%20c-0.036,0.021-0.072,0.04-0.108,0.06c-25.829,14.146-55.047,21.623-84.496,21.623c-29.398,0-58.566-7.451-84.362-21.551%20c-0.048-0.024-0.095-0.05-0.142-0.075c-43.568-23.863-95.593-23.863-139.163,0c-0.027,0.015-0.054,0.028-0.081,0.043%20c-25.811,14.12-55.001,21.583-84.421,21.583c-29.45,0-58.668-7.478-84.497-21.624c-7.521-4.118-10.278-13.554-6.159-21.074%20s13.554-10.277,21.074-6.158c43.57,23.862,95.593,23.864,139.163,0c0.033-0.018,0.065-0.035,0.098-0.053%20c25.807-14.114,54.991-21.573,84.406-21.573c29.398,0,58.567,7.451,84.364,21.55c0.047,0.025,0.093,0.051,0.14,0.076%20c43.534,23.843,95.508,23.864,139.056,0.059c0.038-0.021,0.075-0.042,0.113-0.063c25.828-14.145,55.049-21.622,84.496-21.622%20c0.002,0,0,0,0.002,0c29.449,0,58.668,7.478,84.497,21.625c43.57,23.863,95.595,23.862,139.165,0.001%20c0.021-0.013,0.043-0.024,0.065-0.036c25.813-14.124,55.011-21.591,84.438-21.591c29.42,0,58.61,7.463,84.421,21.582%20c0.027,0.015,0.055,0.03,0.082,0.045c43.539,23.847,95.521,23.862,139.074,0.049c0.032-0.018,0.064-0.035,0.096-0.053%20c25.829-14.146,55.047-21.623,84.496-21.623s58.667,7.477,84.496,21.623c43.58,23.867,95.604,23.866,139.172,0.005%20c0.039-0.021,0.079-0.043,0.118-0.064c25.803-14.108,54.98-21.564,84.389-21.564c29.448-0.001,58.666,7.476,84.494,21.62%20c0.038,0.021,0.076,0.042,0.114,0.063c43.549,23.807,95.528,23.791,139.063-0.051c7.52-4.121,16.955-1.361,21.073,6.159%20c4.119,7.521,1.361,16.955-6.159,21.073C1929.089,1166.27,1899.872,1173.746,1870.425,1173.746z'%3e%3canimateTransform%20attributeName='transform'%20type='translate'%20from='0%200'%20to='312.5%200'%20dur='1s'%20calcMode='linear'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c/svg%3e");-webkit-mask-position:0 50%;mask-position:0 50%;-webkit-mask-repeat:repeat-x;mask-repeat:repeat-x;-webkit-mask-size:auto 100%;mask-size:auto 100%}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:currentColor;background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb;opacity:.33}progress.max[class*=-text]{opacity:1}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:-100%}50%{margin-inline-start:0%}to{margin-inline-start:100%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.shape{display:flex;align-items:center;justify-content:center;color:var(--on-primary);background-color:var(--primary);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:contain;mask-size:contain;border-radius:0;block-size:3.5rem;inline-size:3.5rem;margin:0!important;padding:0!important;border:0!important}.transparent>.shape>i{filter:invert(1)}.shape.tiny-space{-webkit-mask-size:90%;mask-size:90%}.shape.space,.shape.small-space{-webkit-mask-size:80%;mask-size:80%}.shape.medium-space{-webkit-mask-size:70%;mask-size:70%}.shape.large-space{-webkit-mask-size:60%;mask-size:60%}.shape.extra-space{-webkit-mask-size:50%;mask-size:50%}.shape.tiny{block-size:2.5rem;inline-size:2.5rem}.shape.medium{block-size:4.5rem;inline-size:4.5rem}.shape.large{block-size:5.5rem;inline-size:5.5rem}.shape.extra{block-size:6.5rem;inline-size:6.5rem}.shape.max,.shape>.responsive,.shape>.responsive>.responsive{position:absolute;top:0;right:0;bottom:0;left:0;block-size:100%;inline-size:100%;margin:0!important;padding:0!important;border:0!important}.shape>.responsive{background:inherit;color:inherit}.shape.rotate{animation:linear to-shape-rotate infinite 12s}.shape.rotate>*{animation:linear to-shape-rotate infinite 12s reverse}.shape.fast-rotate{animation:linear to-shape-rotate infinite 6s}.shape.fast-rotate>*{animation:linear to-shape-rotate infinite 6s reverse}.shape.slow-rotate{animation:linear to-shape-rotate infinite 24s}.shape.slow-rotate>*{animation:linear to-shape-rotate infinite 24s reverse}:is(button,.button,.chip):has(>.shape)>.responsive{border:none}.shape.arch{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='304'%20height='304'%20viewBox='0%200%20304%20304'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M304%20253.72C304%20259.83%20304%20262.89%20303.69%20265.46C301.31%20285.51%20285.51%20301.31%20265.46%20303.69C262.89%20304%20259.83%20304%20253.72%20304H50.281C44.169%20304%2041.113%20304%2038.544%20303.69C18.495%20301.31%202.68799%20285.51%200.304993%20265.46C-7.33137e-06%20262.89%200%20259.83%200%20253.72V152C0%2068.05%2068.053%200%20152%200C235.95%200%20304%2068.05%20304%20152V253.72Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='304'%20height='304'%20viewBox='0%200%20304%20304'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M304%20253.72C304%20259.83%20304%20262.89%20303.69%20265.46C301.31%20285.51%20285.51%20301.31%20265.46%20303.69C262.89%20304%20259.83%20304%20253.72%20304H50.281C44.169%20304%2041.113%20304%2038.544%20303.69C18.495%20301.31%202.68799%20285.51%200.304993%20265.46C-7.33137e-06%20262.89%200%20259.83%200%20253.72V152C0%2068.05%2068.053%200%20152%200C235.95%200%20304%2068.05%20304%20152V253.72Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.arrow{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='316'%20height='278'%20viewBox='0%200%20316%20278'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M271.57%20122.2C257.552%20100.62%20243.535%2079.01%20229.517%2057.43C220.423%2043.42%20211.167%2029.2202%20198.872%2018.0902C186.576%206.94018%20170.648%20-0.939823%20154.316%200.0901773C139.976%201.01018%20126.684%208.72013%20116.191%2018.7901C105.698%2028.8601%2097.546%2041.2601%2089.528%2053.5401C67.842%2086.7201%2046.13%20119.9%2024.444%20153.1C14.139%20168.86%203.56499%20185.31%200.712987%20204.09C-2.73101%20226.78%206.55198%20249.89%2023.018%20264.98C40.237%20280.76%2068.138%20279.48%2089.098%20275.16C112.075%20270.41%20134.541%20261.48%20157.975%20261.51C178.047%20261.51%20197.446%20268.11%20216.979%20272.91C236.485%20277.68%20257.445%20280.62%20276.279%20273.52C299.659%20264.73%20316.448%20239.73%20315.991%20214.07C315.56%20190.66%20302.457%20169.75%20289.839%20150.27C283.758%20140.92%20277.678%20131.55%20271.597%20122.2H271.57Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='316'%20height='278'%20viewBox='0%200%20316%20278'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M271.57%20122.2C257.552%20100.62%20243.535%2079.01%20229.517%2057.43C220.423%2043.42%20211.167%2029.2202%20198.872%2018.0902C186.576%206.94018%20170.648%20-0.939823%20154.316%200.0901773C139.976%201.01018%20126.684%208.72013%20116.191%2018.7901C105.698%2028.8601%2097.546%2041.2601%2089.528%2053.5401C67.842%2086.7201%2046.13%20119.9%2024.444%20153.1C14.139%20168.86%203.56499%20185.31%200.712987%20204.09C-2.73101%20226.78%206.55198%20249.89%2023.018%20264.98C40.237%20280.76%2068.138%20279.48%2089.098%20275.16C112.075%20270.41%20134.541%20261.48%20157.975%20261.51C178.047%20261.51%20197.446%20268.11%20216.979%20272.91C236.485%20277.68%20257.445%20280.62%20276.279%20273.52C299.659%20264.73%20316.448%20239.73%20315.991%20214.07C315.56%20190.66%20302.457%20169.75%20289.839%20150.27C283.758%20140.92%20277.678%20131.55%20271.597%20122.2H271.57Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.boom{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M156.818%2010.1599C157.571%204.13988%20157.948%201.13006%20158.52%200.590059C159.353%20-0.199941%20160.647%20-0.199941%20161.48%200.590059C162.052%201.13006%20162.429%204.13988%20163.182%2010.1599L172.76%2086.74C173.064%2089.17%20173.216%2090.3799%20173.652%2090.8899C174.285%2091.6099%20175.32%2091.8399%20176.193%2091.4299C176.794%2091.1499%20177.425%2090.1%20178.686%2088L218.415%2021.9599C221.539%2016.7699%20223.101%2014.1699%20223.842%2013.9099C224.92%2013.5399%20226.102%2014.0699%20226.546%2015.1299C226.851%2015.8499%20225.977%2018.76%20224.229%2024.57L201.999%2098.4399C201.293%20100.79%20200.941%20101.96%20201.136%20102.59C201.42%20103.52%20202.276%20104.14%20203.238%20104.13C203.901%20104.12%20204.901%20103.42%20206.901%20102.02L269.911%2057.9399C274.867%2054.4699%20277.344%2052.74%20278.125%2052.8C279.261%2052.9%20280.127%2053.87%20280.105%2055.01C280.091%2055.8%20278.117%2058.0999%20274.17%2062.6899L223.976%20121.09C222.383%20122.94%20221.587%20123.87%20221.508%20124.53C221.393%20125.49%20221.922%20126.41%20222.807%20126.79C223.416%20127.06%20224.613%20126.82%20227.006%20126.36L302.403%20111.86C308.332%20110.72%20311.297%20110.15%20311.983%20110.53C312.981%20111.08%20313.381%20112.32%20312.898%20113.36C312.566%20114.07%20309.834%20115.36%20304.37%20117.94L234.892%20150.77C232.686%20151.81%20231.584%20152.33%20231.244%20152.9C230.751%20153.73%20230.862%20154.79%20231.516%20155.5C231.966%20155.99%20233.152%20156.27%20235.525%20156.82L310.272%20174.41C316.15%20175.79%20319.09%20176.48%20319.562%20177.11C320.249%20178.02%20320.114%20179.32%20319.253%20180.07C318.66%20180.58%20315.643%20180.65%20309.607%20180.77L232.857%20182.34C230.421%20182.39%20229.203%20182.42%20228.662%20182.8C227.875%20183.36%20227.548%20184.37%20227.859%20185.29C228.073%20185.92%20229.043%20186.66%20230.985%20188.14L292.158%20234.76C296.968%20238.43%20299.374%20240.27%20299.551%20241.03C299.809%20242.15%20299.162%20243.28%20298.071%20243.61C297.322%20243.84%20294.54%20242.66%20288.975%20240.31L218.226%20210.36C215.98%20209.41%20214.857%20208.93%20214.207%20209.06C213.263%20209.25%20212.555%20210.04%20212.468%20211C212.409%20211.66%20212.996%20212.74%20214.171%20214.88L251.192%20282.5C254.103%20287.81%20255.559%20290.47%20255.411%20291.25C255.194%20292.37%20254.148%20293.14%20253.016%20293C252.238%20292.9%20250.173%20290.69%20246.043%20286.26L193.526%20229.96C191.859%20228.18%20191.025%20227.28%20190.38%20227.14C189.441%20226.92%20188.475%20227.35%20188.006%20228.2C187.683%20228.78%20187.786%20230%20187.991%20232.44L194.458%20309.35C194.967%20315.4%20195.221%20318.42%20194.773%20319.07C194.12%20320.01%20192.854%20320.28%20191.878%20319.69C191.206%20319.28%20190.215%20316.41%20188.233%20310.68L163.029%20237.78C162.229%20235.46%20161.829%20234.31%20161.299%20233.91C160.529%20233.33%20159.471%20233.33%20158.701%20233.91C158.171%20234.31%20157.771%20235.46%20156.971%20237.78L131.767%20310.68C129.785%20316.41%20128.794%20319.28%20128.122%20319.69C127.146%20320.28%20125.88%20320.01%20125.227%20319.07C124.779%20318.42%20125.033%20315.4%20125.542%20309.35L132.009%20232.44C132.214%20230%20132.317%20228.78%20131.994%20228.2C131.525%20227.35%20130.559%20226.92%20129.621%20227.14C128.975%20227.28%20128.141%20228.18%20126.474%20229.96L73.9568%20286.26C69.8267%20290.69%2067.7616%20292.9%2066.984%20293C65.8524%20293.14%2064.8055%20292.37%2064.5894%20291.25C64.4409%20290.47%2065.8966%20287.81%2068.808%20282.5L105.829%20214.88C107.004%20212.74%20107.591%20211.66%20107.532%20211C107.445%20210.04%20106.737%20209.25%20105.793%20209.06C105.143%20208.93%20104.02%20209.41%20101.774%20210.36L31.0245%20240.31C25.4605%20242.66%2022.6785%20243.84%2021.9288%20243.61C20.838%20243.28%2020.191%20242.15%2020.4489%20241.03C20.6262%20240.27%2023.0316%20238.43%2027.8424%20234.76L89.0148%20188.14C90.957%20186.66%2091.927%20185.92%2092.141%20185.29C92.452%20184.37%2092.125%20183.36%2091.338%20182.8C90.797%20182.42%2089.5787%20182.39%2087.1425%20182.34L10.3933%20180.77C4.35749%20180.65%201.3395%20180.58%200.747495%20180.07C-0.114065%20179.32%20-0.249315%20178.02%200.438095%20177.11C0.910495%20176.48%203.84969%20175.79%209.72809%20174.41L84.475%20156.82C86.8477%20156.27%2088.034%20155.99%2088.4844%20155.5C89.1385%20154.79%2089.2491%20153.73%2088.756%20152.9C88.4164%20152.33%2087.3137%20151.81%2085.1083%20150.77L15.6304%20117.94C10.1664%20115.36%207.4344%20114.07%207.1023%20113.36C6.6191%20112.32%207.01889%20111.08%208.01699%20110.53C8.70279%20110.15%2011.6676%20110.72%2017.5971%20111.86L92.994%20126.36C95.387%20126.82%2096.584%20127.06%2097.193%20126.79C98.078%20126.41%2098.607%20125.49%2098.492%20124.53C98.414%20123.87%2097.617%20122.94%2096.024%20121.09L45.8303%2062.6899C41.8829%2058.0999%2039.9092%2055.8%2039.8946%2055.01C39.8732%2053.87%2040.739%2052.9%2041.8751%2052.8C42.6558%2052.74%2045.1335%2054.4699%2050.0889%2057.9399L113.099%20102.02C115.099%20103.42%20116.099%20104.12%20116.762%20104.13C117.724%20104.14%20118.58%20103.52%20118.864%20102.59C119.059%20101.96%20118.707%20100.79%20118.001%2098.4399L95.771%2024.57C94.023%2018.76%2093.149%2015.8499%2093.454%2015.1299C93.898%2014.0699%2095.08%2013.5399%2096.158%2013.9099C96.899%2014.1699%2098.461%2016.7699%20101.585%2021.9599L141.314%2088C142.575%2090.1%20143.206%2091.1499%20143.807%2091.4299C144.68%2091.8399%20145.715%2091.6099%20146.348%2090.8899C146.784%2090.3799%20146.936%2089.17%20147.24%2086.74L156.818%2010.1599Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M156.818%2010.1599C157.571%204.13988%20157.948%201.13006%20158.52%200.590059C159.353%20-0.199941%20160.647%20-0.199941%20161.48%200.590059C162.052%201.13006%20162.429%204.13988%20163.182%2010.1599L172.76%2086.74C173.064%2089.17%20173.216%2090.3799%20173.652%2090.8899C174.285%2091.6099%20175.32%2091.8399%20176.193%2091.4299C176.794%2091.1499%20177.425%2090.1%20178.686%2088L218.415%2021.9599C221.539%2016.7699%20223.101%2014.1699%20223.842%2013.9099C224.92%2013.5399%20226.102%2014.0699%20226.546%2015.1299C226.851%2015.8499%20225.977%2018.76%20224.229%2024.57L201.999%2098.4399C201.293%20100.79%20200.941%20101.96%20201.136%20102.59C201.42%20103.52%20202.276%20104.14%20203.238%20104.13C203.901%20104.12%20204.901%20103.42%20206.901%20102.02L269.911%2057.9399C274.867%2054.4699%20277.344%2052.74%20278.125%2052.8C279.261%2052.9%20280.127%2053.87%20280.105%2055.01C280.091%2055.8%20278.117%2058.0999%20274.17%2062.6899L223.976%20121.09C222.383%20122.94%20221.587%20123.87%20221.508%20124.53C221.393%20125.49%20221.922%20126.41%20222.807%20126.79C223.416%20127.06%20224.613%20126.82%20227.006%20126.36L302.403%20111.86C308.332%20110.72%20311.297%20110.15%20311.983%20110.53C312.981%20111.08%20313.381%20112.32%20312.898%20113.36C312.566%20114.07%20309.834%20115.36%20304.37%20117.94L234.892%20150.77C232.686%20151.81%20231.584%20152.33%20231.244%20152.9C230.751%20153.73%20230.862%20154.79%20231.516%20155.5C231.966%20155.99%20233.152%20156.27%20235.525%20156.82L310.272%20174.41C316.15%20175.79%20319.09%20176.48%20319.562%20177.11C320.249%20178.02%20320.114%20179.32%20319.253%20180.07C318.66%20180.58%20315.643%20180.65%20309.607%20180.77L232.857%20182.34C230.421%20182.39%20229.203%20182.42%20228.662%20182.8C227.875%20183.36%20227.548%20184.37%20227.859%20185.29C228.073%20185.92%20229.043%20186.66%20230.985%20188.14L292.158%20234.76C296.968%20238.43%20299.374%20240.27%20299.551%20241.03C299.809%20242.15%20299.162%20243.28%20298.071%20243.61C297.322%20243.84%20294.54%20242.66%20288.975%20240.31L218.226%20210.36C215.98%20209.41%20214.857%20208.93%20214.207%20209.06C213.263%20209.25%20212.555%20210.04%20212.468%20211C212.409%20211.66%20212.996%20212.74%20214.171%20214.88L251.192%20282.5C254.103%20287.81%20255.559%20290.47%20255.411%20291.25C255.194%20292.37%20254.148%20293.14%20253.016%20293C252.238%20292.9%20250.173%20290.69%20246.043%20286.26L193.526%20229.96C191.859%20228.18%20191.025%20227.28%20190.38%20227.14C189.441%20226.92%20188.475%20227.35%20188.006%20228.2C187.683%20228.78%20187.786%20230%20187.991%20232.44L194.458%20309.35C194.967%20315.4%20195.221%20318.42%20194.773%20319.07C194.12%20320.01%20192.854%20320.28%20191.878%20319.69C191.206%20319.28%20190.215%20316.41%20188.233%20310.68L163.029%20237.78C162.229%20235.46%20161.829%20234.31%20161.299%20233.91C160.529%20233.33%20159.471%20233.33%20158.701%20233.91C158.171%20234.31%20157.771%20235.46%20156.971%20237.78L131.767%20310.68C129.785%20316.41%20128.794%20319.28%20128.122%20319.69C127.146%20320.28%20125.88%20320.01%20125.227%20319.07C124.779%20318.42%20125.033%20315.4%20125.542%20309.35L132.009%20232.44C132.214%20230%20132.317%20228.78%20131.994%20228.2C131.525%20227.35%20130.559%20226.92%20129.621%20227.14C128.975%20227.28%20128.141%20228.18%20126.474%20229.96L73.9568%20286.26C69.8267%20290.69%2067.7616%20292.9%2066.984%20293C65.8524%20293.14%2064.8055%20292.37%2064.5894%20291.25C64.4409%20290.47%2065.8966%20287.81%2068.808%20282.5L105.829%20214.88C107.004%20212.74%20107.591%20211.66%20107.532%20211C107.445%20210.04%20106.737%20209.25%20105.793%20209.06C105.143%20208.93%20104.02%20209.41%20101.774%20210.36L31.0245%20240.31C25.4605%20242.66%2022.6785%20243.84%2021.9288%20243.61C20.838%20243.28%2020.191%20242.15%2020.4489%20241.03C20.6262%20240.27%2023.0316%20238.43%2027.8424%20234.76L89.0148%20188.14C90.957%20186.66%2091.927%20185.92%2092.141%20185.29C92.452%20184.37%2092.125%20183.36%2091.338%20182.8C90.797%20182.42%2089.5787%20182.39%2087.1425%20182.34L10.3933%20180.77C4.35749%20180.65%201.3395%20180.58%200.747495%20180.07C-0.114065%20179.32%20-0.249315%20178.02%200.438095%20177.11C0.910495%20176.48%203.84969%20175.79%209.72809%20174.41L84.475%20156.82C86.8477%20156.27%2088.034%20155.99%2088.4844%20155.5C89.1385%20154.79%2089.2491%20153.73%2088.756%20152.9C88.4164%20152.33%2087.3137%20151.81%2085.1083%20150.77L15.6304%20117.94C10.1664%20115.36%207.4344%20114.07%207.1023%20113.36C6.6191%20112.32%207.01889%20111.08%208.01699%20110.53C8.70279%20110.15%2011.6676%20110.72%2017.5971%20111.86L92.994%20126.36C95.387%20126.82%2096.584%20127.06%2097.193%20126.79C98.078%20126.41%2098.607%20125.49%2098.492%20124.53C98.414%20123.87%2097.617%20122.94%2096.024%20121.09L45.8303%2062.6899C41.8829%2058.0999%2039.9092%2055.8%2039.8946%2055.01C39.8732%2053.87%2040.739%2052.9%2041.8751%2052.8C42.6558%2052.74%2045.1335%2054.4699%2050.0889%2057.9399L113.099%20102.02C115.099%20103.42%20116.099%20104.12%20116.762%20104.13C117.724%20104.14%20118.58%20103.52%20118.864%20102.59C119.059%20101.96%20118.707%20100.79%20118.001%2098.4399L95.771%2024.57C94.023%2018.76%2093.149%2015.8499%2093.454%2015.1299C93.898%2014.0699%2095.08%2013.5399%2096.158%2013.9099C96.899%2014.1699%2098.461%2016.7699%20101.585%2021.9599L141.314%2088C142.575%2090.1%20143.206%2091.1499%20143.807%2091.4299C144.68%2091.8399%20145.715%2091.6099%20146.348%2090.8899C146.784%2090.3799%20146.936%2089.17%20147.24%2086.74L156.818%2010.1599Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.bun{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='310'%20height='320'%20viewBox='0%200%20310%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2081.36C0%2036.42%2036.42%200%2081.36%200H228.64C273.58%200%20310%2036.42%20310%2081.36C310%20118.41%20285.23%20149.68%20251.34%20159.5C251.12%20159.57%20250.97%20159.77%20250.97%20160C250.97%20160.23%20251.12%20160.43%20251.34%20160.5C285.23%20170.32%20310%20201.59%20310%20238.64C310%20283.58%20273.58%20320%20228.64%20320H81.36C36.42%20320%200%20283.58%200%20238.64C0%20201.83%2024.45%20170.73%2058%20160.69C58.3%20160.6%2058.51%20160.32%2058.51%20160C58.51%20159.68%2058.3%20159.4%2058%20159.31C24.45%20149.27%200%20118.17%200%2081.36Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='310'%20height='320'%20viewBox='0%200%20310%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2081.36C0%2036.42%2036.42%200%2081.36%200H228.64C273.58%200%20310%2036.42%20310%2081.36C310%20118.41%20285.23%20149.68%20251.34%20159.5C251.12%20159.57%20250.97%20159.77%20250.97%20160C250.97%20160.23%20251.12%20160.43%20251.34%20160.5C285.23%20170.32%20310%20201.59%20310%20238.64C310%20283.58%20273.58%20320%20228.64%20320H81.36C36.42%20320%200%20283.58%200%20238.64C0%20201.83%2024.45%20170.73%2058%20160.69C58.3%20160.6%2058.51%20160.32%2058.51%20160C58.51%20159.68%2058.3%20159.4%2058%20159.31C24.45%20149.27%200%20118.17%200%2081.36Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.burst{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M157.39%202.55C158.13%201.23%20158.49%200.58%20158.94%200.3C159.59%20-0.1%20160.41%20-0.1%20161.06%200.3C161.51%200.58%20161.87%201.23%20162.61%202.55L187.87%2047.6999C188.32%2048.5099%20188.55%2048.92%20188.86%2049.16C189.3%2049.52%20189.87%2049.6699%20190.43%2049.5799C190.82%2049.5199%20191.22%2049.29%20192.01%2048.81L236.47%2022.3399C237.76%2021.5699%20238.41%2021.18%20238.93%2021.17C239.7%2021.14%20240.4%2021.5499%20240.77%2022.2199C241.02%2022.6899%20241.01%2023.4399%20240.99%2024.9499L240.29%2076.68C240.27%2077.61%20240.27%2078.0699%20240.41%2078.4399C240.61%2078.9699%20241.03%2079.3899%20241.56%2079.5899C241.93%2079.7299%20242.39%2079.7299%20243.32%2079.7099L295.05%2079.01C296.56%2078.99%20297.31%2078.9799%20297.78%2079.2299C298.45%2079.5999%20298.86%2080.2999%20298.83%2081.0699C298.82%2081.5899%20298.43%2082.24%20297.66%2083.53L271.19%20127.99C270.71%20128.78%20270.48%20129.18%20270.42%20129.57C270.33%20130.13%20270.48%20130.7%20270.84%20131.14C271.08%20131.45%20271.49%20131.68%20272.3%20132.13L317.45%20157.39C318.77%20158.13%20319.42%20158.49%20319.7%20158.94C320.1%20159.59%20320.1%20160.41%20319.7%20161.06C319.42%20161.51%20318.77%20161.87%20317.45%20162.61L272.3%20187.87C271.49%20188.32%20271.08%20188.55%20270.84%20188.86C270.48%20189.3%20270.33%20189.87%20270.42%20190.43C270.48%20190.82%20270.71%20191.22%20271.19%20192.01L297.66%20236.47C298.43%20237.76%20298.82%20238.41%20298.83%20238.93C298.86%20239.7%20298.45%20240.4%20297.78%20240.77C297.31%20241.02%20296.56%20241.01%20295.05%20240.99L243.32%20240.29C242.39%20240.27%20241.93%20240.27%20241.56%20240.41C241.03%20240.61%20240.61%20241.03%20240.41%20241.56C240.27%20241.93%20240.27%20242.39%20240.29%20243.32L240.99%20295.05C241.01%20296.56%20241.02%20297.31%20240.77%20297.78C240.4%20298.45%20239.7%20298.86%20238.93%20298.83C238.41%20298.82%20237.76%20298.43%20236.47%20297.66L192.01%20271.19C191.22%20270.71%20190.82%20270.48%20190.43%20270.42C189.87%20270.33%20189.3%20270.48%20188.86%20270.84C188.55%20271.08%20188.32%20271.49%20187.87%20272.3L162.61%20317.45C161.87%20318.77%20161.51%20319.42%20161.06%20319.7C160.41%20320.1%20159.59%20320.1%20158.94%20319.7C158.49%20319.42%20158.13%20318.77%20157.39%20317.45L132.13%20272.3C131.68%20271.49%20131.45%20271.08%20131.14%20270.84C130.7%20270.48%20130.13%20270.33%20129.57%20270.42C129.18%20270.48%20128.78%20270.71%20127.99%20271.19L83.53%20297.66C82.24%20298.43%2081.5899%20298.82%2081.0699%20298.83C80.2999%20298.86%2079.5999%20298.45%2079.2299%20297.78C78.9799%20297.31%2078.99%20296.56%2079.01%20295.05L79.7099%20243.32C79.7299%20242.39%2079.7299%20241.93%2079.5899%20241.56C79.3899%20241.03%2078.9699%20240.61%2078.4399%20240.41C78.0699%20240.27%2077.61%20240.27%2076.68%20240.29L24.9499%20240.99C23.4399%20241.01%2022.6899%20241.02%2022.2199%20240.77C21.5499%20240.4%2021.14%20239.7%2021.17%20238.93C21.18%20238.41%2021.5699%20237.76%2022.3399%20236.47L48.81%20192.01C49.29%20191.22%2049.5199%20190.82%2049.5799%20190.43C49.6699%20189.87%2049.52%20189.3%2049.16%20188.86C48.92%20188.55%2048.5099%20188.32%2047.6999%20187.87L2.55%20162.61C1.23%20161.87%200.58%20161.51%200.3%20161.06C-0.1%20160.41%20-0.1%20159.59%200.3%20158.94C0.58%20158.49%201.23%20158.13%202.55%20157.39L47.6999%20132.13C48.5099%20131.68%2048.92%20131.45%2049.16%20131.14C49.52%20130.7%2049.6699%20130.13%2049.5799%20129.57C49.5199%20129.18%2049.29%20128.78%2048.81%20127.99L22.3399%2083.53C21.5699%2082.24%2021.18%2081.5899%2021.17%2081.0699C21.14%2080.2999%2021.5499%2079.5999%2022.2199%2079.2299C22.6899%2078.9799%2023.4399%2078.99%2024.9499%2079.01L76.68%2079.7099C77.61%2079.7299%2078.0699%2079.7299%2078.4399%2079.5899C78.9699%2079.3899%2079.3899%2078.9699%2079.5899%2078.4399C79.7299%2078.0699%2079.7299%2077.61%2079.7099%2076.68L79.01%2024.9499C78.99%2023.4399%2078.9799%2022.6899%2079.2299%2022.2199C79.5999%2021.5499%2080.2999%2021.14%2081.0699%2021.17C81.5899%2021.18%2082.24%2021.5699%2083.53%2022.3399L127.99%2048.81C128.78%2049.29%20129.18%2049.5199%20129.57%2049.5799C130.13%2049.6699%20130.7%2049.52%20131.14%2049.16C131.45%2048.92%20131.68%2048.5099%20132.13%2047.6999L157.39%202.55Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M157.39%202.55C158.13%201.23%20158.49%200.58%20158.94%200.3C159.59%20-0.1%20160.41%20-0.1%20161.06%200.3C161.51%200.58%20161.87%201.23%20162.61%202.55L187.87%2047.6999C188.32%2048.5099%20188.55%2048.92%20188.86%2049.16C189.3%2049.52%20189.87%2049.6699%20190.43%2049.5799C190.82%2049.5199%20191.22%2049.29%20192.01%2048.81L236.47%2022.3399C237.76%2021.5699%20238.41%2021.18%20238.93%2021.17C239.7%2021.14%20240.4%2021.5499%20240.77%2022.2199C241.02%2022.6899%20241.01%2023.4399%20240.99%2024.9499L240.29%2076.68C240.27%2077.61%20240.27%2078.0699%20240.41%2078.4399C240.61%2078.9699%20241.03%2079.3899%20241.56%2079.5899C241.93%2079.7299%20242.39%2079.7299%20243.32%2079.7099L295.05%2079.01C296.56%2078.99%20297.31%2078.9799%20297.78%2079.2299C298.45%2079.5999%20298.86%2080.2999%20298.83%2081.0699C298.82%2081.5899%20298.43%2082.24%20297.66%2083.53L271.19%20127.99C270.71%20128.78%20270.48%20129.18%20270.42%20129.57C270.33%20130.13%20270.48%20130.7%20270.84%20131.14C271.08%20131.45%20271.49%20131.68%20272.3%20132.13L317.45%20157.39C318.77%20158.13%20319.42%20158.49%20319.7%20158.94C320.1%20159.59%20320.1%20160.41%20319.7%20161.06C319.42%20161.51%20318.77%20161.87%20317.45%20162.61L272.3%20187.87C271.49%20188.32%20271.08%20188.55%20270.84%20188.86C270.48%20189.3%20270.33%20189.87%20270.42%20190.43C270.48%20190.82%20270.71%20191.22%20271.19%20192.01L297.66%20236.47C298.43%20237.76%20298.82%20238.41%20298.83%20238.93C298.86%20239.7%20298.45%20240.4%20297.78%20240.77C297.31%20241.02%20296.56%20241.01%20295.05%20240.99L243.32%20240.29C242.39%20240.27%20241.93%20240.27%20241.56%20240.41C241.03%20240.61%20240.61%20241.03%20240.41%20241.56C240.27%20241.93%20240.27%20242.39%20240.29%20243.32L240.99%20295.05C241.01%20296.56%20241.02%20297.31%20240.77%20297.78C240.4%20298.45%20239.7%20298.86%20238.93%20298.83C238.41%20298.82%20237.76%20298.43%20236.47%20297.66L192.01%20271.19C191.22%20270.71%20190.82%20270.48%20190.43%20270.42C189.87%20270.33%20189.3%20270.48%20188.86%20270.84C188.55%20271.08%20188.32%20271.49%20187.87%20272.3L162.61%20317.45C161.87%20318.77%20161.51%20319.42%20161.06%20319.7C160.41%20320.1%20159.59%20320.1%20158.94%20319.7C158.49%20319.42%20158.13%20318.77%20157.39%20317.45L132.13%20272.3C131.68%20271.49%20131.45%20271.08%20131.14%20270.84C130.7%20270.48%20130.13%20270.33%20129.57%20270.42C129.18%20270.48%20128.78%20270.71%20127.99%20271.19L83.53%20297.66C82.24%20298.43%2081.5899%20298.82%2081.0699%20298.83C80.2999%20298.86%2079.5999%20298.45%2079.2299%20297.78C78.9799%20297.31%2078.99%20296.56%2079.01%20295.05L79.7099%20243.32C79.7299%20242.39%2079.7299%20241.93%2079.5899%20241.56C79.3899%20241.03%2078.9699%20240.61%2078.4399%20240.41C78.0699%20240.27%2077.61%20240.27%2076.68%20240.29L24.9499%20240.99C23.4399%20241.01%2022.6899%20241.02%2022.2199%20240.77C21.5499%20240.4%2021.14%20239.7%2021.17%20238.93C21.18%20238.41%2021.5699%20237.76%2022.3399%20236.47L48.81%20192.01C49.29%20191.22%2049.5199%20190.82%2049.5799%20190.43C49.6699%20189.87%2049.52%20189.3%2049.16%20188.86C48.92%20188.55%2048.5099%20188.32%2047.6999%20187.87L2.55%20162.61C1.23%20161.87%200.58%20161.51%200.3%20161.06C-0.1%20160.41%20-0.1%20159.59%200.3%20158.94C0.58%20158.49%201.23%20158.13%202.55%20157.39L47.6999%20132.13C48.5099%20131.68%2048.92%20131.45%2049.16%20131.14C49.52%20130.7%2049.6699%20130.13%2049.5799%20129.57C49.5199%20129.18%2049.29%20128.78%2048.81%20127.99L22.3399%2083.53C21.5699%2082.24%2021.18%2081.5899%2021.17%2081.0699C21.14%2080.2999%2021.5499%2079.5999%2022.2199%2079.2299C22.6899%2078.9799%2023.4399%2078.99%2024.9499%2079.01L76.68%2079.7099C77.61%2079.7299%2078.0699%2079.7299%2078.4399%2079.5899C78.9699%2079.3899%2079.3899%2078.9699%2079.5899%2078.4399C79.7299%2078.0699%2079.7299%2077.61%2079.7099%2076.68L79.01%2024.9499C78.99%2023.4399%2078.9799%2022.6899%2079.2299%2022.2199C79.5999%2021.5499%2080.2999%2021.14%2081.0699%2021.17C81.5899%2021.18%2082.24%2021.5699%2083.53%2022.3399L127.99%2048.81C128.78%2049.29%20129.18%2049.5199%20129.57%2049.5799C130.13%2049.6699%20130.7%2049.52%20131.14%2049.16C131.45%2048.92%20131.68%2048.5099%20132.13%2047.6999L157.39%202.55Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.circle{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M320%20160C320%20248.366%20248.366%20320%20160%20320C71.6344%20320%20-1e-05%20248.366%200%20160C0%2071.6344%2071.6345%20-7.72516e-06%20160%200C248.366%207.72516e-06%20320%2071.6345%20320%20160Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M320%20160C320%20248.366%20248.366%20320%20160%20320C71.6344%20320%20-1e-05%20248.366%200%20160C0%2071.6344%2071.6345%20-7.72516e-06%20160%200C248.366%207.72516e-06%20320%2071.6345%20320%20160Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.clamshell{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='254'%20viewBox='0%200%20320%20254'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M306.405%2084.081C313.114%2097.591%20316.468%20104.346%20318.162%20111.403C320.613%20121.606%20320.613%20132.394%20318.162%20142.597C316.468%20149.654%20313.114%20156.409%20306.405%20169.919L285.967%20211.079C279.258%20224.589%20275.904%20231.344%20271.495%20236.58C265.12%20244.148%20257.084%20249.543%20248.259%20252.177C242.155%20254%20235.446%20254%20222.028%20254H97.972C84.554%20254%2077.845%20254%2071.741%20252.178C62.916%20249.543%2054.88%20244.149%2048.505%20236.58C44.096%20231.345%2040.742%20224.589%2034.033%20211.079L13.595%20169.919C6.88599%20156.409%203.53201%20149.654%201.83801%20142.597C-0.612994%20132.394%20-0.612994%20121.606%201.83801%20111.403C3.53201%20104.346%206.88599%2097.591%2013.595%2084.081L34.033%2042.921C40.742%2029.411%2044.096%2022.655%2048.505%2017.42C54.88%209.85098%2062.916%204.45699%2071.741%201.82199C77.845%20-9.05991e-06%2084.554%200%2097.972%200H222.028C235.446%200%20242.155%20-9.05991e-06%20248.259%201.82199C257.084%204.45699%20265.12%209.85098%20271.495%2017.42C275.904%2022.655%20279.258%2029.41%20285.967%2042.921L306.405%2084.081Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='254'%20viewBox='0%200%20320%20254'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M306.405%2084.081C313.114%2097.591%20316.468%20104.346%20318.162%20111.403C320.613%20121.606%20320.613%20132.394%20318.162%20142.597C316.468%20149.654%20313.114%20156.409%20306.405%20169.919L285.967%20211.079C279.258%20224.589%20275.904%20231.344%20271.495%20236.58C265.12%20244.148%20257.084%20249.543%20248.259%20252.177C242.155%20254%20235.446%20254%20222.028%20254H97.972C84.554%20254%2077.845%20254%2071.741%20252.178C62.916%20249.543%2054.88%20244.149%2048.505%20236.58C44.096%20231.345%2040.742%20224.589%2034.033%20211.079L13.595%20169.919C6.88599%20156.409%203.53201%20149.654%201.83801%20142.597C-0.612994%20132.394%20-0.612994%20121.606%201.83801%20111.403C3.53201%20104.346%206.88599%2097.591%2013.595%2084.081L34.033%2042.921C40.742%2029.411%2044.096%2022.655%2048.505%2017.42C54.88%209.85098%2062.916%204.45699%2071.741%201.82199C77.845%20-9.05991e-06%2084.554%200%2097.972%200H222.028C235.446%200%20242.155%20-9.05991e-06%20248.259%201.82199C257.084%204.45699%20265.12%209.85098%20271.495%2017.42C275.904%2022.655%20279.258%2029.41%20285.967%2042.921L306.405%2084.081Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.diamond{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='268'%20height='320'%20viewBox='0%200%20268%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M191.442%20276.481C174.606%20298.514%20166.188%20309.53%20156.466%20314.548C142.383%20321.817%20125.617%20321.817%20111.534%20314.548C101.812%20309.53%2093.394%20298.514%2076.558%20276.481L20.646%20203.308C10.406%20189.906%205.286%20183.206%202.751%20176.032C-0.917%20165.654%20-0.917%20154.346%202.751%20143.968C5.286%20136.794%2010.406%20130.094%2020.646%20116.692L76.558%2043.5194C93.394%2021.4863%20101.812%2010.4697%20111.534%205.45181C125.617%20-1.81727%20142.383%20-1.81727%20156.466%205.4518C166.188%2010.4697%20174.606%2021.4863%20191.442%2043.5195L247.354%20116.692C257.594%20130.094%20262.714%20136.794%20265.249%20143.968C268.917%20154.346%20268.917%20165.654%20265.249%20176.032C262.714%20183.206%20257.594%20189.906%20247.354%20203.308L191.442%20276.481Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='268'%20height='320'%20viewBox='0%200%20268%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M191.442%20276.481C174.606%20298.514%20166.188%20309.53%20156.466%20314.548C142.383%20321.817%20125.617%20321.817%20111.534%20314.548C101.812%20309.53%2093.394%20298.514%2076.558%20276.481L20.646%20203.308C10.406%20189.906%205.286%20183.206%202.751%20176.032C-0.917%20165.654%20-0.917%20154.346%202.751%20143.968C5.286%20136.794%2010.406%20130.094%2020.646%20116.692L76.558%2043.5194C93.394%2021.4863%20101.812%2010.4697%20111.534%205.45181C125.617%20-1.81727%20142.383%20-1.81727%20156.466%205.4518C166.188%2010.4697%20174.606%2021.4863%20191.442%2043.5195L247.354%20116.692C257.594%20130.094%20262.714%20136.794%20265.249%20143.968C268.917%20154.346%20268.917%20165.654%20265.249%20176.032C262.714%20183.206%20257.594%20189.906%20247.354%20203.308L191.442%20276.481Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.fan{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='280'%20height='280'%20viewBox='0%200%20280%20280'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2044.2105C0%2042.6506%201.95317e-05%2041.8706%200.0200195%2041.2111C0.71702%2018.7571%2018.757%200.7174%2041.211%200.0205002C41.871%201.82539e-07%2042.651%200%2044.211%200C52.53%200%2056.69%20-4.76837e-07%2060.208%200.1092C179.96%203.8259%20276.17%20100.038%20279.89%20219.792C280%20223.31%20280%20227.47%20280%20235.789C280%20237.349%20280%20238.129%20279.98%20238.789C279.28%20261.243%20261.24%20279.283%20238.79%20279.98C238.13%20280%20237.35%20280%20235.79%20280H62.945C43.927%20280%2034.417%20280%2026.874%20277.013C15.955%20272.69%207.31%20264.045%202.987%20253.126C-4.76837e-07%20245.583%200%20236.073%200%20217.055V44.2105Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='280'%20height='280'%20viewBox='0%200%20280%20280'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2044.2105C0%2042.6506%201.95317e-05%2041.8706%200.0200195%2041.2111C0.71702%2018.7571%2018.757%200.7174%2041.211%200.0205002C41.871%201.82539e-07%2042.651%200%2044.211%200C52.53%200%2056.69%20-4.76837e-07%2060.208%200.1092C179.96%203.8259%20276.17%20100.038%20279.89%20219.792C280%20223.31%20280%20227.47%20280%20235.789C280%20237.349%20280%20238.129%20279.98%20238.789C279.28%20261.243%20261.24%20279.283%20238.79%20279.98C238.13%20280%20237.35%20280%20235.79%20280H62.945C43.927%20280%2034.417%20280%2026.874%20277.013C15.955%20272.69%207.31%20264.045%202.987%20253.126C-4.76837e-07%20245.583%200%20236.073%200%20217.055V44.2105Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.flower{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M273.13%2046.8625C261.25%2034.988%20234.19%2040.8597%20201.55%2059.6813C191.77%2023.2855%20176.79%202.9362e-06%20160%200C143.2%20-2.9362e-06%20128.22%2023.2841%20118.45%2059.6779C85.7999%2040.8581%2058.75%2034.9874%2046.87%2046.8614C35%2058.7367%2040.8699%2085.7963%2059.6899%20118.446C23.2899%20128.222%200%20143.204%200%20160C0%20176.793%2023.2801%20191.773%2059.6801%20201.549C40.8501%20234.2%2034.98%20261.261%2046.85%20273.137C58.73%20285.013%2085.7899%20279.138%20118.44%20260.31C128.22%20296.711%20143.2%20320%20160%20320C176.79%20320%20191.77%20296.709%20201.55%20260.307C234.21%20279.136%20261.27%20285.012%20273.15%20273.136C285.02%20261.26%20279.15%20234.2%20260.32%20201.549C296.72%20191.773%20320%20176.793%20320%20160C320%20143.204%20296.71%20128.222%20260.3%20118.446C279.13%2085.7966%20285%2058.7376%20273.13%2046.8625Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M273.13%2046.8625C261.25%2034.988%20234.19%2040.8597%20201.55%2059.6813C191.77%2023.2855%20176.79%202.9362e-06%20160%200C143.2%20-2.9362e-06%20128.22%2023.2841%20118.45%2059.6779C85.7999%2040.8581%2058.75%2034.9874%2046.87%2046.8614C35%2058.7367%2040.8699%2085.7963%2059.6899%20118.446C23.2899%20128.222%200%20143.204%200%20160C0%20176.793%2023.2801%20191.773%2059.6801%20201.549C40.8501%20234.2%2034.98%20261.261%2046.85%20273.137C58.73%20285.013%2085.7899%20279.138%20118.44%20260.31C128.22%20296.711%20143.2%20320%20160%20320C176.79%20320%20191.77%20296.709%20201.55%20260.307C234.21%20279.136%20261.27%20285.012%20273.15%20273.136C285.02%20261.26%20279.15%20234.2%20260.32%20201.549C296.72%20191.773%20320%20176.793%20320%20160C320%20143.204%20296.71%20128.222%20260.3%20118.446C279.13%2085.7966%20285%2058.7376%20273.13%2046.8625Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.gem{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='302'%20height='312'%20viewBox='0%200%20302%20312'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M92.48%2026.6316C110.64%2013.4359%20119.73%206.838%20129.41%203.55802C143.41%20-1.18601%20158.59%20-1.18601%20172.59%203.55802C182.27%206.838%20191.36%2013.4359%20209.52%2026.6317L250.37%2056.3046C261.16%2064.1409%20266.56%2068.059%20270.95%2072.7627C277.31%2079.5606%20282.18%2087.6027%20285.27%2096.381C287.41%20102.454%20288.38%20109.048%20290.34%20122.236L297.9%20173.237C301.33%20196.373%20303.05%20207.941%20301.32%20218.367C298.81%20233.448%20291.24%20247.227%20279.86%20257.431C271.99%20264.486%20261.3%20269.245%20239.93%20278.763L191.52%20300.326C178.62%20306.07%20172.17%20308.941%20165.55%20310.409C155.96%20312.53%20146.04%20312.53%20136.45%20310.409C129.83%20308.941%20123.38%20306.07%20110.48%20300.326L62.07%20278.763C40.7%20269.245%2030.01%20264.486%2022.14%20257.431C10.76%20247.227%203.19008%20233.448%200.68008%20218.367C-1.04992%20207.941%200.670002%20196.373%204.1%20173.237L11.6601%20122.236C13.6201%20109.048%2014.59%20102.454%2016.73%2096.381C19.82%2087.6027%2024.6901%2079.5606%2031.0501%2072.7627C35.4401%2068.059%2040.84%2064.1409%2051.63%2056.3046L92.48%2026.6316Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='302'%20height='312'%20viewBox='0%200%20302%20312'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M92.48%2026.6316C110.64%2013.4359%20119.73%206.838%20129.41%203.55802C143.41%20-1.18601%20158.59%20-1.18601%20172.59%203.55802C182.27%206.838%20191.36%2013.4359%20209.52%2026.6317L250.37%2056.3046C261.16%2064.1409%20266.56%2068.059%20270.95%2072.7627C277.31%2079.5606%20282.18%2087.6027%20285.27%2096.381C287.41%20102.454%20288.38%20109.048%20290.34%20122.236L297.9%20173.237C301.33%20196.373%20303.05%20207.941%20301.32%20218.367C298.81%20233.448%20291.24%20247.227%20279.86%20257.431C271.99%20264.486%20261.3%20269.245%20239.93%20278.763L191.52%20300.326C178.62%20306.07%20172.17%20308.941%20165.55%20310.409C155.96%20312.53%20146.04%20312.53%20136.45%20310.409C129.83%20308.941%20123.38%20306.07%20110.48%20300.326L62.07%20278.763C40.7%20269.245%2030.01%20264.486%2022.14%20257.431C10.76%20247.227%203.19008%20233.448%200.68008%20218.367C-1.04992%20207.941%200.670002%20196.373%204.1%20173.237L11.6601%20122.236C13.6201%20109.048%2014.59%20102.454%2016.73%2096.381C19.82%2087.6027%2024.6901%2079.5606%2031.0501%2072.7627C35.4401%2068.059%2040.84%2064.1409%2051.63%2056.3046L92.48%2026.6316Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.ghost-ish{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='304'%20height='304'%20viewBox='0%200%20304%20304'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%20144.762C0%2064.812%2068.0527%200%20152%200C235.947%200%20304%2064.812%20304%20144.762V246.095C304%20278.075%20276.779%20304%20243.2%20304C233.247%20304%20223.853%20301.722%20215.56%20297.685C211.335%20295.627%20207.119%20293.372%20202.885%20291.107C187.986%20283.136%20172.866%20275.048%20156.327%20275.048H147.673C131.134%20275.048%20116.014%20283.136%20101.115%20291.107C96.881%20293.372%2092.665%20295.627%2088.44%20297.685C80.1472%20301.722%2070.7529%20304%2060.8%20304C27.2211%20304%200%20278.075%200%20246.095V144.762Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='304'%20height='304'%20viewBox='0%200%20304%20304'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%20144.762C0%2064.812%2068.0527%200%20152%200C235.947%200%20304%2064.812%20304%20144.762V246.095C304%20278.075%20276.779%20304%20243.2%20304C233.247%20304%20223.853%20301.722%20215.56%20297.685C211.335%20295.627%20207.119%20293.372%20202.885%20291.107C187.986%20283.136%20172.866%20275.048%20156.327%20275.048H147.673C131.134%20275.048%20116.014%20283.136%20101.115%20291.107C96.881%20293.372%2092.665%20295.627%2088.44%20297.685C80.1472%20301.722%2070.7529%20304%2060.8%20304C27.2211%20304%200%20278.075%200%20246.095V144.762Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.heart{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='286'%20viewBox='0%200%20320%20286'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M251.1%200.130005C229.439%200.130005%20210.113%2010.3%20197.481%2026.2L160%2067.51V67.38L122.519%2026.0601C109.887%2010.1701%2090.561%200%2068.9%200C30.848%200%200%2031.3701%200%2070.0601C0%20104.06%2028.375%20129.47%2048.919%20153.88C69.389%20178.21%2089.856%20202.52%20110.323%20226.84L156.272%20281.44C157.516%20282.91%20158.756%20284.39%20160%20285.87V286C161.244%20284.52%20162.484%20283.05%20163.728%20281.57C179.043%20263.37%20194.358%20245.18%20209.677%20226.98C230.144%20202.66%20250.614%20178.34%20271.081%20154.02C291.625%20129.61%20320%20104.2%20320%2070.1899C320%2031.4999%20289.152%200.130005%20251.1%200.130005Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='286'%20viewBox='0%200%20320%20286'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M251.1%200.130005C229.439%200.130005%20210.113%2010.3%20197.481%2026.2L160%2067.51V67.38L122.519%2026.0601C109.887%2010.1701%2090.561%200%2068.9%200C30.848%200%200%2031.3701%200%2070.0601C0%20104.06%2028.375%20129.47%2048.919%20153.88C69.389%20178.21%2089.856%20202.52%20110.323%20226.84L156.272%20281.44C157.516%20282.91%20158.756%20284.39%20160%20285.87V286C161.244%20284.52%20162.484%20283.05%20163.728%20281.57C179.043%20263.37%20194.358%20245.18%20209.677%20226.98C230.144%20202.66%20250.614%20178.34%20271.081%20154.02C291.625%20129.61%20320%20104.2%20320%2070.1899C320%2031.4999%20289.152%200.130005%20251.1%200.130005Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.leaf-clover4{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='296'%20height='296'%20viewBox='0%200%20296%20296'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21%20148C7.9%20132.34%200%20112.13%200%2090.0601C0%2040.3201%2040.11%200%2089.6%200C111.99%200%20132.47%208.25991%20148.17%2021.9099C163.84%208.25991%20184.27%200%20206.61%200C255.98%200%20296%2040.3201%20296%2090.0601C296%20112.13%20288.12%20132.34%20275.05%20148C288.12%20163.66%20296%20183.87%20296%20205.94C296%20255.68%20255.98%20296%20206.61%20296C184.27%20296%20163.84%20287.74%20148.17%20274.09C132.47%20287.74%20111.99%20296%2089.6%20296C40.11%20296%200%20255.68%200%20205.94C0%20183.87%207.9%20163.66%2021%20148Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='296'%20height='296'%20viewBox='0%200%20296%20296'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21%20148C7.9%20132.34%200%20112.13%200%2090.0601C0%2040.3201%2040.11%200%2089.6%200C111.99%200%20132.47%208.25991%20148.17%2021.9099C163.84%208.25991%20184.27%200%20206.61%200C255.98%200%20296%2040.3201%20296%2090.0601C296%20112.13%20288.12%20132.34%20275.05%20148C288.12%20163.66%20296%20183.87%20296%20205.94C296%20255.68%20255.98%20296%20206.61%20296C184.27%20296%20163.84%20287.74%20148.17%20274.09C132.47%20287.74%20111.99%20296%2089.6%20296C40.11%20296%200%20255.68%200%20205.94C0%20183.87%207.9%20163.66%2021%20148Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.leaft-clover8{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M308.58%20160C334.43%20208.16%20314.9%20251.77%20265.07%20265.06C251.77%20314.9%20208.16%20334.42%20160%20308.58C111.83%20334.43%2068.2201%20314.9%2054.9301%20265.07C5.10006%20251.77%20-14.4299%20208.16%2011.4201%20160C-14.4299%20111.83%205.10006%2068.2198%2054.9301%2054.9298C68.2201%205.09982%20111.83%20-14.4302%20160%2011.4198C208.16%20-14.4302%20251.77%205.09982%20265.06%2054.9298C314.9%2068.2198%20334.42%20111.83%20308.58%20160Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M308.58%20160C334.43%20208.16%20314.9%20251.77%20265.07%20265.06C251.77%20314.9%20208.16%20334.42%20160%20308.58C111.83%20334.43%2068.2201%20314.9%2054.9301%20265.07C5.10006%20251.77%20-14.4299%20208.16%2011.4201%20160C-14.4299%20111.83%205.10006%2068.2198%2054.9301%2054.9298C68.2201%205.09982%20111.83%20-14.4302%20160%2011.4198C208.16%20-14.4302%20251.77%205.09982%20265.06%2054.9298C314.9%2068.2198%20334.42%20111.83%20308.58%20160Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.loading-indicator{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='100%25'%20height='100%25'%20viewBox='4%204%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23D0BCFF'%3e%3canimate%20attributeName='d'%20dur='5s'%20repeatCount='indefinite'%20calcMode='spline'%20keySplines='0.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8'%20keyTimes='0;%200.14;%200.14;%200.29;%200.29;%200.43;%200.43;%200.57;%200.57;%200.71;%200.71;%200.86;%200.86;%201'%20values='M20.9%2010.4%2021.4%209.5%2021.9%208.7%2022.5%207.8%2023.2%207.2%2024.2%207%2025.1%207.4%2025.7%208.1%2026.2%209%2026.8%209.8%2027.3%2010.6%2028.1%2011.2%2029%2011.3%2030%2011%2030.9%2010.6%2031.8%2010.3%2032.8%209.9%2033.7%2010%2034.5%2010.6%2034.9%2011.5%2034.8%2012.5%2034.8%2013.5%2034.7%2014.5%2034.7%2015.5%2035.2%2016.3%2036%2016.8%2037%2017.1%2037.9%2017.3%2038.9%2017.5%2039.8%2017.9%2040.4%2018.7%2040.5%2019.7%2040%2020.5%2039.4%2021.3%2038.7%2022%2038.1%2022.8%2037.6%2023.7%2037.7%2024.6%2038.3%2025.5%2038.9%2026.2%2039.6%2027%2040.2%2027.7%2040.5%2028.7%2040.3%2029.6%2039.5%2030.3%2038.6%2030.6%2037.6%2030.8%2036.7%2031%2035.7%2031.3%2035%2031.9%2034.6%2032.8%2034.7%2033.8%2034.8%2034.8%2034.9%2035.8%2034.8%2036.8%2034.3%2037.6%2033.4%2038.1%2032.4%2038%2031.5%2037.6%2030.6%2037.2%2029.7%2036.9%2028.7%2036.6%2027.8%2036.9%2027.1%2037.6%2026.6%2038.5%2026.1%2039.3%2025.5%2040.2%2024.8%2040.8%2023.8%2041%2022.9%2040.6%2022.3%2039.9%2021.8%2039%2021.2%2038.2%2020.7%2037.4%2019.9%2036.8%2019%2036.7%2018%2037%2017.1%2037.4%2016.2%2037.7%2015.2%2038.1%2014.3%2038%2013.5%2037.4%2013.1%2036.5%2013.2%2035.5%2013.2%2034.5%2013.3%2033.5%2013.3%2032.5%2012.8%2031.7%2012%2031.2%2011%2031%2010.1%2030.7%209.1%2030.5%208.2%2030.1%207.6%2029.3%207.5%2028.3%208%2027.5%208.7%2026.7%209.3%2026%209.9%2025.2%2010.4%2024.3%2010.3%2023.4%209.7%2022.5%209.1%2021.8%208.4%2021%207.8%2020.3%207.5%2019.3%207.7%2018.4%208.5%2017.7%209.4%2017.4%2010.4%2017.2%2011.3%2017%2012.3%2016.7%2013%2016.1%2013.4%2015.2%2013.3%2014.2%2013.2%2013.2%2013.1%2012.2%2013.2%2011.2%2013.7%2010.4%2014.6%209.9%2015.6%2010%2016.5%2010.4%2017.4%2010.8%2018.3%2011.1%2019.3%2011.4%2020.2%2011.1Z;%20M20.3%208.6%2021.1%208%2022%207.6%2023%207.3%2023%207.3%2024%207.2%2025%207.3%2025.9%207.5%2026.8%208%2027.6%208.6%2028.4%209.1%2028.4%209.1%2029.3%209.6%2030.3%209.8%2031.3%209.9%2032.3%2010%2033.3%2010.2%2034.2%2010.6%2034.2%2010.6%2035%2011.2%2035.7%2011.9%2036.3%2012.7%2036.7%2013.6%2036.9%2014.6%2037.2%2015.5%2037.2%2015.5%2037.6%2016.5%2038.2%2017.3%2038.9%2018%2039.6%2018.7%2040.2%2019.5%2040.6%2020.4%2040.6%2020.4%2040.9%2021.3%2041%2022.3%2040.9%2023.3%2040.6%2024.3%2040.2%2025.2%2039.8%2026.1%2039.8%2026.1%2039.5%2027%2039.4%2028%2039.5%2029%2039.6%2030%2039.5%2031%2039.3%2032%2039.3%2032%2038.9%2032.9%2038.3%2033.7%2037.6%2034.4%2036.8%2035%2035.9%2035.4%2035%2035.8%2035%2035.8%2034.1%2036.3%2033.4%2037%2032.9%2037.9%2032.3%2038.7%2031.6%2039.4%2030.8%2040%2030.8%2040%2029.9%2040.4%2028.9%2040.7%2027.9%2040.8%2027%2040.7%2026%2040.4%2025%2040.1%2025%2040.1%2024%2040%2023%2040.1%2022.1%2040.4%2021.1%2040.7%2020.1%2040.8%2019.1%2040.7%2019.1%2040.7%2018.2%2040.5%2017.3%2040%2016.4%2039.5%2015.7%2038.8%2015.2%2037.9%2014.6%2037.1%2014.6%2037.1%2013.9%2036.4%2013.1%2035.8%2012.2%2035.4%2011.3%2035%2010.5%2034.4%209.7%2033.8%209.7%2033.8%209.1%2032.9%208.7%2032%208.5%2031.1%208.4%2030.1%208.5%2029.1%208.6%2028.1%208.6%2028.1%208.5%2027.1%208.3%2026.1%207.8%2025.2%207.4%2024.3%207.1%2023.4%207%2022.4%207%2022.4%207.1%2021.4%207.3%2020.4%207.8%2019.5%208.3%2018.7%209.1%2018%209.8%2017.3%209.8%2017.3%2010.4%2016.5%2010.8%2015.6%2011%2014.6%2011.3%2013.7%2011.7%2012.8%2012.2%2011.9%2012.2%2011.9%2012.9%2011.2%2013.8%2010.7%2014.7%2010.2%2015.6%2010%2016.6%209.9%2017.6%209.8%2017.6%209.8%2018.6%209.6%2019.5%209.2Z;%20M18.6%209.6%2019.5%209.2%2020.3%208.6%2021.1%208%2022%207.6%2023%207.3%2024%207.2%2025%207.3%2025.9%207.5%2026.8%208%2027.6%208.6%2028.4%209.1%2029.3%209.6%2030.3%209.8%2031.3%209.9%2032.3%2010%2033.3%2010.2%2034.2%2010.6%2035%2011.2%2035.7%2011.9%2036.3%2012.7%2036.7%2013.6%2036.9%2014.6%2037.2%2015.5%2037.6%2016.4%2038.2%2017.3%2038.9%2018%2039.6%2018.7%2040.2%2019.5%2040.6%2020.4%2040.9%2021.3%2041%2022.3%2040.9%2023.3%2040.6%2024.3%2040.2%2025.2%2039.8%2026.1%2039.5%2027%2039.4%2028%2039.5%2029%2039.6%2030%2039.5%2031%2039.3%2032%2038.9%2032.9%2038.3%2033.7%2037.6%2034.4%2036.8%2035%2035.9%2035.4%2035%2035.8%2034.1%2036.3%2033.4%2037%2032.9%2037.9%2032.3%2038.7%2031.6%2039.4%2030.8%2040%2029.9%2040.4%2028.9%2040.7%2027.9%2040.8%2027%2040.7%2026%2040.4%2025%2040.1%2024%2040%2023%2040.1%2022.1%2040.4%2021.1%2040.7%2020.1%2040.8%2019.1%2040.7%2018.2%2040.5%2017.3%2040%2016.4%2039.5%2015.7%2038.8%2015.2%2037.9%2014.6%2037.1%2013.9%2036.4%2013.1%2035.8%2012.2%2035.4%2011.3%2035%2010.5%2034.4%209.7%2033.8%209.1%2032.9%208.7%2032%208.5%2031.1%208.4%2030.1%208.5%2029.1%208.6%2028.1%208.5%2027.1%208.3%2026.1%207.8%2025.2%207.4%2024.3%207.1%2023.4%207%2022.4%207.1%2021.4%207.3%2020.4%207.8%2019.5%208.3%2018.7%209.1%2018%209.8%2017.3%2010.4%2016.5%2010.8%2015.6%2011%2014.6%2011.3%2013.7%2011.7%2012.8%2012.2%2011.9%2012.9%2011.2%2013.8%2010.7%2014.7%2010.2%2015.6%2010%2016.6%209.9%2017.6%209.8Z;%20M18.6%209.9%2019.5%209.4%2020.3%208.8%2021.1%208.2%2022%207.8%2023%207.6%2023.9%207.5%2024.9%207.6%2025.9%207.8%2026.8%208.2%2027.6%208.7%2028.5%209.3%2029.3%209.9%2030.1%2010.5%2030.9%2011%2031.7%2011.6%2032.5%2012.2%2033.3%2012.8%2033.7%2013.1%2034.1%2013.3%2034.9%2013.9%2035.7%2014.5%2036.6%2015%2037.4%2015.6%2038.2%2016.2%2039%2016.8%2039.7%2017.5%2040.2%2018.3%2040.7%2019.2%2040.9%2020.1%2041%2021.1%2040.9%2022.1%2040.7%2023.1%2040.3%2024%2040%2024.9%2039.7%2025.9%2039.4%2026.8%2039%2027.8%2038.7%2028.7%2038.4%2029.6%2038.1%2030.6%2037.8%2031.5%2037.5%2032.5%2037.2%2033.4%2036.9%2034.4%2036.6%2035.3%2036.2%2036.2%2035.7%2037.1%2035%2037.8%2034.3%2038.4%2033.4%2038.9%2032.5%2039.3%2031.5%2039.5%2030.5%2039.5%2030%2039.5%2029.5%2039.5%2028.5%2039.5%2027.5%2039.5%2026.5%2039.5%2025.5%2039.4%2024.5%2039.4%2023.6%2039.4%2022.6%2039.4%2021.6%2039.5%2020.6%2039.5%2019.6%2039.5%2018.6%2039.5%2017.6%2039.5%2016.6%2039.5%2015.6%2039.3%2014.7%2039%2013.8%2038.5%2013.1%2037.9%2012.4%2037.2%2011.9%2036.3%2011.5%2035.4%2011.2%2034.5%2010.9%2033.5%2010.6%2032.6%2010.3%2031.6%2010%2030.7%209.7%2029.7%209.3%2028.8%209%2027.9%208.7%2026.9%208.4%2026%208%2025%207.7%2024.1%207.4%2023.2%207.1%2022.2%207.1%2021.7%207%2021.2%207.1%2020.2%207.3%2019.3%207.7%2018.4%208.3%2017.5%208.9%2016.8%209.7%2016.2%2010.5%2015.6%2011.4%2015.1%2012.2%2014.5%2013%2014%2013.8%2013.4%2014.6%2012.8%2015.4%2012.3%2016.2%2011.7%2017%2011.1%2017.8%2010.5Z;%20M15.4%2012.3%2016.2%2011.7%2017%2011.1%2017.8%2010.5%2018.6%209.9%2019.5%209.4%2020.3%208.8%2021.1%208.3%2022%207.8%2023%207.6%2023.9%207.5%2024.9%207.6%2025.9%207.8%2026.8%208.2%2027.6%208.7%2028.5%209.3%2029.3%209.9%2030.1%2010.5%2030.9%2011%2031.7%2011.6%2032.5%2012.2%2033.3%2012.8%2034.1%2013.3%2034.9%2013.9%2035.7%2014.5%2036.6%2015%2037.4%2015.6%2038.2%2016.2%2039%2016.8%2039.7%2017.5%2040.2%2018.3%2040.7%2019.2%2040.9%2020.1%2041%2021.1%2040.9%2022.1%2040.7%2023.1%2040.3%2024%2040%2024.9%2039.7%2025.9%2039.4%2026.8%2039%2027.8%2038.7%2028.7%2038.4%2029.6%2038.1%2030.6%2037.8%2031.5%2037.5%2032.5%2037.2%2033.4%2036.9%2034.4%2036.6%2035.3%2036.2%2036.2%2035.7%2037.1%2035%2037.8%2034.3%2038.4%2033.4%2038.9%2032.5%2039.3%2031.5%2039.4%2030.5%2039.5%2029.5%2039.5%2028.5%2039.5%2027.5%2039.5%2026.5%2039.5%2025.5%2039.4%2024.5%2039.4%2023.6%2039.4%2022.6%2039.4%2021.6%2039.5%2020.6%2039.5%2019.6%2039.5%2018.6%2039.5%2017.6%2039.5%2016.6%2039.5%2015.6%2039.3%2014.7%2039%2013.8%2038.5%2013.1%2037.9%2012.4%2037.2%2011.9%2036.3%2011.5%2035.4%2011.2%2034.5%2010.9%2033.5%2010.6%2032.6%2010.3%2031.6%2010%2030.7%209.7%2029.7%209.3%2028.8%209%2027.9%208.7%2026.9%208.4%2026%208%2025%207.7%2024.1%207.4%2023.2%207.1%2022.2%207%2021.2%207.1%2020.2%207.3%2019.3%207.7%2018.4%208.3%2017.5%208.9%2016.8%209.7%2016.2%2010.5%2015.6%2011.4%2015.1%2012.2%2014.5%2013%2014%2013.8%2013.4%2014.6%2012.8Z;%20M17%2012.8%2017.7%2012.1%2018.5%2011.5%2019.3%2010.9%2020.1%2010.5%2020.2%2010.4%2021.1%2010%2022%209.7%2023%209.4%2024%209.2%2025%209%2026%209%2027%209%2027.6%209.1%2028%209.1%2028.9%209.3%2029.9%209.6%2030.9%209.9%2031.8%2010.3%2032.6%2010.8%2033.5%2011.3%2034.3%2011.9%2034.6%2012.2%2035%2012.6%2035.7%2013.3%2036.4%2014.1%2036.9%2014.9%2037.4%2015.8%2037.9%2016.6%2038.3%2017.6%2038.6%2018.5%2038.6%2018.7%2038.8%2019.5%2038.9%2020.5%2039%2021.5%2039%2022.5%2038.9%2023.5%2038.7%2024.5%2038.5%2025.4%2038.2%2026.3%2038.2%2026.4%2037.8%2027.3%2037.4%2028.2%2036.8%2029.1%2036.2%2029.9%2035.6%2030.6%2034.9%2031.3%2034.2%2032%2033.8%2032.5%2033.5%2032.8%2032.8%2033.5%2032.1%2034.2%2031.4%2034.9%2030.7%2035.6%2029.9%2036.2%2029.1%2036.8%2028.2%2037.3%2027.9%2037.5%2027.4%2037.8%2026.4%2038.2%2025.5%2038.5%2024.5%2038.7%2023.5%2038.9%2022.5%2039%2021.5%2039%2020.5%2038.9%2020.4%2038.9%2019.5%2038.8%2018.6%2038.6%2017.6%2038.3%2016.7%2037.9%2015.8%2037.5%2014.9%2037%2014.1%2036.4%2013.4%2035.8%2013.3%2035.8%2012.6%2035.1%2012%2034.3%2011.3%2033.5%2010.8%2032.7%2010.3%2031.8%209.9%2030.9%209.6%2030%209.4%2029.3%209.3%2029%209.1%2028%209%2027%209%2026%209%2025%209.2%2024%209.4%2023%209.6%2022.1%209.8%2021.7%2010%2021.1%2010.4%2020.2%2010.9%2019.4%2011.4%2018.5%2012.1%2017.8%2012.7%2017%2013.4%2016.3%2014.2%2015.6%2014.2%2015.5%2014.9%2014.9%2015.6%2014.2%2016.3%2013.5Z;%20M33.5%2011.3%2034.3%2011.9%2035%2012.6%2035.3%2012.8%2035.7%2013.3%2036.4%2014.1%2036.9%2014.9%2037.4%2015.8%2037.9%2016.6%2038.3%2017.6%2038.3%2017.7%2038.6%2018.5%2038.8%2019.5%2038.9%2020.5%2039%2021.5%2039%2022.5%2038.9%2023.5%2038.9%2023.5%2038.7%2024.5%2038.5%2025.4%2038.2%2026.4%2037.8%2027.3%2037.4%2028.2%2036.9%2028.9%2036.8%2029.1%2036.2%2029.9%2035.6%2030.6%2034.9%2031.3%2034.2%2032%2033.5%2032.8%2033.1%2033.2%2032.8%2033.5%2032.1%2034.2%2031.4%2034.9%2030.7%2035.6%2029.9%2036.2%2029.1%2036.8%2028.7%2037%2028.2%2037.3%2027.4%2037.8%2026.4%2038.2%2025.5%2038.5%2024.5%2038.7%2023.5%2038.9%2023.3%2038.9%2022.5%2039%2021.5%2039%2020.5%2038.9%2019.5%2038.8%2018.6%2038.6%2017.6%2038.3%2017.6%2038.3%2016.7%2037.9%2015.8%2037.5%2014.9%2037%2014.1%2036.4%2013.3%2035.8%2012.7%2035.2%2012.6%2035.1%2012%2034.3%2011.3%2033.5%2010.8%2032.7%2010.3%2031.8%209.9%2030.9%209.7%2030.3%209.6%2029.9%209.3%2029%209.1%2028%209%2027%209%2026%209%2025%209.1%2024.5%209.2%2024%209.4%2023%209.6%2022.1%2010%2021.1%2010.4%2020.2%2010.9%2019.4%2011.1%2019.1%2011.5%2018.5%2012.1%2017.7%2012.7%2017%2013.5%2016.3%2014.2%2015.6%2014.9%2014.9%2014.9%2014.8%2015.6%2014.2%2016.3%2013.5%2017%2012.8%2017.7%2012.1%2018.5%2011.5%2019.3%2011%2019.3%2010.9%2020.2%2010.4%2021.1%2010%2022%209.7%2023%209.4%2024%209.2%2024.7%209.1%2025%209%2026%209%2027%209%2028%209.1%2028.9%209.3%2029.9%209.6%2030.4%209.7%2030.9%209.9%2031.8%2010.3%2032.6%2010.8Z;%20M33.2%2011.1%2034.2%2011.2%2035.1%2011.4%2036%2011.9%2036.6%2012.7%2036.8%2013.7%2036.9%2014.7%2036.9%2015.7%2037%2016.7%2037.1%2017.7%2037.3%2018.6%2037.9%2019.4%2038.5%2020.2%2039.2%2020.9%2039.8%2021.7%2040.5%2022.4%2040.9%2023.3%2041%2024.3%2040.7%2025.2%2040.1%2026%2039.4%2026.8%2038.8%2027.5%2038.1%2028.3%2037.5%2029.1%2037.1%2030%2037%2031%2037%2031.9%2036.9%2032.9%2036.8%2033.9%2036.7%2034.9%2036.2%2035.8%2035.5%2036.4%2034.5%2036.8%2033.6%2036.8%2032.6%2036.9%2031.6%2037%2030.6%2037.1%2029.6%2037.2%2028.8%2037.7%2028%2038.4%2027.3%2039%2026.5%2039.7%2025.8%2040.3%2024.9%2040.8%2023.9%2041%2023%2040.8%2022.1%2040.2%2021.4%2039.6%2020.6%2038.9%2019.9%2038.3%2019.1%2037.6%2018.3%2037.2%2017.3%2037%2016.3%2037%2015.3%2036.9%2014.3%2036.8%2013.3%2036.7%2012.4%2036.4%2011.7%2035.7%2011.3%2034.8%2011.2%2033.8%2011.1%2032.8%2011%2031.8%2011%2030.8%2010.9%2029.9%2010.4%2029%209.8%2028.2%209.1%2027.5%208.5%2026.7%207.8%2026%207.3%2025.1%207%2024.2%207.1%2023.2%207.6%2022.3%208.2%2021.6%208.9%2020.8%209.5%2020.1%2010.2%2019.3%2010.7%2018.5%2010.9%2017.5%2011%2016.6%2011.1%2015.6%2011.1%2014.6%2011.2%2013.6%2011.5%2012.6%2012.1%2011.9%2013%2011.4%2013.9%2011.2%2014.9%2011.1%2015.9%2011%2016.9%2011%2017.9%2010.9%2018.8%2010.6%2019.6%2010%2020.4%209.3%2021.1%208.6%2021.9%208%2022.6%207.4%2023.6%207%2024.6%207.1%2025.5%207.5%2026.2%208.1%2027%208.7%2027.7%209.4%2028.5%2010%2029.3%2010.6%2030.2%2010.9%2031.2%2011%2032.2%2011.1Z;%20M27.7%209.4%2028.5%2010%2029.3%2010.6%2030.2%2010.9%2031.2%2011%2032.2%2011.1%2033.2%2011.1%2034.2%2011.2%2035.1%2011.4%2036%2011.9%2036.6%2012.7%2036.8%2013.7%2036.9%2014.7%2036.9%2015.7%2037%2016.7%2037.1%2017.7%2037.3%2018.6%2037.9%2019.4%2038.5%2020.2%2039.2%2020.9%2039.8%2021.7%2040.5%2022.4%2040.9%2023.3%2041%2024.3%2040.7%2025.2%2040.1%2026%2039.4%2026.8%2038.8%2027.5%2038.1%2028.3%2037.5%2029.1%2037.1%2030%2037%2031%2037%2031.9%2036.9%2032.9%2036.8%2033.9%2036.7%2034.9%2036.2%2035.8%2035.5%2036.4%2034.5%2036.8%2033.6%2036.9%2032.6%2036.9%2031.6%2037%2030.6%2037.1%2029.6%2037.2%2028.8%2037.7%2028%2038.4%2027.3%2039%2026.5%2039.7%2025.8%2040.3%2024.9%2040.8%2023.9%2041%2023%2040.8%2022.1%2040.2%2021.4%2039.6%2020.6%2038.9%2019.9%2038.3%2019.1%2037.6%2018.3%2037.2%2017.3%2037%2016.3%2037%2015.3%2036.9%2014.3%2036.8%2013.3%2036.7%2012.4%2036.4%2011.7%2035.7%2011.3%2034.8%2011.2%2033.8%2011.1%2032.8%2011%2031.8%2011%2030.8%2010.9%2029.9%2010.4%2029%209.8%2028.2%209.1%2027.5%208.5%2026.7%207.8%2026%207.3%2025.1%207%2024.2%207.1%2023.2%207.6%2022.3%208.2%2021.6%208.9%2020.8%209.5%2020.1%2010.2%2019.3%2010.7%2018.5%2010.9%2017.5%2011%2016.5%2011.1%2015.6%2011.1%2014.6%2011.2%2013.6%2011.5%2012.6%2012.1%2011.9%2013%2011.4%2013.9%2011.2%2014.9%2011.1%2015.9%2011%2016.9%2011%2017.9%2010.9%2018.8%2010.6%2019.6%2010%2020.4%209.3%2021.1%208.6%2021.9%208%2022.6%207.4%2023.6%207%2024.6%207.1%2025.5%207.5%2026.2%208.1%2027%208.7Z;%20M27.9%2010.6%2028.8%2010.3%2029.8%2010.1%2030.8%2010%2031.8%2010.1%2032.7%2010.3%2033.7%2010.6%2034.6%2011.1%2034.8%2011.3%2035.4%2011.7%2036.1%2012.4%2036.7%2013.1%2037.2%2014%2037.6%2014.9%2037.9%2015.9%2038%2016.9%2038%2017.9%2037.8%2018.8%2037.5%2019.8%2037.1%2020.7%2036.8%2021.6%2036.5%2022.6%2036.4%2023.6%2036.4%2024.4%2036.4%2024.6%2036.5%2025.5%2036.8%2026.5%2037.2%2027.4%2037.6%2028.3%2037.8%2029.3%2038%2030.3%2038%2031.3%2037.8%2032.3%2037.6%2033.2%2037.2%2034.1%2036.6%2035%2036%2035.7%2035.3%2036.4%2034.4%2037%2034.1%2037.2%2033.6%2037.4%2032.6%2037.8%2031.6%2037.9%2030.6%2038%2029.7%2037.9%2028.7%2037.7%2027.8%2037.3%2026.8%2036.9%2025.9%2036.6%2024.9%2036.4%2023.9%2036.4%2022.9%2036.4%2022%2036.6%2021%2037%2020.1%2037.4%2020.1%2037.4%2019.2%2037.7%2018.2%2037.9%2017.2%2038%2016.2%2037.9%2015.3%2037.7%2014.3%2037.4%2013.4%2036.9%2012.6%2036.3%2011.9%2035.6%2011.3%2034.9%2010.8%2034%2010.4%2033.1%2010.1%2032.1%2010%2031.1%2010%2030.6%2010%2030.1%2010.2%2029.2%2010.5%2028.2%2010.9%2027.3%2011.2%2026.4%2011.5%2025.4%2011.6%2024.4%2011.6%2023.4%2011.5%2022.5%2011.2%2021.5%2010.8%2020.6%2010.4%2019.7%2010.2%2018.7%2010%2017.7%2010%2016.7%2010%2016.6%2010.2%2015.7%2010.4%2014.8%2010.8%2013.9%2011.4%2013%2012%2012.3%2012.7%2011.6%2013.6%2011%2014.4%2010.6%2015.4%2010.2%2016.4%2010.1%2017.4%2010%2018.3%2010.1%2019.3%2010.3%2020.2%2010.7%2020.9%2011%2021.2%2011.1%2022.1%2011.4%2023.1%2011.6%2024.1%2011.6%2025.1%2011.6%2026%2011.4%2027%2011Z;%20M36%2035.7%2035.3%2036.4%2034.4%2037%2033.6%2037.4%2032.6%2037.8%2031.6%2037.9%2030.6%2038%2029.7%2037.9%2028.7%2037.7%2027.8%2037.3%2026.8%2036.9%2025.9%2036.6%2024.9%2036.4%2023.9%2036.4%2022.9%2036.4%2022%2036.6%2021%2037%2020.1%2037.4%2019.2%2037.7%2018.2%2037.9%2017.2%2038%2016.2%2037.9%2015.3%2037.7%2014.3%2037.4%2013.4%2036.9%2012.6%2036.3%2011.9%2035.6%2011.3%2034.9%2010.8%2034%2010.4%2033.1%2010.1%2032.1%2010%2031.1%2010%2030.2%2010.2%2029.2%2010.5%2028.2%2010.9%2027.3%2011.2%2026.4%2011.5%2025.4%2011.6%2024.4%2011.6%2023.4%2011.5%2022.5%2011.2%2021.5%2010.8%2020.6%2010.4%2019.7%2010.2%2018.7%2010%2017.7%2010%2016.7%2010.2%2015.7%2010.4%2014.8%2010.8%2013.9%2011.4%2013%2012%2012.3%2012.7%2011.6%2013.6%2011%2014.4%2010.6%2015.4%2010.2%2016.4%2010.1%2017.4%2010%2018.3%2010.1%2019.3%2010.3%2020.2%2010.7%2021.2%2011.1%2022.1%2011.4%2023.1%2011.6%2024.1%2011.6%2025.1%2011.6%2026%2011.4%2027%2011%2027.9%2010.6%2028.8%2010.3%2029.8%2010.1%2030.8%2010%2031.8%2010.1%2032.7%2010.3%2033.7%2010.6%2034.6%2011.1%2035.4%2011.7%2036.1%2012.4%2036.7%2013.1%2037.2%2014%2037.6%2014.9%2037.9%2015.9%2038%2016.9%2038%2017.8%2037.8%2018.8%2037.5%2019.8%2037.1%2020.7%2036.8%2021.6%2036.5%2022.6%2036.4%2023.6%2036.4%2024.6%2036.5%2025.5%2036.8%2026.5%2037.2%2027.4%2037.6%2028.3%2037.8%2029.3%2038%2030.3%2038%2031.3%2037.8%2032.3%2037.6%2033.2%2037.2%2034.1%2036.6%2035Z;%20M32.1%2032.1%2031.4%2032.8%2030.7%2033.5%2029.9%2034.1%2029.1%2034.7%2028.3%2035.3%2027.6%2035.8%2027.5%2035.8%2026.6%2036.4%2025.8%2036.8%2024.9%2037.3%2024%2037.7%2023.1%2038%2022.1%2038.3%2021.2%2038.6%2020.2%2038.8%2019.2%2038.9%2018.2%2039%2017.2%2039%2016.6%2038.9%2016.3%2038.9%2015.3%2038.7%2014.3%2038.4%2013.4%2038%2012.5%2037.5%2011.7%2036.9%2011.1%2036.3%2010.5%2035.5%2010%2034.6%209.6%2033.7%209.3%2032.7%209.1%2031.7%209.1%2031.4%209%2030.8%209%2029.8%209.1%2028.8%209.2%2027.8%209.4%2026.8%209.7%2025.9%2010%2024.9%2010.3%2024%2010.7%2023.1%2011.2%2022.2%2011.6%2021.4%2012.2%2020.5%2012.2%2020.4%2012.7%2019.7%2013.3%2018.9%2013.9%2018.1%2014.5%2017.3%2015.2%2016.6%2015.9%2015.9%2016.6%2015.2%2017.3%2014.5%2018.1%2013.9%2018.9%2013.3%2019.7%2012.7%2020.4%2012.2%2020.5%2012.2%2021.4%2011.6%2022.2%2011.2%2023.1%2010.7%2024%2010.3%2024.9%2010%2025.9%209.7%2026.8%209.4%2027.8%209.2%2028.8%209.1%2029.8%209%2030.8%209%2031.4%209.1%2031.7%209.1%2032.7%209.3%2033.7%209.6%2034.6%2010%2035.5%2010.5%2036.3%2011.1%2036.9%2011.7%2037.5%2012.5%2038%2013.4%2038.4%2014.3%2038.7%2015.3%2038.9%2016.3%2038.9%2016.6%2039%2017.2%2039%2018.2%2038.9%2019.2%2038.8%2020.2%2038.6%2021.2%2038.3%2022.1%2038%2023.1%2037.7%2024%2037.3%2024.9%2036.8%2025.8%2036.4%2026.6%2035.8%2027.5%2035.8%2027.6%2035.3%2028.3%2034.7%2029.1%2034.1%2029.9%2033.5%2030.7%2032.8%2031.4Z;%20M24.3%2010.2%2024.9%2010%2025.9%209.7%2026.8%209.4%2027.1%209.4%2027.8%209.2%2028.8%209.1%2029.8%209%2029.9%209%2030.8%209%2031.7%209.1%2032.7%209.3%2032.8%209.3%2033.7%209.6%2034.6%2010%2035.5%2010.5%2035.5%2010.5%2036.3%2011.1%2036.9%2011.7%2037.5%2012.5%2037.5%2012.5%2038%2013.4%2038.4%2014.3%2038.7%2015.2%2038.7%2015.3%2038.9%2016.3%2039%2017.2%2039%2018.1%2039%2018.2%2038.9%2019.2%2038.8%2020.2%2038.6%2020.9%2038.6%2021.2%2038.3%2022.1%2038%2023.1%2037.8%2023.7%2037.7%2024%2037.3%2024.9%2036.8%2025.8%2036.5%2026.4%2036.4%2026.6%2035.8%2027.5%2035.3%2028.3%2035%2028.8%2034.7%2029.1%2034.1%2029.9%2033.5%2030.7%2033.1%2031.1%2032.8%2031.4%2032.1%2032.1%2031.4%2032.8%2031.1%2033.1%2030.7%2033.5%2029.9%2034.1%2029.1%2034.7%2028.8%2035%2028.3%2035.3%2027.5%2035.8%2026.6%2036.4%2026.4%2036.5%2025.8%2036.8%2024.9%2037.3%2024%2037.7%2023.7%2037.8%2023.1%2038%2022.1%2038.3%2021.2%2038.6%2020.9%2038.6%2020.2%2038.8%2019.2%2038.9%2018.2%2039%2018.1%2039%2017.2%2039%2016.3%2038.9%2015.3%2038.7%2015.2%2038.7%2014.3%2038.4%2013.4%2038%2012.5%2037.5%2012.5%2037.5%2011.7%2036.9%2011.1%2036.3%2010.5%2035.5%2010.5%2035.5%2010%2034.6%209.6%2033.7%209.3%2032.8%209.3%2032.7%209.1%2031.7%209%2030.8%209%2029.9%209%2029.8%209.1%2028.8%209.2%2027.8%209.4%2027.1%209.4%2026.8%209.7%2025.9%2010%2024.9%2010.2%2024.3%2010.3%2024%2010.7%2023.1%2011.2%2022.2%2011.5%2021.6%2011.6%2021.4%2012.2%2020.5%2012.7%2019.7%2013%2019.2%2013.3%2018.9%2013.9%2018.1%2014.5%2017.3%2014.9%2016.9%2015.2%2016.6%2015.9%2015.9%2016.6%2015.2%2016.9%2014.9%2017.3%2014.5%2018.1%2013.9%2018.9%2013.3%2019.2%2013%2019.7%2012.7%2020.5%2012.2%2021.4%2011.6%2021.6%2011.5%2022.2%2011.2%2023.1%2010.7%2024%2010.3Z;%20M22.5%207.8%2023.2%207.2%2024.2%207%2025.1%207.4%2025.7%208.1%2026.2%209%2026.8%209.8%2027.3%2010.6%2028.1%2011.2%2029%2011.3%2030%2011%2030.9%2010.6%2031.8%2010.3%2032.8%209.9%2033.7%2010%2034.5%2010.6%2034.9%2011.5%2034.8%2012.5%2034.8%2013.5%2034.7%2014.5%2034.7%2015.5%2035.2%2016.3%2036%2016.8%2037%2017%2037.9%2017.3%2038.9%2017.5%2039.8%2017.9%2040.4%2018.7%2040.5%2019.7%2040%2020.5%2039.3%2021.3%2038.7%2022%2038.1%2022.8%2037.6%2023.7%2037.7%2024.6%2038.3%2025.4%2038.9%2026.2%2039.6%2027%2040.2%2027.7%2040.5%2028.6%2040.3%2029.6%2039.5%2030.3%2038.6%2030.6%2037.6%2030.8%2036.7%2031%2035.7%2031.3%2035%2031.9%2034.6%2032.8%2034.7%2033.8%2034.8%2034.8%2034.8%2035.8%2034.8%2036.8%2034.3%2037.6%2033.4%2038.1%2032.4%2038%2031.5%2037.6%2030.6%2037.2%2029.7%2036.9%2028.7%2036.6%2027.8%2036.9%2027.1%2037.6%2026.6%2038.5%2026.1%2039.3%2025.5%2040.2%2024.8%2040.8%2023.8%2041%2022.9%2040.6%2022.3%2039.9%2021.8%2039%2021.2%2038.2%2020.7%2037.4%2019.9%2036.8%2019%2036.7%2018%2037%2017.1%2037.4%2016.2%2037.7%2015.2%2038.1%2014.3%2038%2013.5%2037.4%2013.1%2036.5%2013.2%2035.5%2013.2%2034.5%2013.3%2033.5%2013.3%2032.5%2012.8%2031.7%2012%2031.2%2011%2031%2010.1%2030.7%209.1%2030.5%208.2%2030.1%207.6%2029.3%207.5%2028.3%208%2027.5%208.7%2026.7%209.3%2026%209.9%2025.2%2010.4%2024.3%2010.3%2023.4%209.7%2022.6%209.1%2021.8%208.4%2021%207.8%2020.3%207.5%2019.4%207.7%2018.4%208.5%2017.7%209.4%2017.4%2010.4%2017.2%2011.3%2017%2012.3%2016.7%2013%2016.1%2013.4%2015.2%2013.3%2014.2%2013.2%2013.2%2013.2%2012.2%2013.2%2011.2%2013.7%2010.4%2014.6%209.9%2015.6%2010%2016.5%2010.4%2017.4%2010.8%2018.3%2011.1%2019.3%2011.4%2020.2%2011.1%2020.9%2010.4%2021.4%209.5%2021.9%208.7Z'%3e%3c/animate%3e%3canimateTransform%20attributeName='transform'%20attributeType='XML'%20type='rotate'%20dur='5s'%20repeatCount='indefinite'%20calcMode='spline'%20keySplines='0.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8'%20keyTimes='0;%200.14;%200.29;%200.43;%200.57;%200.71;%200.86;%201'%20values='0%2024%2024;%20154%2024%2024;%20309%2024%2024;%20463%2024%2024;%20617%2024%2024;%20771%2024%2024;%20926%2024%2024;%201080%2024%2024'%3e%3c/animateTransform%3e%3c/path%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='100%25'%20height='100%25'%20viewBox='4%204%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23D0BCFF'%3e%3canimate%20attributeName='d'%20dur='5s'%20repeatCount='indefinite'%20calcMode='spline'%20keySplines='0.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8'%20keyTimes='0;%200.14;%200.14;%200.29;%200.29;%200.43;%200.43;%200.57;%200.57;%200.71;%200.71;%200.86;%200.86;%201'%20values='M20.9%2010.4%2021.4%209.5%2021.9%208.7%2022.5%207.8%2023.2%207.2%2024.2%207%2025.1%207.4%2025.7%208.1%2026.2%209%2026.8%209.8%2027.3%2010.6%2028.1%2011.2%2029%2011.3%2030%2011%2030.9%2010.6%2031.8%2010.3%2032.8%209.9%2033.7%2010%2034.5%2010.6%2034.9%2011.5%2034.8%2012.5%2034.8%2013.5%2034.7%2014.5%2034.7%2015.5%2035.2%2016.3%2036%2016.8%2037%2017.1%2037.9%2017.3%2038.9%2017.5%2039.8%2017.9%2040.4%2018.7%2040.5%2019.7%2040%2020.5%2039.4%2021.3%2038.7%2022%2038.1%2022.8%2037.6%2023.7%2037.7%2024.6%2038.3%2025.5%2038.9%2026.2%2039.6%2027%2040.2%2027.7%2040.5%2028.7%2040.3%2029.6%2039.5%2030.3%2038.6%2030.6%2037.6%2030.8%2036.7%2031%2035.7%2031.3%2035%2031.9%2034.6%2032.8%2034.7%2033.8%2034.8%2034.8%2034.9%2035.8%2034.8%2036.8%2034.3%2037.6%2033.4%2038.1%2032.4%2038%2031.5%2037.6%2030.6%2037.2%2029.7%2036.9%2028.7%2036.6%2027.8%2036.9%2027.1%2037.6%2026.6%2038.5%2026.1%2039.3%2025.5%2040.2%2024.8%2040.8%2023.8%2041%2022.9%2040.6%2022.3%2039.9%2021.8%2039%2021.2%2038.2%2020.7%2037.4%2019.9%2036.8%2019%2036.7%2018%2037%2017.1%2037.4%2016.2%2037.7%2015.2%2038.1%2014.3%2038%2013.5%2037.4%2013.1%2036.5%2013.2%2035.5%2013.2%2034.5%2013.3%2033.5%2013.3%2032.5%2012.8%2031.7%2012%2031.2%2011%2031%2010.1%2030.7%209.1%2030.5%208.2%2030.1%207.6%2029.3%207.5%2028.3%208%2027.5%208.7%2026.7%209.3%2026%209.9%2025.2%2010.4%2024.3%2010.3%2023.4%209.7%2022.5%209.1%2021.8%208.4%2021%207.8%2020.3%207.5%2019.3%207.7%2018.4%208.5%2017.7%209.4%2017.4%2010.4%2017.2%2011.3%2017%2012.3%2016.7%2013%2016.1%2013.4%2015.2%2013.3%2014.2%2013.2%2013.2%2013.1%2012.2%2013.2%2011.2%2013.7%2010.4%2014.6%209.9%2015.6%2010%2016.5%2010.4%2017.4%2010.8%2018.3%2011.1%2019.3%2011.4%2020.2%2011.1Z;%20M20.3%208.6%2021.1%208%2022%207.6%2023%207.3%2023%207.3%2024%207.2%2025%207.3%2025.9%207.5%2026.8%208%2027.6%208.6%2028.4%209.1%2028.4%209.1%2029.3%209.6%2030.3%209.8%2031.3%209.9%2032.3%2010%2033.3%2010.2%2034.2%2010.6%2034.2%2010.6%2035%2011.2%2035.7%2011.9%2036.3%2012.7%2036.7%2013.6%2036.9%2014.6%2037.2%2015.5%2037.2%2015.5%2037.6%2016.5%2038.2%2017.3%2038.9%2018%2039.6%2018.7%2040.2%2019.5%2040.6%2020.4%2040.6%2020.4%2040.9%2021.3%2041%2022.3%2040.9%2023.3%2040.6%2024.3%2040.2%2025.2%2039.8%2026.1%2039.8%2026.1%2039.5%2027%2039.4%2028%2039.5%2029%2039.6%2030%2039.5%2031%2039.3%2032%2039.3%2032%2038.9%2032.9%2038.3%2033.7%2037.6%2034.4%2036.8%2035%2035.9%2035.4%2035%2035.8%2035%2035.8%2034.1%2036.3%2033.4%2037%2032.9%2037.9%2032.3%2038.7%2031.6%2039.4%2030.8%2040%2030.8%2040%2029.9%2040.4%2028.9%2040.7%2027.9%2040.8%2027%2040.7%2026%2040.4%2025%2040.1%2025%2040.1%2024%2040%2023%2040.1%2022.1%2040.4%2021.1%2040.7%2020.1%2040.8%2019.1%2040.7%2019.1%2040.7%2018.2%2040.5%2017.3%2040%2016.4%2039.5%2015.7%2038.8%2015.2%2037.9%2014.6%2037.1%2014.6%2037.1%2013.9%2036.4%2013.1%2035.8%2012.2%2035.4%2011.3%2035%2010.5%2034.4%209.7%2033.8%209.7%2033.8%209.1%2032.9%208.7%2032%208.5%2031.1%208.4%2030.1%208.5%2029.1%208.6%2028.1%208.6%2028.1%208.5%2027.1%208.3%2026.1%207.8%2025.2%207.4%2024.3%207.1%2023.4%207%2022.4%207%2022.4%207.1%2021.4%207.3%2020.4%207.8%2019.5%208.3%2018.7%209.1%2018%209.8%2017.3%209.8%2017.3%2010.4%2016.5%2010.8%2015.6%2011%2014.6%2011.3%2013.7%2011.7%2012.8%2012.2%2011.9%2012.2%2011.9%2012.9%2011.2%2013.8%2010.7%2014.7%2010.2%2015.6%2010%2016.6%209.9%2017.6%209.8%2017.6%209.8%2018.6%209.6%2019.5%209.2Z;%20M18.6%209.6%2019.5%209.2%2020.3%208.6%2021.1%208%2022%207.6%2023%207.3%2024%207.2%2025%207.3%2025.9%207.5%2026.8%208%2027.6%208.6%2028.4%209.1%2029.3%209.6%2030.3%209.8%2031.3%209.9%2032.3%2010%2033.3%2010.2%2034.2%2010.6%2035%2011.2%2035.7%2011.9%2036.3%2012.7%2036.7%2013.6%2036.9%2014.6%2037.2%2015.5%2037.6%2016.4%2038.2%2017.3%2038.9%2018%2039.6%2018.7%2040.2%2019.5%2040.6%2020.4%2040.9%2021.3%2041%2022.3%2040.9%2023.3%2040.6%2024.3%2040.2%2025.2%2039.8%2026.1%2039.5%2027%2039.4%2028%2039.5%2029%2039.6%2030%2039.5%2031%2039.3%2032%2038.9%2032.9%2038.3%2033.7%2037.6%2034.4%2036.8%2035%2035.9%2035.4%2035%2035.8%2034.1%2036.3%2033.4%2037%2032.9%2037.9%2032.3%2038.7%2031.6%2039.4%2030.8%2040%2029.9%2040.4%2028.9%2040.7%2027.9%2040.8%2027%2040.7%2026%2040.4%2025%2040.1%2024%2040%2023%2040.1%2022.1%2040.4%2021.1%2040.7%2020.1%2040.8%2019.1%2040.7%2018.2%2040.5%2017.3%2040%2016.4%2039.5%2015.7%2038.8%2015.2%2037.9%2014.6%2037.1%2013.9%2036.4%2013.1%2035.8%2012.2%2035.4%2011.3%2035%2010.5%2034.4%209.7%2033.8%209.1%2032.9%208.7%2032%208.5%2031.1%208.4%2030.1%208.5%2029.1%208.6%2028.1%208.5%2027.1%208.3%2026.1%207.8%2025.2%207.4%2024.3%207.1%2023.4%207%2022.4%207.1%2021.4%207.3%2020.4%207.8%2019.5%208.3%2018.7%209.1%2018%209.8%2017.3%2010.4%2016.5%2010.8%2015.6%2011%2014.6%2011.3%2013.7%2011.7%2012.8%2012.2%2011.9%2012.9%2011.2%2013.8%2010.7%2014.7%2010.2%2015.6%2010%2016.6%209.9%2017.6%209.8Z;%20M18.6%209.9%2019.5%209.4%2020.3%208.8%2021.1%208.2%2022%207.8%2023%207.6%2023.9%207.5%2024.9%207.6%2025.9%207.8%2026.8%208.2%2027.6%208.7%2028.5%209.3%2029.3%209.9%2030.1%2010.5%2030.9%2011%2031.7%2011.6%2032.5%2012.2%2033.3%2012.8%2033.7%2013.1%2034.1%2013.3%2034.9%2013.9%2035.7%2014.5%2036.6%2015%2037.4%2015.6%2038.2%2016.2%2039%2016.8%2039.7%2017.5%2040.2%2018.3%2040.7%2019.2%2040.9%2020.1%2041%2021.1%2040.9%2022.1%2040.7%2023.1%2040.3%2024%2040%2024.9%2039.7%2025.9%2039.4%2026.8%2039%2027.8%2038.7%2028.7%2038.4%2029.6%2038.1%2030.6%2037.8%2031.5%2037.5%2032.5%2037.2%2033.4%2036.9%2034.4%2036.6%2035.3%2036.2%2036.2%2035.7%2037.1%2035%2037.8%2034.3%2038.4%2033.4%2038.9%2032.5%2039.3%2031.5%2039.5%2030.5%2039.5%2030%2039.5%2029.5%2039.5%2028.5%2039.5%2027.5%2039.5%2026.5%2039.5%2025.5%2039.4%2024.5%2039.4%2023.6%2039.4%2022.6%2039.4%2021.6%2039.5%2020.6%2039.5%2019.6%2039.5%2018.6%2039.5%2017.6%2039.5%2016.6%2039.5%2015.6%2039.3%2014.7%2039%2013.8%2038.5%2013.1%2037.9%2012.4%2037.2%2011.9%2036.3%2011.5%2035.4%2011.2%2034.5%2010.9%2033.5%2010.6%2032.6%2010.3%2031.6%2010%2030.7%209.7%2029.7%209.3%2028.8%209%2027.9%208.7%2026.9%208.4%2026%208%2025%207.7%2024.1%207.4%2023.2%207.1%2022.2%207.1%2021.7%207%2021.2%207.1%2020.2%207.3%2019.3%207.7%2018.4%208.3%2017.5%208.9%2016.8%209.7%2016.2%2010.5%2015.6%2011.4%2015.1%2012.2%2014.5%2013%2014%2013.8%2013.4%2014.6%2012.8%2015.4%2012.3%2016.2%2011.7%2017%2011.1%2017.8%2010.5Z;%20M15.4%2012.3%2016.2%2011.7%2017%2011.1%2017.8%2010.5%2018.6%209.9%2019.5%209.4%2020.3%208.8%2021.1%208.3%2022%207.8%2023%207.6%2023.9%207.5%2024.9%207.6%2025.9%207.8%2026.8%208.2%2027.6%208.7%2028.5%209.3%2029.3%209.9%2030.1%2010.5%2030.9%2011%2031.7%2011.6%2032.5%2012.2%2033.3%2012.8%2034.1%2013.3%2034.9%2013.9%2035.7%2014.5%2036.6%2015%2037.4%2015.6%2038.2%2016.2%2039%2016.8%2039.7%2017.5%2040.2%2018.3%2040.7%2019.2%2040.9%2020.1%2041%2021.1%2040.9%2022.1%2040.7%2023.1%2040.3%2024%2040%2024.9%2039.7%2025.9%2039.4%2026.8%2039%2027.8%2038.7%2028.7%2038.4%2029.6%2038.1%2030.6%2037.8%2031.5%2037.5%2032.5%2037.2%2033.4%2036.9%2034.4%2036.6%2035.3%2036.2%2036.2%2035.7%2037.1%2035%2037.8%2034.3%2038.4%2033.4%2038.9%2032.5%2039.3%2031.5%2039.4%2030.5%2039.5%2029.5%2039.5%2028.5%2039.5%2027.5%2039.5%2026.5%2039.5%2025.5%2039.4%2024.5%2039.4%2023.6%2039.4%2022.6%2039.4%2021.6%2039.5%2020.6%2039.5%2019.6%2039.5%2018.6%2039.5%2017.6%2039.5%2016.6%2039.5%2015.6%2039.3%2014.7%2039%2013.8%2038.5%2013.1%2037.9%2012.4%2037.2%2011.9%2036.3%2011.5%2035.4%2011.2%2034.5%2010.9%2033.5%2010.6%2032.6%2010.3%2031.6%2010%2030.7%209.7%2029.7%209.3%2028.8%209%2027.9%208.7%2026.9%208.4%2026%208%2025%207.7%2024.1%207.4%2023.2%207.1%2022.2%207%2021.2%207.1%2020.2%207.3%2019.3%207.7%2018.4%208.3%2017.5%208.9%2016.8%209.7%2016.2%2010.5%2015.6%2011.4%2015.1%2012.2%2014.5%2013%2014%2013.8%2013.4%2014.6%2012.8Z;%20M17%2012.8%2017.7%2012.1%2018.5%2011.5%2019.3%2010.9%2020.1%2010.5%2020.2%2010.4%2021.1%2010%2022%209.7%2023%209.4%2024%209.2%2025%209%2026%209%2027%209%2027.6%209.1%2028%209.1%2028.9%209.3%2029.9%209.6%2030.9%209.9%2031.8%2010.3%2032.6%2010.8%2033.5%2011.3%2034.3%2011.9%2034.6%2012.2%2035%2012.6%2035.7%2013.3%2036.4%2014.1%2036.9%2014.9%2037.4%2015.8%2037.9%2016.6%2038.3%2017.6%2038.6%2018.5%2038.6%2018.7%2038.8%2019.5%2038.9%2020.5%2039%2021.5%2039%2022.5%2038.9%2023.5%2038.7%2024.5%2038.5%2025.4%2038.2%2026.3%2038.2%2026.4%2037.8%2027.3%2037.4%2028.2%2036.8%2029.1%2036.2%2029.9%2035.6%2030.6%2034.9%2031.3%2034.2%2032%2033.8%2032.5%2033.5%2032.8%2032.8%2033.5%2032.1%2034.2%2031.4%2034.9%2030.7%2035.6%2029.9%2036.2%2029.1%2036.8%2028.2%2037.3%2027.9%2037.5%2027.4%2037.8%2026.4%2038.2%2025.5%2038.5%2024.5%2038.7%2023.5%2038.9%2022.5%2039%2021.5%2039%2020.5%2038.9%2020.4%2038.9%2019.5%2038.8%2018.6%2038.6%2017.6%2038.3%2016.7%2037.9%2015.8%2037.5%2014.9%2037%2014.1%2036.4%2013.4%2035.8%2013.3%2035.8%2012.6%2035.1%2012%2034.3%2011.3%2033.5%2010.8%2032.7%2010.3%2031.8%209.9%2030.9%209.6%2030%209.4%2029.3%209.3%2029%209.1%2028%209%2027%209%2026%209%2025%209.2%2024%209.4%2023%209.6%2022.1%209.8%2021.7%2010%2021.1%2010.4%2020.2%2010.9%2019.4%2011.4%2018.5%2012.1%2017.8%2012.7%2017%2013.4%2016.3%2014.2%2015.6%2014.2%2015.5%2014.9%2014.9%2015.6%2014.2%2016.3%2013.5Z;%20M33.5%2011.3%2034.3%2011.9%2035%2012.6%2035.3%2012.8%2035.7%2013.3%2036.4%2014.1%2036.9%2014.9%2037.4%2015.8%2037.9%2016.6%2038.3%2017.6%2038.3%2017.7%2038.6%2018.5%2038.8%2019.5%2038.9%2020.5%2039%2021.5%2039%2022.5%2038.9%2023.5%2038.9%2023.5%2038.7%2024.5%2038.5%2025.4%2038.2%2026.4%2037.8%2027.3%2037.4%2028.2%2036.9%2028.9%2036.8%2029.1%2036.2%2029.9%2035.6%2030.6%2034.9%2031.3%2034.2%2032%2033.5%2032.8%2033.1%2033.2%2032.8%2033.5%2032.1%2034.2%2031.4%2034.9%2030.7%2035.6%2029.9%2036.2%2029.1%2036.8%2028.7%2037%2028.2%2037.3%2027.4%2037.8%2026.4%2038.2%2025.5%2038.5%2024.5%2038.7%2023.5%2038.9%2023.3%2038.9%2022.5%2039%2021.5%2039%2020.5%2038.9%2019.5%2038.8%2018.6%2038.6%2017.6%2038.3%2017.6%2038.3%2016.7%2037.9%2015.8%2037.5%2014.9%2037%2014.1%2036.4%2013.3%2035.8%2012.7%2035.2%2012.6%2035.1%2012%2034.3%2011.3%2033.5%2010.8%2032.7%2010.3%2031.8%209.9%2030.9%209.7%2030.3%209.6%2029.9%209.3%2029%209.1%2028%209%2027%209%2026%209%2025%209.1%2024.5%209.2%2024%209.4%2023%209.6%2022.1%2010%2021.1%2010.4%2020.2%2010.9%2019.4%2011.1%2019.1%2011.5%2018.5%2012.1%2017.7%2012.7%2017%2013.5%2016.3%2014.2%2015.6%2014.9%2014.9%2014.9%2014.8%2015.6%2014.2%2016.3%2013.5%2017%2012.8%2017.7%2012.1%2018.5%2011.5%2019.3%2011%2019.3%2010.9%2020.2%2010.4%2021.1%2010%2022%209.7%2023%209.4%2024%209.2%2024.7%209.1%2025%209%2026%209%2027%209%2028%209.1%2028.9%209.3%2029.9%209.6%2030.4%209.7%2030.9%209.9%2031.8%2010.3%2032.6%2010.8Z;%20M33.2%2011.1%2034.2%2011.2%2035.1%2011.4%2036%2011.9%2036.6%2012.7%2036.8%2013.7%2036.9%2014.7%2036.9%2015.7%2037%2016.7%2037.1%2017.7%2037.3%2018.6%2037.9%2019.4%2038.5%2020.2%2039.2%2020.9%2039.8%2021.7%2040.5%2022.4%2040.9%2023.3%2041%2024.3%2040.7%2025.2%2040.1%2026%2039.4%2026.8%2038.8%2027.5%2038.1%2028.3%2037.5%2029.1%2037.1%2030%2037%2031%2037%2031.9%2036.9%2032.9%2036.8%2033.9%2036.7%2034.9%2036.2%2035.8%2035.5%2036.4%2034.5%2036.8%2033.6%2036.8%2032.6%2036.9%2031.6%2037%2030.6%2037.1%2029.6%2037.2%2028.8%2037.7%2028%2038.4%2027.3%2039%2026.5%2039.7%2025.8%2040.3%2024.9%2040.8%2023.9%2041%2023%2040.8%2022.1%2040.2%2021.4%2039.6%2020.6%2038.9%2019.9%2038.3%2019.1%2037.6%2018.3%2037.2%2017.3%2037%2016.3%2037%2015.3%2036.9%2014.3%2036.8%2013.3%2036.7%2012.4%2036.4%2011.7%2035.7%2011.3%2034.8%2011.2%2033.8%2011.1%2032.8%2011%2031.8%2011%2030.8%2010.9%2029.9%2010.4%2029%209.8%2028.2%209.1%2027.5%208.5%2026.7%207.8%2026%207.3%2025.1%207%2024.2%207.1%2023.2%207.6%2022.3%208.2%2021.6%208.9%2020.8%209.5%2020.1%2010.2%2019.3%2010.7%2018.5%2010.9%2017.5%2011%2016.6%2011.1%2015.6%2011.1%2014.6%2011.2%2013.6%2011.5%2012.6%2012.1%2011.9%2013%2011.4%2013.9%2011.2%2014.9%2011.1%2015.9%2011%2016.9%2011%2017.9%2010.9%2018.8%2010.6%2019.6%2010%2020.4%209.3%2021.1%208.6%2021.9%208%2022.6%207.4%2023.6%207%2024.6%207.1%2025.5%207.5%2026.2%208.1%2027%208.7%2027.7%209.4%2028.5%2010%2029.3%2010.6%2030.2%2010.9%2031.2%2011%2032.2%2011.1Z;%20M27.7%209.4%2028.5%2010%2029.3%2010.6%2030.2%2010.9%2031.2%2011%2032.2%2011.1%2033.2%2011.1%2034.2%2011.2%2035.1%2011.4%2036%2011.9%2036.6%2012.7%2036.8%2013.7%2036.9%2014.7%2036.9%2015.7%2037%2016.7%2037.1%2017.7%2037.3%2018.6%2037.9%2019.4%2038.5%2020.2%2039.2%2020.9%2039.8%2021.7%2040.5%2022.4%2040.9%2023.3%2041%2024.3%2040.7%2025.2%2040.1%2026%2039.4%2026.8%2038.8%2027.5%2038.1%2028.3%2037.5%2029.1%2037.1%2030%2037%2031%2037%2031.9%2036.9%2032.9%2036.8%2033.9%2036.7%2034.9%2036.2%2035.8%2035.5%2036.4%2034.5%2036.8%2033.6%2036.9%2032.6%2036.9%2031.6%2037%2030.6%2037.1%2029.6%2037.2%2028.8%2037.7%2028%2038.4%2027.3%2039%2026.5%2039.7%2025.8%2040.3%2024.9%2040.8%2023.9%2041%2023%2040.8%2022.1%2040.2%2021.4%2039.6%2020.6%2038.9%2019.9%2038.3%2019.1%2037.6%2018.3%2037.2%2017.3%2037%2016.3%2037%2015.3%2036.9%2014.3%2036.8%2013.3%2036.7%2012.4%2036.4%2011.7%2035.7%2011.3%2034.8%2011.2%2033.8%2011.1%2032.8%2011%2031.8%2011%2030.8%2010.9%2029.9%2010.4%2029%209.8%2028.2%209.1%2027.5%208.5%2026.7%207.8%2026%207.3%2025.1%207%2024.2%207.1%2023.2%207.6%2022.3%208.2%2021.6%208.9%2020.8%209.5%2020.1%2010.2%2019.3%2010.7%2018.5%2010.9%2017.5%2011%2016.5%2011.1%2015.6%2011.1%2014.6%2011.2%2013.6%2011.5%2012.6%2012.1%2011.9%2013%2011.4%2013.9%2011.2%2014.9%2011.1%2015.9%2011%2016.9%2011%2017.9%2010.9%2018.8%2010.6%2019.6%2010%2020.4%209.3%2021.1%208.6%2021.9%208%2022.6%207.4%2023.6%207%2024.6%207.1%2025.5%207.5%2026.2%208.1%2027%208.7Z;%20M27.9%2010.6%2028.8%2010.3%2029.8%2010.1%2030.8%2010%2031.8%2010.1%2032.7%2010.3%2033.7%2010.6%2034.6%2011.1%2034.8%2011.3%2035.4%2011.7%2036.1%2012.4%2036.7%2013.1%2037.2%2014%2037.6%2014.9%2037.9%2015.9%2038%2016.9%2038%2017.9%2037.8%2018.8%2037.5%2019.8%2037.1%2020.7%2036.8%2021.6%2036.5%2022.6%2036.4%2023.6%2036.4%2024.4%2036.4%2024.6%2036.5%2025.5%2036.8%2026.5%2037.2%2027.4%2037.6%2028.3%2037.8%2029.3%2038%2030.3%2038%2031.3%2037.8%2032.3%2037.6%2033.2%2037.2%2034.1%2036.6%2035%2036%2035.7%2035.3%2036.4%2034.4%2037%2034.1%2037.2%2033.6%2037.4%2032.6%2037.8%2031.6%2037.9%2030.6%2038%2029.7%2037.9%2028.7%2037.7%2027.8%2037.3%2026.8%2036.9%2025.9%2036.6%2024.9%2036.4%2023.9%2036.4%2022.9%2036.4%2022%2036.6%2021%2037%2020.1%2037.4%2020.1%2037.4%2019.2%2037.7%2018.2%2037.9%2017.2%2038%2016.2%2037.9%2015.3%2037.7%2014.3%2037.4%2013.4%2036.9%2012.6%2036.3%2011.9%2035.6%2011.3%2034.9%2010.8%2034%2010.4%2033.1%2010.1%2032.1%2010%2031.1%2010%2030.6%2010%2030.1%2010.2%2029.2%2010.5%2028.2%2010.9%2027.3%2011.2%2026.4%2011.5%2025.4%2011.6%2024.4%2011.6%2023.4%2011.5%2022.5%2011.2%2021.5%2010.8%2020.6%2010.4%2019.7%2010.2%2018.7%2010%2017.7%2010%2016.7%2010%2016.6%2010.2%2015.7%2010.4%2014.8%2010.8%2013.9%2011.4%2013%2012%2012.3%2012.7%2011.6%2013.6%2011%2014.4%2010.6%2015.4%2010.2%2016.4%2010.1%2017.4%2010%2018.3%2010.1%2019.3%2010.3%2020.2%2010.7%2020.9%2011%2021.2%2011.1%2022.1%2011.4%2023.1%2011.6%2024.1%2011.6%2025.1%2011.6%2026%2011.4%2027%2011Z;%20M36%2035.7%2035.3%2036.4%2034.4%2037%2033.6%2037.4%2032.6%2037.8%2031.6%2037.9%2030.6%2038%2029.7%2037.9%2028.7%2037.7%2027.8%2037.3%2026.8%2036.9%2025.9%2036.6%2024.9%2036.4%2023.9%2036.4%2022.9%2036.4%2022%2036.6%2021%2037%2020.1%2037.4%2019.2%2037.7%2018.2%2037.9%2017.2%2038%2016.2%2037.9%2015.3%2037.7%2014.3%2037.4%2013.4%2036.9%2012.6%2036.3%2011.9%2035.6%2011.3%2034.9%2010.8%2034%2010.4%2033.1%2010.1%2032.1%2010%2031.1%2010%2030.2%2010.2%2029.2%2010.5%2028.2%2010.9%2027.3%2011.2%2026.4%2011.5%2025.4%2011.6%2024.4%2011.6%2023.4%2011.5%2022.5%2011.2%2021.5%2010.8%2020.6%2010.4%2019.7%2010.2%2018.7%2010%2017.7%2010%2016.7%2010.2%2015.7%2010.4%2014.8%2010.8%2013.9%2011.4%2013%2012%2012.3%2012.7%2011.6%2013.6%2011%2014.4%2010.6%2015.4%2010.2%2016.4%2010.1%2017.4%2010%2018.3%2010.1%2019.3%2010.3%2020.2%2010.7%2021.2%2011.1%2022.1%2011.4%2023.1%2011.6%2024.1%2011.6%2025.1%2011.6%2026%2011.4%2027%2011%2027.9%2010.6%2028.8%2010.3%2029.8%2010.1%2030.8%2010%2031.8%2010.1%2032.7%2010.3%2033.7%2010.6%2034.6%2011.1%2035.4%2011.7%2036.1%2012.4%2036.7%2013.1%2037.2%2014%2037.6%2014.9%2037.9%2015.9%2038%2016.9%2038%2017.8%2037.8%2018.8%2037.5%2019.8%2037.1%2020.7%2036.8%2021.6%2036.5%2022.6%2036.4%2023.6%2036.4%2024.6%2036.5%2025.5%2036.8%2026.5%2037.2%2027.4%2037.6%2028.3%2037.8%2029.3%2038%2030.3%2038%2031.3%2037.8%2032.3%2037.6%2033.2%2037.2%2034.1%2036.6%2035Z;%20M32.1%2032.1%2031.4%2032.8%2030.7%2033.5%2029.9%2034.1%2029.1%2034.7%2028.3%2035.3%2027.6%2035.8%2027.5%2035.8%2026.6%2036.4%2025.8%2036.8%2024.9%2037.3%2024%2037.7%2023.1%2038%2022.1%2038.3%2021.2%2038.6%2020.2%2038.8%2019.2%2038.9%2018.2%2039%2017.2%2039%2016.6%2038.9%2016.3%2038.9%2015.3%2038.7%2014.3%2038.4%2013.4%2038%2012.5%2037.5%2011.7%2036.9%2011.1%2036.3%2010.5%2035.5%2010%2034.6%209.6%2033.7%209.3%2032.7%209.1%2031.7%209.1%2031.4%209%2030.8%209%2029.8%209.1%2028.8%209.2%2027.8%209.4%2026.8%209.7%2025.9%2010%2024.9%2010.3%2024%2010.7%2023.1%2011.2%2022.2%2011.6%2021.4%2012.2%2020.5%2012.2%2020.4%2012.7%2019.7%2013.3%2018.9%2013.9%2018.1%2014.5%2017.3%2015.2%2016.6%2015.9%2015.9%2016.6%2015.2%2017.3%2014.5%2018.1%2013.9%2018.9%2013.3%2019.7%2012.7%2020.4%2012.2%2020.5%2012.2%2021.4%2011.6%2022.2%2011.2%2023.1%2010.7%2024%2010.3%2024.9%2010%2025.9%209.7%2026.8%209.4%2027.8%209.2%2028.8%209.1%2029.8%209%2030.8%209%2031.4%209.1%2031.7%209.1%2032.7%209.3%2033.7%209.6%2034.6%2010%2035.5%2010.5%2036.3%2011.1%2036.9%2011.7%2037.5%2012.5%2038%2013.4%2038.4%2014.3%2038.7%2015.3%2038.9%2016.3%2038.9%2016.6%2039%2017.2%2039%2018.2%2038.9%2019.2%2038.8%2020.2%2038.6%2021.2%2038.3%2022.1%2038%2023.1%2037.7%2024%2037.3%2024.9%2036.8%2025.8%2036.4%2026.6%2035.8%2027.5%2035.8%2027.6%2035.3%2028.3%2034.7%2029.1%2034.1%2029.9%2033.5%2030.7%2032.8%2031.4Z;%20M24.3%2010.2%2024.9%2010%2025.9%209.7%2026.8%209.4%2027.1%209.4%2027.8%209.2%2028.8%209.1%2029.8%209%2029.9%209%2030.8%209%2031.7%209.1%2032.7%209.3%2032.8%209.3%2033.7%209.6%2034.6%2010%2035.5%2010.5%2035.5%2010.5%2036.3%2011.1%2036.9%2011.7%2037.5%2012.5%2037.5%2012.5%2038%2013.4%2038.4%2014.3%2038.7%2015.2%2038.7%2015.3%2038.9%2016.3%2039%2017.2%2039%2018.1%2039%2018.2%2038.9%2019.2%2038.8%2020.2%2038.6%2020.9%2038.6%2021.2%2038.3%2022.1%2038%2023.1%2037.8%2023.7%2037.7%2024%2037.3%2024.9%2036.8%2025.8%2036.5%2026.4%2036.4%2026.6%2035.8%2027.5%2035.3%2028.3%2035%2028.8%2034.7%2029.1%2034.1%2029.9%2033.5%2030.7%2033.1%2031.1%2032.8%2031.4%2032.1%2032.1%2031.4%2032.8%2031.1%2033.1%2030.7%2033.5%2029.9%2034.1%2029.1%2034.7%2028.8%2035%2028.3%2035.3%2027.5%2035.8%2026.6%2036.4%2026.4%2036.5%2025.8%2036.8%2024.9%2037.3%2024%2037.7%2023.7%2037.8%2023.1%2038%2022.1%2038.3%2021.2%2038.6%2020.9%2038.6%2020.2%2038.8%2019.2%2038.9%2018.2%2039%2018.1%2039%2017.2%2039%2016.3%2038.9%2015.3%2038.7%2015.2%2038.7%2014.3%2038.4%2013.4%2038%2012.5%2037.5%2012.5%2037.5%2011.7%2036.9%2011.1%2036.3%2010.5%2035.5%2010.5%2035.5%2010%2034.6%209.6%2033.7%209.3%2032.8%209.3%2032.7%209.1%2031.7%209%2030.8%209%2029.9%209%2029.8%209.1%2028.8%209.2%2027.8%209.4%2027.1%209.4%2026.8%209.7%2025.9%2010%2024.9%2010.2%2024.3%2010.3%2024%2010.7%2023.1%2011.2%2022.2%2011.5%2021.6%2011.6%2021.4%2012.2%2020.5%2012.7%2019.7%2013%2019.2%2013.3%2018.9%2013.9%2018.1%2014.5%2017.3%2014.9%2016.9%2015.2%2016.6%2015.9%2015.9%2016.6%2015.2%2016.9%2014.9%2017.3%2014.5%2018.1%2013.9%2018.9%2013.3%2019.2%2013%2019.7%2012.7%2020.5%2012.2%2021.4%2011.6%2021.6%2011.5%2022.2%2011.2%2023.1%2010.7%2024%2010.3Z;%20M22.5%207.8%2023.2%207.2%2024.2%207%2025.1%207.4%2025.7%208.1%2026.2%209%2026.8%209.8%2027.3%2010.6%2028.1%2011.2%2029%2011.3%2030%2011%2030.9%2010.6%2031.8%2010.3%2032.8%209.9%2033.7%2010%2034.5%2010.6%2034.9%2011.5%2034.8%2012.5%2034.8%2013.5%2034.7%2014.5%2034.7%2015.5%2035.2%2016.3%2036%2016.8%2037%2017%2037.9%2017.3%2038.9%2017.5%2039.8%2017.9%2040.4%2018.7%2040.5%2019.7%2040%2020.5%2039.3%2021.3%2038.7%2022%2038.1%2022.8%2037.6%2023.7%2037.7%2024.6%2038.3%2025.4%2038.9%2026.2%2039.6%2027%2040.2%2027.7%2040.5%2028.6%2040.3%2029.6%2039.5%2030.3%2038.6%2030.6%2037.6%2030.8%2036.7%2031%2035.7%2031.3%2035%2031.9%2034.6%2032.8%2034.7%2033.8%2034.8%2034.8%2034.8%2035.8%2034.8%2036.8%2034.3%2037.6%2033.4%2038.1%2032.4%2038%2031.5%2037.6%2030.6%2037.2%2029.7%2036.9%2028.7%2036.6%2027.8%2036.9%2027.1%2037.6%2026.6%2038.5%2026.1%2039.3%2025.5%2040.2%2024.8%2040.8%2023.8%2041%2022.9%2040.6%2022.3%2039.9%2021.8%2039%2021.2%2038.2%2020.7%2037.4%2019.9%2036.8%2019%2036.7%2018%2037%2017.1%2037.4%2016.2%2037.7%2015.2%2038.1%2014.3%2038%2013.5%2037.4%2013.1%2036.5%2013.2%2035.5%2013.2%2034.5%2013.3%2033.5%2013.3%2032.5%2012.8%2031.7%2012%2031.2%2011%2031%2010.1%2030.7%209.1%2030.5%208.2%2030.1%207.6%2029.3%207.5%2028.3%208%2027.5%208.7%2026.7%209.3%2026%209.9%2025.2%2010.4%2024.3%2010.3%2023.4%209.7%2022.6%209.1%2021.8%208.4%2021%207.8%2020.3%207.5%2019.4%207.7%2018.4%208.5%2017.7%209.4%2017.4%2010.4%2017.2%2011.3%2017%2012.3%2016.7%2013%2016.1%2013.4%2015.2%2013.3%2014.2%2013.2%2013.2%2013.2%2012.2%2013.2%2011.2%2013.7%2010.4%2014.6%209.9%2015.6%2010%2016.5%2010.4%2017.4%2010.8%2018.3%2011.1%2019.3%2011.4%2020.2%2011.1%2020.9%2010.4%2021.4%209.5%2021.9%208.7Z'%3e%3c/animate%3e%3canimateTransform%20attributeName='transform'%20attributeType='XML'%20type='rotate'%20dur='5s'%20repeatCount='indefinite'%20calcMode='spline'%20keySplines='0.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8;%200.5%200.2%200%200.8'%20keyTimes='0;%200.14;%200.29;%200.43;%200.57;%200.71;%200.86;%201'%20values='0%2024%2024;%20154%2024%2024;%20309%2024%2024;%20463%2024%2024;%20617%2024%2024;%20771%2024%2024;%20926%2024%2024;%201080%2024%2024'%3e%3c/animateTransform%3e%3c/path%3e%3c/svg%3e")}.shape.oval{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M231.309%20231.31C161.705%20300.91%2068.8765%20320.94%2023.9707%20276.03C-20.9352%20231.12%20-0.913322%20138.29%2068.6908%2068.6899C138.295%20-0.91011%20231.123%20-20.9401%20276.029%2023.9699C320.935%2068.8799%20300.913%20161.71%20231.309%20231.31Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M231.309%20231.31C161.705%20300.91%2068.8765%20320.94%2023.9707%20276.03C-20.9352%20231.12%20-0.913322%20138.29%2068.6908%2068.6899C138.295%20-0.91011%20231.123%20-20.9401%20276.029%2023.9699C320.935%2068.8799%20300.913%20161.71%20231.309%20231.31Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.pentagon{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M109.63%2024.3699C125.24%2012.2899%20133.04%206.24994%20141.38%203.24994C153.44%20-1.08006%20166.56%20-1.08006%20178.62%203.24994C186.96%206.24994%20194.76%2012.2899%20210.37%2024.3699L244.51%2050.8L278.63%2075.56C294.82%2087.31%20302.92%2093.1899%20308.33%20100.57C316.15%20111.26%20320.27%20124.39%20319.99%20137.82C319.79%20147.11%20316.58%20156.82%20310.14%20176.23L296.74%20216.66L284.38%20258.08C278.57%20277.52%20275.67%20287.24%20270.6%20294.8C263.26%20305.74%20252.59%20313.78%20240.32%20317.63C231.84%20320.3%20222.06%20320.14%20202.5%20319.83L160%20319.16L117.5%20319.83C97.94%20320.14%2088.16%20320.3%2079.68%20317.63C67.41%20313.78%2056.74%20305.74%2049.4%20294.8C44.33%20287.24%2041.43%20277.52%2035.62%20258.08L23.26%20216.66L9.85994%20176.23C3.41994%20156.82%200.209968%20147.11%200.0099682%20137.82C-0.270032%20124.39%203.85%20111.26%2011.67%20100.57C17.08%2093.1899%2025.18%2087.31%2041.37%2075.56L75.49%2050.8L109.63%2024.3699Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M109.63%2024.3699C125.24%2012.2899%20133.04%206.24994%20141.38%203.24994C153.44%20-1.08006%20166.56%20-1.08006%20178.62%203.24994C186.96%206.24994%20194.76%2012.2899%20210.37%2024.3699L244.51%2050.8L278.63%2075.56C294.82%2087.31%20302.92%2093.1899%20308.33%20100.57C316.15%20111.26%20320.27%20124.39%20319.99%20137.82C319.79%20147.11%20316.58%20156.82%20310.14%20176.23L296.74%20216.66L284.38%20258.08C278.57%20277.52%20275.67%20287.24%20270.6%20294.8C263.26%20305.74%20252.59%20313.78%20240.32%20317.63C231.84%20320.3%20222.06%20320.14%20202.5%20319.83L160%20319.16L117.5%20319.83C97.94%20320.14%2088.16%20320.3%2079.68%20317.63C67.41%20313.78%2056.74%20305.74%2049.4%20294.8C44.33%20287.24%2041.43%20277.52%2035.62%20258.08L23.26%20216.66L9.85994%20176.23C3.41994%20156.82%200.209968%20147.11%200.0099682%20137.82C-0.270032%20124.39%203.85%20111.26%2011.67%20100.57C17.08%2093.1899%2025.18%2087.31%2041.37%2075.56L75.49%2050.8L109.63%2024.3699Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.pill{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M79.86%2037.77C130.22%20-12.59%20211.87%20-12.59%20262.23%2037.77C312.59%2088.13%20312.59%20169.78%20262.23%20220.14L220.14%20262.23C169.78%20312.59%2088.13%20312.59%2037.77%20262.23C-12.59%20211.87%20-12.59%20130.22%2037.77%2079.86L79.86%2037.77Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M79.86%2037.77C130.22%20-12.59%20211.87%20-12.59%20262.23%2037.77C312.59%2088.13%20312.59%20169.78%20262.23%20220.14L220.14%20262.23C169.78%20312.59%2088.13%20312.59%2037.77%20262.23C-12.59%20211.87%20-12.59%20130.22%2037.77%2079.86L79.86%2037.77Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.pixel-circle{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M225.19%200H94.81V20.74H50.37V47.41H23.704V94.8101H0V225.19H23.704V272.59H50.37V299.26H94.81V320H225.19V299.26H269.63V272.59H296.3V225.19H320V94.8101H296.3V47.41H269.63V20.74H225.19V0Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M225.19%200H94.81V20.74H50.37V47.41H23.704V94.8101H0V225.19H23.704V272.59H50.37V299.26H94.81V320H225.19V299.26H269.63V272.59H296.3V225.19H320V94.8101H296.3V47.41H269.63V20.74H225.19V0Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.pixel-triangle{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='248'%20height='320'%20viewBox='0%200%20248%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M55.64%200H0V320H55.64V292.174H98.5601V265.739H143.08V235.13H179.64V210.086H216.21V179.478H248V140.522H216.21V109.912H179.64V84.869H143.08V54.261H98.5601V27.826H55.64V0Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='248'%20height='320'%20viewBox='0%200%20248%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M55.64%200H0V320H55.64V292.174H98.5601V265.739H143.08V235.13H179.64V210.086H216.21V179.478H248V140.522H216.21V109.912H179.64V84.869H143.08V54.261H98.5601V27.826H55.64V0Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.puffy{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='280'%20viewBox='0%200%20320%20280'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M319.98%20138.106C319.72%20116.574%20303.73%2099.333%20284.24%2099.621C283.17%2099.621%20282.11%2099.711%20281.06%2099.838C281.88%2099.098%20282.68%2098.341%20283.44%2097.511C297.4%2082.489%20297.69%2057.782%20284.11%2042.344C283.31%2041.443%20282.52%2040.541%20281.7%2039.675C267.74%2024.653%20245.42%2024.977%20231.82%2040.415C231.07%2041.262%20230.39%2042.146%20229.72%2043.048C229.83%2041.894%20229.9%2040.721%20229.92%2039.531C230.19%2017.998%20214.61%200.307%20195.14%200C194.57%200%20194%200%20193.43%200H192.27C177.84%200%20165.46%209.59399%20160%2023.318C154.54%209.59399%20142.15%200%20127.73%200H126.57C126%200%20125.43%200%20124.86%200C105.39%200.289%2089.8099%2017.98%2090.0699%2039.531C90.0699%2040.721%2090.15%2041.894%2090.26%2043.048C89.6%2042.146%2088.91%2041.262%2088.16%2040.415C74.58%2024.977%2052.24%2024.653%2038.28%2039.675C37.47%2040.559%2036.65%2041.443%2035.87%2042.344C22.29%2057.782%2022.58%2082.471%2036.54%2097.511C37.31%2098.341%2038.1%2099.098%2038.92%2099.838C37.88%2099.711%2036.82%2099.639%2035.74%2099.621C16.27%2099.333%200.28%20116.574%200%20138.106C0%20138.738%200%20139.369%200%20140C0%20140.631%200%20141.262%200%20141.894C0.26%20163.427%2016.26%20180.667%2035.74%20180.379C36.82%20180.379%2037.88%20180.289%2038.92%20180.162C38.1%20180.902%2037.31%20181.659%2036.54%20182.489C22.58%20197.511%2022.29%20222.218%2035.87%20237.656C36.67%20238.557%2037.47%20239.459%2038.28%20240.325C52.24%20255.347%2074.56%20255.023%2088.16%20239.585C88.91%20238.738%2089.6%20237.854%2090.26%20236.952C90.15%20238.106%2090.0799%20239.279%2090.0699%20240.469C89.8099%20262.002%20105.38%20279.711%20124.86%20280C125.43%20280%20126%20280%20126.57%20280H127.73C142.16%20280%20154.54%20270.406%20160%20256.682C165.46%20270.406%20177.85%20280%20192.27%20280H193.43C194%20280%20194.57%20280%20195.14%20280C214.61%20279.711%20230.19%20262.02%20229.93%20240.469C229.93%20239.279%20229.85%20238.106%20229.74%20236.952C230.4%20237.854%20231.09%20238.738%20231.84%20239.585C245.42%20255.023%20267.76%20255.347%20281.72%20240.325C282.53%20239.441%20283.35%20238.557%20284.13%20237.656C297.71%20222.218%20297.42%20197.529%20283.46%20182.489C282.69%20181.659%20281.9%20180.902%20281.08%20180.162C282.12%20180.289%20283.18%20180.361%20284.26%20180.379C303.73%20180.667%20319.74%20163.445%20320%20141.894C320%20141.262%20320%20140.631%20320%20140C320%20139.369%20320%20138.738%20320%20138.106H319.98Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='280'%20viewBox='0%200%20320%20280'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M319.98%20138.106C319.72%20116.574%20303.73%2099.333%20284.24%2099.621C283.17%2099.621%20282.11%2099.711%20281.06%2099.838C281.88%2099.098%20282.68%2098.341%20283.44%2097.511C297.4%2082.489%20297.69%2057.782%20284.11%2042.344C283.31%2041.443%20282.52%2040.541%20281.7%2039.675C267.74%2024.653%20245.42%2024.977%20231.82%2040.415C231.07%2041.262%20230.39%2042.146%20229.72%2043.048C229.83%2041.894%20229.9%2040.721%20229.92%2039.531C230.19%2017.998%20214.61%200.307%20195.14%200C194.57%200%20194%200%20193.43%200H192.27C177.84%200%20165.46%209.59399%20160%2023.318C154.54%209.59399%20142.15%200%20127.73%200H126.57C126%200%20125.43%200%20124.86%200C105.39%200.289%2089.8099%2017.98%2090.0699%2039.531C90.0699%2040.721%2090.15%2041.894%2090.26%2043.048C89.6%2042.146%2088.91%2041.262%2088.16%2040.415C74.58%2024.977%2052.24%2024.653%2038.28%2039.675C37.47%2040.559%2036.65%2041.443%2035.87%2042.344C22.29%2057.782%2022.58%2082.471%2036.54%2097.511C37.31%2098.341%2038.1%2099.098%2038.92%2099.838C37.88%2099.711%2036.82%2099.639%2035.74%2099.621C16.27%2099.333%200.28%20116.574%200%20138.106C0%20138.738%200%20139.369%200%20140C0%20140.631%200%20141.262%200%20141.894C0.26%20163.427%2016.26%20180.667%2035.74%20180.379C36.82%20180.379%2037.88%20180.289%2038.92%20180.162C38.1%20180.902%2037.31%20181.659%2036.54%20182.489C22.58%20197.511%2022.29%20222.218%2035.87%20237.656C36.67%20238.557%2037.47%20239.459%2038.28%20240.325C52.24%20255.347%2074.56%20255.023%2088.16%20239.585C88.91%20238.738%2089.6%20237.854%2090.26%20236.952C90.15%20238.106%2090.0799%20239.279%2090.0699%20240.469C89.8099%20262.002%20105.38%20279.711%20124.86%20280C125.43%20280%20126%20280%20126.57%20280H127.73C142.16%20280%20154.54%20270.406%20160%20256.682C165.46%20270.406%20177.85%20280%20192.27%20280H193.43C194%20280%20194.57%20280%20195.14%20280C214.61%20279.711%20230.19%20262.02%20229.93%20240.469C229.93%20239.279%20229.85%20238.106%20229.74%20236.952C230.4%20237.854%20231.09%20238.738%20231.84%20239.585C245.42%20255.023%20267.76%20255.347%20281.72%20240.325C282.53%20239.441%20283.35%20238.557%20284.13%20237.656C297.71%20222.218%20297.42%20197.529%20283.46%20182.489C282.69%20181.659%20281.9%20180.902%20281.08%20180.162C282.12%20180.289%20283.18%20180.361%20284.26%20180.379C303.73%20180.667%20319.74%20163.445%20320%20141.894C320%20141.262%20320%20140.631%20320%20140C320%20139.369%20320%20138.738%20320%20138.106H319.98Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.puffy-diamond{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M249.4%20249.754C261.48%20237.666%20265.57%20220.608%20261.66%20205.157C277.12%20209.086%20294.2%20205.001%20306.3%20192.902C324.57%20174.636%20324.57%20145.02%20306.3%20126.754C294.27%20114.727%20277.32%20110.619%20261.94%20114.43C265.37%2099.286%20261.19%2082.766%20249.4%2070.975C237.28%2058.86%20220.17%2054.78%20204.7%2058.736C208.8%2043.171%20204.75%2025.903%20192.54%2013.7C174.28%20-4.56699%20144.66%20-4.56699%20126.4%2013.7C114.27%2025.83%20110.19%2042.965%20114.17%2058.458C99%2054.986%2082.43%2059.158%2070.62%2070.975C58.83%2082.767%2054.6499%2099.289%2058.0799%20114.434C42.6899%20110.616%2025.7299%20114.723%2013.6999%20126.754C-4.57006%20145.02%20-4.57006%20174.636%2013.6999%20192.902C25.7999%20205.005%2042.89%20209.089%2058.35%20205.153C54.44%20220.605%2058.53%20237.665%2070.62%20249.754C82.38%20261.521%2098.86%20265.708%20113.98%20262.314C110.33%20277.602%20114.47%20294.371%20126.4%20306.3C144.66%20324.567%20174.28%20324.567%20192.54%20306.3C204.54%20294.301%20208.66%20277.403%20204.89%20262.043C220.32%20265.914%20237.33%20261.817%20249.4%20249.754Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M249.4%20249.754C261.48%20237.666%20265.57%20220.608%20261.66%20205.157C277.12%20209.086%20294.2%20205.001%20306.3%20192.902C324.57%20174.636%20324.57%20145.02%20306.3%20126.754C294.27%20114.727%20277.32%20110.619%20261.94%20114.43C265.37%2099.286%20261.19%2082.766%20249.4%2070.975C237.28%2058.86%20220.17%2054.78%20204.7%2058.736C208.8%2043.171%20204.75%2025.903%20192.54%2013.7C174.28%20-4.56699%20144.66%20-4.56699%20126.4%2013.7C114.27%2025.83%20110.19%2042.965%20114.17%2058.458C99%2054.986%2082.43%2059.158%2070.62%2070.975C58.83%2082.767%2054.6499%2099.289%2058.0799%20114.434C42.6899%20110.616%2025.7299%20114.723%2013.6999%20126.754C-4.57006%20145.02%20-4.57006%20174.636%2013.6999%20192.902C25.7999%20205.005%2042.89%20209.089%2058.35%20205.153C54.44%20220.605%2058.53%20237.665%2070.62%20249.754C82.38%20261.521%2098.86%20265.708%20113.98%20262.314C110.33%20277.602%20114.47%20294.371%20126.4%20306.3C144.66%20324.567%20174.28%20324.567%20192.54%20306.3C204.54%20294.301%20208.66%20277.403%20204.89%20262.043C220.32%20265.914%20237.33%20261.817%20249.4%20249.754Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.semicircle{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='200'%20viewBox='0%200%20320%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M320%20166.92C320%20185.19%20305.19%20200%20286.921%20200H33.0794C14.8102%20200%200%20185.19%200%20166.92V160C-1e-05%2071.63%2071.6344%200%20160%200C248.366%200%20320%2071.63%20320%20160V166.92Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='200'%20viewBox='0%200%20320%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M320%20166.92C320%20185.19%20305.19%20200%20286.921%20200H33.0794C14.8102%20200%200%20185.19%200%20166.92V160C-1e-05%2071.63%2071.6344%200%20160%200C248.366%200%20320%2071.63%20320%20160V166.92Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.sided-cookie4{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='280'%20height='280'%20viewBox='0%200%20280%20280'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M178.73%206.20997C238.87%20-19.91%20299.91%2041.13%20273.79%20101.27L269.47%20111.21C261.5%20129.58%20261.5%20150.42%20269.47%20168.79L273.79%20178.73C299.91%20238.87%20238.87%20299.91%20178.73%20273.79L168.79%20269.47C150.42%20261.5%20129.58%20261.5%20111.21%20269.47L101.27%20273.79C41.128%20299.91%20-19.9141%20238.87%206.20694%20178.73L10.526%20168.79C18.501%20150.42%2018.501%20129.58%2010.526%20111.21L6.20694%20101.27C-19.9141%2041.13%2041.128%20-19.91%20101.27%206.20997L111.21%2010.53C129.58%2018.5%20150.42%2018.5%20168.79%2010.53L178.73%206.20997Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='280'%20height='280'%20viewBox='0%200%20280%20280'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M178.73%206.20997C238.87%20-19.91%20299.91%2041.13%20273.79%20101.27L269.47%20111.21C261.5%20129.58%20261.5%20150.42%20269.47%20168.79L273.79%20178.73C299.91%20238.87%20238.87%20299.91%20178.73%20273.79L168.79%20269.47C150.42%20261.5%20129.58%20261.5%20111.21%20269.47L101.27%20273.79C41.128%20299.91%20-19.9141%20238.87%206.20694%20178.73L10.526%20168.79C18.501%20150.42%2018.501%20129.58%2010.526%20111.21L6.20694%20101.27C-19.9141%2041.13%2041.128%20-19.91%20101.27%206.20997L111.21%2010.53C129.58%2018.5%20150.42%2018.5%20168.79%2010.53L178.73%206.20997Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.sided-cookie6{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='296'%20height='316'%20viewBox='0%200%20296%20316'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M92.1859%2022.5702C123.276%20-7.51981%20172.724%20-7.51981%20203.814%2022.5702C213.328%2031.7702%20224.984%2038.4802%20237.738%2042.0902C279.419%2053.8902%20304.142%2096.5901%20293.552%20138.47C290.312%20151.29%20290.312%20164.71%20293.552%20177.53C304.142%20219.41%20279.419%20262.11%20237.738%20273.91C224.984%20277.52%20213.328%20284.23%20203.814%20293.43C172.724%20323.52%20123.276%20323.52%2092.1859%20293.43C82.6719%20284.23%2071.0159%20277.52%2058.2619%20273.91C16.5809%20262.11%20-8.14208%20219.41%202.44792%20177.53C5.68792%20164.71%205.68792%20151.29%202.44792%20138.47C-8.14208%2096.5901%2016.5809%2053.8902%2058.2619%2042.0902C71.0159%2038.4802%2082.6719%2031.7702%2092.1859%2022.5702Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='296'%20height='316'%20viewBox='0%200%20296%20316'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M92.1859%2022.5702C123.276%20-7.51981%20172.724%20-7.51981%20203.814%2022.5702C213.328%2031.7702%20224.984%2038.4802%20237.738%2042.0902C279.419%2053.8902%20304.142%2096.5901%20293.552%20138.47C290.312%20151.29%20290.312%20164.71%20293.552%20177.53C304.142%20219.41%20279.419%20262.11%20237.738%20273.91C224.984%20277.52%20213.328%20284.23%20203.814%20293.43C172.724%20323.52%20123.276%20323.52%2092.1859%20293.43C82.6719%20284.23%2071.0159%20277.52%2058.2619%20273.91C16.5809%20262.11%20-8.14208%20219.41%202.44792%20177.53C5.68792%20164.71%205.68792%20151.29%202.44792%20138.47C-8.14208%2096.5901%2016.5809%2053.8902%2058.2619%2042.0902C71.0159%2038.4802%2082.6719%2031.7702%2092.1859%2022.5702Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.sided-cookie7{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='316'%20viewBox='0%200%20320%20316'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M112.67%2019.78C116.243%2016.64%20118.029%2015.07%20119.671%2013.8C143.425%20-4.6%20176.575%20-4.6%20200.329%2013.8C201.971%2015.07%20203.757%2016.64%20207.33%2019.78C208.526%2020.84%20209.124%2021.3601%20209.724%2021.8701C218.136%2028.9201%20228.171%2033.7699%20238.92%2035.9599C239.688%2036.1199%20240.471%2036.26%20242.038%2036.54C246.719%2037.38%20249.059%2037.79%20251.075%2038.29C280.234%2045.43%20300.902%2071.4099%20301.364%20101.49C301.396%20103.57%20301.283%20105.95%20301.057%20110.71C300.982%20112.31%20300.944%20113.1%20300.925%20113.89C300.665%20124.88%20303.143%20135.76%20308.136%20145.55C308.493%20146.25%20308.872%20146.95%20309.63%20148.36C311.894%20152.55%20313.026%20154.64%20313.897%20156.53C326.503%20183.83%20319.127%20216.23%20295.949%20235.34C294.347%20236.67%20292.42%20238.06%20288.566%20240.85C287.276%20241.79%20286.63%20242.25%20286.007%20242.73C277.27%20249.38%20270.326%20258.11%20265.803%20268.12C265.48%20268.84%20265.169%20269.57%20264.547%20271.04C262.69%20275.43%20261.761%20277.62%20260.832%20279.48C247.393%20306.38%20217.526%20320.8%20188.162%20314.56C186.132%20314.12%20183.842%20313.48%20179.262%20312.2C177.728%20311.78%20176.962%20311.56%20176.203%20311.37C165.569%20308.67%20154.431%20308.67%20143.797%20311.37C143.038%20311.56%20142.272%20311.78%20140.738%20312.2C136.158%20313.48%20133.868%20314.12%20131.838%20314.56C102.474%20320.8%2072.6071%20306.38%2059.168%20279.48C58.2388%20277.62%2057.3102%20275.43%2055.453%20271.04C54.8311%20269.57%2054.5202%20268.84%2054.1975%20268.12C49.6741%20258.11%2042.7297%20249.38%2033.993%20242.73C33.3696%20242.25%2032.7244%20241.79%2031.434%20240.85C27.5801%20238.06%2025.6532%20236.67%2024.0507%20235.34C0.872993%20216.23%20-6.50347%20183.83%206.10269%20156.53C6.97419%20154.64%208.10619%20152.55%2010.3703%20148.36C11.1283%20146.95%2011.5074%20146.25%2011.8636%20145.55C16.8568%20135.76%2019.3353%20124.88%2019.0745%20113.89C19.0559%20113.1%2019.0182%20112.31%2018.9426%20110.71C18.7168%20105.95%2018.6039%20103.57%2018.6359%20101.49C19.0982%2071.4099%2039.7665%2045.43%2068.9252%2038.29C70.9411%2037.79%2073.2814%2037.38%2077.9618%2036.54C79.5289%2036.26%2080.3125%2036.1199%2081.0795%2035.9599C91.829%2033.7699%20101.864%2028.9201%20110.276%2021.8701C110.876%2021.3601%20111.474%2020.84%20112.67%2019.78Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='316'%20viewBox='0%200%20320%20316'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M112.67%2019.78C116.243%2016.64%20118.029%2015.07%20119.671%2013.8C143.425%20-4.6%20176.575%20-4.6%20200.329%2013.8C201.971%2015.07%20203.757%2016.64%20207.33%2019.78C208.526%2020.84%20209.124%2021.3601%20209.724%2021.8701C218.136%2028.9201%20228.171%2033.7699%20238.92%2035.9599C239.688%2036.1199%20240.471%2036.26%20242.038%2036.54C246.719%2037.38%20249.059%2037.79%20251.075%2038.29C280.234%2045.43%20300.902%2071.4099%20301.364%20101.49C301.396%20103.57%20301.283%20105.95%20301.057%20110.71C300.982%20112.31%20300.944%20113.1%20300.925%20113.89C300.665%20124.88%20303.143%20135.76%20308.136%20145.55C308.493%20146.25%20308.872%20146.95%20309.63%20148.36C311.894%20152.55%20313.026%20154.64%20313.897%20156.53C326.503%20183.83%20319.127%20216.23%20295.949%20235.34C294.347%20236.67%20292.42%20238.06%20288.566%20240.85C287.276%20241.79%20286.63%20242.25%20286.007%20242.73C277.27%20249.38%20270.326%20258.11%20265.803%20268.12C265.48%20268.84%20265.169%20269.57%20264.547%20271.04C262.69%20275.43%20261.761%20277.62%20260.832%20279.48C247.393%20306.38%20217.526%20320.8%20188.162%20314.56C186.132%20314.12%20183.842%20313.48%20179.262%20312.2C177.728%20311.78%20176.962%20311.56%20176.203%20311.37C165.569%20308.67%20154.431%20308.67%20143.797%20311.37C143.038%20311.56%20142.272%20311.78%20140.738%20312.2C136.158%20313.48%20133.868%20314.12%20131.838%20314.56C102.474%20320.8%2072.6071%20306.38%2059.168%20279.48C58.2388%20277.62%2057.3102%20275.43%2055.453%20271.04C54.8311%20269.57%2054.5202%20268.84%2054.1975%20268.12C49.6741%20258.11%2042.7297%20249.38%2033.993%20242.73C33.3696%20242.25%2032.7244%20241.79%2031.434%20240.85C27.5801%20238.06%2025.6532%20236.67%2024.0507%20235.34C0.872993%20216.23%20-6.50347%20183.83%206.10269%20156.53C6.97419%20154.64%208.10619%20152.55%2010.3703%20148.36C11.1283%20146.95%2011.5074%20146.25%2011.8636%20145.55C16.8568%20135.76%2019.3353%20124.88%2019.0745%20113.89C19.0559%20113.1%2019.0182%20112.31%2018.9426%20110.71C18.7168%20105.95%2018.6039%20103.57%2018.6359%20101.49C19.0982%2071.4099%2039.7665%2045.43%2068.9252%2038.29C70.9411%2037.79%2073.2814%2037.38%2077.9618%2036.54C79.5289%2036.26%2080.3125%2036.1199%2081.0795%2035.9599C91.829%2033.7699%20101.864%2028.9201%20110.276%2021.8701C110.876%2021.3601%20111.474%2020.84%20112.67%2019.78Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.sided-cookie9{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M125.26%2013.3798C126.99%2011.9498%20127.85%2011.2398%20128.64%2010.6398C147.19%20-3.55019%20172.81%20-3.55019%20191.36%2010.6398C192.15%2011.2398%20193.01%2011.9498%20194.74%2013.3798C195.51%2014.0098%20195.89%2014.3298%20196.27%2014.6398C205%2021.5798%20215.71%2025.52%20226.82%2025.87C227.3%2025.88%20227.8%2025.8898%20228.79%2025.8998C231.02%2025.9298%20232.14%2025.9399%20233.12%2025.9899C256.36%2027.1799%20275.98%2043.8199%20281.17%2066.7299C281.39%2067.6999%20281.6%2068.8099%20282.02%2071.0199C282.2%2072.0099%20282.29%2072.4999%20282.39%2072.9799C284.66%2083.9799%20290.36%2093.9398%20298.64%20101.42C299.01%20101.75%20299.38%20102.08%20300.14%20102.73C301.83%20104.2%20302.67%20104.94%20303.39%20105.62C320.44%20121.61%20324.89%20147.11%20314.29%20168.03C313.84%20168.92%20313.29%20169.9%20312.2%20171.86C311.71%20172.74%20311.47%20173.18%20311.24%20173.61C305.99%20183.5%20304.01%20194.84%20305.6%20205.95C305.67%20206.44%20305.75%20206.93%20305.91%20207.92C306.27%20210.15%20306.45%20211.26%20306.57%20212.25C309.45%20235.57%20296.64%20257.99%20275.21%20267.13C274.3%20267.52%20273.25%20267.92%20271.17%20268.72C270.24%20269.07%20269.77%20269.25%20269.32%20269.43C259%20273.6%20250.28%20281%20244.42%20290.54C244.17%20290.96%20243.92%20291.39%20243.41%20292.25C242.27%20294.19%20241.7%20295.16%20241.16%20296C228.53%20315.73%20204.46%20324.59%20182.22%20317.67C181.28%20317.38%20180.22%20317.01%20178.12%20316.26C177.18%20315.93%20176.71%20315.76%20176.25%20315.61C165.7%20312.1%20154.3%20312.1%20143.75%20315.61C143.29%20315.76%20142.82%20315.93%20141.88%20316.26C139.78%20317.01%20138.72%20317.38%20137.78%20317.67C115.54%20324.59%2091.47%20315.73%2078.84%20296C78.3%20295.16%2077.73%20294.19%2076.59%20292.25C76.08%20291.39%2075.83%20290.96%2075.58%20290.54C69.72%20281%2061.0001%20273.6%2050.6801%20269.43C50.2301%20269.25%2049.76%20269.07%2048.83%20268.72C46.75%20267.92%2045.7001%20267.52%2044.7901%20267.13C23.3601%20257.99%2010.5501%20235.57%2013.4301%20212.25C13.5501%20211.26%2013.73%20210.15%2014.09%20207.92C14.25%20206.93%2014.3301%20206.44%2014.4001%20205.95C15.9901%20194.84%2014.01%20183.5%208.76004%20173.61C8.53004%20173.18%208.29008%20172.74%207.80008%20171.86C6.71008%20169.9%206.15999%20168.92%205.70999%20168.03C-4.89001%20147.11%20-0.439983%20121.61%2016.61%20105.62C17.33%20104.94%2018.17%20104.2%2019.86%20102.73C20.62%20102.08%2020.99%20101.75%2021.36%20101.42C29.64%2093.9398%2035.34%2083.9799%2037.61%2072.9799C37.71%2072.4999%2037.8%2072.0099%2037.98%2071.0199C38.4%2068.8099%2038.61%2067.6999%2038.83%2066.7299C44.02%2043.8199%2063.64%2027.1799%2086.88%2025.9899C87.86%2025.9399%2088.98%2025.9298%2091.21%2025.8998C92.2%2025.8898%2092.7001%2025.88%2093.1801%2025.87C104.29%2025.52%20115%2021.5798%20123.73%2014.6398C124.11%2014.3298%20124.49%2014.0098%20125.26%2013.3798Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M125.26%2013.3798C126.99%2011.9498%20127.85%2011.2398%20128.64%2010.6398C147.19%20-3.55019%20172.81%20-3.55019%20191.36%2010.6398C192.15%2011.2398%20193.01%2011.9498%20194.74%2013.3798C195.51%2014.0098%20195.89%2014.3298%20196.27%2014.6398C205%2021.5798%20215.71%2025.52%20226.82%2025.87C227.3%2025.88%20227.8%2025.8898%20228.79%2025.8998C231.02%2025.9298%20232.14%2025.9399%20233.12%2025.9899C256.36%2027.1799%20275.98%2043.8199%20281.17%2066.7299C281.39%2067.6999%20281.6%2068.8099%20282.02%2071.0199C282.2%2072.0099%20282.29%2072.4999%20282.39%2072.9799C284.66%2083.9799%20290.36%2093.9398%20298.64%20101.42C299.01%20101.75%20299.38%20102.08%20300.14%20102.73C301.83%20104.2%20302.67%20104.94%20303.39%20105.62C320.44%20121.61%20324.89%20147.11%20314.29%20168.03C313.84%20168.92%20313.29%20169.9%20312.2%20171.86C311.71%20172.74%20311.47%20173.18%20311.24%20173.61C305.99%20183.5%20304.01%20194.84%20305.6%20205.95C305.67%20206.44%20305.75%20206.93%20305.91%20207.92C306.27%20210.15%20306.45%20211.26%20306.57%20212.25C309.45%20235.57%20296.64%20257.99%20275.21%20267.13C274.3%20267.52%20273.25%20267.92%20271.17%20268.72C270.24%20269.07%20269.77%20269.25%20269.32%20269.43C259%20273.6%20250.28%20281%20244.42%20290.54C244.17%20290.96%20243.92%20291.39%20243.41%20292.25C242.27%20294.19%20241.7%20295.16%20241.16%20296C228.53%20315.73%20204.46%20324.59%20182.22%20317.67C181.28%20317.38%20180.22%20317.01%20178.12%20316.26C177.18%20315.93%20176.71%20315.76%20176.25%20315.61C165.7%20312.1%20154.3%20312.1%20143.75%20315.61C143.29%20315.76%20142.82%20315.93%20141.88%20316.26C139.78%20317.01%20138.72%20317.38%20137.78%20317.67C115.54%20324.59%2091.47%20315.73%2078.84%20296C78.3%20295.16%2077.73%20294.19%2076.59%20292.25C76.08%20291.39%2075.83%20290.96%2075.58%20290.54C69.72%20281%2061.0001%20273.6%2050.6801%20269.43C50.2301%20269.25%2049.76%20269.07%2048.83%20268.72C46.75%20267.92%2045.7001%20267.52%2044.7901%20267.13C23.3601%20257.99%2010.5501%20235.57%2013.4301%20212.25C13.5501%20211.26%2013.73%20210.15%2014.09%20207.92C14.25%20206.93%2014.3301%20206.44%2014.4001%20205.95C15.9901%20194.84%2014.01%20183.5%208.76004%20173.61C8.53004%20173.18%208.29008%20172.74%207.80008%20171.86C6.71008%20169.9%206.15999%20168.92%205.70999%20168.03C-4.89001%20147.11%20-0.439983%20121.61%2016.61%20105.62C17.33%20104.94%2018.17%20104.2%2019.86%20102.73C20.62%20102.08%2020.99%20101.75%2021.36%20101.42C29.64%2093.9398%2035.34%2083.9799%2037.61%2072.9799C37.71%2072.4999%2037.8%2072.0099%2037.98%2071.0199C38.4%2068.8099%2038.61%2067.6999%2038.83%2066.7299C44.02%2043.8199%2063.64%2027.1799%2086.88%2025.9899C87.86%2025.9399%2088.98%2025.9298%2091.21%2025.8998C92.2%2025.8898%2092.7001%2025.88%2093.1801%2025.87C104.29%2025.52%20115%2021.5798%20123.73%2014.6398C124.11%2014.3298%20124.49%2014.0098%20125.26%2013.3798Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.sided-cookie12{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M136.7%209.85021C137.24%209.32021%20137.51%209.05019%20137.74%208.83019C150.25%20-2.93981%20169.75%20-2.93981%20182.26%208.83019C182.49%209.05019%20182.76%209.32021%20183.3%209.85021C183.63%2010.1602%20183.79%2010.3201%20183.94%2010.4701C191.95%2018.1101%20203.28%2021.1401%20214.03%2018.5301C214.24%2018.4801%20214.46%2018.4202%20214.9%2018.3102C215.63%2018.1202%20216%2018.0301%20216.31%2017.9501C233.02%2014.0101%20249.92%2023.7601%20254.86%2040.2101C254.95%2040.5201%20255.05%2040.8802%20255.26%2041.6102C255.38%2042.0502%20255.44%2042.2701%20255.5%2042.4801C258.61%2053.0901%20266.91%2061.3901%20277.52%2064.5001C277.73%2064.5601%20277.95%2064.6201%20278.39%2064.7401C279.12%2064.9501%20279.48%2065.05%20279.79%2065.14C296.24%2070.08%20305.99%2086.98%20302.05%20103.69C301.97%20104%20301.88%20104.37%20301.69%20105.1C301.58%20105.54%20301.52%20105.76%20301.47%20105.97C298.86%20116.72%20301.89%20128.05%20309.53%20136.06C309.68%20136.21%20309.84%20136.37%20310.15%20136.7C310.68%20137.24%20310.95%20137.51%20311.17%20137.74C322.94%20150.25%20322.94%20169.75%20311.17%20182.26C310.95%20182.49%20310.68%20182.76%20310.15%20183.3C309.84%20183.63%20309.68%20183.79%20309.53%20183.94C301.89%20191.95%20298.86%20203.28%20301.47%20214.03C301.52%20214.24%20301.58%20214.46%20301.69%20214.9C301.88%20215.63%20301.97%20216%20302.05%20216.31C305.99%20233.02%20296.24%20249.92%20279.79%20254.86C279.48%20254.95%20279.12%20255.05%20278.39%20255.26C277.95%20255.38%20277.73%20255.44%20277.52%20255.5C266.91%20258.61%20258.61%20266.91%20255.5%20277.52C255.44%20277.73%20255.38%20277.95%20255.26%20278.39C255.05%20279.12%20254.95%20279.48%20254.86%20279.79C249.92%20296.24%20233.02%20305.99%20216.31%20302.05C216%20301.97%20215.63%20301.88%20214.9%20301.69C214.46%20301.58%20214.24%20301.52%20214.03%20301.47C203.28%20298.86%20191.95%20301.89%20183.94%20309.53C183.79%20309.68%20183.63%20309.84%20183.3%20310.15C182.76%20310.68%20182.49%20310.95%20182.26%20311.17C169.75%20322.94%20150.25%20322.94%20137.74%20311.17C137.51%20310.95%20137.24%20310.68%20136.7%20310.15C136.37%20309.84%20136.21%20309.68%20136.06%20309.53C128.05%20301.89%20116.72%20298.86%20105.97%20301.47C105.76%20301.52%20105.54%20301.58%20105.1%20301.69C104.37%20301.88%20104%20301.97%20103.69%20302.05C86.9799%20305.99%2070.08%20296.24%2065.14%20279.79C65.05%20279.48%2064.95%20279.12%2064.74%20278.39C64.62%20277.95%2064.56%20277.73%2064.5%20277.52C61.39%20266.91%2053.09%20258.61%2042.48%20255.5C42.27%20255.44%2042.05%20255.38%2041.61%20255.26C40.88%20255.05%2040.5199%20254.95%2040.2099%20254.86C23.7599%20249.92%2014.0099%20233.02%2017.9499%20216.31C18.0299%20216%2018.12%20215.63%2018.31%20214.9C18.42%20214.46%2018.48%20214.24%2018.53%20214.03C21.14%20203.28%2018.11%20191.95%2010.47%20183.94C10.32%20183.79%2010.16%20183.63%209.84996%20183.3C9.31996%20182.76%209.04994%20182.49%208.82994%20182.26C-2.94006%20169.75%20-2.94006%20150.25%208.82994%20137.74C9.04994%20137.51%209.31996%20137.24%209.84996%20136.7C10.16%20136.37%2010.32%20136.21%2010.47%20136.06C18.11%20128.05%2021.14%20116.72%2018.53%20105.97C18.48%20105.76%2018.42%20105.54%2018.31%20105.1C18.12%20104.37%2018.0299%20104%2017.9499%20103.69C14.0099%2086.98%2023.7599%2070.08%2040.2099%2065.14C40.5199%2065.05%2040.88%2064.9501%2041.61%2064.7401C42.05%2064.6201%2042.27%2064.5601%2042.48%2064.5001C53.09%2061.3901%2061.39%2053.0901%2064.5%2042.4801C64.56%2042.2701%2064.62%2042.0502%2064.74%2041.6102C64.95%2040.8802%2065.05%2040.5201%2065.14%2040.2101C70.08%2023.7601%2086.9799%2014.0101%20103.69%2017.9501C104%2018.0301%20104.37%2018.1202%20105.1%2018.3102C105.54%2018.4202%20105.76%2018.4801%20105.97%2018.5301C116.72%2021.1401%20128.05%2018.1101%20136.06%2010.4701C136.21%2010.3201%20136.37%2010.1602%20136.7%209.85021Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M136.7%209.85021C137.24%209.32021%20137.51%209.05019%20137.74%208.83019C150.25%20-2.93981%20169.75%20-2.93981%20182.26%208.83019C182.49%209.05019%20182.76%209.32021%20183.3%209.85021C183.63%2010.1602%20183.79%2010.3201%20183.94%2010.4701C191.95%2018.1101%20203.28%2021.1401%20214.03%2018.5301C214.24%2018.4801%20214.46%2018.4202%20214.9%2018.3102C215.63%2018.1202%20216%2018.0301%20216.31%2017.9501C233.02%2014.0101%20249.92%2023.7601%20254.86%2040.2101C254.95%2040.5201%20255.05%2040.8802%20255.26%2041.6102C255.38%2042.0502%20255.44%2042.2701%20255.5%2042.4801C258.61%2053.0901%20266.91%2061.3901%20277.52%2064.5001C277.73%2064.5601%20277.95%2064.6201%20278.39%2064.7401C279.12%2064.9501%20279.48%2065.05%20279.79%2065.14C296.24%2070.08%20305.99%2086.98%20302.05%20103.69C301.97%20104%20301.88%20104.37%20301.69%20105.1C301.58%20105.54%20301.52%20105.76%20301.47%20105.97C298.86%20116.72%20301.89%20128.05%20309.53%20136.06C309.68%20136.21%20309.84%20136.37%20310.15%20136.7C310.68%20137.24%20310.95%20137.51%20311.17%20137.74C322.94%20150.25%20322.94%20169.75%20311.17%20182.26C310.95%20182.49%20310.68%20182.76%20310.15%20183.3C309.84%20183.63%20309.68%20183.79%20309.53%20183.94C301.89%20191.95%20298.86%20203.28%20301.47%20214.03C301.52%20214.24%20301.58%20214.46%20301.69%20214.9C301.88%20215.63%20301.97%20216%20302.05%20216.31C305.99%20233.02%20296.24%20249.92%20279.79%20254.86C279.48%20254.95%20279.12%20255.05%20278.39%20255.26C277.95%20255.38%20277.73%20255.44%20277.52%20255.5C266.91%20258.61%20258.61%20266.91%20255.5%20277.52C255.44%20277.73%20255.38%20277.95%20255.26%20278.39C255.05%20279.12%20254.95%20279.48%20254.86%20279.79C249.92%20296.24%20233.02%20305.99%20216.31%20302.05C216%20301.97%20215.63%20301.88%20214.9%20301.69C214.46%20301.58%20214.24%20301.52%20214.03%20301.47C203.28%20298.86%20191.95%20301.89%20183.94%20309.53C183.79%20309.68%20183.63%20309.84%20183.3%20310.15C182.76%20310.68%20182.49%20310.95%20182.26%20311.17C169.75%20322.94%20150.25%20322.94%20137.74%20311.17C137.51%20310.95%20137.24%20310.68%20136.7%20310.15C136.37%20309.84%20136.21%20309.68%20136.06%20309.53C128.05%20301.89%20116.72%20298.86%20105.97%20301.47C105.76%20301.52%20105.54%20301.58%20105.1%20301.69C104.37%20301.88%20104%20301.97%20103.69%20302.05C86.9799%20305.99%2070.08%20296.24%2065.14%20279.79C65.05%20279.48%2064.95%20279.12%2064.74%20278.39C64.62%20277.95%2064.56%20277.73%2064.5%20277.52C61.39%20266.91%2053.09%20258.61%2042.48%20255.5C42.27%20255.44%2042.05%20255.38%2041.61%20255.26C40.88%20255.05%2040.5199%20254.95%2040.2099%20254.86C23.7599%20249.92%2014.0099%20233.02%2017.9499%20216.31C18.0299%20216%2018.12%20215.63%2018.31%20214.9C18.42%20214.46%2018.48%20214.24%2018.53%20214.03C21.14%20203.28%2018.11%20191.95%2010.47%20183.94C10.32%20183.79%2010.16%20183.63%209.84996%20183.3C9.31996%20182.76%209.04994%20182.49%208.82994%20182.26C-2.94006%20169.75%20-2.94006%20150.25%208.82994%20137.74C9.04994%20137.51%209.31996%20137.24%209.84996%20136.7C10.16%20136.37%2010.32%20136.21%2010.47%20136.06C18.11%20128.05%2021.14%20116.72%2018.53%20105.97C18.48%20105.76%2018.42%20105.54%2018.31%20105.1C18.12%20104.37%2018.0299%20104%2017.9499%20103.69C14.0099%2086.98%2023.7599%2070.08%2040.2099%2065.14C40.5199%2065.05%2040.88%2064.9501%2041.61%2064.7401C42.05%2064.6201%2042.27%2064.5601%2042.48%2064.5001C53.09%2061.3901%2061.39%2053.0901%2064.5%2042.4801C64.56%2042.2701%2064.62%2042.0502%2064.74%2041.6102C64.95%2040.8802%2065.05%2040.5201%2065.14%2040.2101C70.08%2023.7601%2086.9799%2014.0101%20103.69%2017.9501C104%2018.0301%20104.37%2018.1202%20105.1%2018.3102C105.54%2018.4202%20105.76%2018.4801%20105.97%2018.5301C116.72%2021.1401%20128.05%2018.1101%20136.06%2010.4701C136.21%2010.3201%20136.37%2010.1602%20136.7%209.85021Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.slanted{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='300'%20viewBox='0%200%20320%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.715%2080.54C18.289%2055.96%2019.576%2043.67%2024.303%2033.978C31.142%2019.945%2043.077%209.11002%2057.628%203.72302C67.683%202.24113e-05%2079.933%200%20104.432%200H228.137C257.764%200%20272.578%203.8147e-06%20283.887%204.854C300.261%2011.882%20312.72%2025.849%20317.927%2043.02C321.523%2054.87%20319.967%2069.73%20316.854%2099.46L304.285%20219.46C301.711%20244.04%20300.424%20256.33%20295.697%20266.02C288.858%20280.05%20276.923%20290.89%20262.372%20296.28C252.317%20300%20240.067%20300%20215.568%20300H91.863C62.236%20300%2047.422%20300%2036.113%20295.15C19.739%20288.12%207.28%20274.15%202.073%20256.98C-1.524%20245.13%200.0330019%20230.27%203.146%20200.54L15.715%2080.54Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='300'%20viewBox='0%200%20320%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.715%2080.54C18.289%2055.96%2019.576%2043.67%2024.303%2033.978C31.142%2019.945%2043.077%209.11002%2057.628%203.72302C67.683%202.24113e-05%2079.933%200%20104.432%200H228.137C257.764%200%20272.578%203.8147e-06%20283.887%204.854C300.261%2011.882%20312.72%2025.849%20317.927%2043.02C321.523%2054.87%20319.967%2069.73%20316.854%2099.46L304.285%20219.46C301.711%20244.04%20300.424%20256.33%20295.697%20266.02C288.858%20280.05%20276.923%20290.89%20262.372%20296.28C252.317%20300%20240.067%20300%20215.568%20300H91.863C62.236%20300%2047.422%20300%2036.113%20295.15C19.739%20288.12%207.28%20274.15%202.073%20256.98C-1.524%20245.13%200.0330019%20230.27%203.146%20200.54L15.715%2080.54Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.soft-boom{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M174.94%2084.95C197.48%20-28.315%20122.55%20-28.315%20145.08%2084.95C122.55%20-28.315%2053.327%200.35202%20117.49%2096.38C53.327%200.35202%200.35202%2053.33%2096.38%20117.49C0.35202%2053.33%20-28.315%20122.55%2084.95%20145.07C-28.315%20122.54%20-28.315%20197.46%2084.95%20174.93C-28.315%20197.46%200.36602%20266.67%2096.38%20202.51C0.36602%20266.67%2053.34%20319.65%20117.49%20223.62C53.327%20319.63%20122.55%20348.3%20145.07%20235.05C122.54%20348.32%20197.46%20348.32%20174.93%20235.05C197.46%20348.32%20266.67%20319.63%20202.51%20223.62C266.67%20319.63%20319.65%20266.66%20223.62%20202.51C319.63%20266.67%20348.3%20197.45%20235.05%20174.93C348.32%20197.46%20348.32%20122.54%20235.05%20145.07C348.32%20122.54%20319.63%2053.33%20223.62%20117.49C319.63%2053.33%20266.66%200.35202%20202.51%2096.38C266.67%200.36602%20197.45%20-28.302%20174.93%2084.95H174.94Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M174.94%2084.95C197.48%20-28.315%20122.55%20-28.315%20145.08%2084.95C122.55%20-28.315%2053.327%200.35202%20117.49%2096.38C53.327%200.35202%200.35202%2053.33%2096.38%20117.49C0.35202%2053.33%20-28.315%20122.55%2084.95%20145.07C-28.315%20122.54%20-28.315%20197.46%2084.95%20174.93C-28.315%20197.46%200.36602%20266.67%2096.38%20202.51C0.36602%20266.67%2053.34%20319.65%20117.49%20223.62C53.327%20319.63%20122.55%20348.3%20145.07%20235.05C122.54%20348.32%20197.46%20348.32%20174.93%20235.05C197.46%20348.32%20266.67%20319.63%20202.51%20223.62C266.67%20319.63%20319.65%20266.66%20223.62%20202.51C319.63%20266.67%20348.3%20197.45%20235.05%20174.93C348.32%20197.46%20348.32%20122.54%20235.05%20145.07C348.32%20122.54%20319.63%2053.33%20223.62%20117.49C319.63%2053.33%20266.66%200.35202%20202.51%2096.38C266.67%200.36602%20197.45%20-28.302%20174.93%2084.95H174.94Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.soft-burst{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M145.15%207.90401C151.98%20-2.63499%20168.02%20-2.63499%20174.85%207.90401L191.24%2033.165C195.73%2040.093%20204.8%2042.91%20212.69%2039.83L241.47%2028.603C253.48%2023.92%20266.45%2032.932%20265.51%2045.3L263.24%2074.95C262.61%2083.08%20268.21%2090.45%20276.49%2092.4L306.68%2099.49C319.27%20102.45%20324.23%20117.03%20315.86%20126.51L295.8%20149.21C290.3%20155.44%20290.3%20164.56%20295.8%20170.79L315.86%20193.49C324.23%20202.97%20319.27%20217.55%20306.68%20220.51L276.49%20227.6C268.21%20229.55%20262.61%20236.92%20263.24%20245.05L265.51%20274.7C266.45%20287.07%20253.48%20296.08%20241.47%20291.4L212.69%20280.17C204.8%20277.09%20195.73%20279.91%20191.24%20286.84L174.85%20312.1C168.02%20322.63%20151.98%20322.63%20145.15%20312.1L128.76%20286.84C124.27%20279.91%20115.2%20277.09%20107.31%20280.17L78.53%20291.4C66.52%20296.08%2053.55%20287.07%2054.49%20274.7L56.76%20245.05C57.39%20236.92%2051.79%20229.55%2043.51%20227.6L13.32%20220.51C0.729964%20217.55%20-4.22997%20202.97%204.14003%20193.49L24.2%20170.79C29.7%20164.56%2029.7%20155.44%2024.2%20149.21L4.14003%20126.51C-4.22997%20117.03%200.729964%20102.45%2013.32%2099.49L43.51%2092.4C51.79%2090.45%2057.39%2083.08%2056.76%2074.95L54.49%2045.3C53.55%2032.932%2066.52%2023.92%2078.53%2028.603L107.31%2039.83C115.2%2042.91%20124.27%2040.093%20128.76%2033.165L145.15%207.90401Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M145.15%207.90401C151.98%20-2.63499%20168.02%20-2.63499%20174.85%207.90401L191.24%2033.165C195.73%2040.093%20204.8%2042.91%20212.69%2039.83L241.47%2028.603C253.48%2023.92%20266.45%2032.932%20265.51%2045.3L263.24%2074.95C262.61%2083.08%20268.21%2090.45%20276.49%2092.4L306.68%2099.49C319.27%20102.45%20324.23%20117.03%20315.86%20126.51L295.8%20149.21C290.3%20155.44%20290.3%20164.56%20295.8%20170.79L315.86%20193.49C324.23%20202.97%20319.27%20217.55%20306.68%20220.51L276.49%20227.6C268.21%20229.55%20262.61%20236.92%20263.24%20245.05L265.51%20274.7C266.45%20287.07%20253.48%20296.08%20241.47%20291.4L212.69%20280.17C204.8%20277.09%20195.73%20279.91%20191.24%20286.84L174.85%20312.1C168.02%20322.63%20151.98%20322.63%20145.15%20312.1L128.76%20286.84C124.27%20279.91%20115.2%20277.09%20107.31%20280.17L78.53%20291.4C66.52%20296.08%2053.55%20287.07%2054.49%20274.7L56.76%20245.05C57.39%20236.92%2051.79%20229.55%2043.51%20227.6L13.32%20220.51C0.729964%20217.55%20-4.22997%20202.97%204.14003%20193.49L24.2%20170.79C29.7%20164.56%2029.7%20155.44%2024.2%20149.21L4.14003%20126.51C-4.22997%20117.03%200.729964%20102.45%2013.32%2099.49L43.51%2092.4C51.79%2090.45%2057.39%2083.08%2056.76%2074.95L54.49%2045.3C53.55%2032.932%2066.52%2023.92%2078.53%2028.603L107.31%2039.83C115.2%2042.91%20124.27%2040.093%20128.76%2033.165L145.15%207.90401Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.square{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M320%20172C320%20216.72%20320%20239.08%20312.98%20256.81C302.81%20282.49%20282.49%20302.81%20256.81%20312.98C239.08%20320%20216.72%20320%20172%20320H148C103.28%20320%2080.9199%20320%2063.1899%20312.98C37.5099%20302.81%2017.19%20282.49%207.02002%20256.81C1.95503e-05%20239.08%200%20216.72%200%20172V148C0%20103.28%201.95503e-05%2080.92%207.02002%2063.19C17.19%2037.515%2037.5099%2017.187%2063.1899%207.02197C80.9199%20-2.71797e-05%20103.28%200%20148%200H172C216.72%200%20239.08%20-2.71797e-05%20256.81%207.02197C282.49%2017.187%20302.81%2037.515%20312.98%2063.19C320%2080.92%20320%20103.28%20320%20148V172Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M320%20172C320%20216.72%20320%20239.08%20312.98%20256.81C302.81%20282.49%20282.49%20302.81%20256.81%20312.98C239.08%20320%20216.72%20320%20172%20320H148C103.28%20320%2080.9199%20320%2063.1899%20312.98C37.5099%20302.81%2017.19%20282.49%207.02002%20256.81C1.95503e-05%20239.08%200%20216.72%200%20172V148C0%20103.28%201.95503e-05%2080.92%207.02002%2063.19C17.19%2037.515%2037.5099%2017.187%2063.1899%207.02197C80.9199%20-2.71797e-05%20103.28%200%20148%200H172C216.72%200%20239.08%20-2.71797e-05%20256.81%207.02197C282.49%2017.187%20302.81%2037.515%20312.98%2063.19C320%2080.92%20320%20103.28%20320%20148V172Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.sunny{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='340'%20height='340'%20viewBox='0%200%20340%20340'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M261.856%2041.24C272.431%2041.96%20277.718%2042.32%20281.991%2044.18C288.175%2046.89%20293.111%2051.83%20295.816%2058.01C297.685%2062.28%20298.044%2067.57%20298.762%2078.14L300.402%20102.27C300.693%20106.55%20300.838%20108.69%20301.303%20110.73C301.975%20113.68%20303.142%20116.5%20304.754%20119.06C305.869%20120.84%20307.279%20122.45%20310.097%20125.68L326.001%20143.9C332.97%20151.89%20336.455%20155.88%20338.155%20160.22C340.615%20166.51%20340.615%20173.49%20338.155%20179.78C336.455%20184.12%20332.97%20188.11%20326.001%20196.1L310.097%20214.32C307.279%20217.55%20305.869%20219.16%20304.754%20220.94C303.142%20223.5%20301.975%20226.32%20301.303%20229.27C300.838%20231.31%20300.693%20233.45%20300.402%20237.73L298.762%20261.86C298.044%20272.43%20297.685%20277.72%20295.816%20281.99C293.111%20288.17%20288.175%20293.11%20281.991%20295.82C277.718%20297.68%20272.431%20298.04%20261.856%20298.76L237.725%20300.4C233.448%20300.69%20231.31%20300.84%20229.267%20301.3C226.316%20301.97%20223.499%20303.14%20220.937%20304.75C219.164%20305.87%20217.549%20307.28%20214.319%20310.1L196.097%20326C188.111%20332.97%20184.119%20336.45%20179.775%20338.15C173.491%20340.62%20166.509%20340.62%20160.225%20338.15C155.881%20336.45%20151.889%20332.97%20143.903%20326L125.681%20310.1C122.451%20307.28%20120.836%20305.87%20119.063%20304.75C116.501%20303.14%20113.684%20301.97%20110.733%20301.3C108.69%20300.84%20106.552%20300.69%20102.275%20300.4L78.1438%20298.76C67.5694%20298.04%2062.2822%20297.68%2058.0088%20295.82C51.8252%20293.11%2046.8887%20288.17%2044.1844%20281.99C42.3154%20277.72%2041.9561%20272.43%2041.2375%20261.86L39.5977%20237.73C39.3071%20233.45%2039.1618%20231.31%2038.6969%20229.27C38.0251%20226.32%2036.8584%20223.5%2035.2463%20220.94C34.1306%20219.16%2032.7213%20217.55%2029.9027%20214.32L13.999%20196.1C7.02996%20188.11%203.54542%20184.12%201.84516%20179.78C-0.615054%20173.49%20-0.615053%20166.51%201.84516%20160.22C3.54542%20155.88%207.02996%20151.89%2013.999%20143.9L29.9027%20125.68C32.7213%20122.45%2034.1306%20120.84%2035.2463%20119.06C36.8584%20116.5%2038.0251%20113.68%2038.6969%20110.73C39.1618%20108.69%2039.3071%20106.55%2039.5977%20102.27L41.2375%2078.14C41.9561%2067.57%2042.3154%2062.28%2044.1844%2058.01C46.8887%2051.83%2051.8252%2046.89%2058.0088%2044.18C62.2823%2042.32%2067.5694%2041.96%2078.1438%2041.24L102.275%2039.5999C106.552%2039.3099%20108.69%2039.1599%20110.733%2038.6999C113.684%2038.0299%20116.501%2036.86%20119.063%2035.25C120.836%2034.13%20122.451%2032.72%20125.681%2029.9L143.903%2014C151.889%207.02996%20155.881%203.54994%20160.225%201.84994C166.509%20-0.620064%20173.491%20-0.620064%20179.775%201.84994C184.119%203.54994%20188.111%207.02996%20196.097%2014L214.319%2029.9C217.549%2032.72%20219.164%2034.13%20220.937%2035.25C223.499%2036.86%20226.316%2038.0299%20229.267%2038.6999C231.31%2039.1599%20233.448%2039.3099%20237.725%2039.5999L261.856%2041.24Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='340'%20height='340'%20viewBox='0%200%20340%20340'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M261.856%2041.24C272.431%2041.96%20277.718%2042.32%20281.991%2044.18C288.175%2046.89%20293.111%2051.83%20295.816%2058.01C297.685%2062.28%20298.044%2067.57%20298.762%2078.14L300.402%20102.27C300.693%20106.55%20300.838%20108.69%20301.303%20110.73C301.975%20113.68%20303.142%20116.5%20304.754%20119.06C305.869%20120.84%20307.279%20122.45%20310.097%20125.68L326.001%20143.9C332.97%20151.89%20336.455%20155.88%20338.155%20160.22C340.615%20166.51%20340.615%20173.49%20338.155%20179.78C336.455%20184.12%20332.97%20188.11%20326.001%20196.1L310.097%20214.32C307.279%20217.55%20305.869%20219.16%20304.754%20220.94C303.142%20223.5%20301.975%20226.32%20301.303%20229.27C300.838%20231.31%20300.693%20233.45%20300.402%20237.73L298.762%20261.86C298.044%20272.43%20297.685%20277.72%20295.816%20281.99C293.111%20288.17%20288.175%20293.11%20281.991%20295.82C277.718%20297.68%20272.431%20298.04%20261.856%20298.76L237.725%20300.4C233.448%20300.69%20231.31%20300.84%20229.267%20301.3C226.316%20301.97%20223.499%20303.14%20220.937%20304.75C219.164%20305.87%20217.549%20307.28%20214.319%20310.1L196.097%20326C188.111%20332.97%20184.119%20336.45%20179.775%20338.15C173.491%20340.62%20166.509%20340.62%20160.225%20338.15C155.881%20336.45%20151.889%20332.97%20143.903%20326L125.681%20310.1C122.451%20307.28%20120.836%20305.87%20119.063%20304.75C116.501%20303.14%20113.684%20301.97%20110.733%20301.3C108.69%20300.84%20106.552%20300.69%20102.275%20300.4L78.1438%20298.76C67.5694%20298.04%2062.2822%20297.68%2058.0088%20295.82C51.8252%20293.11%2046.8887%20288.17%2044.1844%20281.99C42.3154%20277.72%2041.9561%20272.43%2041.2375%20261.86L39.5977%20237.73C39.3071%20233.45%2039.1618%20231.31%2038.6969%20229.27C38.0251%20226.32%2036.8584%20223.5%2035.2463%20220.94C34.1306%20219.16%2032.7213%20217.55%2029.9027%20214.32L13.999%20196.1C7.02996%20188.11%203.54542%20184.12%201.84516%20179.78C-0.615054%20173.49%20-0.615053%20166.51%201.84516%20160.22C3.54542%20155.88%207.02996%20151.89%2013.999%20143.9L29.9027%20125.68C32.7213%20122.45%2034.1306%20120.84%2035.2463%20119.06C36.8584%20116.5%2038.0251%20113.68%2038.6969%20110.73C39.1618%20108.69%2039.3071%20106.55%2039.5977%20102.27L41.2375%2078.14C41.9561%2067.57%2042.3154%2062.28%2044.1844%2058.01C46.8887%2051.83%2051.8252%2046.89%2058.0088%2044.18C62.2823%2042.32%2067.5694%2041.96%2078.1438%2041.24L102.275%2039.5999C106.552%2039.3099%20108.69%2039.1599%20110.733%2038.6999C113.684%2038.0299%20116.501%2036.86%20119.063%2035.25C120.836%2034.13%20122.451%2032.72%20125.681%2029.9L143.903%2014C151.889%207.02996%20155.881%203.54994%20160.225%201.84994C166.509%20-0.620064%20173.491%20-0.620064%20179.775%201.84994C184.119%203.54994%20188.111%207.02996%20196.097%2014L214.319%2029.9C217.549%2032.72%20219.164%2034.13%20220.937%2035.25C223.499%2036.86%20226.316%2038.0299%20229.267%2038.6999C231.31%2039.1599%20233.448%2039.3099%20237.725%2039.5999L261.856%2041.24Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.triangle{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='316'%20height='286'%20viewBox='0%200%20316%20286'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M104.461%2051.1999C119.597%2024.8199%20127.165%2011.63%20136.342%206.06C149.648%20-2.02%20166.352%20-2.02%20179.658%206.06C188.835%2011.63%20196.403%2024.8199%20211.539%2051.1999L293.309%20193.72C308.3%20219.85%20315.795%20232.91%20315.993%20243.58C316.28%20259.06%20307.949%20273.42%20294.364%20280.86C284.994%20286%20269.919%20286%20239.77%20286H76.2299C46.0809%20286%2031.0059%20286%2021.6359%20280.86C8.04994%20273.42%20-0.280059%20259.06%200.00694063%20243.58C0.204941%20232.91%207.69996%20219.85%2022.691%20193.72L104.461%2051.1999Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='316'%20height='286'%20viewBox='0%200%20316%20286'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M104.461%2051.1999C119.597%2024.8199%20127.165%2011.63%20136.342%206.06C149.648%20-2.02%20166.352%20-2.02%20179.658%206.06C188.835%2011.63%20196.403%2024.8199%20211.539%2051.1999L293.309%20193.72C308.3%20219.85%20315.795%20232.91%20315.993%20243.58C316.28%20259.06%20307.949%20273.42%20294.364%20280.86C284.994%20286%20269.919%20286%20239.77%20286H76.2299C46.0809%20286%2031.0059%20286%2021.6359%20280.86C8.04994%20273.42%20-0.280059%20259.06%200.00694063%20243.58C0.204941%20232.91%207.69996%20219.85%2022.691%20193.72L104.461%2051.1999Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}.shape.very-sunny{-webkit-mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M136.72%2013.1899C147.26%20-4.40006%20172.74%20-4.40006%20183.28%2013.1899L195.12%2032.96C201.27%2043.21%20213.4%2048.24%20224.99%2045.33L247.35%2039.73C267.24%2034.75%20285.25%2052.76%20280.27%2072.65L274.67%2095.01C271.76%20106.6%20276.79%20118.73%20287.04%20124.88L306.81%20136.72C324.4%20147.26%20324.4%20172.74%20306.81%20183.28L287.04%20195.12C276.79%20201.27%20271.76%20213.4%20274.67%20224.99L280.27%20247.35C285.25%20267.24%20267.24%20285.25%20247.35%20280.27L224.99%20274.67C213.4%20271.76%20201.27%20276.79%20195.12%20287.04L183.28%20306.81C172.74%20324.4%20147.26%20324.4%20136.72%20306.81L124.88%20287.04C118.73%20276.79%20106.6%20271.76%2095.01%20274.67L72.646%20280.27C52.763%20285.25%2034.747%20267.24%2039.729%20247.35L45.333%20224.99C48.238%20213.4%2043.214%20201.27%2032.96%20195.12L13.187%20183.28C-4.39599%20172.74%20-4.39599%20147.26%2013.187%20136.72L32.96%20124.88C43.214%20118.73%2048.238%20106.6%2045.333%2095.01L39.729%2072.65C34.747%2052.76%2052.763%2034.75%2072.645%2039.73L95.01%2045.33C106.6%2048.24%20118.73%2043.21%20124.88%2032.96L136.72%2013.1899Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e");mask-image:url("data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M136.72%2013.1899C147.26%20-4.40006%20172.74%20-4.40006%20183.28%2013.1899L195.12%2032.96C201.27%2043.21%20213.4%2048.24%20224.99%2045.33L247.35%2039.73C267.24%2034.75%20285.25%2052.76%20280.27%2072.65L274.67%2095.01C271.76%20106.6%20276.79%20118.73%20287.04%20124.88L306.81%20136.72C324.4%20147.26%20324.4%20172.74%20306.81%20183.28L287.04%20195.12C276.79%20201.27%20271.76%20213.4%20274.67%20224.99L280.27%20247.35C285.25%20267.24%20267.24%20285.25%20247.35%20280.27L224.99%20274.67C213.4%20271.76%20201.27%20276.79%20195.12%20287.04L183.28%20306.81C172.74%20324.4%20147.26%20324.4%20136.72%20306.81L124.88%20287.04C118.73%20276.79%20106.6%20271.76%2095.01%20274.67L72.646%20280.27C52.763%20285.25%2034.747%20267.24%2039.729%20247.35L45.333%20224.99C48.238%20213.4%2043.214%20201.27%2032.96%20195.12L13.187%20183.28C-4.39599%20172.74%20-4.39599%20147.26%2013.187%20136.72L32.96%20124.88C43.214%20118.73%2048.238%20106.6%2045.333%2095.01L39.729%2072.65C34.747%2052.76%2052.763%2034.75%2072.645%2039.73L95.01%2045.33C106.6%2048.24%20118.73%2043.21%20124.88%2032.96L136.72%2013.1899Z'%20fill='%23D0BCFF'/%3e%3c/svg%3e")}@keyframes to-shape-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.checkbox,.radio,.switch{--_size: 1.5rem;direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center}:is(.checkbox,.radio,.switch).small{--_size: 1rem}:is(.checkbox,.radio,.switch).large{--_size: 2rem}:is(.checkbox,.radio,.switch).extra{--_size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(--_size);block-size:var(--_size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{--_size: inherit;content:"";inline-size:var(--_size);block-size:var(--_size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(--_size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(--_size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(--_size);min-block-size:var(--_size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{--_start: 0%;--_end: 0%;--_value1: "";--_value2: "";--_track: 1rem;--_thumb: max(2.5rem, calc(var(--_track) + .5rem));display:flex;align-items:center!important;inline-size:auto;block-size:var(--_thumb);flex:none;direction:ltr;margin:0 1.25rem}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.tiny{--_track: 1rem}.slider.small{--_track: 1.5rem}.slider.medium{--_track: 2.5rem}.slider.large{--_track: 3.5rem}.slider.extra{--_track: 6rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:var(--_track);background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:var(--_thumb);inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0;z-index:1}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled~span{background:var(--outline)}.slider>span{position:absolute;block-size:var(--_track);border-radius:1rem 0 0 1rem;background:var(--primary);color:var(--on-primary);z-index:0;inset:calc(50% - (var(--_track) / 2)) var(--_end) auto var(--_start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:var(--_track);border-radius:1rem;background:var(--secondary-container);clip-path:polygon(calc(var(--_start) - .5rem) 0,0 0,0 100%,calc(var(--_start) - .5rem) 100%,calc(var(--_start) - .5rem) 0,calc(100% - var(--_end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(--_end) + .5rem) 100%,calc(100% - var(--_end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--outline-variant)}.slider:has([disabled]){opacity:.62}.slider>span>i{position:absolute;block-size:auto;inset:0 auto 0 .5rem;color:currentColor;z-index:1}.slider:not(.medium,.large,.extra)>span>i{display:none}.slider.vertical>i{transform:rotate(90deg)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(--_end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-25%)!important;padding:.75rem 1rem}.slider>.tooltip.bottom{inset:auto auto 0 calc(100% - var(--_end));transition:bottom var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,25%)!important}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-25%) scaleX(-1)!important}[dir=rtl] .slider>.tooltip.bottom{transform:translate(-50%,25%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(--_start)) auto auto;transform:translate(50%,-25%)!important}.slider>.tooltip+.tooltip.bottom{inset:auto calc(100% - var(--_start)) -.25rem auto;transform:translate(50%,25%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-25%) scaleX(-1)!important}[dir=rtl] .slider>.tooltip+.tooltip.bottom{transform:translate(50%,25%) scaleX(-1)!important}.slider>.tooltip:before{content:var(--_value1)}.slider>.tooltip+.tooltip:before{content:var(--_value2)}.slider>:focus~.tooltip{inset-block:-1rem auto;opacity:1!important;visibility:visible!important}.slider>:focus~.tooltip.bottom{inset-block:auto -1rem}.slider.vertical>.tooltip{inset-block:auto;block-size:2.5rem;inline-size:2.5rem;margin-block:calc(-1 * var(--_thumb)) 0!important;transform:rotate(90deg) translate(-75%,50%)!important}.slider.vertical>.tooltip.bottom{inset-block:auto;margin-block:0 calc(-1 * var(--_thumb))!important;transform:rotate(90deg) translate(75%,50%)!important}.slider.vertical>.tooltip+.tooltip{transform:rotate(90deg) translate(-75%,-50%)!important}.slider.vertical>.tooltip+.tooltip.bottom{transform:rotate(90deg) translate(75%,-50%)!important}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(--_end) 0 var(--_start);clip-path:none;background:currentcolor;color:inherit;border-radius:0}.slider.max.vertical>span{inset:var(--_end) 0 var(--_start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block:-1rem auto!important;opacity:1!important;visibility:visible!important}.slider>:hover~.tooltip.bottom{inset-block:auto -1rem!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem;border-radius:0}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant);border-radius:0}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{--_space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:200;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip:not(.max):hover{visibility:hidden;opacity:0}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{--_space: 0}.tooltip.medium-space{--_space: -1rem}.tooltip.large-space{--_space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(--_space)!important}.tooltip.left,.tooltip.right{margin-inline:var(--_space)!important}.tooltip.bottom{margin-block-end:var(--_space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{--_space: -1.25rem}.slider.vertical>.tooltip{--_space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){--_space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-code: 245, 245, 245;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-kbd: 33, 37, 41;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-code: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-kbd: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-code: 52, 52, 52;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-kbd: 33, 37, 41;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-code: 204, 204, 204;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-kbd: 255, 255, 255;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 0, 50, 88;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 158, 202, 255;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--eox-slider-thumb-height: 20px;--eox-slider-thumb-width: 20px;--eox-slider-track-height: 6px;--eox-slider-track-color: var(--outline-variant);--eox-slider-brightness-hover: 100%;--eox-slider-brightness-down: 100%;--eox-slider-clip-edges: 4px;--eox-slider-margin: 1.125rem}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input){font-size:1.5rem;color:var(--primary);width:100%;background:none;overflow:hidden}input[type=range]:not(.slider input[type=range]){margin:var(--eox-slider-margin);width:100%}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled{filter:grayscale(1);opacity:.3;cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{-webkit-appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{position:relative}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track{border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider input)::-webkit-slider-thumb{--thumb-radius: calc((var(--eox-slider-thumb-height) * .5) - 1px);--clip-top: calc( (var(--eox-slider-thumb-height) - var(--eox-slider-track-height)) * .5 - .5px );--clip-bottom: calc(var(--eox-slider-thumb-height) - var(--clip-top));--clip-further: calc(100% + 1px) ;--box-fill: calc( -100vmax - var(--eox-slider-thumb-width, var(--eox-slider-thumb-height)) ) 0 0 100vmax currentColor;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));background:linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--eox-slider-track-height) + 1px);background-color:currentColor;box-shadow:var(--box-fill);border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));filter:brightness(100%);clip-path:polygon(100% -1px,var(--eox-slider-clip-edges) -1px,0 var(--clip-top),-100vmax var(--clip-top),-100vmax var(--clip-bottom),0 var(--clip-bottom),var(--eox-slider-clip-edges) 100%,var(--clip-further) var(--clip-further))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-hover));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-down));cursor:grabbing}input[type=range]:not(.slider input)::-webkit-slider-runnable-track{background:linear-gradient(var(--eox-slider-track-color) 0 0) scroll no-repeat center / 100% calc(var(--eox-slider-track-height) + 1px)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-webkit-slider-thumb{cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{background:#fff0}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{background:currentColor;border:0;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track{width:100%;background:var(--eox-slider-track-color)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:currentColor;transition-delay:30ms}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{height:calc(var(--eox-slider-track-height) + 1px);border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{filter:brightness(100%)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-hover))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-down))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-moz-range-thumb{cursor:not-allowed}label.slider.tiny:before{height:var(--eox-slider-track-height);background:var(--outline-variant);clip-path:none}label.slider.tiny>span,.slider.tiny>input[type=range]+input[type=range]~span{height:var(--eox-slider-track-height);top:var(--eox-slider-track-height) - 1;clip-path:none}.slider.tiny>input[type=range]::-webkit-slider-thumb{box-shadow:unset;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height))}.slider.tiny>input[type=range]::-webkit-slider-runnable-track{background:unset}.slider.tiny>input[type=range]:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(1)}.slider.tiny>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(1)}tc-range-slider{--panel-bg-fill: var(--primary);--pointer-bg: var(--primary);--pointer-bg-focus: var(--primary);--pointer-bg-hover: var(--primary);--pointer-border: 0;--pointer-border-focus: 0;--pointer-border-hover: 0;--pointer-width: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-height: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-shadow: 0;--pointer-shadow-hover: 0;--height: var(--eox-slider-track-height);--width: 100%;--panel-bg-border-radius: var(--eox-slider-track-height);--panel-bg: var(--eox-slider-track-color);--panel-bg-hover: var(--eox-slider-track-color);display:block;margin:var(--eox-slider-margin)}:root{--eox-body-font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--eox-header-font-family: var(--eox-body-font-family);--size: 1rem;--font: var(--eox-body-font-family);--font-icon: "Material Symbols Subset";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}*{font-family:var(--eox-body-font-family)}h1,h2,h3,h4,h5,h6{font-family:var(--eox-header-font-family)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: #d1e4ff;--secondary: rgb(var(--eox-theme-dark-secondary));--secondary-container: #3b4858;--on-secondary-container: #d7e3f7;--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: #523f5f;--on-tertiary-container: #f2daff;--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: #93000a;--on-error-container: #ffb4ab;--background: rgb(var(--eox-theme-dark-background));--on-background: #e2e2e6;--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: #43474e;--on-surface-variant: #c3c7cf;--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #e2e2e6;--inverse-on-surface: #2f3033;--inverse-primary: #0161a3;--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: #0d0e11;--surface-container-low: #1a1c1e;--surface-container: #1e2022;--surface-container-high: #282a2d;--surface-container-highest: #333538}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:0rem;padding:0 1rem}:is(.checkbox,.radio,.switch).small{--_size: 1.2rem}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .4rem currentColor}:is(.checkbox,.radio,.switch):is(.no-round,.square)>span:before,:is(.checkbox,.radio,.switch):is(.no-round,.square)>span>i,:is(.checkbox,.radio):is(.no-round,.square)>span:after{border-radius:.15rem}.scroll::-webkit-scrollbar,.scroll::-webkit-scrollbar-thumb,.scroll::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}.scroll:is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}h1.tiny{font-size:2.6875rem}h2.tiny{font-size:1.9375rem}h3.tiny{font-size:1.375rem}h4.tiny{font-size:1.125rem}h5.tiny{font-size:.875rem}h6.tiny{font-size:.625rem}.link{text-decoration:underline}.link:hover{color:var(--on-primary-container)!important}`;cp();var Ao,ds,fs,Fo,Mo,ko,Oo,No,Do,gs;class Ax extends Yl{constructor(){super();pt(this,Ao);pt(this,ds);pt(this,fs);pt(this,Fo);pt(this,Mo);pt(this,ko);pt(this,Oo);pt(this,No,[0,0]);pt(this,Do,0);pt(this,gs,"EPSG:3857");ri(this,"parseFeature",$y);ri(this,"parseTextToFeature",zy);ri(this,"registerProjectionFromCode",Yy);ri(this,"registerProjection",Zy);ri(this,"getFlatLayersArray",Og);ri(this,"transform",lg);ri(this,"transformExtent",cg);ri(this,"buffer",It);this.map=new uf({controls:[],interactions:Z1({altShiftDragRotate:!1,pinchRotate:!1}),layers:[],view:new ai({center:[0,0],zoom:0,projection:this.projection})}),this.interactions={},this.selectInteractions={},this.mapControls={}}static get properties(){return{map:{attribute:!1,state:!0},config:{attribute:!1,type:Object},center:{attribute:!1,type:Array},layers:{attribute:!1,type:Array},zoom:{attribute:!1,type:Number},animationOptions:{attribute:!1,type:Object},controls:{attribute:!1,type:Object},interactions:{attribute:!1,type:Object},lonLatCenter:{attribute:!1,type:Array},lonLatExtent:{attribute:!1,type:Array},mapControls:{attribute:!1,state:!0,type:Object},preventScroll:{attribute:"prevent-scroll",type:Boolean},projection:{attribute:"projection",type:String},selectInteractions:{attribute:!1,state:!0,type:Object},sync:{attribute:"sync",type:String},zoomExtent:{attribute:!1,type:Array}}}set center(t){const i=fx(t,this);i!==void 0&&(Rt(this,No,i),Gl(this))}get center(){return Ge(this,No)}set config(t){Rt(this,Mo,xx(t,this))}get config(){return Ge(this,Mo)}get lonLatCenter(){return vx(this)}get lonLatExtent(){return Ex(this)}set zoom(t){t!==void 0&&(Rt(this,Do,t),Gl(this))}get zoom(){return Ge(this,Do)}set zoomExtent(t){Rt(this,Ao,gx(t,this))}get zoomExtent(){return wx(this)}set controls(t){Rt(this,ds,mx(t,Ge(this,ds),this))}get controls(){return Ge(this,ds)}set layers(t){Rt(this,fs,_x(t,Ge(this,fs),this))}get layers(){return Ge(this,fs)}set preventScroll(t){Rt(this,Fo,yx(t,this))}get preventScroll(){return Ge(this,Fo)}set animationOptions(t){Rt(this,ko,t)}get animationOptions(){return Ge(this,ko)}set projection(t){Rt(this,gs,Cx(t,Ge(this,gs),this))}get projection(){return Ge(this,gs)||"EPSG:3857"}set sync(t){Rt(this,Oo,bx(t,this))}get sync(){return Ge(this,Oo)}addOrUpdateLayer(t){return Tx(t,this)}removeInteraction(t){Sx(t,this)}removeSelect(t){Rx(t,this)}removeControl(t){Lx(t,this)}getLayerById(t){return ih(this,t)}firstUpdated(){Px(Ge(this,Ao),this)}render(){return Qn`
      <style>
        :host {
          display: block;
        }
        .eox-map-tooltip {
          pointer-events: none !important;
        }
        ${O9}
        ${Ix}
        ${x5}
      </style>
      <div style="width: 100%; height: 100%"></div>
      <slot></slot>
    `}}Ao=new WeakMap,ds=new WeakMap,fs=new WeakMap,Fo=new WeakMap,Mo=new WeakMap,ko=new WeakMap,Oo=new WeakMap,No=new WeakMap,Do=new WeakMap,gs=new WeakMap;customElements.define("eox-map",Ax);const Fx={Point:Nx,LineString:Dx,Polygon:Bx,MultiPoint:zx,MultiLineString:Gx,MultiPolygon:Ux},Mx={Point:jx,LineString:Xx,Polygon:Vx,MultiPoint:Zx,MultiLineString:Wx,MultiPolygon:Yx};class kx extends jc{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,t,i){const n=e,s=ed(n.geometry,t),o=new Ee;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),n.attributes){o.setProperties(n.attributes,!0);const a=n.attributes[i];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(e,t){if(t=t||{},e.features){const i=e,n=[],s=i.features;for(let o=0,a=s.length;o<a;++o)n.push(this.readFeatureFromObject(s[o],t,e.objectIdFieldName));return n}return[this.readFeatureFromObject(e,t)]}readGeometryFromObject(e,t){return ed(e,t)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const i=e.spatialReference.wkid;return V("EPSG:"+i)}return null}writeGeometryObject(e,t){return td(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={};if(!e.hasProperties())return i.attributes={},i;const n=e.getProperties(),s=e.getGeometry();if(s){i.geometry=td(s,t);const o=t&&(t.dataProjection||t.featureProjection);o&&(i.geometry.spatialReference={wkid:Number(V(o).getCode().split(":").pop())}),delete n[e.getGeometryName()]}return Ln(n)?i.attributes={}:i.attributes=n,i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureObject(e[n],t));return{features:i}}}function ed(r,e){if(!r)return null;let t;if(typeof r.x=="number"&&typeof r.y=="number")t="Point";else if(r.points)t="MultiPoint";else if(r.paths)r.paths.length===1?t="LineString":t="MultiLineString";else if(r.rings){const n=r,s=Ds(n),o=Ox(n.rings,s);o.length===1?(t="Polygon",r=Object.assign({},r,{rings:o[0]})):(t="MultiPolygon",r=Object.assign({},r,{rings:o}))}const i=Fx[t];return je(i(r),!1,e)}function Ox(r,e){const t=[],i=[],n=[];let s,o;for(s=0,o=r.length;s<o;++s)t.length=0,jo(t,0,r[s],e.length),z2(t,0,t.length,e.length)?i.push([r[s]]):n.push(r[s]);for(;n.length;){const a=n.shift();let l=!1;for(s=i.length-1;s>=0;s--){const c=i[s][0];if(Et(new Fn(c).getExtent(),new Fn(a).getExtent())){i[s].push(a),l=!0;break}}l||i.push([a.reverse()])}return i}function Nx(r){let e;return r.m!==void 0&&r.z!==void 0?e=new Oe([r.x,r.y,r.z,r.m],"XYZM"):r.z!==void 0?e=new Oe([r.x,r.y,r.z],"XYZ"):r.m!==void 0?e=new Oe([r.x,r.y,r.m],"XYM"):e=new Oe([r.x,r.y]),e}function Dx(r){const e=Ds(r);return new ze(r.paths[0],e)}function Gx(r){const e=Ds(r);return new wt(r.paths,e)}function Ds(r){let e="XY";return r.hasZ===!0&&r.hasM===!0?e="XYZM":r.hasZ===!0?e="XYZ":r.hasM===!0&&(e="XYM"),e}function zx(r){const e=Ds(r);return new mi(r.points,e)}function Ux(r){const e=Ds(r);return new Xt(r.rings,e)}function Bx(r){const e=Ds(r);return new Ve(r.rings,e)}function jx(r,e){const t=r.getCoordinates();let i;const n=r.getLayout();if(n==="XYZ")i={x:t[0],y:t[1],z:t[2]};else if(n==="XYM")i={x:t[0],y:t[1],m:t[2]};else if(n==="XYZM")i={x:t[0],y:t[1],z:t[2],m:t[3]};else if(n==="XY")i={x:t[0],y:t[1]};else throw new Error("Invalid geometry layout");return i}function ta(r){const e=r.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function Xx(r,e){const t=ta(r);return{hasZ:t.hasZ,hasM:t.hasM,paths:[r.getCoordinates()]}}function Vx(r,e){const t=ta(r);return{hasZ:t.hasZ,hasM:t.hasM,rings:r.getCoordinates(!1)}}function Wx(r,e){const t=ta(r);return{hasZ:t.hasZ,hasM:t.hasM,paths:r.getCoordinates()}}function Zx(r,e){const t=ta(r);return{hasZ:t.hasZ,hasM:t.hasM,points:r.getCoordinates()}}function Yx(r,e){const t=ta(r),i=r.getCoordinates(!1),n=[];for(let s=0;s<i.length;s++)for(let o=i[s].length-1;o>=0;o--)n.push(i[s][o]);return{hasZ:t.hasZ,hasM:t.hasM,rings:n}}function td(r,e){const t=Mx[r.getType()];return t(je(r,!0,e),e)}const Qi="http://www.opengis.net/gml",$x=/^\s*$/;class q extends Ko{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:J(this.readFeaturesInternal),featureMembers:te(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,t){const i=e.localName;let n=null;if(i=="FeatureCollection")n=G([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if(i=="featureMembers"||i=="featureMember"||i=="member"){const s=t[0];let o=s.featureType,a=s.featureNS;const l="p",c="p0";if(!o&&e.childNodes){o=[],a={};for(let d=0,f=e.childNodes.length;d<f;++d){const g=e.childNodes[d];if(g.nodeType===1){const p=g.nodeName.split(":").pop();if(!o.includes(p)){let m="",_=0;const y=g.namespaceURI;for(const x in a){if(a[x]===y){m=x;break}++_}m||(m=l+_,a[m]=y),o.push(m+":"+p)}}}i!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[c]=d}const h={},u=Array.isArray(o)?o:[o];for(const d in a){const f={};for(let g=0,p=u.length;g<p;++g)(u[g].includes(":")?u[g].split(":")[0]:c)===d&&(f[u[g].split(":").pop()]=i=="featureMembers"?J(this.readFeatureElement,this):te(this.readFeatureElement,this));h[a[d]]=f}i=="featureMember"||i=="member"?n=G(void 0,h,e,t):n=G([],h,e,t)}return n===null&&(n=[]),n}readGeometryOrExtent(e,t){const i=t[0];return i.srsName=e.firstElementChild.getAttribute("srsName"),i.srsDimension=e.firstElementChild.getAttribute("srsDimension"),G(null,this.GEOMETRY_PARSERS,e,t,this)}readExtentElement(e,t){const i=t[0],n=this.readGeometryOrExtent(e,t);return n?Uc(n,i):void 0}readGeometryElement(e,t){const i=t[0],n=this.readGeometryOrExtent(e,t);return n?je(n,!1,i):void 0}readFeatureElementInternal(e,t,i){let n;const s={};for(let l=e.firstElementChild;l;l=l.nextElementSibling){let c;const h=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(c=Ft(l,!1),$x.test(c)&&(c=void 0)):(i&&(c=h==="boundedBy"?this.readExtentElement(l,t):this.readGeometryElement(l,t)),c?h!=="boundedBy"&&(n=h):c=this.readFeatureElementInternal(l,t,!1));const u=l.attributes.length;if(u>0&&!(c instanceof dc)){c={_content_:c};for(let d=0;d<u;d++){const f=l.attributes[d].name;c[f]=l.attributes[d].value}}s[h]?(s[h]instanceof Array||(s[h]=[s[h]]),s[h].push(c)):s[h]=c}if(!i)return s;const o=new Ee(s);n&&o.setGeometryName(n);const a=e.getAttribute("fid")||$5(e,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(e,t){return this.readFeatureElementInternal(e,t,!0)}readPoint(e,t){const i=this.readFlatCoordinatesFromNode(e,t);if(i)return new Oe(i,"XYZ")}readMultiPoint(e,t){const i=G([],this.MULTIPOINT_PARSERS,e,t,this);if(i)return new mi(i)}readMultiLineString(e,t){const i=G([],this.MULTILINESTRING_PARSERS,e,t,this);if(i)return new wt(i)}readMultiPolygon(e,t){const i=G([],this.MULTIPOLYGON_PARSERS,e,t,this);if(i)return new Xt(i)}pointMemberParser(e,t){Ut(this.POINTMEMBER_PARSERS,e,t,this)}lineStringMemberParser(e,t){Ut(this.LINESTRINGMEMBER_PARSERS,e,t,this)}polygonMemberParser(e,t){Ut(this.POLYGONMEMBER_PARSERS,e,t,this)}readLineString(e,t){const i=this.readFlatCoordinatesFromNode(e,t);if(i)return new ze(i,"XYZ")}readFlatLinearRing(e,t){const i=G(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(i)return i}readLinearRing(e,t){const i=this.readFlatCoordinatesFromNode(e,t);if(i)return new Fn(i,"XYZ")}readPolygon(e,t){const i=G([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(i&&i[0]){const n=i[0],s=[n.length];let o,a;for(o=1,a=i.length;o<a;++o)xe(n,i[o]),s.push(n.length);return new Ve(n,"XYZ",s)}}readFlatCoordinatesFromNode(e,t){return G(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}readGeometryFromNode(e,t){const i=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return i||null}readFeaturesFromNode(e,t){const i={featureType:this.featureType,featureNS:this.featureNS};return i&&Object.assign(i,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[i])||[]}readProjectionFromNode(e){return V(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}q.prototype.namespace=Qi;q.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};q.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};q.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};q.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:J(q.prototype.pointMemberParser),pointMembers:J(q.prototype.pointMemberParser)}};q.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:J(q.prototype.lineStringMemberParser),lineStringMembers:J(q.prototype.lineStringMemberParser)}};q.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:J(q.prototype.polygonMemberParser),polygonMembers:J(q.prototype.polygonMemberParser)}};q.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:J(q.prototype.readFlatCoordinatesFromNode)}};q.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:J(q.prototype.readLineString)}};q.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:J(q.prototype.readPolygon)}};q.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:te(q.prototype.readFlatLinearRing)}};const Hx=Qi+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",Kx={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class pe extends q{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[Qi].featureMember=J(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:Hx}readFlatCoordinates(e,t){const i=Ft(e,!1).replace(/^\s*|\s*$/g,""),s=t[0].srsName;let o="enu";if(s){const c=V(s);c&&(o=c.getAxisOrientation())}const a=i.trim().split(/\s+/),l=[];for(let c=0,h=a.length;c<h;c++){const u=a[c].split(/,+/),d=parseFloat(u[0]),f=parseFloat(u[1]),g=u.length===3?parseFloat(u[2]):0;o.startsWith("en")?l.push(d,f,g):l.push(f,d,g)}return l}readBox(e,t){const i=G([null],this.BOX_PARSERS_,e,t,this);return In(i[1][0],i[1][1],i[1][3],i[1][4])}innerBoundaryIsParser(e,t){const i=G(void 0,this.RING_PARSERS,e,t,this);i&&t[t.length-1].push(i)}outerBoundaryIsParser(e,t){const i=G(void 0,this.RING_PARSERS,e,t,this);if(i){const n=t[t.length-1];n[0]=i}}GEOMETRY_NODE_FACTORY_(e,t,i){const n=t[t.length-1],s=n.multiSurface,o=n.surface,a=n.multiCurve;return Array.isArray(e)?i="Envelope":(i=e.getType(),i==="MultiPolygon"&&s===!0?i="MultiSurface":i==="Polygon"&&o===!0?i="Surface":i==="MultiLineString"&&a===!0&&(i="MultiCurve")),ce("http://www.opengis.net/gml",i)}writeFeatureElement(e,t,i){const n=t.getId();n&&e.setAttribute("fid",n);const s=i[i.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],c=[];if(t.hasProperties()){const u=t.getProperties();for(const d in u){const f=u[d];f!=null&&(l.push(d),c.push(f),d==a||typeof f.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=S(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=S(oe)))}}const h=Object.assign({},s);h.node=e,le(h,s.serializers,Ke(void 0,o),c,i,l)}writeCurveOrLineString(e,t,i){const s=i[i.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,i)}else if(e.nodeName==="Curve"){const o=ce(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,i)}}writeLineStringOrCurveMember(e,t,i){const n=this.GEOMETRY_NODE_FACTORY_(t,i);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,i))}writeMultiCurveOrLineString(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();le({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,i,void 0,this)}writeGeometryElement(e,t,i){const n=i[i.length-1],s=Object.assign({},n);s.node=e;let o;Array.isArray(t)?o=Uc(t,n):o=je(t,!0,n),le(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],i,void 0,this)}createCoordinatesNode_(e){const t=ce(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}writeCoordinates_(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName,a=t.getCoordinates(),l=a.length,c=new Array(l);for(let h=0;h<l;++h){const u=a[h];c[h]=this.getCoords_(u,o,s)}oe(e,c.join(" "))}writeCurveSegments_(e,t,i){const n=ce(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,i)}writeSurfaceOrPolygon(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();le({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if(e.nodeName==="Surface"){const a=ce(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,i)}}RING_NODE_FACTORY_(e,t,i){const n=t[t.length-1],s=n.node,o=n.exteriorWritten;return o===void 0&&(n.exteriorWritten=!0),ce(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,t,i){const n=ce(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,i)}writeRing(e,t,i){const n=ce(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,i)}getCoords_(e,t,i){let s=(t?V(t).getAxisOrientation():"enu").startsWith("en")?e[0]+","+e[1]:e[1]+","+e[0];if(i){const o=e[2]||0;s+=","+o}return s}writePoint(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);const l=t.getCoordinates(),c=this.getCoords_(l,o,s);oe(a,c)}writeMultiPoint(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);const a=t.getPoints();le({node:e,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,Ke("pointMember"),a,i,void 0,this)}writePointMember(e,t,i){const n=ce(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,i)}writeLinearRing(e,t,i){const s=i[i.length-1].srsName;s&&e.setAttribute("srsName",s);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,i)}writeMultiSurfaceOrPolygon(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();le({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,i,void 0,this)}writeSurfaceOrPolygonMember(e,t,i){const n=this.GEOMETRY_NODE_FACTORY_(t,i);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,i))}writeEnvelope(e,t,i){const s=i[i.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];le({node:e},this.ENVELOPE_SERIALIZERS,gt,a,i,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,i){const n=t[t.length-1].node;return ce("http://www.opengis.net/gml",Kx[n.nodeName])}}pe.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:te(pe.prototype.readFlatCoordinates)}};pe.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:pe.prototype.innerBoundaryIsParser,outerBoundaryIs:pe.prototype.outerBoundaryIsParser}};pe.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:J(pe.prototype.readFlatCoordinates)}};pe.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:te(q.prototype.readPoint),MultiPoint:te(q.prototype.readMultiPoint),LineString:te(q.prototype.readLineString),MultiLineString:te(q.prototype.readMultiLineString),LinearRing:te(q.prototype.readLinearRing),Polygon:te(q.prototype.readPolygon),MultiPolygon:te(q.prototype.readMultiPolygon),Box:te(pe.prototype.readBox)}};pe.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:S(pe.prototype.writeCurveOrLineString),MultiCurve:S(pe.prototype.writeMultiCurveOrLineString),Point:S(pe.prototype.writePoint),MultiPoint:S(pe.prototype.writeMultiPoint),LineString:S(pe.prototype.writeCurveOrLineString),MultiLineString:S(pe.prototype.writeMultiCurveOrLineString),LinearRing:S(pe.prototype.writeLinearRing),Polygon:S(pe.prototype.writeSurfaceOrPolygon),MultiPolygon:S(pe.prototype.writeMultiSurfaceOrPolygon),Surface:S(pe.prototype.writeSurfaceOrPolygon),MultiSurface:S(pe.prototype.writeMultiSurfaceOrPolygon),Envelope:S(pe.prototype.writeEnvelope)}};pe.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:S(pe.prototype.writeLineStringOrCurveMember),curveMember:S(pe.prototype.writeLineStringOrCurveMember)}};pe.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:S(pe.prototype.writeRing),innerBoundaryIs:S(pe.prototype.writeRing)}};pe.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:S(pe.prototype.writePointMember)}};pe.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:S(pe.prototype.writeSurfaceOrPolygonMember),polygonMember:S(pe.prototype.writeSurfaceOrPolygonMember)}};pe.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:S(oe),upperCorner:S(oe)}};const qx=Qi+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",Jx={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class X extends q{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:qx,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,t){const i=G([],this.MULTICURVE_PARSERS,e,t,this);if(i)return new wt(i)}readFlatCurveRing(e,t){const i=G([],this.MULTICURVE_PARSERS,e,t,this),n=[];for(let s=0,o=i.length;s<o;++s)xe(n,i[s].getFlatCoordinates());return n}readMultiSurface(e,t){const i=G([],this.MULTISURFACE_PARSERS,e,t,this);if(i)return new Xt(i)}curveMemberParser(e,t){Ut(this.CURVEMEMBER_PARSERS,e,t,this)}surfaceMemberParser(e,t){Ut(this.SURFACEMEMBER_PARSERS,e,t,this)}readPatch(e,t){return G([null],this.PATCHES_PARSERS,e,t,this)}readSegment(e,t){return G([],this.SEGMENTS_PARSERS,e,t,this)}readPolygonPatch(e,t){return G([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}readLineStringSegment(e,t){return G([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}interiorParser(e,t){const i=G(void 0,this.RING_PARSERS,e,t,this);i&&t[t.length-1].push(i)}exteriorParser(e,t){const i=G(void 0,this.RING_PARSERS,e,t,this);if(i){const n=t[t.length-1];n[0]=i}}readSurface(e,t){const i=G([null],this.SURFACE_PARSERS,e,t,this);if(i&&i[0]){const n=i[0],s=[n.length];let o,a;for(o=1,a=i.length;o<a;++o)xe(n,i[o]),s.push(n.length);return new Ve(n,"XYZ",s)}}readCurve(e,t){const i=G([null],this.CURVE_PARSERS,e,t,this);if(i)return new ze(i,"XYZ")}readEnvelope(e,t){const i=G([null],this.ENVELOPE_PARSERS,e,t,this);return In(i[1][0],i[1][1],i[2][0],i[2][1])}readFlatPos(e,t){let i=Ft(e,!1);const n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=n.exec(i);)s.push(parseFloat(o[1])),i=i.substr(o[0].length);if(i!=="")return;const l=t[0].srsName;if((l?V(l).getAxisOrientation():"enu")==="neu")for(let u=0,d=s.length;u<d;u+=3){const f=s[u],g=s[u+1];s[u]=g,s[u+1]=f}const h=s.length;if(h==2&&s.push(0),h!==0)return s}readFlatPosList(e,t){const i=Ft(e,!1).replace(/^\s*|\s*$/g,""),n=t[0],s=n.srsName,o=n.srsDimension,a=s?V(s).getAxisOrientation():"enu",l=i.split(/\s+/);let c=2;e.getAttribute("srsDimension")?c=Ki(e.getAttribute("srsDimension")):e.getAttribute("dimension")?c=Ki(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?c=Ki(e.parentNode.getAttribute("srsDimension")):o&&(c=Ki(o));const h=a.startsWith("en");let u,d,f;const g=[];for(let p=0,m=l.length;p<m;p+=c)u=parseFloat(l[p]),d=parseFloat(l[p+1]),f=c===3?parseFloat(l[p+2]):0,h?g.push(u,d,f):g.push(d,u,f);return g}writePos_(e,t,i){const n=i[i.length-1],s=n.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=n.srsName,l=a?V(a).getAxisOrientation():"enu",c=t.getCoordinates();let h=l.startsWith("en")?c[0]+" "+c[1]:c[1]+" "+c[0];if(s){const u=c[2]||0;h+=" "+u}oe(e,h)}getCoords_(e,t,i){let s=(t?V(t).getAxisOrientation():"enu").startsWith("en")?e[0]+" "+e[1]:e[1]+" "+e[0];if(i){const o=e[2]||0;s+=" "+o}return s}writePosList_(e,t,i){const n=i[i.length-1],s=n.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=n.srsName,l=t.getCoordinates(),c=l.length,h=new Array(c);let u;for(let d=0;d<c;++d)u=l[d],h[d]=this.getCoords_(u,a,s);oe(e,h.join(" "))}writePoint(e,t,i){const s=i[i.length-1].srsName;s&&e.setAttribute("srsName",s);const o=ce(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,t,i)}writeEnvelope(e,t,i){const s=i[i.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];le({node:e},this.ENVELOPE_SERIALIZERS,gt,a,i,o,this)}writeLinearRing(e,t,i){const s=i[i.length-1].srsName;s&&e.setAttribute("srsName",s);const o=ce(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,i)}RING_NODE_FACTORY_(e,t,i){const n=t[t.length-1],s=n.node,o=n.exteriorWritten;return o===void 0&&(n.exteriorWritten=!0),ce(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();le({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if(e.nodeName==="Surface"){const a=ce(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,i)}}writeCurveOrLineString(e,t,i){const s=i[i.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=ce(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,i)}else if(e.nodeName==="Curve"){const o=ce(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,i)}}writeMultiSurfaceOrPolygon(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();le({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,i,void 0,this)}writeMultiPoint(e,t,i){const n=i[i.length-1],s=n.srsName,o=n.hasZ;s&&e.setAttribute("srsName",s);const a=t.getPoints();le({node:e,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,Ke("pointMember"),a,i,void 0,this)}writeMultiCurveOrLineString(e,t,i){const n=i[i.length-1],s=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();le({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,i,void 0,this)}writeRing(e,t,i){const n=ce(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,i)}writeSurfaceOrPolygonMember(e,t,i){const n=this.GEOMETRY_NODE_FACTORY_(t,i);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,i))}writePointMember(e,t,i){const n=ce(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,i)}writeLineStringOrCurveMember(e,t,i){const n=this.GEOMETRY_NODE_FACTORY_(t,i);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,i))}writeSurfacePatches_(e,t,i){const n=ce(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,i)}writeCurveSegments_(e,t,i){const n=ce(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,i)}writeGeometryElement(e,t,i){const n=i[i.length-1],s=Object.assign({},n);s.node=e;let o;Array.isArray(t)?o=Uc(t,n):o=je(t,!0,n),le(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],i,void 0,this)}writeFeatureElement(e,t,i){const n=t.getId();n&&e.setAttribute("fid",n);const s=i[i.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],c=[];if(t.hasProperties()){const u=t.getProperties();for(const d in u){const f=u[d];f!=null&&(l.push(d),c.push(f),d==a||typeof f.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=S(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=S(oe)))}}const h=Object.assign({},s);h.node=e,le(h,s.serializers,Ke(void 0,o),c,i,l)}writeFeatureMembers_(e,t,i){const n=i[i.length-1],s=n.featureType,o=n.featureNS,a={};a[o]={},a[o][s]=S(this.writeFeatureElement,this);const l=Object.assign({},n);l.node=e,le(l,a,Ke(s,o),t,i)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,i){const n=t[t.length-1].node;return ce(this.namespace,Jx[n.nodeName])}GEOMETRY_NODE_FACTORY_(e,t,i){const n=t[t.length-1],s=n.multiSurface,o=n.surface,a=n.curve,l=n.multiCurve;return Array.isArray(e)?i="Envelope":(i=e.getType(),i==="MultiPolygon"&&s===!0?i="MultiSurface":i==="Polygon"&&o===!0?i="Surface":i==="LineString"&&a===!0?i="Curve":i==="MultiLineString"&&l===!0&&(i="MultiCurve")),ce(this.namespace,i)}writeGeometryNode(e,t){t=this.adaptOptions(t);const i=ce(this.namespace,"geom"),n={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(n,t),this.writeGeometryElement(i,e,[n]),i}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=ce(this.namespace,"featureMembers");i.setAttributeNS(dr,"xsi:schemaLocation",this.schemaLocation);const n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(n,t),this.writeFeatureMembers_(i,e,[n]),i}}X.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:te(X.prototype.readFlatPos),posList:te(X.prototype.readFlatPosList),coordinates:te(pe.prototype.readFlatCoordinates)}};X.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:X.prototype.interiorParser,exterior:X.prototype.exteriorParser}};X.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:te(q.prototype.readPoint),MultiPoint:te(q.prototype.readMultiPoint),LineString:te(q.prototype.readLineString),MultiLineString:te(q.prototype.readMultiLineString),LinearRing:te(q.prototype.readLinearRing),Polygon:te(q.prototype.readPolygon),MultiPolygon:te(q.prototype.readMultiPolygon),Surface:te(X.prototype.readSurface),MultiSurface:te(X.prototype.readMultiSurface),Curve:te(X.prototype.readCurve),MultiCurve:te(X.prototype.readMultiCurve),Envelope:te(X.prototype.readEnvelope)}};X.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:J(X.prototype.curveMemberParser),curveMembers:J(X.prototype.curveMemberParser)}};X.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:J(X.prototype.surfaceMemberParser),surfaceMembers:J(X.prototype.surfaceMemberParser)}};X.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:J(q.prototype.readLineString),Curve:J(X.prototype.readCurve)}};X.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:J(q.prototype.readPolygon),Surface:J(X.prototype.readSurface)}};X.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:te(X.prototype.readPatch)}};X.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:te(X.prototype.readSegment)}};X.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:J(X.prototype.readFlatPosList),upperCorner:J(X.prototype.readFlatPosList)}};X.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:te(X.prototype.readPolygonPatch)}};X.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:c2(X.prototype.readLineStringSegment)}};q.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:te(q.prototype.readFlatLinearRing),Ring:te(X.prototype.readFlatCurveRing)}};X.prototype.writeFeatures;X.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:S(X.prototype.writeRing),interior:S(X.prototype.writeRing)}};X.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:S(oe),upperCorner:S(oe)}};X.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:S(X.prototype.writeSurfaceOrPolygonMember),polygonMember:S(X.prototype.writeSurfaceOrPolygonMember)}};X.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:S(X.prototype.writePointMember)}};X.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:S(X.prototype.writeLineStringOrCurveMember),curveMember:S(X.prototype.writeLineStringOrCurveMember)}};X.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:S(X.prototype.writeCurveOrLineString),MultiCurve:S(X.prototype.writeMultiCurveOrLineString),Point:S(X.prototype.writePoint),MultiPoint:S(X.prototype.writeMultiPoint),LineString:S(X.prototype.writeCurveOrLineString),MultiLineString:S(X.prototype.writeMultiCurveOrLineString),LinearRing:S(X.prototype.writeLinearRing),Polygon:S(X.prototype.writeSurfaceOrPolygon),MultiPolygon:S(X.prototype.writeMultiSurfaceOrPolygon),Surface:S(X.prototype.writeSurfaceOrPolygon),MultiSurface:S(X.prototype.writeMultiSurfaceOrPolygon),Envelope:S(X.prototype.writeEnvelope)}};const nh=X;nh.prototype.writeFeatures;nh.prototype.writeFeaturesNode;const Be=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Qx="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",e7={rte:Dg,trk:Gg,wpt:zg},t7=k(Be,{rte:J(Dg),trk:J(Gg),wpt:J(zg)}),i7=k(Be,{text:E(U,"linkText"),type:E(U,"linkType")}),n7=k(Be,{name:E(U),email:I7,link:ia}),r7=k(Be,{name:E(U),desc:E(U),author:E(R7),copyright:E(L7),link:ia,time:E(Y2),keywords:E(U),bounds:P7,extensions:n0}),s7=k(Be,{year:E(Qe),license:E(U)}),o7=k(Be,{rte:S(k7),trk:S(O7),wpt:S(D7)});class a7 extends Ko{constructor(e){super(),e=e||{},this.dataProjection=V("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,i=e.length;t<i;++t){const n=e[t];if(this.readExtensions_){const s=n.get("extensionsNode_")||null;this.readExtensions_(n,s)}n.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(ui(e)):hi(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const i=this.readMetadataFromNode(t);if(i)return i}return null}readMetadataFromNode(e){if(!Be.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Be.includes(t.namespaceURI)&&t.localName==="metadata")return G({},r7,t,[]);return null}readFeatureFromNode(e,t){if(!Be.includes(e.namespaceURI))return null;const i=e7[e.localName];if(!i)return null;const n=i(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(e,t){if(!Be.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const i=G([],t7,e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_(i),i):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=ce("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",dr),i.setAttributeNS(dr,"xsi:schemaLocation",Qx),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),le({node:i},o7,S7,e,[t]),i}}const l7=k(Be,{name:E(U),cmt:E(U),desc:E(U),src:E(U),link:ia,number:E(Qe),extensions:n0,type:E(U),rtept:A7}),c7=k(Be,{ele:E(_e),time:E(Y2)}),h7=k(Be,{name:E(U),cmt:E(U),desc:E(U),src:E(U),link:ia,number:E(Qe),type:E(U),extensions:n0,trkseg:M7}),u7=k(Be,{trkpt:F7}),d7=k(Be,{ele:E(_e),time:E(Y2)}),f7=k(Be,{ele:E(_e),time:E(Y2),magvar:E(_e),geoidheight:E(_e),name:E(U),cmt:E(U),desc:E(U),src:E(U),link:ia,sym:E(U),type:E(U),fix:E(U),sat:E(Qe),hdop:E(_e),vdop:E(_e),pdop:E(_e),ageofdgpsdata:E(_e),dgpsid:E(Qe),extensions:n0}),g7=["text","type"],m7=k(Be,{text:S(oe),type:S(oe)}),p7=k(Be,["name","cmt","desc","src","link","number","type","rtept"]),_7=k(Be,{name:S(oe),cmt:S(oe),desc:S(oe),src:S(oe),link:S(oh),number:S(h2),type:S(oe),rtept:Nf(S(ah))}),y7=k(Be,["ele","time"]),x7=k(Be,["name","cmt","desc","src","link","number","type","trkseg"]),C7=k(Be,{name:S(oe),cmt:S(oe),desc:S(oe),src:S(oe),link:S(oh),number:S(h2),type:S(oe),trkseg:Nf(S(N7))}),b7=Ke("trkpt"),v7=k(Be,{trkpt:S(ah)}),E7=k(Be,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),w7=k(Be,{ele:S(kt),time:S(q5),magvar:S(kt),geoidheight:S(kt),name:S(oe),cmt:S(oe),desc:S(oe),src:S(oe),link:S(oh),sym:S(oe),type:S(oe),fix:S(oe),sat:S(h2),hdop:S(kt),vdop:S(kt),pdop:S(kt),ageofdgpsdata:S(kt),dgpsid:S(h2)}),T7={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function S7(r,e,t){const i=r.getGeometry();if(i){const n=T7[i.getType()];if(n){const s=e[e.length-1].node;return ce(s.namespaceURI,n)}}}function rh(r,e,t,i){return r.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in i?(r.push(i.ele),delete i.ele,e.hasZ=!0):r.push(0),"time"in i?(r.push(i.time),delete i.time,e.hasM=!0):r.push(0),r}function sh(r,e,t){let i="XY",n=2;if(r.hasZ&&r.hasM?(i="XYZM",n=4):r.hasZ?(i="XYZ",n=3):r.hasM&&(i="XYM",n=3),n!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*n]=e[s*4],e[s*n+1]=e[s*4+1],r.hasZ&&(e[s*n+2]=e[s*4+2]),r.hasM&&(e[s*n+2]=e[s*4+3]);if(e.length=e.length/4*n,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*n}return i}function R7(r,e){const t=G({},n7,r,e);if(t)return t}function L7(r,e){const t=G({},s7,r,e);if(t){const i=r.getAttribute("author");return i!==null&&(t.author=i),t}}function P7(r,e){const t=e[e.length-1],i=r.getAttribute("minlat"),n=r.getAttribute("minlon"),s=r.getAttribute("maxlat"),o=r.getAttribute("maxlon");n!==null&&i!==null&&o!==null&&s!==null&&(t.bounds=[[parseFloat(n),parseFloat(i)],[parseFloat(o),parseFloat(s)]])}function I7(r,e){const t=e[e.length-1],i=r.getAttribute("id"),n=r.getAttribute("domain");i!==null&&n!==null&&(t.email=`${i}@${n}`)}function ia(r,e){const t=e[e.length-1],i=r.getAttribute("href");i!==null&&(t.link=i),Ut(i7,r,e)}function n0(r,e){const t=e[e.length-1];t.extensionsNode_=r}function A7(r,e){const t=G({},c7,r,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;rh(n,s,r,t)}}function F7(r,e){const t=G({},d7,r,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;rh(n,s,r,t)}}function M7(r,e){const t=e[e.length-1];Ut(u7,r,e);const i=t.flatCoordinates;t.ends.push(i.length)}function Dg(r,e){const t=e[0],i=G({flatCoordinates:[],layoutOptions:{}},l7,r,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.layoutOptions;delete i.layoutOptions;const o=sh(s,n),a=new ze(n,o);je(a,!1,t);const l=new Ee(a);return l.setProperties(i,!0),l}function Gg(r,e){const t=e[0],i=G({flatCoordinates:[],ends:[],layoutOptions:{}},h7,r,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.ends;delete i.ends;const o=i.layoutOptions;delete i.layoutOptions;const a=sh(o,n,s),l=new wt(n,a,s);je(l,!1,t);const c=new Ee(l);return c.setProperties(i,!0),c}function zg(r,e){const t=e[0],i=G({},f7,r,e);if(!i)return;const n={},s=rh([],n,r,i),o=sh(n,s),a=new Oe(s,o);je(a,!1,t);const l=new Ee(a);return l.setProperties(i,!0),l}function oh(r,e,t){r.setAttribute("href",e);const n=t[t.length-1].properties,s=[n.linkText,n.linkType];le({node:r},m7,gt,s,t,g7)}function ah(r,e,t){const i=t[t.length-1],s=i.node.namespaceURI,o=i.properties;switch(r.setAttributeNS(null,"lat",String(e[1])),r.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=r.nodeName=="rtept"?y7[s]:E7[s],c=Vt(o,l);le({node:r,properties:o},w7,gt,c,t,l)}function k7(r,e,t){const i=t[0],n=e.getProperties(),s={node:r};s.properties=n;const o=e.getGeometry();if(o.getType()=="LineString"){const h=je(o,!0,i);s.geometryLayout=h.getLayout(),n.rtept=h.getCoordinates()}const a=t[t.length-1].node,l=p7[a.namespaceURI],c=Vt(n,l);le(s,_7,gt,c,t,l)}function O7(r,e,t){const i=t[0],n=e.getProperties(),s={node:r};s.properties=n;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const h=je(o,!0,i);n.trkseg=h.getLineStrings()}const a=t[t.length-1].node,l=x7[a.namespaceURI],c=Vt(n,l);le(s,C7,gt,c,t,l)}function N7(r,e,t){const i={node:r};i.geometryLayout=e.getLayout(),i.properties={},le(i,v7,b7,e.getCoordinates(),t)}function D7(r,e,t){const i=t[0],n=t[t.length-1];n.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=je(s,!0,i);n.geometryLayout=o.getLayout(),ah(r,o.getCoordinates(),t)}}class lh extends $o{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(Ra(e),this.adaptOptions(t))}readFeatureFromText(e,t){return ie()}readFeatures(e,t){return this.readFeaturesFromText(Ra(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return ie()}readGeometry(e,t){return this.readGeometryFromText(Ra(e),this.adaptOptions(t))}readGeometryFromText(e,t){return ie()}readProjection(e){return this.readProjectionFromText(Ra(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return ie()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return ie()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return ie()}}function Ra(r){return typeof r=="string"?r:""}const G7=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,z7=/^H.([A-Z]{3}).*?:(.*)/,U7=/^HFDTE(\d{2})(\d{2})(\d{2})/,B7=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,j7=/\r\n|\r|\n/;class X7 extends lh{constructor(e){super(),e=e||{},this.dataProjection=V("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(e,t){const i=this.altitudeMode_,n=e.split(j7),s={},o=[];let a=2e3,l=0,c=1,h=-1,u,d;for(u=0,d=n.length;u<d;++u){const m=n[u];let _;if(m.charAt(0)=="B"){if(_=G7.exec(m),_){const y=parseInt(_[1],10),x=parseInt(_[2],10),C=parseInt(_[3],10);let b=parseInt(_[4],10)+parseInt(_[5],10)/6e4;this.lad_&&(b+=parseInt(m.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),_[6]=="S"&&(b=-b);let v=parseInt(_[7],10)+parseInt(_[8],10)/6e4;if(this.lod_&&(v+=parseInt(m.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),_[9]=="W"&&(v=-v),o.push(v,b),i!="none"){let L;i=="gps"?L=parseInt(_[11],10):i=="barometric"?L=parseInt(_[12],10):L=0,o.push(L)}let w=Date.UTC(a,l,c,y,x,C);w<h&&(w=Date.UTC(a,l,c+1,y,x,C)),o.push(w/1e3),h=w}}else if(m.charAt(0)=="H")_=B7.exec(m),_?(c=parseInt(_[1],10),l=parseInt(_[2],10)-1,a=2e3+parseInt(_[3],10)):(_=U7.exec(m),_?(c=parseInt(_[1],10),l=parseInt(_[2],10)-1,a=2e3+parseInt(_[3],10)):(_=z7.exec(m),_&&(s[_[1]]=_[2].trim())));else if(m.charAt(0)=="I"){const y=parseInt(m.slice(1,3),10);for(let x=0;x<y;x++){const C=m.slice(7+x*7,10+x*7);if(C==="LAD"||C==="LOD"){const b=parseInt(m.slice(3+x*7,5+x*7),10)-1,v=parseInt(m.slice(5+x*7,7+x*7),10);C==="LAD"?(this.lad_=!0,this.ladStart_=b,this.ladStop_=v):C==="LOD"&&(this.lod_=!0,this.lodStart_=b,this.lodStop_=v)}}}}if(o.length===0)return null;const f=i=="none"?"XYM":"XYZM",g=new ze(o,f),p=new Ee(je(g,!1,t));return p.setProperties(s,!0),p}readFeaturesFromText(e,t){const i=this.readFeatureFromText(e,t);return i?[i]:[]}}const nt={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},gr={};gr[nt.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};gr[nt.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};gr[nt.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};gr.none={none:{supports:[],formats:[],qualities:[]}};const V7=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,id=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,W7=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function Z7(r){let e=r.getComplianceLevelSupportedFeatures();return e===void 0&&(e=gr[nt.VERSION1].level0),{url:r.imageInfo["@id"]===void 0?void 0:r.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,r.imageInfo.formats===void 0?[]:r.imageInfo.formats],qualities:[...e.qualities,r.imageInfo.qualities===void 0?[]:r.imageInfo.qualities],resolutions:r.imageInfo.scale_factors,tileSize:r.imageInfo.tile_width!==void 0?r.imageInfo.tile_height!==void 0?[r.imageInfo.tile_width,r.imageInfo.tile_height]:[r.imageInfo.tile_width,r.imageInfo.tile_width]:r.imageInfo.tile_height!=null?[r.imageInfo.tile_height,r.imageInfo.tile_height]:void 0}}function Y7(r){const e=r.getComplianceLevelSupportedFeatures(),t=Array.isArray(r.imageInfo.profile)&&r.imageInfo.profile.length>1,i=t&&r.imageInfo.profile[1].supports?r.imageInfo.profile[1].supports:[],n=t&&r.imageInfo.profile[1].formats?r.imageInfo.profile[1].formats:[],s=t&&r.imageInfo.profile[1].qualities?r.imageInfo.profile[1].qualities:[];return{url:r.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:r.imageInfo.sizes===void 0?void 0:r.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:r.imageInfo.tiles===void 0?void 0:[r.imageInfo.tiles.map(function(o){return o.width})[0],r.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:r.imageInfo.tiles===void 0?void 0:r.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...e.supports,...i],formats:[...e.formats,...n],qualities:[...e.qualities,...s]}}function $7(r){const e=r.getComplianceLevelSupportedFeatures(),t=r.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...r.imageInfo.extraFormats],i=r.imageInfo.preferredFormats!==void 0&&Array.isArray(r.imageInfo.preferredFormats)&&r.imageInfo.preferredFormats.length>0?r.imageInfo.preferredFormats.filter(function(n){return["jpg","png","gif"].includes(n)}).reduce(function(n,s){return n===void 0&&t.includes(s)?s:n},void 0):void 0;return{url:r.imageInfo.id,sizes:r.imageInfo.sizes===void 0?void 0:r.imageInfo.sizes.map(function(n){return[n.width,n.height]}),tileSize:r.imageInfo.tiles===void 0?void 0:[r.imageInfo.tiles.map(function(n){return n.width})[0],r.imageInfo.tiles.map(function(n){return n.height})[0]],resolutions:r.imageInfo.tiles===void 0?void 0:r.imageInfo.tiles.map(function(n){return n.scaleFactors})[0],supports:r.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...r.imageInfo.extraFeatures],formats:t,qualities:r.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...r.imageInfo.extraQualities],preferredFormat:i}}const r0={};r0[nt.VERSION1]=Z7;r0[nt.VERSION2]=Y7;r0[nt.VERSION3]=$7;class H7{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return nt.VERSION1;case"http://iiif.io/api/image/2/context.json":return nt.VERSION2;case"http://iiif.io/api/image/3/context.json":return nt.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(nt.VERSION1)&&this.imageInfo.identifier)return nt.VERSION1;break}me(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case nt.VERSION1:if(V7.test(this.imageInfo.profile))return this.imageInfo.profile;break;case nt.VERSION3:if(W7.test(this.imageInfo.profile))return this.imageInfo.profile;break;case nt.VERSION2:if(typeof this.imageInfo.profile=="string"&&id.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&id.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const t=this.getComplianceLevelEntryFromProfile(e);if(t===void 0)return;const i=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(i)?i[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return t===void 0?gr.none.none:gr[e][t]}getTileSourceOptions(e){const t=e||{},i=this.getImageApiVersion();if(i===void 0)return;const n=i===void 0?void 0:r0[i](this);if(n!==void 0)return{url:n.url,version:i,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:t.format!==void 0&&n.formats.includes(t.format)?t.format:n.preferredFormat!==void 0?n.preferredFormat:"jpg",supports:n.supports,quality:t.quality&&n.qualities.includes(t.quality)?t.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:n.tileSize}}}class ch{read(e){if(!e)return null;if(typeof e=="string"){const t=ui(e);return this.readFromDocument(t)}return hi(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){ie()}}const K7="http://www.w3.org/1999/xlink";function Gs(r){return r.getAttributeNS(K7,"href")}const Wt=[null,"http://www.opengis.net/ows/1.1"],q7=k(Wt,{ServiceIdentification:E(b6),ServiceProvider:E(E6),OperationsMetadata:E(x6)});class Ug extends ch{constructor(){super()}readFromNode(e){const t=G({},q7,e,[]);return t||null}}const J7=k(Wt,{DeliveryPoint:E(U),City:E(U),AdministrativeArea:E(U),PostalCode:E(U),Country:E(U),ElectronicMailAddress:E(U)}),Q7=k(Wt,{Value:Le(w6)}),e6=k(Wt,{AllowedValues:E(d6)}),t6=k(Wt,{Phone:E(C6),Address:E(u6)}),i6=k(Wt,{HTTP:E(_6)}),n6=k(Wt,{Get:Le(p6),Post:void 0}),r6=k(Wt,{DCP:E(m6)}),s6=k(Wt,{Operation:y6}),o6=k(Wt,{Voice:E(U),Facsimile:E(U)}),a6=k(Wt,{Constraint:Le(f6)}),l6=k(Wt,{IndividualName:E(U),PositionName:E(U),ContactInfo:E(g6)}),c6=k(Wt,{Abstract:E(U),AccessConstraints:E(U),Fees:E(U),Title:E(U),ServiceTypeVersion:E(U),ServiceType:E(U)}),h6=k(Wt,{ProviderName:E(U),ProviderSite:E(Gs),ServiceContact:E(v6)});function u6(r,e){return G({},J7,r,e)}function d6(r,e){return G({},Q7,r,e)}function f6(r,e){const t=r.getAttribute("name");if(t)return G({name:t},e6,r,e)}function g6(r,e){return G({},t6,r,e)}function m6(r,e){return G({},i6,r,e)}function p6(r,e){const t=Gs(r);if(t)return G({href:t},a6,r,e)}function _6(r,e){return G({},n6,r,e)}function y6(r,e){const t=r.getAttribute("name"),i=G({},r6,r,e);if(!i)return;const n=e[e.length-1];n[t]=i}function x6(r,e){return G({},s6,r,e)}function C6(r,e){return G({},o6,r,e)}function b6(r,e){return G({},c6,r,e)}function v6(r,e){return G({},l6,r,e)}function E6(r,e){return G({},h6,r,e)}function w6(r,e){return U(r)}function nd(r,e,t,i,n,s){n!==void 0?(n=n,s=s!==void 0?s:0):(n=[],s=0);let o=e;for(;o<t;){const a=r[o++];n[s++]=r[o++],n[s++]=a;for(let l=2;l<i;++l)n[s++]=r[o++]}return n.length=s,n}class T6 extends lh{constructor(e){super(),e=e||{},this.dataProjection=V("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const i=this.readGeometryFromText(e,t);return new Ee(i)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const i=Co(this.geometryLayout_),n=R6(e,i,this.factor_);nd(n,0,n.length,i,n);const s=new ze(n,this.geometryLayout_);return je(s,!1,this.adaptOptions(t))}writeFeatureText(e,t){const i=e.getGeometry();if(i)return this.writeGeometryText(i,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){e=je(e,!0,this.adaptOptions(t));const i=e.getFlatCoordinates(),n=e.getStride();return nd(i,0,i.length,n,i),S6(i,n,this.factor_)}}function S6(r,e,t){t=t||1e5;const i=new Array(e).fill(0);for(let n=0,s=r.length;n<s;)for(let o=0;o<e;++o,++n){const a=r[n]*t,l=a<0?Math.ceil(a-.5):Math.round(a),c=l-i[o];i[o]=l,r[n]=c}return L6(r)}function R6(r,e,t){t=t||1e5;const i=new Array(e).fill(0),n=P6(r);for(let s=0,o=n.length;s<o;)for(let a=0;a<e;++a,++s)i[a]+=n[s],n[s]=i[a]/t;return n}function L6(r){for(let e=0,t=r.length;e<t;++e){const i=r[e];r[e]=i<0?~(i<<1):i<<1}return I6(r)}function P6(r){const e=A6(r);for(let t=0,i=e.length;t<i;++t){const n=e[t];e[t]=n&1?~(n>>1):n>>1}return e}function I6(r){let e="";for(let t=0,i=r.length;t<i;++t)e+=F6(r[t]);return e}function A6(r){const e=[];let t=0,i=0;for(let n=0,s=r.length;n<s;++n){const o=r.charCodeAt(n)-63;t|=(o&31)<<i,o<32?(e.push(t),t=0,i=0):i+=5}return e}function F6(r){let e,t="";for(;r>=32;)e=(32|r&31)+63,t+=String.fromCharCode(e),r>>=5;return e=r+63,t+=String.fromCharCode(e),t}class ve extends X{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,t,i){const n=i[i.length-1];i[i.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},n),super.writeGeometryElement(e,t,i)}}ve.prototype.namespace="http://www.opengis.net/gml/3.2";ve.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:te(X.prototype.readFlatPos),posList:te(X.prototype.readFlatPosList),coordinates:te(pe.prototype.readFlatCoordinates)}};ve.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:X.prototype.interiorParser,exterior:X.prototype.exteriorParser}};ve.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:te(q.prototype.readPoint),MultiPoint:te(q.prototype.readMultiPoint),LineString:te(q.prototype.readLineString),MultiLineString:te(q.prototype.readMultiLineString),LinearRing:te(q.prototype.readLinearRing),Polygon:te(q.prototype.readPolygon),MultiPolygon:te(q.prototype.readMultiPolygon),Surface:te(ve.prototype.readSurface),MultiSurface:te(X.prototype.readMultiSurface),Curve:te(ve.prototype.readCurve),MultiCurve:te(X.prototype.readMultiCurve),Envelope:te(ve.prototype.readEnvelope)}};ve.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:J(X.prototype.curveMemberParser),curveMembers:J(X.prototype.curveMemberParser)}};ve.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:J(X.prototype.surfaceMemberParser),surfaceMembers:J(X.prototype.surfaceMemberParser)}};ve.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:J(q.prototype.readLineString),Curve:J(X.prototype.readCurve)}};ve.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:J(q.prototype.readPolygon),Surface:J(X.prototype.readSurface)}};ve.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:te(X.prototype.readPatch)}};ve.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:te(X.prototype.readSegment)}};ve.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:J(X.prototype.readFlatPosList),upperCorner:J(X.prototype.readFlatPosList)}};ve.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:te(X.prototype.readPolygonPatch)}};ve.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:c2(X.prototype.readLineStringSegment)}};ve.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:J(q.prototype.pointMemberParser),pointMembers:J(q.prototype.pointMemberParser)}};ve.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:J(q.prototype.lineStringMemberParser),lineStringMembers:J(q.prototype.lineStringMemberParser)}};ve.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:J(q.prototype.polygonMemberParser),polygonMembers:J(q.prototype.polygonMemberParser)}};ve.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:J(q.prototype.readFlatCoordinatesFromNode)}};ve.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:J(q.prototype.readLineString)}};ve.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:J(q.prototype.readPolygon)}};ve.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:te(q.prototype.readFlatLinearRing),Ring:te(ve.prototype.readFlatCurveRing)}};ve.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:S(X.prototype.writeRing),interior:S(X.prototype.writeRing)}};ve.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:S(oe),upperCorner:S(oe)}};ve.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:S(X.prototype.writeSurfaceOrPolygonMember),polygonMember:S(X.prototype.writeSurfaceOrPolygonMember)}};ve.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:S(X.prototype.writePointMember)}};ve.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:S(X.prototype.writeLineStringOrCurveMember),curveMember:S(X.prototype.writeLineStringOrCurveMember)}};ve.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:S(X.prototype.writeCurveOrLineString),MultiCurve:S(X.prototype.writeMultiCurveOrLineString),Point:S(ve.prototype.writePoint),MultiPoint:S(X.prototype.writeMultiPoint),LineString:S(X.prototype.writeCurveOrLineString),MultiLineString:S(X.prototype.writeMultiCurveOrLineString),LinearRing:S(X.prototype.writeLinearRing),Polygon:S(X.prototype.writeSurfaceOrPolygon),MultiPolygon:S(X.prototype.writeMultiSurfaceOrPolygon),Surface:S(X.prototype.writeSurfaceOrPolygon),MultiSurface:S(X.prototype.writeMultiSurfaceOrPolygon),Envelope:S(X.prototype.writeEnvelope)}};class Bg{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}}class M6 extends Bg{constructor(e,t){super(e),this.conditions=t,me(this.conditions.length>=2,"At least 2 conditions are required")}}class k6 extends M6{constructor(e){super("And",Array.prototype.slice.call(arguments))}}class O6 extends Bg{constructor(e,t,i){if(super("BBOX"),this.geometryName=e,this.extent=t,t.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=i}}function N6(r){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(k6,e))}function D6(r,e,t){return new O6(r,e,t)}const rd={"http://www.opengis.net/gml":{boundedBy:E(q.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:J(q.prototype.readFeaturesInternal)}},G6={"http://www.opengis.net/wfs":{totalInserted:E(Qe),totalUpdated:E(Qe),totalDeleted:E(Qe)},"http://www.opengis.net/wfs/2.0":{totalInserted:E(Qe),totalUpdated:E(Qe),totalDeleted:E(Qe)}},z6={"http://www.opengis.net/wfs":{TransactionSummary:E(od,"transactionSummary"),InsertResults:E(ld,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:E(od,"transactionSummary"),InsertResults:E(ld,"insertIds")}},U6={"http://www.opengis.net/wfs":{PropertyName:S(oe)},"http://www.opengis.net/wfs/2.0":{PropertyName:S(oe)}},jg={"http://www.opengis.net/wfs":{Insert:S(cd),Update:S(ud),Delete:S(hd),Property:S(dd),Native:S(fd)},"http://www.opengis.net/wfs/2.0":{Insert:S(cd),Update:S(ud),Delete:S(hd),Property:S(dd),Native:S(fd)}},Xg="feature",hh="http://www.w3.org/2000/xmlns/",uh={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},zl={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},dh={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},sd={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},fh={"2.0.0":ve,"1.1.0":X,"1.0.0":pe},B6="1.1.0";class j6 extends Ko{constructor(e){super(),e=e||{},this.version_=e.version?e.version:B6,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new fh[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:sd[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,t){const i={node:e};Object.assign(i,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(i,this.getReadOptions(e,t||{}));const n=[i];let s;this.version_==="2.0.0"?s=rd:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=G([],s,e,n,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(e){if(e){if(typeof e=="string"){const t=ui(e);return this.readTransactionResponseFromDocument(t)}return hi(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const t=ui(e);return this.readFeatureCollectionMetadataFromDocument(t)}return hi(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}readFeatureCollectionMetadataFromNode(e){const t={},i=Ki(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=i,G(t,rd,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}readTransactionResponseFromNode(e){return G({},z6,e,[])}writeGetFeature(e){const t=ce(zl[this.version_],"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version",this.version_),e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&t.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&t.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&t.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&t.setAttribute("count",String(e.count)),e.viewParams!==void 0&&t.setAttribute("viewParams",e.viewParams),t.setAttributeNS(dr,"xsi:schemaLocation",this.schemaLocation_);const i={node:t};if(Object.assign(i,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),me(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let n=e.filter;e.bbox&&(me(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),n=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,n)),Object.assign(i,{geometryName:e.geometryName,filter:n}),Ed(t,e.featureTypes,[i])}else e.featureTypes.forEach(n=>{const s=this.combineBboxAndFilter(n.geometryName,n.bbox,e.srsName,e.filter);Object.assign(i,{geometryName:n.geometryName,filter:s}),Ed(t,[n.name],[i])});return t}combineBboxAndFilter(e,t,i,n){const s=D6(e,t,i);return n?N6(n,s):s}writeTransaction(e,t,i,n){const s=[],o=n.version?n.version:this.version_,a=ce(zl[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;n&&(l=n.gmlOptions?n.gmlOptions:{},n.handle&&a.setAttribute("handle",n.handle)),a.setAttributeNS(dr,"xsi:schemaLocation",sd[o]);const c=X6(a,l,o,n);return e&&La("Insert",e,s,c),t&&La("Update",t,s,c),i&&La("Delete",i,s,c),n.nativeElements&&La("Native",n.nativeElements,s,c),a}readProjectionFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(!(t.childNodes.length===0||t.childNodes.length===1&&t.firstChild.nodeType===3)){const i=[{}];return this.gmlFormat_.readGeometryElement(t,i),V(i.pop().srsName)}}return null}}function X6(r,e,t,i){const n=i.featurePrefix?i.featurePrefix:Xg;let s;return t==="1.0.0"?s=2:t==="1.1.0"?s=3:t==="2.0.0"&&(s=3.2),Object.assign({node:r},{version:t,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:n,gmlVersion:s,hasZ:i.hasZ,srsName:i.srsName},e)}function La(r,e,t,i){le(i,jg,Ke(r),e,t)}function od(r,e){return G({},G6,r,e)}const V6={"http://www.opengis.net/ogc":{FeatureId:J(function(r,e){return r.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:J(function(r,e){return r.getAttribute("fid")})}};function ad(r,e){Ut(V6,r,e)}const W6={"http://www.opengis.net/wfs":{Feature:ad},"http://www.opengis.net/wfs/2.0":{Feature:ad}};function ld(r,e){return G([],W6,r,e)}function cd(r,e,t){const i=t[t.length-1],n=i.featureType,s=i.featureNS,o=i.gmlVersion,a=ce(s,n);r.appendChild(a),o===2?pe.prototype.writeFeatureElement(a,e,t):o===3?X.prototype.writeFeatureElement(a,e,t):ve.prototype.writeFeatureElement(a,e,t)}function Vg(r,e,t){const n=t[t.length-1].version,s=uh[n],o=ce(s,"Filter"),a=ce(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),r.appendChild(o)}function gh(r,e){r=r||Xg;const t=r+":";return e.startsWith(t)?e:t+e}function hd(r,e,t){const i=t[t.length-1];me(e.getId()!==void 0,"Features must have an id set");const n=i.featureType,s=i.featurePrefix,o=i.featureNS,a=gh(s,n);r.setAttribute("typeName",a),r.setAttributeNS(hh,"xmlns:"+s,o);const l=e.getId();l!==void 0&&Vg(r,l,t)}function ud(r,e,t){const i=t[t.length-1];me(e.getId()!==void 0,"Features must have an id set");const n=i.version,s=i.featureType,o=i.featurePrefix,a=i.featureNS,l=gh(o,s),c=e.getGeometryName();r.setAttribute("typeName",l),r.setAttributeNS(hh,"xmlns:"+o,a);const h=e.getId();if(h!==void 0){const u=e.getKeys(),d=[];for(let f=0,g=u.length;f<g;f++){const p=e.get(u[f]);if(p!==void 0){let m=u[f];p&&typeof p.getSimplifiedGeometry=="function"&&(m=c),d.push({name:m,value:p})}}le({version:n,gmlVersion:i.gmlVersion,node:r,hasZ:i.hasZ,srsName:i.srsName},jg,Ke("Property"),d,t),Vg(r,h,t)}}function dd(r,e,t){const i=t[t.length-1],n=i.version,s=zl[n],a=ce(s,n==="2.0.0"?"ValueReference":"Name"),l=i.gmlVersion;if(r.appendChild(a),oe(a,e.name),e.value!==void 0&&e.value!==null){const c=ce(s,"Value");r.appendChild(c),e.value&&typeof e.value.getSimplifiedGeometry=="function"?l===2?pe.prototype.writeGeometryElement(c,e.value,t):l===3?X.prototype.writeGeometryElement(c,e.value,t):ve.prototype.writeGeometryElement(c,e.value,t):oe(c,e.value)}}function fd(r,e,t){e.vendorId&&r.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&r.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&oe(r,e.value)}const s0={"http://www.opengis.net/wfs":{Query:S(gd)},"http://www.opengis.net/wfs/2.0":{Query:S(gd)},"http://www.opengis.net/ogc":{During:S(_d),And:S(Pa),Or:S(Pa),Not:S(yd),BBOX:S(md),Contains:S(mn),Intersects:S(mn),Within:S(mn),DWithin:S(pd),PropertyIsEqualTo:S(si),PropertyIsNotEqualTo:S(si),PropertyIsLessThan:S(si),PropertyIsLessThanOrEqualTo:S(si),PropertyIsGreaterThan:S(si),PropertyIsGreaterThanOrEqualTo:S(si),PropertyIsNull:S(xd),PropertyIsBetween:S(Cd),PropertyIsLike:S(bd)},"http://www.opengis.net/fes/2.0":{During:S(_d),And:S(Pa),Or:S(Pa),Not:S(yd),BBOX:S(md),Contains:S(mn),Disjoint:S(mn),Intersects:S(mn),ResourceId:S(Y6),Within:S(mn),DWithin:S(pd),PropertyIsEqualTo:S(si),PropertyIsNotEqualTo:S(si),PropertyIsLessThan:S(si),PropertyIsLessThanOrEqualTo:S(si),PropertyIsGreaterThan:S(si),PropertyIsGreaterThanOrEqualTo:S(si),PropertyIsNull:S(xd),PropertyIsBetween:S(Cd),PropertyIsLike:S(bd)}};function gd(r,e,t){const i=t[t.length-1],n=i.version,s=i.featurePrefix,o=i.featureNS,a=i.propertyNames,l=i.srsName;let c;s?c=gh(s,e):c=e;let h;n==="2.0.0"?h="typeNames":h="typeName",r.setAttribute(h,c),l&&r.setAttribute("srsName",l),o&&r.setAttributeNS(hh,"xmlns:"+s,o);const u=Object.assign({},i);u.node=r,le(u,U6,Ke("PropertyName"),a,t);const d=i.filter;if(d){const f=ce(o0(n),"Filter");r.appendChild(f),Z6(f,d,t)}}function Z6(r,e,t){const i=t[t.length-1],n={node:r};Object.assign(n,{context:i}),le(n,s0,Ke(e.getTagName()),[e],t)}function md(r,e,t){const i=t[t.length-1],s=i.context.version;i.srsName=e.srsName;const o=fh[s];zs(s,r,e.geometryName),o.prototype.writeGeometryElement(r,e.extent,t)}function Y6(r,e,t){r.setAttribute("rid",e.rid)}function mn(r,e,t){const i=t[t.length-1],s=i.context.version;i.srsName=e.srsName;const o=fh[s];zs(s,r,e.geometryName),o.prototype.writeGeometryElement(r,e.geometry,t)}function pd(r,e,t){const s=t[t.length-1].context.version;mn(r,e,t);const o=ce(o0(s),"Distance");oe(o,e.distance.toString()),s==="2.0.0"?o.setAttribute("uom",e.unit):o.setAttribute("units",e.unit),r.appendChild(o)}function _d(r,e,t){const s=t[t.length-1].context.version;_2(dh[s],"ValueReference",r,e.propertyName);const o=ce(Qi,"TimePeriod");r.appendChild(o);const a=ce(Qi,"begin");o.appendChild(a),vd(a,e.begin);const l=ce(Qi,"end");o.appendChild(l),vd(l,e.end)}function Pa(r,e,t){const n=t[t.length-1].context,s={node:r};Object.assign(s,{context:n});const o=e.conditions;for(let a=0,l=o.length;a<l;++a){const c=o[a];le(s,s0,Ke(c.getTagName()),[c],t)}}function yd(r,e,t){const n=t[t.length-1].context,s={node:r};Object.assign(s,{context:n});const o=e.condition;le(s,s0,Ke(o.getTagName()),[o],t)}function si(r,e,t){const s=t[t.length-1].context.version;e.matchCase!==void 0&&r.setAttribute("matchCase",e.matchCase.toString()),zs(s,r,e.propertyName),y2(s,r,""+e.expression)}function xd(r,e,t){const s=t[t.length-1].context.version;zs(s,r,e.propertyName)}function Cd(r,e,t){const s=t[t.length-1].context.version,o=o0(s);zs(s,r,e.propertyName);const a=ce(o,"LowerBoundary");r.appendChild(a),y2(s,a,""+e.lowerBoundary);const l=ce(o,"UpperBoundary");r.appendChild(l),y2(s,l,""+e.upperBoundary)}function bd(r,e,t){const s=t[t.length-1].context.version;r.setAttribute("wildCard",e.wildCard),r.setAttribute("singleChar",e.singleChar),r.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&r.setAttribute("matchCase",e.matchCase.toString()),zs(s,r,e.propertyName),y2(s,r,""+e.pattern)}function _2(r,e,t,i){const n=ce(r,e);oe(n,i),t.appendChild(n)}function y2(r,e,t){_2(o0(r),"Literal",e,t)}function zs(r,e,t){r==="2.0.0"?_2(dh[r],"ValueReference",e,t):_2(uh[r],"PropertyName",e,t)}function vd(r,e){const t=ce(Qi,"TimeInstant");r.appendChild(t);const i=ce(Qi,"timePosition");t.appendChild(i),oe(i,e)}function Ed(r,e,t){const i=t[t.length-1],n=Object.assign({},i);n.node=r,le(n,s0,Ke("Query"),e,t)}function o0(r){let e;return r==="2.0.0"?e=dh[r]:e=uh[r],e}const Pe={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class wd{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),t=[];for(let i=0;i<e;i++)t.push(this.readPoint());return t}readPolygon(){const e=this.readUint32(),t=[];for(let i=0;i<e;i++)t.push(this.readLineString());return t}readWkbHeader(e){const i=this.readUint8()>0,n=this.readUint32(i),s=Math.floor((n&268435455)/1e3),o=!!(n&2147483648)||s===1||s===3,a=!!(n&1073741824)||s===2||s===3,l=!!(n&536870912),c=(n&268435455)%1e3,h=["XY",o?"Z":"",a?"M":""].join(""),u=l?this.readUint32(i):null;if(e!==void 0&&e!==c)throw new Error("Unexpected WKB geometry type "+c);if(this.initialized_){if(this.isLittleEndian_!==i)throw new Error("Inconsistent endian");if(this.layout_!==h)throw new Error("Inconsistent geometry layout");if(u&&this.srid_!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=i,this.hasZ_=o,this.hasM_=a,this.layout_=h,this.srid_=u,this.initialized_=!0;return c}readWkbPayload(e){switch(e){case Pe.POINT:return this.readPoint();case Pe.LINE_STRING:return this.readLineString();case Pe.POLYGON:case Pe.TRIANGLE:return this.readPolygon();case Pe.MULTI_POINT:return this.readMultiPoint();case Pe.MULTI_LINE_STRING:return this.readMultiLineString();case Pe.MULTI_POLYGON:case Pe.POLYHEDRAL_SURFACE:case Pe.TIN:return this.readMultiPolygon();case Pe.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,t){const i=this.readUint32(),n=[];for(let s=0;s<i;s++){const o=e.call(this,t);o&&n.push(o)}return n}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,Pe.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,Pe.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,Pe.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case Pe.POINT:return new Oe(t,this.layout_);case Pe.LINE_STRING:return new ze(t,this.layout_);case Pe.POLYGON:case Pe.TRIANGLE:return new Ve(t,this.layout_);case Pe.MULTI_POINT:return new mi(t,this.layout_);case Pe.MULTI_LINE_STRING:return new wt(t,this.layout_);case Pe.MULTI_POLYGON:case Pe.POLYHEDRAL_SURFACE:case Pe.TIN:return new Xt(t,this.layout_);case Pe.GEOMETRY_COLLECTION:return new at(t);default:return null}}getSrid(){return this.srid_}}class $6{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,t){const i=Object.assign.apply(null,t.split("").map((n,s)=>({[n]:e[s]})));for(const n of this.layout_)this.writeDouble(n in i?i[n]:this.nodata_[n])}writeLineString(e,t){this.writeUint32(e.length);for(let i=0;i<e.length;i++)this.writePoint(e[i],t)}writePolygon(e,t){this.writeUint32(e.length);for(let i=0;i<e.length;i++)this.writeLineString(e[i],t)}writeWkbHeader(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}writeMultiPoint(e,t){this.writeUint32(e.length);for(let i=0;i<e.length;i++)this.writeWkbHeader(1),this.writePoint(e[i],t)}writeMultiLineString(e,t){this.writeUint32(e.length);for(let i=0;i<e.length;i++)this.writeWkbHeader(2),this.writeLineString(e[i],t)}writeMultiPolygon(e,t){this.writeUint32(e.length);for(let i=0;i<e.length;i++)this.writeWkbHeader(3),this.writePolygon(e[i],t)}writeGeometryCollection(e){this.writeUint32(e.length);for(let t=0;t<e.length;t++)this.writeGeometry(e[t])}findMinimumLayout(e,t="XYZM"){const i=(n,s)=>n===s?n:n==="XYZM"?s:s==="XYZM"?n:"XY";if(e instanceof ki)return i(e.getLayout(),t);if(e instanceof at){const n=e.getGeometriesArray();for(let s=0;s<n.length&&t!=="XY";s++)t=this.findMinimumLayout(n[s],t)}return t}writeGeometry(e,t){const i={Point:Pe.POINT,LineString:Pe.LINE_STRING,Polygon:Pe.POLYGON,MultiPoint:Pe.MULTI_POINT,MultiLineString:Pe.MULTI_LINE_STRING,MultiPolygon:Pe.MULTI_POLYGON,GeometryCollection:Pe.GEOMETRY_COLLECTION},n=e.getType(),s=i[n];if(!s)throw new Error("GeometryType "+n+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,t),e instanceof ki?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[n].call(this,e.getCoordinates(),e.getLayout()):e instanceof at&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((s,o)=>s+o[0],0),t=new ArrayBuffer(e),i=new DataView(t);let n=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:i.setUint8(n,s[1]);break;case 4:i.setUint32(n,s[1],this.isLittleEndian_);break;case 8:i.setFloat64(n,s[1],this.isLittleEndian_);break}n+=s[0]}),t}}class H6 extends $o{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,t){return new Ee({geometry:this.readGeometry(e,t)})}readFeatures(e,t){let i=[];const n=this.readGeometry(e,t);return this.splitCollection&&n instanceof at?i=n.getGeometriesArray():i=[n],i.map(s=>new Ee({geometry:s}))}readGeometry(e,t){const i=Td(e);if(!i)return null;const s=new wd(i).readGeometry();return this.viewCache_=i,t=this.getReadOptions(e,t),this.viewCache_=null,je(s,!1,t)}readProjection(e){const t=this.viewCache_||Td(e);if(!t)return;const i=new wd(t);return i.readWkbHeader(),i.getSrid()&&V("EPSG:"+i.getSrid())||void 0}writeFeature(e,t){return this.writeGeometry(e.getGeometry(),t)}writeFeatures(e,t){return this.writeGeometry(new at(e.map(i=>i.getGeometry())),t)}writeGeometry(e,t){t=this.adaptOptions(t);const i=new $6({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let n=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=t.dataProjection&&V(t.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(n=Number(a.substring(5)))}}i.writeGeometry(je(e,!0,t),n);const s=i.getBuffer();return this.hex_?K6(s):s}}function K6(r){const e=new Uint8Array(r);return Array.from(e.values()).map(t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase()).join("")}function q6(r){const e=new Uint8Array(r.length/2);for(let t=0;t<r.length/2;t++)e[t]=parseInt(r.substr(t*2,2),16);return new DataView(e.buffer)}function Td(r){return typeof r=="string"?q6(r):ArrayBuffer.isView(r)?r instanceof DataView?r:new DataView(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new DataView(r):null}const J6={POINT:Oe,LINESTRING:ze,POLYGON:Ve,MULTIPOINT:mi,MULTILINESTRING:wt,MULTIPOLYGON:Xt},Wg="EMPTY",Zg="Z",Yg="M",Q6="ZM",Re={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},eC={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class tC{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let i=e,n;if(e=="(")n=Re.LEFT_PAREN;else if(e==",")n=Re.COMMA;else if(e==")")n=Re.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")n=Re.NUMBER,i=this.readNumber_();else if(this.isAlpha_(e))n=Re.TEXT,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")n=Re.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:i,type:n}}readNumber_(){let e;const t=this.index_;let i=!1,n=!1;do e=="."?i=!0:(e=="e"||e=="E")&&(n=!0),e=this.nextChar_();while(this.isNumeric_(e,i)||!n&&(e=="e"||e=="E")||n&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class iC{constructor(e){this.lexer_=e,this.token_={position:0,type:Re.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(Re.TEXT)){const i=t.value;i===Zg?e="XYZ":i===Yg?e="XYM":i===Q6&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Re.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(Re.COMMA));if(this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Re.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Re.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Re.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Re.LEFT_PAREN)){let e;if(this.token_.type==Re.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Re.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Re.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(Re.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let i=0;i<t;++i){const n=this.token_;if(this.match(Re.NUMBER))e.push(n.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(Re.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(Re.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(Re.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(Re.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(Re.TEXT)&&this.token_.value==Wg;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(Re.TEXT)){const t=e.value;this.layout_=this.parseGeometryLayout_();const i=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(i)return new at([]);const o=this.parseGeometryCollectionText_();return new at(o)}const n=J6[t];if(!n)throw new Error("Invalid geometry type: "+t);let s;if(i)t=="POINT"?s=[NaN,NaN]:s=[];else switch(t){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new n(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class nC extends lh{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const t=new tC(e);return new iC(t).parse()}readFeatureFromText(e,t){const i=this.readGeometryFromText(e,t),n=new Ee;return n.setGeometry(i),n}readFeaturesFromText(e,t){let i=[];const n=this.readGeometryFromText(e,t);this.splitCollection_&&n.getType()=="GeometryCollection"?i=n.getGeometriesArray():i=[n];const s=[];for(let o=0,a=i.length;o<a;++o){const l=new Ee;l.setGeometry(i[o]),s.push(l)}return s}readGeometryFromText(e,t){const i=this.parse_(e);return je(i,!1,t)}writeFeatureText(e,t){const i=e.getGeometry();return i?this.writeGeometryText(i,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);const i=[];for(let s=0,o=e.length;s<o;++s)i.push(e[s].getGeometry());const n=new at(i);return this.writeGeometryText(n,t)}writeGeometryText(e,t){return Kg(je(e,!0,t))}}function $g(r){const e=r.getCoordinates();return e.length===0?"":e.join(" ")}function rC(r){const e=[],t=r.getPoints();for(let i=0,n=t.length;i<n;++i)e.push("("+$g(t[i])+")");return e.join(",")}function sC(r){const e=[],t=r.getGeometries();for(let i=0,n=t.length;i<n;++i)e.push(Kg(t[i]));return e.join(",")}function mh(r){const e=r.getCoordinates(),t=[];for(let i=0,n=e.length;i<n;++i)t.push(e[i].join(" "));return t.join(",")}function oC(r){const e=[],t=r.getLineStrings();for(let i=0,n=t.length;i<n;++i)e.push("("+mh(t[i])+")");return e.join(",")}function Hg(r){const e=[],t=r.getLinearRings();for(let i=0,n=t.length;i<n;++i)e.push("("+mh(t[i])+")");return e.join(",")}function aC(r){const e=[],t=r.getPolygons();for(let i=0,n=t.length;i<n;++i)e.push("("+Hg(t[i])+")");return e.join(",")}function lC(r){const e=r.getLayout();let t="";return(e==="XYZ"||e==="XYZM")&&(t+=Zg),(e==="XYM"||e==="XYZM")&&(t+=Yg),t}const cC={Point:$g,LineString:mh,Polygon:Hg,MultiPoint:rC,MultiLineString:oC,MultiPolygon:aC,GeometryCollection:sC};function Kg(r){const e=r.getType(),t=cC[e],i=t(r);let n=eC[e];if(typeof r.getFlatCoordinates=="function"){const s=lC(r);s.length>0&&(n+=" "+s)}return i.length===0?n+" "+Wg:n+"("+i+")"}const ut=[null,"http://www.opengis.net/wms","http://www.opengis.net/sld"];function na(r){return I2(r[0].version,"1.3")>=0}const hC=k(ut,{Service:E(FC),Capability:E(AC)}),uC=k(ut,{Request:E(BC),Exception:E(NC),Layer:E(DC),UserDefinedSymbolization:E(PC)});class dC extends ch{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=G({version:this.version},hC,e,[]);return t||null}}const qg={Name:E(U),Title:E(U),Abstract:E(U),KeywordList:E(nm),OnlineResource:E(Gs),ContactInformation:E(MC),Fees:E(U),AccessConstraints:E(U)},fC=k(ut,qg),gC=k(ut,{...qg,LayerLimit:E(Qe),MaxWidth:E(Qe),MaxHeight:E(Qe)}),mC=k(ut,{ContactPersonPrimary:E(kC),ContactPosition:E(U),ContactAddress:E(OC),ContactVoiceTelephone:E(U),ContactFacsimileTelephone:E(U),ContactElectronicMailAddress:E(U)}),pC=k(ut,{ContactPerson:E(U),ContactOrganization:E(U)}),_C=k(ut,{AddressType:E(U),Address:E(U),City:E(U),StateOrProvince:E(U),PostCode:E(U),Country:E(U)}),yC=k(ut,{Format:J(U)}),Jg={Name:E(U),Title:E(U),Abstract:E(U),KeywordList:E(nm),BoundingBox:Le(tm),Dimension:Le(GC),Attribution:E(LC),AuthorityURL:Le(VC),Identifier:Le(U),MetadataURL:Le(WC),DataURL:Le(nn),FeatureListURL:Le(nn),Style:Le(ZC),Layer:Le(a0)},Qg=k(ut,{...Jg,SRS:Le(U),Extent:E(zC),ScaleHint:Le(UC),LatLonBoundingBox:E((r,e)=>tm(r,e,!1)),Layer:Le(a0)}),em=k(ut,{...Jg,CRS:Le(U),EX_GeographicBoundingBox:E(IC),MinScaleDenominator:E(_e),MaxScaleDenominator:E(_e),Layer:Le(a0)}),xC=k(ut,{Title:E(U),OnlineResource:E(Gs),LogoURL:E(im)}),CC=k(ut,{westBoundLongitude:E(_e),eastBoundLongitude:E(_e),southBoundLatitude:E(_e),northBoundLatitude:E(_e)}),bC=k(ut,{GetCapabilities:E(Js),GetMap:E(Js),GetFeatureInfo:E(Js),DescribeLayer:E(Js),GetLegendGraphic:E(Js)}),vC=k(ut,{Format:Le(U),DCPType:Le(jC)}),EC=k(ut,{HTTP:E(XC)}),wC=k(ut,{Get:E(nn),Post:E(nn)}),TC=k(ut,{Name:E(U),Title:E(U),Abstract:E(U),LegendURL:Le(im),StyleSheetURL:E(nn),StyleURL:E(nn)}),SC=k(ut,{Format:E(U),OnlineResource:E(Gs)}),RC=k(ut,{Keyword:J(U)});function LC(r,e){return G({},xC,r,e)}function PC(r,e){return{SupportSLD:!!Nt(r.getAttribute("SupportSLD")),UserLayer:!!Nt(r.getAttribute("UserLayer")),UserStyle:!!Nt(r.getAttribute("UserStyle")),RemoteWFS:!!Nt(r.getAttribute("RemoteWFS")),InlineFeatureData:!!Nt(r.getAttribute("InlineFeatureData")),RemoteWCS:!!Nt(r.getAttribute("RemoteWCS"))}}function tm(r,e,t=!0){const i=[_i(r.getAttribute("minx")),_i(r.getAttribute("miny")),_i(r.getAttribute("maxx")),_i(r.getAttribute("maxy"))],n=[_i(r.getAttribute("resx")),_i(r.getAttribute("resy"))],s={extent:i,res:n};return t&&(na(e)?s.crs=r.getAttribute("CRS"):s.srs=r.getAttribute("SRS")),s}function IC(r,e){const t=G({},CC,r,e);if(!t)return;const i=t.westBoundLongitude,n=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(i===void 0||n===void 0||s===void 0||o===void 0))return[i,n,s,o]}function AC(r,e){return G({},uC,r,e)}function FC(r,e){return G({},na(e)?gC:fC,r,e)}function MC(r,e){return G({},mC,r,e)}function kC(r,e){return G({},pC,r,e)}function OC(r,e){return G({},_C,r,e)}function NC(r,e){return G([],yC,r,e)}function DC(r,e){const t=G({},na(e)?em:Qg,r,e);return t.Layer===void 0?Object.assign(t,a0(r,e)):t}function a0(r,e){const t=na(e),i=e[e.length-1],n=G({},t?em:Qg,r,e);if(!n)return;let s=Nt(r.getAttribute("queryable"));s===void 0&&(s=i.queryable),n.queryable=s!==void 0?s:!1;let o=Ki(r.getAttribute("cascaded"));o===void 0&&(o=i.cascaded),n.cascaded=o;let a=Nt(r.getAttribute("opaque"));a===void 0&&(a=i.opaque),n.opaque=a!==void 0?a:!1;let l=Nt(r.getAttribute("noSubsets"));l===void 0&&(l=i.noSubsets),n.noSubsets=l!==void 0?l:!1;let c=_i(r.getAttribute("fixedWidth"));c||(c=i.fixedWidth),n.fixedWidth=c;let h=_i(r.getAttribute("fixedHeight"));h||(h=i.fixedHeight),n.fixedHeight=h;const u=["Style","AuthorityURL"];t?u.push("CRS"):u.push("SRS","Dimension"),u.forEach(function(f){if(f in i){const g=n[f]||[];n[f]=g.concat(i[f])}});const d=["BoundingBox","Attribution"];return t?d.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):d.push("LatLonBoundingBox","ScaleHint","Extent"),d.forEach(function(f){if(!(f in n)){const g=i[f];n[f]=g}}),n}function GC(r,e){const t={name:r.getAttribute("name"),units:r.getAttribute("units"),unitSymbol:r.getAttribute("unitSymbol")};return na(e)&&Object.assign(t,{default:r.getAttribute("default"),multipleValues:Nt(r.getAttribute("multipleValues")),nearestValue:Nt(r.getAttribute("nearestValue")),current:Nt(r.getAttribute("current")),values:U(r)}),t}function zC(r,e){return{name:r.getAttribute("name"),default:r.getAttribute("default"),nearestValue:Nt(r.getAttribute("nearestValue"))}}function UC(r,e){return{min:_i(r.getAttribute("min")),max:_i(r.getAttribute("max"))}}function nn(r,e){return G({},SC,r,e)}function BC(r,e){return G({},bC,r,e)}function jC(r,e){return G({},EC,r,e)}function XC(r,e){return G({},wC,r,e)}function Js(r,e){return G({},vC,r,e)}function im(r,e){const t=nn(r,e);if(t){const i=[Ki(r.getAttribute("width")),Ki(r.getAttribute("height"))];return t.size=i,t}}function VC(r,e){const t=nn(r,e);if(t)return t.name=r.getAttribute("name"),t}function WC(r,e){const t=nn(r,e);if(t)return t.type=r.getAttribute("type"),t}function ZC(r,e){return G({},TC,r,e)}function nm(r,e){return G([],RC,r,e)}const YC="_feature",$C="_layer";class HC extends Ko{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new pe,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,t){e.setAttribute("namespaceURI",this.featureNS_);const i=e.localName;let n=[];if(e.childNodes.length===0)return n;if(i=="msGMLOutput")for(let s=0,o=e.childNodes.length;s<o;s++){const a=e.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,c=t[0],h=$C,u=l.localName.replace(h,"");if(this.layers_&&!this.layers_.includes(u))continue;const d=u+YC;c.featureType=d,c.featureNS=this.featureNS_;const f={};f[d]=J(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const g=k([c.featureNS,null],f);l.setAttribute("namespaceURI",this.featureNS_);const p=G([],g,l,t,this.gmlFormat_);p&&xe(n,p)}if(i=="FeatureCollection"){const s=G([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);s&&(n=s)}return n}readFeaturesFromNode(e,t){const i={};return t&&Object.assign(i,this.getReadOptions(e,t)),this.readFeatures_(e,[i])}}const Gi=[null,"http://www.opengis.net/wmts/1.0"],Us=[null,"http://www.opengis.net/ows/1.1"],KC=k(Gi,{Contents:E(ob)});let rm=class extends ch{constructor(){super(),this.owsParser_=new Ug}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let i=this.owsParser_.readFromNode(e);return i?(i.version=t,i=G(i,KC,e,[]),i||null):null}};const qC=k(Gi,{Layer:Le(ab),TileMatrixSet:Le(lb)}),JC=k(Gi,{Style:Le(cb),Format:Le(U),TileMatrixSetLink:Le(hb),Dimension:Le(ub),ResourceURL:Le(db)},k(Us,{Title:E(U),Abstract:E(U),WGS84BoundingBox:E(om),BoundingBox:Le(fb),Identifier:E(U)})),QC=k(Gi,{LegendURL:Le(gb)},k(Us,{Title:E(U),Identifier:E(U)})),eb=k(Gi,{TileMatrixSet:E(U),TileMatrixSetLimits:E(pb)}),tb=k(Gi,{TileMatrixLimits:J(_b)}),ib=k(Gi,{TileMatrix:E(U),MinTileRow:E(Qe),MaxTileRow:E(Qe),MinTileCol:E(Qe),MaxTileCol:E(Qe)}),nb=k(Gi,{Default:E(U),Value:Le(U)},k(Us,{Identifier:E(U)})),sm=k(Us,{LowerCorner:J(Ul),UpperCorner:J(Ul)}),rb=k(Gi,{WellKnownScaleSet:E(U),TileMatrix:Le(mb)},k(Us,{SupportedCRS:E(U),Identifier:E(U),BoundingBox:E(om)})),sb=k(Gi,{TopLeftCorner:E(Ul),ScaleDenominator:E(_e),TileWidth:E(Qe),TileHeight:E(Qe),MatrixWidth:E(Qe),MatrixHeight:E(Qe)},k(Us,{Identifier:E(U)}));function ob(r,e){return G({},qC,r,e)}function ab(r,e){return G({},JC,r,e)}function lb(r,e){return G({},rb,r,e)}function cb(r,e){const t=G({},QC,r,e);if(!t)return;const i=r.getAttribute("isDefault")==="true";return t.isDefault=i,t}function hb(r,e){return G({},eb,r,e)}function ub(r,e){return G({},nb,r,e)}function db(r,e){const t=r.getAttribute("format"),i=r.getAttribute("template"),n=r.getAttribute("resourceType"),s={};return t&&(s.format=t),i&&(s.template=i),n&&(s.resourceType=n),s}function om(r,e){const t=G([],sm,r,e);if(t.length==2)return it(t)}function fb(r,e){const t=r.getAttribute("crs"),i=G([],sm,r,e);if(i.length==2)return{extent:it(i),crs:t}}function gb(r,e){const t={};return t.format=r.getAttribute("format"),t.href=Gs(r),t}function Ul(r,e){const t=U(r).split(/\s+/);if(!t||t.length!=2)return;const i=+t[0],n=+t[1];if(!(isNaN(i)||isNaN(n)))return[i,n]}function mb(r,e){return G({},sb,r,e)}function pb(r,e){return G([],tb,r,e)}function _b(r,e){return G({},ib,r,e)}window.eoxMapAdvancedOlFormats={EsriJSON:kx,GML:nh,GPX:a7,IGC:X7,IIIFInfo:H7,KML:zf,OWS:Ug,Polyline:T6,TopoJSON:Mf,WFS:j6,WKB:H6,WKT:nC,WMSCapabilities:dC,WMSGetFeatureInfo:HC,WMTSCapabilities:rm};function am(r,e,t){const i=[];let n=r(0),s=r(1),o=e(n),a=e(s);const l=[s,n],c=[a,o],h=[1,0],u={};let d=1e5,f,g,p,m,_,y;for(;--d>0&&h.length>0;)p=h.pop(),n=l.pop(),o=c.pop(),y=p.toString(),y in u||(i.push(o[0],o[1]),u[y]=!0),m=h.pop(),s=l.pop(),a=c.pop(),_=(p+m)/2,f=r(_),g=e(f),Qd(g[0],g[1],o[0],o[1],a[0],a[1])<t?(i.push(a[0],a[1]),y=m.toString(),u[y]=!0):(h.push(m,_,_,p),c.push(a,g,g,o),l.push(s,f,f,n));return i}function yb(r,e,t,i,n){const s=V("EPSG:4326");return am(function(o){return[r,e+(t-e)*o]},xi(s,i),n)}function xb(r,e,t,i,n){const s=V("EPSG:4326");return am(function(o){return[e+(t-e)*o,r]},xi(s,i),n)}function Cb(r){if(!(r.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=r.inversePixelTransform[0],t=r.inversePixelTransform[1],i=Math.sqrt(e*e+t*t),n=r.frameState,s=en(r.inversePixelTransform.slice(),n.coordinateToPixelTransform),o=a2(n.viewState.resolution,i);let a;return new pf(r.context,i,n.extent,s,n.viewState.rotation,o,a)}const bb=new At({color:"rgba(0,0,0,0.2)"}),vb=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class Eb extends Mi{constructor(e){e=e||{};const t=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete t.maxLines,delete t.strokeStyle,delete t.targetSize,delete t.showLabels,delete t.lonLabelFormatter,delete t.latLabelFormatter,delete t.lonLabelPosition,delete t.latLabelPosition,delete t.lonLabelStyle,delete t.latLabelStyle,delete t.intervals,super(t),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:bb,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?Xh.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?Xh.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new et({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new ur({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new jt({color:"rgba(0,0,0,1)"}),stroke:new At({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=i=>{const n=i.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(n),this.lonLabelStyleBase_},this.latLabelStyleBase_=new et({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new ur({font:"12px Calibri,sans-serif",textAlign:"right",fill:new jt({color:"rgba(0,0,0,1)"}),stroke:new At({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=i=>{const n=i.get("graticule_label");return this.latLabelStyleBase_.getText().setText(n),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(ct.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:vb,this.setSource(new Er({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new vt,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new et({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,t){let i=e.slice();return this.projection_&&this.getSource().getWrapX()&&n1(i,this.projection_),this.loadedExtent_&&(rp(this.loadedExtent_,i,t)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(e,t,i){this.loadedExtent_=e;const n=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=ot(s,e);if(this.renderedExtent_&&qt(this.renderedExtent_,o)&&this.renderedResolution_===t||(this.renderedExtent_=o,this.renderedResolution_=t,rn(o)))return;const a=yt(o),l=t*t/4;(!this.projection_||!He(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(o,a,t,l);let h=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(h+=this.meridians_.length),this.parallelsLabels_&&(h+=this.parallels_.length);let u;for(;h>this.featurePool_.length;)u=new Ee,this.featurePool_.push(u);const d=n.getFeaturesCollection();d.clear();let f=0,g,p;for(g=0,p=this.meridians_.length;g<p;++g)u=this.featurePool_[f++],u.setGeometry(this.meridians_[g]),u.setStyle(this.lineStyle_),d.push(u);for(g=0,p=this.parallels_.length;g<p;++g)u=this.featurePool_[f++],u.setGeometry(this.parallels_[g]),u.setStyle(this.lineStyle_),d.push(u)}addMeridian_(e,t,i,n,s,o){const a=this.getMeridian_(e,t,i,n,o);if(Ne(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new Oe([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(e,t,i,n,s,o){const a=this.getParallel_(e,t,i,n,o);if(Ne(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new Oe([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(e){const t=e.frameState.viewState.rotation,i=e.frameState.viewState.resolution,n=e.frameState.size,s=e.frameState.extent,o=yt(s);let a=s;if(t){const g=n[0]*i,p=n[1]*i;a=[o[0]-g/2,o[1]-p/2,o[0]+g/2,o[1]+p/2]}let l=0,c=0,h=this.latLabelPosition_<.5;const u=this.projection_.getExtent(),d=ae(u);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Et(u,s)){l=Math.floor((s[0]-u[0])/d),c=Math.ceil((s[2]-u[2])/d);const g=Math.abs(t)>Math.PI/2;h=h!==g}const f=Cb(e);for(let g=l;g<=c;++g){let p=this.meridians_.length+this.parallels_.length,m,_,y,x;if(this.meridiansLabels_)for(_=0,y=this.meridiansLabels_.length;_<y;++_){const C=this.meridians_[_];if(!t&&g===0)x=this.getMeridianPoint_(C,s,_);else{const b=C.clone();b.translate(g*d,0),b.rotate(-t,o),x=this.getMeridianPoint_(b,a,_),x.rotate(t,o)}m=this.featurePool_[p++],m.setGeometry(x),m.set("graticule_label",this.meridiansLabels_[_].text),f.drawFeature(m,this.lonLabelStyle_(m))}if(this.parallelsLabels_&&(g===l&&h||g===c&&!h))for(_=0,y=this.parallels_.length;_<y;++_){const C=this.parallels_[_];if(!t&&g===0)x=this.getParallelPoint_(C,s,_);else{const b=C.clone();b.translate(g*d,0),b.rotate(-t,o),x=this.getParallelPoint_(b,a,_),x.rotate(t,o)}m=this.featurePool_[p++],m.setGeometry(x),m.set("graticule_label",this.parallelsLabels_[_].text),f.drawFeature(m,this.latLabelStyle_(m))}}}createGraticule_(e,t,i,n){const s=this.getInterval_(i);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=ae(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Et(a,e)&&(ae(e)>=l?(e[0]=a[0],e[2]=a[2]):o=!0);const c=[se(t[0],this.minX_,this.maxX_),se(t[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(c);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let u=se(h[0],this.minLon_,this.maxLon_),d=se(h[1],this.minLat_,this.maxLat_);const f=this.maxLines_;let g,p,m,_,y=e;o||(y=[se(e[0],this.minX_,this.maxX_),se(e[1],this.minY_,this.maxY_),se(e[2],this.minX_,this.maxX_),se(e[3],this.minY_,this.maxY_)]);const x=or(y,this.toLonLatTransform_,void 0,8);let C=x[3],b=x[2],v=x[1],w=x[0];if(o||(Kt(y,this.bottomLeft_)&&(w=this.minLon_,v=this.minLat_),Kt(y,this.bottomRight_)&&(b=this.maxLon_,v=this.minLat_),Kt(y,this.topLeft_)&&(w=this.minLon_,C=this.maxLat_),Kt(y,this.topRight_)&&(b=this.maxLon_,C=this.maxLat_),C=se(C,d,this.maxLat_),b=se(b,u,this.maxLon_),v=se(v,this.minLat_,d),w=se(w,this.minLon_,u)),u=Math.floor(u/s)*s,_=se(u,this.minLon_,this.maxLon_),p=this.addMeridian_(_,v,C,n,e,0),g=0,o)for(;(_-=s)>=w&&g++<f;)p=this.addMeridian_(_,v,C,n,e,p);else for(;_!=this.minLon_&&g++<f;)_=Math.max(_-s,this.minLon_),p=this.addMeridian_(_,v,C,n,e,p);if(_=se(u,this.minLon_,this.maxLon_),g=0,o)for(;(_+=s)<=b&&g++<f;)p=this.addMeridian_(_,v,C,n,e,p);else for(;_!=this.maxLon_&&g++<f;)_=Math.min(_+s,this.maxLon_),p=this.addMeridian_(_,v,C,n,e,p);for(this.meridians_.length=p,this.meridiansLabels_&&(this.meridiansLabels_.length=p),d=Math.floor(d/s)*s,m=se(d,this.minLat_,this.maxLat_),p=this.addParallel_(m,w,b,n,e,0),g=0;m!=this.minLat_&&g++<f;)m=Math.max(m-s,this.minLat_),p=this.addParallel_(m,w,b,n,e,p);for(m=se(d,this.minLat_,this.maxLat_),g=0;m!=this.maxLat_&&g++<f;)m=Math.min(m+s,this.maxLat_),p=this.addParallel_(m,w,b,n,e,p);this.parallels_.length=p,this.parallelsLabels_&&(this.parallelsLabels_.length=p)}getInterval_(e){const t=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1];let n=-1;const s=Math.pow(this.targetSize_*e,2),o=[],a=[];for(let l=0,c=this.intervals_.length;l<c;++l){const h=se(this.intervals_[l]/2,0,90),u=se(i,-90+h,90-h);if(o[0]=t-h,o[1]=u-h,a[0]=t+h,a[1]=u+h,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;n=this.intervals_[l]}return n}getMeridian_(e,t,i,n,s){const o=yb(e,t,i,this.projection_,n);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new ze(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(e,t,i){const n=e.getFlatCoordinates();let s=1,o=n.length-1;n[s]>n[o]&&(s=o,o=1);const a=Math.max(t[1],n[s]),l=Math.min(t[3],n[o]),c=se(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,a,l),u=[n[s-1]+(n[o-1]-n[s-1])*(c-n[s])/(n[o]-n[s]),c],d=this.meridiansLabels_[i].geom;return d.setCoordinates(u),d}getMeridians(){return this.meridians_}getParallel_(e,t,i,n,s){const o=xb(e,t,i,this.projection_,n);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new ze(o,"XY"),a}getParallelPoint_(e,t,i){const n=e.getFlatCoordinates();let s=0,o=n.length-2;n[s]>n[o]&&(s=o,o=0);const a=Math.max(t[0],n[s]),l=Math.min(t[2],n[o]),c=se(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,a,l),h=n[s+1]+(n[o+1]-n[s+1])*(c-n[s])/(n[o]-n[s]),u=[c,h],d=this.parallelsLabels_[i].geom;return d.setCoordinates(u),d}getParallels(){return this.parallels_}updateProjectionInfo_(e){const t=V("EPSG:4326"),i=e.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];const n=xi(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,c){c=c||2;const h=n(a,l,c);for(let u=0,d=h.length;u<d;u+=c)h[u]<o&&(h[u]+=360);return h}}this.fromLonLatTransform_=xi(t,e);const s=or([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(yt(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}function wr(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function x2(r,e){return r[0]=e[0],r[1]=e[1],r[4]=e[2],r[5]=e[3],r[12]=e[4],r[13]=e[5],r}function Bl(r,e,t,i,n,s,o){o=o??wr();const a=1/(r-e),l=1/(t-i),c=1/(n-s);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(r+e)*a,o[13]=(i+t)*l,o[14]=(s+n)*c,o[15]=1,o}function Sd(r,e,t,i,n){return n=n??wr(),n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[3]=r[3]*e,n[4]=r[4]*t,n[5]=r[5]*t,n[6]=r[6]*t,n[7]=r[7]*t,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function wb(r,e,t,i,n){n=n??wr();let s,o,a,l,c,h,u,d,f,g,p,m;return r===n?(n[12]=r[0]*e+r[4]*t+r[8]*i+r[12],n[13]=r[1]*e+r[5]*t+r[9]*i+r[13],n[14]=r[2]*e+r[6]*t+r[10]*i+r[14],n[15]=r[3]*e+r[7]*t+r[11]*i+r[15]):(s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],u=r[6],d=r[7],f=r[8],g=r[9],p=r[10],m=r[11],n[0]=s,n[1]=o,n[2]=a,n[3]=l,n[4]=c,n[5]=h,n[6]=u,n[7]=d,n[8]=f,n[9]=g,n[10]=p,n[11]=m,n[12]=s*e+c*t+f*i+r[12],n[13]=o*e+h*t+g*i+r[13],n[14]=a*e+u*t+p*i+r[14],n[15]=l*e+d*t+m*i+r[15]),n}function Tb(r,e,t,i){return i=i??wr(),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r,i[13]=e,i[14]=t,i[15]=1,i}const mr=34962,ra=34963,ph=35044,us=35048,Sb=5121,Rb=5123,Lb=5125,lm=5126,Rd=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Pb(r,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!kp},e);const t=Rd.length;for(let i=0;i<t;++i)try{const n=r.getContext(Rd[i],e);if(n)return n}catch{}return null}const Ib={STATIC_DRAW:ph};class Sn{constructor(e,t){this.array_=null,this.type_=e,me(e===mr||e===ra,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:Ib.STATIC_DRAW}ofSize(e){return this.array_=new(Ia(this.type_))(e),this}fromArray(e){return this.array_=Ia(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(Ia(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const t=Ia(this.type_);if(!(e instanceof t))throw new Error(`Expected ${t}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function Ia(r){switch(r){case mr:return Float32Array;case ra:return Uint32Array;default:return Float32Array}}const Aa={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Ab=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Fb=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class Ld{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertexShader||Ab),t.compileShader(i);const n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||Fb),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,i),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const t=this.getGL(),i=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const n=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,c=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,n,s,i[0],i[1],o,a,l,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i[0],i[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,i,n){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=W(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),i&&i(s,e),s.drawArrays(s.TRIANGLES,0,6),n&&n(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let i,n=1;this.uniforms_.forEach(function(s){if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,i.width,i.height,0,t.UNSIGNED_BYTE,new Uint8Array(i.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.uniform1i(s.location,n++);else if(Array.isArray(i))switch(i.length){case 2:t.uniform2f(s.location,i[0],i[1]);return;case 3:t.uniform3f(s.location,i[0],i[1],i[2]);return;case 4:t.uniform4f(s.location,i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(s.location,i)})}}const Ti={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},$e={UNSIGNED_BYTE:Sb,UNSIGNED_SHORT:Rb,UNSIGNED_INT:Lb,FLOAT:lm},C2={};function Pd(r){return"shared/"+r}let Id=0;function Mb(){const r="unique/"+Id;return Id+=1,r}function kb(r){let e=C2[r];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:Pb(t)},C2[r]=e}return e.users+=1,e.context}function Ob(r){const e=C2[r];if(!e||(e.users-=1,e.users>0))return;const t=e.context,i=t.getExtension("WEBGL_lose_context");i&&i.loseContext();const n=t.canvas;n.width=1,n.height=1,delete C2[r]}class Nb extends zo{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?Pd(e.canvasCacheKey):Mb(),this.gl_=kb(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(Aa.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(Aa.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Fe(),this.offsetScaleMatrix_=Fe(),this.tmpMat4_=wr(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(i=>new Ld({webGlContext:this.gl_,scaleRatio:i.scaleRatio,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniforms:i.uniforms})):[new Ld({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===Pd(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}getInstancedRenderingExtension_(){const e=this.getExtension("ANGLE_instanced_arrays");return me(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){const t=this.gl_,i=W(e);let n=this.bufferCache_[i];if(!n){const s=t.createBuffer();n={buffer:e,webGlBuffer:s},this.bufferCache_[i]=n}t.bindBuffer(e.getType(),n.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=W(e);delete this.bufferCache_[t]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(Aa.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(Aa.RESTORED,this.boundHandleWebGLContextRestored_),Ob(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,i){const n=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,t?n.ZERO:n.ONE_MINUS_SRC_ALPHA),i?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}bindFrameBuffer(e,t){const i=this.getGL();i.bindFramebuffer(i.FRAMEBUFFER,e),t&&i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0)}bindInitialFrameBuffer(){const e=this.getGL(),t=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);const i=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0)}bindTexture(e,t,i){const n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(i),t)}bindAttribute(e,t,i){const n=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(t);n.enableVertexAttribArray(s),n.vertexAttribPointer(s,i,n.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,t,i,n){const s=this.gl_,o=t.getSize();s.bindFramebuffer(s.FRAMEBUFFER,t.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,t.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,t.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,i?s.ZERO:s.ONE_MINUS_SRC_ALPHA),n?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,t){const i=this.gl_;this.getExtension("OES_element_index_uint");const n=i.UNSIGNED_INT,s=4,o=t-e,a=e*s;i.drawElements(i.TRIANGLES,o,n,a)}drawElementsInstanced(e,t,i){const n=this.gl_;this.getExtension("OES_element_index_uint");const s=this.getInstancedRenderingExtension_(),o=n.UNSIGNED_INT,a=4,l=t-e,c=e*a;s.drawElementsInstancedANGLE(n.TRIANGLES,l,o,c,i);for(let h=0;h<this.maxAttributeCount_;h++)s.vertexAttribDivisorANGLE(h,0)}finalizeDraw(e,t,i){for(let n=0,s=this.postProcessPasses_.length;n<s;n++)n===s-1?this.postProcessPasses_[n].apply(e,null,t,i):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,i=e.viewState.rotation,n=e.pixelRatio;this.setUniformFloatValue(Ti.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ti.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Ti.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Ti.PIXEL_RATIO,n),this.setUniformFloatVec2(Ti.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Ti.ROTATION,i)}applyHitDetectionUniform(e){const t=this.getUniformLocation(Ti.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Ti.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let i,n=0;this.uniforms_.forEach(s=>{if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData||i instanceof WebGLTexture){i instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=i):s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),this.bindTexture(s.texture,n,s.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const o=!(i instanceof HTMLImageElement)||i.complete;!(i instanceof WebGLTexture)&&o&&s.prevValue!==i&&(s.prevValue=i,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)),n++}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(s.name,x2(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:t.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(this.getUniformLocation(s.name),i)})}useProgram(e,t){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,t&&(this.applyFrameState(t),this.applyUniforms(t))}compileShader(e,t){const i=this.gl_,n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}getProgram(e,t){const i=this.gl_,n=this.compileShader(e,i.FRAGMENT_SHADER),s=this.compileShader(t,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,n),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(n,i.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${i.getShaderInfoLog(n)}`;throw new Error(a)}if(i.deleteShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){const a=`GL program linking failed: ${i.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const t=W(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=W(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const i=e.size,n=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return Jt(t,0,0,2/(s*i[0]),2/(s*i[1]),-n,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,t,i,n,s,o){const a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,t,i,!1,n,s),o&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,t){const i=Db(e);let n=0;for(let s=0;s<e.length;s++){const o=e[s];o.name&&this.enableAttributeArray_(o.name,o.size,o.type||lm,i,n,t),n+=o.size*cm(o.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){$l(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,i,n){const s=this.gl_;i=i||s.createTexture();const o=n?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,i),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,c=0,h=s.RGBA,u=s.UNSIGNED_BYTE;return t instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,h,u,t):t?s.texImage2D(s.TEXTURE_2D,a,l,h,u,t):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,h,u,null),i}}function Db(r){let e=0;for(let t=0;t<r.length;t++){const i=r[t];e+=i.size*cm(i.type)}return e}function cm(r){switch(r){case $e.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case $e.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case $e.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case $e.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class Gb extends Go{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(H.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===D.LOADED,this.loaded)this.uploadTile();else{if(e instanceof Jo){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(H.CHANGE,this.handleTileChange_)}}uploadTile(){ie()}setReady(){this.ready=!0,this.dispatchEvent(H.CHANGE)}handleTileChange_(){this.tile.getState()===D.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(H.CHANGE,this.handleTileChange_)}}function hm(r,e,t){const i=t?r.LINEAR:r.NEAREST;r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,i)}function zb(r,e,t,i){hm(r,e,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}function Ad(r,e,t,i,n,s){const o=r.getGL();let a,l;t instanceof Float32Array?(a=o.FLOAT,r.getExtension("OES_texture_float"),l=r.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),hm(o,e,s&&l);const c=t.byteLength/i[1];let h=1;c%8===0?h=8:c%4===0?h=4:c%2===0&&(h=2);let u;switch(n){case 1:{u=o.LUMINANCE;break}case 2:{u=o.LUMINANCE_ALPHA;break}case 3:{u=o.RGB;break}case 4:{u=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${n}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,h),o.texImage2D(o.TEXTURE_2D,0,u,i[0],i[1],0,u,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let Hr=null;function Ub(){Hr=Me(1,1,void 0,{willReadFrequently:!0})}class Bb extends Gb{constructor(e){super(e),this.textures=[],this.renderSize_=De(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new Sn(mr,ph);t.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setHelper(e){var i;const t=(i=this.helper)==null?void 0:i.getGL();if(t){this.helper.deleteBuffer(this.coords);for(let n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){const e=this.helper,t=e.getGL(),i=this.tile;this.textures.length=0;let n;i instanceof Jo||i instanceof qc?n=i.getImage():n=i.getData();const s=Rs(n);if(s){const y=t.createTexture();this.textures.push(y),this.bandCount=4,zb(t,y,s,i.interpolate),this.setReady();return}n=Ol(n);const o=i.getSize(),a=[o[0]+2*this.gutter,o[1]+2*this.gutter],l=n instanceof Float32Array,c=a[0]*a[1],h=l?Float32Array:Uint8Array,u=h.BYTES_PER_ELEMENT,d=n.byteLength/a[1];this.bandCount=Math.floor(d/u/a[0]);const f=Math.ceil(this.bandCount/4);if(f===1){const y=t.createTexture();this.textures.push(y),Ad(e,y,n,a,this.bandCount,i.interpolate),this.setReady();return}const g=new Array(f);for(let y=0;y<f;++y){const x=t.createTexture();this.textures.push(x);const C=y<f-1?4:(this.bandCount-1)%4+1;g[y]=new h(c*C)}let p=0,m=0;const _=a[0]*this.bandCount;for(let y=0;y<a[1];++y){for(let x=0;x<_;++x){const C=n[m+x],b=Math.floor(p/this.bandCount),v=x%this.bandCount,w=Math.floor(v/4),L=g[w],T=L.length/c,R=v%4;L[b*T+R]=C,++p}m+=d/u}for(let y=0;y<f;++y){const x=this.textures[y],C=g[y],b=C.length/c;Ad(e,x,C,a,b,i.interpolate)}this.setReady()}getImagePixelData_(e,t,i){const n=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1];Hr||Ub(),Hr.clearRect(0,0,1,1);const a=e.width,l=e.height,c=a-2*n,h=l-2*n,u=n+Math.floor(c*(t/s)),d=n+Math.floor(h*(i/o));let f;try{Hr.drawImage(e,u,d,1,1,0,0,1,1),f=Hr.getImageData(0,0,1,1).data}catch{return Hr=null,null}return f}getArrayPixelData_(e,t,i,n){const s=this.gutter,o=this.renderSize_[0],a=this.renderSize_[1],l=t[0],c=t[1],h=l+2*s,u=c+2*s,d=s+Math.floor(l*(i/o)),f=s+Math.floor(c*(n/a));if(e instanceof DataView){const p=e.byteLength/(h*u),m=p*(f*h+d),_=e.buffer.slice(m,m+p);return new DataView(_)}const g=this.bandCount*(f*h+d);return e.slice(g,g+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof Lo){const i=this.tile.getData(),n=Ol(i);if(n){const s=this.tile.getSize();return this.getArrayPixelData_(n,s,e,t)}return this.getImagePixelData_(Rs(i),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}class sa extends vf{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Fe(),this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(pn.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(ct.PRECOMPOSE)){const n=new lo(ct.PRECOMPOSE,void 0,t,e);i.dispatchEvent(n)}}dispatchPostComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(ct.POSTCOMPOSE)){const n=new lo(ct.POSTCOMPOSE,void 0,t,e);i.dispatchEvent(n)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,i=-1,n;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof sa)){t=!0;continue}const h=l.getClassName();if((t||h!==n)&&(i+=1,t=!1),n=h,c===this)break}const s="map/"+e.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Nb({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),n&&(this.helper.getCanvas().className=n),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){var e;this.clearCache(),this.removeHelper(),(e=this.getLayer())==null||e.removeChangeListener(pn.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){Jt(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const s=new lo(e,this.inversePixelTransform_,i,t);n.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(ct.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(ct.POSTRENDER,e,t)}}const jb={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function Fd(r){return 1/(r+2)}function Xb(){return{tileIds:new Set,representationsByZ:{}}}function Md(r,e){return r.tileIds.has(W(e))}function kd(r,e,t){const i=r.representationsByZ;t in i||(i[t]=new Set),i[t].add(e),r.tileIds.add(W(e.tile))}function il(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=ot(e,zt(t.extent,r.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(r.viewState.projection).getExtent();n&&(e=ot(e,n))}return e}function jl(r,e){return`${W(r)},${r.getKey()},${r.getRevision()},${Yr(e)}`}class Vb extends sa{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Fe(),this.tempMat4=wr(),this.tempTileRange_=new q2(0,0,0,0),this.tempTileCoord_=fr(0,0,0),this.tempSize_=[0,0];const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new f2(i),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const i=this.getLayer().getRenderSource();return!i||rn(il(e,e.extent))?!1:i.getState()==="ready"}createTileRepresentation(e){return ie()}enqueueTiles(e,t,i,n,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=l.getGutterForProjection(o.projection),u=W(l);u in e.wantedTiles||(e.wantedTiles[u]={});const d=e.wantedTiles[u],f=this.tileRepresentationCache,g=a.getMapInternal(),p=Math.max(i-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),m=o.rotation,_=m?r1(o.center,o.resolution,m,e.size):void 0;for(let y=i;y>=p;--y){const x=c.getTileRangeForExtentAndZ(t,y,this.tempTileRange_),C=c.getResolution(y);for(let b=x.minX;b<=x.maxX;++b)for(let v=x.minY;v<=x.maxY;++v){if(m&&!c.tileCoordIntersectsViewport([y,b,v],_))continue;const w=fr(y,b,v,this.tempTileCoord_),L=jl(l,w);let T,R;if(f.containsKey(L)&&(T=f.get(L),R=T.tile),(!T||T.tile.key!==l.getKey())&&(R=l.getTile(y,b,v,e.pixelRatio,o.projection),!R)||Md(n,R))continue;T?T.setTile(R):(T=this.createTileRepresentation({tile:R,grid:c,helper:this.helper,gutter:h}),f.set(L,T)),kd(n,T,y);const M=R.getKey();d[M]=!0,R.getState()===D.IDLE&&(e.tileQueue.isKeyQueued(M)||e.tileQueue.enqueue([R,u,c.getTileCoordCenter(w),C]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,i,n,s,o,a,l,c,h,u){}renderTileMask(e,t,i,n){}drawTile_(e,t,i,n,s,o,a){if(!t.ready)return;const c=t.tile.tileCoord,h=Yr(c),u=h in o?o[h]:1,d=a.getResolution(i),f=De(a.getTileSize(i),this.tempSize_),g=a.getOrigin(i),p=a.getTileCoordExtent(c),m=u<1?-1:Fd(i);u<1&&(e.animate=!0);const _=e.viewState,y=_.center[0],x=_.center[1],C=f[0]+2*n,b=f[1]+2*n,v=C/b,w=(y-g[0])/(f[0]*d),L=(g[1]-x)/(f[1]*d),T=_.resolution/d,R=c[1],M=c[2];ml(this.tileTransform_),so(this.tileTransform_,2/(e.size[0]*T/C),-2/(e.size[1]*T/C)),v3(this.tileTransform_,_.rotation),so(this.tileTransform_,1,1/v),N2(this.tileTransform_,(f[0]*(R-w)-n)/C,(f[1]*(M-L)-n)/b),this.renderTile(t,this.tileTransform_,e,s,d,f,g,p,m,n,u)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const i=e.viewState,n=this.getLayer(),s=n.getRenderSource(),o=s.getTileGridForProjection(i.projection),a=s.getGutterForProjection(i.projection),l=il(e,e.extent),c=o.getZForResolution(i.resolution,s.zDirection),h=Xb(),u=n.getPreload();if(e.nextExtent){const x=o.getZForResolution(i.nextResolution,s.zDirection),C=il(e,e.nextExtent);this.enqueueTiles(e,C,x,h,u)}this.enqueueTiles(e,l,c,h,0),u>0&&setTimeout(()=>{this.enqueueTiles(e,l,c-1,h,u-1)},0);const d={};let f=!1;const g=h.representationsByZ;if(c in g){const x=W(this),C=e.time;for(const b of g[c]){const v=b.tile;if(v.getState()===D.EMPTY)continue;const w=v.tileCoord;if(b.ready){const R=v.getAlpha(x,C);if(R===1){v.endTransition(x);continue}f=!0;const M=Yr(w);d[M]=R}if(this.renderComplete=!1,this.findAltTiles_(o,w,c+1,h))continue;const T=o.getMinZoom();for(let R=c-1;R>=T&&!this.findAltTiles_(o,w,R,h);--R);}}const p=Object.keys(g).map(Number).sort(i1);if(this.beforeTilesMaskRender(e))for(let x=0,C=p.length;x<C;++x){const b=p[x];for(const v of g[b]){const w=v.tile.tileCoord;if(Yr(w)in d)continue;const T=o.getTileCoordExtent(w);this.renderTileMask(v,b,T,Fd(b))}}this.beforeTilesRender(e,f);for(let x=0,C=p.length;x<C;++x){const b=p[x];for(const v of g[b]){const w=v.tile.tileCoord;Yr(w)in d||this.drawTile_(e,v,b,a,l,d,o)}}if(c in g)for(const x of g[c]){const C=x.tile.tileCoord;Yr(C)in d&&this.drawTile_(e,x,c,a,l,d,o)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const _=this.helper.getCanvas();return this.tileRepresentationCache.expireCache(),this.postRender(t,e),_}beforeFinalize(e){}findAltTiles_(e,t,i,n){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let c=s.minX;c<=s.maxX;++c)for(let h=s.minY;h<=s.maxY;++h){const u=jl(l,[i,c,h]);let d=!1;if(a.containsKey(u)){const f=a.get(u);f.ready&&!Md(n,f.tile)&&(kd(n,f,i),d=!0)}d||(o=!1)}return o}clearCache(){super.clearCache();const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const de={...jb,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},za={TEXTURE_COORD:"a_textureCoord"},Wb=[{name:za.TEXTURE_COORD,size:2,type:$e.FLOAT}];class Zb extends Vb{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new Sn(ra,ph),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const t=this.helper.getGL();for(const i of this.paletteTextures_)i.delete(t)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const t=this.helper.getGL();for(const i of this.paletteTextures_)i.getTexture(t)}}afterHelperCreated(){super.afterHelperCreated();const e=this.helper.getGL();for(const t of this.paletteTextures_)t.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new Bb(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,i,n,s,o,a,l,c,h,u){const d=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Wb);let f=0;for(;f<e.textures.length;){const v=`${de.TILE_TEXTURE_ARRAY}[${f}]`;this.helper.bindTexture(e.textures[f],f,v),++f}for(let v=0;v<this.paletteTextures_.length;++v){const w=this.paletteTextures_[v],L=w.getTexture(d);this.helper.bindTexture(L,f,w.name),++f}const g=i.viewState,p=o[0]+2*h,m=o[1]+2*h,y=e.tile.tileCoord,x=y[1],C=y[2];this.helper.setUniformMatrixValue(de.TILE_TRANSFORM,x2(this.tempMat4,t)),this.helper.setUniformFloatValue(de.TRANSITION_ALPHA,u),this.helper.setUniformFloatValue(de.DEPTH,c);let b=n;h>0&&(b=l,ot(b,n,b)),this.helper.setUniformFloatVec4(de.RENDER_EXTENT,b),this.helper.setUniformFloatValue(de.RESOLUTION,g.resolution),this.helper.setUniformFloatValue(de.ZOOM,g.zoom),this.helper.setUniformFloatValue(de.TEXTURE_PIXEL_WIDTH,p),this.helper.setUniformFloatValue(de.TEXTURE_PIXEL_HEIGHT,m),this.helper.setUniformFloatValue(de.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(de.TEXTURE_ORIGIN_X,a[0]+x*o[0]*s-h*s),this.helper.setUniformFloatValue(de.TEXTURE_ORIGIN_Y,a[1]-C*o[1]*s+h*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const i=this.frameState;if(!i)return null;const n=this.getLayer(),s=Ae(i.pixelToCoordinateTransform,e.slice()),o=i.viewState,a=n.getExtent();if(a&&!Kt(zt(a,o.projection),s))return null;const l=n.getSources(it([s]),o.resolution);let c,h,u;for(c=l.length-1;c>=0;--c)if(h=l[c],h.getState()==="ready"){if(u=h.getTileGridForProjection(o.projection),h.getWrapX())break;const f=u.getExtent();if(!f||Kt(f,s))break}if(c<0)return null;const d=this.tileRepresentationCache;for(let f=u.getZForResolution(o.resolution);f>=u.getMinZoom();--f){const g=u.getTileCoordForCoordAndZ(s,f),p=jl(h,g);if(!d.containsKey(p))continue;const m=d.get(p);if(m.tile.getState()===D.EMPTY)return null;if(!m.loaded)continue;const y=u.getOrigin(f),x=De(u.getTileSize(f)),C=u.getResolution(f),b=(s[0]-y[0])/C-g[1]*x[0],v=(y[1]-s[1])/C-g[2]*x[1];return m.getPixelData(b,v)}return null}disposeInternal(){const e=this.helper;if(e){const t=e.getGL();for(const i of this.paletteTextures_)i.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class Yb{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function $b(r,e){return`operator_${r}_${Object.keys(e.functions).length}`}function Rn(r){const e=r.toString();return e.includes(".")?e:e+".0"}function _h(r){if(r.length<2||r.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${r.length}(${r.map(Rn).join(", ")})`}function Ua(r){const e=gi(r),t=e.length>3?e[3]:1;return _h([e[0]/255,e[1]/255,e[2]/255,t])}function Hb(r){const e=De(r);return _h(e)}const nl={};let Kb=0;function Is(r){return r in nl||(nl[r]=Kb++),nl[r]}function $i(r){return Rn(Is(r))}function l0(r){return"u_var_"+r}function yh(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const rl="getBandValue",um="u_paletteTextures",dm="featureId",fm="geometryType",Xl=-9999999;function qb(r,e,t,i){const n=ft(r,e,t);return xh(n,e,i)}function we(r){return(e,t,i)=>{const n=t.args.length,s=new Array(n);for(let o=0;o<n;++o)s[o]=xh(t.args[o],i,e);return r(s,e)}}const Jb={[P.Get]:(r,e)=>{const i=e.args[0].value;i in r.properties||(r.properties[i]={name:i,type:e.type});let s="a_prop_"+i;return wi(e.type,rt)&&(s=`(${s} > 0.0)`),s},[P.Id]:r=>(r.featureId=!0,"a_"+dm),[P.GeometryType]:r=>(r.geometryType=!0,"a_"+fm),[P.LineMetric]:()=>"currentLineMetric",[P.Var]:(r,e)=>{const i=e.args[0].value;i in r.variables||(r.variables[i]={name:i,type:e.type});let s=l0(i);return wi(e.type,rt)&&(s=`(${s} > 0.0)`),s},[P.Has]:(r,e)=>{const i=e.args[0].value;return i in r.properties||(r.properties[i]={name:i,type:e.type}),`(a_prop_${i} != ${Rn(Xl)})`},[P.Resolution]:()=>"u_resolution",[P.Zoom]:()=>"u_zoom",[P.Time]:()=>"u_time",[P.Any]:we(r=>`(${r.join(" || ")})`),[P.All]:we(r=>`(${r.join(" && ")})`),[P.Not]:we(([r])=>`(!${r})`),[P.Equal]:we(([r,e])=>`(${r} == ${e})`),[P.NotEqual]:we(([r,e])=>`(${r} != ${e})`),[P.GreaterThan]:we(([r,e])=>`(${r} > ${e})`),[P.GreaterThanOrEqualTo]:we(([r,e])=>`(${r} >= ${e})`),[P.LessThan]:we(([r,e])=>`(${r} < ${e})`),[P.LessThanOrEqualTo]:we(([r,e])=>`(${r} <= ${e})`),[P.Multiply]:we(r=>`(${r.join(" * ")})`),[P.Divide]:we(([r,e])=>`(${r} / ${e})`),[P.Add]:we(r=>`(${r.join(" + ")})`),[P.Subtract]:we(([r,e])=>`(${r} - ${e})`),[P.Clamp]:we(([r,e,t])=>`clamp(${r}, ${e}, ${t})`),[P.Mod]:we(([r,e])=>`mod(${r}, ${e})`),[P.Pow]:we(([r,e])=>`pow(${r}, ${e})`),[P.Abs]:we(([r])=>`abs(${r})`),[P.Floor]:we(([r])=>`floor(${r})`),[P.Ceil]:we(([r])=>`ceil(${r})`),[P.Round]:we(([r])=>`floor(${r} + 0.5)`),[P.Sin]:we(([r])=>`sin(${r})`),[P.Cos]:we(([r])=>`cos(${r})`),[P.Atan]:we(([r,e])=>e!==void 0?`atan(${r}, ${e})`:`atan(${r})`),[P.Sqrt]:we(([r])=>`sqrt(${r})`),[P.Match]:we(r=>{const e=r[0],t=r[r.length-1];let i=null;for(let n=r.length-3;n>=1;n-=2){const s=r[n],o=r[n+1];i=`(${e} == ${s} ? ${o} : ${i||t})`}return i}),[P.Between]:we(([r,e,t])=>`(${r} >= ${e} && ${r} <= ${t})`),[P.Interpolate]:we(([r,e,...t])=>{let i="";for(let n=0;n<t.length-2;n+=2){const s=t[n],o=i||t[n+1],a=t[n+2],l=t[n+3];let c;r===Rn(1)?c=`(${e} - ${s}) / (${a} - ${s})`:c=`(pow(${r}, (${e} - ${s})) - 1.0) / (pow(${r}, (${a} - ${s})) - 1.0)`,i=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return i}),[P.Case]:we(r=>{const e=r[r.length-1];let t=null;for(let i=r.length-3;i>=0;i-=2){const n=r[i],s=r[i+1];t=`(${n} ? ${s} : ${t||e})`}return t}),[P.In]:we(([r,...e],t)=>{const i=$b("in",t),n=[];for(let s=0;s<e.length;s+=1)n.push(`  if (inputValue == ${e[s]}) { return true; }`);return t.functions[i]=`bool ${i}(float inputValue) {
${n.join(`
`)}
  return false;
}`,`${i}(${r})`}),[P.Array]:we(r=>`vec${r.length}(${r.join(", ")})`),[P.Color]:we(r=>{if(r.length===1)return`vec4(vec3(${r[0]} / 255.0), 1.0)`;if(r.length===2)return`vec4(vec3(${r[0]} / 255.0), ${r[1]})`;const e=r.slice(0,3).map(i=>`${i} / 255.0`);if(r.length===3)return`vec4(${e.join(", ")}, 1.0)`;const t=r[3];return`vec4(${e.join(", ")}, ${t})`}),[P.Band]:we(([r,e,t],i)=>{if(!(rl in i.functions)){let n="";const s=i.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const c=`${de.TILE_TEXTURE_ARRAY}[${a}]`;n+=`  if (band == ${o+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}i.functions[rl]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${de.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${de.TEXTURE_PIXEL_HEIGHT};
${n}
}`}return`${rl}(${r}, ${e??"0.0"}, ${t??"0.0"})`}),[P.Palette]:(r,e)=>{const[t,...i]=e.args,n=i.length,s=new Uint8Array(n*4);for(let c=0;c<i.length;c++){const h=i[c].value,u=gi(h),d=c*4;s[d]=u[0],s[d+1]=u[1],s[d+2]=u[2],s[d+3]=u[3]*255}r.paletteTextures||(r.paletteTextures=[]);const o=`${um}[${r.paletteTextures.length}]`,a=new Yb(o,s);r.paletteTextures.push(a);const l=xh(t,$,r);return`texture2D(${o}, vec2((${l} + 0.5) / ${n}.0, 0.5))`}};function xh(r,e,t){if(r instanceof H1){const i=Jb[r.operator];if(i===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(r.operator)}`);return i(t,r,e)}if((r.type&$)>0)return Rn(r.value);if((r.type&rt)>0)return r.value.toString();if((r.type&ht)>0)return $i(r.value.toString());if((r.type&Ue)>0)return Ua(r.value);if((r.type&Bt)>0)return _h(r.value);if((r.type&li)>0)return Hb(r.value);throw new Error(`Unexpected expression ${r.value} (expected type ${Qr(e)})`)}function Qb(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const Od=.985;function re(r,e,t){const i=kc();return qb(e,t,i,r)}function ev(r){const e=gi(r),t=e[0]*256,i=e[1],n=e[2]*256,s=Math.round(e[3]*255);return[t+i,n+s]}const tv=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    min(floor(packedColor[0] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[0], 256.0) / 255.0, 1.0),
    min(floor(packedColor[1] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[1], 256.0) / 255.0, 1.0)
  );
}`;function Ch(r){return r===Ue||r===li?2:r===Bt?4:1}function Vl(r){const e=Ch(r);return e>1?`vec${e}`:"float"}function gm(r,e){for(const t in e.variables){const i=e.variables[t],n=l0(i.name);let s=Vl(i.type);i.type===Ue&&(s="vec4"),r.addUniform(n,s)}for(const t in e.properties){const i=e.properties[t],n=Vl(i.type),s=`a_prop_${i.name}`;i.type===Ue?r.addAttribute(s,n,`unpackColor(${s})`,"vec4"):r.addAttribute(s,n)}for(const t in e.functions)r.addVertexShaderFunction(e.functions[t]),r.addFragmentShaderFunction(e.functions[t])}function mm(r,e){const t={};for(const i in r.variables){const n=r.variables[i],s=l0(n.name);t[s]=()=>{const o=e[n.name];if(typeof o=="number")return o;if(typeof o=="boolean")return o?1:0;if(n.type===Ue){const a=[...gi(o||"#eee")];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]??(a[3]=1),a}return typeof o=="string"?Is(o):o}}return t}function pm(r){const e={};for(const t in r.properties){const i=r.properties[t],n=s=>{const o=s.get(i.name);return i.type===Ue?ev([...gi(o||"#eee")]):typeof o=="string"?Is(o):typeof o=="boolean"?o?1:0:o};e[`prop_${i.name}`]={size:Ch(i.type),callback:n}}return e}const Ur=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders

${tv}
`,Br=Qb();class _m{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Rn(Br["circle-radius"])} + ${Rn(Br["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=Ua(Br["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Rn(Br["stroke-width"]),this.strokeColorExpression_=Ua(Br["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=$i("round"),this.strokeJoinExpression_=$i("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.strokePatternLengthExpression_=null,this.hasFill_=!1,this.fillColorExpression_=Ua(Br["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e,t){return this.uniforms_.push({name:e,type:t}),this}addAttribute(e,t,i,n){return this.attributes_.push({name:e,type:t,varyingName:e.replace(/^a_/,"v_"),varyingType:n??t,varyingExpression:i??e}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setStrokePatternLengthExpression(e){return this.strokePatternLengthExpression_=e,this}getStrokePatternLengthExpression(){return this.strokePatternLengthExpression_}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){return this.vertexShaderFunctions_.includes(e)?this:(this.vertexShaderFunctions_.push(e),this)}addFragmentShaderFunction(e){return this.fragmentShaderFunctions_.includes(e)?this:(this.fragmentShaderFunctions_.push(e),this)}getSymbolVertexShader(){return this.hasSymbol_?`${Ur}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_localPosition;
attribute vec2 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx + a_localPosition * halfSizePx * vec2(1., -1.);
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = mix(texCoord.s, texCoord.p, a_localPosition.x * 0.5 + 0.5);
  float v = mix(texCoord.t, texCoord.q, a_localPosition.y * 0.5 + 0.5);
  v_texCoord = vec2(u, v);
  v_hitColor = unpackColor(a_hitColor);
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${Ur}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${Ur}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute vec2 a_localPosition;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_angleTangentSum;
attribute float a_distanceLow;
attribute float a_distanceHigh;
attribute vec2 a_joinAngles;
attribute vec2 a_hitColor;

varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float startEndRatio = a_localPosition.x * 0.5 + 0.5;
  currentLineMetric = mix(a_measureStart, a_measureEnd, startEndRatio);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = -1. * a_localPosition.y;
  float tangentDir = -1. * a_localPosition.x;
  float angle = mix(v_angleStart, v_angleEnd, startEndRatio);
  vec2 joinDirection;
  vec2 positionPx = mix(segmentStartPx, segmentEndPx, startEndRatio);
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${Od} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStartPx = segmentStartPx;
  v_segmentEndPx = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = unpackColor(a_hitColor);

  v_distancePx = a_distanceLow / u_resolution - (lineOffsetPx * a_angleTangentSum);
  float distanceHighPx = a_distanceHigh / u_resolution;
  ${this.strokePatternLengthExpression_!==null?`v_distancePx = mod(v_distancePx, ${this.strokePatternLengthExpression_});
  distanceHighPx = mod(distanceHighPx, ${this.strokePatternLengthExpression_});
  `:""}v_distancePx += distanceHighPx;

  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${Ur}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${Od}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${$i("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${$i("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${$i("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${$i("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPointPx = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPointPx);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLengthPx = length(v_segmentEndPx - v_segmentStartPx);
  segmentLengthPx = max(segmentLengthPx, 1.17549429e-38); // avoid divide by zero
  vec2 segmentTangent = (v_segmentEndPx - v_segmentStartPx) / segmentLengthPx;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPointPx = currentPointPx - v_segmentStartPx;
  float lengthToPointPx = max(0., min(dot(segmentTangent, startToPointPx), segmentLengthPx));
  float currentLengthPx = lengthToPointPx + v_distancePx;
  float currentRadiusPx = distanceFromSegment(currentPointPx, v_segmentStartPx, v_segmentEndPx);
  float currentRadiusRatio = dot(segmentNormal, startToPointPx) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPointPx / segmentLengthPx);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPointPx, v_segmentEndPx, v_segmentStartPx, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${Ur}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = unpackColor(a_hitColor);
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${Ur}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}class b2{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,t){for(let i=0;i<e.length;i++)this.addFeature(e[i],t)}addFeature(e,t){let i=e.getGeometry();i&&(t&&(i=i.clone(),i.applyTransform(t)),this.addGeometry_(i,e))}clearFeatureEntryInPointBatch_(e){const t=W(e),i=this.pointBatch.entries[t];if(i)return this.pointBatch.geometriesCount-=i.flatCoordss.length,delete this.pointBatch.entries[t],i}clearFeatureEntryInLineStringBatch_(e){const t=W(e),i=this.lineStringBatch.entries[t];if(i)return this.lineStringBatch.verticesCount-=i.verticesCount,this.lineStringBatch.geometriesCount-=i.flatCoordss.length,delete this.lineStringBatch.entries[t],i}clearFeatureEntryInPolygonBatch_(e){const t=W(e),i=this.polygonBatch.entries[t];if(i)return this.polygonBatch.verticesCount-=i.verticesCount,this.polygonBatch.ringsCount-=i.ringsCount,this.polygonBatch.geometriesCount-=i.flatCoordss.length,delete this.polygonBatch.entries[t],i}addGeometry_(e,t){var n;const i=e.getType();switch(i){case"GeometryCollection":{const s=e.getGeometriesArray();for(const o of s)this.addGeometry_(o,t);break}case"MultiPolygon":{const s=e;this.addCoordinates_(i,s.getFlatCoordinates(),s.getEndss(),t,W(t),s.getStride());break}case"MultiLineString":{const s=e;this.addCoordinates_(i,s.getFlatCoordinates(),s.getEnds(),t,W(t),s.getStride());break}case"MultiPoint":{const s=e;this.addCoordinates_(i,s.getFlatCoordinates(),null,t,W(t),s.getStride());break}case"Polygon":{const s=e;this.addCoordinates_(i,s.getFlatCoordinates(),s.getEnds(),t,W(t),s.getStride());break}case"Point":{const s=e;this.addCoordinates_(i,s.getFlatCoordinates(),null,t,W(t),s.getStride());break}case"LineString":case"LinearRing":{const s=e,o=s.getStride();this.addCoordinates_(i,s.getFlatCoordinates(),null,t,W(t),o,(n=s.getLayout)==null?void 0:n.call(s));break}}}addCoordinates_(e,t,i,n,s,o,a){let l;switch(e){case"MultiPolygon":{const c=i;for(let h=0,u=c.length;h<u;h++){let d=c[h];const f=h>0?c[h-1]:null,g=f?f[f.length-1]:0,p=d[d.length-1];d=g>0?d.map(m=>m-g):d,this.addCoordinates_("Polygon",t.slice(g,p),d,n,s,o,a)}break}case"MultiLineString":{const c=i;for(let h=0,u=c.length;h<u;h++){const d=h>0?c[h-1]:0;this.addCoordinates_("LineString",t.slice(d,c[h]),null,n,s,o,a)}break}case"MultiPoint":for(let c=0,h=t.length;c<h;c+=o)this.addCoordinates_("Point",t.slice(c,c+2),null,n,s,null,null);break;case"Polygon":{const c=i;if(n instanceof _t){const d=bc(t,c);if(d.length>1){this.addCoordinates_("MultiPolygon",t,d,n,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:n,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=t.length/o;const h=i.length,u=i.map((d,f,g)=>f>0?(d-g[f-1])/o:d/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=h,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(iv(t,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(u),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=h;for(let d=0,f=c.length;d<f;d++){const g=d>0?c[d-1]:0;this.addCoordinates_("LinearRing",t.slice(g,c[d]),null,n,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:n,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(t);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:n,flatCoordss:[],verticesCount:0})),l=t.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(nv(t,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,t){const i=this.uidToRef_.get(e),n=i||this.freeGlobalRef_.pop()||++this.globalCounter_;return t.ref=n,i||(this.refToFeature_.set(n,t.feature),this.uidToRef_.set(e,n)),t}removeRef_(e,t){if(!e)throw new Error("This feature has no ref: "+t);this.refToFeature_.delete(e),this.uidToRef_.delete(t),this.freeGlobalRef_.push(e)}changeFeature(e,t){if(!this.uidToRef_.get(W(e)))return;this.removeFeature(e);let i=e.getGeometry();i&&(t&&(i=i.clone(),i.applyTransform(t)),this.addGeometry_(i,e))}removeFeature(e){let t=this.clearFeatureEntryInPointBatch_(e);t=this.clearFeatureEntryInPolygonBatch_(e)||t,t=this.clearFeatureEntryInLineStringBatch_(e)||t,t&&this.removeRef_(t.ref,W(t.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}isEmpty(){return this.globalCounter_===0}filter(e){const t=new b2;t.globalCounter_=this.globalCounter_,t.uidToRef_=this.uidToRef_,t.refToFeature_=this.refToFeature_;let i=!0;for(const n of this.refToFeature_.values())e(n)&&(t.addFeature(n),i=!1);return i?new b2:t}}function iv(r,e){return e===2?r:r.filter((t,i)=>i%e<2)}function nv(r,e,t){return e===3&&t==="XYM"?r:e===4?r.filter((i,n)=>n%e!==2):e===3?r.map((i,n)=>n%e!==2?i:0):new Array(r.length*1.5).fill(0).map((i,n)=>n%3===2?0:r[Math.round(n/1.5)])}function ym(){const r='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let f=e(t,0,i,x,!0);const l=[];if(!f||f.next===f.prev)return l;let c,y,h;if(o&&(f=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const f=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);f===f.next&&(f.steiner=!0),o.push(a(f))}o.sort(u);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,f,x)),t.length>80*x){c=t[0],y=t[1];let e=c,n=y;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<y&&(y=o),x>e&&(e=x),o>n&&(n=o)}h=Math.max(e-c,n-y),h=0!==h?32767/h:0}return r(f,l,x,c,y,h,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=d(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=d(x/r|0,t[x],t[x+1],o);return o&&b(o,o.next)&&(w(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,s,l,a,y){if(!t)return;!y&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,f=0;for(let t=0;t<n&&(f++,i=i.nextZ,i);t++);let u=n;for(;f>0||u>0&&i;)0!==f&&(0===u||!i||x.z<=i.z)?(r=x,x=x.nextZ,f--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let h=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),w(t),t=p.next,h=p.next;else if((t=p)===h){y?1===y?r(t=i(n(t),e),e,u,s,l,a,2):2===y&&f(t,e,u,s,l,a):r(n(t),e,u,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,f=e.y,u=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(f,u,s),a=Math.max(x,o,i),y=Math.max(f,u,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=y&&h(x,f,o,u,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const f=x.x,u=o.x,s=i.x,l=x.y,a=o.y,y=i.y,p=Math.min(f,u,s),b=Math.min(l,a,y),M=Math.max(f,u,s),m=Math.max(l,a,y),A=c(p,b,e,n,r),g=c(M,m,e,n,r);let Z=t.prevZ,d=t.nextZ;for(;Z&&Z.z>=A&&d&&d.z<=g;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;Z&&Z.z>=A;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;d&&d.z<=g;){if(d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!b(n,x)&&M(n,r,r.next,x)&&g(n,x)&&g(x,n)&&(e.push(n.i,r.i,x.i),w(r),w(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function f(t,e,x,o,i,f){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&p(u,t)){let s=Z(u,t);return u=n(u,u.next),s=n(s,s.next),r(u,e,x,o,i,f,0),void r(s,e,x,o,i,f,0)}t=t.next}u=u.next}while(u!==t)}function u(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(b(t,n))return n;do{if(b(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const f=o,u=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&y(x<s?r:i,x,u,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);g(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==f);return o}(t,e);if(!r)return e;const x=Z(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,x,o,i,f){return(x-i)*(e-f)>=(t-i)*(o-f)&&(t-i)*(r-f)>=(n-i)*(e-f)&&(n-i)*(o-f)>=(x-i)*(r-f)}function h(t,e,n,r,x,o,i,f){return!(t===i&&e===f)&&y(t,e,n,r,x,o,i,f)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){const x=A(v(t,e,n)),o=A(v(t,e,r)),i=A(v(n,r,t)),f=A(v(n,r,e));return x!==o&&i!==f||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==i||!m(n,t,r))||!(0!==f||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function g(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function Z(t,e){const n=F(t.i,t.x,t.y),r=F(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(t,e,n,r){const x=F(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function I(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],f=e[3],u=e[4],s=e[5];return t[0]=f/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-f*u)/n,t[5]=-(x*s-o*u)/n,t}new Array(6);const z=[],B={vertexAttributesPosition:0,instanceAttributesPosition:0,indicesPosition:0};function P(t,e,n,r,x){const o=t[e++],i=t[e++],f=z;f.length=r;for(let n=0;n<f.length;n++)f[n]=t[e+n];let u=x?x.instanceAttributesPosition:0;return n[u++]=o,n[u++]=i,f.length&&(n.set(f,u),u+=f.length),B.instanceAttributesPosition=u,B}function N(t,e,n,r,x,o,i,f,u,s){const l=[t[e],t[e+1]],c=[t[n],t[n+1]],a=t[e+2],y=t[n+2],h=E(f,[...l]),p=E(f,[...c]);function v(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),f=[(n[0]-t[0])/i,(n[1]-t[1])/i];let u=0===r||0===i?0:Math.acos((s=f[0]*x[0]+f[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;u=Math.max(u,1e-5);return f[0]*o[0]+f[1]*o[1]>0?u:2*Math.PI-u}let b=-1,M=-1,m=s;const A=null!==x;if(null!==r){b=v(h,p,E(f,[...[t[r],t[r+1]]])),Math.cos(b)<=.985&&(m+=Math.tan((b-Math.PI)/2))}if(A){M=v(p,h,E(f,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((Math.PI-M)/2))}const g=Math.pow(2,24),Z=u%g,d=Math.floor(u/g)*g;return o.push(l[0],l[1],a,c[0],c[1],y,b,M,Z,d,s),o.push(...i),{length:u+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:m}}function R(e,n,r,x,o){const i=2+o;let f=n;const u=e.slice(f,f+o);f+=o;const s=e[f++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[f++],t<s-1&&(c[t]=l);const a=e.slice(f,f+2*l),y=t(a,c,2);for(let t=0;t<y.length;t++)x.push(y[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...u);return f+2*l}const S="GENERATE_POLYGON_BUFFERS",T="GENERATE_POINT_BUFFERS",_="GENERATE_LINE_STRING_BUFFERS",O=self;O.onmessage=t=>{const e=t.data;switch(e.type){case T:{const t=2,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x*(t+r),f=Uint32Array.from([0,1,3,1,2,3]),u=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),s=new Float32Array(i);let l;for(let t=0;t<o.length;t+=x)l=P(o,t,s,r,l);const c=Object.assign({indicesBuffer:f.buffer,vertexAttributesBuffer:u.buffer,instanceAttributesBuffer:s.buffer,renderInstructions:o.buffer},e);O.postMessage(c,[u.buffer,s.buffer,f.buffer,o.buffer]);break}case _:{const t=[],n=e.customAttributesSize,r=3,x=new Float32Array(e.renderInstructions);let o=0;const i=[1,0,0,1,0,0];let f,u;for(I(i,e.renderInstructionsTransform);o<x.length;){u=Array.from(x.slice(o,o+n)),o+=n,f=x[o++];const e=o,s=o+(f-1)*r,l=x[e]===x[s]&&x[e+1]===x[s+1];let c=0,a=0;for(let n=0;n<f-1;n++){let y=null;n>0?y=o+(n-1)*r:l&&(y=s-r);let h=null;n<f-2?h=o+(n+2)*r:l&&(h=e+r);const p=N(x,o+n*r,o+(n+1)*r,y,h,t,u,i,c,a);c=p.length,a=p.angle}o+=f*r}const s=Uint32Array.from([0,1,3,1,2,3]),l=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),c=Float32Array.from(t),a=Object.assign({indicesBuffer:s.buffer,vertexAttributesBuffer:l.buffer,instanceAttributesBuffer:c.buffer,renderInstructions:x.buffer},e);O.postMessage(a,[l.buffer,c.buffer,s.buffer,x.buffer]);break}case S:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=R(x,o,t,n,r);const i=Uint32Array.from(n),f=Float32Array.from(t),u=Float32Array.from([]),s=Object.assign({indicesBuffer:i.buffer,vertexAttributesBuffer:f.buffer,instanceAttributesBuffer:u.buffer,renderInstructions:x.buffer},e);O.postMessage(s,[f.buffer,u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(r,"binary").toString("base64"):URL.createObjectURL(new Blob([r],{type:"application/javascript"})))}const mo={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function xm(r,e){e=e||[];const t=256,i=t-1,n=Math.floor(r/t/t/t)/i,s=Math.floor(r/t/t)%t/i,o=Math.floor(r/t)%t/i,a=r%t/i;return e[0]=n*256*255+s*255,e[1]=o*256*255+a*255,e}function Cm(r){let e=0;const t=256,i=t-1;return e+=Math.round(r[0]*t*t*t*i),e+=Math.round(r[1]*t*t*i),e+=Math.round(r[2]*t*i),e+=Math.round(r[3]*i),e}function bh(r,e,t,i){let n=0;for(const s in e){const o=e[s],a=o.callback.call(t,t.feature);let l=(a==null?void 0:a[0])??a;l===Xl&&console.warn('The "has" operator might return false positives.'),l===void 0?l=Xl:l===null&&(l=0),r[i+n++]=l,!(!o.size||o.size===1)&&(r[i+n++]=a[1],!(o.size<3)&&(r[i+n++]=a[2],!(o.size<4)&&(r[i+n++]=a[3])))}return n}function c0(r){return Object.keys(r).reduce((e,t)=>e+(r[t].size||1),0)}function rv(r,e,t,i){const n=(2+c0(t))*r.geometriesCount;(!e||e.length!==n)&&(e=new Float32Array(n));const s=[];let o=0;for(const a in r.entries){const l=r.entries[a];for(let c=0,h=l.flatCoordss.length;c<h;c++)s[0]=l.flatCoordss[c][0],s[1]=l.flatCoordss[c][1],Ae(i,s),e[o++]=s[0],e[o++]=s[1],o+=bh(e,t,l,o)}return e}function sv(r,e,t,i){const n=3*r.verticesCount+(1+c0(t))*r.geometriesCount;(!e||e.length!==n)&&(e=new Float32Array(n));const s=[];let o=0;for(const a in r.entries){const l=r.entries[a];for(let c=0,h=l.flatCoordss.length;c<h;c++){s.length=l.flatCoordss[c].length,Fi(l.flatCoordss[c],0,s.length,3,i,s,3),o+=bh(e,t,l,o),e[o++]=s.length/3;for(let u=0,d=s.length;u<d;u+=3)e[o++]=s[u],e[o++]=s[u+1],e[o++]=s[u+2]}}return e}function ov(r,e,t,i){const n=2*r.verticesCount+(1+c0(t))*r.geometriesCount+r.ringsCount;(!e||e.length!==n)&&(e=new Float32Array(n));const s=[];let o=0;for(const a in r.entries){const l=r.entries[a];for(let c=0,h=l.flatCoordss.length;c<h;c++){s.length=l.flatCoordss[c].length,Fi(l.flatCoordss[c],0,s.length,2,i,s),o+=bh(e,t,l,o),e[o++]=l.ringsVerticesCounts[c].length;for(let u=0,d=l.ringsVerticesCounts[c].length;u<d;u++)e[o++]=l.ringsVerticesCounts[c][u];for(let u=0,d=s.length;u<d;u+=2)e[o++]=s[u],e[o++]=s[u+1]}}return e}function v2(r){return(JSON.stringify(r).split("").reduce((t,i)=>(t<<5)-t+i.charCodeAt(0),0)>>>0).toString()}function vh(r,e,t,i){if(`${i}radius`in r&&i!=="icon-"){let n=re(t,r[`${i}radius`],$);if(`${i}radius2`in r){const s=re(t,r[`${i}radius2`],$);n=`max(${n}, ${s})`}`${i}stroke-width`in r&&(n=`(${n} + ${re(t,r[`${i}stroke-width`],$)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${n} * 2. + 0.5)`)}if(`${i}scale`in r){const n=re(t,r[`${i}scale`],li);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${n}`)}`${i}displacement`in r&&e.setSymbolOffsetExpression(re(t,r[`${i}displacement`],Bt)),`${i}rotation`in r&&e.setSymbolRotationExpression(re(t,r[`${i}rotation`],$)),`${i}rotate-with-view`in r&&e.setSymbolRotateWithView(!!r[`${i}rotate-with-view`])}function bm(r,e,t,i,n){let s="vec4(0.)";if(e!==null&&(s=e),t!==null&&i!==null){const l=`smoothstep(-${i} + 0.63, -${i} - 0.58, ${r})`;s=`mix(${t}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${r}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return n!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${n})`),a}function Eh(r,e,t,i,n){const s=new Image;s.crossOrigin=r[`${i}cross-origin`]===void 0?"anonymous":r[`${i}cross-origin`],me(typeof r[`${i}src`]=="string",`WebGL layers do not support expressions for the ${i}src style property`),s.src=r[`${i}src`],t[`u_texture${n}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`u_texture${n}_size`,"vec2");const o=`u_texture${n}_size`;return t[`u_texture${n}`]=s,e.addUniform(`u_texture${n}`,"sampler2D"),o}function wh(r,e,t,i,n){let s=re(t,r[`${e}offset`],li);if(`${e}offset-origin`in r)switch(r[`${e}offset-origin`]){case"top-right":s=`vec2(${i}.x, 0.) + ${n} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${i}.y) + ${n} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${i} - ${n} - ${s}`;break}return s}function av(r,e,t,i){i.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,vh(r,e,i,"circle-");let n=null;"circle-opacity"in r&&(n=re(i,r["circle-opacity"],$));let s="coordsPx";"circle-scale"in r&&(s=`coordsPx / ${re(i,r["circle-scale"],li)}`);let o=null;"circle-fill-color"in r&&(o=re(i,r["circle-fill-color"],Ue));let a=null;"circle-stroke-color"in r&&(a=re(i,r["circle-stroke-color"],Ue));let l=re(i,r["circle-radius"],$),c=null;"circle-stroke-width"in r&&(c=re(i,r["circle-stroke-width"],$),l=`(${l} + ${c} * 0.5)`);const h=`circleDistanceField(${s}, ${l})`,u=bm(h,o,a,c,n);e.setSymbolColorExpression(u)}function lv(r,e,t,i){i.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,i.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,i.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,vh(r,e,i,"shape-");let n=null;"shape-opacity"in r&&(n=re(i,r["shape-opacity"],$));let s="coordsPx";"shape-scale"in r&&(s=`coordsPx / ${re(i,r["shape-scale"],li)}`);let o=null;"shape-fill-color"in r&&(o=re(i,r["shape-fill-color"],Ue));let a=null;"shape-stroke-color"in r&&(a=re(i,r["shape-stroke-color"],Ue));let l=null;"shape-stroke-width"in r&&(l=re(i,r["shape-stroke-width"],$));const c=re(i,r["shape-points"],$);let h="0.";"shape-angle"in r&&(h=re(i,r["shape-angle"],$));let u,d=re(i,r["shape-radius"],$);if(l!==null&&(d=`${d} + ${l} * 0.5`),"shape-radius2"in r){let g=re(i,r["shape-radius2"],$);l!==null&&(g=`${g} + ${l} * 0.5`),u=`starDistanceField(${s}, ${c}, ${d}, ${g}, ${h})`}else u=`regularDistanceField(${s}, ${c}, ${d}, ${h})`;const f=bm(u,o,a,l,n);e.setSymbolColorExpression(f)}function cv(r,e,t,i){let n="vec4(1.0)";"icon-color"in r&&(n=re(i,r["icon-color"],Ue)),"icon-opacity"in r&&(n=`${n} * vec4(1.0, 1.0, 1.0, ${re(i,r["icon-opacity"],$)})`);const s=v2(r["icon-src"]),o=Eh(r,e,t,"icon-",s);if(e.setSymbolColorExpression(`${n} * texture2D(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(o),"icon-width"in r&&"icon-height"in r&&e.setSymbolSizeExpression(`vec2(${re(i,r["icon-width"],$)}, ${re(i,r["icon-height"],$)})`),"icon-offset"in r&&"icon-size"in r){const a=re(i,r["icon-size"],Bt),l=e.getSymbolSizeExpression();e.setSymbolSizeExpression(a);const c=wh(r,"icon-",i,"v_quadSizePx",a);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(vh(r,e,i,"icon-"),"icon-anchor"in r){const a=re(i,r["icon-anchor"],Bt);let l="1.0";"icon-scale"in r&&(l=re(i,r["icon-scale"],li));let c;r["icon-anchor-x-units"]==="pixels"&&r["icon-anchor-y-units"]==="pixels"?c=`${a} * ${l}`:r["icon-anchor-x-units"]==="pixels"?c=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:r["icon-anchor-y-units"]==="pixels"?c=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:c=`${a} * v_quadSizePx`;let h=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in r)switch(r["icon-anchor-origin"]){case"top-right":h=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":h=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":h=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${h}`)}}function hv(r,e,t,i){if("stroke-color"in r&&e.setStrokeColorExpression(re(i,r["stroke-color"],Ue)),"stroke-pattern-src"in r){const n=v2(r["stroke-pattern-src"]),s=Eh(r,e,t,"stroke-pattern-",n);let o=s,a="vec2(0.)";"stroke-pattern-offset"in r&&"stroke-pattern-size"in r&&(o=re(i,r["stroke-pattern-size"],Bt),a=wh(r,"stroke-pattern-",i,s,o));let l="0.";"stroke-pattern-spacing"in r&&(l=re(i,r["stroke-pattern-spacing"],$));let c="0.";"stroke-pattern-start-offset"in r&&(c=re(i,r["stroke-pattern-start-offset"],$)),i.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float startOffsetPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = (currentLengthPx - startOffsetPx) * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  float isInsideOfPattern = step(uCoordPx, sampleSize.x);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  vCoordPx = clamp(vCoordPx, 0.5, sampleSize.y - 0.5);
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord) * vec4(1.0, 1.0, 1.0, isInsideOfPattern);
}`;const h=`u_texture${n}`;let u="1.";"stroke-color"in r&&(u=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${u} * sampleStrokePattern(${h}, ${s}, ${a}, ${o}, ${l}, ${c}, currentLengthPx, currentRadiusRatio, v_width)`),i.functions.computeStrokePatternLength=`float computeStrokePatternLength(vec2 sampleSize, float spacingPx, float lineWidth) {
  float patternLengthPx = sampleSize.x / sampleSize.y * lineWidth;
  return patternLengthPx + spacingPx;
}`,e.setStrokePatternLengthExpression(`computeStrokePatternLength(${o}, ${l}, v_width)`)}if("stroke-width"in r&&e.setStrokeWidthExpression(re(i,r["stroke-width"],$)),"stroke-offset"in r&&e.setStrokeOffsetExpression(re(i,r["stroke-offset"],$)),"stroke-line-cap"in r&&e.setStrokeCapExpression(re(i,r["stroke-line-cap"],ht)),"stroke-line-join"in r&&e.setStrokeJoinExpression(re(i,r["stroke-line-join"],ht)),"stroke-miter-limit"in r&&e.setStrokeMiterLimitExpression(re(i,r["stroke-miter-limit"],$)),"stroke-line-dash"in r){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${$i("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${$i("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let n=r["stroke-line-dash"].map(g=>re(i,g,$));n.length%2===1&&(n=[...n,...n]);let s="0.";"stroke-line-dash-offset"in r&&(s=re(i,r["stroke-line-dash-offset"],$));const a=`dashDistanceField_${v2(r["stroke-line-dash"])}`,l=n.map((g,p)=>`float dashLength${p}`).join(", "),c=n.map((g,p)=>`dashLength${p}`).join(" + ");let h="0.",u=`getSingleDashDistance(distance, radius, ${h}, dashLength0, totalDashLength, capType, lineWidth)`;for(let g=2;g<n.length;g+=2)h=`${h} + dashLength${g-2} + dashLength${g-1}`,u=`min(${u}, getSingleDashDistance(distance, radius, ${h}, dashLength${g}, totalDashLength, capType, lineWidth))`;i.functions[a]=`float ${a}(float distance, float radius, float capType, float lineWidth, ${l}) {
  float totalDashLength = ${c};
  return ${u};
}`;const d=n.map((g,p)=>`${g}`).join(", ");e.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${s}, currentRadiusPx, capType, v_width, ${d})`);let f=n.join(" + ");e.getStrokePatternLengthExpression()&&(i.functions.combinePatternLengths=`float combinePatternLengths(float patternLength1, float patternLength2) {
  return patternLength1 * patternLength2;
}`,f=`combinePatternLengths(${e.getStrokePatternLengthExpression()}, ${f})`),e.setStrokePatternLengthExpression(f)}}function uv(r,e,t,i){if("fill-color"in r&&e.setFillColorExpression(re(i,r["fill-color"],Ue)),"fill-pattern-src"in r){const n=v2(r["fill-pattern-src"]),s=Eh(r,e,t,"fill-pattern-",n);let o=s,a="vec2(0.)";"fill-pattern-offset"in r&&"fill-pattern-size"in r&&(o=re(i,r["fill-pattern-size"],Bt),a=wh(r,"fill-pattern-",i,s,o)),i.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${n}`;let c="1.";"fill-color"in r&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${s}, ${a}, ${o}, pxOrigin, pxPos)`)}}function Wl(r,e,t){const i=yh(),n=new _m,s={};if("icon-src"in r?cv(r,n,s,i):"shape-points"in r?lv(r,n,s,i):"circle-radius"in r&&av(r,n,s,i),hv(r,n,s,i),uv(r,n,s,i),t){const l=re(i,t,rt);n.setFragmentDiscardExpression(`!${l}`)}const o={};function a(l,c,h,u){if(!i[l])return;const d=Vl(h),f=Ch(h);n.addAttribute(`a_${c}`,d),o[c]={size:f,callback:u}}return a("geometryType",fm,ht,l=>Is(Oc(l.getGeometry()))),a("featureId",dm,ht|$,l=>{const c=l.getId()??null;return typeof c=="string"?Is(c):c}),gm(n,i),{builder:n,attributes:{...o,...pm(i)},uniforms:{...s,...mm(i,e)}}}const dv=[];let sl;function fv(){return sl||(sl=ym()),sl}let gv=0;const oi={POSITION:"a_position",LOCAL_POSITION:"a_localPosition",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",ANGLE_TANGENT_SUM:"a_angleTangentSum",JOIN_ANGLES:"a_joinAngles",DISTANCE_LOW:"a_distanceLow",DISTANCE_HIGH:"a_distanceHigh"};class mv{constructor(e,t,i,n){this.helper_,this.hitDetectionEnabled_=!!n,this.styleShaders=pv(e,t),this.customAttributes_={},this.uniforms_={},this.hitDetectionEnabled_&&(this.customAttributes_.hitColor={callback(){return xm(this.ref,dv)},size:2});for(const s of this.styleShaders){for(const o in s.attributes)o in this.customAttributes_||(this.customAttributes_[o]=s.attributes[o]);for(const o in s.uniforms)o in this.uniforms_||(this.uniforms_[o]=s.uniforms[o])}this.renderPasses_=this.styleShaders.map(s=>{const o={},a=Object.entries(this.customAttributes_).map(([l,c])=>({name:l in s.attributes||l==="hitColor"?`a_${l}`:null,size:c.size||1,type:$e.FLOAT}));return s.builder.getFillVertexShader()&&(o.fillRenderPass={vertexShader:s.builder.getFillVertexShader(),fragmentShader:s.builder.getFillFragmentShader(),attributesDesc:[{name:oi.POSITION,size:2,type:$e.FLOAT},...a],instancedAttributesDesc:[],instancePrimitiveVertexCount:3}),s.builder.getStrokeVertexShader()&&(o.strokeRenderPass={vertexShader:s.builder.getStrokeVertexShader(),fragmentShader:s.builder.getStrokeFragmentShader(),attributesDesc:[{name:oi.LOCAL_POSITION,size:2,type:$e.FLOAT}],instancedAttributesDesc:[{name:oi.SEGMENT_START,size:2,type:$e.FLOAT},{name:oi.MEASURE_START,size:1,type:$e.FLOAT},{name:oi.SEGMENT_END,size:2,type:$e.FLOAT},{name:oi.MEASURE_END,size:1,type:$e.FLOAT},{name:oi.JOIN_ANGLES,size:2,type:$e.FLOAT},{name:oi.DISTANCE_LOW,size:1,type:$e.FLOAT},{name:oi.DISTANCE_HIGH,size:1,type:$e.FLOAT},{name:oi.ANGLE_TANGENT_SUM,size:1,type:$e.FLOAT},...a],instancePrimitiveVertexCount:6}),s.builder.getSymbolVertexShader()&&(o.symbolRenderPass={vertexShader:s.builder.getSymbolVertexShader(),fragmentShader:s.builder.getSymbolFragmentShader(),attributesDesc:[{name:oi.LOCAL_POSITION,size:2,type:$e.FLOAT}],instancedAttributesDesc:[{name:oi.POSITION,size:2,type:$e.FLOAT},...a],instancePrimitiveVertexCount:6}),o}),this.hasFill_=this.renderPasses_.some(s=>s.fillRenderPass),this.hasStroke_=this.renderPasses_.some(s=>s.strokeRenderPass),this.hasSymbol_=this.renderPasses_.some(s=>s.symbolRenderPass),this.setHelper(i)}async generateBuffers(e,t){if(e.isEmpty())return null;const i=this.generateRenderInstructions_(e,t),[n,s,o]=await Promise.all([this.generateBuffersForType_(i.polygonInstructions,"Polygon",t),this.generateBuffersForType_(i.lineStringInstructions,"LineString",t),this.generateBuffersForType_(i.pointInstructions,"Point",t)]),a=hr(Fe(),t);return{polygonBuffers:n,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(e,t){const i=this.hasFill_?ov(e.polygonBatch,new Float32Array(0),this.customAttributes_,t):null,n=this.hasStroke_?sv(e.lineStringBatch,new Float32Array(0),this.customAttributes_,t):null,s=this.hasSymbol_?rv(e.pointBatch,new Float32Array(0),this.customAttributes_,t):null;return{polygonInstructions:i,lineStringInstructions:n,pointInstructions:s}}generateBuffersForType_(e,t,i){if(e===null)return null;const n=gv++;let s;switch(t){case"Polygon":s=mo.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=mo.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=mo.GENERATE_POINT_BUFFERS;break}const o={id:n,type:s,renderInstructions:e.buffer,renderInstructionsTransform:i,customAttributesSize:c0(this.customAttributes_)},a=fv();return a.postMessage(o,[e.buffer]),e=null,new Promise(l=>{const c=h=>{const u=h.data;if(u.id!==n||(a.removeEventListener("message",c),!this.helper_.getGL()))return;const d=new Sn(ra,us).fromArrayBuffer(u.indicesBuffer),f=new Sn(mr,us).fromArrayBuffer(u.vertexAttributesBuffer),g=new Sn(mr,us).fromArrayBuffer(u.instanceAttributesBuffer);this.helper_.flushBufferData(d),this.helper_.flushBufferData(f),this.helper_.flushBufferData(g),l([d,f,g])};a.addEventListener("message",c)})}render(e,t,i){for(const n of this.renderPasses_)n.fillRenderPass&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],e.polygonBuffers[2],n.fillRenderPass,t,i),n.strokeRenderPass&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],e.lineStringBuffers[2],n.strokeRenderPass,t,i),n.symbolRenderPass&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],e.pointBuffers[2],n.symbolRenderPass,t,i)}renderInternal_(e,t,i,n,s,o){const a=e.getSize();if(a===0)return;const l=n.instancedAttributesDesc.length;if(this.helper_.useProgram(n.program,s),this.helper_.bindBuffer(t),this.helper_.bindBuffer(e),this.helper_.enableAttributes(n.attributesDesc),this.helper_.bindBuffer(i),this.helper_.enableAttributesInstanced(n.instancedAttributesDesc),o(),l){const c=n.instancedAttributesDesc.reduce((u,d)=>u+(d.size||1),0),h=i.getSize()/c;this.helper_.drawElementsInstanced(0,a,h)}else this.helper_.drawElements(0,a)}setHelper(e,t=null){this.helper_=e;for(const i of this.renderPasses_)i.fillRenderPass&&(i.fillRenderPass.program=this.helper_.getProgram(i.fillRenderPass.fragmentShader,i.fillRenderPass.vertexShader)),i.strokeRenderPass&&(i.strokeRenderPass.program=this.helper_.getProgram(i.strokeRenderPass.fragmentShader,i.strokeRenderPass.vertexShader)),i.symbolRenderPass&&(i.symbolRenderPass.program=this.helper_.getProgram(i.symbolRenderPass.fragmentShader,i.symbolRenderPass.vertexShader));this.helper_.addUniforms(this.uniforms_),t&&(t.polygonBuffers&&(this.helper_.flushBufferData(t.polygonBuffers[0]),this.helper_.flushBufferData(t.polygonBuffers[1]),this.helper_.flushBufferData(t.polygonBuffers[2])),t.lineStringBuffers&&(this.helper_.flushBufferData(t.lineStringBuffers[0]),this.helper_.flushBufferData(t.lineStringBuffers[1]),this.helper_.flushBufferData(t.lineStringBuffers[2])),t.pointBuffers&&(this.helper_.flushBufferData(t.pointBuffers[0]),this.helper_.flushBufferData(t.pointBuffers[1]),this.helper_.flushBufferData(t.pointBuffers[2])))}}function pv(r,e){const t=Array.isArray(r)?r:[r];if("style"in t[0]){const i=[],n=t,s=[];for(const o of n){const a=Array.isArray(o.style)?o.style:[o.style];let l=o.filter;o.else&&s.length&&(l=["all",...s.map(h=>["!",h])],o.filter&&l.push(o.filter),l.length<3&&(l=l[1])),o.filter&&s.push(o.filter);const c=a.map(h=>Wl(h,e,l));i.push(...c)}return i}return"builder"in t[0]?t:t.map(i=>Wl(i,e,null))}const Ei=new Uint8Array(4);class vm{constructor(e,t){this.helper_=e;const i=e.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.depthbuffer_=i.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){sn(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return Ei[0]=0,Ei[1]=0,Ei[2]=0,Ei[3]=0,Ei;this.readAll();const i=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return Ei[0]=this.data_[i*4],Ei[1]=this.data_[i*4+1],Ei[2]=this.data_[i*4+2],Ei[3]=this.data_[i*4+3],Ei}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}function Em(r,e){const t=r.viewState.projection,n=e.getSource().getWrapX()&&t.canWrapX(),s=t.getExtent(),o=r.extent,a=n?ae(s):null,l=n?Math.ceil((o[2]-s[2])/a)+1:1;return[n?Math.floor((o[0]-s[0])/a):0,l,a]}const jr={...Ti,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class wm extends sa{constructor(e,t){const i={[jr.RENDER_EXTENT]:[0,0,0,0],[jr.PATTERN_ORIGIN]:[0,0],[jr.GLOBAL_ALPHA]:1};super(e,{uniforms:i,postProcesses:t.postProcesses}),this.hitDetectionEnabled_=!t.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=mt(),this.currentTransform_=Fe(),this.tmpCoords_=[0,0],this.tmpTransform_=Fe(),this.tmpMat4_=wr(),this.currentFrameStateTransform_=Fe(),this.styleVariables_={},this.style_=[],this.styleRenderer_=null,this.buffers_=null,this.applyOptions_(t),this.batch_=new b2,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const t=this.getLayer().getSource();let i;this.batch_.addFeatures(t.getFeatures(),i),this.sourceListenKeys_=[ge(t,Je.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,i)),ge(t,Je.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,i),this),ge(t,Je.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),ge(t,Je.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.style_=e.style}createRenderers_(){this.buffers_=null,this.styleRenderer_=new mv(this.style_,this.styleVariables_,this.helper,this.hitDetectionEnabled_)}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderer_?this.styleRenderer_.setHelper(this.helper,this.buffers_):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new vm(this.helper))}handleSourceFeatureAdded_(e,t){const i=t.feature;this.batch_.addFeature(i,e)}handleSourceFeatureChanged_(e,t){const i=t.feature;this.batch_.changeFeature(i,e)}handleSourceFeatureDelete_(e){const t=e.feature;this.batch_.removeFeature(t)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){w1(this.tmpTransform_,this.currentFrameStateTransform_),en(this.tmpTransform_,e),this.helper.setUniformMatrixValue(jr.PROJECTION_MATRIX,x2(this.tmpMat4_,this.tmpTransform_)),hr(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(jr.SCREEN_TO_WORLD_MATRIX,x2(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,hr(this.tmpTransform_,e),Ae(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(jr.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[i,n,s]=Em(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,i,n,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,i,n,s),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),o}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const t=this.getLayer(),i=t.getSource(),n=e.viewState,s=!e.viewHints[Te.ANIMATING]&&!e.viewHints[Te.INTERACTING],o=!qt(this.previousExtent_,e.extent),a=this.sourceRevision_<i.getRevision();if(a&&(this.sourceRevision_=i.getRevision()),s&&(o||a)){const l=n.projection,c=n.resolution,h=t instanceof vr?t.getRenderBuffer():0,u=It(e.extent,h*c);i.loadFeatures(u,c,l),this.ready=!1;const d=this.helper.makeProjectionTransform(e,Fe());this.styleRenderer_.generateBuffers(this.batch_,d).then(f=>{this.buffers_&&this.disposeBuffers(this.buffers_),this.buffers_=f,this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,t,i,n,s){let o=i;t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),N2(this.currentFrameStateTransform_,o*s,0),this.buffers_&&this.styleRenderer_.render(this.buffers_,e,()=>{this.applyUniforms_(this.buffers_.invertVerticesTransform),this.helper.applyHitDetectionUniform(t)});while(++o<n)}forEachFeatureAtCoordinate(e,t,i,n,s){if(me(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderer_||!this.hitDetectionEnabled_)return;const o=Ae(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=Cm(l),h=this.batch_.getFeatureFromRef(c);if(h)return n(h,this.getLayer(),null)}disposeBuffers(e){const t=i=>{for(const n of i)n&&this.helper.deleteBuffer(n)};e.pointBuffers&&t(e.pointBuffers),e.lineStringBuffers&&t(e.lineStringBuffers),e.polygonBuffers&&t(e.polygonBuffers)}disposeInternal(){this.buffers_&&this.disposeBuffers(this.buffers_),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){ke(e)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const Wi={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},_v=["#00f","#0ff","#0f0","#ff0","#f00"];class yv extends vr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.filter_=e.filter??!0,this.styleVariables_=e.variables||{},this.gradient_=null,this.addChangeListener(Wi.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:_v),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const i=e.weight?e.weight:"weight";this.weight_=i,this.setRenderOrder(null)}getBlur(){return this.get(Wi.BLUR)}getGradient(){return this.get(Wi.GRADIENT)}getRadius(){return this.get(Wi.RADIUS)}handleGradientChanged_(){this.gradient_=xv(this.getGradient())}setBlur(e){const t=this.get(Wi.BLUR);if(this.set(Wi.BLUR,e),typeof e=="number"&&typeof t=="number"){this.changed();return}this.clearRenderer()}setGradient(e){this.set(Wi.GRADIENT,e)}setRadius(e){const t=this.get(Wi.RADIUS);if(this.set(Wi.RADIUS,e),typeof e=="number"&&typeof t=="number"){this.changed();return}this.clearRenderer()}setFilter(e){this.filter_=e,this.changed(),this.clearRenderer()}setWeight(e){this.weight_=e,this.changed(),this.clearRenderer()}createRenderer(){const e=new _m,t=yh(),i=re(t,this.filter_,rt);let n=re(t,this.getRadius(),$),s=re(t,this.getBlur(),$);const o={};typeof this.getBlur()=="number"&&(s="a_blur",o.a_blur=()=>this.getBlur(),e.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(n="a_radius",o.a_radius=()=>this.getRadius(),e.addUniform("a_radius","float"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const u=typeof this.weight_=="string"?d=>d.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:d=>{const f=u(d);return f!==void 0?se(f,0,1):1}},l="a_prop_weight",e.addAttribute("a_prop_weight","float")}else{const u=["clamp",this.weight_,0,1];l=re(t,u,$)}e.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${s});
  float radius = ${n};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${n} + ${s}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${n} + ${s}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${i}`),gm(e,t);const c=pm(t),h=mm(t,this.styleVariables_);return new wm(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:e,attributes:{...c,...a},uniforms:{...h,...o}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}renderDeclutter(){}}function xv(r){const i=Me(1,256),n=i.createLinearGradient(0,0,1,256),s=1/(r.length-1);for(let o=0,a=r.length;o<a;++o)n.addColorStop(o*s,r[o]);return i.fillStyle=n,i.fillRect(0,0,1,256),i.canvas}class Th extends U2{constructor(e,t,i,n,s){const o=s!==void 0?Y.IDLE:Y.LOADED;super(e,t,i,o),this.loader_=s!==void 0?s:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Y.ERROR):this.state=Y.LOADED,this.changed()}load(){this.state==Y.IDLE&&(this.state=Y.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class Cv extends dg{constructor(e){super(e),this.vectorRenderer_=new Ef(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Fe(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=Ae(this.coordinateToVectorPixelTransform_,Ae(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){var h;const t=e.pixelRatio,i=e.viewState,n=i.resolution,s=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),tc(a,this.layerImageRatio_));const l=ae(a)/n,c=Ie(a)/n;if(!s[Te.ANIMATING]&&!s[Te.INTERACTING]&&!rn(a)){o.useContainer(null,null);const u=o.context,d=e.layerStatesArray[e.layerIndex],f=Object.assign({},d,{opacity:1}),g=Object.assign({},e,{extent:a,size:[l,c],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[f],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(g.declutter={[p]:new Pc(9)});const m=new Th(a,n,t,u.canvas,function(_){o.prepareFrame(g)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(g,null),o.renderDeclutter(g),o.renderDeferred(g),_())});m.addEventListener(H.CHANGE,()=>{if(m.getState()!==Y.LOADED)return;this.image=m;const _=m.getPixelRatio(),y=g2(m.getResolution())*t/_;this.renderedResolution=y,this.coordinateToVectorPixelTransform_=Jt(this.coordinateToVectorPixelTransform_,l/2,c/2,1/y,-1/y,0,-i.center[0],-i.center[1])}),m.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!((h=this.getLayer().getSource())!=null&&h.loading)&&!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,i,n,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,i,n,s):super.forEachFeatureAtCoordinate(e,t,i,n,s)}}class bv extends vr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Cv(this)}}class vv extends sa{constructor(e,t){const i=t.uniforms||{},n=Fe();i[Ti.PROJECTION_MATRIX]=n,super(e,{uniforms:i,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Sn(mr,us),this.instanceAttributesBuffer_=new Sn(mr,us),this.indicesBuffer_=new Sn(ra,us),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const s=t.attributes?t.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:$e.FLOAT}}):[];this.attributes=[{name:"a_localPosition",size:2,type:$e.FLOAT}],this.instanceAttributes=[{name:"a_position",size:2,type:$e.FLOAT}],this.hitDetectionEnabled_&&(this.instanceAttributes.push({name:"a_hitColor",size:2,type:$e.FLOAT}),this.instanceAttributes.push({name:"a_featureUid",size:1,type:$e.FLOAT})),this.instanceAttributes.push(...s),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=mt(),this.currentTransform_=n,this.renderTransform_=Fe(),this.invertRenderTransform_=Fe(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=ym(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===mo.GENERATE_POINT_BUFFERS){const c=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexAttributesBuffer),this.instanceAttributesBuffer_.fromArrayBuffer(l.instanceAttributesBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.helper.flushBufferData(this.instanceAttributesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indicesBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=c,hr(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[ge(o,Je.ADDFEATURE,this.handleSourceFeatureAdded_,this),ge(o,Je.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),ge(o,Je.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),ge(o,Je.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{const l=a.getGeometry();l&&l.getType()==="Point"&&(this.featureCache_[W(a)]={feature:a,properties:a.getProperties(),flatCoordinates:l.getFlatCoordinates()},this.featureCount_++)})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new vm(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(e){const t=e.feature,i=t.getGeometry();i&&i.getType()==="Point"&&(this.featureCache_[W(t)]={feature:t,properties:t.getProperties(),flatCoordinates:i.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureChanged_(e){const t=e.feature,i=W(t),n=this.featureCache_[i],s=t.getGeometry();n?s&&s.getType()==="Point"?(n.properties=t.getProperties(),n.flatCoordinates=s.getFlatCoordinates()):(delete this.featureCache_[i],this.featureCount_--):s&&s.getType()==="Point"&&(this.featureCache_[i]={feature:t,properties:t.getProperties(),flatCoordinates:s.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureDelete_(e){const t=e.feature,i=W(t);i in this.featureCache_&&(delete this.featureCache_[i],this.featureCount_--)}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[i,n,s]=Em(e,this.getLayer());return this.renderWorlds(e,!1,i,n,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,i,n,s),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),i=t.getSource(),n=e.viewState,s=!e.viewHints[Te.ANIMATING]&&!e.viewHints[Te.INTERACTING],o=!qt(this.previousExtent_,e.extent),a=this.sourceRevision_<i.getRevision();if(a&&(this.sourceRevision_=i.getRevision()),s&&(o||a)){const l=n.projection,c=n.resolution,h=t instanceof vr?t.getRenderBuffer():0,u=It(e.extent,h*c);i.loadFeatures(u,c,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),!0}rebuildBuffers_(e){const t=Fe();this.helper.makeProjectionTransform(e,t);const n=(this.hitDetectionEnabled_?5:2)+this.customAttributes.length,s=n*this.featureCount_,o=this.renderInstructions_&&this.renderInstructions_.length===s?this.renderInstructions_:new Float32Array(s);this.renderInstructions_=null;let a=[];const l=[];let c=-1;e.viewState.projection;for(const u in this.featureCache_){const d=this.featureCache_[u];if(a[0]=d.flatCoordinates[0],a[1]=d.flatCoordinates[1],Ae(t,a),o[++c]=a[0],o[++c]=a[1],this.hitDetectionEnabled_){const f=xm(c+3,l);o[++c]=f[0],o[++c]=f[1],o[++c]=Number(u)}for(let f=0;f<this.customAttributes.length;f++){const g=this.customAttributes[f].callback(d.feature,d.properties);o[++c]=g}}const h={id:++this.lastSentId,type:mo.GENERATE_POINT_BUFFERS,renderInstructions:o.buffer,customAttributesSize:n-2};h.projectionTransform=t,this.ready=!1,this.worker_.postMessage(h,[o.buffer])}forEachFeatureAtCoordinate(e,t,i,n,s){if(me(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=Ae(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=Cm(l),h=this.renderInstructions_[c],u=Math.floor(h).toString(),f=this.getLayer().getSource().getFeatureByUid(u);if(f)return n(f,this.getLayer(),null)}renderWorlds(e,t,i,n,s){let o=i;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));const a=this.instanceAttributes.reduce((c,h)=>c+(h.size||1),0),l=this.instanceAttributesBuffer_.getSize()/a;do{this.helper.bindBuffer(this.indicesBuffer_),this.helper.bindBuffer(this.verticesBuffer_),this.helper.enableAttributes(this.attributes),this.helper.bindBuffer(this.instanceAttributesBuffer_),this.helper.enableAttributesInstanced(this.instanceAttributes),this.helper.makeProjectionTransform(e,this.currentTransform_),N2(this.currentTransform_,o*s,0),en(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const c=this.indicesBuffer_.getSize();this.helper.drawElementsInstanced(0,c,l)}while(++o<n)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(e){ke(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class Ev extends kn{constructor(e){const t=Object.assign({},e);super(t),this.styleVariables_=e.variables||{},this.parseResult_=Wl(e.style,this.styleVariables_,e.filter),this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){const e=Object.keys(this.parseResult_.attributes).map(t=>({name:t,...this.parseResult_.attributes[t]}));return new vv(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}function Nd(r,e){const t=`
    attribute vec2 ${za.TEXTURE_COORD};
    uniform mat4 ${de.TILE_TRANSFORM};
    uniform float ${de.TEXTURE_PIXEL_WIDTH};
    uniform float ${de.TEXTURE_PIXEL_HEIGHT};
    uniform float ${de.TEXTURE_RESOLUTION};
    uniform float ${de.TEXTURE_ORIGIN_X};
    uniform float ${de.TEXTURE_ORIGIN_Y};
    uniform float ${de.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${za.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${de.TEXTURE_ORIGIN_X} + ${de.TEXTURE_RESOLUTION} * ${de.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${de.TEXTURE_ORIGIN_Y} - ${de.TEXTURE_RESOLUTION} * ${de.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${de.TILE_TRANSFORM} * vec4(${za.TEXTURE_COORD}, ${de.DEPTH}, 1.0);
    }
  `,i={...yh(),bandCount:e},n=[];if(r.color!==void 0){const u=re(i,r.color,Ue);n.push(`color = ${u};`)}if(r.contrast!==void 0){const u=re(i,r.contrast,$);n.push(`color.rgb = clamp((${u} + 1.0) * color.rgb - (${u} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(r.exposure!==void 0){const u=re(i,r.exposure,$);n.push(`color.rgb = clamp((${u} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(r.saturation!==void 0){const u=re(i,r.saturation,$);n.push(`
      float saturation = ${u} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(r.gamma!==void 0){const u=re(i,r.gamma,$);n.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${u}));`)}if(r.brightness!==void 0){const u=re(i,r.brightness,$);n.push(`color.rgb = clamp(color.rgb + ${u}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(i.variables).length;if(o>1&&!r.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let u=0;u<o;++u){const d=i.variables[Object.keys(i.variables)[u]];if(!(d.name in r.variables))throw new Error(`Missing '${d.name}' in style variables`);const f=l0(d.name);s[f]=function(){let g=r.variables[d.name];return typeof g=="string"&&(g=Is(g)),g!==void 0?g:-9999999}}const a=Object.keys(s).map(function(u){return`uniform float ${u};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${de.TILE_TEXTURE_ARRAY}[${l}];`),i.paletteTextures&&a.push(`uniform sampler2D ${um}[${i.paletteTextures.length}];`);const c=Object.keys(i.functions).map(function(u){return i.functions[u]}),h=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${de.RENDER_EXTENT};
    uniform float ${de.TRANSITION_ALPHA};
    uniform float ${de.TEXTURE_PIXEL_WIDTH};
    uniform float ${de.TEXTURE_PIXEL_HEIGHT};
    uniform float ${de.RESOLUTION};
    uniform float ${de.ZOOM};

    ${a.join(`
`)}

    ${c.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${de.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${de.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${de.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${de.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${de.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${n.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${de.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:h,uniforms:s,paletteTextures:i.paletteTextures}}class Tm extends yg{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(pn.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const e=this.getSource();if(e)if(e.getState()==="loading"){const t=()=>{e.getState()==="ready"&&(e.removeEventListener("change",t),this.setStyle(this.style_))};e.addEventListener("change",t)}else this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=Nd(this.style_,this.getSourceBandCount_());return new Zb(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,t){const i=this.getRenderer();let n;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],i.prepareFrame(e)&&(n=i.renderFrame(e));return n}render(e,t){this.rendered=!0;const i=e.viewState,n=this.getSources(e.extent,i.resolution);let s=!0;for(let a=0,l=n.length;a<l;++a){const c=n[a],h=c.getState();if(h=="loading"){const u=()=>{c.getState()=="ready"&&(c.removeEventListener("change",u),this.changed())};c.addEventListener("change",u)}s=s&&h=="ready"}const o=this.renderSources(e,n);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=i.resolution,o;if(this.renderedResolution_>.5*i.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!n.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){const t=Nd(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}Tm.prototype.dispose;class wv extends kn{constructor(e){const t=Object.assign({},e);super(t),this.styleVariables_=e.variables||{},this.style_=e.style,this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){return new wm(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}setStyle(e){this.style_=e,this.clearRenderer(),this.changed()}}class Tv extends Pn{constructor(e={}){const{mapboxStyle:t,applyOptions:i,...n}=e;super(n),t&&this.applyMapboxStyle(t,i)}applyMapboxStyle(e,t){return hp(this,e,t)}}qo(sr);window.eoxMapAdvancedOlLayers={Graticule:Eb,Heatmap:yv,Layer:kn,VectorImage:bv,WebGLPoints:Ev,WebGLTile:Tm,WebGLVector:wv,STAC:up,MapboxStyle:Tv};function Sv(r){const e=r[0],t=new Array(e);let i=1<<e-1,n,s;for(n=0;n<e;++n)s=48,r[1]&i&&(s+=1),r[2]&i&&(s+=2),t[n]=String.fromCharCode(s),i>>=1;return t.join("")}const Rv='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class Lv extends pi{constructor(e){const t=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:V("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=t,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const i=(e.url||"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/")+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(i).then(n=>n.json()).then(n=>this.handleImageryMetadataResponse(n))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const t=e.resourceSets[0].resources[0],i=this.maxZoom_==-1?t.zoomMax:this.maxZoom_,n=this.getProjection(),s=hn(n),o=this.hidpi_?2:1,a=t.imageWidth==t.imageHeight?t.imageWidth/o:[t.imageWidth/o,t.imageHeight/o],l=Gn({extent:s,minZoom:t.zoomMin,maxZoom:i,tileSize:a});this.tileGrid=l;const c=this.culture_,h=this.hidpi_,u=this.placeholderTiles_;if(this.tileUrlFunction=Ls(t.imageUrlSubdomains.map(function(d){const f=[0,0,0],g=t.imageUrl.replace("{subdomain}",d).replace("{culture}",c);return function(p,m,_){if(!p)return;fr(p[0],p[1],p[2],f);const y=new URL(g.replace("{quadkey}",Sv(f))),x=y.searchParams;return h&&(x.set("dpi","d1"),x.set("device","mobile")),u===!0?x.delete("n"):u===!1&&x.set("n","z"),y.toString()}})),t.imageryProviders){const d=on(V("EPSG:4326"),this.getProjection());this.setAttributions(f=>{const g=[],p=f.viewState,m=this.getTileGrid(),_=m.getZForResolution(p.resolution,this.zDirection),x=m.getTileCoordForCoordAndZ(p.center,_)[0];return t.imageryProviders.map(function(C){let b=!1;const v=C.coverageAreas;for(let w=0,L=v.length;w<L;++w){const T=v[w];if(x>=T.zoomMin&&x<=T.zoomMax){const R=T.bbox,M=[R[1],R[0],R[3],R[2]],I=or(M,d);if(Ne(I,f.extent)){b=!0;break}}}b&&g.push(C.attribution)}),g.push(Rv),g})}this.setState("ready")}}class Pv extends i0{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:e.maxZoom!==void 0?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(e){Object.assign(this.config_,e),this.initializeMap_()}setConfig(e){this.config_=e||{},this.initializeMap_()}initializeMap_(){const e=JSON.stringify(this.config_);if(this.templateCache_[e]){this.applyTemplate_(this.templateCache_[e]);return}let t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);const i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,e)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",t),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}handleInitResponse_(e,t){const i=t.target;if(!i.status||i.status>=200&&i.status<300){let n;try{n=JSON.parse(i.responseText)}catch{this.setState("error");return}this.applyTemplate_(n),this.templateCache_[e]=n,this.setState("ready")}else this.setState("error")}handleInitError_(e){this.setState("error")}applyTemplate_(e){const t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)}}const Iv=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Av=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Fv{constructor(e){this.gl_=e,this.program_=Zl(e,Av,Iv),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,i,n,s,o,a,l,c,h,u,d,f){const g=this.gl_;l===void 0&&(l=n),c===void 0&&(c=s),o===void 0&&(o=t),a===void 0&&(a=i),h===void 0&&(h=o),u===void 0&&(u=a),d===void 0&&(d=g.canvas.width),f===void 0&&(f=g.canvas.height),g.bindTexture(g.TEXTURE_2D,e),g.useProgram(this.program_),g.bindBuffer(g.ARRAY_BUFFER,this.positionBuffer),g.enableVertexAttribArray(this.positionLocation),g.vertexAttribPointer(this.positionLocation,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,this.texcoordBuffer),g.enableVertexAttribArray(this.texcoordLocation),g.vertexAttribPointer(this.texcoordLocation,2,g.FLOAT,!1,0,0);let p=Bl(0,d,0,f,-1,1);p=wb(p,l,c,0),p=Sd(p,h,u,1),g.uniformMatrix4fv(this.matrixLocation,!1,p);let m=Tb(n/t,s/i,0);m=Sd(m,o/t,a/i,1),g.uniformMatrix4fv(this.textureMatrixLocation,!1,m),g.uniform1i(this.textureLocation,0),g.drawArrays(g.TRIANGLES,0,this.positions.length/2)}}function Dd(r,e,t){const i=r.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){const n=r.getShaderInfoLog(i);throw n===null?new Error("Shader info log creation failed"):new Error(n)}return i}function Zl(r,e,t){const i=r.createProgram(),n=Dd(r,r.VERTEX_SHADER,t),s=Dd(r,r.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(r.attachShader(i,n),r.attachShader(i,s),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw r.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}const Mv=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,kv=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Ov=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Nv=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Dv(r,e,t,i){let n;return t&&t.length?n=t.shift():Gt?n=new OffscreenCanvas(r||300,e||300):n=document.createElement("canvas"),r&&(n.width=r),e&&(n.height=e),n.getContext("webgl",i)}function Gv(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const Gd=[];function zv(r,e,t,i,n,s,o,a,l,c,h,u,d,f){const g=Math.round(i*e),p=Math.round(i*t);r.canvas.width=g,r.canvas.height=p;let m,_;if(_=r.createTexture(),r.bindTexture(r.TEXTURE_2D,_),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),d?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g,p,0,r.RGBA,h,null),m=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,m),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,_,0),m===null)throw new Error("Could not create framebuffer");if(_===null)throw new Error("Could not create texture");if(l.length===0)return{width:g,height:p,framebuffer:m,texture:_};const y=mt();l.forEach(function(R,M,I){ps(y,R.extent)});let x,C,b;const v=1/n;{if(x=r.createTexture(),_===null)throw new Error("Could not create texture");C=Math.round(ae(y)*v),b=Math.round(Ie(y)*v);const R=r.getParameter(r.MAX_TEXTURE_SIZE),M=Math.max(C,b),I=M>R?R/M:1,F=Math.round(C*I),A=Math.round(b*I);r.bindTexture(r.TEXTURE_2D,x),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),d?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,F,A,0,r.RGBA,h,null);const O=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,O),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,x,0);const j=new Fv(r);l.forEach(function(N,B,Z){const K=(N.extent[0]-y[0])*v*I,ee=-(N.extent[3]-y[3])*v*I,z=ae(N.extent)*v*I,ue=Ie(N.extent)*v*I;if(r.bindFramebuffer(r.FRAMEBUFFER,O),r.viewport(0,0,F,A),N.clipExtent){const be=(N.clipExtent[0]-y[0])*v*I,ye=-(N.clipExtent[3]-y[3])*v*I,We=ae(N.clipExtent)*v*I,Ze=Ie(N.clipExtent)*v*I;r.enable(r.SCISSOR_TEST),r.scissor(d?be:Math.round(be),d?ye:Math.round(ye),d?We:Math.round(be+We)-Math.round(be),d?Ze:Math.round(ye+Ze)-Math.round(ye))}j.drawImage(N.texture,N.width,N.height,c,c,N.width-2*c,N.height-2*c,d?K:Math.round(K),d?ee:Math.round(ee),d?z:Math.round(K+z)-Math.round(K),d?ue:Math.round(ee+ue)-Math.round(ee),F,A),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(O)}const w=fi(o),L=fi(y),T=R=>{const M=(R[0][0]-w[0])/s*i,I=-(R[0][1]-w[1])/s*i,F=(R[1][0]-w[0])/s*i,A=-(R[1][1]-w[1])/s*i,O=(R[2][0]-w[0])/s*i,j=-(R[2][1]-w[1])/s*i;return{u1:F,v1:A,u0:M,v0:I,u2:O,v2:j}};r.bindFramebuffer(r.FRAMEBUFFER,m),r.viewport(0,0,g,p);{const R=[],M=[],I=Zl(r,Nv,Ov);r.useProgram(I);const F=r.getUniformLocation(I,"u_texture");r.bindTexture(r.TEXTURE_2D,x),r.uniform1i(F,0),a.getTriangles().forEach(function(K,ee,z){const ue=K.source,be=K.target,{u1:ye,v1:We,u0:Ze,v0:Qt,u2:Zt,v2:Tt}=T(be),Tr=(ue[0][0]-L[0])/n/C,Bs=-(ue[0][1]-L[1])/n/b,zn=(ue[1][0]-L[0])/n/C,zi=-(ue[1][1]-L[1])/n/b,Mt=(ue[2][0]-L[0])/n/C,ei=-(ue[2][1]-L[1])/n/b;R.push(ye,We,Ze,Qt,Zt,Tt),M.push(zn,zi,Tr,Bs,Mt,ei)});const A=Bl(0,g,p,0,-1,1),O=r.getUniformLocation(I,"u_matrix");r.uniformMatrix4fv(O,!1,A);const j=r.getAttribLocation(I,"a_position"),N=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,N),r.bufferData(r.ARRAY_BUFFER,new Float32Array(R),r.STATIC_DRAW),r.vertexAttribPointer(j,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(j);const B=r.getAttribLocation(I,"a_texcoord"),Z=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,Z),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW),r.vertexAttribPointer(B,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(B),r.drawArrays(r.TRIANGLES,0,R.length/2)}if(u){const R=Zl(r,kv,Mv);r.useProgram(R);const M=Bl(0,g,p,0,-1,1),I=r.getUniformLocation(R,"u_matrix");r.uniformMatrix4fv(I,!1,M);const F=Array.isArray(u)?u:[0,0,0,255],A=r.getUniformLocation(R,"u_val");r.uniform4fv(A,F);const O=r.getAttribLocation(R,"a_position"),j=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,j),r.vertexAttribPointer(O,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(O);const N=a.getTriangles().reduce(function(B,Z){const K=Z.target,{u1:ee,v1:z,u0:ue,v0:be,u2:ye,v2:We}=T(K);return B.concat([ee,z,ue,be,ue,be,ye,We,ye,We,ee,z])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(N),r.STATIC_DRAW),r.drawArrays(r.LINES,0,N.length/2)}return{width:g,height:p,framebuffer:m,texture:_}}class Uv extends Lo{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,i=t.getExtent(),n=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?n?ot(i,n):i:n;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?ot(s,o):s;if(_s(l)===0){this.state=D.EMPTY;return}i&&(a?a=ot(a,i):a=i);const c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),h=e.targetProj,u=gg(t,h,l,c);if(!isFinite(u)||u<=0){this.state=D.EMPTY;return}const d=e.errorThreshold!==void 0?e.errorThreshold:Kc;if(this.triangulation_=new Hc(t,h,l,a,u*d,c,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=D.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(u);let f=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(f[1]=se(f[1],a[1],a[3]),f[3]=se(f[3],a[1],a[3])):f=ot(f,a)),!_s(f))this.state=D.EMPTY;else{let g=0,p=0;t.canWrapX()&&(g=ae(i),p=Math.floor((f[0]-i[0])/g)),ec(f.slice(),t,!0).forEach(_=>{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(_,this.sourceZ_),x=e.getTileFunction;for(let C=y.minX;C<=y.maxX;C++)for(let b=y.minY;b<=y.maxY;b++){const v=x(this.sourceZ_,C,b,this.pixelRatio_);if(v){const w=p*g;this.sourceTiles_.push({tile:v,offset:w})}}++p}),this.sourceTiles_.length===0&&(this.state=D.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(C=>{var ee;const b=C.tile;if(!b||b.getState()!==D.LOADED)return;const v=b.getSize(),w=this.gutter_;let L;const T=Ol(b.getData());T?L=T:(t=!0,L=l8(Rs(b.getData())));const R=[v[0]+2*w,v[1]+2*w],M=L instanceof Float32Array,I=R[0]*R[1],F=M?Float32Array:Uint8ClampedArray,A=new F(L.buffer),O=F.BYTES_PER_ELEMENT,j=O*A.length/I,N=A.byteLength/R[1],B=Math.floor(N/O/R[0]),Z=this.sourceTileGrid_.getTileCoordExtent(b.tileCoord);Z[0]+=C.offset,Z[2]+=C.offset;const K=(ee=this.clipExtent_)==null?void 0:ee.slice();K&&(K[0]+=C.offset,K[2]+=C.offset),e.push({extent:Z,clipExtent:K,data:A,dataType:F,bytesPerPixel:j,pixelSize:R,bandCount:B})}),this.sourceTiles_.length=0,e.length===0){this.state=D.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),s=typeof n=="number"?n:n[0],o=typeof n=="number"?n:n[1],a=Math.round(s*this.pixelRatio_),l=Math.round(o*this.pixelRatio_),c=this.targetTileGrid_.getResolution(i),h=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=e[0].bandCount,f=new e[0].dataType(d*a*l),g=Dv(a,l,Gd,{premultipliedAlpha:!1,antialias:!1});let p;const m=g.RGBA;let _;e[0].dataType==Float32Array?(_=g.FLOAT,g.getExtension("WEBGL_color_buffer_float"),g.getExtension("OES_texture_float"),g.getExtension("EXT_float_blend"),p=g.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(_=g.UNSIGNED_BYTE,p=this.interpolate);const y=4,x=Math.ceil(d/y);for(let C=x-1;C>=0;--C){const b=[];for(let F=0,A=e.length;F<A;++F){const O=e[F],j=O.pixelSize,N=j[0],B=j[1],Z=new O.dataType(y*N*B),K=O.data;let ee=C*y;for(let ue=0,be=Z.length;ue<be;ue+=y)Z[ue]=K[ee],Z[ue+1]=K[ee+1],Z[ue+2]=K[ee+2],Z[ue+3]=K[ee+3],ee+=d;const z=g.createTexture();g.bindTexture(g.TEXTURE_2D,z),p?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,m,N,B,0,m,_,Z),b.push({extent:O.extent,clipExtent:O.clipExtent,texture:z,width:N,height:B})}const{framebuffer:v,width:w,height:L}=zv(g,s,o,this.pixelRatio_,h,c,u,this.triangulation_,b,this.gutter_,_,this.renderEdges_,p),T=w,R=L*y,M=new e[0].dataType(T*R);g.bindFramebuffer(g.FRAMEBUFFER,v),g.readPixels(0,0,w,L,g.RGBA,_,M);let I=C*y;for(let F=0,A=M.length;F<A;F+=y){const O=(T-1-(F/R|0))*R+F%R;f[I]=M[O],f[I+1]=M[O+1],f[I+2]=M[O+2],f[I+3]=M[O+3],I+=d}}if(Gv(g),Gd.push(g.canvas),t){const C=Me(s,o),b=new ImageData(f,s);C.putImageData(b,0,0),this.reprojData_=C.canvas}else this.reprojData_=f;this.reprojSize_=[a,l],this.state=D.LOADED,this.changed()}load(){if(this.state!==D.IDLE&&this.state!==D.ERROR)return;this.state=D.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i!==D.IDLE&&i!==D.LOADING)return;e++;const n=ge(t,H.CHANGE,()=>{const s=t.getState();(s==D.LOADED||s==D.ERROR||s==D.EMPTY)&&(ke(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==D.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(ke),this.sourcesListenerKeys_=null}}class h0 extends Qo{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let i=e.tileGrid;i===void 0&&t&&(i=Gn({extent:hn(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:i,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?De(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?De(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return(!t||He(t,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,i,n,s,o){const a=this.tileGrid||this.getTileGridForProjection(s||n),l=Math.max.apply(null,a.getResolutions().map((g,p)=>{const m=De(a.getTileSize(p)),_=this.getTileSize(p);return Math.max(_[0]/m[0],_[1]/m[1])})),c=this.getTileGridForProjection(n),h=[e,t,i],u=this.getTileCoordForTileUrlFunction(h,n),d=Object.assign({sourceProj:s||n,sourceTileGrid:a,targetProj:n,targetTileGrid:c,tileCoord:h,wrappedTileCoord:u,pixelRatio:l,gutter:this.gutter_,getTileFunction:(g,p,m,_)=>this.getTile(g,p,m,_,void 0,o),transformMatrix:this.transformMatrix},this.tileOptions),f=new Uv(d);return f.key=this.getKey(),f}getTile(e,t,i,n,s,o){var v;const a=this.getProjection();if(s&&(a&&!He(a,s)||this.transformMatrix))return this.getReprojTile_(e,t,i,s,a,o);const l=this.getTileSize(e),c=this.loader_,h=new AbortController,u={signal:h.signal,crossOrigin:this.crossOrigin_},d=this.getTileCoordForTileUrlFunction([e,t,i]);if(!d)return null;const f=this.getKey(),g=go(this,f,e,t,i);if(o&&o.containsKey(g))return o.get(g);const p=d[0],m=d[1],_=d[2],y=(v=this.getTileGrid())==null?void 0:v.getFullTileRange(p);y&&(u.maxY=y.getHeight()-1);function x(){return Ql(function(){return c(p,m,_,u)})}const C=Object.assign({tileCoord:[e,t,i],loader:x,size:l,controller:h},this.tileOptions),b=new Lo(C);return b.key=this.getKey(),b.addEventListener(H.CHANGE,this.handleTileChange_),o==null||o.set(g,b),b}handleTileChange_(e){const t=e.target,i=W(t),n=t.getState();let s;n==D.LOADING?(this.tileLoadingKeys_[i]=!0,s=hs.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==D.ERROR?hs.TILELOADERROR:n==D.LOADED?hs.TILELOADEND:void 0),s&&this.dispatchEvent(new Tg(s,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||He(t,e))&&!this.transformMatrix)return this.tileGrid;const i=W(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=t0(e)),this.tileGridForProjection_[i]}setTileGridForProjection(e,t){const i=V(e);if(i){const n=W(i);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=t)}}}function Bv(r){return((r.fileDirectory.NewSubfileType||0)&4)===4}function jv(r,e){if(!r)return!1;if(r===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,i=pp;return t===i.CMYK||t===i.YCbCr||t===i.CIELab||t===i.ICCLab}const zd="STATISTICS_MAXIMUM",Ud="STATISTICS_MINIMUM",ol=256;let al;function Xv(){return al||(al=new mp),al}function Vv(r){try{return r.getBoundingBox(!0)}catch{return[0,0,r.getWidth(),r.getHeight()]}}function Wv(r){try{return r.getOrigin().slice(0,2)}catch{return[0,r.getHeight()]}}function Zv(r,e){try{return r.getResolution(e)}catch{return[e.getWidth()/r.getWidth(),e.getHeight()/r.getHeight()]}}function Yv(r){const e=r.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let i=V(t);if(!i){const n=Vh(e.ProjLinearUnitsGeoKey);n&&(i=new lr({code:t,units:n}))}return i}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let i=V(t);if(!i){const n=Vh(e.GeogAngularUnitsGeoKey);n&&(i=new lr({code:t,units:n}))}return i}return null}function $v(r){return r.getImageCount().then(function(e){const t=new Array(e);for(let i=0;i<e;++i)t[i]=r.getImage(i);return Promise.all(t)})}function Hv(r,e){let t;return r.blob?t=dp(r.blob):r.overviews?t=fp(r.url,r.overviews,e):t=gp(r.url,e),t.then($v)}function ro(r,e,t,i,n){if(Array.isArray(r)){const s=r.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(i);throw n(o),o}for(let o=0;o<s;++o)ro(r[o],e[o],t,i,n);return}if(e=e,Math.abs(r-e)>t*r)throw new Error(i)}function Kv(r){return r instanceof Int8Array?-128:r instanceof Int16Array?-32768:r instanceof Int32Array?-2147483648:r instanceof Float32Array?12e-39:0}function qv(r){return r instanceof Int8Array?127:r instanceof Uint8Array||r instanceof Uint8ClampedArray?255:r instanceof Int16Array?32767:r instanceof Uint16Array?65535:r instanceof Int32Array?2147483647:r instanceof Uint32Array?4294967295:r instanceof Float32Array?34e37:255}class Sm extends h0{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const i=this,n=new Array(t);for(let s=0;s<t;++s)n[s]=Hv(this.sourceInfo_[s],this.sourceOptions_);Promise.all(n).then(function(s){i.configure_(s)}).catch(function(s){xo(s),i.error_=s,i.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let i=t.length-1;i>=0;--i){const n=t[i],s=Yv(n);if(s){this.projection=s;break}}}determineTransformMatrix(e){const t=e[0];for(let i=t.length-1;i>=0;--i){const s=t[i].fileDirectory.ModelTransformation;if(s){const[o,a,l,c,h,u,d,f]=s,g=en(en([1/Math.sqrt(o*o+h*h),0,0,-1/Math.sqrt(a*a+u*u),c,f],[o,h,a,u,0,0]),[1,0,0,1,-c,-f]);this.transformMatrix=g,this.addAlpha_=!0;break}}}configure_(e){let t,i,n,s,o;const a=new Array(e.length),l=new Array(e.length),c=new Array(e.length);let h=0;const u=e.length;for(let m=0;m<u;++m){const _=[],y=[];e[m].forEach(T=>{Bv(T)?y.push(T):_.push(T)});const x=_.length;if(y.length>0&&y.length!==x)throw new Error(`Expected one mask per image found ${y.length} masks and ${x} images`);let C,b;const v=new Array(x),w=new Array(x),L=new Array(x);l[m]=new Array(x),c[m]=new Array(x);for(let T=0;T<x;++T){const R=_[T],M=R.getGDALNoData();c[m][T]=R.getGDALMetadata(0),l[m][T]=M;const I=this.sourceInfo_[m].bands;a[m]=I?I.length:R.getSamplesPerPixel();const F=x-(T+1);C||(C=Vv(R)),b||(b=Wv(R));const A=Zv(R,_[0]);L[F]=A[0];const O=[R.getTileWidth(),R.getTileHeight()];O[0]!==O[1]&&O[1]<ol&&(O[0]=ol,O[1]=ol),v[F]=O;const j=A[0]/Math.abs(A[1]);w[F]=[O[0],O[1]/j]}if(t?ot(t,C,t):t=C,!i)i=b;else{const T=`Origin mismatch for source ${m}, got [${b}] but expected [${i}]`;ro(i,b,0,T,this.viewRejector)}if(!o)o=L,this.resolutionFactors_[m]=1;else{o.length-h>L.length&&(h=o.length-L.length);const T=o[o.length-1]/L[L.length-1];this.resolutionFactors_[m]=T;const R=L.map(I=>I*=T),M=`Resolution mismatch for source ${m}, got [${R}] but expected [${o}]`;ro(o.slice(h,o.length),R,.02,M,this.viewRejector)}n?ro(n.slice(h,n.length),w,.01,`Tile size mismatch for source ${m}`,this.viewRejector):n=w,s?ro(s.slice(h,s.length),v,0,`Tile size mismatch for source ${m}`,this.viewRejector):s=v,this.sourceImagery_[m]=_.reverse(),this.sourceMasks_[m]=y.reverse()}for(let m=0,_=this.sourceImagery_.length;m<_;++m){const y=this.sourceImagery_[m];for(;y.length<o.length;)y.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=c;e:for(let m=0;m<u;++m){if(this.sourceInfo_[m].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[m].length){this.addAlpha_=!0;break}const _=l[m],y=this.sourceInfo_[m].bands;if(y){for(let x=0;x<y.length;++x)if(_[y[x]-1]!==null){this.addAlpha_=!0;break e}continue}for(let x=0;x<_.length;++x)if(_[x]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let m=0;m<u;++m)d+=a[m];this.bandCount=d;const f=new Dn({extent:t,minZoom:h,origin:i,resolutions:o,tileSizes:n});this.tileGrid=f,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const g=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]);let p=t;if(this.transformMatrix){const m=hr(Fe(),this.transformMatrix.slice()),_=$a(y=>Ae(m,y));p=or(t,_)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:An(yt(p),this.projection),extent:Bo(p,this.projection),zoom:g})}loadTile_(e,t,i,n){const s=this.getTileSize(e),o=this.sourceImagery_.length,a=new Array(o*2),l=this.nodataValues_,c=this.sourceInfo_,h=Xv();for(let u=0;u<o;++u){const d=c[u],f=this.resolutionFactors_[u],g=[Math.round(t*(s[0]*f)),Math.round(i*(s[1]*f)),Math.round((t+1)*(s[0]*f)),Math.round((i+1)*(s[1]*f))],p=this.sourceImagery_[u][e];let m;d.bands&&(m=d.bands.map(function(b){return b-1}));let _;"nodata"in d&&d.nodata!==null?_=d.nodata:m?_=m.map(function(b){return l[u][b]}):_=l[u];const y={window:g,width:s[0],height:s[1],samples:m,fillValue:_,pool:h,interleave:!1,signal:n.signal};jv(this.convertToRGB_,p)?a[u]=p.readRGB(y):a[u]=p.readRasters(y);const x=o+u,C=this.sourceMasks_[u][e];if(!C){a[x]=Promise.resolve(null);continue}a[x]=C.readRasters({window:g,width:s[0],height:s[1],samples:[0],pool:h,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,s)).catch(function(u){throw xo(u),u})}composeTile_(e,t){const i=this.metadata_,n=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,c=this.normalize_,h=this.addAlpha_,u=e[0]*e[1],d=u*o;let f;c?f=new Uint8Array(d):f=new Float32Array(d);let g=0;for(let p=0;p<u;++p){let m=h;for(let _=0;_<s;++_){const y=n[_];let x=y.min,C=y.max,b,v;if(c){const w=i[_][0];x===void 0&&(w&&Ud in w?x=parseFloat(w[Ud]):x=Kv(t[_][0])),C===void 0&&(w&&zd in w?C=parseFloat(w[zd]):C=qv(t[_][0])),b=255/(C-x),v=-x*b}for(let w=0;w<a[_];++w){const L=t[_][w][p];let T;if(c?T=se(b*L+v,0,255):T=L,!h)f[g]=T;else{let R=y.nodata;if(R===void 0){let I;y.bands?I=y.bands[w]-1:I=w,R=l[_][I]}const M=isNaN(R);(!M&&L!==R||M&&!isNaN(L))&&(m=!1,f[g]=T)}g++}if(!m){const w=s+_,L=t[w];L&&!L[0][p]&&(m=!0)}}h&&(m||(f[g]=255),g++)}return f}}Sm.prototype.getView;const Jv=22;class Qv extends pi{constructor(e){const t=!!e.highDpi;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const i={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(i.imageFormat=e.imageFormat),e.scale&&(i.scale=e.scale),t&&(i.highDpi=!0),e.layerTypes&&(i.layerTypes=e.layerTypes),e.styles&&(i.styles=e.styles),e.overlay===!0&&(i.overlay=!0),e.apiOptions&&(i.apiOptions=e.apiOptions),this.sessionTokenRequest_=i,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_;const n=e.url||"https://tile.googleapis.com/";this.createSessionUrl_=n+"v1/createSession",this.tileUrl_=n+"v1/2dtiles",this.attributionUrl_=n+"tile/v1/viewport",this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e=this.createSessionUrl_+"?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},i=await this.fetchSessionToken(e,t);if(!i.ok){try{const d=await i.json();this.error_=new Error(d.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const n=await i.json(),s=this.getTilePixelRatio(1),o=[n.tileWidth/s,n.tileHeight/s];this.tileGrid=Gn({extent:hn(this.getProjection()),maxZoom:Jv,tileSize:o});const a=n.session;this.sessionTokenValue_=a;const l=this.apiKey_,c=this.tileUrl_;this.tileUrlFunction=function(d,f,g){const p=d[0],m=d[1],_=d[2];return`${c}/${p}/${m}/${_}?session=${a}&key=${l}`};const h=parseInt(n.expiry,10)*1e3,u=Math.max(h-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),u),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[Te.ANIMATING]||e.viewHints[Te.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,i]=Jh(yo(e.extent),e.viewState.projection),[n,s]=Jh(L2(e.extent),e.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${s}&south=${i}&east=${n}&west=${t}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const c=this.sessionTokenValue_,h=this.apiKey_,d=`${this.attributionUrl_}?session=${c}&key=${h}&${l}`;return this.previousViewportAttribution_=await fetch(d).then(f=>f.json()).then(f=>f.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let Rm=class extends Jo{constructor(e,t,i,n,s,o,a){super(t,i,n,s,o,a),this.zoomifyImage_=null,this.tileSize_=e}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=super.getImage();if(this.state==D.LOADED){const t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;const i=Me(t[0],t[1]);return i.drawImage(e,0,0),this.zoomifyImage_=i.canvas,i.canvas}return e}};class eE extends pi{constructor(e){const t=e.size,i=e.tierSizeCalculation!==void 0?e.tierSizeCalculation:"default",n=e.tilePixelRatio||1,s=t[0],o=t[1],a=[],l=e.tileSize||vs;let c=l*n;switch(i){case"default":for(;s>c||o>c;)a.push([Math.ceil(s/c),Math.ceil(o/c)]),c+=c;break;case"truncated":let v=s,w=o;for(;v>c||w>c;)a.push([Math.ceil(v/c),Math.ceil(w/c)]),v>>=1,w>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const h=[n],u=[0];for(let v=1,w=a.length;v<w;v++)h.push(n<<v),u.push(a[v-1][0]*a[v-1][1]+u[v-1]);h.reverse();const d=new Dn({tileSize:l,extent:e.extent||[0,-o,s,0],resolutions:h});let f=e.url;f&&!f.includes("{TileGroup}")&&!f.includes("{tileIndex}")&&(f+="{TileGroup}/{z}-{x}-{y}.jpg");const g=e0(f);let p=l*n;function m(v){return function(w,L,T){if(!w)return;const R=w[0],M=w[1],I=w[2],F=M+I*a[R][0],A=(F+u[R])/p|0,O={z:R,x:M,y:I,tileIndex:F,TileGroup:"TileGroup"+A};return v.replace(/\{(\w+?)\}/g,function(j,N){return O[N]})}}const _=Ls(g.map(m)),y=Rm.bind(null,De(l*n));super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:y,tileGrid:d,tileUrlFunction:_,transition:e.transition}),this.zDirection=e.zDirection;const x=d.getTileCoordForCoordAndResolution(yt(d.getExtent()),h[h.length-1]),C=_(x,1,null),b=new Image;b.addEventListener("error",()=>{p=l,this.changed()}),b.src=C}}function Qs(r){return r.toLocaleString("en",{maximumFractionDigits:10})}class tE extends pi{constructor(e){const t=e||{};let i=t.url||"";i=i+(i.lastIndexOf("/")===i.length-1||i===""?"":"/");const n=t.version||nt.VERSION2,s=t.sizes||[],o=t.size;me(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],c=t.tileSize,h=t.tilePixelRatio||1,u=t.format||"jpg",d=t.quality||(t.version==nt.VERSION1?"native":"default");let f=t.resolutions||[];const g=t.supports||[],p=t.extent||[0,-l,a,0],m=s!=null&&Array.isArray(s)&&s.length>0,_=c!==void 0&&(typeof c=="number"&&Number.isInteger(c)&&c>0||Array.isArray(c)&&c.length>0),y=g!=null&&Array.isArray(g)&&(g.includes("regionByPx")||g.includes("regionByPct"))&&(g.includes("sizeByWh")||g.includes("sizeByH")||g.includes("sizeByW")||g.includes("sizeByPct"));let x,C,b;if(f.sort(function(T,R){return R-T}),_||y)if(c!=null&&(typeof c=="number"&&Number.isInteger(c)&&c>0?(x=c,C=c):Array.isArray(c)&&c.length>0&&((c.length==1||c[1]==null&&Number.isInteger(c[0]))&&(x=c[0],C=c[0]),c.length==2&&(Number.isInteger(c[0])&&Number.isInteger(c[1])?(x=c[0],C=c[1]):c[0]==null&&Number.isInteger(c[1])&&(x=c[1],C=c[1])))),(x===void 0||C===void 0)&&(x=vs,C=vs),f.length==0){b=Math.max(Math.ceil(Math.log(a/x)/Math.LN2),Math.ceil(Math.log(l/C)/Math.LN2));for(let T=b;T>=0;T--)f.push(Math.pow(2,T))}else{const T=Math.max(...f);b=Math.round(Math.log(T)/Math.LN2)}else if(x=a,C=l,f=[],m){s.sort(function(R,M){return R[0]-M[0]}),b=-1;const T=[];for(let R=0;R<s.length;R++){const M=a/s[R][0];if(f.length>0&&f[f.length-1]==M){T.push(R);continue}f.push(M),b++}if(T.length>0)for(let R=0;R<T.length;R++)s.splice(T[R]-R,1)}else f.push(1),s.push([a,l]),b=0;const v=new Dn({tileSize:[x,C],extent:p,origin:fi(p),resolutions:f}),w=function(T,R,M){let I,F;const A=T[0];if(A>b)return;const O=T[1],j=T[2],N=f[A];if(!(O===void 0||j===void 0||N===void 0||O<0||Math.ceil(a/N/x)<=O||j<0||Math.ceil(l/N/C)<=j)){if(y||_){const B=O*x*N,Z=j*C*N;let K=x*N,ee=C*N,z=x,ue=C;if(B+K>a&&(K=a-B),Z+ee>l&&(ee=l-Z),B+x*N>a&&(z=Math.floor((a-B+N-1)/N)),Z+C*N>l&&(ue=Math.floor((l-Z+N-1)/N)),B==0&&K==a&&Z==0&&ee==l)I="full";else if(!y||g.includes("regionByPx"))I=B+","+Z+","+K+","+ee;else if(g.includes("regionByPct")){const be=Qs(B/a*100),ye=Qs(Z/l*100),We=Qs(K/a*100),Ze=Qs(ee/l*100);I="pct:"+be+","+ye+","+We+","+Ze}n==nt.VERSION3&&(!y||g.includes("sizeByWh"))?F=z+","+ue:!y||g.includes("sizeByW")?F=z+",":g.includes("sizeByH")?F=","+ue:g.includes("sizeByWh")?F=z+","+ue:g.includes("sizeByPct")&&(F="pct:"+Qs(100/N))}else if(I="full",m){const B=s[A][0],Z=s[A][1];n==nt.VERSION3?B==a&&Z==l?F="max":F=B+","+Z:B==a?F="full":F=B+","}else F=n==nt.VERSION3?"max":"full";return i+I+"/"+F+"/0/"+d+"."+u}},L=Rm.bind(null,De(c||256).map(function(T){return T*h}));super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:L,tileGrid:v,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:w,transition:t.transition}),this.zDirection=t.zDirection}}function Lm(r,e,t,i,n,s){const o=n.getCode().split(/:(?=\d+$)/).pop(),a=t/i,l=[Xa(ae(e)/a,Ai),Xa(Ie(e)/a,Ai)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*i:90*i);const c=r.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return tn(c,s)}function iE(r){const e=r.load?r.load:On,t=V(r.projection||"EPSG:3857"),i=r.ratio??1.5,n=r.crossOrigin??null;return function(s,o,a){a=r.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,r.params),s=Q2(s,o,a,i);const c=Lm(r.url,s,o,a,t,l),h=new Image;return h.crossOrigin=n,e(h,c).then(u=>{const d=ae(s)/u.width*a;return{image:u,extent:s,resolution:d,pixelRatio:a}})}}class nE extends Nn{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:J2,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,i,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=iE({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),On(s))})),super.getImageInternal(e,t,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}class rE extends Nn{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,i,n){t=this.findNearestResolution(t);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==t&&s.getPixelRatio()==i&&Et(s.getExtent(),e))return s;e=e.slice(),tc(e,this.ratio_);const o=ae(e)/t,a=Ie(e)/t,l=[o*i,a*i],c=this.canvasFunction_.call(this,e,t,i,l,n);return c&&(s=new Th(e,t,i,c)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}function sE(r,e,t,i){const n=ae(r),s=Ie(r),o=e[0],a=e[1],l=.0254/i;return a*n>o*s?n*t/(o*l):s*t/(a*l)}function oE(r,e,t,i,n,s,o){const a=sE(t,i,s,o),l=yt(t),c={OPERATION:n?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(i[0]),SETDISPLAYHEIGHT:Math.round(i[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(c,e),tn(r,c)}function aE(r){const e=r.load||On,t=r.useOverlay??!1,i=r.metersPerUnit||1,n=r.displayDpi||96,s=r.ratio??1,o=r.crossOrigin??null;return function(a,l,c){const h=new Image;h.crossOrigin=o,a=Q2(a,l,c,s);const u=ae(a)/l,d=Ie(a)/l,f=[u*c,d*c],g=oE(r.url,r.params,a,f,t,i,n);return e(h,g).then(p=>({image:p,extent:a,pixelRatio:c}))}}class lE extends Nn{constructor(e){super({interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.displayDpi_=e.displayDpi!==void 0?e.displayDpi:96,this.params_=Object.assign({},e.params),this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:J2,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.metersPerUnit_=e.metersPerUnit!==void 0?e.metersPerUnit:1,this.ratio_=e.ratio!==void 0?e.ratio:1,this.useOverlay_=e.useOverlay!==void 0?e.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,i,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=aE({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),On(s))})),super.getImageInternal(e,t,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}changed(){this.image=null,super.changed()}}function cE(r){const e=r.load||On,t=r.imageExtent,i=r.crossOrigin??null;return()=>{const n=new Image;return n.crossOrigin=i,e(n,r.url).then(s=>{const o=ae(t)/s.width,a=Ie(t)/s.height;return{image:s,extent:t,resolution:o!==a?[o,a]:a,pixelRatio:1}})}}class hE extends Nn{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,i=e.imageLoadFunction!==void 0?e.imageLoadFunction:J2;super({attributions:e.attributions,interpolate:e.interpolate,projection:V(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new U2(this.imageExtent_,void 0,1,cE({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(n,s)=>(this.image.setImage(n),i(this.image,s),On(n))})),this.image.addEventListener(H.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,i,n){return Ne(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const uE=new Error("Image failed to load");function Pm(r,e,t,i,n){return new Promise((s,o)=>{const a=new Image;a.crossOrigin=n.crossOrigin??null,a.addEventListener("load",()=>s(a)),a.addEventListener("error",()=>o(uE)),a.src=eh(r,e,t,i,n.maxY)})}function Bd(r){return function(e,t,i,n){const s=E8(r,e,t,i);return Pm(s,e,t,i,n)}}function dE(r){return function(e,t,i,n){const s=r(e,t,i,n);return Pm(s,e,t,i,n)}}function jd(r){let e;if(Array.isArray(r))e=Bd(r);else if(typeof r=="string"){const t=e0(r);e=Bd(t)}else if(typeof r=="function")e=dE(r);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return e}let Xd=0;function Vd(r){return Array.isArray(r)?r.join(`
`):typeof r=="string"?r:(++Xd,"url-function-key-"+Xd)}class Im extends h0{constructor(e){e=e||{};let t=e.loader,i;e.url&&(t=jd(e.url),i=Vd(e.url));const n=t?e.state:"loading",s=e.wrapX===void 0?!0:e.wrapX;super({loader:t,key:i,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize,gutter:e.gutter,maxResolution:e.maxResolution,projection:e.projection,tileGrid:e.tileGrid,state:n,wrapX:s,transition:e.transition,interpolate:e.interpolate!==!1,crossOrigin:e.crossOrigin,zDirection:e.zDirection})}setUrl(e){const t=jd(e);this.setLoader(t),this.setKey(Vd(e)),this.getState()!=="ready"&&this.setState("ready")}}function Sh(r,e,t,i){const n=document.createElement("script"),s="olc_"+W(e);function o(){delete window[s],n.parentNode.removeChild(n)}n.async=!0,n.src=r+(r.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(n)}class fE extends Error{constructor(e){const t="Unexpected response status: "+e.status;super(t),this.name="ResponseError",this.response=e}}class gE extends Error{constructor(e){super("Failed to issue request"),this.name="ClientError",this.client=e}}function Am(r){return new Promise(function(e,t){function i(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(c){const h="Error parsing response text as JSON: "+c.message;t(new Error(h));return}e(l);return}t(new fE(a))}function n(o){t(new gE(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",i),s.addEventListener("error",n),s.open("GET",r),s.setRequestHeader("Accept","application/json"),s.send()})}function Fm(r,e){return e.includes("://")?e:new URL(e,r).href}const mE={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},pE={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function Mm(r,e){if(!e.length)return r;const t=new URL(r,"file:/");if(t.pathname.split("/").includes("collections"))return xo('The "collections" query parameter cannot be added to collection endpoints'),r;const i=e.map(o=>encodeURIComponent(o)).join(",");t.searchParams.append("collections",i);const n=r.split("?")[0],s=decodeURIComponent(t.searchParams.toString());return`${n}?${s}`}function _E(r,e,t){let i,n;for(let s=0;s<r.length;++s){const o=r[s];if(o.rel==="item"){if(o.type===e){i=o.href;break}(mE[o.type]||!n&&o.type.startsWith("image/"))&&(n=o.href)}}if(!i)if(n)i=n;else throw new Error('Could not find "item" link');return t&&(i=Mm(i,t)),i}function yE(r,e,t,i){let n,s;const o={};for(let a=0;a<r.length;++a){const l=r[a];if(o[l.type]=l.href,l.rel==="item"){if(l.type===e){n=l.href;break}pE[l.type]&&(s=l.href)}}if(!n&&t)for(let a=0;a<t.length;++a){const l=t[a];if(o[l]){n=o[l];break}}if(!n)if(s)n=s;else throw new Error('Could not find "item" link');return i&&(n=Mm(n,i)),n}function Wd(r,e,t,i){let n=r.projection;if(!n&&(typeof e.crs=="string"?n=V(e.crs):"uri"in e.crs&&(n=V(e.crs.uri)),!n))throw new Error(`Unsupported CRS: ${JSON.stringify(e.crs)}`);const s=e.orderedAxes,a=!(s?s.slice(0,2).map(v=>v.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):n.getAxisOrientation()).startsWith("en"),l=e.tileMatrices,c={};for(let v=0;v<l.length;++v){const w=l[v];c[w.id]=w}const h={},u=[];if(i)for(let v=0;v<i.length;++v){const w=i[v],L=w.tileMatrix;u.push(L),h[L]=w}else for(let v=0;v<l.length;++v){const w=l[v].id;u.push(w)}const d=u.length,f=new Array(d),g=new Array(d),p=new Array(d),m=new Array(d),_=[-1/0,-1/0,1/0,1/0];for(let v=0;v<d;++v){const w=u[v],L=c[w],T=L.pointOfOrigin;a?f[v]=[T[1],T[0]]:f[v]=T,g[v]=L.cellSize,p[v]=[L.matrixWidth,L.matrixHeight],m[v]=[L.tileWidth,L.tileHeight];const R=h[w];if(R){const M=L.cellSize*L.tileWidth,I=f[v][0]+R.minTileCol*M,F=f[v][0]+(R.maxTileCol+1)*M,A=L.cellSize*L.tileHeight,O=L.cornerOfOrigin==="bottomLeft";let j,N;O?(j=f[v][1]+R.minTileRow*A,N=f[v][1]+(R.maxTileRow+1)*A):(j=f[v][1]-(R.maxTileRow+1)*A,N=f[v][1]-R.minTileRow*A),ot(_,[I,j,F,N],_)}}const y=new Dn({origins:f,resolutions:g,sizes:p,tileSizes:m,extent:i?_:void 0}),x=r.context,C=r.url;function b(v,w,L){if(!v)return;const T=u[v[0]],R=c[T],M=R.cornerOfOrigin==="bottomLeft",I={tileMatrix:T,tileCol:v[1],tileRow:M?-v[2]-1:v[2]};if(i){const A=h[R.id];if(I.tileCol<A.minTileCol||I.tileCol>A.maxTileCol||I.tileRow<A.minTileRow||I.tileRow>A.maxTileRow)return}Object.assign(I,{z:I.tileMatrix,x:I.tileCol,y:I.tileRow},x);const F=t.replace(/\{(\w+?)\}/g,function(A,O){return I[O]});return Fm(C,F)}return{grid:y,projection:n,urlTemplate:t,urlFunction:b}}function xE(r,e){const t=e.tileMatrixSetLimits;let i;if(e.dataType==="map")i=_E(e.links,r.mediaType,r.collections);else if(e.dataType==="vector")i=yE(e.links,r.mediaType,r.supportedMediaTypes,r.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(e.tileMatrixSet)return Wd(r,e.tileMatrixSet,i,t);const n=e.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!n)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=n.href,o=Fm(r.url,s);return Am(o).then(function(a){return Wd(r,a,i,t)})}function km(r){return Am(r.url).then(function(e){return xE(r,e)})}class CE extends pi{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,context:e.context||null,collections:e.collections};km(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.projection=e.projection,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){xo(e),this.setState("error")}}class bE extends Pg{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null,collections:e.collections};km(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.projection=e.projection,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){xo(e),this.setState("error")}}function Om(r){return function(e){const t=e.buffers,i=e.meta,n=e.imageOps,s=e.width,o=e.height,a=t.length,l=t[0].byteLength;if(n){const d=new Array(a);for(let g=0;g<a;++g)d[g]=new ImageData(new Uint8ClampedArray(t[g]),s,o);return r(d,i).data.buffer}const c=new Uint8ClampedArray(l),h=new Array(a),u=new Array(a);for(let d=0;d<a;++d)h[d]=new Uint8ClampedArray(t[d]),u[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let g=0;g<a;++g){const p=h[g];u[g][0]=p[d],u[g][1]=p[d+1],u[g][2]=p[d+2],u[g][3]=p[d+3]}const f=r(u,i);c[d]=f[0],c[d+1]=f[1],c[d+2]=f[2],c[d+3]=f[3]}return c.buffer}}function vE(r,e){const i=Object.keys(r.lib||{}).map(function(s){return"const "+s+" = "+r.lib[s].toString()+";"}).concat(["const __minion__ = ("+Om.toString()+")(",r.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return n.addEventListener("message",e),n}function EE(r,e){const t=Om(r.operation);let i=!1;return{postMessage:function(n){setTimeout(function(){i||e({data:{buffer:t(n),meta:n.meta}})},0)},terminate:function(){i=!0}}}class wE extends zo{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let n=0;n<t;++n)i[n]=vE(e,this.onWorkerMessage_.bind(this,n));else i[0]=EE(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,n=e.inputs.map(function(l){return l.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:n,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},n);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const c=l*a,h=[];for(let u=0,d=n.length;u<d;++u)h.push(n[u].slice(c,c+a));this.workers_[l].postMessage({buffers:h,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},h)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,n;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),n=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;i=new Uint8ClampedArray(s),n=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const l=this.dataLookup_[a].buffer,c=a*o;i.set(new Uint8ClampedArray(l),c),n[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),n),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const Zd={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Yd extends Ni{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class Nm extends Nn{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=RE(e.sources);const t=this.changed.bind(this);for(let i=0,n=this.layers_.length;i<n;++i)this.layers_[i].addEventListener(H.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new c1(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Fe(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:SE(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Fe(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:W(this),renderTargets:{}},this.setAttributions(function(i){var s;const n=[];for(let o=0,a=e.sources.length;o<a;++o){const l=e.sources[o],c=l instanceof ks?l:l.getSource();if(!c)continue;const h=(s=c.getAttributions())==null?void 0:s(i);typeof h=="string"?n.push(h):h!==void 0&&n.push(...h)}return n}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new wE({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const s=yt(e);n.size[0]=Math.ceil(ae(e)/t),n.size[1]=Math.ceil(Ie(e)/t),n.extent=[s[0]-n.size[0]*t/2,s[1]-n.size[1]*t/2,s[0]+n.size[0]*t/2,s[1]+n.size[1]*t/2],n.time=Date.now();const o=n.viewState;return o.center=s,o.projection=i,o.resolution=t,n}allSourcesReady_(){let e=!0,t;for(let i=0,n=this.layers_.length;i<n;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!qt(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const o=TE(this.layers_[s],e);if(o)i[s]=o;else return}const n={};this.dispatchEvent(new Yd(Zd.BEFOREOPERATIONS,e,n)),this.processor_.process(i,n,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,n){if(t||!i)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!qt(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(ae(s)/o),c=Math.round(Ie(s)/o);a=Me(l,c),this.renderedImageCanvas_=new Th(s,o,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Yd(Zd.AFTEROPERATIONS,e,n))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,n=this.layers_.length;i<n&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Nm.prototype.dispose;let Yn=null;function TE(r,e){const t=r.getRenderer();if(!t)throw new Error("Unsupported layer type: "+r);if(!t.prepareFrame(e))return null;const i=e.size[0],n=e.size[1];if(i===0||n===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===i&&o.height===n)return o.getContext("2d").getImageData(0,0,i,n)}if(!Yn)Yn=Me(i,n,void 0,{willReadFrequently:!0});else{const a=Yn.canvas;a.width!==i||a.height!==n?Yn=Me(i,n,void 0,{willReadFrequently:!0}):Yn.clearRect(0,0,i,n)}return Yn.drawImage(o,0,0,i,n),Yn.getImageData(0,0,i,n)}function SE(r){return r.map(function(e){return e.getLayerState()})}function RE(r){const e=r.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=LE(r[i]);return t}function LE(r){let e;return r instanceof ks?r instanceof Qo?e=new xg({source:r}):r instanceof Nn&&(e=new fg({source:r})):e=r,e}const PE='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',IE='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',AE='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',FE={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_toner_dark:{extension:"png"},stamen_toner_blacklite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},ME={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_dark:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_blacklite:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class kE extends i0{constructor(e){const t=e.layer.indexOf("-"),i=t==-1?e.layer:e.layer.slice(0,t),n=ME[i]||{minZoom:0,maxZoom:20,retina:!0},s=FE[e.layer],o=e.apiKey?"?api_key="+e.apiKey:"",a=n.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,c=[PE,IE,Rg];e.layer.startsWith("stamen_")&&c.splice(1,0,AE),super({attributions:c,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:n.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:n.minZoom,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}class OE extends pi{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=mt(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,i,n,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const c=yi(Qc(e),a.length);l=a[c]}return Lm(l,i,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(e[0]),n,s,o)}getTilePixelRatio(e){return this.hidpi_?e:1}setParams(e){this.params_=Object.assign({},e),this.setKey(this.getKeyForParams_())}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);const s=n.getTileCoordExtent(e,this.tmpExtent_);let o=De(n.getTileSize(e[0]),this.tmpSize);t!=1&&(o=$1(o,t,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,s,t,i,a)}}class NE extends Im{constructor(e){e=e||{};const t=e.template||"z:{z} x:{x} y:{y}",i=e.source,n=e.color||"grey";super({transition:0,wrapX:e.wrapX!==void 0?e.wrapX:i!==void 0?i.getWrapX():void 0});const s=()=>{var a;this.projection=e.projection!==void 0?V(e.projection):i!==void 0?i.getProjection():this.projection,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:i!==void 0?i.getTileGrid():this.tileGrid,this.zDirection=e.zDirection!==void 0?e.zDirection:i!==void 0?i.zDirection:this.zDirection,i instanceof h0&&(this.transformMatrix=((a=i.transformMatrix)==null?void 0:a.slice())||null);const o=this.tileGrid;o&&this.setTileSizes(o.getResolutions().map((l,c)=>De(o.getTileSize(c)).map(h=>Math.max(Math.floor(h),1)))),this.setLoader((l,c,h,u)=>{const d=eh(t,l,c,h,u.maxY),[f,g]=this.getTileSize(l),p=Me(f,g);return p.strokeStyle=n,p.strokeRect(.5,.5,f+.5,g+.5),p.fillStyle=n,p.strokeStyle="white",p.textAlign="center",p.textBaseline="middle",p.font="24px sans-serif",p.lineWidth=4,p.strokeText(d,f/2,g/2,f),p.fillText(d,f/2,g/2,f),Promise.resolve(p.canvas)}),this.setState("ready")};if(i===void 0||i.getState()==="ready")s();else{const o=()=>{i.getState()==="ready"&&(i.removeEventListener(H.CHANGE,o),s())};i.addEventListener(H.CHANGE,o)}}}class DE extends pi{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:V("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Sh(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=V("EPSG:4326"),i=this.getProjection();let n;if(e.bounds!==void 0){const c=on(t,i);n=or(e.bounds,c)}const s=hn(i),o=e.minzoom||0,a=e.maxzoom||22,l=Gn({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=th(e.tiles,l),e.attribution&&!this.getAttributions()){const c=n!==void 0?n:s;this.setAttributions(function(h){return Ne(c,h.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class GE extends Ns{constructor(e,t,i,n,s,o){super(e,t),this.src_=i,this.extent_=n,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(e){if(!this.grid_||!this.keys_)return null;const t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if(typeof n!="string")return null;let s=n.charCodeAt(Math.floor(t*n.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(e,t,i){this.state==D.EMPTY&&i===!0?(this.state=D.IDLE,ja(this,H.CHANGE,n=>{t(this.getData(e))}),this.loadInternal_()):i===!0?setTimeout(()=>{t(this.getData(e))},0):t(this.getData(e))}getKey(){return this.src_}handleError_(){this.state=D.ERROR,this.changed()}handleLoad_(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=D.LOADED,this.changed()}loadInternal_(){if(this.state==D.IDLE)if(this.state=D.LOADING,this.jsonp_)Sh(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleError_();return}this.handleLoad_(i)}else this.handleError_()}onXHRError_(e){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(D.EMPTY)}}class zE extends Qo{constructor(e){if(super({projection:V("EPSG:3857"),state:"loading",wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection}),this.preemptive_=e.preemptive!==void 0?e.preemptive:!0,this.tileUrlFunction_=F8,this.template_=void 0,this.jsonp_=e.jsonp||!1,this.tileCache_=new f2(512),e.url)if(this.jsonp_)Sh(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(e,t,i,n){if(this.tileGrid){const s=this.tileGrid.getZForResolution(t,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(e,s),a=this.getTile(o[0],o[1],o[2],1,this.getProjection());a.getState()==D.IDLE&&a.load(),a.forDataAtCoordinate(e,i,n)}else n===!0?setTimeout(function(){i(null)},0):i(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(e){const t=V("EPSG:4326"),i=this.getProjection();let n;if(e.bounds!==void 0){const h=on(t,i);n=or(e.bounds,h)}const s=hn(i),o=e.minzoom||0,a=e.maxzoom||22,l=Gn({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=e.template;const c=e.grids;if(!c){this.setState("error");return}if(this.tileUrlFunction_=th(c,l),e.attribution){const h=n!==void 0?n:s;this.setAttributions(function(u){return Ne(h,u.extent)?[e.attribution]:null})}this.setState("ready")}getTile(e,t,i,n,s){const o=[e,t,i],a=this.getTileCoordForTileUrlFunction(o,s),l=this.tileUrlFunction_(a,n,s),c=`${this.getKey()},${Jc(e,t,i)}`;if(this.tileCache_.containsKey(c))return this.tileCache_.get(c);this.tileCache_.expireCache();const h=new GE(o,l!==void 0?D.IDLE:D.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_);return this.tileCache_.set(c,h),h}}class UE extends Er{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const i=t.getGeometry();return me(!i||i.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),i},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,i){var n;(n=this.source)==null||n.loadFeatures(e,t,i),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(H.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(H.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const i=e===0?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==i;this.distance=e,this.minDistance=t,this.interpolationRatio=i,n&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=mt(),t=this.distance*this.resolution,i=this.source.getFeatures(),n={};for(let s=0,o=i.length;s<o;s++){const a=i[s];if(!(W(a)in n)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();ts(c,e),It(e,t,e);const h=this.source.getFeaturesInExtent(e).filter(function(u){const d=W(u);return d in n?!1:(n[d]=!0,!0)});this.features.push(this.createCluster(h,e))}}}}createCluster(e,t){const i=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?h1(i,l.getCoordinates()):e.splice(a,1)}u1(i,1/e.length);const n=yt(t),s=this.interpolationRatio,o=new Oe([i[0]*(1-s)+n[0]*s,i[1]*(1-s)+n[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new Ee({geometry:o,features:e})}}class E2 extends UE{constructor(e={}){super({...e,createCluster:E2.defaultCreateCluster,geometryFunction:E2.defaultGeometryFunction})}static defaultCreateCluster(e,t){const i=t.length===1&&t[0].getGeometry()instanceof Ve?t[0].getGeometry():e,n=new Ee({geometry:i,features:t});if(t.length===1){const s=t[0];for(const o in s.getProperties())o!=="geometry"&&n.set(o,s.get(o))}return n}static defaultGeometryFunction(e){const t=e&&e.getGeometry();return t instanceof Oe?t:t instanceof Ve?t.getInteriorPoint():null}}class BE extends pi{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"application/xml")).then(t=>{this.handleCapabilitiesResponse(t,e)})}handleCapabilitiesResponse(e,t){const n=new rm().read(e),s=G8(n,t);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=Ls(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t==="KVP"?tn(e,i):e.replace(/\{(\w+?)\}/g,(o,a)=>a.toLowerCase()in i?i[a.toLowerCase()]:o);const n=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=e;return t==="KVP"?l=tn(l,a):l=l.replace(/\{(\w+?)\}/g,(c,h)=>a[h]),l}}}class jE extends Er{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX,strategy:u5}),this.dataProjection=e.projection||Vc.dataProjection,this.resourceURL=e.url,super.setLoader(this.loader)}fgbBoundingBox(e,t){const i=Tn(e,t.getCode(),this.dataProjection);return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}}async loader(e,t,i,n,s){const o=this.fgbBoundingBox(e,i);try{if(o.minX!==-1/0){const a=[],l=_p(this.resourceURL,o),c=new Ho({featureProjection:i,dataProjection:this.dataProjection});for await(const h of l){const u=c.readFeature(h);a.push(u)}super.clear(),super.addFeatures(a),n(a)}}catch{s()}}}window.eoxMapAdvancedOlSources={BingMaps:Lv,CartoDB:Pv,Cluster:E2,DataTile:h0,GeoTIFF:Sm,Google:Qv,IIIF:tE,Image:Nn,ImageArcGISRest:nE,ImageCanvas:rE,ImageMapGuide:lE,ImageStatic:hE,ImageTile:Im,OGCMapTile:CE,OGCVectorTile:bE,Raster:Nm,Source:ks,StadiaMaps:kE,TileArcGISRest:OE,TileDebug:NE,TileImage:pi,TileJSON:DE,UrlTile:ea,UTFGrid:zE,Zoomify:eE,WMTSCapabilities:BE,FlatGeoBuf:jE};const $d=async(r,e,t)=>{Kn.debug("Creating layers config",r,e,t);const i=[],n={type:"Group",properties:{id:"AnalysisGroup",title:"Data Layers",layerControlExpand:!0},layers:[]};for(const u of e){let d;if(t){const f=typeof t=="string"?new Date(t):t;d=await u.createLayersJson(f)}else d=await u.createLayersJson(void 0);d.forEach(f=>{f.properties.layerControlExpand=!0,f.properties.layerControlToolsExpand=!0}),n.layers.push(...d)}i.push(n);const s=await zh.getIndicatorLayers(r),o=zh.getObservationPointsLayer(e);o&&n.layers.unshift(o);const a={type:"Group",properties:{id:"BaseLayersGroup",title:"Base Layers"},layers:[]},l=s.filter(u=>u.properties.group==="baselayer");if(l.length){let u=0,d=0;for(let f=0;f<l.length;f++){const g=l[f];"visible"in g.properties||(g.properties.visible=!1),g.properties.visible&&(u++,d=f)}u===0&&(l[0].properties.visible=!0),u>0&&l.forEach((f,g)=>{g!==d?f.properties.visible=!1:f.properties.visible=!0}),a.layers.push(...l),a.layers.forEach(f=>{f.properties.layerControlExclusive=!0})}else a.layers.push({type:"Tile",properties:{id:"osm",title:"Background",layerControlExclusive:!0},source:{type:"OSM"}});a.layers.length&&i.push(a);const c={type:"Group",properties:{id:"OverlayGroup",title:"Overlay Layers"},layers:[]},h=s.filter(u=>u.properties.group==="overlay");return h.length&&(c.layers.push(...h),i.unshift(c)),i};let Fa=null;const XE=(r,e)=>{const t=i=>{var a;const n=i.map,s=(a=r.value)==null?void 0:a.lonLatCenter,o=n==null?void 0:n.getView().getZoom();s&&!Number.isNaN(s[0])&&!Number.isNaN(s[1])&&!Number.isNaN(o)&&(e.value=[s[0],s[1],o])};s1(()=>{var i,n;(n=(i=r.value)==null?void 0:i.map)==null||n.on("moveend",t)}),o1(()=>{var i,n;(n=(i=r.value)==null?void 0:i.map)==null||n.un("moveend",t)})},Hd=(r,e,t,i,n,s,o,a)=>{Kn.debug("InitMap",r.value,e.value,t.values,i.value);const c=Fp(a?[e,i,a]:[e,i],async(h,u)=>{var y,x,C,b,v,w,L,T,R,M,I,F,A,O,j,N;const[d,f,g]=a?h:[h[0],h[1],null],[p,m,_]=a?u:[u[0],u[1],null];if(d){Kn.debug("Selected Indicator watch triggered",d,f),((y=r==null?void 0:r.value)==null?void 0:y.id)==="main"&&Fa!==null&&((x=r==null?void 0:r.value)==null||x.map.setView(Fa),Fa=null);let B=[];const Z=(d==null?void 0:d.id)===(p==null?void 0:p.id)&&(f!==m||g&&(g==null?void 0:g.id)!==(_==null?void 0:_.id)),{selectedCompareStac:K}=cl(hl());if(((C=r==null?void 0:r.value)==null?void 0:C.id)==="main"?await Rp(d):K.value!==null&&(Fa=((b=r==null?void 0:r.value)==null?void 0:b.map.getView())??null,r.value.sync=s.value),Z){B=await $d(d,t,g??f),Kn.debug("Assigned layers after changing time only",JSON.parse(JSON.stringify(B))),n.value=B,Dh(((v=r.value)==null?void 0:v.id)==="compare"?"compareTime:updated":"time:updated",r.value,B);return}B=await $d(d,t,a?g:f);let ee=null;const z=(L=(w=d==null?void 0:d.extent)==null?void 0:w.temporal)==null?void 0:L.interval;if(z&&z.length>0&&z[0].length>1&&(ee=new Date(z[0][1]),Kn.debug("Indicator load: found stac extent, setting time to latest value",ee)),!g&&ee!==null&&ee.toISOString()!==i.value&&!Gh.value&&(i.value=ee.toISOString()),o&&!g&&((T=r==null?void 0:r.value)==null?void 0:T.id)==="main"&&(R=d.extent)!=null&&R.spatial.bbox&&!(Gh.value&&((M=Hn.value)!=null&&M[0])&&((I=Hn.value)!=null&&I[1]))){const ue=(F=d.extent)==null?void 0:F.spatial.bbox[0],be=Lp([...ue]),ye=(j=r.value)==null?void 0:j.transformExtent(be,"EPSG:4326",(O=(A=r.value)==null?void 0:A.map)==null?void 0:O.getView().getProjection());r.value.zoomExtent=ye}Kn.debug("Assigned layers",JSON.parse(JSON.stringify(B))),n.value=B,await Dh(((N=r.value)==null?void 0:N.id)==="compare"?"compareLayers:updated":"layers:updated",r.value,n.value)}},{immediate:!0});o1(()=>{c()})},Kd=(r,e)=>{vp(async(t,i)=>{if(t.includes("compare"))return;const n=[];for(const s of r)n.push(...await s.getToolTipProperties());e.value=n,Kn.debug("Updated tooltip properties",e.value)})},VE="#cursor-coordinates[data-v-9484a41e]{position:fixed;left:24px;bottom:54px;color:#000000e6;font-size:11px;font-family:var(--eox-body-font-family);background:#fffe;border-radius:4px;border:none;padding:0 3px;max-height:24px}@media (max-width: 959px){#cursor-coordinates[data-v-9484a41e]{display:none}}#scale-line[data-v-9484a41e]{position:fixed;left:24px;bottom:28px;color:#fff}@media (max-width: 959px){#scale-line[data-v-9484a41e]{bottom:102px}}[data-v-9484a41e] .ol-scale-line{background:#fffe!important;border-radius:4px!important;border:none!important;padding:0 3px 3px!important;font-size:10px!important;font-family:var(--eox-body-font-family);max-height:20px}[data-v-9484a41e] .ol-scale-line-inner{display:flex;justify-content:center;border:1px solid rgba(0,0,0,.5)!important;border-top:none!important;color:#333!important;font-weight:500!important;transform:translateY(1px)}.map-buttons-container[data-v-9484a41e]{position:fixed;top:0;left:0;width:100%;height:100%;display:grid;grid-template-columns:repeat(12,1fr);grid-template-rows:repeat(12,1fr);pointer-events:none;z-index:1}.map-buttons-container[data-v-9484a41e]>*{pointer-events:auto}",WE=[".enabled"],ZE=[".center",".zoom",".layers",".controls"],YE=[".propertyTransform"],$E=[".layers"],HE=[".propertyTransform"],KE={key:0,id:"cursor-coordinates",ref:"cursor-coords"},qE={key:1,id:"scale-line",ref:"scale-line"};var qd;const JE={__name:"index",props:{enableCompare:{type:Boolean,default:!1},center:{type:Array,default:()=>{var r,e;return[((r=Hn.value)==null?void 0:r[0])??15,((e=Hn.value)==null?void 0:e[1])??48]}},zoom:{type:Number,default:((qd=Hn.value)==null?void 0:qd[2])??4},zoomToExtent:{type:Boolean,default:!0},enableCursorCoordinates:{type:Boolean,default:!0},enableScaleLine:{type:Boolean,default:!0},btnsPosition:{type:Object,default:()=>({x:"12/9/10",y:1,gap:16})},btns:{type:Object,default:()=>({enableExportMap:!0,enableChangeProjection:!0,enableCompareIndicators:!0,enableBackToPOIs:!0,enableSearch:!0,enableZoom:!0})}},setup(r){var L;const e=r,{width:t}=xp(),i=T=>{if(typeof T=="number")return T;if(typeof T=="string"){const R=T.split("/"),M=t.value;return M<960?parseInt(R[0])||1:M<1920?parseInt(R[1]||R[0])||1:parseInt(R[2]||R[1]||R[0])||1}return 1},n=Vn(()=>i(e.btnsPosition.x)),s=Vn(()=>i(e.btnsPosition.y)),o=Vn(()=>({exportMap:e.btns.enableExportMap??!0,changeProjection:e.btns.enableChangeProjection??!0,compareIndicators:e.btns.enableCompareIndicators??!0,backToPOIs:e.btns.enableBackToPOIs??!0,enableSearch:e.btns.enableSearch??!0,enableZoom:e.btns.enableZoom??!0})),a=Uh("scale-line"),l=Uh("cursor-coords"),c=Ir([]),h=Ir([]),u=Vn(()=>{const T={Attribution:{collapsible:!0}};return e.enableScaleLine&&a.value&&(T.ScaleLine={target:a.value}),e.enableCursorCoordinates&&l.value&&(T.MousePosition={projection:"EPSG:4326",coordinateFormat:R=>`${R[1].toFixed(3)} °N, ${R[0].toFixed(3)} °E`,target:l.value}),T}),d=Bh(e.center),f=Bh(((L=Hn.value)==null?void 0:L[2])??e.zoom),g=Ir([{type:"Tile",source:{type:"OSM"},properties:{id:"osm",title:"Background"}}]),p=Ir([{type:"Tile",source:{type:"OSM"},properties:{id:"osm",title:"Background"}}]),m={duration:1200,easing:Pp},_=Ir(null),y=Ir(null),{selectedCompareStac:x}=cl(hl()),C=Vn(()=>e.enableCompare&&x.value?"":"first");XE(_,Hn),s1(()=>{const{selectedCompareStac:T,selectedStac:R,selectedItem:M}=cl(hl());Cp.value=_.value,e.enableCompare&&(bp.value=y.value),e.enableCompare&&(Hd(y,T,Sp,Nh,p,_,!1),Kd(_0,h)),Hd(_,R,_0,Nh,g,y,e.zoomToExtent,M)}),Kd(_0,c);const b=Vn(()=>({visibility:c.value.length?"visible":"hidden"})),v=Vn(()=>({visibility:h.value.length?"visible":"hidden"})),w=T=>{const R=T==="main"?c:h,M=T=="main"?wp:Tp;return I=>{const F=JSON.parse(Ep.render(JSON.stringify(R.value),{...M.value??{}})),A=F==null?void 0:F.find(O=>O.id===I.key);if(A)return typeof I.value=="object"&&(I.value=JSON.stringify(I.value)),isNaN(Number(I.value))||(I.value=Number(I.value).toFixed(4).toString()),{key:A.title||A.id,value:I.value+" "+(A.appendix||"")}}};return(T,R)=>(x0(),y0("span",null,[Ar("eox-map-compare",{class:"fill-height fill-width overflow-none",".enabled":C.value},[Ar("eox-map",{class:"fill-height fill-width overflow-none",slot:"first",ref_key:"eoxMap",ref:_,id:"main",".animationOptions":m,".center":xt(d),".zoom":xt(f),".layers":g.value,".controls":u.value},[Ar("eox-map-tooltip",{style:la(b.value),".propertyTransform":w("main")},null,44,YE)],40,ZE),Ar("eox-map",{class:"fill-height fill-width overflow-none",id:"compare",slot:"second",ref_key:"compareMap",ref:y,".layers":p.value},[Ar("eox-map-tooltip",{style:la(v.value),".propertyTransform":w("compare")},null,44,HE)],40,$E)],40,WE),r.enableCursorCoordinates?(x0(),y0("div",KE,null,512)):C0("v-if",!0),r.enableScaleLine?(x0(),y0("span",qE,null,512)):C0("v-if",!0),Ar("div",{class:"map-buttons-container",style:la(`margin: ${r.btnsPosition.gap}px 0 ${r.btnsPosition.gap}px 0`)},[C0(" prettier-ignore "),Ap(Ip,{style:la({gridColumn:xt(jn)||xt(Xn)?n.value:"12",gridRow:s.value}),exportMap:xt(jn)||xt(Xn)?o.value.exportMap:!1,changeProjection:xt(jn)||xt(Xn)?o.value.changeProjection:!1,compareIndicators:xt(jn)||xt(Xn)?o.value.compareIndicators:!1,backToPOIs:xt(jn)||xt(Xn)?o.value.backToPOIs:!1,enableSearch:xt(jn)||xt(Xn)?o.value.enableSearch:!1,enableZoom:xt(jn)||xt(Xn)?o.value.enableZoom:!1},null,8,["style","exportMap","changeProjection","compareIndicators","backToPOIs","enableSearch","enableZoom"])],4)]))}},Uw=yp(JE,[["styles",[VE]],["__scopeId","data-v-9484a41e"]]);export{Uw as default};
