import{u as _,i as w}from"./mosaic-W63c_YJi.BtU9UVDl.js";import{_ as L,a as h,s as O,d as S,h as y,f as k,j as R}from"./eo-dash.BnetSjM5.js";import"./main.CTSJP7ya.js";import"./main.DAB_BN6x.js";import{c as B}from"./create-layers-config-QSFjP0Nx._JKQ3EKJ.js";import{c as p,e as u,h as D,o as f,j as m,k as l}from"./framework.DGE5n9zZ.js";import"./item.Bx-rtsOD.js";import"./commonjsHelpers.BosuxZz1.js";import"./mdi.OesDjHvT.js";import"./addCommonStyleSheet.Eo9AKn5H.js";import"./dayjs.min.Ba62AOpW.js";import"./when.BR7zwNJC.js";import"./map.DiiNQ3pp.js";import"./toolcool-range-slider.min.BBXDELo7.js";import"./getElement.CdRlZPdn.js";import"./index.BIJR-IiI.js";import"./index.BUIxO2d3.js";import"./static.BpBlRP_A.js";import"./repeat.Dvgq-LFK.js";import"./directive.CvdRHFdJ.js";import"./directive-helpers.BLRfA-hx.js";import"./unsafe-html.BCd3Zmpq.js";import"./orient2d.DArCjZZA.js";import"./index.CxojoGlr.js";const T="eox-itemfilter[data-v-787cbc12]{--inline-container-height: 40px}",C=[".for",".animate",".initDate"],b={class:"d-flex g-10 align-center"},j=[".filters"],A={__name:"EodashTimeSlider",props:{filters:{type:Array,default:()=>[]},animate:{type:Boolean,default:!0},useMosaic:{type:Boolean,default:!1}},setup(r){const d=r,a=h(),v=D(()=>k.some(e=>{var i,s;const t=(i=e.collectionStac)==null?void 0:i.links.filter(n=>n.rel==="item"),o=(s=e.collectionStac)==null?void 0:s.links.some(n=>n.rel==="items");return t&&t.length>1||o}));d.useMosaic&&a.mosaicEndpoint&&_(a.mosaicEndpoint,void 0,a);const E=async e=>{const{date:t}=e.detail,[o,i]=t;if(!d.useMosaic||!a.mosaicEndpoint){S.value=o.toISOString();return}w(a.mosaicEndpoint,{timeRange:[o.toISOString(),i.toISOString()],collection:R.value})},{selectedStac:I}=O(h()),M=async e=>{const{generate:t,selectedRangeItems:o}=e.detail,i=await Promise.all(Object.values(o).flatMap(async s=>{const n=[];for(const x of s)await B(I.value,k,x.originalDate).then(c=>{c=g(c),n.push({layers:c,date:x.originalDate})});return n})).then(s=>s.flat());t({mapLayers:i})};function g(e){return e.map(t=>t.type==="Group"?(t.layers=g(t.layers),t):(t.source&&(t.source.crossOrigin="anonymous"),t))}return(e,t)=>v.value?(f(),p("eox-timecontrol",{key:l(l(y)),ref:"eoxTimecontrol",".for":l(y),onSelect:E,titleKey:"title",".externalMapRendering":!0,".animate":r.animate,".initDate":l(S)},[m("div",b,[t[0]||(t[0]=m("eox-timecontrol-date",{class:"flex-grow-1"},null,-1)),m("eox-timecontrol-picker",{".range":!1,".showDots":!0,".showItems":!0,".popup":!0},null,32),r.filters.length?(f(),p("eox-itemfilter",{key:0,".inlineMode":!0,showResults:!1,".filters":l(r.filters)},null,40,j)):u("v-if",!0),r.animate?(f(),p("eox-timecontrol-timelapse",{key:1,onExport:M},null,32)):u("v-if",!0)]),t[1]||(t[1]=m("eox-timecontrol-timeline",{class:"mt-2"},null,-1))],40,C)):u("v-if",!0)}},at=L(A,[["styles",[T]],["__scopeId","data-v-787cbc12"]]);export{at as default};
