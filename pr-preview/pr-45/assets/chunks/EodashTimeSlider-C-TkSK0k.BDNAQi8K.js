import{u as M,i as w}from"./mosaic-CKPeN3Vy.Dh9ua2FV.js";import{_ as L,a as d,f as g,s as O,d as x,m as S,i as R}from"./eo-dash.BrAFMXsE.js";import"./main.DjPUOu_N.js";import"./main.CGnxTKrU.js";import{c as B}from"./create-layers-config-UGVCBNr2.DgvMwI7b.js";import{h as D,c as h,e as y,o as _,j as a,k as l}from"./framework.CdhR1Bap.js";import"./item.Bx-rtsOD.js";import"./commonjsHelpers.BosuxZz1.js";import"./mdi.CilvuGMU.js";import"./addCommonStyleSheet.YyUQWdJ3.js";import"./dayjs.min.Ba62AOpW.js";import"./when.BR7zwNJC.js";import"./map.DiiNQ3pp.js";import"./toolcool-range-slider.min.BBXDELo7.js";import"./getElement.CdRlZPdn.js";import"./index.BIJR-IiI.js";import"./index.BUIxO2d3.js";import"./static.u74jguK5.js";import"./repeat.CdwF2R1x.js";import"./directive.CvdRHFdJ.js";import"./directive-helpers.BSlwyRmE.js";import"./unsafe-html.vfgftS71.js";import"./orient2d.DArCjZZA.js";import"./index.CxojoGlr.js";const T="eox-itemfilter[data-v-62a54ce7]{--inline-container-height: 40px}",C=[".for",".initDate"],A={class:"d-flex g-10 align-center"},j=[".filters"],N={__name:"EodashTimeSlider",props:{filters:{type:Array,default:()=>[]},animate:{type:Boolean,default:!0},useMosaic:{type:Boolean,default:!1}},setup(m){const p=m,r=d(),k=D(()=>g.some(e=>{var i,s;const t=(i=e.collectionStac)==null?void 0:i.links.filter(n=>n.rel==="item"),o=(s=e.collectionStac)==null?void 0:s.links.some(n=>n.rel==="items");return t&&t.length>1||o}));p.useMosaic&&r.mosaicEndpoint&&M(r.mosaicEndpoint,void 0,r);const v=async e=>{const{date:t}=e.detail,[o,i]=t;if(!p.useMosaic||!r.mosaicEndpoint){x.value=o.toISOString();return}w(r.mosaicEndpoint,{timeRange:[o.toISOString(),i.toISOString()],collection:R.value})},{selectedStac:E}=O(d()),I=async e=>{const{generate:t,selectedRangeItems:o}=e.detail,i=await Promise.all(Object.values(o).flatMap(async s=>{const n=[];for(const f of s)await B(E.value,g,f.originalDate).then(c=>{c=u(c),n.push({layers:c,date:f.originalDate})});return n})).then(s=>s.flat());t({mapLayers:i})};function u(e){return e.map(t=>t.type==="Group"?(t.layers=u(t.layers),t):(t.source&&(t.source.crossOrigin="anonymous"),t))}return(e,t)=>k.value?(_(),h("eox-timecontrol",{key:l(l(S)),ref:"eoxTimecontrol",".for":l(S),onSelect:v,titleKey:"title",".externalMapRendering":!0,".animate":!0,".initDate":l(x)},[a("div",A,[t[0]||(t[0]=a("eox-timecontrol-date",{class:"flex-grow-1"},null,-1)),a("eox-timecontrol-picker",{".range":!1,".showDots":!0,".showItems":!0,".popup":!0},null,32),m.filters.length?(_(),h("eox-itemfilter",{key:0,".inlineMode":!0,showResults:!1,".filters":l(m.filters)},null,40,j)):y("v-if",!0),a("eox-timecontrol-timelapse",{onExport:I},null,32)]),t[1]||(t[1]=a("eox-timecontrol-timeline",{class:"mt-2"},null,-1))],40,C)):y("v-if",!0)}},at=L(N,[["styles",[T]],["__scopeId","data-v-62a54ce7"]]);export{at as default};
