var ie=Object.defineProperty;var J=o=>{throw TypeError(o)};var ne=(o,e,t)=>e in o?ie(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var q=(o,e,t)=>ne(o,typeof e!="symbol"?e+"":e,t),K=(o,e,t)=>e.has(o)||J("Cannot "+t);var C=(o,e,t)=>(K(o,e,"read from private field"),t?t.call(o):e.get(o)),w=(o,e,t)=>e.has(o)?J("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),P=(o,e,t,n)=>(K(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t),T=(o,e,t)=>(K(o,e,"access private method"),t);import{a as i,b}from"./lit-element.CBn2YVps.js";import{P as PointerInteraction,W as primaryAction,X as altKeyOnly,Y as singleClick,e as always,f as MapBrowserEventType,i as never,j as createEditingStyle,_ as MouseWheelZoom,$ as DragPan,a0 as platformModifierKeyOnly,T as TileLayer,a1 as Interaction,S as Style,d as Stroke,a2 as EventType$1,M as Map,V as View,a3 as ViewProperty,F as Fill,a4 as Attribution,a5 as Rotate,a6 as Zoom,a7 as defaults}from"./Tile.6y57umDW.js";import{E as EventType,Y as ObjectEventType,v as boundingExtent,aD as createOrUpdateFromCoordinate,i as Point,U as getUid,bi as equals,o as distance,w as fromUserCoordinate,bj as closestOnSegment,bk as toUserCoordinate,aL as fromUserExtent,be as toUserExtent,ac as buffer,B as squaredDistance,b4 as equals$1,D as BaseEvent,bl as squaredDistanceToSegment,g as get,a0 as transform,bh as getLength,P as Polygon,bg as getArea,f as fromLonLat,ae as BaseObject,u as unlistenByKey,l as listen,$ as containsExtent,e as extend,a2 as isEmpty,ab as createEmpty,bm as getArea$1,a3 as getWidth,A as getTopLeft,bn as getPointResolution,bo as METERS_PER_UNIT,bp as stopPropagation,q as clamp,V as equals$2,y as getBottomRight,bq as scaleFromCenter,br as fromExtent,bs as listenOnce,bc as getTransformFromProjections,bt as identityTransform,aX as wrapX,aP as toRadians,bu as circular}from"./Polygon.DGYqraVP.js";import{R as READ_FEATURES_OPTIONS,K as KML,T as TopoJSON,r as register,f as fromEPSGCode,V as VectorTileLayer,I as ImageLayer,W as WMTS,a as VectorTile,M as MVT}from"./VectorTile.DZ5xBqhQ.js";import{G as GeoJSON}from"./GeoJSON.ef13uw5_.js";import{F as Feature,L as LineString,R as RenderFeature}from"./Feature.DysECzI9.js";import{p as proj4}from"./index.Du0sVlOV.js";import{s as serialize,F as FullScreen,g as getLayerById,b as transform$1,t as transformExtent,e as enableGlobe,d as disableGlobe,f as getFlatLayersArray}from"./openglobus.Bj2TJtFQ.js";import{V as VectorLayer}from"./Vector.D46tU5Ox.js";import{a as CollectionEventType,C as Collection,i as calculateSourceResolution,o as decode,F as CLASS_SELECTABLE,G as removeChildren,H as MapEventType,J as outerWidth,K as outerHeight,L as LayerGroup,X as XYZ,N as TileSource,f as createXYZ,b as Control,c as CLASS_UNSELECTABLE,d as CLASS_CONTROL,O as easeOut,P as CLASS_COLLAPSED,M as MapProperty,r as replaceNode}from"./XYZ.CBnrgZcO.js";import{I as ImageSource,d as defaultImageLoadFunction,g as getFeatureInfoUrl,a as getLegendUrl,c as createLoader,T as TileWMS,O as OSM}from"./TileWMS.WLH7jDCi.js";import{R as RBush,V as VectorSource,a as VectorEventType}from"./Vector.CxtA94XM.js";import{g as getTraceTargetUpdate,a as getTraceTargets,b as getCoordinate,c as createBox,D as Draw}from"./Draw.DZWLYUPi.js";import{W as WMTSTileGrid}from"./WMTS.BG7VVEPS.js";import{g as getElement}from"./getElement.CdRlZPdn.js";import{e as eoxStyle,a as addCommonStylesheet}from"./addCommonStyleSheet.BIzSfp-c.js";import"./GeometryCollection.Qs93AaYQ.js";import"./og.es.BUTD8K8h.js";import"./commonjsHelpers.BosuxZz1.js";const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function getCoordinatesArray(o,e,t){let n;switch(e){case"LineString":n=o;break;case"MultiLineString":case"Polygon":n=o[t[0]];break;case"MultiPolygon":n=o[t[1]][t[0]];break}return n}class ModifyEvent extends BaseEvent{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class Modify extends PointerInteraction{constructor(e){if(super(e),this.handleSourceAdd_=this.handleSourceAdd_.bind(this),this.handleSourceRemove_=this.handleSourceRemove_.bind(this),this.handleExternalCollectionAdd_=this.handleExternalCollectionAdd_.bind(this),this.handleExternalCollectionRemove_=this.handleExternalCollectionRemove_.bind(this),this.handleFeatureChange_=this.handleFeatureChange_.bind(this),this.on,this.once,this.un,this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(n){return altKeyOnly(n)&&singleClick(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null,this.filterFunctionWasSupplied_=e.filter!=null,this.filter_=e.filter?e.filter:()=>!0,!(e.features||e.source))throw new Error("The modify interaction requires features collection or a source");let t;e.features?(t=e.features.getArray(),e.features.addEventListener(CollectionEventType.ADD,this.handleExternalCollectionAdd_),e.features.addEventListener(CollectionEventType.REMOVE,this.handleExternalCollectionRemove_),this.featuresCollection_=e.features):e.source&&(t=e.source.getFeatures(),e.source.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_),e.source.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_),this.source_=e.source),t.forEach(n=>{n.addEventListener(EventType.CHANGE,this.handleFeatureChange_),this.filterFunctionWasSupplied_&&n.addEventListener(ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_)}),e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=[],t.filter(this.filter_).forEach(n=>this.addFeature_(n)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let t;e?e===!0?t=always:t=e:t=never,this.traceCondition_=t}addFeature_(e){this.features_.push(e);const t=e.getGeometry();if(t){const a=this.SEGMENT_WRITERS_[t.getType()];a&&a(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const n=this.featuresBeingModified_.getArray();for(let a=0,s=t.length;a<s;++a){const l=t[a].feature;l&&!n.includes(l)&&this.featuresBeingModified_.push(l)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){const t=this.features_.indexOf(e);this.features_.splice(t,1),this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.length===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(a){e===a.feature&&n.push(a)});for(let a=n.length-1;a>=0;--a){const s=n[a];for(let l=this.dragSegments_.length-1;l>=0;--l)this.dragSegments_[l][0]===s&&this.dragSegments_.splice(l,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){const t=e.feature;t&&this.externalAddFeatureHandler_(t)}handleSourceRemove_(e){const t=e.feature;t&&this.externalRemoveFeatureHandler_(t)}handleExternalCollectionAdd_(e){const t=e.element;t&&this.externalAddFeatureHandler_(t)}handleExternalCollectionRemove_(e){const t=e.element;t&&this.externalRemoveFeatureHandler_(t)}externalAddFeatureHandler_(e){e.addEventListener(EventType.CHANGE,this.handleFeatureChange_),this.filterFunctionWasSupplied_&&e.addEventListener(ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_),this.filter_(e)&&this.addFeature_(e)}externalRemoveFeatureHandler_(e){e.removeEventListener(EventType.CHANGE,this.handleFeatureChange_),this.filterFunctionWasSupplied_&&e.removeEventListener(ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_),this.removeFeature_(e)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.filter_(t)&&this.addFeature_(t)}}writePointGeometry_(e,t){const n=t.getCoordinates(),a={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),a)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let a=0,s=n.length;a<s;++a){const l=n[a],c={feature:e,geometry:t,depth:[a],index:a,segment:[l,l]};this.rBush_.insert(t.getExtent(),c)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let a=0,s=n.length-1;a<s;++a){const l=n.slice(a,a+2),c={feature:e,geometry:t,index:a,segment:l};this.rBush_.insert(boundingExtent(l),c)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let a=0,s=n.length;a<s;++a){const l=n[a];for(let c=0,h=l.length-1;c<h;++c){const u=l.slice(c,c+2),d={feature:e,geometry:t,depth:[a],index:c,segment:u};this.rBush_.insert(boundingExtent(u),d)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let a=0,s=n.length;a<s;++a){const l=n[a];for(let c=0,h=l.length-1;c<h;++c){const u=l.slice(c,c+2),d={feature:e,geometry:t,depth:[a],index:c,segment:u};this.rBush_.insert(boundingExtent(u),d)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let a=0,s=n.length;a<s;++a){const l=n[a];for(let c=0,h=l.length;c<h;++c){const u=l[c];for(let d=0,p=u.length-1;d<p;++d){const g=u.slice(d,d+2),m={feature:e,geometry:t,depth:[c,a],index:d,segment:g};this.rBush_.insert(boundingExtent(g),m)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),a={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[n,n]},s={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[n,n]},l=[a,s];a.featureSegments=l,s.featureSegments=l,this.rBush_.insert(createOrUpdateFromCoordinate(n),a);let c=t;this.rBush_.insert(c.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let a=0;a<n.length;++a){const s=n[a],l=this.SEGMENT_WRITERS_[s.getType()];l(e,s)}}createOrUpdateVertexFeature_(e,t,n,a){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new Feature(new Point(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",n),s.set("existing",a),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;this.getMap().getView().getProjection();const n=[],a=this.vertexFeature_.getGeometry().getCoordinates(),s=boundingExtent([a]),l=this.rBush_.getInExtent(s),c={};l.sort(compareIndexes);for(let h=0,u=l.length;h<u;++h){const d=l[h],p=d.segment;let g=getUid(d.geometry);const m=d.depth;if(m&&(g+="-"+m.join("-")),c[g]||(c[g]=new Array(2)),d.geometry.getType()==="Circle"&&d.index===CIRCLE_CIRCUMFERENCE_INDEX){const f=closestOnSegmentData(e,d);equals(f,a)&&!c[g][0]&&(this.dragSegments_.push([d,0]),c[g][0]=d);continue}if(equals(p[0],a)&&!c[g][0]){this.dragSegments_.push([d,0]),c[g][0]=d;continue}if(equals(p[1],a)&&!c[g][1]){if(c[g][0]&&c[g][0].index===0){let f=d.geometry.getCoordinates();switch(d.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":f=f[m[1]];case"Polygon":if(d.index!==f[m[0]].length-2)continue;break}}this.dragSegments_.push([d,1]),c[g][1]=d;continue}getUid(p)in this.vertexSegments_&&!c[g][0]&&!c[g][1]&&n.push(d)}return n}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){const t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){const s=e.map.getPixelFromCoordinate(t.startCoord);if(distance(s,e.pixel)<this.pixelTolerance_)return}const n=getTraceTargetUpdate(e.coordinate,t,e.map,this.pixelTolerance_);if(t.targetIndex===-1&&Math.sqrt(n.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}else for(const l of this.traceSegments_){const c=l[0],h=c.geometry,u=l[1],d=h.getCoordinates();getCoordinatesArray(d,h.getType(),c.depth).splice(c.index+u,1),h.setCoordinates(d),u===0&&(c.index-=1)}const s=t.targets[n.index];this.addTracedCoordinates_(s,s.startIndex,n.endIndex)}else{const s=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(s,n.endIndex)}t.targetIndex=n.index;const a=t.targets[t.targetIndex];a.endIndex=n.endIndex}getTraceCandidates_(e){const t=this.getMap(),n=this.pixelTolerance_,a=t.getCoordinateFromPixel([e.pixel[0]-n,e.pixel[1]+n]),s=t.getCoordinateFromPixel([e.pixel[0]+n,e.pixel[1]-n]),l=boundingExtent([a,s]);return this.traceSource_.getFeaturesInExtent(l)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}const t=this.getTraceCandidates_(e);if(t.length===0)return;const n=getTraceTargets(e.coordinate,t);n.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:n,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,a=e.startIndex<=t;n===a?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const a=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),n=s-a+1}else{const a=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),n=a-s+1}if(n>0)for(const a of this.traceSegments_){const s=a[0],l=s.geometry,c=a[1];let h=a[0].index+1;c===1&&(h-=n);const u=l.getCoordinates();getCoordinatesArray(u,l.getType(),s.depth).splice(h,n),l.setCoordinates(u),c===1&&(s.index-=n)}}addTracedCoordinates_(e,t,n){if(t===n)return;const a=[];if(t<n){const s=Math.ceil(t);let l=Math.floor(n);l===n&&(l-=1);for(let c=s;c<=l;++c)a.push(getCoordinate(e.coordinates,c))}else{const s=Math.floor(t);let l=Math.ceil(n);l===n&&(l+=1);for(let c=s;c>=l;--c)a.push(getCoordinate(e.coordinates,c))}if(a.length)for(const s of this.traceSegments_){const l=s[0],c=l.geometry,h=s[1],u=l.index+1;h===0&&a.reverse();const d=c.getCoordinates();getCoordinatesArray(d,c.getType(),l.depth).splice(u,0,...a),c.setCoordinates(d),h===1&&(l.index+=a.length)}}updateGeometry_(e,t){const n=t[0],a=n.depth;let s;const l=n.segment,c=n.geometry,h=t[1];for(;e.length<c.getStride();)e.push(l[h][e.length]);switch(c.getType()){case"Point":s=e,l[0]=e,l[1]=e;break;case"MultiPoint":s=c.getCoordinates(),s[n.index]=e,l[0]=e,l[1]=e;break;case"LineString":s=c.getCoordinates(),s[n.index+h]=e,l[h]=e;break;case"MultiLineString":s=c.getCoordinates(),s[a[0]][n.index+h]=e,l[h]=e;break;case"Polygon":{s=c.getCoordinates();const d=s[a[0]],p=n.index+h;d[p][0]===e[0]&&d[p][1]===e[1]?s=null:(d[p]=e,p===0?d[d.length-1]=e:p===d.length-1&&(d[0]=e)),l[h]=e;break}case"MultiPolygon":{s=c.getCoordinates();const d=s[a[1]][a[0]],p=n.index+h;d[p][0]===e[0]&&d[p][1]===e[1]?s=null:(d[p]=e,p===0?d[d.length-1]=e:p===d.length-1&&(d[0]=e)),l[h]=e;break}case"Circle":const u=c;if(l[0]=e,l[1]=e,n.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,u.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,this.getMap().getView().getProjection();let d=distance(fromUserCoordinate(u.getCenter()),fromUserCoordinate(e));u.setRadius(d),this.changingFeature_=!1}break}s&&this.setGeometryCoordinates_(c,s)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([l])=>l));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],a=[],s=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(s){this.traceSegments_=[];for(const l of this.dragSegments_){const c=l[0];distance(closestOnSegment(s,c.segment),s)/e.map.getView().getResolution()<1&&this.traceSegments_.push(l)}}for(let l=0,c=this.dragSegments_.length;l<c;++l){const h=this.dragSegments_[l],u=h[0],d=u.feature;n.includes(d)||n.push(d);const p=u.geometry;a.includes(p)||a.push(p),this.updateGeometry_(t,h)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(t,n,a,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,n=this.findInsertVerticesAndUpdateDragSegments_(t);if(n!=null&&n.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,n),this.vertexFeature_)){const a=this.vertexFeature_.getGeometry().getCoordinates();for(let s=n.length-1;s>=0;--s)this.insertVertex_(n[s],a);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],a=n.geometry;if(a.getType()==="Circle"){const s=a,l=s.getCenter(),c=n.featureSegments[0],h=n.featureSegments[1];c.segment[0]=l,c.segment[1]=l,h.segment[0]=l,h.segment[1]=l,this.rBush_.update(createOrUpdateFromCoordinate(l),c);let u=s;this.rBush_.update(u.getExtent(),h)}else this.rBush_.update(boundingExtent(n.segment),n)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){const t=this.getMap(),n=t.getPixelFromCoordinate(e);t.getView().getProjection();const a=function(c,h){return projectedDistanceToSegmentDataSquared(e,c)-projectedDistanceToSegmentDataSquared(e,h)};let s,l;if(this.hitDetection_){const c=typeof this.hitDetection_=="object"?h=>h===this.hitDetection_:void 0;t.forEachFeatureAtPixel(n,(h,u,d)=>{d&&d.getType()==="Point"&&(d=new Point(toUserCoordinate(d.getCoordinates())));const p=d||h.getGeometry();if(p&&p.getType()==="Point"&&h instanceof Feature&&this.features_.includes(h)){l=p;const g=h.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:h,geometry:l,segment:[g,g]}]}return!0},{layerFilter:c})}if(!s){const c=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),h=t.getView().getResolution()*this.pixelTolerance_,u=toUserExtent(buffer(c,h,tempExtent));s=this.rBush_.getInExtent(u)}if(s&&s.length>0){const c=s.sort(a)[0],h=c.segment;let u=closestOnSegmentData(e,c);const d=t.getPixelFromCoordinate(u);let p=distance(n,d);if(l||p<=this.pixelTolerance_){const g={};if(g[getUid(h)]=!0,this.snapToPointer_||(this.delta_[0]=u[0]-e[0],this.delta_[1]=u[1]-e[1]),c.geometry.getType()==="Circle"&&c.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u,[c.feature],[c.geometry],this.snappedToVertex_);else{const m=t.getPixelFromCoordinate(h[0]),f=t.getPixelFromCoordinate(h[1]),_=squaredDistance(d,m),v=squaredDistance(d,f);if(p=Math.sqrt(Math.min(_,v)),this.snappedToVertex_=p<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(u=_>v?h[1]:h[0]),this.createOrUpdateVertexFeature_(u,[c.feature],[c.geometry],this.snappedToVertex_);const y={};y[getUid(c.geometry)]=!0;for(let x=1,E=s.length;x<E;++x){const L=s[x].segment;if(equals(h[0],L[0])&&equals(h[1],L[1])||equals(h[0],L[1])&&equals(h[1],L[0])){const M=getUid(s[x].geometry);M in y||(y[M]=!0,g[getUid(L)]=!0)}else break}}this.vertexSegments_=g;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,a=e.feature,s=e.geometry,l=e.depth,c=e.index;let h;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":h=s.getCoordinates(),h[l[0]].splice(c+1,0,t);break;case"Polygon":h=s.getCoordinates(),h[l[0]].splice(c+1,0,t);break;case"MultiPolygon":h=s.getCoordinates(),h[l[1]][l[0]].splice(c+1,0,t);break;case"LineString":h=s.getCoordinates(),h.splice(c+1,0,t);break;default:return!1}this.setGeometryCoordinates_(s,h);const u=this.rBush_;u.remove(e),this.updateSegmentIndices_(s,c,l,1);const d={segment:[n[0],t],feature:a,geometry:s,depth:l,index:c};u.insert(boundingExtent(d.segment),d),this.dragSegments_.push([d,1]);const p={segment:[t,n[1]],feature:a,geometry:s,depth:l,index:c+1};return u.insert(boundingExtent(p.segment),p),this.dragSegments_.push([p,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(n=>n.getType()==="Circle"||n.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:n})=>equals(n[0],e)||equals(n[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([a])=>a));const n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,n}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,a,s,l,c,h,u,d,p,g,m,f;for(h=e.length-1;h>=0;--h)l=e[h],m=l[0],f=getUid(m.feature),m.depth&&(f+="-"+m.depth.join("-")),f in t||(t[f]={}),l[1]===0?(t[f].right=m,t[f].index=m.index):l[1]==1&&(t[f].left=m,t[f].index=m.index+1);for(f in t){switch(g=t[f].right,d=t[f].left,u=t[f].index,p=u-1,d!==void 0?m=d:m=g,p<0&&(p=0),c=m.geometry,s=c.getCoordinates(),a=s,n=!1,c.getType()){case"MultiLineString":s[m.depth[0]].length>2&&(s[m.depth[0]].splice(u,1),n=!0);break;case"LineString":s.length>2&&(s.splice(u,1),n=!0);break;case"MultiPolygon":a=a[m.depth[1]];case"Polygon":a=a[m.depth[0]],a.length>4&&(u==a.length-1&&(u=0),a.splice(u,1),n=!0,u===0&&(a.pop(),a.push(a[0]),p=a.length-1));break}if(n){this.setGeometryCoordinates_(c,s);const _=[];if(d!==void 0&&(this.rBush_.remove(d),_.push(d.segment[0])),g!==void 0&&(this.rBush_.remove(g),_.push(g.segment[1])),d!==void 0&&g!==void 0){const v={depth:m.depth,feature:m.feature,geometry:m.geometry,index:p,segment:_};this.rBush_.insert(boundingExtent(v.segment),v)}this.updateSegmentIndices_(c,u,m.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(n=>n.getType()==="Circle"||n.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:n})=>!(equals(n[0],e)||equals(n[1],e)))}insertPoint(e){var a;const t=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(a=this.vertexFeature_)==null?void 0:a.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((s,l)=>s||this.insertVertex_(l,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,a){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(n===void 0||s.depth===void 0||equals$1(s.depth,n))&&s.index>t&&(s.index+=a)})}disposeInternal(){if(super.disposeInternal(),this.featuresCollection_){this.featuresCollection_.removeEventListener(CollectionEventType.ADD,this.handleExternalCollectionAdd_),this.featuresCollection_.removeEventListener(CollectionEventType.REMOVE,this.handleExternalCollectionRemove_);for(const e of this.featuresCollection_.getArray())e.removeEventListener(EventType.CHANGE,this.handleFeatureChange_),this.filterFunctionWasSupplied_&&e.removeEventListener(ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_)}else if(this.source_){this.source_.removeEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_),this.source_.removeEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_);for(const e of this.source_.getFeatures())e.removeEventListener(EventType.CHANGE,this.handleFeatureChange_),this.filterFunctionWasSupplied_&&e.removeEventListener(ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_)}}}function compareIndexes(o,e){return o.index-e.index}function projectedDistanceToSegmentDataSquared(o,e,t){const n=e.geometry;if(n.getType()==="Circle"){let s=n;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const l=squaredDistance(s.getCenter(),fromUserCoordinate(o)),c=Math.sqrt(l)-s.getRadius();return c*c}}const a=fromUserCoordinate(o);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(a,tempSegment)}function closestOnSegmentData(o,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(n.getClosestPoint(fromUserCoordinate(o)));const a=fromUserCoordinate(o);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(a,tempSegment))}function getDefaultStyleFunction(){const o=createEditingStyle();return function(e,t){return o.Point}}class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy_=e.referrerPolicy,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,n,a){const s=get(n),l=this.getProjection();l&&l!==s&&(t=calculateSourceResolution(l,s,e,t),e=transform(e,s,l));const c={url:this.url_,params:{...this.params_,...a},projection:l||s};return getFeatureInfoUrl(c,e,t)}getLegendUrl(e,t){return getLegendUrl({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,n,a){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==a)&&(this.loaderProjection_=a,this.loader=createLoader({crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_,params:this.params_,projection:a,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,l)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,l),decode(s))})),super.getImageInternal(e,t,n,a))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.loader=null,this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const olCss=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.ol-overviewmap .ol-viewport:hover{cursor:pointer}',controlCss='.geolocation{top:85px;left:.5em}.geolocation button{background:var(--primary);color:var(--on-primary)}.geolocation button>svg{fill:var(--on-primary);min-inline-size:1.25rem!important;max-inline-size:1.25rem!important;min-block-size:1.25rem!important;max-block-size:1.25rem!important}.ol-touch.geolocation{top:100px}.loading-indicator{position:absolute;pointer-events:none!important;display:flex;align-items:center;justify-content:center;background-color:#0000}.loading-indicator.small{bottom:.5em;left:.5em;width:30px;height:30px}.loading-indicator.fullscreen{width:100%;height:100%}.disabled{filter:brightness(1.7);pointer-events:none}.ol-unselectable{pointer-events:none}.ol-control{background:none;z-index:1}.ol-control button,.ol-control button:hover,.ol-control button:focus{--_round: 32px;border-radius:var(--_round);background:var(--primary);color:var(--on-primary);width:32px;height:32px;cursor:pointer;border:none;outline:none;pointer-events:all;position:relative;font-size:1rem}.ol-control button:hover:after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear;content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%)}.ol-control button.ol-zoom-in,.ol-control button.ol-zoom-in:hover{border-top-left-radius:var(--_round);border-top-right-radius:var(--_round);border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;margin-bottom:.125rem}.ol-control button.ol-zoom-out,.ol-control button.ol-zoom-out:hover{border-top-left-radius:.5rem;border-top-right-radius:.5rem;border-bottom-left-radius:var(--_round);border-bottom-right-radius:var(--_round)}.globe-switcher-container{--fs-offset: 0em;--rotate-offset: 0em;top:calc(.5em + var(--fs-offset) + var(--rotate-offset));right:.5em}.ol-rotate{--fullscreen-offset: 0em;top:calc(.5em + var(--fullscreen-offset))}:has(.ol-full-screen) .ol-rotate{--fullscreen-offset: 2.5em}:has(.ol-full-screen) .globe-switcher-container{--fs-offset: 2.5em}:has(.ol-rotate) .globe-switcher-container{--rotate-offset: 2.5em}:has(.ol-hidden) .globe-switcher-container{--rotate-offset: 0em}';/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const r=(o,e,t)=>{for(const n of e)if(n[0]===o)return(0,n[1])();return t==null?void 0:t()};var $,Q;class EOxMapCompare extends i{constructor(){super();w(this,$);this.value=50,this.enabled="true"}static get properties(){return{value:{attribute:"value",type:Number},enabled:{attribute:"enabled",type:String}}}render(){return b`
      <style>
        :host {
          display: block;
          --thumb-size: 3rem;
        }
        .eox-map-compare {
          --thumb-bgc: #fff;
          --thumb-w: var(--thumb-size);

          position: relative;
          height: 100%;
        }
        .eox-map-compare::after {
          content: "";
          display: block;
        }
        .eox-map-compare__first,
        .eox-map-compare__second {
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          width: 100%;
        }
        .eox-map-compare__first {
          clip-path: polygon(
            0% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            0% 100%
          );
        }
        .eox-map-compare__second {
          clip-path: polygon(
            100% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            100% 100%
          );
        }
        .eox-map-compare__range {
          background-color: transparent;
          box-sizing: border-box;
          font-family: inherit;
          height: 100%;
          margin: 0;
          outline: none;
          position: absolute;
          top: 0;
          width: 100%;
          pointer-events: none;
        }
        .eox-map-compare__range::-moz-range-thumb {
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          background: transparent;
          border: none;
        }
        .eox-map-compare__range::-webkit-slider-thumb {
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          position: relative;
          background: transparent;
          border: none;
        }
        .eox-map-compare__range::-moz-range-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
        }
        .eox-map-compare__range::-webkit-slider-runnable-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
          height: 100%;
        }
        .eox-map-compare__range,
        .eox-map-compare__range::-webkit-slider-runnable-track,
        .eox-map-compare__range::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
        }
        .slider-bar,
        .slider-thumb {
          position: absolute;
          box-shadow: 0 0.125rem 0.125rem 0 rgb(0 0 0 / 0.32);
        }
        .slider-bar {
          pointer-events: none;
          top: 0;
          width: 0.3rem;
          height: 100%;
          background-color: var(--thumb-bgc);
          z-index: 2;
          left: calc(${this.value}% - 0.15rem);
          -webkit-clip-path: inset(0 -5px 0 -5px);
          clip-path: inset(0 -5px 0 -5px);
        }
        .slider-thumb {
          pointer-events: none;
          top: calc(50% - var(--thumb-size) / 2);
          background: var(--primary);
          z-index: 3;
          width: var(--thumb-size);
          aspect-ratio: 1;
          left: calc(${this.value}% - var(--thumb-size) / 2);
          border-radius: 50%;
          padding: 0.7rem;
          color: var(--on-primary);
          display: flex;
          align-items: center;
          justify-content: center;
          box-sizing: border-box;
        }
        .slider-thumb svg {
          fill: currentColor;
        }
      </style>
      ${r(this.enabled,[["first",()=>b`<slot name="first"></slot>`],["second",()=>b`<slot name="second"></slot>`]],()=>b`
          <div class="eox-map-compare">
            <div class="eox-map-compare__first">
              <slot name="first"></slot>
            </div>
            <div class="eox-map-compare__second">
              <slot name="second"></slot>
            </div>
            <input
              type="range"
              class="eox-map-compare__range"
              min="0"
              max="100"
              value=${this.value}
              @input=${T(this,$,Q)}
            />
            <div class="slider-bar"></div>
            <div class="slider-thumb">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <title>arrow-left-right</title>
                <path
                  d="M6.45,17.45L1,12L6.45,6.55L7.86,7.96L4.83,11H19.17L16.14,7.96L17.55,6.55L23,12L17.55,17.45L16.14,16.04L19.17,13H4.83L7.86,16.04L6.45,17.45Z"
                />
              </svg>
            </div>
          </div>
        `)}
    `}}$=new WeakSet,Q=function(t){this.value=parseInt(t.target.value)};customElements.define("eox-map-compare",EOxMapCompare);function addNewFeature(o,e,t,n=!1,a=!1,s=!0){const l=n?[o.feature]:o.features;a&&e.getSource().clear();const c=e.getSource().getFeatures();if(!e.get("multipleFeatures")&&(c.length||l.length>1))return console.error("Multiple features detected!");l.forEach(d=>{const p=d.getGeometry();if(p instanceof LineString){const m=getLength(p,{radius:6378137,projection:t.projection});d.set("measure",m)}else if(p instanceof Polygon){const m=getArea(p,{radius:6378137,projection:t.projection});d.set("measure",m)}const g=getUid(d);d.set("id",g),d.setId(g)}),!n&&l.length&&(e.getSource().addFeatures(l),t.map.getView().fit(e.getSource().getExtent(),{duration:s?750:0}));const h=new GeoJSON,u=JSON.parse(h.writeFeatures(l,READ_FEATURES_OPTIONS));(n||a)&&dispatchEvt(t,"drawend",o,u),dispatchEvt(t,"addfeatures",o,u)}function dispatchEvt(o,e,t,n){const a=new CustomEvent(e,{detail:{originalEvent:t,geoJSON:n}});o.dispatchEvent(a)}function cancelAnimation(o){o.setRotation(o.getRotation())}function getProj(o,e){const s=o.readFeatures(e)[0].getGeometry().getCoordinates();if(s&&s.length>0){const l=findFirstCoordinateValue(s);if(typeof l=="number")return l>=-180&&l<=180?"EPSG:4326":"EPSG:3857"}}function findFirstCoordinateValue(o){if(typeof o=="number")return o;if(Array.isArray(o)&&o.length>0)return findFirstCoordinateValue(o[0])}function parseTextToFeature(o,e,t,n=!1,a=!0){try{const s=getFormatReader(o);if(!s){console.error("Unsupported format or invalid data");return}const l=getProj(s,o),c=s.readFeatures(o,{dataProjection:l||READ_FEATURES_OPTIONS.dataProjection,featureProjection:t.projection});addNewFeature({features:c},e,t,!1,n,a)}catch(s){console.error("Error parsing data:",s)}}function getFormatReader(o){return isGeoJSON(o)?new GeoJSON:isKML(o)?new KML({extractStyles:!1}):isTopoJSON(o)?new TopoJSON:null}function isGeoJSON(o){try{const e=JSON.parse(o);return e.type==="FeatureCollection"||e.type==="Feature"}catch{return!1}}function isKML(o){return o.includes("<kml")&&o.includes("</kml>")}function isTopoJSON(o){try{const e=JSON.parse(o);return e.type==="Topology"&&e.objects}catch{return!1}}function registerProjection(o,e,t=void 0){proj4.defs(o,e),register(proj4),typeof t<"u"&&get(o).setExtent(t)}async function registerProjectionFromCode(o){return register(proj4),await fromEPSGCode(o)}function parseFeature(o){return new GeoJSON().writeFeaturesObject(o)}function addScrollInteractions(o,e=!1){e?(o.addInteraction(new MouseWheelZoom({condition:platformModifierKeyOnly})),"ontouchstart"in window||navigator.maxTouchPoints>0?o.addInteraction(new DragPan({condition:function(n){return this.getPointerCount()===2||platformModifierKeyOnly(n)}})):o.addInteraction(new DragPan)):(o.addInteraction(new MouseWheelZoom),o.addInteraction(new DragPan))}function removeDefaultScrollInteractions(o){o.getInteractions().getArray().forEach(e=>{(e instanceof MouseWheelZoom||e instanceof DragPan)&&o.removeInteraction(e)})}function coordinatesRoughlyEquals(o,e,t=.001){let n=!0;for(let a=o.length-1;a>=0;--a)if(!numbersRoughlyEquals(o[a],e[a],t)){n=!1;break}return n}function numbersRoughlyEquals(o,e,t=.001){return Math.abs(o-e)<t}function getCenterFromProperty(o){if(o){const e=o;return!equals(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90?fromLonLat(e):e}return[0,0]}function addDraw(o,e,t){const n=Object.assign({},t);if(o.interactions[n.id])throw Error(`Interaction with id: ${n.id} already exists.`);n.modify=typeof n.modify=="boolean"?n.modify:!0;const a=e.getSource();n.type==="Box"&&(n.geometryFunction=createBox(),n.type="Circle");const s=new Draw({...n,source:a});n.active===!1&&s.setActive(!1),s.on("drawend",h=>{e.get("isDrawingEnabled")&&addNewFeature(h,e,o,!0)}),o.map.addInteraction(s),o.interactions[n.id]=s;const l=new Modify({source:a});l.setActive(n.modify),o.map.addInteraction(l),o.interactions[`${n.id}_modify`]=l;const c=()=>{o.getLayerById(e.get("id"))||(o.removeInteraction(n.id),o.removeInteraction(`${n.id}_modify`),o.map.getLayerGroup().un("change",c))};o.map.getLayerGroup().on("change",c)}const Property$1={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$1.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$1.MAP,this.handleMapChanged),this.addChangeListener(Property$1.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$1.POSITION,this.handlePositionChanged),this.addChangeListener(Property$1.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$1.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$1.MAP)||null}getOffset(){return this.get(Property$1.OFFSET)}getPosition(){return this.get(Property$1.POSITION)}getPositioning(){return this.get(Property$1.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$1.ELEMENT,e)}setMap(e){this.set(Property$1.MAP,e)}setOffset(e){this.set(Property$1.OFFSET,e)}setPosition(e){this.set(Property$1.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property$1.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),a=this.getElement(),s=this.getRect(a,[outerWidth(a),outerHeight(a)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!containsExtent(n,s)){const c=s[0]-n[0],h=n[2]-s[2],u=s[1]-n[1],d=n[3]-s[3],p=[0,0];if(c<0?p[0]=c-l:h<0&&(p[0]=Math.abs(h)+l),u<0?p[1]=u-l:d<0&&(p[1]=Math.abs(d)+l),p[0]!==0||p[1]!==0){const g=t.getView().getCenterInternal(),m=t.getPixelFromCoordinateInternal(g);if(!m)return;const f=[m[0]+p[0],m[1]+p[1]],_=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(f),duration:_.duration,easing:_.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),a=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[a,s,a+t[0],s+t[1]]}setPositioning(e){this.set(Property$1.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),a=e.getSize();this.updateRenderedPosition(n,a)}updateRenderedPosition(e,t){const n=this.element.style,a=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=`${e[0]+a[0]}px`,c=`${e[1]+a[1]}px`;let h="0%",u="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?h="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(h="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?u="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(u="-50%");const d=`translate(${h}, ${u}) translate(${l}, ${c})`;this.rendered.transform_!=d&&(this.rendered.transform_=d,n.transform=d)}getOptions(){return this.options}}const basicOlFormats={GeoJSON,MVT},basicOlLayers={Group:LayerGroup,Image:ImageLayer,Tile:TileLayer,Vector:VectorLayer,VectorTile:VectorTileLayer},basicOlSources={ImageWMS,OSM,Tile:TileSource,TileWMS,Vector:VectorSource,VectorTile,WMTS,XYZ};function createLayer(o,e,t=!0){var l;const a={...window.eoxMapAdvancedOlLayers,...basicOlLayers}[e.type];if(!a)throw new Error(`Layer type ${e.type} not supported!`);const s=new a({...e,...e.type!=="MapboxStyle"&&e.source&&{source:createOlSourceFromDefinition(e.source)},...e.type==="Group"&&{layers:[]},...e.properties,style:void 0});if(s.set("_jsonDefinition",e,!0),e.type==="Group"){const c=e.layers.map(h=>createLayer(o,h));c.forEach(h=>h.set("_group",s,!0)),s.setLayers(new Collection(c))}if("style"in e&&s.setStyle(e.style),t&&((l=e.interactions)!=null&&l.length))for(let c=0;c<e.interactions.length;c++){const h=e.interactions[c];addInteraction(o,s,h)}return setSyncListeners(s,e),s}function createOlSourceFromDefinition(o){const t={...window.eoxMapAdvancedOlSources,...basicOlSources}[o.type];if(o&&!t)throw new Error(`Source type ${o.type} not supported!`);const n={...window.eoxMapAdvancedOlFormats,...basicOlFormats},a=generateTileGrid(o);return new t({...o,..."format"in o&&o.type!=="WMTS"&&{format:new n[typeof o.format=="object"?o.format.type:o.format]({...typeof o.format=="object"&&{...o.format}})},..."source"in o&&{source:createOlSourceFromDefinition(o.source)},..."tileGrid"in o&&{tileGrid:a},..."projection"in o&&{projection:get(o.projection)}})}function addInteraction(o,e,t){t.type==="draw"?addDraw(o,e,t.options):t.type==="select"?addSelect(o,e,t.options):t.type==="clusterExplode"&&addClusterExplode(o,e,t.options)}function updateLayer(o,e,t){var s,l,c,h;const n=t.get("_jsonDefinition");if(e.type!==n.type||e.type!=="MapboxStyle"&&((s=e.source)==null?void 0:s.type)!==((l=n.source)==null?void 0:l.type))throw new Error("Layers are not compatible to be updated");const a=createLayer(o,e,!1);if(e.type!=="MapboxStyle"&&serialize(e.source)!==serialize(n.source)&&t.setSource(a.getSource()),e.type==="MapboxStyle"&&serialize(e.properties.mapboxStyle)!==serialize(n.properties.mapboxStyle)&&(t.getLayers().clear(),t.applyMapboxStyle(e.properties.mapboxStyle,e.properties.applyOptions)),["Vector","VectorTile"].includes(e.type)&&serialize(e.style)!==serialize(n.style)&&t.setStyle(a.getStyle()),serialize(e.properties)!==serialize(n.properties)&&t.setProperties(e.properties),e.visible!==n.visible&&t.setVisible(e.visible),e.opacity&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),serialize(e.interactions)!==serialize(n.interactions)&&((c=n.interactions)==null||c.forEach(u=>{const d=e.interactions.find(p=>{var g,m;return p.type===u.type&&((g=p.options)==null?void 0:g.id)===((m=u.options)==null?void 0:m.id)});d?d.type==="draw"?(o.interactions[d.options.id].setActive(d.options.active),o.interactions[`${d.options.id}_modify`].setActive(d.options.modify)):(o.selectInteractions[d.options.id]||o.interactions[d.options.id]).setActive(d.options.active):u.type==="select"?o.removeSelect(u.options.id):o.removeInteraction(u.options.id)}),(h=e.interactions)==null||h.forEach(u=>{n.interactions.find(p=>{var g,m;return p.type===u.type&&((g=p.options)==null?void 0:g.id)===((m=u.options)==null?void 0:m.id)})||addInteraction(o,t,u)})),e.type==="Group"){const u=e.layers.map(m=>{var f;return(f=m.properties)==null?void 0:f.id}),d=t.getLayers();d.getArray().slice().forEach(m=>{u.includes(m.get("id"))||d.remove(m)}),e.layers.forEach(m=>{const f=m.properties.id;if(d.getArray().map(_=>_.get("id")).includes(f))updateLayer(o,m,o.getLayerById(f));else{const _=createLayer(o,m);d.push(_)}});const g=u;d.getArray().sort((m,f)=>g.indexOf(m.get("id"))-g.indexOf(f.get("id"))),d.changed()}return setSyncListeners(t,e),t.set("_jsonDefinition",e,!0),t}const generateLayers=(o,e)=>e?[...e].map(t=>createLayer(o,t)):[];function setSyncListeners(o,e){o.on("change:opacity",()=>{e.opacity=o.getOpacity()}),o.on("change:visible",()=>{e.visible=o.getVisible()}),o.on("change:zIndex",()=>{e.zIndex=o.getZIndex()}),o.on("propertychange",t=>{t.key==="map"||t.key==="source"||e.properties&&(e.properties[t.key]=t.target.get(t.key))})}class EOxSelectInteraction{constructor(e,t,n){q(this,"panIntoFeature",(e,t)=>{const n=e instanceof Feature||e instanceof RenderFeature?e.getGeometry().getExtent():e;this.eoxMap.map.getView().fit(n,t||{duration:750})});var u,d,p;this.eoxMap=e,this.selectLayer=t,this.options=n,this.active=n.active||t.getVisible(),this.panIn=n.panIn||!1,this.tooltip=n.tooltip!==!1;const a=this.eoxMap.map.getOverlayById("eox-map-tooltip");let s;this.tooltip&&(a?(this.tooltipElement=a.getElement(),s=a):(this.tooltipElement=this.eoxMap.querySelector("eox-map-tooltip")||this.eoxMap.querySelector("[is=eox-map-tooltip]")||((u=n.overlay)==null?void 0:u.element),this.tooltipElement&&(s=new Overlay({element:this.tooltipElement,position:void 0,offset:[0,0],positioning:"top-left",className:"eox-map-tooltip",id:"eox-map-tooltip",...n.overlay}),this.eoxMap.map.addOverlay(s))));const l=()=>{s&&n.condition==="pointermove"&&s.setPosition(void 0)};e.map.on("change:target",g=>{var m,f;(m=g.oldValue)==null||m.removeEventListener("pointerleave",l),(f=g.target.getTargetElement())==null||f.addEventListener("pointerleave",l)}),(d=e.map.getTargetElement())==null||d.addEventListener("pointerleave",l);const c=g=>{var v,y,x,E;n!=null&&n.projection&&(proj4.defs((v=n.projection)==null?void 0:v.name)||(proj4.defs((y=n.projection)==null?void 0:y.name,(x=n==null?void 0:n.projection)==null?void 0:x.proj4_string),register(proj4)));const m=get(((E=n==null?void 0:n.projection)==null?void 0:E.name)||"EPSG:4326"),f=e.map.getView().getProjection().getCode(),_=transform(g.coordinate,f,m);return{lon:_[0].toFixed((n==null?void 0:n.precision)||2),lat:_[1].toFixed((n==null?void 0:n.precision)||2)}},h=g=>Object.values(g).every(m=>m===0);if(this.selectLayer instanceof VectorLayer||this.selectLayer instanceof VectorTileLayer){this.selectedFids=[];let g;if(this.options.layer)g=this.options.layer;else{const _=this.selectLayer.get("_jsonDefinition");g={..._,style:n.style,properties:{id:this.selectLayer.get("id")+"_select"},source:{type:_.type}}}g.renderMode="vector",delete g.interactions,this.selectStyleLayer=createLayer(e,g),this.selectStyleLayer.setSource(this.selectLayer.getSource()),this.selectStyleLayer.setMap(this.eoxMap.map);const m=this.selectStyleLayer.getStyleFunction();this.selectStyleLayer.setStyle((_,v)=>this.selectedFids.length&&this.selectedFids.includes(this.getId(_))?m(_,v):null),this.listener=_=>{if(!this.active||_.dragging)return;const v=this.eoxMap.map.getView().getZoom();if(v<this.selectLayer.getMinZoom()||v>this.selectLayer.getMaxZoom())return;const y=this.eoxMap.map.forEachFeatureAtPixel(_.pixel,M=>M,{layerFilter:M=>M===this.selectLayer}),x=y?[this.getId(y)]:[],E=this.selectedFids[0]!==x[0];if(this.selectedFids=x,E&&(this.selectStyleLayer.changed(),y&&this.panIn&&this.panIntoFeature(y)),s){const M=_.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",te=_.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${te}-${M}`),s.setPosition(y?_.coordinate:null),y&&this.tooltipElement&&(this.tooltipElement.feature=y,n!=null&&n.coordinates&&Object.assign(y==null?void 0:y.values_,c(_)))}const L=new CustomEvent("select",{detail:{id:n.id,originalEvent:_,feature:y}});this.eoxMap.dispatchEvent(L)},this.eoxMap.map.on(n.condition||"click",this.listener),this.selectLayer.on("change:opacity",()=>{this.selectStyleLayer.setOpacity(this.selectLayer.getOpacity())}),this.selectLayer.on("change:visible",()=>{const _=this.selectLayer.getVisible();this.selectStyleLayer.setVisible(_),this.setActive(_)}),this.changeSourceListener=()=>{this.selectStyleLayer.setSource(this.selectLayer.getSource())},this.selectLayer.on("change:source",this.changeSourceListener);const f=()=>{var _,v;e.getLayerById(t.get("id"))?((_=this.selectStyleLayer)==null||_.setMap(this.eoxMap.map),s==null||s.setMap(this.eoxMap.map)):((v=this.selectStyleLayer)==null||v.setMap(null),s==null||s.setMap(null))};e.map.getLayerGroup().on("change",f),this.pointerMoveListener=_=>{var v;_.dragging||(e.map.getTargetElement().style.cursor=e.map.hasFeatureAtPixel(_.pixel,{layerFilter:y=>{var x,E;return(E=(x=y.get("_jsonDefinition"))==null?void 0:x.interactions)==null?void 0:E.find(L=>{var M;return L.type=="select"&&((M=L.options)==null?void 0:M.condition)==="click"})},...n.atPixelOptions})?n.cursor||"pointer":(v=this.eoxMap.interactions.drawInteraction)!=null&&v.getActive()?"crosshair":"auto")},e.map.on("pointermove",this.pointerMoveListener)}(this.selectLayer.getSource()instanceof ImageWMS||this.selectLayer.getSource()instanceof TileWMS)&&(this.listener=g=>{if(!this.active||g.dragging)return;const m=e.map.getView().getResolution(),f=this.selectLayer.getSource().getFeatureInfoUrl(g.coordinate,m,e.map.getView().getProjection(),{INFO_FORMAT:"application/json"});f&&fetch(f).then(_=>_.text()).then(_=>{if(s){const v=g.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",y=g.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${y}-${v}`)}if(_&&this.tooltipElement){const v=JSON.parse(_);let y;v.type==="FeatureCollection"&&v.features.length>0?y=v.features[0]:v.type==="Feature"?(y=v,this.tooltipElement.innerHTML=`<pre>${JSON.stringify(y.properties,null,2)}</pre>`):s==null||s.setPosition(null),n!=null&&n.coordinates&&y&&Object.assign(y==null?void 0:y.properties,c(g));const x=new Feature({...y==null?void 0:y.properties});this.tooltipElement.feature=x,s.setPosition(y?g.coordinate:null)}})},n.condition=="click"&&this.eoxMap.map.on(n.condition,this.listener)),((p=this.selectLayer.getProperties())==null?void 0:p.type)==="WebGLTile"&&(this.listener=g=>{if(!this.active||g.dragging)return;const m=this.selectLayer.getData(g.pixel);if(m){if(s){const f=g.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",_=g.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${_}-${f}`),s.setPosition(g.coordinate);let v={};for(const[y,x]of m.entries()){const E=(y+1).toString();v[`band${E}`]=x}if(h(v))s==null||s.setPosition(null);else if(this.tooltipElement){n!=null&&n.coordinates&&Object.assign(v,c(g));const y=new Feature({...v});this.tooltipElement.feature=y,s.setPosition(Object.keys(v).length>0?g.coordinate:null)}}}else s==null||s.setPosition(null)},this.eoxMap.map.on(n.condition||"click",this.listener))}setActive(e){this.active=e}highlightById(e,t){if(this.selectedFids=e,e.length&&t){const n=createEmpty();if(this.selectLayer instanceof VectorLayer)for(let a=0;a<this.selectedFids.length;a++){const s=this.selectedFids[a],l=this.selectLayer.getSource().getFeatureById(s);l&&l.getGeometry()&&extend(n,l.getGeometry().getExtent())}else if(this.selectLayer instanceof VectorTileLayer){const a=this.eoxMap.map,s=this.selectLayer.getFeaturesInExtent(a.getView().calculateExtent(a.getSize()));for(let l=0;l<s.length;l++){const c=s[l];this.selectedFids.includes(this.getId(c))&&extend(n,c.getGeometry().getExtent())}}isEmpty(n)||this.panIntoFeature(n,t)}this.selectStyleLayer.changed()}remove(){this.eoxMap.map.un(this.options.condition||"click",this.listener),(this.selectLayer instanceof VectorLayer||this.selectLayer instanceof VectorTileLayer)&&(this.selectStyleLayer.setMap(null),delete this.eoxMap.selectInteractions[this.options.id],this.selectLayer.un("change:source",this.changeSourceListener),this.eoxMap.map.un("pointermove",this.pointerMoveListener))}getId(e){if(this.options.idProperty)return e.get(this.options.idProperty);if(e.getId()!==void 0)return e.getId();if(e.get("id")!==void 0)return e.get("id");if(getUid(e)!==void 0)return getUid(e);throw Error("No feature id found. Please provide which feature property should be taken instead using idProperty.")}}function addSelect(o,e,t){if(o.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);return o.selectInteractions[t.id]=new EOxSelectInteraction(o,e,t),o.selectInteractions[t.id]}const circleDistanceMultiplier=1,circleFootSeparation=28,circleStartAngle=Math.PI/2;var R,j,F,S,Y,V,W,H,ee,X;class EOxClusterExplodeInteraction extends Interaction{constructor(t,n,a){super(a);w(this,S);w(this,R,null);w(this,j,null);w(this,F,null);w(this,W,t=>new Promise(n=>{const a=this.eoxMap.map.getView().getZoom(),s={...C(this,R).fitOptions};s.callback=l=>{var c,h;n(this.eoxMap.map.getView().getZoom()!==a),(h=(c=C(this,R).fitOptions).callback)==null||h.call(c,l)},this.eoxMap.map.getView().fit(t,s)}));this.clusterLayer=n,this.eoxMap=t;const s={maxZoom:20,atPixelOptions:{},fitOptions:{duration:500,padding:[40,40,40,40]}},l=structuredClone(a);l.fitOptions&&(s.fitOptions={...s.fitOptions,...l.fitOptions},delete l.fitOptions),P(this,R,{...s,...l}),this.active=a.active||n.getVisible();const c=new VectorLayer;c.setStyle(a.style),P(this,j,c.getStyleFunction())}handleEvent(t){if(!this.getActive())return!0;if(t.type==="pointermove"){const n=this.eoxMap.map.hasFeatureAtPixel(t.pixel,{layerFilter:a=>a===this.clusterLayer,...C(this,R).atPixelOptions});return this.eoxMap.map.getTargetElement().style.cursor=n?"pointer":"default",!n}if(t.type==="click"){const n=this.eoxMap.map.getFeaturesAtPixel(t.pixel,{layerFilter:c=>c===this.clusterLayer,...C(this,R).atPixelOptions});if(n.length===0)return T(this,S,V).call(this),!0;const a=n[0],s=a.get("features");if(s.length===1)return T(this,S,Y).call(this,t,s[0]),T(this,S,V).call(this),!0;if(C(this,F)&&C(this,F)===a){const c=T(this,S,ee).call(this,a,t.coordinate);T(this,S,Y).call(this,t,c.feature)}if(this.eoxMap.map.getView().getZoom()>C(this,R).maxZoom-1)return T(this,S,H).call(this,a),!1;const l=createEmpty();return s.forEach(c=>{extend(l,c.getGeometry().getExtent())}),getArea$1(l)<100?(T(this,S,H).call(this,a),!1):(C(this,W).call(this,l).then(c=>{c||T(this,S,H).call(this,a)}),!1)}return!0}setActive(t){t||(T(this,S,V).call(this),this.eoxMap.map.getTargetElement().style.cursor="default"),super.setActive(t)}setMap(t){t||(T(this,S,V).call(this),this.eoxMap.map.getTargetElement().style.cursor="default"),super.setMap(t)}remove(){this.setMap(null)}}R=new WeakMap,j=new WeakMap,F=new WeakMap,S=new WeakSet,Y=function(t,n){const a=new CustomEvent("clusterSelect",{detail:{originalEvent:t,feature:n}});this.eoxMap.dispatchEvent(a)},V=function(){C(this,F)&&(C(this,F).setStyle(void 0),P(this,F,null))},W=new WeakMap,H=function(t){C(this,F)&&T(this,S,V).call(this);const n=t.getGeometry().getCoordinates(),a=t.get("features"),s=T(this,S,X).call(this,a.length,n,this.eoxMap.map.getView().getResolution()).reduce((l,c,h)=>{const u=new Point(c),d=new LineString([n,c]);l.unshift(new Style({geometry:d,stroke:new Stroke({color:"rgba(50, 50, 50, 0.5)",width:2.5})}));const p=new Feature({...a[h].getProperties()}),g=C(this,j).call(this,p,this.eoxMap.map.getView().getResolution());return g!=null&&g.length&&g.forEach(m=>{const f=m.clone();f.setGeometry(u),l.unshift(f)}),l},[]);t.setStyle(s),P(this,F,t)},ee=function(t,n){const a=t.get("features"),s=T(this,S,X).call(this,a.length,t.getGeometry().getCoordinates(),this.eoxMap.map.getView().getResolution());let l=1/0,c;for(let h=0,u=s.length;h<u;++h){const d=(n[0]-s[h][0])**2+(n[1]-s[h][1])**2;d<l&&(c=h,l=d)}return{feature:a[c],coords:s[c]}},X=function(t,n,a){let l=circleDistanceMultiplier*circleFootSeparation*(2+t)/(Math.PI*2);const c=Math.PI*2/t,h=[];let u;l=Math.max(l,35)*a;for(let d=0;d<t;++d)u=circleStartAngle+d*c,h.push([n[0]+l*Math.cos(u),n[1]+l*Math.sin(u)]);return h};function addClusterExplode(o,e,t){if(o.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);const n=new EOxClusterExplodeInteraction(o,e,t);o.interactions[t.id]=n,o.map.addInteraction(n)}function generateTileGrid(o){let e;if(!(!o||!("tileGrid"in o))){if(o.type==="WMTS"){const n=get("EPSG:3857").getExtent(),a=getWidth(n)/128,s=new Array(19),l=new Array(19);for(let c=0;c<19;++c)s[c]=a/Math.pow(2,c),l[c]=c;e=new WMTSTileGrid({resolutions:s,origin:getTopLeft(n),projection:o.tileGrid.projection||"EPSG:3857",matrixIds:l,...o.tileGrid})}else e=createXYZ({...o.tileGrid});return e}}function animateToStateMethod(o){const e=Object.assign({},o.animationOptions),t=o.map.getView();if(cancelAnimation(t),!e||!Object.keys(e).length){t.setCenter(o.center),t.setZoom(o.zoom);return}e.center=getCenterFromProperty(o.center),e.zoom=o.zoom,t.animate(e)}const UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,n=e.projection,a=this.getUnits(),s=a=="degrees"?"degrees":"m";let l=getPointResolution(n,e.resolution,t,s);const c=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,h=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let u=c*l,d="";if(a=="degrees"){const E=METERS_PER_UNIT.degrees;u*=E,u<E/60?(d="",l*=3600):u<E?(d="",l*=60):d=""}else if(a=="imperial")u<.9144?(d="in",l/=.0254):u<1609.344?(d="ft",l/=.3048):(d="mi",l/=1609.344);else if(a=="nautical")l/=1852,d="NM";else if(a=="metric")u<1e-6?(d="nm",l*=1e9):u<.001?(d="m",l*=1e6):u<1?(d="mm",l*=1e3):u<1e3?d="m":(d="km",l/=1e3);else if(a=="us")u<.9144?(d="in",l*=39.37):u<1609.344?(d="ft",l/=.30480061):(d="mi",l/=1609.3472);else throw new Error("Invalid units");let p=3*Math.floor(Math.log(c*l)/Math.log(10)),g,m,f,_=0,v,y;for(;;){f=Math.floor(p/3);const E=Math.pow(10,f);if(g=LEADING_DIGITS[(p%3+3)%3]*E,m=Math.round(g/l),isNaN(m)){this.element.style.display="none",this.renderedVisible_=!1;return}if(h!==void 0&&m>=h){g=_,m=v,f=y;break}else if(m>=c)break;_=g,v=m,y=f,++p}const x=this.scaleBar_?this.createScaleBar(m,g,d):g.toFixed(f<0?-f:0)+" "+d;this.renderedHTML_!=x&&(this.innerElement_.innerHTML=x,this.renderedHTML_=x),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,n){const a=this.getScaleForResolution(),s=a<1?Math.round(1/a).toLocaleString()+" : 1":"1 : "+Math.round(a).toLocaleString(),l=this.scaleBarSteps_,c=e/l,h=[this.createMarker("absolute")];for(let d=0;d<l;++d){const p=d%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";h.push(`<div><div class="ol-scale-singlebar ${p}" style="width: ${c}px;"></div>`+this.createMarker("relative")+(d%2===0||l===2?this.createStepText(d,e,!1,t,n):"")+"</div>")}return h.push(this.createStepText(l,e,!0,t,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+h.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,n,a,s){const c=(e===0?0:Math.round(a/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),h=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${h}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${n?t+"px":"unset"};">`+c+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,n=1e3/25.4;return e*n*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const Direction={VERTICAL:0,HORIZONTAL:1};class ZoomSlider extends Control{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=Direction.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=t+"-thumb "+CLASS_UNSELECTABLE;const a=this.element;a.className=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,a.appendChild(n),a.addEventListener(EventType$1.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),a.addEventListener(EventType$1.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),a.addEventListener(EventType$1.POINTERUP,this.handleDraggerEnd_.bind(this),!1),a.addEventListener(EventType.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(EventType.CLICK,stopPropagation,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,n=e.offsetHeight;if(t===0&&n===0)return this.sliderInitialized_=!1;const a=getComputedStyle(e);t-=parseFloat(a.paddingRight)+parseFloat(a.paddingLeft),n-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom);const s=e.firstElementChild,l=getComputedStyle(s),c=s.offsetWidth+parseFloat(l.marginRight)+parseFloat(l.marginLeft),h=s.offsetHeight+parseFloat(l.marginTop)+parseFloat(l.marginBottom);return this.thumbSize_=[c,h],t>n?(this.direction_=Direction.HORIZONTAL,this.widthLimit_=t-c):(this.direction_=Direction.VERTICAL,this.heightLimit_=n-h),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),n=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),a=this.getResolutionForPosition_(n),s=t.getConstrainedZoom(t.getZoomForResolution(a));t.animateInternal({zoom:s,duration:this.duration_,easing:easeOut})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const n=this.handleDraggerDrag_,a=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(listen(s,EventType$1.POINTERMOVE,n,this),listen(s,EventType$1.POINTERUP,a,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,n=e.clientY-this.startY_,a=this.getRelativePosition_(t,n);this.currentResolution_=this.getResolutionForPosition_(a),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),n=this.element.firstElementChild;this.direction_==Direction.HORIZONTAL?n.style.left=this.widthLimit_*t+"px":n.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let n;return this.direction_===Direction.HORIZONTAL?n=e/this.widthLimit_:n=t/this.heightLimit_,clamp(n,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return clamp(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",n=e.tipLabel!==void 0?e.tipLabel:"Overview map",a=e.collapseLabel!==void 0?e.collapseLabel:"";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a):this.collapseLabel_=a;const s=e.label!==void 0?e.label:"";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=n,c.appendChild(l),c.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const h=new Map({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=h,e.layers&&e.layers.forEach(function(y){h.addLayer(y)});const u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:u}),this.ovmap_.addOverlay(this.boxOverlay_);const d=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=d,p.appendChild(this.ovmapDiv_),p.appendChild(c);const g=this.boxOverlay_,m=this.boxOverlay_.getElement(),f=y=>({clientX:y.clientX,clientY:y.clientY}),_=function(y){const x=f(y),E=h.getEventCoordinate(x);g.setPosition(E)},v=y=>{const x=h.getEventCoordinateInternal(y),E=this.getMap();E.getView().setCenterInternal(x);const L=E.getOwnerDocument();L.removeEventListener("pointermove",_),L.removeEventListener("pointerup",v)};this.ovmapDiv_.addEventListener("pointerdown",y=>{const x=this.getMap().getOwnerDocument();y.target===m&&x.addEventListener("pointermove",_),x.addEventListener("pointerup",v)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const n=t.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const n=e.getView();n&&this.bindView_(n),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new View({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),s=e.getView().calculateExtentInternal(n);if(this.viewExtent_&&equals$2(s,this.viewExtent_))return;this.viewExtent_=s;const l=t.getSize(),h=t.getView().calculateExtentInternal(l),u=t.getPixelFromCoordinateInternal(getTopLeft(s)),d=t.getPixelFromCoordinateInternal(getBottomRight(s)),p=Math.abs(u[0]-d[0]),g=Math.abs(u[1]-d[1]),m=l[0],f=l[1];p<m*MIN_RATIO||g<f*MIN_RATIO||p>m*MAX_RATIO||g>f*MAX_RATIO?this.resetExtent_():containsExtent(h,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,n=e.getSize(),s=e.getView().calculateExtentInternal(n),l=t.getView(),c=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,h=1/(Math.pow(2,c/2)*MIN_RATIO);scaleFromCenter(s,h),l.fitInternal(fromExtent(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,n=e.getView();t.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),a=e.getView(),s=t.getView(),l=this.rotateWithView_?0:-a.getRotation(),c=this.boxOverlay_,h=this.boxOverlay_.getElement(),u=a.getCenter(),d=a.getResolution(),p=s.getResolution(),g=n[0]*d/p,m=n[1]*d/p;if(c.setPosition(u),h){h.style.width=g+"px",h.style.height=m+"px";const f="rotate("+l+"rad)";h.style.transform=f}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}class ZoomToExtent extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null,this.fitOptions=e.fitOptions||{};const t=e.className!==void 0?e.className:"ol-zoom-extent",n=e.label!==void 0?e.label:"E",a=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild(typeof n=="string"?document.createTextNode(n):n),s.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const l=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,c=this.element;c.className=l,c.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),n=this.extent?fromUserExtent(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(fromExtent(n),this.fitOptions)}}const PROJECTION="projection",COORDINATE_FORMAT="coordinateFormat";class MousePosition extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(PROJECTION,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(COORDINATE_FORMAT)}getProjection(){return this.get(PROJECTION)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(listen(t,EventType$1.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(listen(t,EventType$1.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(COORDINATE_FORMAT,e)}setProjection(e){this.set(PROJECTION,get(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=getTransformFromProjections(this.mapProjection_,s):this.transform_=identityTransform}const a=this.getMap().getCoordinateFromPixelInternal(e);if(a){if(this.transform_(a,a),this.wrapX_){const l=this.getProjection()||this.mapProjection_;wrapX(a,l)}const s=this.getCoordinateFormat();s?t=s(a):t=a.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const Property={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},GeolocationErrorType={ERROR:"error"};class GeolocationError extends BaseEvent{constructor(e){super(GeolocationErrorType.ERROR),this.code=e.code,this.message=e.message}}class Geolocation extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=identityTransform,this.watchId_=void 0,this.addChangeListener(Property.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(Property.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=getTransformFromProjections(get("EPSG:4326"),e),this.position_&&this.set(Property.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(Property.ACCURACY,t.accuracy),this.set(Property.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(Property.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(Property.HEADING,t.heading===null?void 0:toRadians(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const n=this.transform_(this.position_);this.set(Property.POSITION,n.slice()),this.set(Property.SPEED,t.speed===null?void 0:t.speed);const a=circular(this.position_,t.accuracy);a.applyTransform(this.transform_),this.set(Property.ACCURACY_GEOMETRY,a),this.changed()}positionError_(e){this.dispatchEvent(new GeolocationError(e))}getAccuracy(){return this.get(Property.ACCURACY)}getAccuracyGeometry(){return this.get(Property.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(Property.ALTITUDE)}getAltitudeAccuracy(){return this.get(Property.ALTITUDE_ACCURACY)}getHeading(){return this.get(Property.HEADING)}getPosition(){return this.get(Property.POSITION)}getProjection(){return this.get(Property.PROJECTION)}getSpeed(){return this.get(Property.SPEED)}getTracking(){return this.get(Property.TRACKING)}getTrackingOptions(){return this.get(Property.TRACKING_OPTIONS)}setProjection(e){this.set(Property.PROJECTION,get(e))}setTracking(e){this.set(Property.TRACKING,e)}setTrackingOptions(e){this.set(Property.TRACKING_OPTIONS,e)}}class GeolocationControl extends Control{constructor(e){const t=e||{},n=document.createElement("div");n.className="geolocation ol-unselectable ol-control";const a=document.createElement("button");a.title="Show your location",a.innerHTML=t.buttonIcon?`
      <img src="${t.buttonIcon}" alt="Geolocation" />
    `:`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>crosshairs-gps</title><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z" /></svg>
    `,n.appendChild(a),super({element:n}),this._centerWhenReady=t.centerWhenReady,this._highAccuracy=t.highAccuracy,this._trackAccuracy=t.trackAccuracy,this._trackHeading=t.trackHeading,this._positionFeature=new Feature({geometry:new Point([NaN,NaN]),heading:0}),this._source=new VectorSource({features:[this._positionFeature]}),this._trackAccuracy&&(this._accuracyFeature=new Feature,this._accuracyFeature.setStyle(new Style({fill:new Fill({color:"rgba(0, 0, 0, 0.2)"}),stroke:new Stroke({width:2,color:"rgba(0, 0, 0, 0.7)"})})),this._source.addFeature(this._accuracyFeature)),this._layer=new VectorLayer({source:this._source}),t.style&&this._layer.setStyle(t.style),a.addEventListener("click",this.centerOnPosition.bind(this),!1)}setMap(e){this._layer.setMap(e),super.setMap(e),e&&this._centerWhenReady&&this.initGeolocation()}initGeolocation(){return new Promise((e,t)=>{const n=this.getMap();n&&(this._geolocation=new Geolocation({tracking:!0,trackingOptions:{enableHighAccuracy:this._highAccuracy},projection:n.getView().getProjection()})),this._centerWhenReady&&this._geolocation.once("change:position",a=>{n.getView().setCenter(a.target.getPosition())}),this._geolocation.on("error",a=>t(a)),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())}),this._geolocation.on("change:heading",a=>{this._trackHeading&&this._highAccuracy&&this._positionFeature.set("heading",a.target.getHeading())}),this._geolocation.on("change:position",()=>{const a=this._geolocation.getPosition();this._positionFeature.getGeometry().setCoordinates(a||null),e(a)})})}getElement(){return this.element}async centerOnPosition(){var e,t;try{await this.initGeolocation();const n=(e=this._geolocation)==null?void 0:e.getPosition();n&&((t=this.getMap())==null||t.getView().setCenter(n))}catch(n){console.error(n)}}}class LoadingIndicatorControl extends Control{constructor(e){const t=e||{};t.opacity===void 0&&(t.opacity=1),t.type===void 0&&(t.type="small");const n=document.createElement("div");n.className="LoadingIndicator ol-unselectable ol-control",n.classList.add("loading-indicator"),n.style.opacity=String(t.opacity),t.spinnerSvg?n.innerHTML=t.spinnerSvg:n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="50" height="50" style="shape-rendering: auto; display: block; background: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink"><g><circle stroke-dasharray="164.93361431346415 56.97787143782138" r="35" stroke-width="12" stroke="#1a467c" fill="none" cy="50" cx="50">
      <animateTransform keyTimes="0;1" values="0 50 50;360 50 50" dur="1.2222222222222223s" repeatCount="indefinite" type="rotate" attributeName="transform"></animateTransform>
      </circle></g></svg>`,t.type==="fullscreen"?n.classList.add("fullscreen"):n.classList.add("small"),super({element:n})}setMap(e){super.setMap(e),e&&(e.on("loadstart",()=>{this.getElement().style.visibility="visible"}),e.on("loadend",()=>{this.getElement().style.visibility="hidden"}))}getElement(){return this.element}}const icon3D='<i class="small"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>web</title><path d="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg></i>',icon2D='<i class="small"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>map-outline</title><path d="M20.5,3L20.34,3.03L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3M10,5.47L14,6.87V18.53L10,17.13V5.47M5,6.46L8,5.45V17.15L5,18.31V6.46M19,17.54L16,18.55V6.86L19,5.7V17.54Z" /></svg></i>';class GlobeSwitcher extends Control{constructor(e){const t=document.createElement("button");t.className="globe-switcher  button ",t.innerHTML=icon3D;const n=document.createElement("div");n.className="ol-unselectable globe-switcher-container ol-control",n.appendChild(t),super({element:n,target:e.target}),this.eoxMap=e.eoxMap,this.button=t,t.addEventListener("click",this.handleClick.bind(this),!1)}handleClick(){this.eoxMap.projection==="globe"?(this.eoxMap.projection=this.eoxMap.last2dProjection||"EPSG:3857",this.button.innerHTML=icon3D):(this.eoxMap.last2dProjection=this.eoxMap.OLprojection,this.eoxMap.projection="globe",this.button.innerHTML=icon2D)}}const availableControls={Zoom,Rotate,ScaleLine,FullScreen,ZoomSlider,Attribution,OverviewMap,ZoomToExtent,MousePosition,Geolocation:GeolocationControl,LoadingIndicator:LoadingIndicatorControl,GlobeSwitcher};function addOrUpdateControl(o,e,t,n){e&&e[t]?serialize(e[t])!==serialize(n)&&(o.removeControl(t),addControl(o,t,n)):addControl(o,t,n)}function addControl(o,e,t){const n=Object.assign({},t);t&&t.layers&&(n.layers=generateLayers(o,t.layers)),e==="GlobeSwitcher"&&(n.eoxMap=o);const a=new availableControls[e](n);o.map.addControl(a),o.mapControls[e]=a}function setCenterMethod(o,e){let t;const n=(o==null?void 0:o.length)&&coordinatesRoughlyEquals(o,e.map.getView().getCenter());return o&&!n&&(!e.projection||e.projection==="EPSG:3857"?t=getCenterFromProperty(o):t=o),t}function setZoomExtentMethod(o,e){if(!o||!o.length)return;const t=e.map.getView();return cancelAnimation(t),setTimeout(()=>t.fit(o,e.animationOptions),0),o}function setControlsMethod(o,e,t){const n=o;if(e){const a=Object.keys(e),s=Object.keys(n);for(let l=0,c=a.length;l<c;l++){const h=a[l];s.includes(h)||t.removeControl(h)}}if(n){const a=Object.keys(o);for(let s=0,l=a.length;s<l;s++){const c=a[s];addOrUpdateControl(t,e,c,o[c])}}return n}function setLayersMethod(layers,oldLayers,EOxMap){const newLayers=eval("("+serialize(layers)+")");oldLayers&&oldLayers.forEach(o=>{var e,t;if(!((e=o.properties)!=null&&e.id)||!newLayers.find(n=>n.properties.id===o.properties.id)){const n=getLayerById(EOxMap,(t=o.properties)==null?void 0:t.id),s=n.get("_jsonDefinition").interactions;s==null||s.forEach(l=>{l.type==="select"?EOxMap.removeSelect(l.options.id):EOxMap.removeInteraction(l.options.id)}),EOxMap.map.removeLayer(n)}}),newLayers.forEach(o=>{EOxMap.addOrUpdateLayer(o)});const sortedIds=newLayers.map(o=>{var e;return(e=o.properties)==null?void 0:e.id});EOxMap.map.getLayers().getArray().sort((o,e)=>sortedIds.indexOf(o.get("id"))-sortedIds.indexOf(e.get("id")));let minMax=EOxMap.map.getLayers().getArray().reduce((o,e)=>{var t,n,a,s,l,c,h,u;return o.maxZoom=(n=(t=EOxMap.config)==null?void 0:t.view)!=null&&n.maxZoom?(s=(a=EOxMap.config)==null?void 0:a.view)==null?void 0:s.maxZoom:o.maxZoom===void 0||e.get("maxZoom")<o.maxZoom?e.get("maxZoom"):o.maxZoom,o.minZoom=(c=(l=EOxMap.config)==null?void 0:l.view)!=null&&c.minZoom?(u=(h=EOxMap.config)==null?void 0:h.view)==null?void 0:u.minZoom:o.minZoom===void 0||e.get("minZoom")>o.minZoom?e.get("minZoom"):o.minZoom,o},{minZoom:0,maxZoom:1/0});EOxMap.map.getLayers().getArray().map(o=>o.setMinZoom(o.get("minZoom")-1e-12));const currentMinZoom=EOxMap.map.getView().getMinZoom(),currentMaxZoom=EOxMap.map.getView().getMaxZoom();return currentMinZoom!==minMax.minZoom&&EOxMap.map.getView().setMinZoom(minMax.minZoom>=0?minMax.minZoom:0),currentMaxZoom!==minMax.maxZoom&&EOxMap.map.getView().setMaxZoom(minMax.maxZoom),EOxMap.map.on("moveend",()=>{var t;if(!((t=EOxMap==null?void 0:EOxMap.controls)!=null&&t.Zoom))return;const o=EOxMap.renderRoot.querySelector("button.ol-zoom-out"),e=EOxMap.renderRoot.querySelector("button.ol-zoom-in");EOxMap.map.getView().getZoom()>=minMax.maxZoom?e==null||e.classList.add("disabled"):e==null||e.classList.remove("disabled"),EOxMap.map.getView().getZoom()-1e-12<=minMax.minZoom?o==null||o.classList.add("disabled"):o==null||o.classList.remove("disabled")}),newLayers}function setPreventScrollMethod(o,e){return o?(removeDefaultScrollInteractions(e.map),addScrollInteractions(e.map,!0)):addScrollInteractions(e.map),o}function setConfigMethod(o,e){var t,n,a,s,l,c,h,u;return Object.assign(e,{...(o==null?void 0:o.animationOptions)!==void 0?{animationOptions:o.animationOptions}:{},projection:((t=o==null?void 0:o.view)==null?void 0:t.projection)||"EPSG:3857",layers:(o==null?void 0:o.layers)||[],controls:(o==null?void 0:o.controls)||{},...(o==null?void 0:o.preventScroll)!==void 0&&e.preventScroll===void 0?{preventScroll:o==null?void 0:o.preventScroll}:{},zoom:((n=o==null?void 0:o.view)==null?void 0:n.zoom)||0,center:((a=o==null?void 0:o.view)==null?void 0:a.center)||[0,0],zoomExtent:(s=o==null?void 0:o.view)==null?void 0:s.zoomExtent}),(l=o==null?void 0:o.view)!=null&&l.minZoom&&e.map.getView().setMinZoom((c=o==null?void 0:o.view)==null?void 0:c.minZoom),(h=o==null?void 0:o.view)!=null&&h.maxZoom&&e.map.getView().setMaxZoom((u=o==null?void 0:o.view)==null?void 0:u.maxZoom),o}function setProjectionMethod(o,e,t){let n=e;const a=t.map.getView();if(o&&get(o)&&o!==a.getProjection().getCode()){const s=transform(a.getCenter(),a.getProjection().getCode(),o),l=get(o),c=a.getResolution(),h=a.getProjection().getMetersPerUnit(),u=l.getMetersPerUnit(),d=getPointResolution(a.getProjection(),1/h,a.getCenter(),"m")*h,p=getPointResolution(l,1/u,s,"m")*u,g=c*d/p,m=new View({zoom:a.getZoom(),center:s,resolution:g,rotation:a.getRotation(),projection:o});["change:center","change:resolution","change:rotation","propertychange"].forEach(_=>{const v=a.getListeners(_);if(v!=null&&v.length)for(let y=v.length-1;y>=0;y--){const x=v[y];a.un(_,x),m.on(_,x)}}),t.map.setView(m),t.getFlatLayersArray(t.map.getLayers().getArray()).filter(_=>_ instanceof VectorLayer).forEach(_=>_.getSource().refresh()),n=o,t.center=s}return n}function setSyncMethod(o,e){return o&&setTimeout(()=>{const t=getElement(o);t&&(e.clientHeight<1&&!t.zoom?t.map.setView(e.map.getView()):e.map.setView(t.map.getView()))}),o}function getLonLatCenterMethod(o){var e;if(o.projection==="globe"){const t=(e=o.globe)==null?void 0:e.planet.camera.getLonLat();return[(t==null?void 0:t.lon)??0,(t==null?void 0:t.lat)??0]}return o.projection==="EPSG:4326"?o.map.getView().getCenter():transform$1(o.map.getView().getCenter(),o.projection)}function getLonLatExtentMethod(o){var t;if(o.projection==="globe"){const n=(t=o.globe)==null?void 0:t.planet.camera.getLonLat();if(!n||typeof n.height>"u")return[-180,-90,180,90];const a=Math.log2(2705e4/n.height)+1,s=[n.lon,n.lat],l=new View({zoom:a,center:transform$1(s,"EPSG:4326",o.projection),projection:o.projection});return l.setCenter(transform$1(s,"EPSG:4326",o.projection)),transformExtent(l.calculateExtent(o.map.getSize()),o.projection)}const e=o.map.getView().calculateExtent(o.map.getSize());return o.projection==="EPSG:4326"?e:transformExtent(e,o.projection)}function getZoomExtentMethod(o){return o.map.getView().calculateExtent(o.map.getSize())}function addOrUpdateLayerMethod(o,e){var s;o.interactions||(o.interactions=[]);const t=(s=o.properties)==null?void 0:s.id,n=t?getLayerById(e,t):!1;let a;return n?(updateLayer(e,o,n),a=n):(a=createLayer(e,o),e.map.addLayer(a)),a}function removeInteractionMethod(o,e){e.map.removeInteraction(e.interactions[o]),delete e.interactions[o],e.interactions[`${o}_modify`]&&(e.map.removeInteraction(e.interactions[`${o}_modify`]),delete e.interactions[`${o}_modify`])}function removeSelectMethod(o,e){e.selectInteractions[o].remove(),delete e.selectInteractions[o]}function removeControlMethod(o,e){e.map.removeControl(e.mapControls[o]),delete e.mapControls[o]}function firstUpdatedMethod(o,e){e.map.once("change:target",n=>{n.target.getView().setCenter(e.center)});const t=e.renderRoot.querySelector("div#map");e.map.setTarget(t),o?e.map.getView().fit(o,e.animationOptions):animateToStateMethod(e),e.map.on("loadend",()=>{e.dispatchEvent(new CustomEvent("loadend",{detail:e.map}))}),e.dispatchEvent(new CustomEvent("mapmounted",{detail:e.map}))}addCommonStylesheet();var k,N,A,G,D,U,z,B,Z,O,I;class EOxMap extends i{constructor(){super();w(this,k);w(this,N);w(this,A);w(this,G);w(this,D);w(this,U);w(this,z);w(this,B,[0,0]);w(this,Z,0);w(this,O,!1);w(this,I,"EPSG:3857");q(this,"last2dProjection","EPSG:3857");this.map=new Map({controls:[],interactions:defaults({altShiftDragRotate:!1,pinchRotate:!1}),layers:[],view:new View({center:[0,0],zoom:0,projection:C(this,I)})}),this.interactions={},this.selectInteractions={},this.mapControls={},this.globe=null}static get properties(){return{map:{attribute:!1,state:!0},config:{attribute:!1,type:Object},center:{attribute:!1,type:Array},layers:{attribute:!1,type:Array},zoom:{attribute:!1,type:Number},animationOptions:{attribute:!1,type:Object},controls:{attribute:!1,type:Object},interactions:{attribute:!1,type:Object},lonLatCenter:{attribute:!1,type:Array},lonLatExtent:{attribute:!1,type:Array},mapControls:{attribute:!1,state:!0,type:Object},preventScroll:{attribute:"prevent-scroll",type:Boolean},projection:{attribute:"projection",type:String},selectInteractions:{attribute:!1,state:!0,type:Object},sync:{attribute:"sync",type:String},zoomExtent:{attribute:!1,type:Array}}}set center(t){const n=setCenterMethod(t,this);n!==void 0&&(P(this,B,n),animateToStateMethod(this))}get center(){return C(this,B)}set config(t){P(this,D,setConfigMethod(t,this))}get config(){return C(this,D)}get lonLatCenter(){return getLonLatCenterMethod(this)}get lonLatExtent(){return getLonLatExtentMethod(this)}set zoom(t){t!==void 0&&(P(this,Z,t),animateToStateMethod(this))}get zoom(){return C(this,Z)}set zoomExtent(t){P(this,k,setZoomExtentMethod(t,this))}get zoomExtent(){return getZoomExtentMethod(this)}set controls(t){P(this,N,setControlsMethod(t,C(this,N),this))}get controls(){return C(this,N)}set layers(t){P(this,A,setLayersMethod(t,C(this,A),this)),this.dispatchEvent(new CustomEvent("layerschanged",{detail:{layers:C(this,A)}}))}get layers(){return C(this,A)}set preventScroll(t){P(this,G,setPreventScrollMethod(t,this))}get preventScroll(){return C(this,G)}set animationOptions(t){P(this,U,t)}get animationOptions(){return C(this,U)}set projection(t){t==="globe"?(C(this,I)!=="EPSG:3857"&&P(this,I,setProjectionMethod("EPSG:3857",C(this,I),this)),setTimeout(()=>{enableGlobe(this)})):(C(this,O)&&setTimeout(()=>{disableGlobe(this)}),P(this,I,setProjectionMethod(t,C(this,I),this)))}get projection(){return C(this,O)?"globe":C(this,I)}get OLprojection(){return C(this,I)}get globeEnabled(){return C(this,O)}set globeEnabled(t){P(this,O,t)}set sync(t){P(this,z,setSyncMethod(t,this))}get sync(){return C(this,z)}addOrUpdateLayer(t){return addOrUpdateLayerMethod(t,this)}removeInteraction(t){removeInteractionMethod(t,this)}removeSelect(t){removeSelectMethod(t,this)}removeControl(t){removeControlMethod(t,this)}getLayerById(t){return getLayerById(this,t)}firstUpdated(){firstUpdatedMethod(C(this,k),this)}parseFeature(t){return parseFeature(t)}parseTextToFeature(t,n,a,s,l){parseTextToFeature(t,n,a,s,l)}registerProjectionFromCode(t){return registerProjectionFromCode(t)}registerProjection(t,n,a=void 0){registerProjection(t,n,a)}getFlatLayersArray(t){return getFlatLayersArray(t)}render(){return b`
      <style>
        :host {
          display: block;
          height: 100%;
        }
        .eox-map-tooltip {
          pointer-events: none !important;
        }
        ${olCss}
        ${eoxStyle}
        ${controlCss}
      </style>
      <div id="map" style="width: 100%; height: 100%"></div>
      <slot></slot>
    `}}k=new WeakMap,N=new WeakMap,A=new WeakMap,G=new WeakMap,D=new WeakMap,U=new WeakMap,z=new WeakMap,B=new WeakMap,Z=new WeakMap,O=new WeakMap,I=new WeakMap;customElements.define("eox-map",EOxMap);export{EOxMap,buffer,transform$1 as transform,transformExtent};
