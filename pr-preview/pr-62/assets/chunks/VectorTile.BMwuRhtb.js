import{z as kt,A as En,B as wn,b as O,U as Rn,D as Fn,v as _n,F as Pn,T as Ln,t as Vt,G as Cn,j as de,m as Nn,H as In,J as yt,k as xt,K as An}from"./XYZ.CeC_mTYy.js";import{g as Q,E as pt,m as Dn,a as bt,c as Mn,P as Ge,e as ot,t as Y,d as On,a0 as Gn,a3 as Un,b as vn,a5 as kn,a6 as Xe,a7 as St,a8 as Vn,s as bn}from"./Polygon.DHQbtAHt.js";import{P as Te,i as Z,t as Ee,m as st,o as oe,l as Tt,G as Yn,j as Bn,H as zn,I as jn,F as lt,g as W,V as pe,W as Xn,X as we,Y as Kn,Z as Yt,_ as Zn,$ as Hn,a0 as qn,a1 as Et,p as Wn,D as $n,x as Qn,a2 as Jn,n as ei}from"./proj.DZpM1HQc.js";import{l as ti}from"./Vector.BaIzVGOT.js";import{C as ni,l as ee,m as ii,F as at,o as Bt,d as Qe,T as zt,S as fe,Z as ri,p as oi,q as Le}from"./Layer.Cn7yGaI1.js";import{c as si}from"./WMTS.Do6LXecI.js";import{F as jt,M as ct,a as Ue,b as ut,L as ve,R as wt}from"./Feature.sRpZ_lK_.js";import{J as li,t as ke,F as Xt}from"./GeoJSON.Pzw-iBef.js";import{G as ae}from"./GeometryCollection.Ds8WzSbl.js";import{B as ai,E as ci,H as Ke,c as ui,h as di,D as Rt,r as Ft,g as fi}from"./Vector.Bul4CDZb.js";import{C as hi}from"./Tile.D7uEB462.js";const _t=[];class gi extends kt{constructor(e,t,n,i,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=En(1,1,_t)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Q(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedPixelRatio:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(wn(this.context_),_t.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let mi=class extends kt{constructor(e,t,n,i,o,s){super(e,t,s),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==O.IDLE&&(this.setState(O.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(O.ERROR)}setFeatures(e){this.features_=e,this.setState(O.LOADED)}setLoader(e){this.loader_=e}};class fs extends Rn{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||Fn(t),i=e.tileGrid||_n({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:yi,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:mi,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,n){if(n.getState()===O.IDLE){n.setState(O.LOADING);const i=n.wrappedTileCoord,o=this.getTileGridForProjection(t);let s=o.getTileCoordExtent(i);const l=i[0],a=o.getResolution(l);Te(s,-a,s);const c=this.projection;t&&this.projection&&!Z(t,c)&&(s=Ee(s,t,c));const u=this.tileGrid,d=u.getExtent();d&&st(s,d,s);let f=a;t&&c&&!Z(t,c)&&(f=a/c.getMetersPerUnit()/t.getMetersPerUnit());const h=u.getZForResolution(f,this.zDirection);u.forEachTileCoord(s,h,g=>{const p=this.tileUrlFunction(g,e,t);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(g,p?O.IDLE:O.EMPTY,p,this.format_,this.tileLoadFunction));const m=this.sourceTiles_[p];n.sourceTiles.push(m),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(n.getKey());const T=m.getState();if(T<O.LOADED){const S=R=>{this.handleTileChange(R);const P=m.getState();if(P===O.LOADED||P===O.ERROR){const _=m.getKey();_ in n.errorTileKeys?m.getState()===O.LOADED&&delete n.errorTileKeys[_]:n.loadingSourceTiles--,P===O.ERROR?n.errorTileKeys[_]=!0:m.removeEventListener(pt.CHANGE,S),n.loadingSourceTiles===0&&n.setState(Dn(n.errorTileKeys)?O.LOADED:O.ERROR)}};m.addEventListener(pt.CHANGE,S),n.loadingSourceTiles++}T===O.IDLE&&(m.extent=u.getTileCoordExtent(g),m.projection=this.projection,m.resolution=u.getResolution(g[0]),m.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(g=>g.getState()===O.ERROR)?O.ERROR:O.LOADED)}return n.sourceTiles}removeSourceTiles(e){const t=e.getKey(),n=e.sourceTiles;for(let i=0,o=n.length;i<o;++i){const s=n[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const l=this.tileKeysBySourceTileUrl_[s].indexOf(t);l!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(l,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,n,i,o){const s=[e,t,n];let l=this.getTileCoordForTileUrlFunction(s,o);const a=this.getTileGrid().getExtent(),c=this.projection,u=this.getTileGridForProjection(o);if(l&&a){const h=u.getTileCoordExtent(l);Te(h,-u.getResolution(e),h),oe(a,!o||!c||Z(o,c)?h:Ee(h,o,c))||(l=null)}let d=!0;if(l!==null){const h=this.tileGrid,g=u.getResolution(e);let p=g;o&&c&&!Z(o,c)&&(p=g/c.getMetersPerUnit()/o.getMetersPerUnit());const m=h.getZForResolution(p,1),T=u.getTileCoordExtent(l);Te(T,-g,T),h.forEachTileCoord(!o||!c||Z(o,c)?T:Ee(T,o,c),m,S=>{d=d&&!this.tileUrlFunction(S,i,c)})}const f=new gi(s,d?O.EMPTY:O.IDLE,l,this.getSourceTiles.bind(this,i,o),this.removeSourceTiles.bind(this));return f.key=this.getKey(),f}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const i=this.projection;if(i!==null&&!Z(i,e))return Pn(e);const o=this.tileGrid,s=o.getResolutions().slice(),l=s.map(function(u,d){return o.getOrigin(d)}),a=s.map(function(u,d){return o.getTileSize(d)}),c=Cn+1;for(let u=s.length;u<c;++u)s.push(s[u-1]/2),l.push(l[u-1]),a.push(a[u-1]);n=new Ln({extent:o.getExtent(),origins:l,resolutions:s,tileSizes:a}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const i=this.getTileGridForProjection(n),o=Vt(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function yi(r,e){r.setLoader(function(t,n,i){ti(e,r.getFormat(),t,n,i,r.onLoad.bind(r),r.onError.bind(r))})}class xi extends ni{constructor(e){super(e),this.image=null,this.renderedSourceRevision_=0}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,i=e.viewState,o=i.resolution,s=this.getLayer().getSource(),l=e.viewHints;let a=e.extent;if(t.extent!==void 0&&(a=st(a,Tt(t.extent,i.projection))),!l[ee.ANIMATING]&&!l[ee.INTERACTING]&&!Yn(a))if(s){!this.getLayer().rendered&&this.renderedSourceRevision_!==s.getRevision()&&(this.image=null),this.renderedSourceRevision_=s.getRevision();const c=i.projection,u=s.getImage(a,o,n,c);u&&(this.loadImage(u)?this.image=u:u.getState()===de.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),i=bt(t.pixelToCoordinateTransform,e.slice()),o=n.getExtent();if(o&&!Bn(o,i))return null;const s=this.image.getExtent(),l=this.image.getImage(),a=zn(s),c=Math.floor(l.width*((i[0]-s[0])/a));if(c<0||c>=l.width)return null;const u=jn(s),d=Math.floor(l.height*((s[3]-i[1])/u));return d<0||d>=l.height?null:this.getImageData(l,c,d)}renderFrame(e,t){const n=this.image,i=n.getExtent(),o=n.getResolution(),[s,l]=Array.isArray(o)?o:[o,o],a=n.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,d=e.viewState,f=d.center,h=d.resolution,g=u*s/(h*a),p=u*l/(h*a);this.prepareContainer(e,t);const m=this.context.canvas.width,T=this.context.canvas.height,S=this.getRenderContext(e);let R=!1,P=!0;if(c.extent){const A=Tt(c.extent,d.projection);P=oe(A,e.extent),R=P&&!lt(A,e.extent),R&&this.clipUnrotated(S,e,A)}const _=n.getImage(),C=Mn(this.tempTransform,m/2,T/2,g,p,0,a*(i[0]-f[0])/s,a*(f[1]-i[3])/l);this.renderedResolution=l*u/a;const L=_.width*C[0],N=_.height*C[3];if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,e),P&&L>=.5&&N>=.5){const A=C[4],B=C[5],b=c.opacity;b!==1&&(S.save(),S.globalAlpha=b),S.drawImage(_,0,0,+_.width,+_.height,A,B,L,N),b!==1&&S.restore()}return this.postRender(this.context,e),R&&S.restore(),S.imageSmoothingEnabled=!0,this.container}}class pi extends ii{constructor(e){e=e||{},super(e)}}class hs extends pi{constructor(e){super(e)}createRenderer(){return new xi(this)}getData(e){return super.getData(e)}}class gs extends Nn{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let i=e.urls;i===void 0&&e.url!==void 0&&(i=In(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=yt(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(yt(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?xt(e,n):e.replace(/\{(\w+?)\}/g,function(s,l){return l.toLowerCase()in n?n[l.toLowerCase()]:s});const i=this.tileGrid,o=this.dimensions_;return function(s,l,a){if(!s)return;const c={TileMatrix:i.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(c,o);let u=e;return t=="KVP"?u=xt(u,c):u=u.replace(/\{(\w+?)\}/g,function(d,f){return encodeURIComponent(c[f])}),u}}}function ms(r,e){var G;const t=r.Contents.Layer,n=t==null?void 0:t.find(function(F){return F.Identifier==e.layer});if(!n)return null;const i=r.Contents.TileMatrixSet;let o;n.TileMatrixSetLink.length>1?"projection"in e?o=n.TileMatrixSetLink.findIndex(function(F){const k=i.find(function(ce){return ce.Identifier==F.TileMatrixSet}).SupportedCRS,U=W(k),z=W(e.projection);return U&&z?Z(U,z):k==e.projection}):o=n.TileMatrixSetLink.findIndex(function(F){return F.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);const s=n.TileMatrixSetLink[o].TileMatrixSet,l=n.TileMatrixSetLink[o].TileMatrixSetLimits;let a=n.Format[0];"format"in e&&(a=e.format),o=n.Style.findIndex(function(F){return"style"in e?F.Title==e.style:F.isDefault}),o<0&&(o=0);const c=n.Style[o].Identifier,u={};"Dimension"in n&&n.Dimension.forEach(function(F,D,k){const U=F.Identifier;let z=F.Default;z===void 0&&(z=F.Value[0]),u[U]=z});const f=r.Contents.TileMatrixSet.find(function(F){return F.Identifier==s});let h;const g=f.SupportedCRS;if(g&&(h=W(g)),"projection"in e){const F=W(e.projection);F&&(!h||Z(F,h))&&(h=F)}let p=!1;const m=h.getAxisOrientation().startsWith("ne");let T=f.TileMatrix[0],S={MinTileCol:0,MinTileRow:0,MaxTileCol:T.MatrixWidth-1,MaxTileRow:T.MatrixHeight-1};if(l){S=l[l.length-1];const F=f.TileMatrix.find(D=>D.Identifier===S.TileMatrix||f.Identifier+":"+D.Identifier===S.TileMatrix);F&&(T=F)}const R=(G=n.BoundingBox)==null?void 0:G.find(F=>W(F.crs)&&Z(W(F.crs),h)),P=T.ScaleDenominator*28e-5/h.getMetersPerUnit(),_=m?[T.TopLeftCorner[1],T.TopLeftCorner[0]]:T.TopLeftCorner,C=T.TileWidth*P,L=T.TileHeight*P;let N=(R==null?void 0:R.extent)??f.BoundingBox;N&&m&&(N=[N[1],N[0],N[3],N[2]]);let A=[_[0]+C*S.MinTileCol,_[1]-L*(1+S.MaxTileRow),_[0]+C*(1+S.MaxTileCol),_[1]-L*S.MinTileRow];if(N!==void 0&&!lt(N,A)){const F=n.WGS84BoundingBox,D=W("EPSG:4326").getExtent();if(A=N,F)p=F[0]===D[0]&&F[2]===D[2];else{const k=Ee(N,f.SupportedCRS,"EPSG:4326");p=k[0]-1e-10<=D[0]&&k[2]+1e-10>=D[2]}}const B=si(f,A,l),b=[];let I=e.requestEncoding;if(I=I!==void 0?I:"","OperationsMetadata"in r&&"GetTile"in r.OperationsMetadata){const F=r.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let D=0,k=F.length;D<k;++D)if(F[D].Constraint){const z=F[D].Constraint.find(function(ce){return ce.name=="GetEncoding"}).AllowedValues.Value;if(I===""&&(I=z[0]),I==="KVP")z.includes("KVP")&&b.push(F[D].href);else break}else F[D].href&&(I="KVP",b.push(F[D].href))}return b.length===0&&(I="REST",n.ResourceURL.forEach(function(F){F.resourceType==="tile"&&(a=F.format,b.push(F.template))})),{urls:b,layer:e.layer,matrixSet:s,format:a,projection:h,requestEncoding:I,tileGrid:B,style:c,dimensions:u,wrapX:p,crossOrigin:e.crossOrigin}}const ys={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};class xs extends li{constructor(e){super(),e=e||{},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=W(e.dataProjection?e.dataProjection:"EPSG:4326")}readFeaturesFromObject(e,t){if(e.type=="Topology"){const n=e;let i,o=null,s=null;n.transform&&(i=n.transform,o=i.scale,s=i.translate);const l=n.arcs;i&&Li(l,o,s);const a=[],c=n.objects,u=this.layerName_;let d;for(const f in c)this.layers_&&!this.layers_.includes(f)||(c[f].type==="GeometryCollection"?(d=c[f],a.push.apply(a,Pi(d,l,o,s,u,f,t))):(d=c[f],a.push(Kt(d,l,o,s,u,f,t))));return a}return[]}readProjectionFromObject(e){return this.dataProjection}}const Si={Point:Ti,LineString:wi,Polygon:Fi,MultiPoint:Ei,MultiLineString:Ri,MultiPolygon:_i};function Ve(r,e){const t=[];let n;for(let i=0,o=r.length;i<o;++i)if(n=r[i],i>0&&t.pop(),n>=0){const s=e[n];for(let l=0,a=s.length;l<a;++l)t.push(s[l].slice(0))}else{const s=e[~n];for(let l=s.length-1;l>=0;--l)t.push(s[l].slice(0))}return t}function Ti(r,e,t){const n=r.coordinates;return e&&t&&dt(n,e,t),new ot(n)}function Ei(r,e,t){const n=r.coordinates;if(e&&t)for(let i=0,o=n.length;i<o;++i)dt(n[i],e,t);return new ut(n)}function wi(r,e){const t=Ve(r.arcs,e);return new ve(t)}function Ri(r,e){const t=[];for(let n=0,i=r.arcs.length;n<i;++n)t[n]=Ve(r.arcs[n],e);return new Ue(t)}function Fi(r,e){const t=[];for(let n=0,i=r.arcs.length;n<i;++n)t[n]=Ve(r.arcs[n],e);return new Ge(t)}function _i(r,e){const t=[];for(let n=0,i=r.arcs.length;n<i;++n){const o=r.arcs[n],s=[];for(let l=0,a=o.length;l<a;++l)s[l]=Ve(o[l],e);t[n]=s}return new ct(t)}function Pi(r,e,t,n,i,o,s){const l=r.geometries,a=[];for(let c=0,u=l.length;c<u;++c)a[c]=Kt(l[c],e,t,n,i,o,s);return a}function Kt(r,e,t,n,i,o,s){let l=null;const a=r.type;if(a){const d=Si[a];a==="Point"||a==="MultiPoint"?l=d(r,t,n):l=d(r,e),l=ke(l,!1,s)}const c=new jt({geometry:l});r.id!==void 0&&c.setId(r.id);let u=r.properties;return i&&(u||(u={}),u[i]=o),u&&c.setProperties(u,!0),c}function Li(r,e,t){for(let n=0,i=r.length;n<i;++n)Ci(r[n],e,t)}function Ci(r,e,t){let n=0,i=0;for(let o=0,s=r.length;o<s;++o){const l=r[o];n+=l[0],i+=l[1],l[0]=n,l[1]=i,dt(l,e,t)}}function dt(r,e,t){r[0]=r[0]*e[0]+t[0],r[1]=r[1]*e[1]+t[1]}const Pt="http://www.w3.org/2001/XMLSchema-instance";function Pe(r,e){return xe().createElementNS(r,e)}function q(r,e){return Zt(r,e,[]).join("")}function Zt(r,e,t){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)t.push(r.nodeValue);else{let n;for(n=r.firstChild;n;n=n.nextSibling)Zt(n,e,t)}return t}function ne(r){return"documentElement"in r}function ps(r,e,t){return r.getAttributeNS(e,t)||""}function ie(r){return new DOMParser().parseFromString(r,"application/xml")}function Lt(r,e){return function(t,n){const i=r.call(e??this,t,n);if(i!==void 0){const o=n[n.length-1];Y(o,i)}}}function te(r,e){return function(t,n){const i=r.call(e??this,t,n);i!==void 0&&n[n.length-1].push(i)}}function ft(r,e){return function(t,n){const i=r.call(e??this,t,n);i!==void 0&&(n[n.length-1]=i)}}function Ss(r,e,t){return function(n,i){const o=r.call(this,n,i);if(o!==void 0){const s=i[i.length-1],l=n.localName;let a;l in s?a=s[l]:(a=[],s[l]=a),a.push(o)}}}function y(r,e,t){return function(n,i){const o=r.call(this,n,i);if(o!==void 0){const s=i[i.length-1],l=e!==void 0?e:n.localName;s[l]=o}}}function w(r,e){return function(t,n,i){r.call(e??this,t,n,i),i[i.length-1].node.appendChild(t)}}function Ts(r,e){let t,n;return function(i,o,s){if(t===void 0){t={};const l={};l[i.localName]=r,t[i.namespaceURI]=l,n=$(i.localName)}Ht(t,n,o,s)}}function $(r,e){return function(t,n,i){const s=n[n.length-1].node;let l=r;l===void 0&&(l=i);const a=e!==void 0?e:s.namespaceURI;return Pe(a,l)}}const K=$();function H(r,e){const t=e.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=r[e[i]];return n}function E(r,e,t){t=t!==void 0?t:{};let n,i;for(n=0,i=r.length;n<i;++n)t[r[n]]=e;return t}function ye(r,e,t,n){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const o=r[i.namespaceURI];if(o!==void 0){const s=o[i.localName];s!==void 0&&s.call(n,i,t)}}}function M(r,e,t,n,i){return n.push(r),ye(e,t,n,i),n.pop()}function Ht(r,e,t,n,i,o){const s=(i!==void 0?i:t).length;let l,a;for(let c=0;c<s;++c)l=t[c],l!==void 0&&(a=e.call(o,l,n,i!==void 0?i[c]:void 0),a!==void 0&&r[a.namespaceURI][a.localName].call(o,a,l,n))}function V(r,e,t,n,i,o,s){return i.push(r),Ht(e,t,n,i,o,s),i.pop()}let Ze;function Ni(){return Ze===void 0&&typeof XMLSerializer<"u"&&(Ze=new XMLSerializer),Ze}let He;function xe(){return He===void 0&&typeof document<"u"&&(He=document.implementation.createDocument("","",null)),He}class Ii extends Xt{constructor(){super(),this.xmlSerializer_=Ni()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const n=ie(e);return this.readFeatureFromDocument(n,t)}return ne(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const n=this.readFeaturesFromDocument(e,t);return n.length>0?n[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const n=ie(e);return this.readFeaturesFromDocument(n,t)}return ne(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const n=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Y(n,this.readFeaturesFromNode(i,t));return n}readFeaturesFromNode(e,t){return On()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const n=ie(e);return this.readGeometryFromDocument(n,t)}return ne(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=ie(e);return this.readProjectionFromDocument(t)}return ne(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const n=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const n=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const n=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(e,t){return null}}function re(r){const e=q(r,!1);return Ai(e)}function Ai(r){const e=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(e)return e[1]!==void 0||!1}function Es(r){const e=q(r,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function v(r){const e=q(r,!1);return Di(e)}function Di(r){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(e)return parseFloat(e[1])}function ws(r){const e=q(r,!1);return Mi(e)}function Mi(r){const e=/^\s*(\d+)\s*$/.exec(r);if(e)return parseInt(e[1],10)}function j(r){return q(r,!1).trim()}function me(r,e){X(r,e?"1":"0")}function Oi(r,e){r.appendChild(xe().createCDATASection(e))}function Rs(r,e){const t=new Date(e*1e3),n=t.getUTCFullYear()+"-"+pe(t.getUTCMonth()+1,2)+"-"+pe(t.getUTCDate(),2)+"T"+pe(t.getUTCHours(),2)+":"+pe(t.getUTCMinutes(),2)+":"+pe(t.getUTCSeconds(),2)+"Z";r.appendChild(xe().createTextNode(n))}function se(r,e){const t=e.toPrecision();r.appendChild(xe().createTextNode(t))}function Fs(r,e){const t=e.toString();r.appendChild(xe().createTextNode(t))}const Gi=/^\s/,Ui=/\s$/,vi=/(\n|\t|\r|<|&| {2})/;function X(r,e){typeof e=="string"&&(Gi.test(e)||Ui.test(e)||vi.test(e))?e.split("]]>").forEach((t,n,i)=>{n<i.length-1&&(t+="]]"),n>0&&(t=">"+t),Oi(r,t)}):r.appendChild(xe().createTextNode(e))}const J=["http://www.google.com/kml/ext/2.2"],x=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],ki="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Ct={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Vi=E(x,{ExtendedData:un,Region:dn,MultiGeometry:y(ln,"geometry"),LineString:y(on,"geometry"),LinearRing:y(sn,"geometry"),Point:y(an,"geometry"),Polygon:y(cn,"geometry"),Style:y(mt),StyleMap:Er,address:y(j),description:y(j),name:y(j),open:y(re),phoneNumber:y(j),styleUrl:y(Jt),visibility:y(re)},E(J,{MultiTrack:y(ar,"geometry"),Track:y(rn,"geometry")})),bi=E(x,{ExtendedData:un,Region:dn,Link:Mr,address:y(j),description:y(j),name:y(j),open:y(re),phoneNumber:y(j),visibility:y(re)}),Yi=E(x,{href:y(Qt)}),Bi=E(x,{Altitude:y(v),Longitude:y(v),Latitude:y(v),Tilt:y(v),AltitudeMode:y(j),Heading:y(v),Roll:y(v)}),qt=E(x,{LatLonAltBox:Pr,Lod:Cr}),zi=E(x,["Document","Placemark"]),ji=E(x,{Document:w(Yr),Placemark:w(gn)});let he,Ae=null,Je,Re,Fe,_e,Me,et=null,ht,tt=null,nt,le=null,Nt=null,it=null;function Oe(r){return 32/Math.min(r[0],r[1])}function Xi(){he=[255,255,255,1],Ae=new at({color:he}),Je=[20,2],Re="pixels",Fe="pixels",_e=[64,64],Me="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",et=new Bt({anchor:Je,anchorOrigin:"bottom-left",anchorXUnits:Re,anchorYUnits:Fe,crossOrigin:"anonymous",rotation:0,scale:Oe(_e),size:_e,src:Me}),ht="NO_IMAGE",tt=new Qe({color:he,width:1}),nt=new Qe({color:[51,51,51,1],width:2}),le=new zt({font:"bold 16px Helvetica",fill:Ae,stroke:nt,scale:.8}),Nt=new fe({fill:Ae,image:et,text:le,stroke:tt,zIndex:0}),it=[Nt]}let Ce;function Ki(r){return r}class _s extends Ii{constructor(e){super(),e=e||{},it||Xi(),this.dataProjection=W("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:it,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.referrerPolicy_=e.referrerPolicy,this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Ki,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const n=E(x,{Document:Lt(this.readDocumentOrFolder_,this),Folder:Lt(this.readDocumentOrFolder_,this),Placemark:te(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=M([],n,e,t,this);if(i)return i}readPlacemark_(e,t){const n=M({geometry:null},Vi,e,t,this);if(!n)return;const i=new jt,o=e.getAttribute("id");o!==null&&i.setId(o);const s=t[0],l=n.geometry;if(l&&ke(l,!1,s),i.setGeometry(l),delete n.geometry,this.extractStyles_){const a=n.Style,c=n.styleUrl,u=Hi(a,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(u)}return delete n.Style,i.setProperties(n,!0),i}readSharedStyle_(e,t){const n=e.getAttribute("id");if(n!==null){const i=mt.call(this,e,t);if(i){let o,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+n,s).href:o="#"+n,this.sharedStyles_[o]=i}}}readSharedStyleMap_(e,t){const n=e.getAttribute("id");if(n===null)return;const i=tn.call(this,e,t);if(!i)return;let o,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+n,s).href:o="#"+n,this.sharedStyles_[o]=i}readFeatureFromNode(e,t){if(!x.includes(e.namespaceURI))return null;const n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return n||null}readFeaturesFromNode(e,t){if(!x.includes(e.namespaceURI))return[];let n;const i=e.localName;if(i=="Document"||i=="Folder")return n=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),n||[];if(i=="Placemark"){const o=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return o?[o]:[]}if(i=="kml"){n=[];for(let o=e.firstElementChild;o;o=o.nextElementSibling){const s=this.readFeaturesFromNode(o,t);s&&Y(n,s)}return n}return[]}readName(e){if(e){if(typeof e=="string"){const t=ie(e);return this.readNameFromDocument(t)}return ne(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(t);if(n)return n}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(x.includes(t.namespaceURI)&&t.localName=="name")return j(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const n=t.localName;if(x.includes(t.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const n=ie(e);Y(t,this.readNetworkLinksFromDocument(n))}else ne(e)?Y(t,this.readNetworkLinksFromDocument(e)):Y(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Y(t,this.readNetworkLinksFromNode(n));return t}readNetworkLinksFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(x.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const i=M({},bi,n,[]);t.push(i)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;x.includes(n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Y(t,this.readNetworkLinksFromNode(n))}return t}readRegion(e){const t=[];if(typeof e=="string"){const n=ie(e);Y(t,this.readRegionFromDocument(n))}else ne(e)?Y(t,this.readRegionFromDocument(e)):Y(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Y(t,this.readRegionFromNode(n));return t}readRegionFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(x.includes(n.namespaceURI)&&n.localName=="Region"){const i=M({},qt,n,[]);t.push(i)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;x.includes(n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Y(t,this.readRegionFromNode(n))}return t}readCamera(e){const t=[];if(typeof e=="string"){const n=ie(e);Y(t,this.readCameraFromDocument(n))}else ne(e)?Y(t,this.readCameraFromDocument(e)):Y(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&Y(t,this.readCameraFromNode(n));return t}readCameraFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(x.includes(n.namespaceURI)&&n.localName==="Camera"){const i=M({},Bi,n,[]);t.push(i)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;x.includes(n.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&Y(t,this.readCameraFromNode(n))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=Pe(x[4],"kml"),i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",J[0]),n.setAttributeNS(i,"xmlns:xsi",Pt),n.setAttributeNS(Pt,"xsi:schemaLocation",ki);const o={node:n},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);const l=zi[n.namespaceURI],a=H(s,l);return V(o,ji,K,a,[t],l,this),n}}function Zi(r,e){const t=[0,0];let n="start";const i=r.getImage();if(i){const l=i.getSize();if(l&&l.length==2){const a=i.getScaleArray(),c=i.getAnchor();t[0]=a[0]*(l[0]-c[0]),t[1]=a[1]*(l[1]/2-c[1]),n="left"}}let o=r.getText();return o?(o=o.clone(),o.setFont(o.getFont()||le.getFont()),o.setScale(o.getScale()||le.getScale()),o.setFill(o.getFill()||le.getFill()),o.setStroke(o.getStroke()||nt)):o=le.clone(),o.setText(e),o.setOffsetX(t[0]),o.setOffsetY(t[1]),o.setTextAlign(n),new fe({image:i,text:o})}function Hi(r,e,t,n,i){return function(o,s){let l=i,a="",c=[];if(l){const d=o.getGeometry();if(d)if(d instanceof ae)c=d.getGeometriesArrayRecursive().filter(function(f){const h=f.getType();return h==="Point"||h==="MultiPoint"}),l=c.length>0;else{const f=d.getType();l=f==="Point"||f==="MultiPoint"}}l&&(a=o.get("name"),l=l&&!!a,l&&/&[^&]+;/.test(a)&&(Ce||(Ce=document.createElement("textarea")),Ce.innerHTML=a,a=Ce.value));let u=t;if(r?u=r:e&&(u=Wt(e,t,n)),l){const d=Zi(u[0],a);if(c.length>0){d.setGeometry(new ae(c));const f=new fe({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[d,f].concat(u.slice(1))}return d}return u}}function Wt(r,e,t){return Array.isArray(r)?r:typeof r=="string"?Wt(t[r],e,t):e}function be(r){const e=q(r,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const n=t[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function $t(r){let e=q(r,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=n.exec(e);){const o=parseFloat(i[1]),s=parseFloat(i[2]),l=i[3]?parseFloat(i[3]):0;t.push(o,s,l),e=e.substr(i[0].length)}if(e==="")return t}function Qt(r){const e=q(r,!1).trim();let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Jt(r){const e=q(r,!1).trim().replace(/^(?!.*#)/,"#");let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function qi(r){const e=r.getAttribute("xunits"),t=r.getAttribute("yunits");let n;return e!=="insetPixels"?t!=="insetPixels"?n="bottom-left":n="top-left":t!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(r.getAttribute("x")),xunits:Ct[e],y:parseFloat(r.getAttribute("y")),yunits:Ct[t],origin:n}}function en(r){return v(r)}const Wi=E(x,{Pair:Tr});function tn(r,e){return M(void 0,Wi,r,e,this)}const $i=E(x,{Icon:y(dr),color:y(be),heading:y(v),hotSpot:y(qi),scale:y(en)});function Qi(r,e){const t=M({},$i,r,e);if(!t)return;const n=e[e.length-1],i="Icon"in t?t.Icon:{},o=!("Icon"in t)||Object.keys(i).length>0;let s;const l=i.href;l?s=l:o&&(s=Me);let a,c,u,d="bottom-left";const f=t.hotSpot;f?(a=[f.x,f.y],c=f.xunits,u=f.yunits,d=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(a=Je,c=Re,u=Fe):s.includes("arrow-reverse")?(a=[54,42],c=Re,u=Fe):s.includes("paddle")&&(a=[32,1],c=Re,u=Fe));let h;const g=i.x,p=i.y;g!==void 0&&p!==void 0&&(h=[g,p]);let m;const T=i.w,S=i.h;T!==void 0&&S!==void 0&&(m=[T,S]);let R;const P=t.heading;P!==void 0&&(R=Xn(P));const _=t.scale,C=t.color;if(o){s==Me&&(m=_e);const L=new Bt({anchor:a,anchorOrigin:d,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_,offset:h,offsetOrigin:"bottom-left",rotation:R,scale:_,size:m,src:this.iconUrlFunction_(s),color:C}),N=L.getScaleArray()[0],A=L.getSize();if(A===null){const B=L.getImageState();if(B===de.IDLE||B===de.LOADING){const b=function(){const I=L.getImageState();if(!(I===de.IDLE||I===de.LOADING)){const G=L.getSize();if(G&&G.length==2){const F=Oe(G);L.setScale(N*F)}L.unlistenImageChange(b)}};L.listenImageChange(b),B===de.IDLE&&L.load()}}else if(A.length==2){const B=Oe(A);L.setScale(N*B)}n.imageStyle=L}else n.imageStyle=ht}const Ji=E(x,{color:y(be),scale:y(en)});function er(r,e){const t=M({},Ji,r,e);if(!t)return;const n=e[e.length-1],i=new zt({fill:new at({color:"color"in t?t.color:he}),scale:t.scale});n.textStyle=i}const tr=E(x,{color:y(be),width:y(v)});function nr(r,e){const t=M({},tr,r,e);if(!t)return;const n=e[e.length-1],i=new Qe({color:"color"in t?t.color:he,width:"width"in t?t.width:1});n.strokeStyle=i}const ir=E(x,{color:y(be),fill:y(re),outline:y(re)});function rr(r,e){const t=M({},ir,r,e);if(!t)return;const n=e[e.length-1],i=new at({color:"color"in t?t.color:he});n.fillStyle=i;const o=t.fill;o!==void 0&&(n.fill=o);const s=t.outline;s!==void 0&&(n.outline=s)}const or=E(x,{coordinates:ft($t)});function nn(r,e){return M(null,or,r,e)}function sr(r,e){const n=e[e.length-1].coordinates,i=q(r,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(s){const l=parseFloat(s[1]),a=parseFloat(s[2]),c=parseFloat(s[3]);n.push([l,a,c])}else n.push([])}const lr=E(J,{Track:te(rn)});function ar(r,e){const t=M([],lr,r,e);if(t)return new Ue(t)}const cr=E(x,{when:Or},E(J,{coord:sr}));function rn(r,e){const t=M({coordinates:[],whens:[]},cr,r,e);if(!t)return;const n=[],i=t.coordinates,o=t.whens;for(let s=0,l=Math.min(i.length,o.length);s<l;++s)i[s].length==3&&n.push(i[s][0],i[s][1],i[s][2],o[s]);return new ve(n,"XYZM")}const ur=E(x,{href:y(Qt)},E(J,{x:y(v),y:y(v),w:y(v),h:y(v)}));function dr(r,e){const t=M({},ur,r,e);return t||null}const fr=E(x,{coordinates:ft($t)});function gt(r,e){return M(null,fr,r,e)}const Ye=E(x,{extrude:y(re),tessellate:y(re),altitudeMode:y(j)});function on(r,e){const t=M({},Ye,r,e),n=gt(r,e);if(n){const i=new ve(n,"XYZ");return i.setProperties(t,!0),i}}function sn(r,e){const t=M({},Ye,r,e),n=gt(r,e);if(n){const i=new Ge(n,"XYZ",[n.length]);return i.setProperties(t,!0),i}}const hr=E(x,{LineString:te(on),LinearRing:te(sn),MultiGeometry:te(ln),Point:te(an),Polygon:te(cn)});function ln(r,e){const t=M([],hr,r,e);if(!t)return null;if(t.length===0)return new ae(t);let n,i=!0;const o=t[0].getType();let s;for(let l=1,a=t.length;l<a;++l)if(s=t[l],s.getType()!=o){i=!1;break}if(i){let l,a;if(o=="Point"){const c=t[0];l=c.getLayout(),a=c.getFlatCoordinates();for(let u=1,d=t.length;u<d;++u)s=t[u],Y(a,s.getFlatCoordinates());n=new ut(a,l),qe(n,t)}else if(o=="LineString")n=new Ue(t),qe(n,t);else if(o=="Polygon")n=new ct(t),qe(n,t);else if(o=="GeometryCollection"||o.startsWith("Multi"))n=new ae(t);else throw new Error("Unknown geometry type found")}else n=new ae(t);return n}function an(r,e){const t=M({},Ye,r,e),n=gt(r,e);if(n){const i=new ot(n,"XYZ");return i.setProperties(t,!0),i}}const gr=E(x,{innerBoundaryIs:Ir,outerBoundaryIs:Dr});function cn(r,e){const t=M({},Ye,r,e),n=M([null],gr,r,e);if(n&&n[0]){const i=n[0],o=[i.length];for(let l=1,a=n.length;l<a;++l)Y(i,n[l]),o.push(i.length);const s=new Ge(i,"XYZ",o);return s.setProperties(t,!0),s}}const mr=E(x,{IconStyle:Qi,LabelStyle:er,LineStyle:nr,PolyStyle:rr});function mt(r,e){const t=M({},mr,r,e,this);if(!t)return null;let n="fillStyle"in t?t.fillStyle:Ae;const i=t.fill;i!==void 0&&!i&&(n=null);let o;"imageStyle"in t?t.imageStyle!=ht&&(o=t.imageStyle):o=et;const s="textStyle"in t?t.textStyle:le,l="strokeStyle"in t?t.strokeStyle:tt,a=t.outline;return a!==void 0&&!a?[new fe({geometry:function(c){const u=c.getGeometry(),d=u.getType();if(d==="GeometryCollection"){const f=u;return new ae(f.getGeometriesArrayRecursive().filter(function(h){const g=h.getType();return g!=="Polygon"&&g!=="MultiPolygon"}))}if(d!=="Polygon"&&d!=="MultiPolygon")return u},fill:n,image:o,stroke:l,text:s,zIndex:void 0}),new fe({geometry:function(c){const u=c.getGeometry(),d=u.getType();if(d==="GeometryCollection"){const f=u;return new ae(f.getGeometriesArrayRecursive().filter(function(h){const g=h.getType();return g==="Polygon"||g==="MultiPolygon"}))}if(d==="Polygon"||d==="MultiPolygon")return u},fill:n,stroke:null,zIndex:void 0})]:[new fe({fill:n,image:o,stroke:l,text:s,zIndex:void 0})]}function qe(r,e){const t=e.length,n=new Array(e.length),i=new Array(e.length),o=new Array(e.length);let s,l,a;s=!1,l=!1,a=!1;for(let c=0;c<t;++c){const u=e[c];n[c]=u.get("extrude"),i[c]=u.get("tessellate"),o[c]=u.get("altitudeMode"),s=s||n[c]!==void 0,l=l||i[c]!==void 0,a=a||o[c]}s&&r.set("extrude",n),l&&r.set("tessellate",i),a&&r.set("altitudeMode",o)}const yr=E(x,{displayName:y(j),value:y(j)});function xr(r,e){const t=r.getAttribute("name");ye(yr,r,e);const n=e[e.length-1];t&&n.displayName?n[t]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:t!==null?n[t]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const pr=E(x,{Data:xr,SchemaData:Rr});function un(r,e){ye(pr,r,e)}function dn(r,e){ye(qt,r,e)}const Sr=E(x,{Style:y(mt),key:y(j),styleUrl:y(Jt)});function Tr(r,e){const t=M({},Sr,r,e,this);if(!t)return;const n=t.key;if(n&&n=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const o=t.Style;o&&(e[e.length-1]=o)}}function Er(r,e){const t=tn.call(this,r,e);if(!t)return;const n=e[e.length-1];if(Array.isArray(t))n.Style=t;else if(typeof t=="string")n.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const wr=E(x,{SimpleData:Fr});function Rr(r,e){ye(wr,r,e)}function Fr(r,e){const t=r.getAttribute("name");if(t!==null){const n=j(r),i=e[e.length-1];i[t]=n}}const _r=E(x,{altitudeMode:y(j),minAltitude:y(v),maxAltitude:y(v),north:y(v),south:y(v),east:y(v),west:y(v)});function Pr(r,e){const t=M({},_r,r,e);if(!t)return;const n=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];n.extent=i,n.altitudeMode=t.altitudeMode,n.minAltitude=parseFloat(t.minAltitude),n.maxAltitude=parseFloat(t.maxAltitude)}const Lr=E(x,{minLodPixels:y(v),maxLodPixels:y(v),minFadeExtent:y(v),maxFadeExtent:y(v)});function Cr(r,e){const t=M({},Lr,r,e);if(!t)return;const n=e[e.length-1];n.minLodPixels=parseFloat(t.minLodPixels),n.maxLodPixels=parseFloat(t.maxLodPixels),n.minFadeExtent=parseFloat(t.minFadeExtent),n.maxFadeExtent=parseFloat(t.maxFadeExtent)}const Nr=E(x,{LinearRing:te(nn)});function Ir(r,e){const t=M([],Nr,r,e);t.length>0&&e[e.length-1].push(...t)}const Ar=E(x,{LinearRing:ft(nn)});function Dr(r,e){const t=M(void 0,Ar,r,e);if(t){const n=e[e.length-1];n[0]=t}}function Mr(r,e){ye(Yi,r,e)}function Or(r,e){const n=e[e.length-1].whens,i=q(r,!1),o=Date.parse(i);n.push(isNaN(o)?0:o)}function Be(r,e){const t=An(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let o=0;o<4;++o){const s=Math.floor(i[o]).toString(16);i[o]=s.length==1?"0"+s:s}X(r,i.join(""))}function Gr(r,e,t){const n=t[t.length-1],i=n.layout,o=n.stride;let s;if(i=="XY"||i=="XYM")s=2;else if(i=="XYZ"||i=="XYZM")s=3;else throw new Error("Invalid geometry layout");const l=e.length;let a="";if(l>0){a+=e[0];for(let c=1;c<s;++c)a+=","+e[c];for(let c=o;c<l;c+=o){a+=" "+e[c];for(let u=1;u<s;++u)a+=","+e[c+u]}}X(r,a)}const De=E(x,{Data:w(Ur),value:w(kr),displayName:w(vr)});function Ur(r,e,t){r.setAttribute("name",e.name);const n={node:r},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&V(n,De,K,[i.displayName],t,["displayName"]),i!==null&&i.value&&V(n,De,K,[i.value],t,["value"])):V(n,De,K,[i],t,["value"])}function vr(r,e){X(r,e)}function kr(r,e){X(r,e)}const Vr=E(x,{Placemark:w(gn)}),br=function(r,e,t){const n=e[e.length-1].node;return Pe(n.namespaceURI,"Placemark")};function Yr(r,e,t){V({node:r},Vr,br,e,t,void 0,this)}const Br=$("Data");function zr(r,e,t){const n={node:r},i=e.names,o=e.values,s=i.length;for(let l=0;l<s;l++)V(n,De,Br,[{name:i[l],value:o[l]}],t)}const It=E(x,["href"],E(J,["x","y","w","h"])),At=E(x,{href:w(X)},E(J,{x:w(se),y:w(se),w:w(se),h:w(se)})),jr=function(r,e,t){return Pe(J[0],"gx:"+t)};function Xr(r,e,t){const n={node:r},i=t[t.length-1].node;let o=It[i.namespaceURI],s=H(e,o);V(n,At,K,s,t,o),o=It[J[0]],s=H(e,o),V(n,At,jr,s,t,o)}const Kr=E(x,["scale","heading","Icon","color","hotSpot"]),Zr=E(x,{Icon:w(Xr),color:w(Be),heading:w(se),hotSpot:w(Eo),scale:w(yn)});function Hr(r,e,t){const n={node:r},i={},o=e.getSrc(),s=e.getSize(),l=e.getImageSize(),a={href:o};if(s){a.w=s[0],a.h=s[1];const m=e.getAnchor(),T=e.getOrigin();if(T&&l&&T[0]!==0&&T[1]!==s[1]&&(a.x=T[0],a.y=l[1]-(T[1]+s[1])),m&&(m[0]!==s[0]/2||m[1]!==s[1]/2)){const S={x:m[0],xunits:"pixels",y:s[1]-m[1],yunits:"pixels"};i.hotSpot=S}}i.Icon=a;let c=e.getScaleArray()[0],u=s;if(u===null&&(u=_e),u.length==2){const m=Oe(u);c=c/m}c!==1&&(i.scale=c);const d=e.getRotation();d!==0&&(i.heading=d);const f=e.getColor();f&&(i.color=f);const h=t[t.length-1].node,g=Kr[h.namespaceURI],p=H(i,g);V(n,Zr,K,p,t,g)}const qr=E(x,["color","scale"]),Wr=E(x,{color:w(Be),scale:w(yn)});function $r(r,e,t){const n={node:r},i={},o=e.getFill();o&&(i.color=o.getColor());const s=e.getScale();s&&s!==1&&(i.scale=s);const l=t[t.length-1].node,a=qr[l.namespaceURI],c=H(i,a);V(n,Wr,K,c,t,a)}const Qr=E(x,["color","width"]),Jr=E(x,{color:w(Be),width:w(se)});function eo(r,e,t){const n={node:r},i={color:e.getColor(),width:Number(e.getWidth())||1},o=t[t.length-1].node,s=Qr[o.namespaceURI],l=H(i,s);V(n,Jr,K,l,t,s)}const to={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},fn=function(r,e,t){if(r){const n=e[e.length-1].node;return Pe(n.namespaceURI,to[r.getType()])}},no=$("Point"),io=$("LineString"),ro=$("LinearRing"),oo=$("Polygon"),so=E(x,{LineString:w(ge),Point:w(ge),Polygon:w(mn),GeometryCollection:w(hn)});function hn(r,e,t){const n={node:r},i=e.getType();let o=[],s;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(l){const a=l.getType();if(a==="MultiPoint")o=o.concat(l.getPoints());else if(a==="MultiLineString")o=o.concat(l.getLineStrings());else if(a==="MultiPolygon")o=o.concat(l.getPolygons());else if(a==="Point"||a==="LineString"||a==="Polygon")o.push(l);else throw new Error("Unknown geometry type")}),s=fn;else if(i==="MultiPoint")o=e.getPoints(),s=no;else if(i==="MultiLineString")o=e.getLineStrings(),s=io;else if(i==="MultiPolygon")o=e.getPolygons(),s=oo;else throw new Error("Unknown geometry type");V(n,so,s,o,t)}const lo=E(x,{LinearRing:w(ge)});function Dt(r,e,t){V({node:r},lo,ro,[e],t)}const We=E(x,{ExtendedData:w(zr),MultiGeometry:w(hn),LineString:w(ge),LinearRing:w(ge),Point:w(ge),Polygon:w(mn),Style:w(To),address:w(X),description:w(X),name:w(X),open:w(me),phoneNumber:w(X),styleUrl:w(X),visibility:w(me)}),ao=E(x,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),co=$("ExtendedData");function gn(r,e,t){const n={node:r};e.getId()&&r.setAttribute("id",e.getId());const i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;const s=Object.keys(i||{}).sort().filter(function(h){return!o[h]}),l=e.getStyleFunction();if(l){const h=l(e,0);if(h){const g=Array.isArray(h)?h:[h];let p=g;if(e.getGeometry()&&(p=g.filter(function(m){const T=m.getGeometryFunction()(e);if(T){const S=T.getType();return S==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(R){const P=R.getType();return P==="Point"||P==="MultiPoint"}).length:S==="Point"||S==="MultiPoint"}})),this.writeStyles_){let m=g,T=g;e.getGeometry()&&(m=g.filter(function(S){const R=S.getGeometryFunction()(e);if(R){const P=R.getType();return P==="GeometryCollection"?R.getGeometriesArrayRecursive().filter(function(_){const C=_.getType();return C==="LineString"||C==="MultiLineString"}).length:P==="LineString"||P==="MultiLineString"}}),T=g.filter(function(S){const R=S.getGeometryFunction()(e);if(R){const P=R.getType();return P==="GeometryCollection"?R.getGeometriesArrayRecursive().filter(function(_){const C=_.getType();return C==="Polygon"||C==="MultiPolygon"}).length:P==="Polygon"||P==="MultiPolygon"}})),i.Style={pointStyles:p,lineStyles:m,polyStyles:T}}if(p.length&&i.name===void 0){const m=p[0].getText();m&&(i.name=m.getText())}}}const a=t[t.length-1].node,c=ao[a.namespaceURI],u=H(i,c);if(V(n,We,K,u,t,c),s.length>0){const h=H(i,s);V(n,We,co,[{names:s,values:h}],t)}const d=t[0];let f=e.getGeometry();f&&(f=ke(f,!0,d)),V(n,We,fn,[f],t)}const uo=E(x,["extrude","tessellate","altitudeMode","coordinates"]),fo=E(x,{extrude:w(me),tessellate:w(me),altitudeMode:w(X),coordinates:w(Gr)});function ge(r,e,t){const n=e.getFlatCoordinates(),i={node:r};i.layout=e.getLayout(),i.stride=e.getStride();const o=e.getProperties();o.coordinates=n;const s=t[t.length-1].node,l=uo[s.namespaceURI],a=H(o,l);V(i,fo,K,a,t,l)}const ho=E(x,["color","fill","outline"]),Mt=E(x,{outerBoundaryIs:w(Dt),innerBoundaryIs:w(Dt)}),go=$("innerBoundaryIs"),mo=$("outerBoundaryIs");function mn(r,e,t){const n=e.getLinearRings(),i=n.shift(),o={node:r};V(o,Mt,go,n,t),V(o,Mt,mo,[i],t)}const yo=E(x,{color:w(Be),fill:w(me),outline:w(me)});function xo(r,e,t){const n={node:r},i=e.getFill(),o=e.getStroke(),s={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:o?void 0:!1},l=t[t.length-1].node,a=ho[l.namespaceURI],c=H(s,a);V(n,yo,K,c,t,a)}function yn(r,e){se(r,Math.round(e*1e6)/1e6)}const po=E(x,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),So=E(x,{IconStyle:w(Hr),LabelStyle:w($r),LineStyle:w(eo),PolyStyle:w(xo)});function To(r,e,t){const n={node:r},i={};if(e.pointStyles.length){const a=e.pointStyles[0].getText();a&&(i.LabelStyle=a);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){const a=e.lineStyles[0].getStroke();a&&(i.LineStyle=a)}if(e.polyStyles.length){const a=e.polyStyles[0].getStroke();a&&!i.LineStyle&&(i.LineStyle=a),i.PolyStyle=e.polyStyles[0]}const o=t[t.length-1].node,s=po[o.namespaceURI],l=H(i,s);V(n,So,K,l,t,s)}function Eo(r,e){r.setAttribute("x",String(e.x)),r.setAttribute("y",String(e.y)),r.setAttribute("xunits",e.xunits),r.setAttribute("yunits",e.yunits)}let ze=null;function wo(){return!!ze}function Ro(){ze=null}function xn(r){ze=r;const e=Object.keys(r.defs),t=e.length;let n,i;for(n=0;n<t;++n){const o=e[n];if(!we(o)){const s=r.defs(o);let l=s.units;!l&&s.projName==="longlat"&&(l="degrees"),Kn(new Yt({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:l}))}}for(n=0;n<t;++n){const o=e[n],s=we(o);for(i=0;i<t;++i){const l=e[i],a=we(l);if(!Zn(o,l))if(r.defs[o]===r.defs[l])Hn([s,a]);else{const c=r(o,l);qn(s,a,Et(s,a,c.forward),Et(a,s,c.inverse))}}}}let je=async function(r){if(typeof r!="string"||!r.includes(":"))throw new Error("Invalid code");const[e,t]=r.toLowerCase().split(":",2),n=await fetch(`https://spatialreference.org/ref/${e}/${t}/ogcwkt/`);if(!n.ok)throw new Error(`Unexpected response from spatialreference.org: ${n.status}`);return n.text()};function Fo(r){je=r}function _o(){return je}async function pn(r){const e=ze;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");return e.defs(r)?we(r):(e.defs(r,await je(r)),xn(e),we(r))}let Sn=async function(r){return await je("EPSG:"+r)};function Po(r){Sn=r}function Lo(){return Sn}async function Co(r){return typeof r=="number"&&(r="EPSG:"+r),await pn(r)}function No(r){return async function(e){const t=await fetch(`https://api.maptiler.com/coordinates/search/code:${e}.json?transformations=true&exports=true&key=${r}`);if(!t.ok)throw new Error(`Unexpected response from maptiler.com: ${t.status}`);return t.json().then(n=>{var o,s,l,a;const i=n.results;if((i==null?void 0:i.length)>0){const c=i.filter(u=>{var d,f;return((d=u.id)==null?void 0:d.authority)==="EPSG"&&((f=u.id)==null?void 0:f.code)===e})[0];if(c){const u=c.transformations;if((u==null?void 0:u.length)>0){const d=c.default_transformation;if(u.filter(h=>{var g,p,m;return((g=h.id)==null?void 0:g.authority)===(d==null?void 0:d.authority)&&((p=h.id)==null?void 0:p.code)===(d==null?void 0:d.code)&&((m=h.grids)==null?void 0:m.length)===0}).length>0)return(o=c.exports)==null?void 0:o.proj4;const f=(l=(s=u.filter(h=>{var g,p,m;return((g=h.grids)==null?void 0:g.length)===0&&((p=h.target_crs)==null?void 0:p.authority)==="EPSG"&&((m=h.target_crs)==null?void 0:m.code)===4326&&h.deprecated===!1&&h.usable===!0}).sort((h,g)=>h.accuracy-g.accuracy)[0])==null?void 0:s.exports)==null?void 0:l.proj4;if(f)return f}return(a=c.exports)==null?void 0:a.proj4}}})}}const Ps=Object.freeze(Object.defineProperty({__proto__:null,epsgLookupMapTiler:No,fromEPSGCode:Co,fromProjectionCode:pn,getEPSGLookup:Lo,getProjectionCodeLookup:_o,isRegistered:wo,register:xn,setEPSGLookup:Po,setProjectionCodeLookup:Fo,unregister:Ro},Symbol.toStringTag,{value:"Module"})),rt=65536*65536,Ot=1/rt,Io=12,Gt=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),$e=0,Ne=1,Se=2,Ie=5;class Ao{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,n=this.length){for(;this.pos<n;){const i=this.readVarint(),o=i>>3,s=this.pos;this.type=i&7,e(o,t,this),this.pos===s&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*rt;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*rt;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let n,i;return i=t[this.pos++],n=i&127,i<128||(i=t[this.pos++],n|=(i&127)<<7,i<128)||(i=t[this.pos++],n|=(i&127)<<14,i<128)||(i=t[this.pos++],n|=(i&127)<<21,i<128)?n:(i=t[this.pos],n|=(i&15)<<28,Do(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Io&&Gt?Gt.decode(this.buf.subarray(t,e)):Xo(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Se?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===$e)for(;this.buf[this.pos++]>127;);else if(t===Se)this.pos=this.readVarint()+this.pos;else if(t===Ie)this.pos+=4;else if(t===Ne)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Ot),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Ot),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Mo(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Ko(this.buf,e,this.pos);const n=this.pos-t;n>=128&&Ut(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let n=0;n<t;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,t){this.pos++;const n=this.pos;e(t,this);const i=this.pos-n;i>=128&&Ut(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,n){this.writeTag(e,Se),this.writeRawMessage(t,n)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Uo,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,vo,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,bo,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,ko,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Vo,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Yo,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Bo,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,zo,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,jo,t)}writeBytesField(e,t){this.writeTag(e,Se),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,Ie),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,Ie),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Ne),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Ne),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,$e),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,$e),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Se),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,Ie),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Ne),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Do(r,e,t){const n=t.buf;let i,o;if(o=n[t.pos++],i=(o&112)>>4,o<128||(o=n[t.pos++],i|=(o&127)<<3,o<128)||(o=n[t.pos++],i|=(o&127)<<10,o<128)||(o=n[t.pos++],i|=(o&127)<<17,o<128)||(o=n[t.pos++],i|=(o&127)<<24,o<128)||(o=n[t.pos++],i|=(o&1)<<31,o<128))return ue(r,i,e);throw new Error("Expected varint not more than 10 bytes")}function ue(r,e,t){return t?e*4294967296+(r>>>0):(e>>>0)*4294967296+(r>>>0)}function Mo(r,e){let t,n;if(r>=0?(t=r%4294967296|0,n=r/4294967296|0):(t=~(-r%4294967296),n=~(-r/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Oo(t,n,e),Go(n,e)}function Oo(r,e,t){t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos]=r&127}function Go(r,e){const t=(r&7)<<4;e.buf[e.pos++]|=t|((r>>>=3)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127)))))}function Ut(r,e,t){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(let i=t.pos-1;i>=r;i--)t.buf[i+n]=t.buf[i]}function Uo(r,e){for(let t=0;t<r.length;t++)e.writeVarint(r[t])}function vo(r,e){for(let t=0;t<r.length;t++)e.writeSVarint(r[t])}function ko(r,e){for(let t=0;t<r.length;t++)e.writeFloat(r[t])}function Vo(r,e){for(let t=0;t<r.length;t++)e.writeDouble(r[t])}function bo(r,e){for(let t=0;t<r.length;t++)e.writeBoolean(r[t])}function Yo(r,e){for(let t=0;t<r.length;t++)e.writeFixed32(r[t])}function Bo(r,e){for(let t=0;t<r.length;t++)e.writeSFixed32(r[t])}function zo(r,e){for(let t=0;t<r.length;t++)e.writeFixed64(r[t])}function jo(r,e){for(let t=0;t<r.length;t++)e.writeSFixed64(r[t])}function Xo(r,e,t){let n="",i=e;for(;i<t;){const o=r[i];let s=null,l=o>239?4:o>223?3:o>191?2:1;if(i+l>t)break;let a,c,u;l===1?o<128&&(s=o):l===2?(a=r[i+1],(a&192)===128&&(s=(o&31)<<6|a&63,s<=127&&(s=null))):l===3?(a=r[i+1],c=r[i+2],(a&192)===128&&(c&192)===128&&(s=(o&15)<<12|(a&63)<<6|c&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):l===4&&(a=r[i+1],c=r[i+2],u=r[i+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(s=(o&15)<<18|(a&63)<<12|(c&63)<<6|u&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,l=1):s>65535&&(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),n+=String.fromCharCode(s),i+=l}return n}function Ko(r,e,t){for(let n=0,i,o;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(o)if(i<56320){r[t++]=239,r[t++]=191,r[t++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||n+1===e.length?(r[t++]=239,r[t++]=191,r[t++]=189):o=i;continue}else o&&(r[t++]=239,r[t++]=191,r[t++]=189,o=null);i<128?r[t++]=i:(i<2048?r[t++]=i>>6|192:(i<65536?r[t++]=i>>12|224:(r[t++]=i>>18|240,r[t++]=i>>12&63|128),r[t++]=i>>6&63|128),r[t++]=i&63|128)}return t}class Ls extends Xt{constructor(e){super(),e=e||{},this.dataProjection=new Yt({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:wt,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,i){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,l=0,a=0,c=0,u=0,d=0;for(;e.pos<o;){if(!l){const f=e.readVarint();s=f&7,l=f>>3}if(l--,s===1||s===2)a+=e.readSVarint(),c+=e.readSVarint(),s===1&&u>d&&(i.push(u),d=u),n.push(a,c),u+=2;else if(s===7)u>d&&(n.push(n[d],n[d+1]),u+=2);else throw new Error("Invalid command found in the PBF")}u>d&&(i.push(u),d=u)}createFeature_(e,t,n){const i=t.type;if(i===0)return null;let o;const s=t.properties;let l;this.idProperty_?(l=s[this.idProperty_],delete s[this.idProperty_]):l=t.id,s[this.layerName_]=t.layer.name;const a=[],c=[];this.readRawGeometry_(e,t,a,c);const u=$o(i,c.length);if(this.featureClass===wt)o=new this.featureClass(u,a,c,2,s,l),o.transform(n.dataProjection);else{let d;if(u=="Polygon"){const g=Gn(a,c);d=g.length>1?new ct(a,"XY",g):new Ge(a,"XY",c)}else d=u==="Point"?new ot(a,"XY"):u==="LineString"?new ve(a,"XY"):u==="MultiPoint"?new ut(a,"XY"):u==="MultiLineString"?new Ue(a,"XY",c):null;const f=this.featureClass;o=new f,this.geometryName_&&o.setGeometryName(this.geometryName_);const h=ke(d,!1,n);o.setGeometry(h),l!==void 0&&o.setId(l),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const i=W(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const o=new Ao(e),s=o.readFields(Zo,{}),l=[];for(const a in s){if(n&&!n.includes(a))continue;const c=s[a],u=c?[0,0,c.extent,c.extent]:null;i.setExtent(u);for(let d=0,f=c.length;d<f;++d){const h=Wo(o,c,d),g=this.createFeature_(o,h,t);g!==null&&l.push(g)}}return l}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Zo(r,e,t){if(r===3){const n={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Ho,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Ho(r,e,t){if(r===15)e.version=t.readVarint();else if(r===1)e.name=t.readString();else if(r===5)e.extent=t.readVarint();else if(r===2)e.features.push(t.pos);else if(r===3)e.keys.push(t.readString());else if(r===4){let n=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)r=t.readVarint()>>3,n=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null;e.values.push(n)}}function qo(r,e,t){if(r==1)e.id=t.readVarint();else if(r==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const i=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[i]=o}}else r==3?e.type=t.readVarint():r==4&&(e.geometry=t.pos)}function Wo(r,e,t){r.pos=e.features[t];const n=r.readVarint()+r.pos,i={layer:e,type:0,properties:{}};return r.readFields(qo,i,n),i}function $o(r,e){let t;return r===1?t=e===1?"Point":"MultiPoint":r===2?t=e===1?"LineString":"MultiLineString":r===3&&(t="Polygon"),t}const Qo={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},vt={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Jo extends hi{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Un(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,n,i,o,s,l,a){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,n,i,o,s,l,a)}getTile(e,t,n,i){const o=this.getOrCreateTile(e,t,n,i);if(!o)return null;const s=i.viewState,l=s.resolution,a=i.viewHints,c=this.getLayer().getSource(),u=c.getTileGridForProjection(s.projection),d=!(a[ee.ANIMATING]||a[ee.INTERACTING]),f=u.getZForResolution(l,c.zDirection)===e;return d&&f?o.wantedResolution=l:o.wantedResolution||(o.wantedResolution=u.getResolution(e)),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const i=this.getLayer(),o=i.getRevision(),s=i.getRenderOrder()||null,l=e.wantedResolution,a=e.getReplayState(i);if(!a.dirty&&a.renderedResolution===l&&a.renderedRevision==o&&a.renderedPixelRatio===t&&a.renderedRenderOrder==s)return;const c=i.getSource(),u=!!i.getDeclutter(),d=c.getTileGrid(),h=c.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),g=c.getSourceTiles(t,n,e),p=Q(i);delete e.hitDetectionImageData[p],e.executorGroups[p]=[],a.dirty=!1;for(let m=0,T=g.length;m<T;++m){const S=g[m];if(S.getState()!=O.LOADED)continue;const R=c.getProjection(),P=S.tileCoord;let _=d.getTileCoordExtent(P);n&&R&&!Z(n,R)&&(_=Ee(_,R,n,32));const C=st(h,_),L=Te(C,i.getRenderBuffer()*l,this.tempExtent),N=Wn(_,C)?null:L,A=new ai(0,C,l,t),B=fi(l,t),b=function(k,U){let z;const ce=k.getStyleFunction()||i.getStyleFunction();if(ce&&(z=ce(k,l)),z){const Tn=this.renderFeature(k,B,z,A,u,U);a.dirty=a.dirty||Tn}},I=S.getFeatures();s&&s!==a.renderedRenderOrder&&I.sort(s);for(let k=0,U=I.length;k<U;++k){let z=I[k];n&&S.projection&&!Z(n,S.projection)&&(z=z.clone(),z.getGeometry().applyTransform($n(S.projection,n))),(!N||oe(N,z.getGeometry().getExtent()))&&b.call(this,z,k)}const G=A.finish(),F=i.getRenderMode()!=="vector"&&u&&g.length===1?null:C,D=new ci(F,l,t,c.getOverlaps(),G,i.getRenderBuffer(),!0);e.executorGroups[p].push(D)}a.renderedRevision=o,a.renderedPixelRatio=t,a.renderedRenderOrder=s,a.renderedResolution=l}forEachFeatureAtCoordinate(e,t,n,i,o){var R,P;const s=t.viewState.resolution,l=t.viewState.rotation;n=n??0;const a=this.getLayer(),u=a.getSource().getTileGridForProjection(t.viewState.projection),d=Qn([e]);Te(d,s*n,d);const f={},h=function(_,C,L){let N=_.getId();N===void 0&&(N=Q(_));const A=f[N];if(A){if(A!==!0&&L<A.distanceSq){if(L===0)return f[N]=!0,o.splice(o.lastIndexOf(A),1),i(_,a,C);A.geometry=C,A.distanceSq=L}}else{if(L===0)return f[N]=!0,i(_,a,C);o.push(f[N]={feature:_,layer:a,geometry:C,distanceSq:L,callback:i})}},g=this.renderedTiles,p=Q(a),m=a.getDeclutter(),T=m?(P=(R=t.declutter)==null?void 0:R[m])==null?void 0:P.all().map(_=>_.value):null;let S;e:for(let _=0,C=g.length;_<C;++_){const L=g[_],N=u.getTileCoordExtent(L.wrappedTileCoord);if(!oe(N,d))continue;const A=L.executorGroups[p];for(let B=0,b=A.length;B<b;++B)if(S=A[B].forEachFeatureAtCoordinate(e,s,l,n,h,T),S)break e}return S}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,n)=>{const i=this.getLayer(),o=i.getSource(),s=this.renderedProjection,l=s.getExtent(),a=this.renderedResolution,c=o.getTileGridForProjection(s),u=bt(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(u,a).toString(),f=this.renderedTiles.find(R=>R.tileCoord.toString()===d&&R.getState()===O.LOADED);if(!f||f.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!lt(l,c.getTileCoordExtent(f.tileCoord))&&Jn(u,s);const h=Q(i),g=c.getTileCoordExtent(f.wrappedTileCoord),p=ei(g),m=[(u[0]-p[0])/a,(p[1]-u[1])/a],T=f.getSourceTiles().reduce((R,P)=>R.concat(P.getFeatures()),[]);let S=f.hitDetectionImageData[h];if(!S){const R=Vt(c.getTileSize(c.getZForResolution(a,o.zDirection))),P=this.renderedRotation_,_=[this.getRenderTransform(c.getTileCoordCenter(f.wrappedTileCoord),a,0,Ke,R[0]*Ke,R[1]*Ke,0)];S=ui(R,_,T,i.getStyleFunction(),c.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(i).renderedResolution,P),f.hitDetectionImageData[h]=S}t(di(m,T,S))})}getFeaturesInExtent(e){const t=[],n=this.getTileCache();if(n.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),l={};return n.forEach(a=>{if(a.tileCoord[0]!==s||a.getState()!==O.LOADED)return;const c=a.getSourceTiles();for(let u=0,d=c.length;u<d;++u){const f=c[u],h=f.getKey();if(h in l)continue;l[h]=!0;const g=f.tileCoord;if(oe(e,o.getTileCoordExtent(g))){const p=f.getFeatures();if(p)for(let m=0,T=p.length;m<T;++m){const S=p[m],R=S.getGeometry();oe(e,R.getExtent())&&t.push(S)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var f;const n=this.context,i=n.globalAlpha;n.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[ee.ANIMATING]||o[ee.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],a=this.getLayer().getDeclutter(),c=a?(f=e.declutter)==null?void 0:f[a]:void 0,u=Q(this.getLayer()),d=this.renderedTiles;for(let h=0,g=d.length;h<g;++h){const p=d[h],m=p.executorGroups[u];if(m)for(let T=m.length-1;T>=0;--T)m[T].execute(this.context,l,this.getTileRenderTransform(p,e),e.viewState.rotation,s,Rt,c)}n.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,n=Q(this.getLayer()),i=t.reduce((a,c,u)=>(c.executorGroups[n].forEach(d=>a.push({executorGroup:d,index:u})),a),[]),o=i.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,c=i.length;a<c;++a){const u=i[a].executorGroup.getDeferredZIndexContexts();for(const d in u)s[d]=!0}Object.keys(s).map(Number).sort(vn).forEach(a=>{o.forEach((c,u)=>{c[a]&&(c[a].forEach(d=>{const{executorGroup:f,index:h}=i[u],g=f.getRenderedContext(),p=g.globalAlpha;g.globalAlpha=this.renderedOpacity_;const m=this.tileClipContexts_[h];m&&m.draw(g),d.draw(g),m&&g.restore(),g.globalAlpha=p,d.clear()}),c[a].length=0)})})}getTileRenderTransform(e,t){const n=t.pixelRatio,i=t.viewState,o=i.center,s=i.resolution,l=i.rotation,a=t.size,c=Math.round(a[0]*n),u=Math.round(a[1]*n),f=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),h=e.tileCoord,g=f.getTileCoordExtent(e.wrappedTileCoord),p=f.getTileCoordExtent(h,this.tempExtent)[0]-g[0];return kn(Xe(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(o,s,l,n,c,u,p))}postRender(e,t){var _;const n=t.viewHints,i=!(n[ee.ANIMATING]||n[ee.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),l=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const a=o.getDeclutter(),c=a?vt[s].filter(C=>!Rt.includes(C)):vt[s],u=t.viewState,d=u.rotation,f=o.getSource(),g=f.getTileGridForProjection(u.projection).getZForResolution(u.resolution,f.zDirection),p=this.renderedTiles,m=[],T=[],S=[],R=Q(o);let P=!0;for(let C=p.length-1;C>=0;--C){const L=p[C];P=P&&!L.getReplayState(o).dirty;const N=L.executorGroups[R].filter(D=>D.hasExecutors(c));if(N.length===0)continue;const A=this.getTileRenderTransform(L,t),B=L.tileCoord[0];let b=!1;const I=N[0].getClipCoords(A);let G=e,F;if(I){F=new ri,G=F.getContext();for(let D=0,k=m.length;D<k;++D)if(g!==B&&B<T[D]){const U=m[D];oe([I[0],I[3],I[4],I[7]],[U[0],U[3],U[4],U[7]])&&(b||(G.save(),b=!0),G.beginPath(),G.moveTo(I[0],I[1]),G.lineTo(I[2],I[3]),G.lineTo(I[4],I[5]),G.lineTo(I[6],I[7]),G.moveTo(U[6],U[7]),G.lineTo(U[4],U[5]),G.lineTo(U[2],U[3]),G.lineTo(U[0],U[1]),G.clip())}m.push(I),T.push(B)}for(let D=0,k=N.length;D<k;++D)N[D].execute(e,[e.canvas.width,e.canvas.height],A,d,i,c,(_=t.declutter)==null?void 0:_[a]);b&&(G===e?G.restore():S[C]=F)}e.globalAlpha=l,this.ready=P,this.tileClipContexts_=S,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,n,i,o,s){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let a=0,c=n.length;a<c;++a)l=Ft(i,e,n[a],t,this.boundHandleStyleImageChange_,void 0,o,s)||l;else l=Ft(i,e,n,t,this.boundHandleStyleImageChange_,void 0,o,s);return l}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),i=t.getRevision(),o=e.wantedResolution;return n.renderedTileResolution!==o||n.renderedTileRevision!==i}renderTileImage_(e,t){const n=this.getLayer(),i=e.getReplayState(n),o=n.getRevision(),s=e.executorGroups[Q(n)];i.renderedTileRevision=o;const l=e.wrappedTileCoord,a=l[0],c=n.getSource();let u=t.pixelRatio;const f=t.viewState.projection,h=c.getTileGridForProjection(f),g=h.getResolution(e.tileCoord[0]),p=t.pixelRatio/e.wantedResolution*g,m=h.getResolution(a),T=e.getContext();u=Math.round(Math.max(u,p/u));const S=c.getTilePixelSize(a,u,f);T.canvas.width=S[0],T.canvas.height=S[1];const R=u/p;if(R!==1){const L=St(this.tmpTransform_);Xe(L,R,R),T.setTransform.apply(T,L)}const P=h.getTileCoordExtent(l,this.tempExtent),_=p/m,C=St(this.tmpTransform_);Xe(C,_,-_),Vn(C,-P[0],-P[3]);for(let L=0,N=s.length;L<N;++L)s[L].execute(T,[T.canvas.width*R,T.canvas.height*R],C,0,!0,Qo[n.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class Cs extends oi{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const n=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n;const i=e.renderMode||"hybrid";bn(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Jo(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Le.PRELOAD)}getUseInterimTilesOnError(){return this.get(Le.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Le.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Le.USE_INTERIM_TILES_ON_ERROR,e)}}export{Ts as A,Fs as B,se as C,Rs as D,Ss as E,Ai as F,Di as G,xi as H,hs as I,wo as J,_s as K,ms as L,Ls as M,mi as N,K as O,yi as P,Ps as Q,ys as R,xs as T,Cs as V,gs as W,Ii as X,fs as a,te as b,ps as c,ye as d,Pe as e,Co as f,q as g,w as h,V as i,$ as j,Mi as k,Pt as l,ft as m,Lt as n,ie as o,M as p,ne as q,xn as r,E as s,y as t,j as u,Es as v,X as w,ws as x,v as y,H as z};
