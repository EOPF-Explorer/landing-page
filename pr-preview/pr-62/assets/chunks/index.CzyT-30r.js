const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/raw.DxtaBMev.js","assets/chunks/basedecoder.B2c5_Eok.js","assets/chunks/lzw.BikwkTY2.js","assets/chunks/jpeg.CbvpOiPg.js","assets/chunks/deflate.B4_27dB1.js","assets/chunks/pako.esm.BkaqWuDM.js","assets/chunks/packbits.D6Qr5eNi.js","assets/chunks/lerc.BGcNeP_q.js","assets/chunks/LercDecode.DFvlo11C.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/map.GhKd7gBL.js","assets/chunks/index.OUYS7i6-.js","assets/chunks/XYZ.DUxXAAi-.js","assets/chunks/Vector.B05eZo5v.js","assets/chunks/Layer.DfLjSwUf.js","assets/chunks/Tile.Ceeel3cy.js","assets/chunks/DataTile.DjcFEZpA.js","assets/chunks/item.Bx-rtsOD.js","assets/chunks/framework.C5l8s31R.js","assets/chunks/index.Du0sVlOV.js","assets/chunks/webimage.CU41Mh7j.js","assets/chunks/decoder.BLlLBB_C.js","assets/chunks/proj4.DQNLM3fS.js","assets/chunks/raw.BbSiPsaC.js","assets/chunks/basedecoder.mEJI0nVf.js","assets/chunks/lzw.C2ZJtbg-.js","assets/chunks/jpeg.fySNabLN.js","assets/chunks/deflate.BUfJ4wkD.js","assets/chunks/packbits.DzgHDI4c.js","assets/chunks/lerc.C76vfu5R.js","assets/chunks/zstd.CMUcIeqH.js","assets/chunks/webimage.BnbWdYiS.js","assets/chunks/blosc.nNxqTOai.js","assets/chunks/chunk-INHXZS53.D3tQiqtZ.js","assets/chunks/lz4.COuoZ_ur.js","assets/chunks/zstd.CtzXwP91.js"])))=>i.map(i=>d[i]);
var yB=Object.defineProperty;var Ku=i=>{throw TypeError(i)};var mB=(i,e,t)=>e in i?yB(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var j=(i,e,t)=>mB(i,typeof e!="symbol"?e+"":e,t),Hu=(i,e,t)=>e.has(i)||Ku("Cannot "+t);var ge=(i,e,t)=>(Hu(i,e,"read from private field"),t?t.call(i):e.get(i)),ft=(i,e,t)=>e.has(i)?Ku("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),rt=(i,e,t,r)=>(Hu(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t);import{c8 as QB,aZ as Ut,b as pe,c9 as wB,bn as ht,ca as _B,cb as SB,as as Js,cc as Eg,aN as Vn,aM as NA,b0 as Uo,G as vi,aL as Lr,a_ as ar,cd as Oo,ce as ee,cf as W,cg as Y,ch as yl,ci as zs,cj as bB,ck as RB,cl as gi,cm as js,c as xd,cn as ne,co as D,cp as Ge,cq as ue,cr as Xt,cs as GA,ct as ni,cu as En,cv as Td,cw as Vs,cx as $s,cy as K,cz as b,cA as U,cB as Yo,cC as et,cD as St,cE as ml,cF as Fd,cG as Zs,cH as Ei,cI as DB,bk as Ld,I as Mr,an as er,cJ as De,a$ as xB,aO as ui,S as qu,cK as zt,cL as _r,ax as TB,aR as Ql,bf as FB,be as LB,bu as Ws,cM as NB,bD as Bn,bJ as GB,cN as vB,aX as MB,bV as Bg,cO as Ju,bU as La,cP as zu,c4 as ju,_ as Qi,aY as wl,v as kB,cQ as PB,cR as UB,bt as br,ai as pn,ah as _l,cS as Yr,bs as ks,i as _A,N as Bt,H as Je,cT as SA,cU as aA,cV as OB,af as me,D as Nd,a4 as Et,J as Sl,cW as YB,T as KB,E as Pt,br as Ie,cX as bl,bx as gr,cY as HB,cZ as Rl,c_ as pg,c$ as yg,d0 as hi,d1 as qB,d2 as mg,Z as Na,d3 as JB,d4 as Qg,d5 as Gd,d6 as zB,d7 as rA,bH as jB,bE as Vu,d8 as VB,bI as Dl,d9 as $B,b7 as vd,a9 as qr,da as $n,db as ZB,dc as WB,dd as Ce,de as yn,df as mn,dg as Ot,dh as Mi,di as Ji,dj as XB,dk as se,dl as $u,c7 as ep,bm as tp,bp as rp,dm as Md,dn as ip,K as Qn,n as Ap,aG as Zn,l as Ur,b3 as si,dp as np,ac as Ii,$ as Ko,aH as xl,u as Xs,dq as kd,dr as wi,ds as sp,dt as op,c1 as Pd,av as fr,du as ap,dv as gp,ao as Tl,dw as lp,bo as cp,am as up,bg as hp,aF as jr,dx as Wn,bX as Xn,dy as Fl,g as Ll,bN as Ud,Y as Ip,bS as dp,aV as wg,bT as Zu,dz as fp,dA as Cp,dB as Ep,dC as Bp,dD as pp,bQ as Nl,dE as yp,dF as mp,dG as Qp,m as wp,dH as Ga,dI as wn,dJ as Gl,dK as _p,b8 as Od,a8 as Yd,dL as Wu,bl as Xu,bW as vl,dM as eh,aS as Sp,aU as bp,dN as _g,dO as Kd,at as th,ay as eo,az as Hd,aA as vA,au as rh,aB as zi,aC as Ml,dP as Rp,dQ as qd,bP as Dp,a5 as xp,dR as kl,h as Tp,bL as Fp,bM as Lp,dS as Np,aI as Gp,aJ as vp,dT as Mp,dU as Jd,dV as kp,dW as Pp,dX as Up,c3 as Op,b4 as Yp,dY as Kp,y as Hp,dZ as qp,d_ as Jp,bd as zp,bi as jp,bc as Vp,d$ as $p}from"./map.GhKd7gBL.js";import{U as sr,cy as Ho,bP as it,cz as zd,n as to,bR as Zp,I as Re,_ as es,az as MA,cA as jd,b7 as Wp,aI as Pl,u as ki,v as Pi,cB as Xp,b3 as ey,an as Ui,b4 as ty,b6 as ry,ct as qo,cC as iy,G as Tt,a1 as ro,bS as _n,cD as Es,cE as Ay,av as Ul,cF as Vd,aw as Pe,a0 as Pr,cG as ih,cH as io,cI as ny,bb as Jo,ba as ts,bw as Di,t as xi,bd as sy,a$ as Ol,J as $d,bK as Zd,cJ as oy,Z as Ah,bQ as ri,s as Yl,H as ay,x as gy,cK as Wd,cL as ly,h as Ao,aC as cy,b9 as uy,cM as Kl,bM as hy,cN as Xd,cO as Iy,A as dy,cP as fy,cQ as Cy,cR as Ey,cS as By,cT as nh,P as ef,ar as tf,aF as _t,cU as rf,cj as py,ch as yy,cV as my,cW as Qy,cm as wy,cX as kA,cb as Af,aq as Hl,bT as _y,o as nf,$ as Sy,cY as Sg,aL as va,aK as sh,aN as by,bV as Ry,aB as Dy,cZ as Bs,c_ as sf,cp as xy,F as gA,d as sn,S as _i,c$ as of,d0 as oh,y as Ty,ax as Fy,ay as Ly,ad as Ny,d1 as Gy,d2 as vy,d3 as af,X as ah,be as no,d4 as My,W as zo,M as so,aa as ky,bO as gh,d5 as Py,V as Uy,d6 as bg,a3 as Rg,d7 as Oy}from"./XYZ.DUxXAAi-.js";import{l as Yy,R as Sn,G as Ky,b as gf,M as lf,c as cf,L as uf,F as hf,B as Hy,E as qy,H as Ma,d as Jy,h as zy,D as lh,r as ch,g as jy,V as un,a as jo,e as Vy}from"./Vector.B05eZo5v.js";import{C as $y,Z as Zy}from"./Layer.DfLjSwUf.js";import{T as oo,C as Wy}from"./Tile.Ceeel3cy.js";import{c as Xy,D as If,W as uh,F as em}from"./DataTile.DjcFEZpA.js";import{S as tm,a as rm,u as ql,b as df,C as Dg,I as ao,M as im,A as ps,c as XA,i as ka,d as Am,f as nm,g as hh}from"./item.Bx-rtsOD.js";import{g as ff}from"./commonjsHelpers.BosuxZz1.js";import{a5 as At}from"./framework.C5l8s31R.js";import{p as sm}from"./index.Du0sVlOV.js";function Cf(i,e){const t=(""+i).split("."),r=(""+e).split(".");for(let A=0;A<Math.max(t.length,r.length);A++){const n=parseInt(t[A]||"0",10),s=parseInt(r[A]||"0",10);if(n>s)return 1;if(s>n)return-1}return 0}function om(i,e,t,r){const A=document.createElement("script"),n="olc_"+sr(e);function s(){delete window[n],A.parentNode.removeChild(A)}A.async=!0,A.src=i+(i.includes("?")?"&":"?")+"callback="+n;const o=setTimeout(function(){s(),t&&t()},1e4);window[n]=function(a){clearTimeout(o),s(),e(a)},document.head.appendChild(A)}let am=class extends Ho{constructor(e,t,r,A,n){const s=n!==void 0?it.IDLE:it.LOADED;super(e,t,r,s),this.loader_=n!==void 0?n:null,this.canvas_=A,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=it.ERROR):this.state=it.LOADED,this.changed()}load(){this.state==it.IDLE&&(this.state=it.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}};const Ih=[];class gm extends zd{constructor(e,t,r,A,n){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=A.bind(void 0,this),this.removeSourceTiles_=n,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=to(1,1,Ih)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=sr(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedPixelRatio:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Zp(this.context_),Ih.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Ef=class extends zd{constructor(e,t,r,A,n,s){super(e,t,s),this.extent=null,this.format_=A,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=n,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Re.IDLE&&(this.setState(Re.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Re.ERROR)}setFeatures(e){this.features_=e,this.setState(Re.LOADED)}setLoader(e){this.loader_=e}};function pt(i){return(e,...t)=>lm(i,e,t)}function PA(i,e){return pt(Bf(i,e).get)}const{apply:lm,getOwnPropertyDescriptor:Bf,getPrototypeOf:Jl,ownKeys:cm}=Reflect,{iterator:rs,toStringTag:um}=Symbol,hm=Object,{create:zl,defineProperty:Im}=hm,dm=Array,fm=dm.prototype,pf=fm[rs],Cm=pt(pf),yf=ArrayBuffer,Em=yf.prototype;PA(Em,"byteLength");const dh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;dh&&PA(dh.prototype,"byteLength");const mf=Jl(Uint8Array);mf.from;const Lt=mf.prototype;Lt[rs];pt(Lt.keys);pt(Lt.values);pt(Lt.entries);pt(Lt.set);pt(Lt.reverse);pt(Lt.fill);pt(Lt.copyWithin);pt(Lt.sort);pt(Lt.slice);pt(Lt.subarray);PA(Lt,"buffer");PA(Lt,"byteOffset");PA(Lt,"length");PA(Lt,um);const Bm=Uint8Array,Qf=Uint16Array,jl=Uint32Array,pm=Float32Array,bn=Jl([][rs]()),wf=pt(bn.next),ym=pt(function*(){}().next),mm=Jl(bn),Qm=DataView.prototype,wm=pt(Qm.getUint16),Vl=WeakMap,_f=Vl.prototype,Sf=pt(_f.get),_m=pt(_f.set),bf=new Vl,Sm=zl(null,{next:{value:function(){const e=Sf(bf,this);return wf(e)}},[rs]:{value:function(){return this}}});function bm(i){if(i[rs]===pf&&bn.next===wf)return i;const e=zl(Sm);return _m(bf,e,Cm(i)),e}const Rm=new Vl,Dm=zl(mm,{next:{value:function(){const e=Sf(Rm,this);return ym(e)},writable:!0,configurable:!0}});for(const i of cm(bn))i!=="next"&&Im(Dm,i,Bf(bn,i));const Rf=new yf(4),xm=new pm(Rf),Tm=new jl(Rf),pr=new Qf(512),yr=new Bm(512);for(let i=0;i<256;++i){const e=i-127;e<-24?(pr[i]=0,pr[i|256]=32768,yr[i]=24,yr[i|256]=24):e<-14?(pr[i]=1024>>-e-14,pr[i|256]=1024>>-e-14|32768,yr[i]=-e-1,yr[i|256]=-e-1):e<=15?(pr[i]=e+15<<10,pr[i|256]=e+15<<10|32768,yr[i]=13,yr[i|256]=13):e<128?(pr[i]=31744,pr[i|256]=64512,yr[i]=24,yr[i|256]=24):(pr[i]=31744,pr[i|256]=64512,yr[i]=13,yr[i|256]=13)}const $l=new jl(2048);for(let i=1;i<1024;++i){let e=i<<13,t=0;for(;!(e&8388608);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,$l[i]=e|t}for(let i=1024;i<2048;++i)$l[i]=939524096+(i-1024<<13);const UA=new jl(64);for(let i=1;i<31;++i)UA[i]=i<<23;UA[31]=1199570944;UA[32]=2147483648;for(let i=33;i<63;++i)UA[i]=2147483648+(i-32<<23);UA[63]=3347054592;const Df=new Qf(64);for(let i=1;i<64;++i)i!==32&&(Df[i]=1024);function Fm(i){const e=i>>10;return Tm[0]=$l[Df[e]+(i&1023)]+UA[e],xm[0]}function Vo(i,e,...t){return Fm(wm(i,e,...bm(t)))}var Zl={exports:{}};function xf(i,e,t){const r=t&&t.debug||!1;r&&console.log("[xml-utils] getting "+e+" in "+i);const A=typeof i=="object"?i.outer:i,n=A.slice(0,A.indexOf(">")+1),s=['"',"'"];for(let o=0;o<s.length;o++){const a=s[o],g=e+"\\="+a+"([^"+a+"]*)"+a;r&&console.log("[xml-utils] pattern:",g);const c=new RegExp(g).exec(n);if(r&&console.log("[xml-utils] match:",c),c)return c[1]}}Zl.exports=xf;Zl.exports.default=xf;var Lm=Zl.exports;const Pa=ff(Lm);var Wl={exports:{}},Xl={exports:{}},ec={exports:{}};function Tf(i,e,t){const A=new RegExp(e).exec(i.slice(t));return A?t+A.index:-1}ec.exports=Tf;ec.exports.default=Tf;var Nm=ec.exports,tc={exports:{}};function Ff(i,e,t){const A=new RegExp(e).exec(i.slice(t));return A?t+A.index+A[0].length-1:-1}tc.exports=Ff;tc.exports.default=Ff;var Gm=tc.exports,rc={exports:{}};function Lf(i,e){const t=new RegExp(e,"g"),r=i.match(t);return r?r.length:0}rc.exports=Lf;rc.exports.default=Lf;var vm=rc.exports;const Mm=Nm,Ua=Gm,fh=vm;function Nf(i,e,t){const r=t&&t.debug||!1,A=!(t&&typeof t.nested===!1),n=t&&t.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const s=Mm(i,`<${e}[ 
>/]`,n);if(r&&console.log("[xml-utils] start:",s),s===-1)return;const o=i.slice(s+e.length);let a=Ua(o,"^[^<]*[ /]>",0);const g=a!==-1&&o[a-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",g),g===!1)if(A){let I=0,h=1,d=0;for(;(a=Ua(o,"[ /]"+e+">",I))!==-1;){const f=o.substring(I,a+1);if(h+=fh(f,"<"+e+`[ 
	>]`),d+=fh(f,"</"+e+">"),d>=h)break;I=a}}else a=Ua(o,"[ /]"+e+">",0);const l=s+e.length+a+1;if(r&&console.log("[xml-utils] end:",l),l===-1)return;const c=i.slice(s,l);let u;return g?u=null:u=c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),{inner:u,outer:c,start:s,end:l}}Xl.exports=Nf;Xl.exports.default=Nf;var km=Xl.exports;const Pm=km;function Gf(i,e,t){const r=[],A=t&&t.debug||!1,n=t&&typeof t.nested=="boolean"?t.nested:!0;let s=t&&t.startIndex||0,o;for(;o=Pm(i,e,{debug:A,startIndex:s});)n?s=o.start+1+e.length:s=o.end,r.push(o);return A&&console.log("findTagsByName found",r.length,"tags"),r}Wl.exports=Gf;Wl.exports.default=Gf;var Um=Wl.exports;const Om=ff(Um),hn={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Qr={};for(const i in hn)hn.hasOwnProperty(i)&&(Qr[hn[i]]=parseInt(i,10));const Ym=[Qr.BitsPerSample,Qr.ExtraSamples,Qr.SampleFormat,Qr.StripByteCounts,Qr.StripOffsets,Qr.StripRowCounts,Qr.TileByteCounts,Qr.TileOffsets,Qr.SubIFDs],Oa={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ae={};for(const i in Oa)Oa.hasOwnProperty(i)&&(ae[Oa[i]]=parseInt(i,10));const vt={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},Km={Unspecified:0},TG={AddCompression:1},FG={None:0,Deflate:1,Zstandard:2},Hm={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function qm(i,e){const{width:t,height:r}=i,A=new Uint8Array(t*r*3);let n;for(let s=0,o=0;s<i.length;++s,o+=3)n=256-i[s]/e*256,A[o]=n,A[o+1]=n,A[o+2]=n;return A}function Jm(i,e){const{width:t,height:r}=i,A=new Uint8Array(t*r*3);let n;for(let s=0,o=0;s<i.length;++s,o+=3)n=i[s]/e*256,A[o]=n,A[o+1]=n,A[o+2]=n;return A}function zm(i,e){const{width:t,height:r}=i,A=new Uint8Array(t*r*3),n=e.length/3,s=e.length/3*2;for(let o=0,a=0;o<i.length;++o,a+=3){const g=i[o];A[a]=e[g]/65536*256,A[a+1]=e[g+n]/65536*256,A[a+2]=e[g+s]/65536*256}return A}function jm(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let A=0,n=0;A<i.length;A+=4,n+=3){const s=i[A],o=i[A+1],a=i[A+2],g=i[A+3];r[n]=255*((255-s)/256)*((255-g)/256),r[n+1]=255*((255-o)/256)*((255-g)/256),r[n+2]=255*((255-a)/256)*((255-g)/256)}return r}function Vm(i){const{width:e,height:t}=i,r=new Uint8ClampedArray(e*t*3);for(let A=0,n=0;A<i.length;A+=3,n+=3){const s=i[A],o=i[A+1],a=i[A+2];r[n]=s+1.402*(a-128),r[n+1]=s-.34414*(o-128)-.71414*(a-128),r[n+2]=s+1.772*(o-128)}return r}const $m=.95047,Zm=1,Wm=1.08883;function Xm(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let A=0,n=0;A<i.length;A+=3,n+=3){const s=i[A+0],o=i[A+1]<<24>>24,a=i[A+2]<<24>>24;let g=(s+16)/116,l=o/500+g,c=g-a/200,u,I,h;l=$m*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),g=Zm*(g*g*g>.008856?g*g*g:(g-16/116)/7.787),c=Wm*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=l*3.2406+g*-1.5372+c*-.4986,I=l*-.9689+g*1.8758+c*.0415,h=l*.0557+g*-.204+c*1.057,u=u>.0031308?1.055*u**(1/2.4)-.055:12.92*u,I=I>.0031308?1.055*I**(1/2.4)-.055:12.92*I,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,r[n]=Math.max(0,Math.min(1,u))*255,r[n+1]=Math.max(0,Math.min(1,I))*255,r[n+2]=Math.max(0,Math.min(1,h))*255}return r}const vf=new Map;function fi(i,e){Array.isArray(i)||(i=[i]),i.forEach(t=>vf.set(t,e))}async function Mf(i){const e=vf.get(i.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${i.Compression}`);const t=await e();return new t(i)}fi([void 0,1],()=>At(()=>import("./raw.DxtaBMev.js"),__vite__mapDeps([0,1])).then(i=>i.default));fi(5,()=>At(()=>import("./lzw.BikwkTY2.js"),__vite__mapDeps([2,1])).then(i=>i.default));fi(6,()=>{throw new Error("old style JPEG compression is not supported.")});fi(7,()=>At(()=>import("./jpeg.CbvpOiPg.js"),__vite__mapDeps([3,1])).then(i=>i.default));fi([8,32946],()=>At(()=>import("./deflate.B4_27dB1.js"),__vite__mapDeps([4,5,1])).then(i=>i.default));fi(32773,()=>At(()=>import("./packbits.D6Qr5eNi.js"),__vite__mapDeps([6,1])).then(i=>i.default));fi(34887,()=>At(()=>import("./lerc.BGcNeP_q.js"),__vite__mapDeps([7,5,8,9,1,10,11,12,13,14,15,16,17,18,19])).then(async i=>(await i.zstd.init(),i)).then(i=>i.default));fi(50001,()=>At(()=>import("./webimage.CU41Mh7j.js"),__vite__mapDeps([20,1])).then(i=>i.default));function $o(i,e,t,r=1){return new(Object.getPrototypeOf(i)).constructor(e*t*r)}function eQ(i,e,t,r,A){const n=e/r,s=t/A;return i.map(o=>{const a=$o(o,r,A);for(let g=0;g<A;++g){const l=Math.min(Math.round(s*g),t-1);for(let c=0;c<r;++c){const u=Math.min(Math.round(n*c),e-1),I=o[l*e+u];a[g*r+c]=I}}return a})}function IA(i,e,t){return(1-t)*i+t*e}function tQ(i,e,t,r,A){const n=e/r,s=t/A;return i.map(o=>{const a=$o(o,r,A);for(let g=0;g<A;++g){const l=s*g,c=Math.floor(l),u=Math.min(Math.ceil(l),t-1);for(let I=0;I<r;++I){const h=n*I,d=h%1,f=Math.floor(h),C=Math.min(Math.ceil(h),e-1),E=o[c*e+f],B=o[c*e+C],m=o[u*e+f],p=o[u*e+C],y=IA(IA(E,B,d),IA(m,p,d),l%1);a[g*r+I]=y}}return a})}function rQ(i,e,t,r,A,n="nearest"){switch(n.toLowerCase()){case"nearest":return eQ(i,e,t,r,A);case"bilinear":case"linear":return tQ(i,e,t,r,A);default:throw new Error(`Unsupported resampling method: '${n}'`)}}function iQ(i,e,t,r,A,n){const s=e/r,o=t/A,a=$o(i,r,A,n);for(let g=0;g<A;++g){const l=Math.min(Math.round(o*g),t-1);for(let c=0;c<r;++c){const u=Math.min(Math.round(s*c),e-1);for(let I=0;I<n;++I){const h=i[l*e*n+u*n+I];a[g*r*n+c*n+I]=h}}}return a}function AQ(i,e,t,r,A,n){const s=e/r,o=t/A,a=$o(i,r,A,n);for(let g=0;g<A;++g){const l=o*g,c=Math.floor(l),u=Math.min(Math.ceil(l),t-1);for(let I=0;I<r;++I){const h=s*I,d=h%1,f=Math.floor(h),C=Math.min(Math.ceil(h),e-1);for(let E=0;E<n;++E){const B=i[c*e*n+f*n+E],m=i[c*e*n+C*n+E],p=i[u*e*n+f*n+E],y=i[u*e*n+C*n+E],Q=IA(IA(B,m,d),IA(p,y,d),l%1);a[g*r*n+I*n+E]=Q}}}return a}function nQ(i,e,t,r,A,n,s="nearest"){switch(s.toLowerCase()){case"nearest":return iQ(i,e,t,r,A,n);case"bilinear":case"linear":return AQ(i,e,t,r,A,n);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function sQ(i,e,t){let r=0;for(let A=e;A<t;++A)r+=i[A];return r}function xg(i,e,t){switch(i){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function oQ(i,e){return(i===1||i===2)&&e<=32&&e%8===0?!1:!(i===3&&(e===16||e===32||e===64))}function aQ(i,e,t,r,A,n,s){const o=new DataView(i),a=t===2?s*n:s*n*r,g=t===2?1:r,l=xg(e,A,a),c=parseInt("1".repeat(A),2);if(e===1){let u;t===1?u=r*A:u=A;let I=n*u;I&7&&(I=I+7&-8);for(let h=0;h<s;++h){const d=h*I;for(let f=0;f<n;++f){const C=d+f*g*A;for(let E=0;E<g;++E){const B=C+E*A,m=(h*n+f)*g+E,p=Math.floor(B/8),y=B%8;if(y+A<=8)l[m]=o.getUint8(p)>>8-A-y&c;else if(y+A<=16)l[m]=o.getUint16(p)>>16-A-y&c;else if(y+A<=24){const Q=o.getUint16(p)<<8|o.getUint8(p+2);l[m]=Q>>24-A-y&c}else l[m]=o.getUint32(p)>>32-A-y&c}}}}return l.buffer}let kf=class{constructor(e,t,r,A,n,s){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=A,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;const o=e.PlanarConfiguration;if(this.planarConfiguration=typeof o>"u"?1:o,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(A,n){return Vo(this,A,n)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const r=this.getSampleFormat(e),A=this.getBitsPerSample(e);return xg(r,A,t)}async getTileOrStrip(e,t,r,A,n){const s=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:g}=this;this.planarConfiguration===1?a=t*s+e:this.planarConfiguration===2&&(a=r*s*o+t*s+e);let l,c;this.isTiled?(l=this.fileDirectory.TileOffsets[a],c=this.fileDirectory.TileByteCounts[a]):(l=this.fileDirectory.StripOffsets[a],c=this.fileDirectory.StripByteCounts[a]);const u=(await this.source.fetch([{offset:l,length:c}],n))[0];let I;return g===null||!g[a]?(I=(async()=>{let h=await A.decode(this.fileDirectory,u);const d=this.getSampleFormat(),f=this.getBitsPerSample();return oQ(d,f)&&(h=aQ(h,d,this.planarConfiguration,this.getSamplesPerPixel(),f,this.getTileWidth(),this.getBlockHeight(t))),h})(),g!==null&&(g[a]=I)):I=g[a],{x:e,y:t,sample:r,data:await I}}async _readRaster(e,t,r,A,n,s,o,a,g){const l=this.getTileWidth(),c=this.getTileHeight(),u=this.getWidth(),I=this.getHeight(),h=Math.max(Math.floor(e[0]/l),0),d=Math.min(Math.ceil(e[2]/l),Math.ceil(u/l)),f=Math.max(Math.floor(e[1]/c),0),C=Math.min(Math.ceil(e[3]/c),Math.ceil(I/c)),E=e[2]-e[0];let B=this.getBytesPerPixel();const m=[],p=[];for(let _=0;_<t.length;++_)this.planarConfiguration===1?m.push(sQ(this.fileDirectory.BitsPerSample,0,t[_])/8):m.push(0),p.push(this.getReaderForSample(t[_]));const y=[],{littleEndian:Q}=this;for(let _=f;_<C;++_)for(let w=h;w<d;++w){let S;this.planarConfiguration===1&&(S=this.getTileOrStrip(w,_,0,n,g));for(let R=0;R<t.length;++R){const F=R,M=t[R];this.planarConfiguration===2&&(B=this.getSampleByteSize(M),S=this.getTileOrStrip(w,_,M,n,g));const G=S.then(x=>{const N=x.data,v=new DataView(N),z=this.getBlockHeight(x.y),q=x.y*c,$=x.x*l,re=q+z,Qe=(x.x+1)*l,te=p[F],P=Math.min(z,z-(re-e[3]),I-q),Me=Math.min(l,l-(Qe-e[2]),u-$);for(let Le=Math.max(0,e[1]-q);Le<P;++Le)for(let fe=Math.max(0,e[0]-$);fe<Me;++fe){const Ze=(Le*l+fe)*B,Oe=te.call(v,Ze+m[F],Q);let tt;A?(tt=(Le+q-e[1])*E*t.length+(fe+$-e[0])*t.length+F,r[tt]=Oe):(tt=(Le+q-e[1])*E+fe+$-e[0],r[F][tt]=Oe)}});y.push(G)}}if(await Promise.all(y),s&&e[2]-e[0]!==s||o&&e[3]-e[1]!==o){let _;return A?_=nQ(r,e[2]-e[0],e[3]-e[1],s,o,t.length,a):_=rQ(r,e[2]-e[0],e[3]-e[1],s,o,a),_.width=s,_.height=o,_}return r.width=s||e[2]-e[0],r.height=o||e[3]-e[1],r}async readRasters({window:e,samples:t=[],interleave:r,pool:A=null,width:n,height:s,resampleMethod:o,fillValue:a,signal:g}={}){const l=e||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=l[2]-l[0],u=l[3]-l[1],I=c*u,h=this.getSamplesPerPixel();if(!t||!t.length)for(let E=0;E<h;++E)t.push(E);else for(let E=0;E<t.length;++E)if(t[E]>=h)return Promise.reject(new RangeError(`Invalid sample index '${t[E]}'.`));let d;if(r){const E=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,B=Math.max.apply(null,this.fileDirectory.BitsPerSample);d=xg(E,B,I*t.length),a&&d.fill(a)}else{d=[];for(let E=0;E<t.length;++E){const B=this.getArrayForSample(t[E],I);Array.isArray(a)&&E<a.length?B.fill(a[E]):a&&!Array.isArray(a)&&B.fill(a),d.push(B)}}const f=A||await Mf(this.fileDirectory);return await this._readRaster(l,t,d,r,f,n,s,o,g)}async readRGB({window:e,interleave:t=!0,pool:r=null,width:A,height:n,resampleMethod:s,enableAlpha:o=!1,signal:a}={}){const g=e||[0,0,this.getWidth(),this.getHeight()];if(g[0]>g[2]||g[1]>g[3])throw new Error("Invalid subsets");const l=this.fileDirectory.PhotometricInterpretation;if(l===vt.RGB){let C=[0,1,2];if(this.fileDirectory.ExtraSamples!==Km.Unspecified&&o){C=[];for(let E=0;E<this.fileDirectory.BitsPerSample.length;E+=1)C.push(E)}return this.readRasters({window:e,interleave:t,samples:C,pool:r,width:A,height:n,resampleMethod:s,signal:a})}let c;switch(l){case vt.WhiteIsZero:case vt.BlackIsZero:case vt.Palette:c=[0];break;case vt.CMYK:c=[0,1,2,3];break;case vt.YCbCr:case vt.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const u={window:g,interleave:!0,samples:c,pool:r,width:A,height:n,resampleMethod:s,signal:a},{fileDirectory:I}=this,h=await this.readRasters(u),d=2**this.fileDirectory.BitsPerSample[0];let f;switch(l){case vt.WhiteIsZero:f=qm(h,d);break;case vt.BlackIsZero:f=Jm(h,d);break;case vt.Palette:f=zm(h,I.ColorMap);break;case vt.CMYK:f=jm(h);break;case vt.YCbCr:f=Vm(h);break;case vt.CIELab:f=Xm(h);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const C=new Uint8Array(f.length/3),E=new Uint8Array(f.length/3),B=new Uint8Array(f.length/3);for(let m=0,p=0;m<f.length;m+=3,++p)C[p]=f[m],E[p]=f[m+1],B[p]=f[m+2];f=[C,E,B]}return f.width=h.width,f.height=h.height,f}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let A=Om(r,"Item");e===null?A=A.filter(n=>Pa(n,"sample")===void 0):A=A.filter(n=>Number(Pa(n,"sample"))===e);for(let n=0;n<A.length;++n){const s=A[n];t[Pa(s,"name")]=s.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){const[A,n,s]=e.getResolution();return[A*e.getWidth()/this.getWidth(),n*e.getHeight()/this.getHeight(),s*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const t=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[A,n,s,o,a,g,l,c]=this.fileDirectory.ModelTransformation,I=[[0,0],[0,t],[r,0],[r,t]].map(([f,C])=>[o+A*f+n*C,c+a*f+g*C]),h=I.map(f=>f[0]),d=I.map(f=>f[1]);return[Math.min(...h),Math.min(...d),Math.max(...h),Math.max(...d)]}else{const A=this.getOrigin(),n=this.getResolution(),s=A[0],o=A[1],a=s+n[0]*r,g=o+n[1]*t;return[Math.min(s,a),Math.min(o,g),Math.max(s,a),Math.max(o,g)]}}},gQ=class{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const r=this.getUint32(e,t),A=this.getUint32(e+4,t);let n;if(t){if(n=r+2**32*A,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*r+A,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}getInt64(e,t){let r=0;const A=(this._dataView.getUint8(e+(t?7:0))&128)>0;let n=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(t?s:7-s));A&&(n?o!==0&&(o=~(o-1)&255,n=!1):o=~o&255),r+=o*256**s}return A&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return Vo(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}},lQ=class{constructor(e,t,r,A){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=A}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),r=this.readUint32(e+4);let A;if(this._littleEndian){if(A=t+2**32*r,!Number.isSafeInteger(A))throw new Error(`${A} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return A}if(A=2**32*t+r,!Number.isSafeInteger(A))throw new Error(`${A} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return A}readInt64(e){let t=0;const r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let A=!0;for(let n=0;n<8;n++){let s=this._dataView.getUint8(e+(this._littleEndian?n:7-n));r&&(A?s!==0&&(s=~(s-1)&255,A=!1):s=~s&255),t+=s*256**n}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}};const cQ=typeof navigator<"u"&&navigator.hardwareConcurrency||2;let uQ=class{constructor(e=cQ,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(r=>{At(()=>import("./decoder.BLlLBB_C.js"),__vite__mapDeps([21,10,11,12,13,14,15,16,17,9,18,19])).then(A=>{r(A.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let A=0;A<e;A++)this.workers.push({worker:r(),idle:!0})}))}async decode(e,t){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?Mf(e).then(r=>r.decode(e,t)):new Promise(r=>{const A=this.workers.find(o=>o.idle)||this.workers[Math.floor(Math.random()*this.size)];A.idle=!1;const n=this.messageId++,s=o=>{o.data.id===n&&(A.idle=!0,r(o.data.decoded),A.worker.removeEventListener("message",s))};A.worker.addEventListener("message",s),A.worker.postMessage({fileDirectory:e,buffer:t,id:n},[t])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}};const Ch=`\r
\r
`;function Pf(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const e={};for(const[t,r]of i)e[t.toLowerCase()]=r;return e}function hQ(i){const e=i.split(`\r
`).map(t=>{const r=t.split(":").map(A=>A.trim());return r[0]=r[0].toLowerCase(),r});return Pf(e)}function IQ(i){const[e,...t]=i.split(";").map(A=>A.trim()),r=t.map(A=>A.split("="));return{type:e,params:Pf(r)}}function Tg(i){let e,t,r;return i&&([,e,t,r]=i.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10)),{start:e,end:t,total:r}}function dQ(i,e){let t=null;const r=new TextDecoder("ascii"),A=[],n=`--${e}`,s=`${n}--`;for(let o=0;o<10;++o)r.decode(new Uint8Array(i,o,n.length))===n&&(t=o);if(t===null)throw new Error("Could not find initial boundary");for(;t<i.byteLength;){const o=r.decode(new Uint8Array(i,t,Math.min(n.length+1024,i.byteLength-t)));if(o.length===0||o.startsWith(s))break;if(!o.startsWith(n))throw new Error("Part does not start with boundary");const a=o.substr(n.length+2);if(a.length===0)break;const g=a.indexOf(Ch),l=hQ(a.substr(0,g)),{start:c,end:u,total:I}=Tg(l["content-range"]),h=t+n.length+g+Ch.length,d=parseInt(u,10)+1-parseInt(c,10);A.push({headers:l,data:i.slice(h,h+d),offset:c,length:d,fileSize:I}),t=h+d+4}return A}let ic=class{async fetch(e,t=void 0){return Promise.all(e.map(r=>this.fetchSlice(r,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}};class Uf extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){const A=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:A}):this._set(e,{value:t,expiry:A}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const r=e[t],[A,n]=r;this._deleteIfExpired(A,n)===!1&&(yield[A,n.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const r=e[t],[A,n]=r;this.cache.has(A)||this._deleteIfExpired(A,n)===!1&&(yield[A,n.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[r,A]of this.entriesAscending())e.call(t,A,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function fQ(i){return new Promise(e=>setTimeout(e,i))}function CQ(i,e){const t=Array.isArray(i)?i:Array.from(i),r=Array.isArray(e)?e:Array.from(e);return t.map((A,n)=>[A,r[n]])}let go=class Of extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Of),this.name="AbortError"}},EQ=class extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}};const BQ=EQ;let pQ=class{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}},Eh=class{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}},yQ=class extends ic{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Uf({maxSize:r,onEviction:(A,n)=>{this.evictedBlocks.set(A,n)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const r=[],A=[],n=[];this.evictedBlocks.clear();for(const{offset:u,length:I}of e){let h=u+I;const{fileSize:d}=this;d!==null&&(h=Math.min(h,d));const f=Math.floor(u/this.blockSize)*this.blockSize;for(let C=f;C<h;C+=this.blockSize){const E=Math.floor(C/this.blockSize);!this.blockCache.has(E)&&!this.blockRequests.has(E)&&(this.blockIdsToFetch.add(E),A.push(E)),this.blockRequests.has(E)&&r.push(this.blockRequests.get(E)),n.push(E)}}await fQ(),this.fetchBlocks(t);const s=[];for(const u of A)this.blockRequests.has(u)&&s.push(this.blockRequests.get(u));await Promise.allSettled(r),await Promise.allSettled(s);const o=[],a=n.filter(u=>this.abortedBlockIds.has(u)||!this.blockCache.has(u));if(a.forEach(u=>this.blockIdsToFetch.add(u)),a.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const u of a){const I=this.blockRequests.get(u);if(!I)throw new Error(`Block ${u} is not in the block requests`);o.push(I)}await Promise.allSettled(o)}if(t&&t.aborted)throw new go("Request was aborted");const g=n.map(u=>this.blockCache.get(u)||this.evictedBlocks.get(u)),l=g.filter(u=>!u);if(l.length)throw new BQ(l,"Request failed");const c=new Map(CQ(n,g));return this.readSliceData(e,c)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let A=0;A<t.length;++A){const n=t[A];for(const s of n.blockIds)this.blockRequests.set(s,(async()=>{try{const o=(await r)[A],a=s*this.blockSize,g=a-o.offset,l=Math.min(g+this.blockSize,o.data.byteLength),c=o.data.slice(g,l),u=new pQ(a,c.byteLength,c,s);this.blockCache.set(s,u),this.abortedBlockIds.delete(s)}catch(o){if(o.name==="AbortError")o.signal=e,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw o}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((s,o)=>s-o);if(t.length===0)return[];let r=[],A=null;const n=[];for(const s of t)A===null||A+1===s?(r.push(s),A=s):(n.push(new Eh(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],A=s);return n.push(new Eh(r[0]*this.blockSize,r.length*this.blockSize,r)),n}readSliceData(e,t){return e.map(r=>{let A=r.offset+r.length;this.fileSize!==null&&(A=Math.min(this.fileSize,A));const n=Math.floor(r.offset/this.blockSize),s=Math.floor(A/this.blockSize),o=new ArrayBuffer(r.length),a=new Uint8Array(o);for(let g=n;g<=s;++g){const l=t.get(g),c=l.offset-r.offset,u=l.top-A;let I=0,h=0,d;c<0?I=-c:c>0&&(h=c),u<0?d=l.length-I:d=A-l.offset-I;const f=new Uint8Array(l.data,I,d);a.set(f,h)}return o})}},Ac=class{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}},nc=class{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}},mQ=class extends Ac{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}},QQ=class extends nc{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const r=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new mQ(r)}},wQ=class extends Ac{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}},_Q=class extends nc{constructRequest(e,t){return new Promise((r,A)=>{const n=new XMLHttpRequest;n.open("GET",this.url),n.responseType="arraybuffer";for(const[s,o]of Object.entries(e))n.setRequestHeader(s,o);n.onload=()=>{const s=n.response;r(new wQ(n,s))},n.onerror=A,n.onabort=()=>A(new go("Request aborted")),n.send(),t&&(t.aborted&&n.abort(),t.addEventListener("abort",()=>n.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}};const dA={};let SQ=class extends Ac{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}},bQ=class extends nc{constructor(e){super(e),this.parsedUrl=dA.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",dA)}constructRequest(e,t){return new Promise((r,A)=>{const n=this.httpApi.get({...this.parsedUrl,headers:e},s=>{const o=new Promise(a=>{const g=[];s.on("data",l=>{g.push(l)}),s.on("end",()=>{const l=Buffer.concat(g).buffer;a(l)}),s.on("error",A)});r(new SQ(s,o))});n.on("error",A),t&&(t.aborted&&n.destroy(new go("Request aborted")),t.addEventListener("abort",()=>n.destroy(new go("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}},sc=class extends ic{constructor(e,t,r,A){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=A,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,t))))}async fetchSlices(e,t){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:A,length:n})=>`${A}-${A+n}`).join(",")}`},signal:t});if(r.ok)if(r.status===206){const{type:A,params:n}=IQ(r.getHeader("content-type"));if(A==="multipart/byteranges"){const c=dQ(await r.getData(),n.boundary);return this._fileSize=c[0].fileSize||null,c}const s=await r.getData(),{start:o,end:a,total:g}=Tg(r.getHeader("content-range"));this._fileSize=g||null;const l=[{data:s,offset:o,length:a-o}];if(e.length>1){const c=await Promise.all(e.slice(1).map(u=>this.fetchSlice(u,t)));return l.concat(c)}return l}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const A=await r.getData();return this._fileSize=A.byteLength,[{data:A,offset:0,length:A.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:r,length:A}=e,n=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+A}`},signal:t});if(n.ok)if(n.status===206){const s=await n.getData(),{total:o}=Tg(n.getHeader("content-range"));return this._fileSize=o||null,{data:s,offset:r,length:A}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await n.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}};function oc(i,{blockSize:e,cacheSize:t}){return e===null?i:new yQ(i,{blockSize:e,cacheSize:t})}function RQ(i,{headers:e={},credentials:t,maxRanges:r=0,allowFullFile:A=!1,...n}={}){const s=new QQ(i,t),o=new sc(s,e,r,A);return oc(o,n)}function DQ(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...A}={}){const n=new _Q(i),s=new sc(n,e,t,r);return oc(s,A)}function xQ(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...A}={}){const n=new bQ(i),s=new sc(n,e,t,r);return oc(s,A)}function Fg(i,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?RQ(i,t):typeof XMLHttpRequest<"u"?DQ(i,t):xQ(i,t)}let TQ=class extends ic{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise((r,A)=>{const n=this.file.slice(e.offset,e.offset+e.length),s=new FileReader;s.onload=o=>r(o.target.result),s.onerror=A,s.onabort=A,s.readAsArrayBuffer(n),t&&t.addEventListener("abort",()=>s.abort())})}};function FQ(i){return new TQ(i)}function Lg(i){switch(i){case ae.BYTE:case ae.ASCII:case ae.SBYTE:case ae.UNDEFINED:return 1;case ae.SHORT:case ae.SSHORT:return 2;case ae.LONG:case ae.SLONG:case ae.FLOAT:case ae.IFD:return 4;case ae.RATIONAL:case ae.SRATIONAL:case ae.DOUBLE:case ae.LONG8:case ae.SLONG8:case ae.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${i}`)}}function LQ(i){const e=i.GeoKeyDirectory;if(!e)return null;const t={};for(let r=4;r<=e[3]*4;r+=4){const A=Hm[e[r]],n=e[r+1]?hn[e[r+1]]:null,s=e[r+2],o=e[r+3];let a=null;if(!n)a=o;else{if(a=i[n],typeof a>"u"||a===null)throw new Error(`Could not get value of geoKey '${A}'.`);typeof a=="string"?a=a.substring(o,o+s-1):a.subarray&&(a=a.subarray(o,o+s),s===1&&(a=a[0]))}t[A]=a}return t}function Zi(i,e,t,r){let A=null,n=null;const s=Lg(e);switch(e){case ae.BYTE:case ae.ASCII:case ae.UNDEFINED:A=new Uint8Array(t),n=i.readUint8;break;case ae.SBYTE:A=new Int8Array(t),n=i.readInt8;break;case ae.SHORT:A=new Uint16Array(t),n=i.readUint16;break;case ae.SSHORT:A=new Int16Array(t),n=i.readInt16;break;case ae.LONG:case ae.IFD:A=new Uint32Array(t),n=i.readUint32;break;case ae.SLONG:A=new Int32Array(t),n=i.readInt32;break;case ae.LONG8:case ae.IFD8:A=new Array(t),n=i.readUint64;break;case ae.SLONG8:A=new Array(t),n=i.readInt64;break;case ae.RATIONAL:A=new Uint32Array(t*2),n=i.readUint32;break;case ae.SRATIONAL:A=new Int32Array(t*2),n=i.readInt32;break;case ae.FLOAT:A=new Float32Array(t),n=i.readFloat32;break;case ae.DOUBLE:A=new Float64Array(t),n=i.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===ae.RATIONAL||e===ae.SRATIONAL)for(let o=0;o<t;o+=2)A[o]=n.call(i,r+o*s),A[o+1]=n.call(i,r+(o*s+4));else for(let o=0;o<t;++o)A[o]=n.call(i,r+o*s);return e===ae.ASCII?new TextDecoder("utf-8").decode(A):A}let NQ=class{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}},ys=class extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}},Yf=class{async readRasters(e={}){const{window:t,width:r,height:A}=e;let{resX:n,resY:s,bbox:o}=e;const a=await this.getImage();let g=a;const l=await this.getImageCount(),c=a.getBoundingBox();if(t&&o)throw new Error('Both "bbox" and "window" passed.');if(r||A){if(t){const[h,d]=a.getOrigin(),[f,C]=a.getResolution();o=[h+t[0]*f,d+t[1]*C,h+t[2]*f,d+t[3]*C]}const I=o||c;if(r){if(n)throw new Error("Both width and resX passed");n=(I[2]-I[0])/r}if(A){if(s)throw new Error("Both width and resY passed");s=(I[3]-I[1])/A}}if(n||s){const I=[];for(let h=0;h<l;++h){const d=await this.getImage(h),{SubfileType:f,NewSubfileType:C}=d.fileDirectory;(h===0||f===2||C&1)&&I.push(d)}I.sort((h,d)=>h.getWidth()-d.getWidth());for(let h=0;h<I.length;++h){const d=I[h],f=(c[2]-c[0])/d.getWidth(),C=(c[3]-c[1])/d.getHeight();if(g=d,n&&n>f||s&&s>C)break}}let u=t;if(o){const[I,h]=a.getOrigin(),[d,f]=g.getResolution(a);u=[Math.round((o[0]-I)/d),Math.round((o[1]-h)/f),Math.round((o[2]-I)/d),Math.round((o[3]-h)/f)],u=[Math.min(u[0],u[2]),Math.min(u[1],u[3]),Math.max(u[0],u[2]),Math.max(u[1],u[3])]}return g.readRasters({...e,window:u})}},lo=class Kf extends Yf{constructor(e,t,r,A,n={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=A,this.cache=n.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new lQ((await this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,r=this.bigTiff?8:2;let A=await this.getSlice(e);const n=this.bigTiff?A.readUint64(e):A.readUint16(e),s=n*t+(this.bigTiff?16:6);A.covers(e,s)||(A=await this.getSlice(e,s));const o={};let a=e+(this.bigTiff?8:2);for(let c=0;c<n;a+=t,++c){const u=A.readUint16(a),I=A.readUint16(a+2),h=this.bigTiff?A.readUint64(a+4):A.readUint32(a+4);let d,f;const C=Lg(I),E=a+(this.bigTiff?12:8);if(C*h<=(this.bigTiff?8:4))d=Zi(A,I,h,E);else{const B=A.readOffset(E),m=Lg(I)*h;if(A.covers(B,m))d=Zi(A,I,h,B);else{const p=await this.getSlice(B,m);d=Zi(p,I,h,B)}}h===1&&Ym.indexOf(u)===-1&&!(I===ae.RATIONAL||I===ae.SRATIONAL)?f=d[0]:f=d,o[hn[u]]=f}const g=LQ(o),l=A.readOffset(e+r+t*n);return new NQ(o,g,l)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof ys?new ys(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new ys(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new kf(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(r){if(r instanceof ys)t=!1;else throw r}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100;let A=await this.getSlice(e,r);if(t===Zi(A,ae.ASCII,t.length,e)){const s=Zi(A,ae.ASCII,r,e).split(`
`)[0],o=Number(s.split("=")[1].split(" ")[0])+s.length;o>r&&(A=await this.getSlice(e,o));const a=Zi(A,ae.ASCII,o,e);this.ghostValues={},a.split(`
`).filter(g=>g.length>0).map(g=>g.split("=")).forEach(([g,l])=>{this.ghostValues[g]=l})}return this.ghostValues}static async fromSource(e,t,r){const A=(await e.fetch([{offset:0,length:1024}],r))[0],n=new gQ(A),s=n.getUint16(0,0);let o;if(s===18761)o=!0;else if(s===19789)o=!1;else throw new TypeError("Invalid byte order value.");const a=n.getUint16(2,o);let g;if(a===42)g=!1;else if(a===43){if(g=!0,n.getUint16(4,o)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const l=g?n.getUint64(8,o):n.getUint32(4,o);return new Kf(e,o,g,l,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}},GQ=class extends Yf{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,r=0;for(let A=0;A<this.imageFiles.length;A++){const n=this.imageFiles[A];for(let s=0;s<this.imageCounts[A];s++){if(e===t){const o=await n.requestIFD(r);return new kf(o.fileDirectory,o.geoKeyDirectory,n.dataView,n.littleEndian,n.cache,n.source)}t++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((t,r)=>t+r,0),this.imageCount}};async function vQ(i,e={},t){return lo.fromSource(Fg(i,e),t)}async function MQ(i,e){return lo.fromSource(FQ(i),e)}async function kQ(i,e=[],t={},r){const A=await lo.fromSource(Fg(i,t),r),n=await Promise.all(e.map(s=>lo.fromSource(Fg(s,t))));return new GQ(A,n)}function Ng(i){return Array.isArray(i)?Math.min(...i):i}class PQ extends Ho{constructor(e,t,r,A,n,s,o){let a=e.getExtent();a&&e.canWrapX()&&(a=a.slice(),a[0]=-1/0,a[2]=1/0);let g=t.getExtent();g&&t.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);const l=g?es(r,g):r,c=MA(l),u=jd(e,t,c,A),I=ry,h=new Wp(e,t,l,a,u*I,A),d=h.calculateSourceExtent(),f=Pl(d)?null:s(d,u,n),C=f?it.IDLE:it.EMPTY,E=f?f.getPixelRatio():1;super(r,A,E,C),this.targetProj_=t,this.maxSourceExtent_=a,this.triangulation_=h,this.targetResolution_=A,this.targetExtent_=r,this.sourceImage_=f,this.sourcePixelRatio_=E,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==it.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==it.LOADED){const t=ki(this.targetExtent_)/this.targetResolution_,r=Pi(this.targetExtent_)/this.targetResolution_;this.canvas_=Xp(t,r,this.sourcePixelRatio_,Ng(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==it.IDLE){this.state=it.LOADING,this.changed();const e=this.sourceImage_.getState();e==it.LOADED||e==it.ERROR?this.reproject_():(this.sourceListenerKey_=ey(this.sourceImage_,Ui.CHANGE,t=>{const r=this.sourceImage_.getState();(r==it.LOADED||r==it.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ty(this.sourceListenerKey_),this.sourceListenerKey_=null}}const lA=4,Ya={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class UQ extends Ul{constructor(e,t){super(e),this.image=t}}class ac extends qo{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=iy(t,e,0);e=t[r]}return e}getImage(e,t,r,A){const n=this.getProjection();if(!n||!A||Tt(n,A))return n&&(A=n),this.getImageInternal(e,t,r,A);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Tt(this.reprojectedImage_.getProjection(),A)&&this.reprojectedImage_.getResolution()==t&&ro(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new PQ(n,A,e,t,r,(s,o,a)=>this.getImageInternal(s,o,a,n),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,A){if(this.loader){const n=YQ(e,t,r,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===A&&(this.wantedExtent_&&_n(this.wantedExtent_,n)||_n(this.image.getExtent(),n))&&(this.wantedResolution_&&Ng(this.wantedResolution_)===s||Ng(this.image.getResolution())===s)))return this.image;this.wantedProjection_=A,this.wantedExtent_=n,this.wantedResolution_=s,this.image=new Ho(n,s,r,this.loader),this.image.addEventListener(Ui.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case it.LOADING:this.loading=!0,r=Ya.IMAGELOADSTART;break;case it.LOADED:this.loading=!1,r=Ya.IMAGELOADEND;break;case it.ERROR:this.loading=!1,r=Ya.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new UQ(r,t))}}function OQ(i,e){i.getImage().src=e}function YQ(i,e,t,r){const A=e/t,n=MA(i),s=Es(ki(i)/A,lA),o=Es(Pi(i)/A,lA),a=Es((r-1)*s/2,lA),g=s+2*a,l=Es((r-1)*o/2,lA),c=o+2*l;return Ay(n,A,0,[g,c])}function KQ(i){const e=i.load||Vd,t=i.imageExtent,r=i.crossOrigin??null;return()=>{const A=new Image;return A.crossOrigin=r,e(A,i.url).then(n=>{const s=ki(t)/n.width,o=Pi(t)/n.height;return{image:n,extent:t,resolution:s!==o?[s,o]:o,pixelRatio:1}})}}let HQ=class extends ac{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:OQ;super({attributions:e.attributions,interpolate:e.interpolate,projection:Pe(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new Ho(this.imageExtent_,void 0,1,KQ({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(A,n)=>(this.image.setImage(A),r(this.image,n),Vd(A))})),this.image.addEventListener(Ui.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,r,A){return Pr(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}};const Gg="1.3.0";function qQ(i,e,t,r,A){A.WIDTH=t[0],A.HEIGHT=t[1];const n=r.getAxisOrientation(),s=Cf(A.VERSION,"1.3")>=0;A[s?"CRS":"SRS"]=r.getCode();const o=s&&n.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return A.BBOX=o.join(","),io(i,A)}function JQ(i,e,t,r,A,n,s){n=Object.assign({REQUEST:"GetMap"},n);const o=e/t,a=[ih(ki(i)/o,lA),ih(Pi(i)/o,lA)];if(t!=1)switch(s){case"geoserver":const l=90*t+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+l:n.FORMAT_OPTIONS="dpi:"+l;break;case"mapserver":n.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":n.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return qQ(A,i,a,r,n)}function Bh(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Gg,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},i)}class is extends ny{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Jo(t),A=e.tileGrid||ts({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:A,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Hf,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Ef,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Re.IDLE){r.setState(Re.LOADING);const A=r.wrappedTileCoord,n=this.getTileGridForProjection(t);let s=n.getTileCoordExtent(A);const o=A[0],a=n.getResolution(o);Di(s,-a,s);const g=this.projection;t&&this.projection&&!Tt(t,g)&&(s=xi(s,t,g));const l=this.tileGrid,c=l.getExtent();c&&es(s,c,s);let u=a;t&&g&&!Tt(t,g)&&(u=a/g.getMetersPerUnit()/t.getMetersPerUnit());const I=l.getZForResolution(u,this.zDirection);l.forEachTileCoord(s,I,h=>{const d=this.tileUrlFunction(h,e,t);this.sourceTiles_[d]||(this.sourceTiles_[d]=new this.tileClass(h,d?Re.IDLE:Re.EMPTY,d,this.format_,this.tileLoadFunction));const f=this.sourceTiles_[d];r.sourceTiles.push(f),this.tileKeysBySourceTileUrl_[d]||(this.tileKeysBySourceTileUrl_[d]=[]),this.tileKeysBySourceTileUrl_[d].push(r.getKey());const C=f.getState();if(C<Re.LOADED){const E=B=>{this.handleTileChange(B);const m=f.getState();if(m===Re.LOADED||m===Re.ERROR){const p=f.getKey();p in r.errorTileKeys?f.getState()===Re.LOADED&&delete r.errorTileKeys[p]:r.loadingSourceTiles--,m===Re.ERROR?r.errorTileKeys[p]=!0:f.removeEventListener(Ui.CHANGE,E),r.loadingSourceTiles===0&&r.setState(Zd(r.errorTileKeys)?Re.LOADED:Re.ERROR)}};f.addEventListener(Ui.CHANGE,E),r.loadingSourceTiles++}C===Re.IDLE&&(f.extent=l.getTileCoordExtent(h),f.projection=this.projection,f.resolution=l.getResolution(h[0]),f.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(h=>h.getState()===Re.ERROR)?Re.ERROR:Re.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let A=0,n=r.length;A<n;++A){const s=r[A].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const o=this.tileKeysBySourceTileUrl_[s].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(o,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,r,A,n){const s=[e,t,r];let o=this.getTileCoordForTileUrlFunction(s,n);const a=this.getTileGrid().getExtent(),g=this.projection,l=this.getTileGridForProjection(n);if(o&&a){const I=l.getTileCoordExtent(o);Di(I,-l.getResolution(e),I),Pr(a,!n||!g||Tt(n,g)?I:xi(I,n,g))||(o=null)}let c=!0;if(o!==null){const I=this.tileGrid,h=l.getResolution(e);let d=h;n&&g&&!Tt(n,g)&&(d=h/g.getMetersPerUnit()/n.getMetersPerUnit());const f=I.getZForResolution(d,1),C=l.getTileCoordExtent(o);Di(C,-h,C),I.forEachTileCoord(!n||!g||Tt(n,g)?C:xi(C,n,g),f,E=>{c=c&&!this.tileUrlFunction(E,A,g)})}const u=new gm(s,c?Re.EMPTY:Re.IDLE,o,this.getSourceTiles.bind(this,A,n),this.removeSourceTiles.bind(this));return u.key=this.getKey(),u}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const A=this.projection;if(A!==null&&!Tt(A,e))return sy(e);const n=this.tileGrid,s=n.getResolutions().slice(),o=s.map(function(l,c){return n.getOrigin(c)}),a=s.map(function(l,c){return n.getTileSize(c)}),g=oy+1;for(let l=s.length;l<g;++l)s.push(s[l-1]/2),o.push(o[l-1]),a.push(a[l-1]);r=new Ol({extent:n.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const A=this.getTileGridForProjection(r),n=$d(A.getTileSize(e),this.tmpSize);return[Math.round(n[0]*t),Math.round(n[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Hf(i,e){i.setLoader(function(t,r,A){Yy(e,i.getFormat(),t,r,A,i.onLoad.bind(i),i.onError.bind(i))})}class zQ extends $y{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,A=e.viewState,n=A.resolution,s=this.getLayer().getSource(),o=e.viewHints;let a=e.extent;if(t.extent!==void 0&&(a=es(a,Ah(t.extent,A.projection))),!o[ri.ANIMATING]&&!o[ri.INTERACTING]&&!Pl(a))if(s){const g=A.projection,l=s.getImage(a,n,r,g);l&&(this.loadImage(l)?this.image=l:l.getState()===it.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),A=Yl(t.pixelToCoordinateTransform,e.slice()),n=r.getExtent();if(n&&!ay(n,A))return null;const s=this.image.getExtent(),o=this.image.getImage(),a=ki(s),g=Math.floor(o.width*((A[0]-s[0])/a));if(g<0||g>=o.width)return null;const l=Pi(s),c=Math.floor(o.height*((s[3]-A[1])/l));return c<0||c>=o.height?null:this.getImageData(o,g,c)}renderFrame(e,t){const r=this.image,A=r.getExtent(),n=r.getResolution(),[s,o]=Array.isArray(n)?n:[n,n],a=r.getPixelRatio(),g=e.layerStatesArray[e.layerIndex],l=e.pixelRatio,c=e.viewState,u=c.center,I=c.resolution,h=l*s/(I*a),d=l*o/(I*a);this.prepareContainer(e,t);const f=this.context.canvas.width,C=this.context.canvas.height,E=this.getRenderContext(e);let B=!1,m=!0;if(g.extent){const w=Ah(g.extent,c.projection);m=Pr(w,e.extent),B=m&&!_n(w,e.extent),B&&this.clipUnrotated(E,e,w)}const p=r.getImage(),y=gy(this.tempTransform,f/2,C/2,h,d,0,a*(A[0]-u[0])/s,a*(u[1]-A[3])/o);this.renderedResolution=o*l/a;const Q=p.width*y[0],_=p.height*y[3];if(this.getLayer().getSource().getInterpolate()||(E.imageSmoothingEnabled=!1),this.preRender(E,e),m&&Q>=.5&&_>=.5){const w=y[4],S=y[5],R=g.opacity;R!==1&&(E.save(),E.globalAlpha=R),E.drawImage(p,0,0,+p.width,+p.height,w,S,Q,_),R!==1&&E.restore()}return this.postRender(this.context,e),B&&E.restore(),E.imageSmoothingEnabled=!0,this.container}}class jQ extends Wd{constructor(e){e=e||{},super(e)}}class Zo extends jQ{constructor(e){super(e)}createRenderer(){return new zQ(this)}getData(e){return super.getData(e)}}function qf(i){return function(e){const t=e.buffers,r=e.meta,A=e.imageOps,n=e.width,s=e.height,o=t.length,a=t[0].byteLength;if(A){const u=new Array(o);for(let h=0;h<o;++h)u[h]=new ImageData(new Uint8ClampedArray(t[h]),n,s);return i(u,r).data.buffer}const g=new Uint8ClampedArray(a),l=new Array(o),c=new Array(o);for(let u=0;u<o;++u)l[u]=new Uint8ClampedArray(t[u]),c[u]=[0,0,0,0];for(let u=0;u<a;u+=4){for(let h=0;h<o;++h){const d=l[h];c[h][0]=d[u],c[h][1]=d[u+1],c[h][2]=d[u+2],c[h][3]=d[u+3]}const I=i(c,r);g[u]=I[0],g[u+1]=I[1],g[u+2]=I[2],g[u+3]=I[3]}return g.buffer}}function VQ(i,e){const r=Object.keys(i.lib||{}).map(function(n){return"const "+n+" = "+i.lib[n].toString()+";"}).concat(["const __minion__ = ("+qf.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),A=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return A.addEventListener("message",e),A}function $Q(i,e){const t=qf(i.operation);let r=!1;return{postMessage:function(A){setTimeout(function(){r||e({data:{buffer:t(A),meta:A.meta}})},0)},terminate:function(){r=!0}}}let ZQ=class extends cy{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let A=0;A<t;++A)r[A]=VQ(e,this.onWorkerMessage_.bind(this,A));else r[0]=$Q(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,A=e.inputs.map(function(a){return a.data.buffer}),n=this.workers_.length;if(this.running_=n,n===1){this.workers_[0].postMessage({buffers:A,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},A);return}const s=e.inputs[0].data.length,o=4*Math.ceil(s/4/n);for(let a=0;a<n;++a){const g=a*o,l=[];for(let c=0,u=A.length;c<u;++c)l.push(A[c].slice(g,g+o));this.workers_[a].postMessage({buffers:l,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},l)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,A;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),A=this.dataLookup_[0].meta;else{const n=e.inputs[0].data.length;r=new Uint8ClampedArray(n),A=new Array(t);const s=4*Math.ceil(n/4/t);for(let o=0;o<t;++o){const a=this.dataLookup_[o].buffer,g=o*s;r.set(new Uint8ClampedArray(a),g),A[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),A),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const ph={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};let yh=class extends Ul{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}},gc=class extends ac{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=e0(e.sources);const t=this.changed.bind(this);for(let r=0,A=this.layers_.length;r<A;++r)this.layers_[r].addEventListener(Ui.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new ly(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ao(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:XQ(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ao(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:sr(this),renderTargets:{}},this.setAttributions(function(r){var n;const A=[];for(let s=0,o=e.sources.length;s<o;++s){const a=e.sources[s],g=a instanceof qo?a:a.getSource();if(!g)continue;const l=(n=g.getAttributions())==null?void 0:n(r);typeof l=="string"?A.push(l):l!==void 0&&A.push(...l)}return A}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new ZQ({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const A=Object.assign({},this.frameState_);A.viewState=Object.assign({},A.viewState);const n=MA(e);A.size[0]=Math.ceil(ki(e)/t),A.size[1]=Math.ceil(Pi(e)/t),A.extent=[n[0]-A.size[0]*t/2,n[1]-A.size[1]*t/2,n[0]+A.size[0]*t/2,n[1]+A.size[1]*t/2],A.time=Date.now();const s=A.viewState;return s.center=n,s.projection=r,s.resolution=t,A}allSourcesReady_(){let e=!0,t;for(let r=0,A=this.layers_.length;r<A;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,A){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const n=this.updateFrameState_(e,t,A);if(this.requestedFrameState_=n,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==s||!ro(n.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let n=0;n<t;++n){e.layerIndex=n,e.renderTargets={};const s=WQ(this.layers_[n],e);if(s)r[n]=s;else return}const A={};this.dispatchEvent(new yh(ph.BEFOREOPERATIONS,e,A)),this.processor_.process(r,A,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,A){if(t||!r)return;const n=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!ro(n,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const a=Math.round(ki(n)/s),g=Math.round(Pi(n)/s);o=to(a,g),this.renderedImageCanvas_=new am(n,s,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new yh(ph.AFTEROPERATIONS,e,A))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,A=this.layers_.length;r<A&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}};gc.prototype.dispose;let Bi=null;function WQ(i,e){const t=i.getRenderer();if(!t)throw new Error("Unsupported layer type: "+i);if(!t.prepareFrame(e))return null;const r=e.size[0],A=e.size[1];if(r===0||A===0)return null;const n=t.renderFrame(e,null);let s;if(n instanceof HTMLCanvasElement)s=n;else{if(n&&(s=n.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===r&&s.height===A)return s.getContext("2d").getImageData(0,0,r,A)}if(!Bi)Bi=to(r,A,void 0,{willReadFrequently:!0});else{const o=Bi.canvas;o.width!==r||o.height!==A?Bi=to(r,A,void 0,{willReadFrequently:!0}):Bi.clearRect(0,0,r,A)}return Bi.drawImage(s,0,0,r,A),Bi.getImageData(0,0,r,A)}function XQ(i){return i.map(function(e){return e.getLayerState()})}function e0(i){const e=i.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=t0(i[r]);return t}function t0(i){let e;return i instanceof qo?i instanceof uy?e=new oo({source:i}):i instanceof ac&&(e=new Zo({source:i})):e=i,e}let lc=class extends Kl{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Pe("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)om(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Pe("EPSG:4326"),r=this.getProjection();let A;if(e.bounds!==void 0){const g=hy(t,r);A=Xd(e.bounds,g)}const n=Jo(r),s=e.minzoom||0,o=e.maxzoom||22,a=ts({extent:n,maxZoom:o,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=a,this.tileUrlFunction=Iy(e.tiles,a),e.attribution&&!this.getAttributions()){const g=A!==void 0?A:n;this.setAttributions(function(l){return Pr(g,l.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}};class r0 extends Kl{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=dy(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,A){const n=Pe(r),s=this.getProjection()||n;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(s));const a=fy(e,n,s),g=jd(s,n,e,t),l=o.getZForResolution(g,this.zDirection),c=o.getResolution(l),u=o.getTileCoordForCoordAndZ(a,l);if(o.getResolutions().length<=u[0])return;let I=o.getTileCoordExtent(u,this.tmpExtent_);const h=this.gutter_;h!==0&&(I=Di(I,c*h,I));const d={QUERY_LAYERS:this.params_.LAYERS};Object.assign(d,Bh(this.params_,"GetFeatureInfo"),A);const f=Math.floor((a[0]-I[0])/c),C=Math.floor((I[3]-a[1])/c);return d[this.v13_?"I":"X"]=f,d[this.v13_?"J":"Y"]=C,this.getRequestUrl_(u,I,1,s||n,d)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:Gg,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const A=this.params_.LAYERS;if(!(!Array.isArray(A)||A.length===1))return;r.LAYER=A}if(e!==void 0){const A=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;r.SCALE=e*A/n}return Object.assign(r,t),io(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,A,n){const s=this.urls;if(!s)return;let o;if(s.length==1)o=s[0];else{const a=Cy(Ey(e),s.length);o=s[a]}return JQ(t,(this.tileGrid||this.getTileGridForProjection(A)).getResolution(e[0]),r,A,o,n,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||Gg;this.v13_=Cf(e,"1.3")>=0}tileUrlFunction(e,t,r){let A=this.getTileGrid();if(A||(A=this.getTileGridForProjection(r)),A.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const n=A.getResolution(e[0]);let s=A.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(s=Di(s,n*o,s));const a=Object.assign({},Bh(this.params_,"GetMap"));return this.getRequestUrl_(e,s,t,r,a)}}class i0 extends Kl{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let A=e.urls;A===void 0&&e.url!==void 0&&(A=By(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:A,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),A&&A.length>0&&(this.tileUrlFunction=nh(A.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(nh(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?io(e,r):e.replace(/\{(\w+?)\}/g,function(s,o){return o.toLowerCase()in r?r[o.toLowerCase()]:s});const A=this.tileGrid,n=this.dimensions_;return function(s,o,a){if(!s)return;const g={TileMatrix:A.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(g,n);let l=e;return t=="KVP"?l=io(l,g):l=l.replace(/\{(\w+?)\}/g,function(c,u){return encodeURIComponent(g[u])}),l}}}function A0(i,e){var M;const t=i.Contents.Layer,r=t==null?void 0:t.find(function(G){return G.Identifier==e.layer});if(!r)return null;const A=i.Contents.TileMatrixSet;let n;r.TileMatrixSetLink.length>1?"projection"in e?n=r.TileMatrixSetLink.findIndex(function(G){const N=A.find(function(q){return q.Identifier==G.TileMatrixSet}).SupportedCRS,v=Pe(N),z=Pe(e.projection);return v&&z?Tt(v,z):N==e.projection}):n=r.TileMatrixSetLink.findIndex(function(G){return G.TileMatrixSet==e.matrixSet}):n=0,n<0&&(n=0);const s=r.TileMatrixSetLink[n].TileMatrixSet,o=r.TileMatrixSetLink[n].TileMatrixSetLimits;let a=r.Format[0];"format"in e&&(a=e.format),n=r.Style.findIndex(function(G){return"style"in e?G.Title==e.style:G.isDefault}),n<0&&(n=0);const g=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach(function(G,x,N){const v=G.Identifier;let z=G.Default;z===void 0&&(z=G.Value[0]),l[v]=z});const u=i.Contents.TileMatrixSet.find(function(G){return G.Identifier==s});let I;const h=u.SupportedCRS;if(h&&(I=Pe(h)),"projection"in e){const G=Pe(e.projection);G&&(!I||Tt(G,I))&&(I=G)}let d=!1;const f=I.getAxisOrientation().startsWith("ne");let C=u.TileMatrix[0],E={MinTileCol:0,MinTileRow:0,MaxTileCol:C.MatrixWidth-1,MaxTileRow:C.MatrixHeight-1};if(o){E=o[o.length-1];const G=u.TileMatrix.find(x=>x.Identifier===E.TileMatrix||u.Identifier+":"+x.Identifier===E.TileMatrix);G&&(C=G)}const B=(M=r.BoundingBox)==null?void 0:M.find(G=>Pe(G.crs)&&Tt(Pe(G.crs),I)),m=C.ScaleDenominator*28e-5/I.getMetersPerUnit(),p=f?[C.TopLeftCorner[1],C.TopLeftCorner[0]]:C.TopLeftCorner,y=C.TileWidth*m,Q=C.TileHeight*m;let _=(B==null?void 0:B.extent)??u.BoundingBox;_&&f&&(_=[_[1],_[0],_[3],_[2]]);let w=[p[0]+y*E.MinTileCol,p[1]-Q*(1+E.MaxTileRow),p[0]+y*(1+E.MaxTileCol),p[1]-Q*E.MinTileRow];if(_!==void 0&&!_n(_,w)){const G=r.WGS84BoundingBox,x=Pe("EPSG:4326").getExtent();if(w=_,G)d=G[0]===x[0]&&G[2]===x[2];else{const N=xi(_,u.SupportedCRS,"EPSG:4326");d=N[0]-1e-10<=x[0]&&N[2]+1e-10>=x[2]}}const S=Xy(u,w,o),R=[];let F=e.requestEncoding;if(F=F!==void 0?F:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const G=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let x=0,N=G.length;x<N;++x)if(G[x].Constraint){const z=G[x].Constraint.find(function(q){return q.name=="GetEncoding"}).AllowedValues.Value;if(F===""&&(F=z[0]),F==="KVP")z.includes("KVP")&&R.push(G[x].href);else break}else G[x].href&&(F="KVP",R.push(G[x].href))}return R.length===0&&(F="REST",r.ResourceURL.forEach(function(G){G.resourceType==="tile"&&(a=G.format,R.push(G.template))})),{urls:R,layer:e.layer,matrixSet:s,format:a,projection:I,requestEncoding:F,tileGrid:S,style:g,dimensions:l,wrapX:d,crossOrigin:e.crossOrigin}}class cc extends tm{constructor(e,t=null,r={},A=[]){super(e,t,r,A)}getAll(){return[]}}class n0 extends rm{constructor(e,t=null){super(e,t)}}class Jf extends cc{constructor(e,t=null){const r={collections:A=>A.map(n=>n instanceof Dg?n:new Dg(n))};super(e,t,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return ql(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return df(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}}class zf extends cc{constructor(e,t=null){const r={features:A=>A.map(n=>n instanceof ao?n:new ao(n))};super(e,t,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return ql(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return df(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}}function ms(i,e=!0,t=!1){return e&&(i=im.stac(i,t)),i.type==="Feature"?new ao(i):i.type==="FeatureCollection"?new zf(i):i.type==="Collection"||!i.type&&typeof i.extent<"u"&&typeof i.license<"u"?new Dg(i):!i.type&&Array.isArray(i.collections)?new Jf(i):new n0(i)}const s0={Point:l0,LineString:c0,Polygon:d0,MultiPoint:h0,MultiLineString:u0,MultiPolygon:I0},o0={Point:f0,LineString:C0,Polygon:E0,MultiPoint:p0,MultiLineString:B0,MultiPolygon:y0};class a0 extends QB{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,t,r){const A=e,n=mh(A.geometry,t),s=new Ut;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(n),A.attributes){s.setProperties(A.attributes,!0);const o=A.attributes[r];o!==void 0&&s.setId(o)}return s}readFeaturesFromObject(e,t){if(t=t||{},e.features){const r=e,A=[],n=r.features;for(let s=0,o=n.length;s<o;++s)A.push(this.readFeatureFromObject(n[s],t,e.objectIdFieldName));return A}return[this.readFeatureFromObject(e,t)]}readGeometryFromObject(e,t){return mh(e,t)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const r=e.spatialReference.wkid;return pe("EPSG:"+r)}return null}writeGeometryObject(e,t){return Qh(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={};if(!e.hasProperties())return r.attributes={},r;const A=e.getProperties(),n=e.getGeometry();if(n){r.geometry=Qh(n,t);const s=t&&(t.dataProjection||t.featureProjection);s&&(r.geometry.spatialReference={wkid:Number(pe(s).getCode().split(":").pop())}),delete A[e.getGeometryName()]}return wB(A)?r.attributes={}:r.attributes=A,r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let A=0,n=e.length;A<n;++A)r.push(this.writeFeatureObject(e[A],t));return{features:r}}}function mh(i,e){if(!i)return null;let t;if(typeof i.x=="number"&&typeof i.y=="number")t="Point";else if(i.points)t="MultiPoint";else if(i.paths)i.paths.length===1?t="LineString":t="MultiLineString";else if(i.rings){const A=i,n=OA(A),s=g0(A.rings,n);s.length===1?(t="Polygon",i=Object.assign({},i,{rings:s[0]})):(t="MultiPolygon",i=Object.assign({},i,{rings:s}))}const r=s0[t];return ht(r(i),!1,e)}function g0(i,e){const t=[],r=[],A=[];let n,s;for(n=0,s=i.length;n<s;++n)t.length=0,_B(t,0,i[n],e.length),SB(t,0,t.length,e.length)?r.push([i[n]]):A.push(i[n]);for(;A.length;){const o=A.shift();let a=!1;for(n=r.length-1;n>=0;n--){const g=r[n][0];if(Js(new Eg(g).getExtent(),new Eg(o).getExtent())){r[n].push(o),a=!0;break}}a||r.push([o.reverse()])}return r}function l0(i){let e;return i.m!==void 0&&i.z!==void 0?e=new ar([i.x,i.y,i.z,i.m],"XYZM"):i.z!==void 0?e=new ar([i.x,i.y,i.z],"XYZ"):i.m!==void 0?e=new ar([i.x,i.y,i.m],"XYM"):e=new ar([i.x,i.y]),e}function c0(i){const e=OA(i);return new Lr(i.paths[0],e)}function u0(i){const e=OA(i);return new NA(i.paths,e)}function OA(i){let e="XY";return i.hasZ===!0&&i.hasM===!0?e="XYZM":i.hasZ===!0?e="XYZ":i.hasM===!0&&(e="XYM"),e}function h0(i){const e=OA(i);return new Uo(i.points,e)}function I0(i){const e=OA(i);return new Vn(i.rings,e)}function d0(i){const e=OA(i);return new vi(i.rings,e)}function f0(i,e){const t=i.getCoordinates();let r;const A=i.getLayout();if(A==="XYZ")r={x:t[0],y:t[1],z:t[2]};else if(A==="XYM")r={x:t[0],y:t[1],m:t[2]};else if(A==="XYZM")r={x:t[0],y:t[1],z:t[2],m:t[3]};else if(A==="XY")r={x:t[0],y:t[1]};else throw new Error("Invalid geometry layout");return r}function As(i){const e=i.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function C0(i,e){const t=As(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:[i.getCoordinates()]}}function E0(i,e){const t=As(i);return{hasZ:t.hasZ,hasM:t.hasM,rings:i.getCoordinates(!1)}}function B0(i,e){const t=As(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:i.getCoordinates()}}function p0(i,e){const t=As(i);return{hasZ:t.hasZ,hasM:t.hasM,points:i.getCoordinates()}}function y0(i,e){const t=As(i),r=i.getCoordinates(!1),A=[];for(let n=0;n<r.length;n++)for(let s=r[n].length-1;s>=0;s--)A.push(r[n][s]);return{hasZ:t.hasZ,hasM:t.hasM,rings:A}}function Qh(i,e){const t=o0[i.getType()];return t(ht(i,!0,e),e)}const Kr="http://www.opengis.net/gml",m0=/^\s*$/;class V extends Oo{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:W(this.readFeaturesInternal),featureMembers:ee(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,t){const r=e.localName;let A=null;if(r=="FeatureCollection")A=Y([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const n=t[0];let s=n.featureType,o=n.featureNS;const a="p",g="p0";if(!s&&e.childNodes){s=[],o={};for(let u=0,I=e.childNodes.length;u<I;++u){const h=e.childNodes[u];if(h.nodeType===1){const d=h.nodeName.split(":").pop();if(!s.includes(d)){let f="",C=0;const E=h.namespaceURI;for(const B in o){if(o[B]===E){f=B;break}++C}f||(f=a+C,o[f]=E),s.push(f+":"+d)}}}r!="featureMember"&&(n.featureType=s,n.featureNS=o)}if(typeof o=="string"){const u=o;o={},o[g]=u}const l={},c=Array.isArray(s)?s:[s];for(const u in o){const I={};for(let h=0,d=c.length;h<d;++h)(c[h].includes(":")?c[h].split(":")[0]:g)===u&&(I[c[h].split(":").pop()]=r=="featureMembers"?W(this.readFeatureElement,this):ee(this.readFeatureElement,this));l[o[u]]=I}r=="featureMember"||r=="member"?A=Y(void 0,l,e,t):A=Y([],l,e,t)}return A===null&&(A=[]),A}readGeometryOrExtent(e,t){const r=t[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),Y(null,this.GEOMETRY_PARSERS,e,t,this)}readExtentElement(e,t){const r=t[0],A=this.readGeometryOrExtent(e,t);return A?yl(A,r):void 0}readGeometryElement(e,t){const r=t[0],A=this.readGeometryOrExtent(e,t);return A?ht(A,!1,r):void 0}readFeatureElementInternal(e,t,r){let A;const n={};for(let a=e.firstElementChild;a;a=a.nextElementSibling){let g;const l=a.localName;a.childNodes.length===0||a.childNodes.length===1&&(a.firstChild.nodeType===3||a.firstChild.nodeType===4)?(g=zs(a,!1),m0.test(g)&&(g=void 0)):(r&&(g=l==="boundedBy"?this.readExtentElement(a,t):this.readGeometryElement(a,t)),g?l!=="boundedBy"&&(A=l):g=this.readFeatureElementInternal(a,t,!1));const c=a.attributes.length;if(c>0&&!(g instanceof bB)){g={_content_:g};for(let u=0;u<c;u++){const I=a.attributes[u].name;g[I]=a.attributes[u].value}}n[l]?(n[l]instanceof Array||(n[l]=[n[l]]),n[l].push(g)):n[l]=g}if(!r)return n;const s=new Ut(n);A&&s.setGeometryName(A);const o=e.getAttribute("fid")||RB(e,this.namespace,"id");return o&&s.setId(o),s}readFeatureElement(e,t){return this.readFeatureElementInternal(e,t,!0)}readPoint(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new ar(r,"XYZ")}readMultiPoint(e,t){const r=Y([],this.MULTIPOINT_PARSERS,e,t,this);if(r)return new Uo(r)}readMultiLineString(e,t){const r=Y([],this.MULTILINESTRING_PARSERS,e,t,this);if(r)return new NA(r)}readMultiPolygon(e,t){const r=Y([],this.MULTIPOLYGON_PARSERS,e,t,this);if(r)return new Vn(r)}pointMemberParser(e,t){gi(this.POINTMEMBER_PARSERS,e,t,this)}lineStringMemberParser(e,t){gi(this.LINESTRINGMEMBER_PARSERS,e,t,this)}polygonMemberParser(e,t){gi(this.POLYGONMEMBER_PARSERS,e,t,this)}readLineString(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new Lr(r,"XYZ")}readFlatLinearRing(e,t){const r=Y(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(r)return r}readLinearRing(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new Eg(r,"XYZ")}readPolygon(e,t){const r=Y([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(r&&r[0]){const A=r[0],n=[A.length];let s,o;for(s=1,o=r.length;s<o;++s)js(A,r[s]),n.push(A.length);return new vi(A,"XYZ",n)}}readFlatCoordinatesFromNode(e,t){return Y(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}readGeometryFromNode(e,t){const r=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return r||null}readFeaturesFromNode(e,t){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[r])||[]}readProjectionFromNode(e){return pe(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}V.prototype.namespace=Kr;V.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};V.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};V.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};V.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:W(V.prototype.pointMemberParser),pointMembers:W(V.prototype.pointMemberParser)}};V.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:W(V.prototype.lineStringMemberParser),lineStringMembers:W(V.prototype.lineStringMemberParser)}};V.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:W(V.prototype.polygonMemberParser),polygonMembers:W(V.prototype.polygonMemberParser)}};V.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:W(V.prototype.readFlatCoordinatesFromNode)}};V.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:W(V.prototype.readLineString)}};V.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:W(V.prototype.readPolygon)}};V.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:ee(V.prototype.readFlatLinearRing)}};const Q0=Kr+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",w0={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class ce extends V{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[Kr].featureMember=W(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:Q0}readFlatCoordinates(e,t){const r=zs(e,!1).replace(/^\s*|\s*$/g,""),n=t[0].srsName;let s="enu";if(n){const g=pe(n);g&&(s=g.getAxisOrientation())}const o=r.trim().split(/\s+/),a=[];for(let g=0,l=o.length;g<l;g++){const c=o[g].split(/,+/),u=parseFloat(c[0]),I=parseFloat(c[1]),h=c.length===3?parseFloat(c[2]):0;s.startsWith("en")?a.push(u,I,h):a.push(I,u,h)}return a}readBox(e,t){const r=Y([null],this.BOX_PARSERS_,e,t,this);return xd(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(e,t){const r=Y(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}outerBoundaryIsParser(e,t){const r=Y(void 0,this.RING_PARSERS,e,t,this);if(r){const A=t[t.length-1];A[0]=r}}GEOMETRY_NODE_FACTORY_(e,t,r){const A=t[t.length-1],n=A.multiSurface,s=A.surface,o=A.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&n===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="MultiLineString"&&o===!0&&(r="MultiCurve")),ne("http://www.opengis.net/gml",r)}writeFeatureElement(e,t,r){const A=t.getId();A&&e.setAttribute("fid",A);const n=r[r.length-1],s=n.featureNS,o=t.getGeometryName();n.serializers||(n.serializers={},n.serializers[s]={});const a=[],g=[];if(t.hasProperties()){const c=t.getProperties();for(const u in c){const I=c[u];I!=null&&(a.push(u),g.push(I),u==o||typeof I.getSimplifiedGeometry=="function"?u in n.serializers[s]||(n.serializers[s][u]=D(this.writeGeometryElement,this)):u in n.serializers[s]||(n.serializers[s][u]=D(ue)))}}const l=Object.assign({},n);l.node=e,Ge(l,n.serializers,Xt(void 0,s),g,r,a)}writeCurveOrLineString(e,t,r){const n=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&n&&e.setAttribute("srsName",n),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const s=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(s),this.writeCoordinates_(s,t,r)}else if(e.nodeName==="Curve"){const s=ne(e.namespaceURI,"segments");e.appendChild(s),this.writeCurveSegments_(s,t,r)}}writeLineStringOrCurveMember(e,t,r){const A=this.GEOMETRY_NODE_FACTORY_(t,r);A&&(e.appendChild(A),this.writeCurveOrLineString(A,t,r))}writeMultiCurveOrLineString(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName,o=A.curve;s&&e.setAttribute("srsName",s);const a=t.getLineStrings();Ge({node:e,hasZ:n,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)}writeGeometryElement(e,t,r){const A=r[r.length-1],n=Object.assign({},A);n.node=e;let s;Array.isArray(t)?s=yl(t,A):s=ht(t,!0,A),Ge(n,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}createCoordinatesNode_(e){const t=ne(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}writeCoordinates_(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName,o=t.getCoordinates(),a=o.length,g=new Array(a);for(let l=0;l<a;++l){const c=o[l];g[l]=this.getCoords_(c,s,n)}ue(e,g.join(" "))}writeCurveSegments_(e,t,r){const A=ne(e.namespaceURI,"LineStringSegment");e.appendChild(A),this.writeCurveOrLineString(A,t,r)}writeSurfaceOrPolygon(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName;if(e.nodeName!=="PolygonPatch"&&s&&e.setAttribute("srsName",s),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const o=t.getLinearRings();Ge({node:e,hasZ:n,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,o,r,void 0,this)}else if(e.nodeName==="Surface"){const o=ne(e.namespaceURI,"patches");e.appendChild(o),this.writeSurfacePatches_(o,t,r)}}RING_NODE_FACTORY_(e,t,r){const A=t[t.length-1],n=A.node,s=A.exteriorWritten;return s===void 0&&(A.exteriorWritten=!0),ne(n.namespaceURI,s!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,t,r){const A=ne(e.namespaceURI,"PolygonPatch");e.appendChild(A),this.writeSurfaceOrPolygon(A,t,r)}writeRing(e,t,r){const A=ne(e.namespaceURI,"LinearRing");e.appendChild(A),this.writeLinearRing(A,t,r)}getCoords_(e,t,r){let n=(t?pe(t).getAxisOrientation():"enu").startsWith("en")?e[0]+","+e[1]:e[1]+","+e[0];if(r){const s=e[2]||0;n+=","+s}return n}writePoint(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName;s&&e.setAttribute("srsName",s);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o);const a=t.getCoordinates(),g=this.getCoords_(a,s,n);ue(o,g)}writeMultiPoint(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName;s&&e.setAttribute("srsName",s);const o=t.getPoints();Ge({node:e,hasZ:n,srsName:s},this.POINTMEMBER_SERIALIZERS,Xt("pointMember"),o,r,void 0,this)}writePointMember(e,t,r){const A=ne(e.namespaceURI,"Point");e.appendChild(A),this.writePoint(A,t,r)}writeLinearRing(e,t,r){const n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);const s=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(s),this.writeCoordinates_(s,t,r)}writeMultiSurfaceOrPolygon(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName,o=A.surface;s&&e.setAttribute("srsName",s);const a=t.getPolygons();Ge({node:e,hasZ:n,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)}writeSurfaceOrPolygonMember(e,t,r){const A=this.GEOMETRY_NODE_FACTORY_(t,r);A&&(e.appendChild(A),this.writeSurfaceOrPolygon(A,t,r))}writeEnvelope(e,t,r){const n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);const s=["lowerCorner","upperCorner"],o=[t[0]+" "+t[1],t[2]+" "+t[3]];Ge({node:e},this.ENVELOPE_SERIALIZERS,GA,o,r,s,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){const A=t[t.length-1].node;return ne("http://www.opengis.net/gml",w0[A.nodeName])}}ce.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:ee(ce.prototype.readFlatCoordinates)}};ce.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:ce.prototype.innerBoundaryIsParser,outerBoundaryIs:ce.prototype.outerBoundaryIsParser}};ce.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:W(ce.prototype.readFlatCoordinates)}};ce.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:ee(V.prototype.readPoint),MultiPoint:ee(V.prototype.readMultiPoint),LineString:ee(V.prototype.readLineString),MultiLineString:ee(V.prototype.readMultiLineString),LinearRing:ee(V.prototype.readLinearRing),Polygon:ee(V.prototype.readPolygon),MultiPolygon:ee(V.prototype.readMultiPolygon),Box:ee(ce.prototype.readBox)}};ce.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:D(ce.prototype.writeCurveOrLineString),MultiCurve:D(ce.prototype.writeMultiCurveOrLineString),Point:D(ce.prototype.writePoint),MultiPoint:D(ce.prototype.writeMultiPoint),LineString:D(ce.prototype.writeCurveOrLineString),MultiLineString:D(ce.prototype.writeMultiCurveOrLineString),LinearRing:D(ce.prototype.writeLinearRing),Polygon:D(ce.prototype.writeSurfaceOrPolygon),MultiPolygon:D(ce.prototype.writeMultiSurfaceOrPolygon),Surface:D(ce.prototype.writeSurfaceOrPolygon),MultiSurface:D(ce.prototype.writeMultiSurfaceOrPolygon),Envelope:D(ce.prototype.writeEnvelope)}};ce.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:D(ce.prototype.writeLineStringOrCurveMember),curveMember:D(ce.prototype.writeLineStringOrCurveMember)}};ce.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:D(ce.prototype.writeRing),innerBoundaryIs:D(ce.prototype.writeRing)}};ce.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:D(ce.prototype.writePointMember)}};ce.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:D(ce.prototype.writeSurfaceOrPolygonMember),polygonMember:D(ce.prototype.writeSurfaceOrPolygonMember)}};ce.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:D(ue),upperCorner:D(ue)}};const _0=Kr+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",S0={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class k extends V{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:_0,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,t){const r=Y([],this.MULTICURVE_PARSERS,e,t,this);if(r)return new NA(r)}readFlatCurveRing(e,t){const r=Y([],this.MULTICURVE_PARSERS,e,t,this),A=[];for(let n=0,s=r.length;n<s;++n)js(A,r[n].getFlatCoordinates());return A}readMultiSurface(e,t){const r=Y([],this.MULTISURFACE_PARSERS,e,t,this);if(r)return new Vn(r)}curveMemberParser(e,t){gi(this.CURVEMEMBER_PARSERS,e,t,this)}surfaceMemberParser(e,t){gi(this.SURFACEMEMBER_PARSERS,e,t,this)}readPatch(e,t){return Y([null],this.PATCHES_PARSERS,e,t,this)}readSegment(e,t){return Y([],this.SEGMENTS_PARSERS,e,t,this)}readPolygonPatch(e,t){return Y([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}readLineStringSegment(e,t){return Y([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}interiorParser(e,t){const r=Y(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}exteriorParser(e,t){const r=Y(void 0,this.RING_PARSERS,e,t,this);if(r){const A=t[t.length-1];A[0]=r}}readSurface(e,t){const r=Y([null],this.SURFACE_PARSERS,e,t,this);if(r&&r[0]){const A=r[0],n=[A.length];let s,o;for(s=1,o=r.length;s<o;++s)js(A,r[s]),n.push(A.length);return new vi(A,"XYZ",n)}}readCurve(e,t){const r=Y([null],this.CURVE_PARSERS,e,t,this);if(r)return new Lr(r,"XYZ")}readEnvelope(e,t){const r=Y([null],this.ENVELOPE_PARSERS,e,t,this);return xd(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,t){let r=zs(e,!1);const A=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,n=[];let s;for(;s=A.exec(r);)n.push(parseFloat(s[1])),r=r.substr(s[0].length);if(r!=="")return;const a=t[0].srsName;if((a?pe(a).getAxisOrientation():"enu")==="neu")for(let c=0,u=n.length;c<u;c+=3){const I=n[c],h=n[c+1];n[c]=h,n[c+1]=I}const l=n.length;if(l==2&&n.push(0),l!==0)return n}readFlatPosList(e,t){const r=zs(e,!1).replace(/^\s*|\s*$/g,""),A=t[0],n=A.srsName,s=A.srsDimension,o=n?pe(n).getAxisOrientation():"enu",a=r.split(/\s+/);let g=2;e.getAttribute("srsDimension")?g=ni(e.getAttribute("srsDimension")):e.getAttribute("dimension")?g=ni(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?g=ni(e.parentNode.getAttribute("srsDimension")):s&&(g=ni(s));const l=o.startsWith("en");let c,u,I;const h=[];for(let d=0,f=a.length;d<f;d+=g)c=parseFloat(a[d]),u=parseFloat(a[d+1]),I=g===3?parseFloat(a[d+2]):0,l?h.push(c,u,I):h.push(u,c,I);return h}writePos_(e,t,r){const A=r[r.length-1],n=A.hasZ,s=n?"3":"2";e.setAttribute("srsDimension",s);const o=A.srsName,a=o?pe(o).getAxisOrientation():"enu",g=t.getCoordinates();let l=a.startsWith("en")?g[0]+" "+g[1]:g[1]+" "+g[0];if(n){const c=g[2]||0;l+=" "+c}ue(e,l)}getCoords_(e,t,r){let n=(t?pe(t).getAxisOrientation():"enu").startsWith("en")?e[0]+" "+e[1]:e[1]+" "+e[0];if(r){const s=e[2]||0;n+=" "+s}return n}writePosList_(e,t,r){const A=r[r.length-1],n=A.hasZ,s=n?"3":"2";e.setAttribute("srsDimension",s);const o=A.srsName,a=t.getCoordinates(),g=a.length,l=new Array(g);let c;for(let u=0;u<g;++u)c=a[u],l[u]=this.getCoords_(c,o,n);ue(e,l.join(" "))}writePoint(e,t,r){const n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);const s=ne(e.namespaceURI,"pos");e.appendChild(s),this.writePos_(s,t,r)}writeEnvelope(e,t,r){const n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);const s=["lowerCorner","upperCorner"],o=[t[0]+" "+t[1],t[2]+" "+t[3]];Ge({node:e},this.ENVELOPE_SERIALIZERS,GA,o,r,s,this)}writeLinearRing(e,t,r){const n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);const s=ne(e.namespaceURI,"posList");e.appendChild(s),this.writePosList_(s,t,r)}RING_NODE_FACTORY_(e,t,r){const A=t[t.length-1],n=A.node,s=A.exteriorWritten;return s===void 0&&(A.exteriorWritten=!0),ne(n.namespaceURI,s!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName;if(e.nodeName!=="PolygonPatch"&&s&&e.setAttribute("srsName",s),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const o=t.getLinearRings();Ge({node:e,hasZ:n,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,o,r,void 0,this)}else if(e.nodeName==="Surface"){const o=ne(e.namespaceURI,"patches");e.appendChild(o),this.writeSurfacePatches_(o,t,r)}}writeCurveOrLineString(e,t,r){const n=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&n&&e.setAttribute("srsName",n),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const s=ne(e.namespaceURI,"posList");e.appendChild(s),this.writePosList_(s,t,r)}else if(e.nodeName==="Curve"){const s=ne(e.namespaceURI,"segments");e.appendChild(s),this.writeCurveSegments_(s,t,r)}}writeMultiSurfaceOrPolygon(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName,o=A.surface;s&&e.setAttribute("srsName",s);const a=t.getPolygons();Ge({node:e,hasZ:n,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)}writeMultiPoint(e,t,r){const A=r[r.length-1],n=A.srsName,s=A.hasZ;n&&e.setAttribute("srsName",n);const o=t.getPoints();Ge({node:e,hasZ:s,srsName:n},this.POINTMEMBER_SERIALIZERS,Xt("pointMember"),o,r,void 0,this)}writeMultiCurveOrLineString(e,t,r){const A=r[r.length-1],n=A.hasZ,s=A.srsName,o=A.curve;s&&e.setAttribute("srsName",s);const a=t.getLineStrings();Ge({node:e,hasZ:n,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)}writeRing(e,t,r){const A=ne(e.namespaceURI,"LinearRing");e.appendChild(A),this.writeLinearRing(A,t,r)}writeSurfaceOrPolygonMember(e,t,r){const A=this.GEOMETRY_NODE_FACTORY_(t,r);A&&(e.appendChild(A),this.writeSurfaceOrPolygon(A,t,r))}writePointMember(e,t,r){const A=ne(e.namespaceURI,"Point");e.appendChild(A),this.writePoint(A,t,r)}writeLineStringOrCurveMember(e,t,r){const A=this.GEOMETRY_NODE_FACTORY_(t,r);A&&(e.appendChild(A),this.writeCurveOrLineString(A,t,r))}writeSurfacePatches_(e,t,r){const A=ne(e.namespaceURI,"PolygonPatch");e.appendChild(A),this.writeSurfaceOrPolygon(A,t,r)}writeCurveSegments_(e,t,r){const A=ne(e.namespaceURI,"LineStringSegment");e.appendChild(A),this.writeCurveOrLineString(A,t,r)}writeGeometryElement(e,t,r){const A=r[r.length-1],n=Object.assign({},A);n.node=e;let s;Array.isArray(t)?s=yl(t,A):s=ht(t,!0,A),Ge(n,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}writeFeatureElement(e,t,r){const A=t.getId();A&&e.setAttribute("fid",A);const n=r[r.length-1],s=n.featureNS,o=t.getGeometryName();n.serializers||(n.serializers={},n.serializers[s]={});const a=[],g=[];if(t.hasProperties()){const c=t.getProperties();for(const u in c){const I=c[u];I!=null&&(a.push(u),g.push(I),u==o||typeof I.getSimplifiedGeometry=="function"?u in n.serializers[s]||(n.serializers[s][u]=D(this.writeGeometryElement,this)):u in n.serializers[s]||(n.serializers[s][u]=D(ue)))}}const l=Object.assign({},n);l.node=e,Ge(l,n.serializers,Xt(void 0,s),g,r,a)}writeFeatureMembers_(e,t,r){const A=r[r.length-1],n=A.featureType,s=A.featureNS,o={};o[s]={},o[s][n]=D(this.writeFeatureElement,this);const a=Object.assign({},A);a.node=e,Ge(a,o,Xt(n,s),t,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){const A=t[t.length-1].node;return ne(this.namespace,S0[A.nodeName])}GEOMETRY_NODE_FACTORY_(e,t,r){const A=t[t.length-1],n=A.multiSurface,s=A.surface,o=A.curve,a=A.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&n===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="LineString"&&o===!0?r="Curve":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),ne(this.namespace,r)}writeGeometryNode(e,t){t=this.adaptOptions(t);const r=ne(this.namespace,"geom"),A={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(A,t),this.writeGeometryElement(r,e,[A]),r}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ne(this.namespace,"featureMembers");r.setAttributeNS(En,"xsi:schemaLocation",this.schemaLocation);const A={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(A,t),this.writeFeatureMembers_(r,e,[A]),r}}k.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:ee(k.prototype.readFlatPos),posList:ee(k.prototype.readFlatPosList),coordinates:ee(ce.prototype.readFlatCoordinates)}};k.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:k.prototype.interiorParser,exterior:k.prototype.exteriorParser}};k.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:ee(V.prototype.readPoint),MultiPoint:ee(V.prototype.readMultiPoint),LineString:ee(V.prototype.readLineString),MultiLineString:ee(V.prototype.readMultiLineString),LinearRing:ee(V.prototype.readLinearRing),Polygon:ee(V.prototype.readPolygon),MultiPolygon:ee(V.prototype.readMultiPolygon),Surface:ee(k.prototype.readSurface),MultiSurface:ee(k.prototype.readMultiSurface),Curve:ee(k.prototype.readCurve),MultiCurve:ee(k.prototype.readMultiCurve),Envelope:ee(k.prototype.readEnvelope)}};k.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:W(k.prototype.curveMemberParser),curveMembers:W(k.prototype.curveMemberParser)}};k.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:W(k.prototype.surfaceMemberParser),surfaceMembers:W(k.prototype.surfaceMemberParser)}};k.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:W(V.prototype.readLineString),Curve:W(k.prototype.readCurve)}};k.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:W(V.prototype.readPolygon),Surface:W(k.prototype.readSurface)}};k.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:ee(k.prototype.readPatch)}};k.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:ee(k.prototype.readSegment)}};k.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:W(k.prototype.readFlatPosList),upperCorner:W(k.prototype.readFlatPosList)}};k.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:ee(k.prototype.readPolygonPatch)}};k.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Td(k.prototype.readLineStringSegment)}};V.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:ee(V.prototype.readFlatLinearRing),Ring:ee(k.prototype.readFlatCurveRing)}};k.prototype.writeFeatures;k.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:D(k.prototype.writeRing),interior:D(k.prototype.writeRing)}};k.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:D(ue),upperCorner:D(ue)}};k.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:D(k.prototype.writeSurfaceOrPolygonMember),polygonMember:D(k.prototype.writeSurfaceOrPolygonMember)}};k.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:D(k.prototype.writePointMember)}};k.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:D(k.prototype.writeLineStringOrCurveMember),curveMember:D(k.prototype.writeLineStringOrCurveMember)}};k.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:D(k.prototype.writeCurveOrLineString),MultiCurve:D(k.prototype.writeMultiCurveOrLineString),Point:D(k.prototype.writePoint),MultiPoint:D(k.prototype.writeMultiPoint),LineString:D(k.prototype.writeCurveOrLineString),MultiLineString:D(k.prototype.writeMultiCurveOrLineString),LinearRing:D(k.prototype.writeLinearRing),Polygon:D(k.prototype.writeSurfaceOrPolygon),MultiPolygon:D(k.prototype.writeMultiSurfaceOrPolygon),Surface:D(k.prototype.writeSurfaceOrPolygon),MultiSurface:D(k.prototype.writeMultiSurfaceOrPolygon),Envelope:D(k.prototype.writeEnvelope)}};const uc=k;uc.prototype.writeFeatures;uc.prototype.writeFeaturesNode;const He=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],b0="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",R0={rte:jf,trk:Vf,wpt:$f},D0=K(He,{rte:W(jf),trk:W(Vf),wpt:W($f)}),x0=K(He,{text:b(U,"linkText"),type:b(U,"linkType")}),T0=K(He,{name:b(U),email:Aw,link:ns}),F0=K(He,{name:b(U),desc:b(U),author:b(tw),copyright:b(rw),link:ns,time:b(Yo),keywords:b(U),bounds:iw,extensions:Wo}),L0=K(He,{year:b(et),license:b(U)}),N0=K(He,{rte:D(aw),trk:D(gw),wpt:D(cw)});class G0 extends Oo{constructor(e){super(),e=e||{},this.dataProjection=pe("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const A=e[t];if(this.readExtensions_){const n=A.get("extensionsNode_")||null;this.readExtensions_(A,n)}A.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Vs(e)):$s(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!He.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(He.includes(t.namespaceURI)&&t.localName==="metadata")return Y({},F0,t,[]);return null}readFeatureFromNode(e,t){if(!He.includes(e.namespaceURI))return null;const r=R0[e.localName];if(!r)return null;const A=r(e,[this.getReadOptions(e,t)]);return A?(this.handleReadExtensions_([A]),A):null}readFeaturesFromNode(e,t){if(!He.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=Y([],D0,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ne("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",En),r.setAttributeNS(En,"xsi:schemaLocation",b0),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Ge({node:r},N0,ew,e,[t]),r}}const v0=K(He,{name:b(U),cmt:b(U),desc:b(U),src:b(U),link:ns,number:b(et),extensions:Wo,type:b(U),rtept:nw}),M0=K(He,{ele:b(St),time:b(Yo)}),k0=K(He,{name:b(U),cmt:b(U),desc:b(U),src:b(U),link:ns,number:b(et),type:b(U),extensions:Wo,trkseg:ow}),P0=K(He,{trkpt:sw}),U0=K(He,{ele:b(St),time:b(Yo)}),O0=K(He,{ele:b(St),time:b(Yo),magvar:b(St),geoidheight:b(St),name:b(U),cmt:b(U),desc:b(U),src:b(U),link:ns,sym:b(U),type:b(U),fix:b(U),sat:b(et),hdop:b(St),vdop:b(St),pdop:b(St),ageofdgpsdata:b(St),dgpsid:b(et),extensions:Wo}),Y0=["text","type"],K0=K(He,{text:D(ue),type:D(ue)}),H0=K(He,["name","cmt","desc","src","link","number","type","rtept"]),q0=K(He,{name:D(ue),cmt:D(ue),desc:D(ue),src:D(ue),link:D(dc),number:D(Zs),type:D(ue),rtept:Fd(D(fc))}),J0=K(He,["ele","time"]),z0=K(He,["name","cmt","desc","src","link","number","type","trkseg"]),j0=K(He,{name:D(ue),cmt:D(ue),desc:D(ue),src:D(ue),link:D(dc),number:D(Zs),type:D(ue),trkseg:Fd(D(lw))}),V0=Xt("trkpt"),$0=K(He,{trkpt:D(fc)}),Z0=K(He,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),W0=K(He,{ele:D(Ei),time:D(DB),magvar:D(Ei),geoidheight:D(Ei),name:D(ue),cmt:D(ue),desc:D(ue),src:D(ue),link:D(dc),sym:D(ue),type:D(ue),fix:D(ue),sat:D(Zs),hdop:D(Ei),vdop:D(Ei),pdop:D(Ei),ageofdgpsdata:D(Ei),dgpsid:D(Zs)}),X0={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function ew(i,e,t){const r=i.getGeometry();if(r){const A=X0[r.getType()];if(A){const n=e[e.length-1].node;return ne(n.namespaceURI,A)}}}function hc(i,e,t,r){return i.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(i.push(r.ele),delete r.ele,e.hasZ=!0):i.push(0),"time"in r?(i.push(r.time),delete r.time,e.hasM=!0):i.push(0),i}function Ic(i,e,t){let r="XY",A=2;if(i.hasZ&&i.hasM?(r="XYZM",A=4):i.hasZ?(r="XYZ",A=3):i.hasM&&(r="XYM",A=3),A!==4){for(let n=0,s=e.length/4;n<s;n++)e[n*A]=e[n*4],e[n*A+1]=e[n*4+1],i.hasZ&&(e[n*A+2]=e[n*4+2]),i.hasM&&(e[n*A+2]=e[n*4+3]);if(e.length=e.length/4*A,t)for(let n=0,s=t.length;n<s;n++)t[n]=t[n]/4*A}return r}function tw(i,e){const t=Y({},T0,i,e);if(t)return t}function rw(i,e){const t=Y({},L0,i,e);if(t){const r=i.getAttribute("author");return r!==null&&(t.author=r),t}}function iw(i,e){const t=e[e.length-1],r=i.getAttribute("minlat"),A=i.getAttribute("minlon"),n=i.getAttribute("maxlat"),s=i.getAttribute("maxlon");A!==null&&r!==null&&s!==null&&n!==null&&(t.bounds=[[parseFloat(A),parseFloat(r)],[parseFloat(s),parseFloat(n)]])}function Aw(i,e){const t=e[e.length-1],r=i.getAttribute("id"),A=i.getAttribute("domain");r!==null&&A!==null&&(t.email=`${r}@${A}`)}function ns(i,e){const t=e[e.length-1],r=i.getAttribute("href");r!==null&&(t.link=r),gi(x0,i,e)}function Wo(i,e){const t=e[e.length-1];t.extensionsNode_=i}function nw(i,e){const t=Y({},M0,i,e);if(t){const r=e[e.length-1],A=r.flatCoordinates,n=r.layoutOptions;hc(A,n,i,t)}}function sw(i,e){const t=Y({},U0,i,e);if(t){const r=e[e.length-1],A=r.flatCoordinates,n=r.layoutOptions;hc(A,n,i,t)}}function ow(i,e){const t=e[e.length-1];gi(P0,i,e);const r=t.flatCoordinates;t.ends.push(r.length)}function jf(i,e){const t=e[0],r=Y({flatCoordinates:[],layoutOptions:{}},v0,i,e);if(!r)return;const A=r.flatCoordinates;delete r.flatCoordinates;const n=r.layoutOptions;delete r.layoutOptions;const s=Ic(n,A),o=new Lr(A,s);ht(o,!1,t);const a=new Ut(o);return a.setProperties(r,!0),a}function Vf(i,e){const t=e[0],r=Y({flatCoordinates:[],ends:[],layoutOptions:{}},k0,i,e);if(!r)return;const A=r.flatCoordinates;delete r.flatCoordinates;const n=r.ends;delete r.ends;const s=r.layoutOptions;delete r.layoutOptions;const o=Ic(s,A,n),a=new NA(A,o,n);ht(a,!1,t);const g=new Ut(a);return g.setProperties(r,!0),g}function $f(i,e){const t=e[0],r=Y({},O0,i,e);if(!r)return;const A={},n=hc([],A,i,r),s=Ic(A,n),o=new ar(n,s);ht(o,!1,t);const a=new Ut(o);return a.setProperties(r,!0),a}function dc(i,e,t){i.setAttribute("href",e);const A=t[t.length-1].properties,n=[A.linkText,A.linkType];Ge({node:i},K0,GA,n,t,Y0)}function fc(i,e,t){const r=t[t.length-1],n=r.node.namespaceURI,s=r.properties;switch(i.setAttributeNS(null,"lat",String(e[1])),i.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(s.time=e[3]);case"XYZ":e[2]!==0&&(s.ele=e[2]);break;case"XYM":e[2]!==0&&(s.time=e[2]);break}const a=i.nodeName=="rtept"?J0[n]:Z0[n],g=ml(s,a);Ge({node:i,properties:s},W0,GA,g,t,a)}function aw(i,e,t){const r=t[0],A=e.getProperties(),n={node:i};n.properties=A;const s=e.getGeometry();if(s.getType()=="LineString"){const l=ht(s,!0,r);n.geometryLayout=l.getLayout(),A.rtept=l.getCoordinates()}const o=t[t.length-1].node,a=H0[o.namespaceURI],g=ml(A,a);Ge(n,q0,GA,g,t,a)}function gw(i,e,t){const r=t[0],A=e.getProperties(),n={node:i};n.properties=A;const s=e.getGeometry();if(s.getType()=="MultiLineString"){const l=ht(s,!0,r);A.trkseg=l.getLineStrings()}const o=t[t.length-1].node,a=z0[o.namespaceURI],g=ml(A,a);Ge(n,j0,GA,g,t,a)}function lw(i,e,t){const r={node:i};r.geometryLayout=e.getLayout(),r.properties={},Ge(r,$0,V0,e.getCoordinates(),t)}function cw(i,e,t){const r=t[0],A=t[t.length-1];A.properties=e.getProperties();const n=e.getGeometry();if(n.getType()=="Point"){const s=ht(n,!0,r);A.geometryLayout=s.getLayout(),fc(i,s.getCoordinates(),t)}}class Cc extends Ld{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(Qs(e),this.adaptOptions(t))}readFeatureFromText(e,t){return Mr()}readFeatures(e,t){return this.readFeaturesFromText(Qs(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return Mr()}readGeometry(e,t){return this.readGeometryFromText(Qs(e),this.adaptOptions(t))}readGeometryFromText(e,t){return Mr()}readProjection(e){return this.readProjectionFromText(Qs(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return Mr()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return Mr()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return Mr()}}function Qs(i){return typeof i=="string"?i:""}const uw=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,hw=/^H.([A-Z]{3}).*?:(.*)/,Iw=/^HFDTE(\d{2})(\d{2})(\d{2})/,dw=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,fw=/\r\n|\r|\n/;class Cw extends Cc{constructor(e){super(),e=e||{},this.dataProjection=pe("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(e,t){const r=this.altitudeMode_,A=e.split(fw),n={},s=[];let o=2e3,a=0,g=1,l=-1,c,u;for(c=0,u=A.length;c<u;++c){const f=A[c];let C;if(f.charAt(0)=="B"){if(C=uw.exec(f),C){const E=parseInt(C[1],10),B=parseInt(C[2],10),m=parseInt(C[3],10);let p=parseInt(C[4],10)+parseInt(C[5],10)/6e4;this.lad_&&(p+=parseInt(f.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),C[6]=="S"&&(p=-p);let y=parseInt(C[7],10)+parseInt(C[8],10)/6e4;if(this.lod_&&(y+=parseInt(f.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),C[9]=="W"&&(y=-y),s.push(y,p),r!="none"){let _;r=="gps"?_=parseInt(C[11],10):r=="barometric"?_=parseInt(C[12],10):_=0,s.push(_)}let Q=Date.UTC(o,a,g,E,B,m);Q<l&&(Q=Date.UTC(o,a,g+1,E,B,m)),s.push(Q/1e3),l=Q}}else if(f.charAt(0)=="H")C=dw.exec(f),C?(g=parseInt(C[1],10),a=parseInt(C[2],10)-1,o=2e3+parseInt(C[3],10)):(C=Iw.exec(f),C?(g=parseInt(C[1],10),a=parseInt(C[2],10)-1,o=2e3+parseInt(C[3],10)):(C=hw.exec(f),C&&(n[C[1]]=C[2].trim())));else if(f.charAt(0)=="I"){const E=parseInt(f.slice(1,3),10);for(let B=0;B<E;B++){const m=f.slice(7+B*7,10+B*7);if(m==="LAD"||m==="LOD"){const p=parseInt(f.slice(3+B*7,5+B*7),10)-1,y=parseInt(f.slice(5+B*7,7+B*7),10);m==="LAD"?(this.lad_=!0,this.ladStart_=p,this.ladStop_=y):m==="LOD"&&(this.lod_=!0,this.lodStart_=p,this.lodStop_=y)}}}}if(s.length===0)return null;const I=r=="none"?"XYM":"XYZM",h=new Lr(s,I),d=new Ut(ht(h,!1,t));return d.setProperties(n,!0),d}readFeaturesFromText(e,t){const r=this.readFeatureFromText(e,t);return r?[r]:[]}}const nt={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Oi={};Oi[nt.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};Oi[nt.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};Oi[nt.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};Oi.none={none:{supports:[],formats:[],qualities:[]}};const Ew=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,wh=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Bw=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function pw(i){let e=i.getComplianceLevelSupportedFeatures();return e===void 0&&(e=Oi[nt.VERSION1].level0),{url:i.imageInfo["@id"]===void 0?void 0:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,i.imageInfo.formats===void 0?[]:i.imageInfo.formats],qualities:[...e.qualities,i.imageInfo.qualities===void 0?[]:i.imageInfo.qualities],resolutions:i.imageInfo.scale_factors,tileSize:i.imageInfo.tile_width!==void 0?i.imageInfo.tile_height!==void 0?[i.imageInfo.tile_width,i.imageInfo.tile_height]:[i.imageInfo.tile_width,i.imageInfo.tile_width]:i.imageInfo.tile_height!=null?[i.imageInfo.tile_height,i.imageInfo.tile_height]:void 0}}function yw(i){const e=i.getComplianceLevelSupportedFeatures(),t=Array.isArray(i.imageInfo.profile)&&i.imageInfo.profile.length>1,r=t&&i.imageInfo.profile[1].supports?i.imageInfo.profile[1].supports:[],A=t&&i.imageInfo.profile[1].formats?i.imageInfo.profile[1].formats:[],n=t&&i.imageInfo.profile[1].qualities?i.imageInfo.profile[1].qualities:[];return{url:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(s){return[s.width,s.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(s){return s.width})[0],i.imageInfo.tiles.map(function(s){return s.height===void 0?s.width:s.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(s){return s.scaleFactors})[0],supports:[...e.supports,...r],formats:[...e.formats,...A],qualities:[...e.qualities,...n]}}function mw(i){const e=i.getComplianceLevelSupportedFeatures(),t=i.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...i.imageInfo.extraFormats],r=i.imageInfo.preferredFormats!==void 0&&Array.isArray(i.imageInfo.preferredFormats)&&i.imageInfo.preferredFormats.length>0?i.imageInfo.preferredFormats.filter(function(A){return["jpg","png","gif"].includes(A)}).reduce(function(A,n){return A===void 0&&t.includes(n)?n:A},void 0):void 0;return{url:i.imageInfo.id,sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(A){return[A.width,A.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(A){return A.width})[0],i.imageInfo.tiles.map(function(A){return A.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(A){return A.scaleFactors})[0],supports:i.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...i.imageInfo.extraFeatures],formats:t,qualities:i.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...i.imageInfo.extraQualities],preferredFormat:r}}const Xo={};Xo[nt.VERSION1]=pw;Xo[nt.VERSION2]=yw;Xo[nt.VERSION3]=mw;class Qw{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return nt.VERSION1;case"http://iiif.io/api/image/2/context.json":return nt.VERSION2;case"http://iiif.io/api/image/3/context.json":return nt.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(nt.VERSION1)&&this.imageInfo.identifier)return nt.VERSION1;break}er(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case nt.VERSION1:if(Ew.test(this.imageInfo.profile))return this.imageInfo.profile;break;case nt.VERSION3:if(Bw.test(this.imageInfo.profile))return this.imageInfo.profile;break;case nt.VERSION2:if(typeof this.imageInfo.profile=="string"&&wh.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&wh.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const t=this.getComplianceLevelEntryFromProfile(e);if(t===void 0)return;const r=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return t===void 0?Oi.none.none:Oi[e][t]}getTileSourceOptions(e){const t=e||{},r=this.getImageApiVersion();if(r===void 0)return;const A=r===void 0?void 0:Xo[r](this);if(A!==void 0)return{url:A.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:A.sizes,format:t.format!==void 0&&A.formats.includes(t.format)?t.format:A.preferredFormat!==void 0?A.preferredFormat:"jpg",supports:A.supports,quality:t.quality&&A.qualities.includes(t.quality)?t.quality:A.qualities.includes("native")?"native":"default",resolutions:Array.isArray(A.resolutions)?A.resolutions.sort(function(n,s){return s-n}):void 0,tileSize:A.tileSize}}}let Ec=class{read(e){if(!e)return null;if(typeof e=="string"){const t=Vs(e);return this.readFromDocument(t)}return $s(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){Mr()}};const ww="http://www.w3.org/1999/xlink";function YA(i){return i.getAttributeNS(ww,"href")}const Yt=[null,"http://www.opengis.net/ows/1.1"],_w=K(Yt,{ServiceIdentification:b(Vw),ServiceProvider:b(Zw),OperationsMetadata:b(zw)});let Zf=class extends Ec{constructor(){super()}readFromNode(e){const t=Y({},_w,e,[]);return t||null}};const Sw=K(Yt,{DeliveryPoint:b(U),City:b(U),AdministrativeArea:b(U),PostalCode:b(U),Country:b(U),ElectronicMailAddress:b(U)}),bw=K(Yt,{Value:De(Ww)}),Rw=K(Yt,{AllowedValues:b(Uw)}),Dw=K(Yt,{Phone:b(jw),Address:b(Pw)}),xw=K(Yt,{HTTP:b(qw)}),Tw=K(Yt,{Get:De(Hw),Post:void 0}),Fw=K(Yt,{DCP:b(Kw)}),Lw=K(Yt,{Operation:Jw}),Nw=K(Yt,{Voice:b(U),Facsimile:b(U)}),Gw=K(Yt,{Constraint:De(Ow)}),vw=K(Yt,{IndividualName:b(U),PositionName:b(U),ContactInfo:b(Yw)}),Mw=K(Yt,{Abstract:b(U),AccessConstraints:b(U),Fees:b(U),Title:b(U),ServiceTypeVersion:b(U),ServiceType:b(U)}),kw=K(Yt,{ProviderName:b(U),ProviderSite:b(YA),ServiceContact:b($w)});function Pw(i,e){return Y({},Sw,i,e)}function Uw(i,e){return Y({},bw,i,e)}function Ow(i,e){const t=i.getAttribute("name");if(t)return Y({name:t},Rw,i,e)}function Yw(i,e){return Y({},Dw,i,e)}function Kw(i,e){return Y({},xw,i,e)}function Hw(i,e){const t=YA(i);if(t)return Y({href:t},Gw,i,e)}function qw(i,e){return Y({},Tw,i,e)}function Jw(i,e){const t=i.getAttribute("name"),r=Y({},Fw,i,e);if(!r)return;const A=e[e.length-1];A[t]=r}function zw(i,e){return Y({},Lw,i,e)}function jw(i,e){return Y({},Nw,i,e)}function Vw(i,e){return Y({},Mw,i,e)}function $w(i,e){return Y({},vw,i,e)}function Zw(i,e){return Y({},kw,i,e)}function Ww(i,e){return U(i)}function _h(i,e,t,r,A,n){A!==void 0?(A=A,n=n!==void 0?n:0):(A=[],n=0);let s=e;for(;s<t;){const o=i[s++];A[n++]=i[s++],A[n++]=o;for(let a=2;a<r;++a)A[n++]=i[s++]}return A.length=n,A}class Xw extends Cc{constructor(e){super(),e=e||{},this.dataProjection=pe("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t);return new Ut(r)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const r=xB(this.geometryLayout_),A=t_(e,r,this.factor_);_h(A,0,A.length,r,A);const n=new Lr(A,this.geometryLayout_);return ht(n,!1,this.adaptOptions(t))}writeFeatureText(e,t){const r=e.getGeometry();if(r)return this.writeGeometryText(r,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){e=ht(e,!0,this.adaptOptions(t));const r=e.getFlatCoordinates(),A=e.getStride();return _h(r,0,r.length,A,r),e_(r,A,this.factor_)}}function e_(i,e,t){t=t||1e5;const r=new Array(e).fill(0);for(let A=0,n=i.length;A<n;)for(let s=0;s<e;++s,++A){const o=i[A]*t,a=o<0?Math.ceil(o-.5):Math.round(o),g=a-r[s];r[s]=a,i[A]=g}return r_(i)}function t_(i,e,t){t=t||1e5;const r=new Array(e).fill(0),A=i_(i);for(let n=0,s=A.length;n<s;)for(let o=0;o<e;++o,++n)r[o]+=A[n],A[n]=r[o]/t;return A}function r_(i){for(let e=0,t=i.length;e<t;++e){const r=i[e];i[e]=r<0?~(r<<1):r<<1}return A_(i)}function i_(i){const e=n_(i);for(let t=0,r=e.length;t<r;++t){const A=e[t];e[t]=A&1?~(A>>1):A>>1}return e}function A_(i){let e="";for(let t=0,r=i.length;t<r;++t)e+=s_(i[t]);return e}function n_(i){const e=[];let t=0,r=0;for(let A=0,n=i.length;A<n;++A){const s=i.charCodeAt(A)-63;t|=(s&31)<<r,s<32?(e.push(t),t=0,r=0):r+=5}return e}function s_(i){let e,t="";for(;i>=32;)e=(32|i&31)+63,t+=String.fromCharCode(e),i>>=5;return e=i+63,t+=String.fromCharCode(e),t}class Be extends k{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,t,r){const A=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},A),super.writeGeometryElement(e,t,r)}}Be.prototype.namespace="http://www.opengis.net/gml/3.2";Be.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:ee(k.prototype.readFlatPos),posList:ee(k.prototype.readFlatPosList),coordinates:ee(ce.prototype.readFlatCoordinates)}};Be.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:k.prototype.interiorParser,exterior:k.prototype.exteriorParser}};Be.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ee(V.prototype.readPoint),MultiPoint:ee(V.prototype.readMultiPoint),LineString:ee(V.prototype.readLineString),MultiLineString:ee(V.prototype.readMultiLineString),LinearRing:ee(V.prototype.readLinearRing),Polygon:ee(V.prototype.readPolygon),MultiPolygon:ee(V.prototype.readMultiPolygon),Surface:ee(Be.prototype.readSurface),MultiSurface:ee(k.prototype.readMultiSurface),Curve:ee(Be.prototype.readCurve),MultiCurve:ee(k.prototype.readMultiCurve),Envelope:ee(Be.prototype.readEnvelope)}};Be.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:W(k.prototype.curveMemberParser),curveMembers:W(k.prototype.curveMemberParser)}};Be.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:W(k.prototype.surfaceMemberParser),surfaceMembers:W(k.prototype.surfaceMemberParser)}};Be.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:W(V.prototype.readLineString),Curve:W(k.prototype.readCurve)}};Be.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:W(V.prototype.readPolygon),Surface:W(k.prototype.readSurface)}};Be.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:ee(k.prototype.readPatch)}};Be.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:ee(k.prototype.readSegment)}};Be.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:W(k.prototype.readFlatPosList),upperCorner:W(k.prototype.readFlatPosList)}};Be.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:ee(k.prototype.readPolygonPatch)}};Be.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Td(k.prototype.readLineStringSegment)}};Be.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:W(V.prototype.pointMemberParser),pointMembers:W(V.prototype.pointMemberParser)}};Be.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:W(V.prototype.lineStringMemberParser),lineStringMembers:W(V.prototype.lineStringMemberParser)}};Be.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:W(V.prototype.polygonMemberParser),polygonMembers:W(V.prototype.polygonMemberParser)}};Be.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:W(V.prototype.readFlatCoordinatesFromNode)}};Be.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:W(V.prototype.readLineString)}};Be.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:W(V.prototype.readPolygon)}};Be.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:ee(V.prototype.readFlatLinearRing),Ring:ee(Be.prototype.readFlatCurveRing)}};Be.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:D(k.prototype.writeRing),interior:D(k.prototype.writeRing)}};Be.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:D(ue),upperCorner:D(ue)}};Be.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:D(k.prototype.writeSurfaceOrPolygonMember),polygonMember:D(k.prototype.writeSurfaceOrPolygonMember)}};Be.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:D(k.prototype.writePointMember)}};Be.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:D(k.prototype.writeLineStringOrCurveMember),curveMember:D(k.prototype.writeLineStringOrCurveMember)}};Be.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:D(k.prototype.writeCurveOrLineString),MultiCurve:D(k.prototype.writeMultiCurveOrLineString),Point:D(Be.prototype.writePoint),MultiPoint:D(k.prototype.writeMultiPoint),LineString:D(k.prototype.writeCurveOrLineString),MultiLineString:D(k.prototype.writeMultiCurveOrLineString),LinearRing:D(k.prototype.writeLinearRing),Polygon:D(k.prototype.writeSurfaceOrPolygon),MultiPolygon:D(k.prototype.writeMultiSurfaceOrPolygon),Surface:D(k.prototype.writeSurfaceOrPolygon),MultiSurface:D(k.prototype.writeMultiSurfaceOrPolygon),Envelope:D(k.prototype.writeEnvelope)}};class Wf{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}}class o_ extends Wf{constructor(e,t){super(e),this.conditions=t,er(this.conditions.length>=2,"At least 2 conditions are required")}}class a_ extends o_{constructor(e){super("And",Array.prototype.slice.call(arguments))}}class g_ extends Wf{constructor(e,t,r){if(super("BBOX"),this.geometryName=e,this.extent=t,t.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function l_(i){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(a_,e))}function c_(i,e,t){return new g_(i,e,t)}const Sh={"http://www.opengis.net/gml":{boundedBy:b(V.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:W(V.prototype.readFeaturesInternal)}},u_={"http://www.opengis.net/wfs":{totalInserted:b(et),totalUpdated:b(et),totalDeleted:b(et)},"http://www.opengis.net/wfs/2.0":{totalInserted:b(et),totalUpdated:b(et),totalDeleted:b(et)}},h_={"http://www.opengis.net/wfs":{TransactionSummary:b(Rh,"transactionSummary"),InsertResults:b(xh,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:b(Rh,"transactionSummary"),InsertResults:b(xh,"insertIds")}},I_={"http://www.opengis.net/wfs":{PropertyName:D(ue)},"http://www.opengis.net/wfs/2.0":{PropertyName:D(ue)}},Xf={"http://www.opengis.net/wfs":{Insert:D(Th),Update:D(Lh),Delete:D(Fh),Property:D(Nh),Native:D(Gh)},"http://www.opengis.net/wfs/2.0":{Insert:D(Th),Update:D(Lh),Delete:D(Fh),Property:D(Nh),Native:D(Gh)}},eC="feature",Bc="http://www.w3.org/2000/xmlns/",pc={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},vg={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},yc={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},bh={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},mc={"2.0.0":Be,"1.1.0":k,"1.0.0":ce},d_="1.1.0";class f_ extends Oo{constructor(e){super(),e=e||{},this.version_=e.version?e.version:d_,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new mc[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:bh[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,t){const r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,t||{}));const A=[r];let n;this.version_==="2.0.0"?n=Sh:n=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let s=Y([],n,e,A,this.gmlFormat_);return s||(s=[]),s}readTransactionResponse(e){if(e){if(typeof e=="string"){const t=Vs(e);return this.readTransactionResponseFromDocument(t)}return $s(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const t=Vs(e);return this.readFeatureCollectionMetadataFromDocument(t)}return $s(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}readFeatureCollectionMetadataFromNode(e){const t={},r=ni(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=r,Y(t,Sh,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}readTransactionResponseFromNode(e){return Y({},h_,e,[])}writeGetFeature(e){const t=ne(vg[this.version_],"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version",this.version_),e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&t.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&t.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&t.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&t.setAttribute("count",String(e.count)),e.viewParams!==void 0&&t.setAttribute("viewParams",e.viewParams),t.setAttributeNS(En,"xsi:schemaLocation",this.schemaLocation_);const r={node:t};if(Object.assign(r,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),er(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let A=e.filter;e.bbox&&(er(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),A=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,A)),Object.assign(r,{geometryName:e.geometryName,filter:A}),qh(t,e.featureTypes,[r])}else e.featureTypes.forEach(A=>{const n=this.combineBboxAndFilter(A.geometryName,A.bbox,e.srsName,e.filter);Object.assign(r,{geometryName:A.geometryName,filter:n}),qh(t,[A.name],[r])});return t}combineBboxAndFilter(e,t,r,A){const n=c_(e,t,r);return A?l_(A,n):n}writeTransaction(e,t,r,A){const n=[],s=A.version?A.version:this.version_,o=ne(vg[s],"Transaction");o.setAttribute("service","WFS"),o.setAttribute("version",s);let a;A&&(a=A.gmlOptions?A.gmlOptions:{},A.handle&&o.setAttribute("handle",A.handle)),o.setAttributeNS(En,"xsi:schemaLocation",bh[s]);const g=C_(o,a,s,A);return e&&ws("Insert",e,n,g),t&&ws("Update",t,n,g),r&&ws("Delete",r,n,g),A.nativeElements&&ws("Native",A.nativeElements,n,g),o}readProjectionFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(!(t.childNodes.length===0||t.childNodes.length===1&&t.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(t,r),pe(r.pop().srsName)}}return null}}function C_(i,e,t,r){const A=r.featurePrefix?r.featurePrefix:eC;let n;return t==="1.0.0"?n=2:t==="1.1.0"?n=3:t==="2.0.0"&&(n=3.2),Object.assign({node:i},{version:t,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:A,gmlVersion:n,hasZ:r.hasZ,srsName:r.srsName},e)}function ws(i,e,t,r){Ge(r,Xf,Xt(i),e,t)}function Rh(i,e){return Y({},u_,i,e)}const E_={"http://www.opengis.net/ogc":{FeatureId:W(function(i,e){return i.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:W(function(i,e){return i.getAttribute("fid")})}};function Dh(i,e){gi(E_,i,e)}const B_={"http://www.opengis.net/wfs":{Feature:Dh},"http://www.opengis.net/wfs/2.0":{Feature:Dh}};function xh(i,e){return Y([],B_,i,e)}function Th(i,e,t){const r=t[t.length-1],A=r.featureType,n=r.featureNS,s=r.gmlVersion,o=ne(n,A);i.appendChild(o),s===2?ce.prototype.writeFeatureElement(o,e,t):s===3?k.prototype.writeFeatureElement(o,e,t):Be.prototype.writeFeatureElement(o,e,t)}function tC(i,e,t){const A=t[t.length-1].version,n=pc[A],s=ne(n,"Filter"),o=ne(n,"FeatureId");s.appendChild(o),o.setAttribute("fid",e),i.appendChild(s)}function Qc(i,e){i=i||eC;const t=i+":";return e.startsWith(t)?e:t+e}function Fh(i,e,t){const r=t[t.length-1];er(e.getId()!==void 0,"Features must have an id set");const A=r.featureType,n=r.featurePrefix,s=r.featureNS,o=Qc(n,A);i.setAttribute("typeName",o),i.setAttributeNS(Bc,"xmlns:"+n,s);const a=e.getId();a!==void 0&&tC(i,a,t)}function Lh(i,e,t){const r=t[t.length-1];er(e.getId()!==void 0,"Features must have an id set");const A=r.version,n=r.featureType,s=r.featurePrefix,o=r.featureNS,a=Qc(s,n),g=e.getGeometryName();i.setAttribute("typeName",a),i.setAttributeNS(Bc,"xmlns:"+s,o);const l=e.getId();if(l!==void 0){const c=e.getKeys(),u=[];for(let I=0,h=c.length;I<h;I++){const d=e.get(c[I]);if(d!==void 0){let f=c[I];d&&typeof d.getSimplifiedGeometry=="function"&&(f=g),u.push({name:f,value:d})}}Ge({version:A,gmlVersion:r.gmlVersion,node:i,hasZ:r.hasZ,srsName:r.srsName},Xf,Xt("Property"),u,t),tC(i,l,t)}}function Nh(i,e,t){const r=t[t.length-1],A=r.version,n=vg[A],o=ne(n,A==="2.0.0"?"ValueReference":"Name"),a=r.gmlVersion;if(i.appendChild(o),ue(o,e.name),e.value!==void 0&&e.value!==null){const g=ne(n,"Value");i.appendChild(g),e.value&&typeof e.value.getSimplifiedGeometry=="function"?a===2?ce.prototype.writeGeometryElement(g,e.value,t):a===3?k.prototype.writeGeometryElement(g,e.value,t):Be.prototype.writeGeometryElement(g,e.value,t):ue(g,e.value)}}function Gh(i,e,t){e.vendorId&&i.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&i.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&ue(i,e.value)}const ea={"http://www.opengis.net/wfs":{Query:D(vh)},"http://www.opengis.net/wfs/2.0":{Query:D(vh)},"http://www.opengis.net/ogc":{During:D(Ph),And:D(_s),Or:D(_s),Not:D(Uh),BBOX:D(Mh),Contains:D(ei),Intersects:D(ei),Within:D(ei),DWithin:D(kh),PropertyIsEqualTo:D(rr),PropertyIsNotEqualTo:D(rr),PropertyIsLessThan:D(rr),PropertyIsLessThanOrEqualTo:D(rr),PropertyIsGreaterThan:D(rr),PropertyIsGreaterThanOrEqualTo:D(rr),PropertyIsNull:D(Oh),PropertyIsBetween:D(Yh),PropertyIsLike:D(Kh)},"http://www.opengis.net/fes/2.0":{During:D(Ph),And:D(_s),Or:D(_s),Not:D(Uh),BBOX:D(Mh),Contains:D(ei),Disjoint:D(ei),Intersects:D(ei),ResourceId:D(y_),Within:D(ei),DWithin:D(kh),PropertyIsEqualTo:D(rr),PropertyIsNotEqualTo:D(rr),PropertyIsLessThan:D(rr),PropertyIsLessThanOrEqualTo:D(rr),PropertyIsGreaterThan:D(rr),PropertyIsGreaterThanOrEqualTo:D(rr),PropertyIsNull:D(Oh),PropertyIsBetween:D(Yh),PropertyIsLike:D(Kh)}};function vh(i,e,t){const r=t[t.length-1],A=r.version,n=r.featurePrefix,s=r.featureNS,o=r.propertyNames,a=r.srsName;let g;n?g=Qc(n,e):g=e;let l;A==="2.0.0"?l="typeNames":l="typeName",i.setAttribute(l,g),a&&i.setAttribute("srsName",a),s&&i.setAttributeNS(Bc,"xmlns:"+n,s);const c=Object.assign({},r);c.node=i,Ge(c,I_,Xt("PropertyName"),o,t);const u=r.filter;if(u){const I=ne(ta(A),"Filter");i.appendChild(I),p_(I,u,t)}}function p_(i,e,t){const r=t[t.length-1],A={node:i};Object.assign(A,{context:r}),Ge(A,ea,Xt(e.getTagName()),[e],t)}function Mh(i,e,t){const r=t[t.length-1],n=r.context.version;r.srsName=e.srsName;const s=mc[n];KA(n,i,e.geometryName),s.prototype.writeGeometryElement(i,e.extent,t)}function y_(i,e,t){i.setAttribute("rid",e.rid)}function ei(i,e,t){const r=t[t.length-1],n=r.context.version;r.srsName=e.srsName;const s=mc[n];KA(n,i,e.geometryName),s.prototype.writeGeometryElement(i,e.geometry,t)}function kh(i,e,t){const n=t[t.length-1].context.version;ei(i,e,t);const s=ne(ta(n),"Distance");ue(s,e.distance.toString()),n==="2.0.0"?s.setAttribute("uom",e.unit):s.setAttribute("units",e.unit),i.appendChild(s)}function Ph(i,e,t){const n=t[t.length-1].context.version;co(yc[n],"ValueReference",i,e.propertyName);const s=ne(Kr,"TimePeriod");i.appendChild(s);const o=ne(Kr,"begin");s.appendChild(o),Hh(o,e.begin);const a=ne(Kr,"end");s.appendChild(a),Hh(a,e.end)}function _s(i,e,t){const A=t[t.length-1].context,n={node:i};Object.assign(n,{context:A});const s=e.conditions;for(let o=0,a=s.length;o<a;++o){const g=s[o];Ge(n,ea,Xt(g.getTagName()),[g],t)}}function Uh(i,e,t){const A=t[t.length-1].context,n={node:i};Object.assign(n,{context:A});const s=e.condition;Ge(n,ea,Xt(s.getTagName()),[s],t)}function rr(i,e,t){const n=t[t.length-1].context.version;e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),KA(n,i,e.propertyName),uo(n,i,""+e.expression)}function Oh(i,e,t){const n=t[t.length-1].context.version;KA(n,i,e.propertyName)}function Yh(i,e,t){const n=t[t.length-1].context.version,s=ta(n);KA(n,i,e.propertyName);const o=ne(s,"LowerBoundary");i.appendChild(o),uo(n,o,""+e.lowerBoundary);const a=ne(s,"UpperBoundary");i.appendChild(a),uo(n,a,""+e.upperBoundary)}function Kh(i,e,t){const n=t[t.length-1].context.version;i.setAttribute("wildCard",e.wildCard),i.setAttribute("singleChar",e.singleChar),i.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),KA(n,i,e.propertyName),uo(n,i,""+e.pattern)}function co(i,e,t,r){const A=ne(i,e);ue(A,r),t.appendChild(A)}function uo(i,e,t){co(ta(i),"Literal",e,t)}function KA(i,e,t){i==="2.0.0"?co(yc[i],"ValueReference",e,t):co(pc[i],"PropertyName",e,t)}function Hh(i,e){const t=ne(Kr,"TimeInstant");i.appendChild(t);const r=ne(Kr,"timePosition");t.appendChild(r),ue(r,e)}function qh(i,e,t){const r=t[t.length-1],A=Object.assign({},r);A.node=i,Ge(A,ea,Xt("Query"),e,t)}function ta(i){let e;return i==="2.0.0"?e=yc[i]:e=pc[i],e}const xe={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class Jh{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),t=[];for(let r=0;r<e;r++)t.push(this.readPoint());return t}readPolygon(){const e=this.readUint32(),t=[];for(let r=0;r<e;r++)t.push(this.readLineString());return t}readWkbHeader(e){const r=this.readUint8()>0,A=this.readUint32(r),n=Math.floor((A&268435455)/1e3),s=!!(A&2147483648)||n===1||n===3,o=!!(A&1073741824)||n===2||n===3,a=!!(A&536870912),g=(A&268435455)%1e3,l=["XY",s?"Z":"",o?"M":""].join(""),c=a?this.readUint32(r):null;if(e!==void 0&&e!==g)throw new Error("Unexpected WKB geometry type "+g);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==l)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=s,this.hasM_=o,this.layout_=l,this.srid_=c,this.initialized_=!0;return g}readWkbPayload(e){switch(e){case xe.POINT:return this.readPoint();case xe.LINE_STRING:return this.readLineString();case xe.POLYGON:case xe.TRIANGLE:return this.readPolygon();case xe.MULTI_POINT:return this.readMultiPoint();case xe.MULTI_LINE_STRING:return this.readMultiLineString();case xe.MULTI_POLYGON:case xe.POLYHEDRAL_SURFACE:case xe.TIN:return this.readMultiPolygon();case xe.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,t){const r=this.readUint32(),A=[];for(let n=0;n<r;n++){const s=e.call(this,t);s&&A.push(s)}return A}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,xe.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,xe.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,xe.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case xe.POINT:return new ar(t,this.layout_);case xe.LINE_STRING:return new Lr(t,this.layout_);case xe.POLYGON:case xe.TRIANGLE:return new vi(t,this.layout_);case xe.MULTI_POINT:return new Uo(t,this.layout_);case xe.MULTI_LINE_STRING:return new NA(t,this.layout_);case xe.MULTI_POLYGON:case xe.POLYHEDRAL_SURFACE:case xe.TIN:return new Vn(t,this.layout_);case xe.GEOMETRY_COLLECTION:return new ui(t);default:return null}}getSrid(){return this.srid_}}class m_{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,t){const r=Object.assign.apply(null,t.split("").map((A,n)=>({[A]:e[n]})));for(const A of this.layout_)this.writeDouble(A in r?r[A]:this.nodata_[A])}writeLineString(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writePoint(e[r],t)}writePolygon(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeLineString(e[r],t)}writeWkbHeader(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}writeMultiPoint(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],t)}writeMultiLineString(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],t)}writeMultiPolygon(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],t)}writeGeometryCollection(e){this.writeUint32(e.length);for(let t=0;t<e.length;t++)this.writeGeometry(e[t])}findMinimumLayout(e,t="XYZM"){const r=(A,n)=>A===n?A:A==="XYZM"?n:n==="XYZM"?A:"XY";if(e instanceof qu)return r(e.getLayout(),t);if(e instanceof ui){const A=e.getGeometriesArray();for(let n=0;n<A.length&&t!=="XY";n++)t=this.findMinimumLayout(A[n],t)}return t}writeGeometry(e,t){const r={Point:xe.POINT,LineString:xe.LINE_STRING,Polygon:xe.POLYGON,MultiPoint:xe.MULTI_POINT,MultiLineString:xe.MULTI_LINE_STRING,MultiPolygon:xe.MULTI_POLYGON,GeometryCollection:xe.GEOMETRY_COLLECTION},A=e.getType(),n=r[A];if(!n)throw new Error("GeometryType "+A+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(n,t),e instanceof qu?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[A].call(this,e.getCoordinates(),e.getLayout()):e instanceof ui&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((n,s)=>n+s[0],0),t=new ArrayBuffer(e),r=new DataView(t);let A=0;return this.writeQueue_.forEach(n=>{switch(n[0]){case 1:r.setUint8(A,n[1]);break;case 4:r.setUint32(A,n[1],this.isLittleEndian_);break;case 8:r.setFloat64(A,n[1],this.isLittleEndian_);break}A+=n[0]}),t}}class Q_ extends Ld{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,t){return new Ut({geometry:this.readGeometry(e,t)})}readFeatures(e,t){let r=[];const A=this.readGeometry(e,t);return this.splitCollection&&A instanceof ui?r=A.getGeometriesArray():r=[A],r.map(n=>new Ut({geometry:n}))}readGeometry(e,t){const r=zh(e);if(!r)return null;const n=new Jh(r).readGeometry();return this.viewCache_=r,t=this.getReadOptions(e,t),this.viewCache_=null,ht(n,!1,t)}readProjection(e){const t=this.viewCache_||zh(e);if(!t)return;const r=new Jh(t);return r.readWkbHeader(),r.getSrid()&&pe("EPSG:"+r.getSrid())||void 0}writeFeature(e,t){return this.writeGeometry(e.getGeometry(),t)}writeFeatures(e,t){return this.writeGeometry(new ui(e.map(r=>r.getGeometry())),t)}writeGeometry(e,t){t=this.adaptOptions(t);const r=new m_({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let A=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const s=t.dataProjection&&pe(t.dataProjection);if(s){const o=s.getCode();o.startsWith("EPSG:")&&(A=Number(o.substring(5)))}}r.writeGeometry(ht(e,!0,t),A);const n=r.getBuffer();return this.hex_?w_(n):n}}function w_(i){const e=new Uint8Array(i);return Array.from(e.values()).map(t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase()).join("")}function __(i){const e=new Uint8Array(i.length/2);for(let t=0;t<i.length/2;t++)e[t]=parseInt(i.substr(t*2,2),16);return new DataView(e.buffer)}function zh(i){return typeof i=="string"?__(i):ArrayBuffer.isView(i)?i instanceof DataView?i:new DataView(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?new DataView(i):null}const S_={POINT:ar,LINESTRING:Lr,POLYGON:vi,MULTIPOINT:Uo,MULTILINESTRING:NA,MULTIPOLYGON:Vn},rC="EMPTY",iC="Z",AC="M",b_="ZM",be={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},R_={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class D_{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let r=e,A;if(e=="(")A=be.LEFT_PAREN;else if(e==",")A=be.COMMA;else if(e==")")A=be.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")A=be.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))A=be.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")A=be.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:r,type:A}}readNumber_(){let e;const t=this.index_;let r=!1,A=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(A=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!A&&(e=="e"||e=="E")||A&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class x_{constructor(e){this.lexer_=e,this.token_={position:0,type:be.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(be.TEXT)){const r=t.value;r===iC?e="XYZ":r===AC?e="XYM":r===b_&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(be.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(be.COMMA));if(this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(be.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(be.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(be.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(be.LEFT_PAREN)){let e;if(this.token_.type==be.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(be.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(be.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(be.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let r=0;r<t;++r){const A=this.token_;if(this.match(be.NUMBER))e.push(A.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(be.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(be.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(be.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(be.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(be.TEXT)&&this.token_.value==rC;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(be.TEXT)){const t=e.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(r)return new ui([]);const s=this.parseGeometryCollectionText_();return new ui(s)}const A=S_[t];if(!A)throw new Error("Invalid geometry type: "+t);let n;if(r)t=="POINT"?n=[NaN,NaN]:n=[];else switch(t){case"POINT":{n=this.parsePointText_();break}case"LINESTRING":{n=this.parseLineStringText_();break}case"POLYGON":{n=this.parsePolygonText_();break}case"MULTIPOINT":{n=this.parseMultiPointText_();break}case"MULTILINESTRING":{n=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{n=this.parseMultiPolygonText_();break}}return new A(n,this.layout_)}throw new Error(this.formatErrorMessage_())}}class T_ extends Cc{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const t=new D_(e);return new x_(t).parse()}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t),A=new Ut;return A.setGeometry(r),A}readFeaturesFromText(e,t){let r=[];const A=this.readGeometryFromText(e,t);this.splitCollection_&&A.getType()=="GeometryCollection"?r=A.getGeometriesArray():r=[A];const n=[];for(let s=0,o=r.length;s<o;++s){const a=new Ut;a.setGeometry(r[s]),n.push(a)}return n}readGeometryFromText(e,t){const r=this.parse_(e);return ht(r,!1,t)}writeFeatureText(e,t){const r=e.getGeometry();return r?this.writeGeometryText(r,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);const r=[];for(let n=0,s=e.length;n<s;++n)r.push(e[n].getGeometry());const A=new ui(r);return this.writeGeometryText(A,t)}writeGeometryText(e,t){return oC(ht(e,!0,t))}}function nC(i){const e=i.getCoordinates();return e.length===0?"":e.join(" ")}function F_(i){const e=[],t=i.getPoints();for(let r=0,A=t.length;r<A;++r)e.push("("+nC(t[r])+")");return e.join(",")}function L_(i){const e=[],t=i.getGeometries();for(let r=0,A=t.length;r<A;++r)e.push(oC(t[r]));return e.join(",")}function wc(i){const e=i.getCoordinates(),t=[];for(let r=0,A=e.length;r<A;++r)t.push(e[r].join(" "));return t.join(",")}function N_(i){const e=[],t=i.getLineStrings();for(let r=0,A=t.length;r<A;++r)e.push("("+wc(t[r])+")");return e.join(",")}function sC(i){const e=[],t=i.getLinearRings();for(let r=0,A=t.length;r<A;++r)e.push("("+wc(t[r])+")");return e.join(",")}function G_(i){const e=[],t=i.getPolygons();for(let r=0,A=t.length;r<A;++r)e.push("("+sC(t[r])+")");return e.join(",")}function v_(i){const e=i.getLayout();let t="";return(e==="XYZ"||e==="XYZM")&&(t+=iC),(e==="XYM"||e==="XYZM")&&(t+=AC),t}const M_={Point:nC,LineString:wc,Polygon:sC,MultiPoint:F_,MultiLineString:N_,MultiPolygon:G_,GeometryCollection:L_};function oC(i){const e=i.getType(),t=M_[e],r=t(i);let A=R_[e];if(typeof i.getFlatCoordinates=="function"){const n=v_(i);n.length>0&&(A+=" "+n)}return r.length===0?A+" "+rC:A+"("+r+")"}const gt=[null,"http://www.opengis.net/wms","http://www.opengis.net/sld"];function ss(i){return TB(i[0].version,"1.3")>=0}const k_=K(gt,{Service:b(sS),Capability:b(nS)}),P_=K(gt,{Request:b(dS),Exception:b(lS),Layer:b(cS),UserDefinedSymbolization:b(iS)});class U_ extends Ec{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=Y({version:this.version},k_,e,[]);return t||null}}const aC={Name:b(U),Title:b(U),Abstract:b(U),KeywordList:b(IC),OnlineResource:b(YA),ContactInformation:b(oS),Fees:b(U),AccessConstraints:b(U)},O_=K(gt,aC),Y_=K(gt,{...aC,LayerLimit:b(et),MaxWidth:b(et),MaxHeight:b(et)}),K_=K(gt,{ContactPersonPrimary:b(aS),ContactPosition:b(U),ContactAddress:b(gS),ContactVoiceTelephone:b(U),ContactFacsimileTelephone:b(U),ContactElectronicMailAddress:b(U)}),H_=K(gt,{ContactPerson:b(U),ContactOrganization:b(U)}),q_=K(gt,{AddressType:b(U),Address:b(U),City:b(U),StateOrProvince:b(U),PostCode:b(U),Country:b(U)}),J_=K(gt,{Format:W(U)}),gC={Name:b(U),Title:b(U),Abstract:b(U),KeywordList:b(IC),BoundingBox:De(uC),Dimension:De(uS),Attribution:b(rS),AuthorityURL:De(ES),Identifier:De(U),MetadataURL:De(BS),DataURL:De(Jr),FeatureListURL:De(Jr),Style:De(pS),Layer:De(ra)},lC=K(gt,{...gC,SRS:De(U),Extent:b(hS),ScaleHint:De(IS),LatLonBoundingBox:b((i,e)=>uC(i,e,!1)),Layer:De(ra)}),cC=K(gt,{...gC,CRS:De(U),EX_GeographicBoundingBox:b(AS),MinScaleDenominator:b(St),MaxScaleDenominator:b(St),Layer:De(ra)}),z_=K(gt,{Title:b(U),OnlineResource:b(YA),LogoURL:b(hC)}),j_=K(gt,{westBoundLongitude:b(St),eastBoundLongitude:b(St),southBoundLatitude:b(St),northBoundLatitude:b(St)}),V_=K(gt,{GetCapabilities:b(en),GetMap:b(en),GetFeatureInfo:b(en),DescribeLayer:b(en),GetLegendGraphic:b(en)}),$_=K(gt,{Format:De(U),DCPType:De(fS)}),Z_=K(gt,{HTTP:b(CS)}),W_=K(gt,{Get:b(Jr),Post:b(Jr)}),X_=K(gt,{Name:b(U),Title:b(U),Abstract:b(U),LegendURL:De(hC),StyleSheetURL:b(Jr),StyleURL:b(Jr)}),eS=K(gt,{Format:b(U),OnlineResource:b(YA)}),tS=K(gt,{Keyword:W(U)});function rS(i,e){return Y({},z_,i,e)}function iS(i,e){return{SupportSLD:!!zt(i.getAttribute("SupportSLD")),UserLayer:!!zt(i.getAttribute("UserLayer")),UserStyle:!!zt(i.getAttribute("UserStyle")),RemoteWFS:!!zt(i.getAttribute("RemoteWFS")),InlineFeatureData:!!zt(i.getAttribute("InlineFeatureData")),RemoteWCS:!!zt(i.getAttribute("RemoteWCS"))}}function uC(i,e,t=!0){const r=[_r(i.getAttribute("minx")),_r(i.getAttribute("miny")),_r(i.getAttribute("maxx")),_r(i.getAttribute("maxy"))],A=[_r(i.getAttribute("resx")),_r(i.getAttribute("resy"))],n={extent:r,res:A};return t&&(ss(e)?n.crs=i.getAttribute("CRS"):n.srs=i.getAttribute("SRS")),n}function AS(i,e){const t=Y({},j_,i,e);if(!t)return;const r=t.westBoundLongitude,A=t.southBoundLatitude,n=t.eastBoundLongitude,s=t.northBoundLatitude;if(!(r===void 0||A===void 0||n===void 0||s===void 0))return[r,A,n,s]}function nS(i,e){return Y({},P_,i,e)}function sS(i,e){return Y({},ss(e)?Y_:O_,i,e)}function oS(i,e){return Y({},K_,i,e)}function aS(i,e){return Y({},H_,i,e)}function gS(i,e){return Y({},q_,i,e)}function lS(i,e){return Y([],J_,i,e)}function cS(i,e){const t=Y({},ss(e)?cC:lC,i,e);return t.Layer===void 0?Object.assign(t,ra(i,e)):t}function ra(i,e){const t=ss(e),r=e[e.length-1],A=Y({},t?cC:lC,i,e);if(!A)return;let n=zt(i.getAttribute("queryable"));n===void 0&&(n=r.queryable),A.queryable=n!==void 0?n:!1;let s=ni(i.getAttribute("cascaded"));s===void 0&&(s=r.cascaded),A.cascaded=s;let o=zt(i.getAttribute("opaque"));o===void 0&&(o=r.opaque),A.opaque=o!==void 0?o:!1;let a=zt(i.getAttribute("noSubsets"));a===void 0&&(a=r.noSubsets),A.noSubsets=a!==void 0?a:!1;let g=_r(i.getAttribute("fixedWidth"));g||(g=r.fixedWidth),A.fixedWidth=g;let l=_r(i.getAttribute("fixedHeight"));l||(l=r.fixedHeight),A.fixedHeight=l;const c=["Style","AuthorityURL"];t?c.push("CRS"):c.push("SRS","Dimension"),c.forEach(function(I){if(I in r){const h=A[I]||[];A[I]=h.concat(r[I])}});const u=["BoundingBox","Attribution"];return t?u.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):u.push("LatLonBoundingBox","ScaleHint","Extent"),u.forEach(function(I){if(!(I in A)){const h=r[I];A[I]=h}}),A}function uS(i,e){const t={name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol")};return ss(e)&&Object.assign(t,{default:i.getAttribute("default"),multipleValues:zt(i.getAttribute("multipleValues")),nearestValue:zt(i.getAttribute("nearestValue")),current:zt(i.getAttribute("current")),values:U(i)}),t}function hS(i,e){return{name:i.getAttribute("name"),default:i.getAttribute("default"),nearestValue:zt(i.getAttribute("nearestValue"))}}function IS(i,e){return{min:_r(i.getAttribute("min")),max:_r(i.getAttribute("max"))}}function Jr(i,e){return Y({},eS,i,e)}function dS(i,e){return Y({},V_,i,e)}function fS(i,e){return Y({},Z_,i,e)}function CS(i,e){return Y({},W_,i,e)}function en(i,e){return Y({},$_,i,e)}function hC(i,e){const t=Jr(i,e);if(t){const r=[ni(i.getAttribute("width")),ni(i.getAttribute("height"))];return t.size=r,t}}function ES(i,e){const t=Jr(i,e);if(t)return t.name=i.getAttribute("name"),t}function BS(i,e){const t=Jr(i,e);if(t)return t.type=i.getAttribute("type"),t}function pS(i,e){return Y({},X_,i,e)}function IC(i,e){return Y([],tS,i,e)}const yS="_feature",mS="_layer";class QS extends Oo{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new ce,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,t){e.setAttribute("namespaceURI",this.featureNS_);const r=e.localName;let A=[];if(e.childNodes.length===0)return A;if(r=="msGMLOutput")for(let n=0,s=e.childNodes.length;n<s;n++){const o=e.childNodes[n];if(o.nodeType!==Node.ELEMENT_NODE)continue;const a=o,g=t[0],l=mS,c=a.localName.replace(l,"");if(this.layers_&&!this.layers_.includes(c))continue;const u=c+yS;g.featureType=u,g.featureNS=this.featureNS_;const I={};I[u]=W(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const h=K([g.featureNS,null],I);a.setAttribute("namespaceURI",this.featureNS_);const d=Y([],h,a,t,this.gmlFormat_);d&&js(A,d)}if(r=="FeatureCollection"){const n=Y([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);n&&(A=n)}return A}readFeaturesFromNode(e,t){const r={};return t&&Object.assign(r,this.getReadOptions(e,t)),this.readFeatures_(e,[r])}}const Nr=[null,"http://www.opengis.net/wmts/1.0"],HA=[null,"http://www.opengis.net/ows/1.1"],wS=K(Nr,{Contents:b(NS)});let dC=class extends Ec{constructor(){super(),this.owsParser_=new Zf}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=Y(r,wS,e,[]),r||null):null}};const _S=K(Nr,{Layer:De(GS),TileMatrixSet:De(vS)}),SS=K(Nr,{Style:De(MS),Format:De(U),TileMatrixSetLink:De(kS),Dimension:De(PS),ResourceURL:De(US)},K(HA,{Title:b(U),Abstract:b(U),WGS84BoundingBox:b(CC),BoundingBox:De(OS),Identifier:b(U)})),bS=K(Nr,{LegendURL:De(YS)},K(HA,{Title:b(U),Identifier:b(U)})),RS=K(Nr,{TileMatrixSet:b(U),TileMatrixSetLimits:b(HS)}),DS=K(Nr,{TileMatrixLimits:W(qS)}),xS=K(Nr,{TileMatrix:b(U),MinTileRow:b(et),MaxTileRow:b(et),MinTileCol:b(et),MaxTileCol:b(et)}),TS=K(Nr,{Default:b(U),Value:De(U)},K(HA,{Identifier:b(U)})),fC=K(HA,{LowerCorner:W(Mg),UpperCorner:W(Mg)}),FS=K(Nr,{WellKnownScaleSet:b(U),TileMatrix:De(KS)},K(HA,{SupportedCRS:b(U),Identifier:b(U),BoundingBox:b(CC)})),LS=K(Nr,{TopLeftCorner:b(Mg),ScaleDenominator:b(St),TileWidth:b(et),TileHeight:b(et),MatrixWidth:b(et),MatrixHeight:b(et)},K(HA,{Identifier:b(U)}));function NS(i,e){return Y({},_S,i,e)}function GS(i,e){return Y({},SS,i,e)}function vS(i,e){return Y({},FS,i,e)}function MS(i,e){const t=Y({},bS,i,e);if(!t)return;const r=i.getAttribute("isDefault")==="true";return t.isDefault=r,t}function kS(i,e){return Y({},RS,i,e)}function PS(i,e){return Y({},TS,i,e)}function US(i,e){const t=i.getAttribute("format"),r=i.getAttribute("template"),A=i.getAttribute("resourceType"),n={};return t&&(n.format=t),r&&(n.template=r),A&&(n.resourceType=A),n}function CC(i,e){const t=Y([],fC,i,e);if(t.length==2)return Ql(t)}function OS(i,e){const t=i.getAttribute("crs"),r=Y([],fC,i,e);if(r.length==2)return{extent:Ql(r),crs:t}}function YS(i,e){const t={};return t.format=i.getAttribute("format"),t.href=YA(i),t}function Mg(i,e){const t=U(i).split(/\s+/);if(!t||t.length!=2)return;const r=+t[0],A=+t[1];if(!(isNaN(r)||isNaN(A)))return[r,A]}function KS(i,e){return Y({},LS,i,e)}function HS(i,e){return Y([],DS,i,e)}function qS(i,e){return Y({},xS,i,e)}window.eoxMapAdvancedOlFormats={EsriJSON:a0,GML:uc,GPX:G0,IGC:Cw,IIIFInfo:Qw,KML:LB,OWS:Zf,Polyline:Xw,TopoJSON:FB,WFS:f_,WKB:Q_,WKT:T_,WMSCapabilities:U_,WMSGetFeatureInfo:QS,WMTSCapabilities:dC};function EC(i,e,t){const r=[];let A=i(0),n=i(1),s=e(A),o=e(n);const a=[n,A],g=[o,s],l=[1,0],c={};let u=1e5,I,h,d,f,C,E;for(;--u>0&&l.length>0;)d=l.pop(),A=a.pop(),s=g.pop(),E=d.toString(),E in c||(r.push(s[0],s[1]),c[E]=!0),f=l.pop(),n=a.pop(),o=g.pop(),C=(d+f)/2,I=i(C),h=e(I),NB(h[0],h[1],s[0],s[1],o[0],o[1])<t?(r.push(o[0],o[1]),E=f.toString(),c[E]=!0):(l.push(f,C,C,d),g.push(o,h,h,s),a.push(n,I,I,A));return r}function JS(i,e,t,r,A){const n=pe("EPSG:4326");return EC(function(s){return[i,e+(t-e)*s]},Ws(n,r),A)}function zS(i,e,t,r,A){const n=pe("EPSG:4326");return EC(function(s){return[e+(t-e)*s,i]},Ws(n,r),A)}function jS(i){if(!(i.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=i.inversePixelTransform[0],t=i.inversePixelTransform[1],r=Math.sqrt(e*e+t*t),A=i.frameState,n=Bn(i.inversePixelTransform.slice(),A.coordinateToPixelTransform),s=GB(A.viewState.resolution,r);let o;return new vB(i.context,r,A.extent,n,A.viewState.rotation,s,o)}const VS=new Bg({color:"rgba(0,0,0,0.2)"}),$S=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class ZS extends MB{constructor(e){e=e||{};const t=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete t.maxLines,delete t.strokeStyle,delete t.targetSize,delete t.showLabels,delete t.lonLabelFormatter,delete t.latLabelFormatter,delete t.lonLabelPosition,delete t.latLabelPosition,delete t.lonLabelStyle,delete t.latLabelStyle,delete t.intervals,super(t),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:VS,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?Ju.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?Ju.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new La({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new zu({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ju({color:"rgba(0,0,0,1)"}),stroke:new Bg({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const A=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(A),this.lonLabelStyleBase_},this.latLabelStyleBase_=new La({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new zu({font:"12px Calibri,sans-serif",textAlign:"right",fill:new ju({color:"rgba(0,0,0,1)"}),stroke:new Bg({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const A=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(A),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(Qi.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:$S,this.setSource(new wl({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new kB,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new La({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,t){let r=e.slice();return this.projection_&&this.getSource().getWrapX()&&PB(r,this.projection_),this.loadedExtent_&&(UB(this.loadedExtent_,r,t)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(e,t,r){this.loadedExtent_=e;const A=this.getSource(),n=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=br(n,e);if(this.renderedExtent_&&pn(this.renderedExtent_,s)&&this.renderedResolution_===t||(this.renderedExtent_=s,this.renderedResolution_=t,_l(s)))return;const o=Yr(s),a=t*t/4;(!this.projection_||!ks(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(s,o,t,a);let l=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(l+=this.meridians_.length),this.parallelsLabels_&&(l+=this.parallels_.length);let c;for(;l>this.featurePool_.length;)c=new Ut,this.featurePool_.push(c);const u=A.getFeaturesCollection();u.clear();let I=0,h,d;for(h=0,d=this.meridians_.length;h<d;++h)c=this.featurePool_[I++],c.setGeometry(this.meridians_[h]),c.setStyle(this.lineStyle_),u.push(c);for(h=0,d=this.parallels_.length;h<d;++h)c=this.featurePool_[I++],c.setGeometry(this.parallels_[h]),c.setStyle(this.lineStyle_),u.push(c)}addMeridian_(e,t,r,A,n,s){const o=this.getMeridian_(e,t,r,A,s);if(_A(o.getExtent(),n)){if(this.meridiansLabels_){const a=this.lonLabelFormatter_(e);s in this.meridiansLabels_?this.meridiansLabels_[s].text=a:this.meridiansLabels_[s]={geom:new ar([]),text:a}}this.meridians_[s++]=o}return s}addParallel_(e,t,r,A,n,s){const o=this.getParallel_(e,t,r,A,s);if(_A(o.getExtent(),n)){if(this.parallelsLabels_){const a=this.latLabelFormatter_(e);s in this.parallelsLabels_?this.parallelsLabels_[s].text=a:this.parallelsLabels_[s]={geom:new ar([]),text:a}}this.parallels_[s++]=o}return s}drawLabels_(e){const t=e.frameState.viewState.rotation,r=e.frameState.viewState.resolution,A=e.frameState.size,n=e.frameState.extent,s=Yr(n);let o=n;if(t){const h=A[0]*r,d=A[1]*r;o=[s[0]-h/2,s[1]-d/2,s[0]+h/2,s[1]+d/2]}let a=0,g=0,l=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),u=Bt(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Js(c,n)){a=Math.floor((n[0]-c[0])/u),g=Math.ceil((n[2]-c[2])/u);const h=Math.abs(t)>Math.PI/2;l=l!==h}const I=jS(e);for(let h=a;h<=g;++h){let d=this.meridians_.length+this.parallels_.length,f,C,E,B;if(this.meridiansLabels_)for(C=0,E=this.meridiansLabels_.length;C<E;++C){const m=this.meridians_[C];if(!t&&h===0)B=this.getMeridianPoint_(m,n,C);else{const p=m.clone();p.translate(h*u,0),p.rotate(-t,s),B=this.getMeridianPoint_(p,o,C),B.rotate(t,s)}f=this.featurePool_[d++],f.setGeometry(B),f.set("graticule_label",this.meridiansLabels_[C].text),I.drawFeature(f,this.lonLabelStyle_(f))}if(this.parallelsLabels_&&(h===a&&l||h===g&&!l))for(C=0,E=this.parallels_.length;C<E;++C){const m=this.parallels_[C];if(!t&&h===0)B=this.getParallelPoint_(m,n,C);else{const p=m.clone();p.translate(h*u,0),p.rotate(-t,s),B=this.getParallelPoint_(p,o,C),B.rotate(t,s)}f=this.featurePool_[d++],f.setGeometry(B),f.set("graticule_label",this.parallelsLabels_[C].text),I.drawFeature(f,this.latLabelStyle_(f))}}}createGraticule_(e,t,r,A){const n=this.getInterval_(r);if(n==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let s=!1;const o=this.projection_.getExtent(),a=Bt(o);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Js(o,e)&&(Bt(e)>=a?(e[0]=o[0],e[2]=o[2]):s=!0);const g=[Je(t[0],this.minX_,this.maxX_),Je(t[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(g);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=Je(l[0],this.minLon_,this.maxLon_),u=Je(l[1],this.minLat_,this.maxLat_);const I=this.maxLines_;let h,d,f,C,E=e;s||(E=[Je(e[0],this.minX_,this.maxX_),Je(e[1],this.minY_,this.maxY_),Je(e[2],this.minX_,this.maxX_),Je(e[3],this.minY_,this.maxY_)]);const B=SA(E,this.toLonLatTransform_,void 0,8);let m=B[3],p=B[2],y=B[1],Q=B[0];if(s||(aA(E,this.bottomLeft_)&&(Q=this.minLon_,y=this.minLat_),aA(E,this.bottomRight_)&&(p=this.maxLon_,y=this.minLat_),aA(E,this.topLeft_)&&(Q=this.minLon_,m=this.maxLat_),aA(E,this.topRight_)&&(p=this.maxLon_,m=this.maxLat_),m=Je(m,u,this.maxLat_),p=Je(p,c,this.maxLon_),y=Je(y,this.minLat_,u),Q=Je(Q,this.minLon_,c)),c=Math.floor(c/n)*n,C=Je(c,this.minLon_,this.maxLon_),d=this.addMeridian_(C,y,m,A,e,0),h=0,s)for(;(C-=n)>=Q&&h++<I;)d=this.addMeridian_(C,y,m,A,e,d);else for(;C!=this.minLon_&&h++<I;)C=Math.max(C-n,this.minLon_),d=this.addMeridian_(C,y,m,A,e,d);if(C=Je(c,this.minLon_,this.maxLon_),h=0,s)for(;(C+=n)<=p&&h++<I;)d=this.addMeridian_(C,y,m,A,e,d);else for(;C!=this.maxLon_&&h++<I;)C=Math.min(C+n,this.maxLon_),d=this.addMeridian_(C,y,m,A,e,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),u=Math.floor(u/n)*n,f=Je(u,this.minLat_,this.maxLat_),d=this.addParallel_(f,Q,p,A,e,0),h=0;f!=this.minLat_&&h++<I;)f=Math.max(f-n,this.minLat_),d=this.addParallel_(f,Q,p,A,e,d);for(f=Je(u,this.minLat_,this.maxLat_),h=0;f!=this.maxLat_&&h++<I;)f=Math.min(f+n,this.maxLat_),d=this.addParallel_(f,Q,p,A,e,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)}getInterval_(e){const t=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let A=-1;const n=Math.pow(this.targetSize_*e,2),s=[],o=[];for(let a=0,g=this.intervals_.length;a<g;++a){const l=Je(this.intervals_[a]/2,0,90),c=Je(r,-90+l,90-l);if(s[0]=t-l,s[1]=c-l,o[0]=t+l,o[1]=c+l,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(o,o),Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)<=n)break;A=this.intervals_[a]}return A}getMeridian_(e,t,r,A,n){const s=JS(e,t,r,this.projection_,A);let o=this.meridians_[n];return o?(o.setFlatCoordinates("XY",s),o.changed()):(o=new Lr(s,"XY"),this.meridians_[n]=o),o}getMeridianPoint_(e,t,r){const A=e.getFlatCoordinates();let n=1,s=A.length-1;A[n]>A[s]&&(n=s,s=1);const o=Math.max(t[1],A[n]),a=Math.min(t[3],A[s]),g=Je(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,o,a),c=[A[n-1]+(A[s-1]-A[n-1])*(g-A[n])/(A[s]-A[n]),g],u=this.meridiansLabels_[r].geom;return u.setCoordinates(c),u}getMeridians(){return this.meridians_}getParallel_(e,t,r,A,n){const s=zS(e,t,r,this.projection_,A);let o=this.parallels_[n];return o?(o.setFlatCoordinates("XY",s),o.changed()):o=new Lr(s,"XY"),o}getParallelPoint_(e,t,r){const A=e.getFlatCoordinates();let n=0,s=A.length-2;A[n]>A[s]&&(n=s,s=0);const o=Math.max(t[0],A[n]),a=Math.min(t[2],A[s]),g=Je(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,o,a),l=A[n+1]+(A[s+1]-A[n+1])*(g-A[n])/(A[s]-A[n]),c=[g,l],u=this.parallelsLabels_[r].geom;return u.setCoordinates(c),u}getParallels(){return this.parallels_}updateProjectionInfo_(e){const t=pe("EPSG:4326"),r=e.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const A=Ws(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=A;else{const s=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(o,a,g){g=g||2;const l=A(o,a,g);for(let c=0,u=l.length;c<u;c+=g)l[c]<s&&(l[c]+=360);return l}}this.fromLonLatTransform_=Ws(t,e);const n=SA([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=n[0],this.maxX_=n[2],this.minY_=n[1],this.maxY_=n[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Yr(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}function ji(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ho(i,e){return i[0]=e[0],i[1]=e[1],i[4]=e[2],i[5]=e[3],i[12]=e[4],i[13]=e[5],i}function kg(i,e,t,r,A,n,s){s=s??ji();const o=1/(i-e),a=1/(t-r),g=1/(A-n);return s[0]=-2*o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*g,s[11]=0,s[12]=(i+e)*o,s[13]=(r+t)*a,s[14]=(n+A)*g,s[15]=1,s}function jh(i,e,t,r,A){return A=A??ji(),A[0]=i[0]*e,A[1]=i[1]*e,A[2]=i[2]*e,A[3]=i[3]*e,A[4]=i[4]*t,A[5]=i[5]*t,A[6]=i[6]*t,A[7]=i[7]*t,A[8]=i[8]*r,A[9]=i[9]*r,A[10]=i[10]*r,A[11]=i[11]*r,A[12]=i[12],A[13]=i[13],A[14]=i[14],A[15]=i[15],A}function WS(i,e,t,r,A){A=A??ji();let n,s,o,a,g,l,c,u,I,h,d,f;return i===A?(A[12]=i[0]*e+i[4]*t+i[8]*r+i[12],A[13]=i[1]*e+i[5]*t+i[9]*r+i[13],A[14]=i[2]*e+i[6]*t+i[10]*r+i[14],A[15]=i[3]*e+i[7]*t+i[11]*r+i[15]):(n=i[0],s=i[1],o=i[2],a=i[3],g=i[4],l=i[5],c=i[6],u=i[7],I=i[8],h=i[9],d=i[10],f=i[11],A[0]=n,A[1]=s,A[2]=o,A[3]=a,A[4]=g,A[5]=l,A[6]=c,A[7]=u,A[8]=I,A[9]=h,A[10]=d,A[11]=f,A[12]=n*e+g*t+I*r+i[12],A[13]=s*e+l*t+h*r+i[13],A[14]=o*e+c*t+d*r+i[14],A[15]=a*e+u*t+f*r+i[15]),A}function XS(i,e,t,r){return r=r??ji(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=i,r[13]=e,r[14]=t,r[15]=1,r}const Yi=34962,os=34963,_c=35044,fA=35048,eb=5121,tb=5123,rb=5125,BC=5126,Vh=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function ib(i,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!OB},e);const t=Vh.length;for(let r=0;r<t;++r)try{const A=i.getContext(Vh[r],e);if(A)return A}catch{}return null}const Ab={STATIC_DRAW:_c};class li{constructor(e,t){this.array_=null,this.type_=e,er(e===Yi||e===os,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:Ab.STATIC_DRAW}ofSize(e){return this.array_=new(Ss(this.type_))(e),this}fromArray(e){return this.array_=Ss(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(Ss(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const t=Ss(this.type_);if(!(e instanceof t))throw new Error(`Expected ${t}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function Ss(i){switch(i){case Yi:return Float32Array;case os:return Uint32Array;default:return Float32Array}}const bs={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},nb=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,sb=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class $h{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||nb),t.compileShader(r);const A=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(A,e.fragmentShader||sb),t.compileShader(A),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,A),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const n=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(s=>{this.uniforms_.push({value:e.uniforms[s],location:t.getUniformLocation(this.renderTargetProgram_,s)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const A=0,n=t.RGBA,s=0,o=t.RGBA,a=t.UNSIGNED_BYTE,g=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,A,n,r[0],r[1],s,o,a,g),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r[0],r[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,r,A){const n=this.getGL(),s=e.size;if(n.bindFramebuffer(n.FRAMEBUFFER,t?t.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),!t){const a=me(n.canvas);if(!e.renderTargets[a]){const g=n.getContextAttributes();g&&g.preserveDrawingBuffer&&(n.clearColor(0,0,0,0),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)),e.renderTargets[a]=!0}}n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.useProgram(this.renderTargetProgram_),n.enableVertexAttribArray(this.renderTargetAttribLocation_),n.vertexAttribPointer(this.renderTargetAttribLocation_,2,n.FLOAT,!1,0,0),n.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),n.uniform1i(this.renderTargetTextureLocation_,0);const o=e.layerStatesArray[e.layerIndex].opacity;n.uniform1f(this.renderTargetOpacityLocation_,o),this.applyUniforms(e),r&&r(n,e),n.drawArrays(n.TRIANGLES,0,6),A&&A(n,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let r,A=1;this.uniforms_.forEach(function(n){if(r=typeof n.value=="function"?n.value(e):n.value,r instanceof HTMLCanvasElement||r instanceof ImageData)n.texture||(n.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${A}`]),t.bindTexture(t.TEXTURE_2D,n.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(n.location,A++);else if(Array.isArray(r))switch(r.length){case 2:t.uniform2f(n.location,r[0],r[1]);return;case 3:t.uniform3f(n.location,r[0],r[1],r[2]);return;case 4:t.uniform4f(n.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(n.location,r)})}}const wr={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Ve={UNSIGNED_BYTE:eb,UNSIGNED_SHORT:tb,UNSIGNED_INT:rb,FLOAT:BC},Io={};function Zh(i){return"shared/"+i}let Wh=0;function ob(){const i="unique/"+Wh;return Wh+=1,i}function ab(i){let e=Io[i];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:ib(t)},Io[i]=e}return e.users+=1,e.context}function gb(i){const e=Io[i];if(!e||(e.users-=1,e.users>0))return;const t=e.context,r=t.getExtension("WEBGL_lose_context");r&&r.loseContext();const A=t.canvas;A.width=1,A.height=1,delete Io[i]}class lb extends Nd{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?Zh(e.canvasCacheKey):ob(),this.gl_=ab(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(bs.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(bs.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Et(),this.offsetScaleMatrix_=Et(),this.tmpMat4_=ji(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new $h({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new $h({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===Zh(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}getInstancedRenderingExtension_(){const e=this.getExtension("ANGLE_instanced_arrays");return er(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){const t=this.gl_,r=me(e);let A=this.bufferCache_[r];if(!A){const n=t.createBuffer();A={buffer:e,webGlBuffer:n},this.bufferCache_[r]=A}t.bindBuffer(e.getType(),A.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=me(e);delete this.bufferCache_[t]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(bs.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(bs.RESTORED,this.boundHandleWebGLContextRestored_),gb(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,r){const A=this.gl_,n=this.getCanvas(),s=e.size,o=e.pixelRatio;(n.width!==s[0]*o||n.height!==s[1]*o)&&(n.width=s[0]*o,n.height=s[1]*o,n.style.width=s[0]+"px",n.style.height=s[1]+"px");for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(e);A.bindTexture(A.TEXTURE_2D,null),A.clearColor(0,0,0,0),A.depthRange(0,1),A.clearDepth(1),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT),A.enable(A.BLEND),A.blendFunc(A.ONE,t?A.ZERO:A.ONE_MINUS_SRC_ALPHA),r?(A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL)):A.disable(A.DEPTH_TEST)}bindFrameBuffer(e,t){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),t&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0)}bindInitialFrameBuffer(){const e=this.getGL(),t=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);const r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,t,r){const A=this.gl_;A.activeTexture(A.TEXTURE0+t),A.bindTexture(A.TEXTURE_2D,e),A.uniform1i(this.getUniformLocation(r),t)}bindAttribute(e,t,r){const A=this.getGL();this.bindBuffer(e);const n=this.getAttributeLocation(t);A.enableVertexAttribArray(n),A.vertexAttribPointer(n,r,A.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,t,r,A){const n=this.gl_,s=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.bindRenderbuffer(n.RENDERBUFFER,t.getDepthbuffer()),n.viewport(0,0,s[0],s[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),A?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}drawElements(e,t){const r=this.gl_;this.getExtension("OES_element_index_uint");const A=r.UNSIGNED_INT,n=4,s=t-e,o=e*n;r.drawElements(r.TRIANGLES,s,A,o)}drawElementsInstanced(e,t,r){const A=this.gl_;this.getExtension("OES_element_index_uint");const n=this.getInstancedRenderingExtension_(),s=A.UNSIGNED_INT,o=4,a=t-e,g=e*o;n.drawElementsInstancedANGLE(A.TRIANGLES,a,s,g,r);for(let l=0;l<this.maxAttributeCount_;l++)n.vertexAttribDivisorANGLE(l,0)}finalizeDraw(e,t,r){for(let A=0,n=this.postProcessPasses_.length;A<n;A++)A===n-1?this.postProcessPasses_[A].apply(e,null,t,r):this.postProcessPasses_[A].apply(e,this.postProcessPasses_[A+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,r=e.viewState.rotation,A=e.pixelRatio;this.setUniformFloatValue(wr.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(wr.ZOOM,e.viewState.zoom),this.setUniformFloatValue(wr.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(wr.PIXEL_RATIO,A),this.setUniformFloatVec2(wr.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(wr.ROTATION,r)}applyHitDetectionUniform(e){const t=this.getUniformLocation(wr.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(wr.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let r,A=0;this.uniforms_.forEach(n=>{if(r=typeof n.value=="function"?n.value(e):n.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!n.texture?(n.prevValue=void 0,n.texture=r):n.texture||(n.prevValue=void 0,n.texture=t.createTexture()),this.bindTexture(n.texture,A,n.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const s=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&s&&n.prevValue!==r&&(n.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),A++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(n.name,ho(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:t.uniform2f(this.getUniformLocation(n.name),r[0],r[1]);return;case 3:t.uniform3f(this.getUniformLocation(n.name),r[0],r[1],r[2]);return;case 4:t.uniform4f(this.getUniformLocation(n.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(this.getUniformLocation(n.name),r)})}useProgram(e,t){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,t&&(this.applyFrameState(t),this.applyUniforms(t))}compileShader(e,t){const r=this.gl_,A=r.createShader(t);return r.shaderSource(A,e),r.compileShader(A),A}getProgram(e,t){const r=this.gl_,A=this.compileShader(e,r.FRAGMENT_SHADER),n=this.compileShader(t,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,A),r.attachShader(s,n),r.linkProgram(s),!r.getShaderParameter(A,r.COMPILE_STATUS)){const o=`Fragment shader compilation failed: ${r.getShaderInfoLog(A)}`;throw new Error(o)}if(r.deleteShader(A),!r.getShaderParameter(n,r.COMPILE_STATUS)){const o=`Vertex shader compilation failed: ${r.getShaderInfoLog(n)}`;throw new Error(o)}if(r.deleteShader(n),!r.getProgramParameter(s,r.LINK_STATUS)){const o=`GL program linking failed: ${r.getProgramInfoLog(s)}`;throw new Error(o)}return s}getUniformLocation(e){const t=me(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=me(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const r=e.size,A=e.viewState.rotation,n=e.viewState.resolution,s=e.viewState.center;return Sl(t,0,0,2/(n*r[0]),2/(n*r[1]),-A,-s[0],-s[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,t,r,A,n,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,r,!1,A,n),s&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(o,1))}enableAttributes_(e,t){const r=cb(e);let A=0;for(let n=0;n<e.length;n++){const s=e[n];s.name&&this.enableAttributeArray_(s.name,s.size,s.type||BC,r,A,t),A+=s.size*pC(s.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){YB(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,r,A){const n=this.gl_;r=r||n.createTexture();const s=A?n.NEAREST:n.LINEAR;n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=0,a=n.RGBA,g=0,l=n.RGBA,c=n.UNSIGNED_BYTE;return t instanceof Uint8Array?n.texImage2D(n.TEXTURE_2D,o,a,e[0],e[1],g,l,c,t):t?n.texImage2D(n.TEXTURE_2D,o,a,l,c,t):n.texImage2D(n.TEXTURE_2D,o,a,e[0],e[1],g,l,c,null),r}}function cb(i){let e=0;for(let t=0;t<i.length;t++){const r=i[t];e+=r.size*pC(r.type)}return e}function pC(i){switch(i){case Ve.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ve.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ve.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ve.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class ub extends KB{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(Pt.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===Ie.LOADED,this.loaded)this.uploadTile();else{if(e instanceof bl){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(Pt.CHANGE,this.handleTileChange_)}}uploadTile(){Mr()}setReady(){this.ready=!0,this.dispatchEvent(Pt.CHANGE)}handleTileChange_(){this.tile.getState()===Ie.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Pt.CHANGE,this.handleTileChange_)}}function yC(i,e,t){const r=t?i.LINEAR:i.NEAREST;i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r)}function hb(i,e,t,r){yC(i,e,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)}function Xh(i,e,t,r,A,n){const s=i.getGL();let o,a;t instanceof Float32Array?(o=s.FLOAT,i.getExtension("OES_texture_float"),a=i.getExtension("OES_texture_float_linear")!==null):(o=s.UNSIGNED_BYTE,a=!0),yC(s,e,n&&a);const g=t.byteLength/r[1];let l=1;g%8===0?l=8:g%4===0?l=4:g%2===0&&(l=2);let c;switch(A){case 1:{c=s.LUMINANCE;break}case 2:{c=s.LUMINANCE_ALPHA;break}case 3:{c=s.RGB;break}case 4:{c=s.RGBA;break}default:throw new Error(`Unsupported number of bands: ${A}`)}const u=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,l),s.texImage2D(s.TEXTURE_2D,0,c,r[0],r[1],0,c,o,t),s.pixelStorei(s.UNPACK_ALIGNMENT,u)}let iA=null;function Ib(){iA=hi(1,1,void 0,{willReadFrequently:!0})}class db extends ub{constructor(e){super(e),this.textures=[],this.renderSize_=gr(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new li(Yi,_c);t.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setHelper(e){var r;const t=(r=this.helper)==null?void 0:r.getGL();if(t){this.helper.deleteBuffer(this.coords);for(let A=0;A<this.textures.length;++A)t.deleteTexture(this.textures[A])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){const e=this.helper,t=e.getGL(),r=this.tile;this.textures.length=0;let A;r instanceof bl||r instanceof HB?A=r.getImage():A=r.getData();const n=yg(A);if(n){const E=t.createTexture();this.textures.push(E),this.bandCount=4,hb(t,E,n,r.interpolate),this.setReady();return}A=pg(A);const s=r.getSize(),o=[s[0]+2*this.gutter,s[1]+2*this.gutter],a=A instanceof Float32Array,g=o[0]*o[1],l=a?Float32Array:Uint8Array,c=l.BYTES_PER_ELEMENT,u=A.byteLength/o[1];this.bandCount=Math.floor(u/c/o[0]);const I=Math.ceil(this.bandCount/4);if(I===1){const E=t.createTexture();this.textures.push(E),Xh(e,E,A,o,this.bandCount,r.interpolate),this.setReady();return}const h=new Array(I);for(let E=0;E<I;++E){const B=t.createTexture();this.textures.push(B);const m=E<I-1?4:(this.bandCount-1)%4+1;h[E]=new l(g*m)}let d=0,f=0;const C=o[0]*this.bandCount;for(let E=0;E<o[1];++E){for(let B=0;B<C;++B){const m=A[f+B],p=Math.floor(d/this.bandCount),y=B%this.bandCount,Q=Math.floor(y/4),_=h[Q],w=_.length/g,S=y%4;_[p*w+S]=m,++d}f+=u/c}for(let E=0;E<I;++E){const B=this.textures[E],m=h[E],p=m.length/g;Xh(e,B,m,o,p,r.interpolate)}this.setReady()}getImagePixelData_(e,t,r){const A=this.gutter,n=this.renderSize_[0],s=this.renderSize_[1];iA||Ib(),iA.clearRect(0,0,1,1);const o=e.width,a=e.height,g=o-2*A,l=a-2*A,c=A+Math.floor(g*(t/n)),u=A+Math.floor(l*(r/s));let I;try{iA.drawImage(e,c,u,1,1,0,0,1,1),I=iA.getImageData(0,0,1,1).data}catch{return iA=null,null}return I}getArrayPixelData_(e,t,r,A){const n=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1],a=t[0],g=t[1],l=a+2*n,c=g+2*n,u=n+Math.floor(a*(r/s)),I=n+Math.floor(g*(A/o));if(e instanceof DataView){const d=e.byteLength/(l*c),f=d*(I*l+u),C=e.buffer.slice(f,f+d);return new DataView(C)}const h=this.bandCount*(I*l+u);return e.slice(h,h+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof Rl){const r=this.tile.getData(),A=pg(r);if(A){const n=this.tile.getSize();return this.getArrayPixelData_(A,n,e,t)}return this.getImagePixelData_(yg(r),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}class as extends qB{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Et(),this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(mg.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(Qi.PRECOMPOSE)){const A=new Na(Qi.PRECOMPOSE,void 0,t,e);r.dispatchEvent(A)}}dispatchPostComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(Qi.POSTCOMPOSE)){const A=new Na(Qi.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(A)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,r=-1,A;for(let s=0,o=e.layerStatesArray.length;s<o;s++){const a=e.layerStatesArray[s].layer,g=a.getRenderer();if(!(g instanceof as)){t=!0;continue}const l=a.getClassName();if((t||l!==A)&&(r+=1,t=!1),A=l,g===this)break}const n="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(n)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new lb({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:n}),A&&(this.helper.getCanvas().className=A),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){var e;this.clearCache(),this.removeHelper(),(e=this.getLayer())==null||e.removeChangeListener(mg.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,t,r){const A=this.getLayer();if(A.hasListener(e)){Sl(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const n=new Na(e,this.inversePixelTransform_,r,t);A.dispatchEvent(n)}}preRender(e,t){this.dispatchRenderEvent_(Qi.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Qi.POSTRENDER,e,t)}}const fb={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function eI(i){return 1/(i+2)}function Cb(){return{tileIds:new Set,representationsByZ:{}}}function tI(i,e){return i.tileIds.has(me(e))}function rI(i,e,t){const r=i.representationsByZ;t in r||(r[t]=new Set),r[t].add(e),i.tileIds.add(me(e.tile))}function Ka(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=br(e,vd(t.extent,i.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const A=r.getTileGridForProjection(i.viewState.projection).getExtent();A&&(e=br(e,A))}return e}function Pg(i,e){return`${me(i)},${i.getKey()},${rA(e)}`}class Eb extends as{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Et(),this.tempMat4=ji(),this.tempTileRange_=new JB(0,0,0,0),this.tempTileCoord_=Qg(0,0,0),this.tempSize_=[0,0];const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new Gd(r),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const r=this.getLayer().getRenderSource();return!r||_l(Ka(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return Mr()}enqueueTiles(e,t,r,A,n){const s=e.viewState,o=this.getLayer(),a=o.getRenderSource(),g=a.getTileGridForProjection(s.projection),l=a.getGutterForProjection(s.projection),c=me(a);c in e.wantedTiles||(e.wantedTiles[c]={});const u=e.wantedTiles[c],I=this.tileRepresentationCache,h=o.getMapInternal(),d=Math.max(r-n,g.getMinZoom(),g.getZForResolution(Math.min(o.getMaxResolution(),h?h.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):g.getResolution(0)),a.zDirection)),f=s.rotation,C=f?zB(s.center,s.resolution,f,e.size):void 0;for(let E=r;E>=d;--E){const B=g.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),m=g.getResolution(E);for(let p=B.minX;p<=B.maxX;++p)for(let y=B.minY;y<=B.maxY;++y){if(f&&!g.tileCoordIntersectsViewport([E,p,y],C))continue;const Q=Qg(E,p,y,this.tempTileCoord_),_=Pg(a,Q);let w,S;if(I.containsKey(_)&&(w=I.get(_),S=w.tile),(!w||w.tile.key!==a.getKey())&&(S=a.getTile(E,p,y,e.pixelRatio,s.projection),!S)||tI(A,S))continue;w?w.setTile(S):(w=this.createTileRepresentation({tile:S,grid:g,helper:this.helper,gutter:l}),I.set(_,w)),rI(A,w,E);const R=S.getKey();u[R]=!0,S.getState()===Ie.IDLE&&(e.tileQueue.isKeyQueued(R)||e.tileQueue.enqueue([S,c,g.getTileCoordCenter(Q),m]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,r,A,n,s,o,a,g,l,c){}renderTileMask(e,t,r,A){}drawTile_(e,t,r,A,n,s,o){if(!t.ready)return;const g=t.tile.tileCoord,l=rA(g),c=l in s?s[l]:1,u=o.getResolution(r),I=gr(o.getTileSize(r),this.tempSize_),h=o.getOrigin(r),d=o.getTileCoordExtent(g),f=c<1?-1:eI(r);c<1&&(e.animate=!0);const C=e.viewState,E=C.center[0],B=C.center[1],m=I[0]+2*A,p=I[1]+2*A,y=m/p,Q=(E-h[0])/(I[0]*u),_=(h[1]-B)/(I[1]*u),w=C.resolution/u,S=g[1],R=g[2];jB(this.tileTransform_),Vu(this.tileTransform_,2/(e.size[0]*w/m),-2/(e.size[1]*w/m)),VB(this.tileTransform_,C.rotation),Vu(this.tileTransform_,1,1/y),Dl(this.tileTransform_,(I[0]*(S-Q)-A)/m,(I[1]*(R-_)-A)/p),this.renderTile(t,this.tileTransform_,e,n,u,I,h,d,f,A,c)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const r=e.viewState,A=this.getLayer(),n=A.getRenderSource(),s=n.getTileGridForProjection(r.projection),o=n.getGutterForProjection(r.projection),a=Ka(e,e.extent),g=s.getZForResolution(r.resolution,n.zDirection),l=Cb(),c=A.getPreload();if(e.nextExtent){const B=s.getZForResolution(r.nextResolution,n.zDirection),m=Ka(e,e.nextExtent);this.enqueueTiles(e,m,B,l,c)}this.enqueueTiles(e,a,g,l,0),c>0&&setTimeout(()=>{this.enqueueTiles(e,a,g-1,l,c-1)},0);const u={};let I=!1;const h=l.representationsByZ;if(g in h){const B=me(this),m=e.time;for(const p of h[g]){const y=p.tile;if(y.getState()===Ie.EMPTY)continue;const Q=y.tileCoord;if(p.ready){const S=y.getAlpha(B,m);if(S===1){y.endTransition(B);continue}I=!0;const R=rA(Q);u[R]=S}if(this.renderComplete=!1,this.findAltTiles_(s,Q,g+1,l))continue;const w=s.getMinZoom();for(let S=g-1;S>=w&&!this.findAltTiles_(s,Q,S,l);--S);}}const d=Object.keys(h).map(Number).sort($B);if(this.beforeTilesMaskRender(e))for(let B=0,m=d.length;B<m;++B){const p=d[B];for(const y of h[p]){const Q=y.tile.tileCoord;if(rA(Q)in u)continue;const w=s.getTileCoordExtent(Q);this.renderTileMask(y,p,w,eI(p))}}this.beforeTilesRender(e,I);for(let B=0,m=d.length;B<m;++B){const p=d[B];for(const y of h[p]){const Q=y.tile.tileCoord;rA(Q)in u||this.drawTile_(e,y,p,o,a,u,s)}}if(g in h)for(const B of h[g]){const m=B.tile.tileCoord;rA(m)in u&&this.drawTile_(e,B,g,o,a,u,s)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const C=this.helper.getCanvas();return this.tileRepresentationCache.expireCache(),this.postRender(t,e),C}beforeFinalize(e){}findAltTiles_(e,t,r,A){const n=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!n)return!1;let s=!0;const o=this.tileRepresentationCache,a=this.getLayer().getRenderSource();for(let g=n.minX;g<=n.maxX;++g)for(let l=n.minY;l<=n.maxY;++l){const c=Pg(a,[r,g,l]);let u=!1;if(o.containsKey(c)){const I=o.get(c);I.ready&&!tI(A,I.tile)&&(rI(A,I,r),u=!0)}u||(s=!1)}return s}clearCache(){super.clearCache();const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const ie={...fb,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},Ps={TEXTURE_COORD:"a_textureCoord"},Bb=[{name:Ps.TEXTURE_COORD,size:2,type:Ve.FLOAT}];class pb extends Eb{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new li(os,_c),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const t=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(t)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const t=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(t)}}afterHelperCreated(){super.afterHelperCreated();const e=this.helper.getGL();for(const t of this.paletteTextures_)t.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new db(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,r,A,n,s,o,a,g,l,c){const u=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Bb);let I=0;for(;I<e.textures.length;){const y=`${ie.TILE_TEXTURE_ARRAY}[${I}]`;this.helper.bindTexture(e.textures[I],I,y),++I}for(let y=0;y<this.paletteTextures_.length;++y){const Q=this.paletteTextures_[y],_=Q.getTexture(u);this.helper.bindTexture(_,I,Q.name),++I}const h=r.viewState,d=s[0]+2*l,f=s[1]+2*l,E=e.tile.tileCoord,B=E[1],m=E[2];this.helper.setUniformMatrixValue(ie.TILE_TRANSFORM,ho(this.tempMat4,t)),this.helper.setUniformFloatValue(ie.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(ie.DEPTH,g);let p=A;l>0&&(p=a,br(p,A,p)),this.helper.setUniformFloatVec4(ie.RENDER_EXTENT,p),this.helper.setUniformFloatValue(ie.RESOLUTION,h.resolution),this.helper.setUniformFloatValue(ie.ZOOM,h.zoom),this.helper.setUniformFloatValue(ie.TEXTURE_PIXEL_WIDTH,d),this.helper.setUniformFloatValue(ie.TEXTURE_PIXEL_HEIGHT,f),this.helper.setUniformFloatValue(ie.TEXTURE_RESOLUTION,n),this.helper.setUniformFloatValue(ie.TEXTURE_ORIGIN_X,o[0]+B*s[0]*n-l*n),this.helper.setUniformFloatValue(ie.TEXTURE_ORIGIN_Y,o[1]-m*s[1]*n+l*n),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const A=this.getLayer(),n=qr(r.pixelToCoordinateTransform,e.slice()),s=r.viewState,o=A.getExtent();if(o&&!aA(vd(o,s.projection),n))return null;const a=A.getSources(Ql([n]),s.resolution);let g,l,c;for(g=a.length-1;g>=0;--g)if(l=a[g],l.getState()==="ready"){if(c=l.getTileGridForProjection(s.projection),l.getWrapX())break;const I=c.getExtent();if(!I||aA(I,n))break}if(g<0)return null;const u=this.tileRepresentationCache;for(let I=c.getZForResolution(s.resolution);I>=c.getMinZoom();--I){const h=c.getTileCoordForCoordAndZ(n,I),d=Pg(l,h);if(!u.containsKey(d))continue;const f=u.get(d);if(f.tile.getState()===Ie.EMPTY)return null;if(!f.loaded)continue;const E=c.getOrigin(I),B=gr(c.getTileSize(I)),m=c.getResolution(I),p=(n[0]-E[0])/m-h[1]*B[0],y=(E[1]-n[1])/m-h[2]*B[1];return f.getPixelData(p,y)}return null}disposeInternal(){const e=this.helper;if(e){const t=e.getGL();for(const r of this.paletteTextures_)r.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class yb{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function mb(i,e){return`operator_${i}_${Object.keys(e.functions).length}`}function ci(i){const e=i.toString();return e.includes(".")?e:e+".0"}function Sc(i){if(i.length<2||i.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${i.length}(${i.map(ci).join(", ")})`}function Us(i){const e=$n(i),t=e.length>3?e[3]:1;return Sc([e[0]/255,e[1]/255,e[2]/255,t])}function Qb(i){const e=gr(i);return Sc(e)}const Ha={};let wb=0;function bA(i){return i in Ha||(Ha[i]=wb++),Ha[i]}function kr(i){return ci(bA(i))}function ia(i){return"u_var_"+i}function bc(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const qa="getBandValue",mC="u_paletteTextures",QC="featureId",wC="geometryType",Ug=-9999999;function _b(i,e,t,r){const A=ZB(i,e,t);return Rc(A,e,r)}function ye(i){return(e,t,r)=>{const A=t.args.length,n=new Array(A);for(let s=0;s<A;++s)n[s]=Rc(t.args[s],r,e);return i(n,e)}}const Sb={[se.Get]:(i,e)=>{const r=e.args[0].value;r in i.properties||(i.properties[r]={name:r,type:e.type});let n="a_prop_"+r;return $u(e.type,yn)&&(n=`(${n} > 0.0)`),n},[se.Id]:i=>(i.featureId=!0,"a_"+QC),[se.GeometryType]:i=>(i.geometryType=!0,"a_"+wC),[se.LineMetric]:()=>"currentLineMetric",[se.Var]:(i,e)=>{const r=e.args[0].value;r in i.variables||(i.variables[r]={name:r,type:e.type});let n=ia(r);return $u(e.type,yn)&&(n=`(${n} > 0.0)`),n},[se.Has]:(i,e)=>{const r=e.args[0].value;return r in i.properties||(i.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${ci(Ug)})`},[se.Resolution]:()=>"u_resolution",[se.Zoom]:()=>"u_zoom",[se.Time]:()=>"u_time",[se.Any]:ye(i=>`(${i.join(" || ")})`),[se.All]:ye(i=>`(${i.join(" && ")})`),[se.Not]:ye(([i])=>`(!${i})`),[se.Equal]:ye(([i,e])=>`(${i} == ${e})`),[se.NotEqual]:ye(([i,e])=>`(${i} != ${e})`),[se.GreaterThan]:ye(([i,e])=>`(${i} > ${e})`),[se.GreaterThanOrEqualTo]:ye(([i,e])=>`(${i} >= ${e})`),[se.LessThan]:ye(([i,e])=>`(${i} < ${e})`),[se.LessThanOrEqualTo]:ye(([i,e])=>`(${i} <= ${e})`),[se.Multiply]:ye(i=>`(${i.join(" * ")})`),[se.Divide]:ye(([i,e])=>`(${i} / ${e})`),[se.Add]:ye(i=>`(${i.join(" + ")})`),[se.Subtract]:ye(([i,e])=>`(${i} - ${e})`),[se.Clamp]:ye(([i,e,t])=>`clamp(${i}, ${e}, ${t})`),[se.Mod]:ye(([i,e])=>`mod(${i}, ${e})`),[se.Pow]:ye(([i,e])=>`pow(${i}, ${e})`),[se.Abs]:ye(([i])=>`abs(${i})`),[se.Floor]:ye(([i])=>`floor(${i})`),[se.Ceil]:ye(([i])=>`ceil(${i})`),[se.Round]:ye(([i])=>`floor(${i} + 0.5)`),[se.Sin]:ye(([i])=>`sin(${i})`),[se.Cos]:ye(([i])=>`cos(${i})`),[se.Atan]:ye(([i,e])=>e!==void 0?`atan(${i}, ${e})`:`atan(${i})`),[se.Sqrt]:ye(([i])=>`sqrt(${i})`),[se.Match]:ye(i=>{const e=i[0],t=i[i.length-1];let r=null;for(let A=i.length-3;A>=1;A-=2){const n=i[A],s=i[A+1];r=`(${e} == ${n} ? ${s} : ${r||t})`}return r}),[se.Between]:ye(([i,e,t])=>`(${i} >= ${e} && ${i} <= ${t})`),[se.Interpolate]:ye(([i,e,...t])=>{let r="";for(let A=0;A<t.length-2;A+=2){const n=t[A],s=r||t[A+1],o=t[A+2],a=t[A+3];let g;i===ci(1)?g=`(${e} - ${n}) / (${o} - ${n})`:g=`(pow(${i}, (${e} - ${n})) - 1.0) / (pow(${i}, (${o} - ${n})) - 1.0)`,r=`mix(${s}, ${a}, clamp(${g}, 0.0, 1.0))`}return r}),[se.Case]:ye(i=>{const e=i[i.length-1];let t=null;for(let r=i.length-3;r>=0;r-=2){const A=i[r],n=i[r+1];t=`(${A} ? ${n} : ${t||e})`}return t}),[se.In]:ye(([i,...e],t)=>{const r=mb("in",t),A=[];for(let n=0;n<e.length;n+=1)A.push(`  if (inputValue == ${e[n]}) { return true; }`);return t.functions[r]=`bool ${r}(float inputValue) {
${A.join(`
`)}
  return false;
}`,`${r}(${i})`}),[se.Array]:ye(i=>`vec${i.length}(${i.join(", ")})`),[se.Color]:ye(i=>{if(i.length===1)return`vec4(vec3(${i[0]} / 255.0), 1.0)`;if(i.length===2)return`vec4(vec3(${i[0]} / 255.0), ${i[1]})`;const e=i.slice(0,3).map(r=>`${r} / 255.0`);if(i.length===3)return`vec4(${e.join(", ")}, 1.0)`;const t=i[3];return`vec4(${e.join(", ")}, ${t})`}),[se.Band]:ye(([i,e,t],r)=>{if(!(qa in r.functions)){let A="";const n=r.bandCount||1;for(let s=0;s<n;s++){const o=Math.floor(s/4);let a=s%4;s===n-1&&a===1&&(a=3);const g=`${ie.TILE_TEXTURE_ARRAY}[${o}]`;A+=`  if (band == ${s+1}.0) {
    return texture2D(${g}, v_textureCoord + vec2(dx, dy))[${a}];
  }
`}r.functions[qa]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${ie.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${ie.TEXTURE_PIXEL_HEIGHT};
${A}
}`}return`${qa}(${i}, ${e??"0.0"}, ${t??"0.0"})`}),[se.Palette]:(i,e)=>{const[t,...r]=e.args,A=r.length,n=new Uint8Array(A*4);for(let g=0;g<r.length;g++){const l=r[g].value,c=$n(l),u=g*4;n[u]=c[0],n[u+1]=c[1],n[u+2]=c[2],n[u+3]=c[3]*255}i.paletteTextures||(i.paletteTextures=[]);const s=`${mC}[${i.paletteTextures.length}]`,o=new yb(s,n);i.paletteTextures.push(o);const a=Rc(t,Ce,i);return`texture2D(${s}, vec2((${a} + 0.5) / ${A}.0, 0.5))`}};function Rc(i,e,t){if(i instanceof WB){const r=Sb[i.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(i.operator)}`);return r(t,i,e)}if((i.type&Ce)>0)return ci(i.value);if((i.type&yn)>0)return i.value.toString();if((i.type&mn)>0)return kr(i.value.toString());if((i.type&Ot)>0)return Us(i.value);if((i.type&Mi)>0)return Sc(i.value);if((i.type&Ji)>0)return Qb(i.value);throw new Error(`Unexpected expression ${i.value} (expected type ${XB(e)})`)}function bb(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const iI=.985;function X(i,e,t){const r=ep();return _b(e,t,r,i)}function Rb(i){const e=$n(i),t=e[0]*256,r=e[1],A=e[2]*256,n=Math.round(e[3]*255);return[t+r,A+n]}const Db=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    min(floor(packedColor[0] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[0], 256.0) / 255.0, 1.0),
    min(floor(packedColor[1] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[1], 256.0) / 255.0, 1.0)
  );
}`;function Dc(i){return i===Ot||i===Ji?2:i===Mi?4:1}function Og(i){const e=Dc(i);return e>1?`vec${e}`:"float"}function _C(i,e){for(const t in e.variables){const r=e.variables[t],A=ia(r.name);let n=Og(r.type);r.type===Ot&&(n="vec4"),i.addUniform(A,n)}for(const t in e.properties){const r=e.properties[t],A=Og(r.type),n=`a_prop_${r.name}`;r.type===Ot?i.addAttribute(n,A,`unpackColor(${n})`,"vec4"):i.addAttribute(n,A)}for(const t in e.functions)i.addVertexShaderFunction(e.functions[t]),i.addFragmentShaderFunction(e.functions[t])}function SC(i,e){const t={};for(const r in i.variables){const A=i.variables[r],n=ia(A.name);t[n]=()=>{const s=e[A.name];if(typeof s=="number")return s;if(typeof s=="boolean")return s?1:0;if(A.type===Ot){const o=[...$n(s||"#eee")];return o[0]/=255,o[1]/=255,o[2]/=255,o[3]??(o[3]=1),o}return typeof s=="string"?bA(s):s}}return t}function bC(i){const e={};for(const t in i.properties){const r=i.properties[t],A=n=>{const s=n.get(r.name);return r.type===Ot?Rb([...$n(s||"#eee")]):typeof s=="string"?bA(s):typeof s=="boolean"?s?1:0:s};e[`prop_${r.name}`]={size:Dc(r.type),callback:A}}return e}const Wi=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders

${Db}
`,Xi=bb();class RC{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${ci(Xi["circle-radius"])} + ${ci(Xi["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=Us(Xi["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=ci(Xi["stroke-width"]),this.strokeColorExpression_=Us(Xi["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=kr("round"),this.strokeJoinExpression_=kr("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.strokePatternLengthExpression_=null,this.hasFill_=!1,this.fillColorExpression_=Us(Xi["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e,t){return this.uniforms_.push({name:e,type:t}),this}addAttribute(e,t,r,A){return this.attributes_.push({name:e,type:t,varyingName:e.replace(/^a_/,"v_"),varyingType:A??t,varyingExpression:r??e}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setStrokePatternLengthExpression(e){return this.strokePatternLengthExpression_=e,this}getStrokePatternLengthExpression(){return this.strokePatternLengthExpression_}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){return this.vertexShaderFunctions_.includes(e)?this:(this.vertexShaderFunctions_.push(e),this)}addFragmentShaderFunction(e){return this.fragmentShaderFunctions_.includes(e)?this:(this.fragmentShaderFunctions_.push(e),this)}getSymbolVertexShader(){return this.hasSymbol_?`${Wi}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_localPosition;
attribute vec2 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx + a_localPosition * halfSizePx * vec2(1., -1.);
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = mix(texCoord.s, texCoord.p, a_localPosition.x * 0.5 + 0.5);
  float v = mix(texCoord.t, texCoord.q, a_localPosition.y * 0.5 + 0.5);
  v_texCoord = vec2(u, v);
  v_hitColor = unpackColor(a_hitColor);
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${Wi}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${Wi}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute vec2 a_localPosition;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_angleTangentSum;
attribute float a_distanceLow;
attribute float a_distanceHigh;
attribute vec2 a_joinAngles;
attribute vec2 a_hitColor;

varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float startEndRatio = a_localPosition.x * 0.5 + 0.5;
  currentLineMetric = mix(a_measureStart, a_measureEnd, startEndRatio);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = -1. * a_localPosition.y;
  float tangentDir = -1. * a_localPosition.x;
  float angle = mix(v_angleStart, v_angleEnd, startEndRatio);
  vec2 joinDirection;
  vec2 positionPx = mix(segmentStartPx, segmentEndPx, startEndRatio);
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${iI} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStartPx = segmentStartPx;
  v_segmentEndPx = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = unpackColor(a_hitColor);

  v_distancePx = a_distanceLow / u_resolution - (lineOffsetPx * a_angleTangentSum);
  float distanceHighPx = a_distanceHigh / u_resolution;
  ${this.strokePatternLengthExpression_!==null?`v_distancePx = mod(v_distancePx, ${this.strokePatternLengthExpression_});
  distanceHighPx = mod(distanceHighPx, ${this.strokePatternLengthExpression_});
  `:""}v_distancePx += distanceHighPx;

  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${Wi}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${iI}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${kr("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${kr("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${kr("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${kr("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPointPx = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPointPx);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLengthPx = length(v_segmentEndPx - v_segmentStartPx);
  segmentLengthPx = max(segmentLengthPx, 1.17549429e-38); // avoid divide by zero
  vec2 segmentTangent = (v_segmentEndPx - v_segmentStartPx) / segmentLengthPx;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPointPx = currentPointPx - v_segmentStartPx;
  float lengthToPointPx = max(0., min(dot(segmentTangent, startToPointPx), segmentLengthPx));
  float currentLengthPx = lengthToPointPx + v_distancePx;
  float currentRadiusPx = distanceFromSegment(currentPointPx, v_segmentStartPx, v_segmentEndPx);
  float currentRadiusRatio = dot(segmentNormal, startToPointPx) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPointPx / segmentLengthPx);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPointPx, v_segmentEndPx, v_segmentStartPx, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${Wi}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = unpackColor(a_hitColor);
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${Wi}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}class fo{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,t){for(let r=0;r<e.length;r++)this.addFeature(e[r],t)}addFeature(e,t){let r=e.getGeometry();r&&(t&&(r=r.clone(),r.applyTransform(t)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const t=me(e),r=this.pointBatch.entries[t];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[t],r}clearFeatureEntryInLineStringBatch_(e){const t=me(e),r=this.lineStringBatch.entries[t];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[t],r}clearFeatureEntryInPolygonBatch_(e){const t=me(e),r=this.polygonBatch.entries[t];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[t],r}addGeometry_(e,t){var A;const r=e.getType();switch(r){case"GeometryCollection":{const n=e.getGeometriesArray();for(const s of n)this.addGeometry_(s,t);break}case"MultiPolygon":{const n=e;this.addCoordinates_(r,n.getFlatCoordinates(),n.getEndss(),t,me(t),n.getStride());break}case"MultiLineString":{const n=e;this.addCoordinates_(r,n.getFlatCoordinates(),n.getEnds(),t,me(t),n.getStride());break}case"MultiPoint":{const n=e;this.addCoordinates_(r,n.getFlatCoordinates(),null,t,me(t),n.getStride());break}case"Polygon":{const n=e;this.addCoordinates_(r,n.getFlatCoordinates(),n.getEnds(),t,me(t),n.getStride());break}case"Point":{const n=e;this.addCoordinates_(r,n.getFlatCoordinates(),null,t,me(t),n.getStride());break}case"LineString":case"LinearRing":{const n=e,s=n.getStride();this.addCoordinates_(r,n.getFlatCoordinates(),null,t,me(t),s,(A=n.getLayout)==null?void 0:A.call(n));break}}}addCoordinates_(e,t,r,A,n,s,o){let a;switch(e){case"MultiPolygon":{const g=r;for(let l=0,c=g.length;l<c;l++){let u=g[l];const I=l>0?g[l-1]:null,h=I?I[I.length-1]:0,d=u[u.length-1];u=h>0?u.map(f=>f-h):u,this.addCoordinates_("Polygon",t.slice(h,d),u,A,n,s,o)}break}case"MultiLineString":{const g=r;for(let l=0,c=g.length;l<c;l++){const u=l>0?g[l-1]:0;this.addCoordinates_("LineString",t.slice(u,g[l]),null,A,n,s,o)}break}case"MultiPoint":for(let g=0,l=t.length;g<l;g+=s)this.addCoordinates_("Point",t.slice(g,g+2),null,A,n,null,null);break;case"Polygon":{const g=r;if(A instanceof tp){const u=rp(t,g);if(u.length>1){this.addCoordinates_("MultiPolygon",t,u,A,n,s,o);return}}this.polygonBatch.entries[n]||(this.polygonBatch.entries[n]=this.addRefToEntry_(n,{feature:A,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),a=t.length/s;const l=r.length,c=r.map((u,I,h)=>I>0?(u-h[I-1])/s:u/s);this.polygonBatch.verticesCount+=a,this.polygonBatch.ringsCount+=l,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[n].flatCoordss.push(xb(t,s)),this.polygonBatch.entries[n].ringsVerticesCounts.push(c),this.polygonBatch.entries[n].verticesCount+=a,this.polygonBatch.entries[n].ringsCount+=l;for(let u=0,I=g.length;u<I;u++){const h=u>0?g[u-1]:0;this.addCoordinates_("LinearRing",t.slice(h,g[u]),null,A,n,s,o)}break}case"Point":this.pointBatch.entries[n]||(this.pointBatch.entries[n]=this.addRefToEntry_(n,{feature:A,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[n].flatCoordss.push(t);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[n]||(this.lineStringBatch.entries[n]=this.addRefToEntry_(n,{feature:A,flatCoordss:[],verticesCount:0})),a=t.length/s,this.lineStringBatch.verticesCount+=a,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[n].flatCoordss.push(Tb(t,s,o)),this.lineStringBatch.entries[n].verticesCount+=a;break}}addRefToEntry_(e,t){const r=this.uidToRef_.get(e),A=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return t.ref=A,r||(this.refToFeature_.set(A,t.feature),this.uidToRef_.set(e,A)),t}removeRef_(e,t){if(!e)throw new Error("This feature has no ref: "+t);this.refToFeature_.delete(e),this.uidToRef_.delete(t),this.freeGlobalRef_.push(e)}changeFeature(e,t){if(!this.uidToRef_.get(me(e)))return;this.removeFeature(e);let r=e.getGeometry();r&&(t&&(r=r.clone(),r.applyTransform(t)),this.addGeometry_(r,e))}removeFeature(e){let t=this.clearFeatureEntryInPointBatch_(e);t=this.clearFeatureEntryInPolygonBatch_(e)||t,t=this.clearFeatureEntryInLineStringBatch_(e)||t,t&&this.removeRef_(t.ref,me(t.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}isEmpty(){return this.globalCounter_===0}filter(e){const t=new fo;t.globalCounter_=this.globalCounter_,t.uidToRef_=this.uidToRef_,t.refToFeature_=this.refToFeature_;let r=!0;for(const A of this.refToFeature_.values())e(A)&&(t.addFeature(A),r=!1);return r?new fo:t}}function xb(i,e){return e===2?i:i.filter((t,r)=>r%e<2)}function Tb(i,e,t){return e===3&&t==="XYM"?i:e===4?i.filter((r,A)=>A%e!==2):e===3?i.map((r,A)=>A%e!==2?r:0):new Array(i.length*1.5).fill(0).map((r,A)=>A%3===2?0:i[Math.round(A/1.5)])}function DC(){const i='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let f=e(t,0,i,x,!0);const l=[];if(!f||f.next===f.prev)return l;let c,y,h;if(o&&(f=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const f=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);f===f.next&&(f.steiner=!0),o.push(a(f))}o.sort(u);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,f,x)),t.length>80*x){c=t[0],y=t[1];let e=c,n=y;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<y&&(y=o),x>e&&(e=x),o>n&&(n=o)}h=Math.max(e-c,n-y),h=0!==h?32767/h:0}return r(f,l,x,c,y,h,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=d(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=d(x/r|0,t[x],t[x+1],o);return o&&b(o,o.next)&&(w(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,s,l,a,y){if(!t)return;!y&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,f=0;for(let t=0;t<n&&(f++,i=i.nextZ,i);t++);let u=n;for(;f>0||u>0&&i;)0!==f&&(0===u||!i||x.z<=i.z)?(r=x,x=x.nextZ,f--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let h=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),w(t),t=p.next,h=p.next;else if((t=p)===h){y?1===y?r(t=i(n(t),e),e,u,s,l,a,2):2===y&&f(t,e,u,s,l,a):r(n(t),e,u,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,f=e.y,u=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(f,u,s),a=Math.max(x,o,i),y=Math.max(f,u,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=y&&h(x,f,o,u,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const f=x.x,u=o.x,s=i.x,l=x.y,a=o.y,y=i.y,p=Math.min(f,u,s),b=Math.min(l,a,y),M=Math.max(f,u,s),m=Math.max(l,a,y),A=c(p,b,e,n,r),g=c(M,m,e,n,r);let Z=t.prevZ,d=t.nextZ;for(;Z&&Z.z>=A&&d&&d.z<=g;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;Z&&Z.z>=A;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;d&&d.z<=g;){if(d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!b(n,x)&&M(n,r,r.next,x)&&g(n,x)&&g(x,n)&&(e.push(n.i,r.i,x.i),w(r),w(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function f(t,e,x,o,i,f){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&p(u,t)){let s=Z(u,t);return u=n(u,u.next),s=n(s,s.next),r(u,e,x,o,i,f,0),void r(s,e,x,o,i,f,0)}t=t.next}u=u.next}while(u!==t)}function u(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(b(t,n))return n;do{if(b(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const f=o,u=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&y(x<s?r:i,x,u,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);g(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==f);return o}(t,e);if(!r)return e;const x=Z(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,x,o,i,f){return(x-i)*(e-f)>=(t-i)*(o-f)&&(t-i)*(r-f)>=(n-i)*(e-f)&&(n-i)*(o-f)>=(x-i)*(r-f)}function h(t,e,n,r,x,o,i,f){return!(t===i&&e===f)&&y(t,e,n,r,x,o,i,f)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){const x=A(v(t,e,n)),o=A(v(t,e,r)),i=A(v(n,r,t)),f=A(v(n,r,e));return x!==o&&i!==f||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==i||!m(n,t,r))||!(0!==f||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function g(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function Z(t,e){const n=F(t.i,t.x,t.y),r=F(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(t,e,n,r){const x=F(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),f=[(n[0]-t[0])/i,(n[1]-t[1])/i];let u=0===r||0===i?0:Math.acos((s=f[0]*x[0]+f[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;u=Math.max(u,1e-5);return f[0]*o[0]+f[1]*o[1]>0?u:2*Math.PI-u}function I(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function z(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],f=e[3],u=e[4],s=e[5];return t[0]=f/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-f*u)/n,t[5]=-(x*s-o*u)/n,t}new Array(6);const B=[],P={vertexAttributesPosition:0,instanceAttributesPosition:0,indicesPosition:0};function N(t,e,n,r,x){const o=t[e++],i=t[e++],f=B;f.length=r;for(let n=0;n<f.length;n++)f[n]=t[e+n];let u=x?x.instanceAttributesPosition:0;return n[u++]=o,n[u++]=i,f.length&&(n.set(f,u),u+=f.length),P.instanceAttributesPosition=u,P}function R(t,e,n,r,x,o,i,f,u,s){const l=[t[e],t[e+1]],c=[t[n],t[n+1]],a=t[e+2],y=t[n+2],h=I(f,[...l]),p=I(f,[...c]);let v=-1,b=-1,M=s;const m=null!==x;if(null!==r){v=E(h,p,I(f,[...[t[r],t[r+1]]])),Math.cos(v)<=.985&&(M+=Math.tan((v-Math.PI)/2))}if(m){b=E(p,h,I(f,[...[t[x],t[x+1]]])),Math.cos(b)<=.985&&(M+=Math.tan((Math.PI-b)/2))}const A=Math.pow(2,24),g=u%A,Z=Math.floor(u/A)*A;return o.push(l[0],l[1],a,c[0],c[1],y,v,b,g,Z,s),o.push(...i),{length:u+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:M}}function S(e,n,r,x,o){const i=2+o;let f=n;const u=e.slice(f,f+o);f+=o;const s=e[f++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[f++],t<s-1&&(c[t]=l);const a=e.slice(f,f+2*l),y=t(a,c,2);for(let t=0;t<y.length;t++)x.push(y[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...u);return f+2*l}const T="GENERATE_POLYGON_BUFFERS",_="GENERATE_POINT_BUFFERS",O="GENERATE_LINE_STRING_BUFFERS",U=self;U.onmessage=t=>{const e=t.data;switch(e.type){case _:{const t=2,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x*(t+r),f=Uint32Array.from([0,1,3,1,2,3]),u=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),s=new Float32Array(i);let l;for(let t=0;t<o.length;t+=x)l=N(o,t,s,r,l);const c=Object.assign({indicesBuffer:f.buffer,vertexAttributesBuffer:u.buffer,instanceAttributesBuffer:s.buffer,renderInstructions:o.buffer},e);U.postMessage(c,[u.buffer,s.buffer,f.buffer,o.buffer]);break}case O:{const t=[],n=e.customAttributesSize,r=3,x=new Float32Array(e.renderInstructions);let o=0;const i=[1,0,0,1,0,0];let f,u;for(z(i,e.renderInstructionsTransform);o<x.length;){u=Array.from(x.slice(o,o+n)),o+=n,f=x[o++];const e=o,s=o+(f-1)*r,l=x[e]===x[s]&&x[e+1]===x[s+1];let c=0,a=0;for(let n=0;n<f-1;n++){let y=null;n>0?y=o+(n-1)*r:l&&(y=s-r);let h=null;n<f-2?h=o+(n+2)*r:l&&(h=e+r);const p=R(x,o+n*r,o+(n+1)*r,y,h,t,u,i,c,a);c=p.length,a=p.angle}o+=f*r}const s=Uint32Array.from([0,1,3,1,2,3]),l=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),c=Float32Array.from(t),a=Object.assign({indicesBuffer:s.buffer,vertexAttributesBuffer:l.buffer,instanceAttributesBuffer:c.buffer,renderInstructions:x.buffer},e);U.postMessage(a,[l.buffer,c.buffer,s.buffer,x.buffer]);break}case T:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=S(x,o,t,n,r);const i=Uint32Array.from(n),f=Float32Array.from(t),u=Float32Array.from([]),s=Object.assign({indicesBuffer:i.buffer,vertexAttributesBuffer:f.buffer,instanceAttributesBuffer:u.buffer,renderInstructions:x.buffer},e);U.postMessage(s,[f.buffer,u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(i,"binary").toString("base64"):URL.createObjectURL(new Blob([i],{type:"application/javascript"})))}const In={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function xC(i,e){e=e||[];const t=256,r=t-1,A=Math.floor(i/t/t/t)/r,n=Math.floor(i/t/t)%t/r,s=Math.floor(i/t)%t/r,o=i%t/r;return e[0]=A*256*255+n*255,e[1]=s*256*255+o*255,e}function TC(i){let e=0;const t=256,r=t-1;return e+=Math.round(i[0]*t*t*t*r),e+=Math.round(i[1]*t*t*r),e+=Math.round(i[2]*t*r),e+=Math.round(i[3]*r),e}function xc(i,e,t,r){let A=0;for(const n in e){const s=e[n],o=s.callback.call(t,t.feature);let a=(o==null?void 0:o[0])??o;a===Ug&&console.warn('The "has" operator might return false positives.'),a===void 0?a=Ug:a===null&&(a=0),i[r+A++]=a,!(!s.size||s.size===1)&&(i[r+A++]=o[1],!(s.size<3)&&(i[r+A++]=o[2],!(s.size<4)&&(i[r+A++]=o[3])))}return A}function Aa(i){return Object.keys(i).reduce((e,t)=>e+(i[t].size||1),0)}function Fb(i,e,t,r){const A=(2+Aa(t))*i.geometriesCount;(!e||e.length!==A)&&(e=new Float32Array(A));const n=[];let s=0;for(const o in i.entries){const a=i.entries[o];for(let g=0,l=a.flatCoordss.length;g<l;g++)n[0]=a.flatCoordss[g][0],n[1]=a.flatCoordss[g][1],qr(r,n),e[s++]=n[0],e[s++]=n[1],s+=xc(e,t,a,s)}return e}function Lb(i,e,t,r){const A=3*i.verticesCount+(1+Aa(t))*i.geometriesCount;(!e||e.length!==A)&&(e=new Float32Array(A));const n=[];let s=0;for(const o in i.entries){const a=i.entries[o];for(let g=0,l=a.flatCoordss.length;g<l;g++){n.length=a.flatCoordss[g].length,Md(a.flatCoordss[g],0,n.length,3,r,n,3),s+=xc(e,t,a,s),e[s++]=n.length/3;for(let c=0,u=n.length;c<u;c+=3)e[s++]=n[c],e[s++]=n[c+1],e[s++]=n[c+2]}}return e}function Nb(i,e,t,r){const A=2*i.verticesCount+(1+Aa(t))*i.geometriesCount+i.ringsCount;(!e||e.length!==A)&&(e=new Float32Array(A));const n=[];let s=0;for(const o in i.entries){const a=i.entries[o];for(let g=0,l=a.flatCoordss.length;g<l;g++){n.length=a.flatCoordss[g].length,Md(a.flatCoordss[g],0,n.length,2,r,n),s+=xc(e,t,a,s),e[s++]=a.ringsVerticesCounts[g].length;for(let c=0,u=a.ringsVerticesCounts[g].length;c<u;c++)e[s++]=a.ringsVerticesCounts[g][c];for(let c=0,u=n.length;c<u;c+=2)e[s++]=n[c],e[s++]=n[c+1]}}return e}function Co(i){return(JSON.stringify(i).split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0),0)>>>0).toString()}function Tc(i,e,t,r){if(`${r}radius`in i&&r!=="icon-"){let A=X(t,i[`${r}radius`],Ce);if(`${r}radius2`in i){const n=X(t,i[`${r}radius2`],Ce);A=`max(${A}, ${n})`}`${r}stroke-width`in i&&(A=`(${A} + ${X(t,i[`${r}stroke-width`],Ce)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${A} * 2. + 0.5)`)}if(`${r}scale`in i){const A=X(t,i[`${r}scale`],Ji);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${A}`)}`${r}displacement`in i&&e.setSymbolOffsetExpression(X(t,i[`${r}displacement`],Mi)),`${r}rotation`in i&&e.setSymbolRotationExpression(X(t,i[`${r}rotation`],Ce)),`${r}rotate-with-view`in i&&e.setSymbolRotateWithView(!!i[`${r}rotate-with-view`])}function FC(i,e,t,r,A){let n="vec4(0.)";if(e!==null&&(n=e),t!==null&&r!==null){const a=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${i})`;n=`mix(${t}, ${n}, ${a})`}const s=`(1.0 - smoothstep(-0.63, 0.58, ${i}))`;let o=`${n} * vec4(1.0, 1.0, 1.0, ${s})`;return A!==null&&(o=`${o} * vec4(1.0, 1.0, 1.0, ${A})`),o}function Fc(i,e,t,r,A){const n=new Image;n.crossOrigin=i[`${r}cross-origin`]===void 0?"anonymous":i[`${r}cross-origin`],er(typeof i[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),n.src=i[`${r}src`],t[`u_texture${A}_size`]=()=>n.complete?[n.width,n.height]:[0,0],e.addUniform(`u_texture${A}_size`,"vec2");const s=`u_texture${A}_size`;return t[`u_texture${A}`]=n,e.addUniform(`u_texture${A}`,"sampler2D"),s}function Lc(i,e,t,r,A){let n=X(t,i[`${e}offset`],Ji);if(`${e}offset-origin`in i)switch(i[`${e}offset-origin`]){case"top-right":n=`vec2(${r}.x, 0.) + ${A} * vec2(-1., 0.) + ${n} * vec2(-1., 1.)`;break;case"bottom-left":n=`vec2(0., ${r}.y) + ${A} * vec2(0., -1.) + ${n} * vec2(1., -1.)`;break;case"bottom-right":n=`${r} - ${A} - ${n}`;break}return n}function Gb(i,e,t,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,Tc(i,e,r,"circle-");let A=null;"circle-opacity"in i&&(A=X(r,i["circle-opacity"],Ce));let n="coordsPx";"circle-scale"in i&&(n=`coordsPx / ${X(r,i["circle-scale"],Ji)}`);let s=null;"circle-fill-color"in i&&(s=X(r,i["circle-fill-color"],Ot));let o=null;"circle-stroke-color"in i&&(o=X(r,i["circle-stroke-color"],Ot));let a=X(r,i["circle-radius"],Ce),g=null;"circle-stroke-width"in i&&(g=X(r,i["circle-stroke-width"],Ce),a=`(${a} + ${g} * 0.5)`);const l=`circleDistanceField(${n}, ${a})`,c=FC(l,s,o,g,A);e.setSymbolColorExpression(c)}function vb(i,e,t,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,Tc(i,e,r,"shape-");let A=null;"shape-opacity"in i&&(A=X(r,i["shape-opacity"],Ce));let n="coordsPx";"shape-scale"in i&&(n=`coordsPx / ${X(r,i["shape-scale"],Ji)}`);let s=null;"shape-fill-color"in i&&(s=X(r,i["shape-fill-color"],Ot));let o=null;"shape-stroke-color"in i&&(o=X(r,i["shape-stroke-color"],Ot));let a=null;"shape-stroke-width"in i&&(a=X(r,i["shape-stroke-width"],Ce));const g=X(r,i["shape-points"],Ce);let l="0.";"shape-angle"in i&&(l=X(r,i["shape-angle"],Ce));let c,u=X(r,i["shape-radius"],Ce);if(a!==null&&(u=`${u} + ${a} * 0.5`),"shape-radius2"in i){let h=X(r,i["shape-radius2"],Ce);a!==null&&(h=`${h} + ${a} * 0.5`),c=`starDistanceField(${n}, ${g}, ${u}, ${h}, ${l})`}else c=`regularDistanceField(${n}, ${g}, ${u}, ${l})`;const I=FC(c,s,o,a,A);e.setSymbolColorExpression(I)}function Mb(i,e,t,r){let A="vec4(1.0)";"icon-color"in i&&(A=X(r,i["icon-color"],Ot)),"icon-opacity"in i&&(A=`${A} * vec4(1.0, 1.0, 1.0, ${X(r,i["icon-opacity"],Ce)})`);const n=Co(i["icon-src"]),s=Fc(i,e,t,"icon-",n);if(e.setSymbolColorExpression(`${A} * texture2D(u_texture${n}, v_texCoord)`).setSymbolSizeExpression(s),"icon-width"in i&&"icon-height"in i&&e.setSymbolSizeExpression(`vec2(${X(r,i["icon-width"],Ce)}, ${X(r,i["icon-height"],Ce)})`),"icon-offset"in i&&"icon-size"in i){const o=X(r,i["icon-size"],Mi),a=e.getSymbolSizeExpression();e.setSymbolSizeExpression(o);const g=Lc(i,"icon-",r,"v_quadSizePx",o);e.setTextureCoordinateExpression(`(vec4((${g}).xyxy) + vec4(0., 0., ${o})) / (${a}).xyxy`)}if(Tc(i,e,r,"icon-"),"icon-anchor"in i){const o=X(r,i["icon-anchor"],Mi);let a="1.0";"icon-scale"in i&&(a=X(r,i["icon-scale"],Ji));let g;i["icon-anchor-x-units"]==="pixels"&&i["icon-anchor-y-units"]==="pixels"?g=`${o} * ${a}`:i["icon-anchor-x-units"]==="pixels"?g=`${o} * vec2(vec2(${a}).x, v_quadSizePx.y)`:i["icon-anchor-y-units"]==="pixels"?g=`${o} * vec2(v_quadSizePx.x, vec2(${a}).x)`:g=`${o} * v_quadSizePx`;let l=`v_quadSizePx * vec2(0.5, -0.5) + ${g} * vec2(-1., 1.)`;if("icon-anchor-origin"in i)switch(i["icon-anchor-origin"]){case"top-right":l=`v_quadSizePx * -0.5 + ${g}`;break;case"bottom-left":l=`v_quadSizePx * 0.5 - ${g}`;break;case"bottom-right":l=`v_quadSizePx * vec2(-0.5, 0.5) + ${g} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${l}`)}}function kb(i,e,t,r){if("stroke-color"in i&&e.setStrokeColorExpression(X(r,i["stroke-color"],Ot)),"stroke-pattern-src"in i){const A=Co(i["stroke-pattern-src"]),n=Fc(i,e,t,"stroke-pattern-",A);let s=n,o="vec2(0.)";"stroke-pattern-offset"in i&&"stroke-pattern-size"in i&&(s=X(r,i["stroke-pattern-size"],Mi),o=Lc(i,"stroke-pattern-",r,n,s));let a="0.";"stroke-pattern-spacing"in i&&(a=X(r,i["stroke-pattern-spacing"],Ce));let g="0.";"stroke-pattern-start-offset"in i&&(g=X(r,i["stroke-pattern-start-offset"],Ce)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float startOffsetPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = (currentLengthPx - startOffsetPx) * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  float isInsideOfPattern = step(uCoordPx, sampleSize.x);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  vCoordPx = clamp(vCoordPx, 0.5, sampleSize.y - 0.5);
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord) * vec4(1.0, 1.0, 1.0, isInsideOfPattern);
}`;const l=`u_texture${A}`;let c="1.";"stroke-color"in i&&(c=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${c} * sampleStrokePattern(${l}, ${n}, ${o}, ${s}, ${a}, ${g}, currentLengthPx, currentRadiusRatio, v_width)`),r.functions.computeStrokePatternLength=`float computeStrokePatternLength(vec2 sampleSize, float spacingPx, float lineWidth) {
  float patternLengthPx = sampleSize.x / sampleSize.y * lineWidth;
  return patternLengthPx + spacingPx;
}`,e.setStrokePatternLengthExpression(`computeStrokePatternLength(${s}, ${a}, v_width)`)}if("stroke-width"in i&&e.setStrokeWidthExpression(X(r,i["stroke-width"],Ce)),"stroke-offset"in i&&e.setStrokeOffsetExpression(X(r,i["stroke-offset"],Ce)),"stroke-line-cap"in i&&e.setStrokeCapExpression(X(r,i["stroke-line-cap"],mn)),"stroke-line-join"in i&&e.setStrokeJoinExpression(X(r,i["stroke-line-join"],mn)),"stroke-miter-limit"in i&&e.setStrokeMiterLimitExpression(X(r,i["stroke-miter-limit"],Ce)),"stroke-line-dash"in i){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${kr("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${kr("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let A=i["stroke-line-dash"].map(h=>X(r,h,Ce));A.length%2===1&&(A=[...A,...A]);let n="0.";"stroke-line-dash-offset"in i&&(n=X(r,i["stroke-line-dash-offset"],Ce));const o=`dashDistanceField_${Co(i["stroke-line-dash"])}`,a=A.map((h,d)=>`float dashLength${d}`).join(", "),g=A.map((h,d)=>`dashLength${d}`).join(" + ");let l="0.",c=`getSingleDashDistance(distance, radius, ${l}, dashLength0, totalDashLength, capType, lineWidth)`;for(let h=2;h<A.length;h+=2)l=`${l} + dashLength${h-2} + dashLength${h-1}`,c=`min(${c}, getSingleDashDistance(distance, radius, ${l}, dashLength${h}, totalDashLength, capType, lineWidth))`;r.functions[o]=`float ${o}(float distance, float radius, float capType, float lineWidth, ${a}) {
  float totalDashLength = ${g};
  return ${c};
}`;const u=A.map((h,d)=>`${h}`).join(", ");e.setStrokeDistanceFieldExpression(`${o}(currentLengthPx + ${n}, currentRadiusPx, capType, v_width, ${u})`);let I=A.join(" + ");e.getStrokePatternLengthExpression()&&(r.functions.combinePatternLengths=`float combinePatternLengths(float patternLength1, float patternLength2) {
  return patternLength1 * patternLength2;
}`,I=`combinePatternLengths(${e.getStrokePatternLengthExpression()}, ${I})`),e.setStrokePatternLengthExpression(I)}}function Pb(i,e,t,r){if("fill-color"in i&&e.setFillColorExpression(X(r,i["fill-color"],Ot)),"fill-pattern-src"in i){const A=Co(i["fill-pattern-src"]),n=Fc(i,e,t,"fill-pattern-",A);let s=n,o="vec2(0.)";"fill-pattern-offset"in i&&"fill-pattern-size"in i&&(s=X(r,i["fill-pattern-size"],Mi),o=Lc(i,"fill-pattern-",r,n,s)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const a=`u_texture${A}`;let g="1.";"fill-color"in i&&(g=e.getFillColorExpression()),e.setFillColorExpression(`${g} * sampleFillPattern(${a}, ${n}, ${o}, ${s}, pxOrigin, pxPos)`)}}function Yg(i,e,t){const r=bc(),A=new RC,n={};if("icon-src"in i?Mb(i,A,n,r):"shape-points"in i?vb(i,A,n,r):"circle-radius"in i&&Gb(i,A,n,r),kb(i,A,n,r),Pb(i,A,n,r),t){const a=X(r,t,yn);A.setFragmentDiscardExpression(`!${a}`)}const s={};function o(a,g,l,c){if(!r[a])return;const u=Og(l),I=Dc(l);A.addAttribute(`a_${g}`,u),s[g]={size:I,callback:c}}return o("geometryType",wC,mn,a=>bA(ip(a.getGeometry()))),o("featureId",QC,mn|Ce,a=>{const g=a.getId()??null;return typeof g=="string"?bA(g):g}),_C(A,r),{builder:A,attributes:{...s,...bC(r)},uniforms:{...n,...SC(r,e)}}}const Ub=[];let Ja;function Ob(){return Ja||(Ja=DC()),Ja}let Yb=0;const ir={POSITION:"a_position",LOCAL_POSITION:"a_localPosition",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",ANGLE_TANGENT_SUM:"a_angleTangentSum",JOIN_ANGLES:"a_joinAngles",DISTANCE_LOW:"a_distanceLow",DISTANCE_HIGH:"a_distanceHigh"};class Kb{constructor(e,t,r,A){this.helper_,this.hitDetectionEnabled_=!!A,this.styleShaders=Hb(e,t),this.customAttributes_={},this.uniforms_={},this.hitDetectionEnabled_&&(this.customAttributes_.hitColor={callback(){return xC(this.ref,Ub)},size:2});for(const n of this.styleShaders){for(const s in n.attributes)s in this.customAttributes_||(this.customAttributes_[s]=n.attributes[s]);for(const s in n.uniforms)s in this.uniforms_||(this.uniforms_[s]=n.uniforms[s])}this.renderPasses_=this.styleShaders.map(n=>{const s={},o=Object.entries(this.customAttributes_).map(([a,g])=>({name:a in n.attributes||a==="hitColor"?`a_${a}`:null,size:g.size||1,type:Ve.FLOAT}));return n.builder.getFillVertexShader()&&(s.fillRenderPass={vertexShader:n.builder.getFillVertexShader(),fragmentShader:n.builder.getFillFragmentShader(),attributesDesc:[{name:ir.POSITION,size:2,type:Ve.FLOAT},...o],instancedAttributesDesc:[],instancePrimitiveVertexCount:3}),n.builder.getStrokeVertexShader()&&(s.strokeRenderPass={vertexShader:n.builder.getStrokeVertexShader(),fragmentShader:n.builder.getStrokeFragmentShader(),attributesDesc:[{name:ir.LOCAL_POSITION,size:2,type:Ve.FLOAT}],instancedAttributesDesc:[{name:ir.SEGMENT_START,size:2,type:Ve.FLOAT},{name:ir.MEASURE_START,size:1,type:Ve.FLOAT},{name:ir.SEGMENT_END,size:2,type:Ve.FLOAT},{name:ir.MEASURE_END,size:1,type:Ve.FLOAT},{name:ir.JOIN_ANGLES,size:2,type:Ve.FLOAT},{name:ir.DISTANCE_LOW,size:1,type:Ve.FLOAT},{name:ir.DISTANCE_HIGH,size:1,type:Ve.FLOAT},{name:ir.ANGLE_TANGENT_SUM,size:1,type:Ve.FLOAT},...o],instancePrimitiveVertexCount:6}),n.builder.getSymbolVertexShader()&&(s.symbolRenderPass={vertexShader:n.builder.getSymbolVertexShader(),fragmentShader:n.builder.getSymbolFragmentShader(),attributesDesc:[{name:ir.LOCAL_POSITION,size:2,type:Ve.FLOAT}],instancedAttributesDesc:[{name:ir.POSITION,size:2,type:Ve.FLOAT},...o],instancePrimitiveVertexCount:6}),s}),this.hasFill_=this.renderPasses_.some(n=>n.fillRenderPass),this.hasStroke_=this.renderPasses_.some(n=>n.strokeRenderPass),this.hasSymbol_=this.renderPasses_.some(n=>n.symbolRenderPass),this.setHelper(r)}async generateBuffers(e,t){if(e.isEmpty())return null;const r=this.generateRenderInstructions_(e,t),[A,n,s]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",t),this.generateBuffersForType_(r.lineStringInstructions,"LineString",t),this.generateBuffersForType_(r.pointInstructions,"Point",t)]),o=Qn(Et(),t);return{polygonBuffers:A,lineStringBuffers:n,pointBuffers:s,invertVerticesTransform:o}}generateRenderInstructions_(e,t){const r=this.hasFill_?Nb(e.polygonBatch,new Float32Array(0),this.customAttributes_,t):null,A=this.hasStroke_?Lb(e.lineStringBatch,new Float32Array(0),this.customAttributes_,t):null,n=this.hasSymbol_?Fb(e.pointBatch,new Float32Array(0),this.customAttributes_,t):null;return{polygonInstructions:r,lineStringInstructions:A,pointInstructions:n}}generateBuffersForType_(e,t,r){if(e===null)return null;const A=Yb++;let n;switch(t){case"Polygon":n=In.GENERATE_POLYGON_BUFFERS;break;case"LineString":n=In.GENERATE_LINE_STRING_BUFFERS;break;case"Point":n=In.GENERATE_POINT_BUFFERS;break}const s={id:A,type:n,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:Aa(this.customAttributes_)},o=Ob();return o.postMessage(s,[e.buffer]),e=null,new Promise(a=>{const g=l=>{const c=l.data;if(c.id!==A||(o.removeEventListener("message",g),!this.helper_.getGL()))return;const u=new li(os,fA).fromArrayBuffer(c.indicesBuffer),I=new li(Yi,fA).fromArrayBuffer(c.vertexAttributesBuffer),h=new li(Yi,fA).fromArrayBuffer(c.instanceAttributesBuffer);this.helper_.flushBufferData(u),this.helper_.flushBufferData(I),this.helper_.flushBufferData(h),a([u,I,h])};o.addEventListener("message",g)})}render(e,t,r){for(const A of this.renderPasses_)A.fillRenderPass&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],e.polygonBuffers[2],A.fillRenderPass,t,r),A.strokeRenderPass&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],e.lineStringBuffers[2],A.strokeRenderPass,t,r),A.symbolRenderPass&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],e.pointBuffers[2],A.symbolRenderPass,t,r)}renderInternal_(e,t,r,A,n,s){const o=e.getSize();if(o===0)return;const a=A.instancedAttributesDesc.length;if(this.helper_.useProgram(A.program,n),this.helper_.bindBuffer(t),this.helper_.bindBuffer(e),this.helper_.enableAttributes(A.attributesDesc),this.helper_.bindBuffer(r),this.helper_.enableAttributesInstanced(A.instancedAttributesDesc),s(),a){const g=A.instancedAttributesDesc.reduce((c,u)=>c+(u.size||1),0),l=r.getSize()/g;this.helper_.drawElementsInstanced(0,o,l)}else this.helper_.drawElements(0,o)}setHelper(e,t=null){this.helper_=e;for(const r of this.renderPasses_)r.fillRenderPass&&(r.fillRenderPass.program=this.helper_.getProgram(r.fillRenderPass.fragmentShader,r.fillRenderPass.vertexShader)),r.strokeRenderPass&&(r.strokeRenderPass.program=this.helper_.getProgram(r.strokeRenderPass.fragmentShader,r.strokeRenderPass.vertexShader)),r.symbolRenderPass&&(r.symbolRenderPass.program=this.helper_.getProgram(r.symbolRenderPass.fragmentShader,r.symbolRenderPass.vertexShader));this.helper_.addUniforms(this.uniforms_),t&&(t.polygonBuffers&&(this.helper_.flushBufferData(t.polygonBuffers[0]),this.helper_.flushBufferData(t.polygonBuffers[1]),this.helper_.flushBufferData(t.polygonBuffers[2])),t.lineStringBuffers&&(this.helper_.flushBufferData(t.lineStringBuffers[0]),this.helper_.flushBufferData(t.lineStringBuffers[1]),this.helper_.flushBufferData(t.lineStringBuffers[2])),t.pointBuffers&&(this.helper_.flushBufferData(t.pointBuffers[0]),this.helper_.flushBufferData(t.pointBuffers[1]),this.helper_.flushBufferData(t.pointBuffers[2])))}}function Hb(i,e){const t=Array.isArray(i)?i:[i];if("style"in t[0]){const r=[],A=t,n=[];for(const s of A){const o=Array.isArray(s.style)?s.style:[s.style];let a=s.filter;s.else&&n.length&&(a=["all",...n.map(l=>["!",l])],s.filter&&a.push(s.filter),a.length<3&&(a=a[1])),s.filter&&n.push(s.filter);const g=o.map(l=>Yg(l,e,a));r.push(...g)}return r}return"builder"in t[0]?t:t.map(r=>Yg(r,e,null))}const mr=new Uint8Array(4);class LC{constructor(e,t){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){Ap(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return mr[0]=0,mr[1]=0,mr[2]=0,mr[3]=0,mr;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return mr[0]=this.data_[r*4],mr[1]=this.data_[r*4+1],mr[2]=this.data_[r*4+2],mr[3]=this.data_[r*4+3],mr}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}function NC(i,e){const t=i.viewState.projection,A=e.getSource().getWrapX()&&t.canWrapX(),n=t.getExtent(),s=i.extent,o=A?Bt(n):null,a=A?Math.ceil((s[2]-n[2])/o)+1:1;return[A?Math.floor((s[0]-n[0])/o):0,a,o]}const eA={...wr,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class GC extends as{constructor(e,t){const r={[eA.RENDER_EXTENT]:[0,0,0,0],[eA.PATTERN_ORIGIN]:[0,0],[eA.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:t.postProcesses}),this.hitDetectionEnabled_=!t.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=Zn(),this.currentTransform_=Et(),this.tmpCoords_=[0,0],this.tmpTransform_=Et(),this.tmpMat4_=ji(),this.currentFrameStateTransform_=Et(),this.styleVariables_={},this.style_=[],this.styleRenderer_=null,this.buffers_=null,this.applyOptions_(t),this.batch_=new fo,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const t=this.getLayer().getSource();let r;this.batch_.addFeatures(t.getFeatures(),r),this.sourceListenKeys_=[Ur(t,si.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Ur(t,si.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,r),this),Ur(t,si.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Ur(t,si.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.style_=e.style}createRenderers_(){this.buffers_=null,this.styleRenderer_=new Kb(this.style_,this.styleVariables_,this.helper,this.hitDetectionEnabled_)}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderer_?this.styleRenderer_.setHelper(this.helper,this.buffers_):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new LC(this.helper))}handleSourceFeatureAdded_(e,t){const r=t.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e,t){const r=t.feature;this.batch_.changeFeature(r,e)}handleSourceFeatureDelete_(e){const t=e.feature;this.batch_.removeFeature(t)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){np(this.tmpTransform_,this.currentFrameStateTransform_),Bn(this.tmpTransform_,e),this.helper.setUniformMatrixValue(eA.PROJECTION_MATRIX,ho(this.tmpMat4_,this.tmpTransform_)),Qn(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(eA.SCREEN_TO_WORLD_MATRIX,ho(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,Qn(this.tmpTransform_,e),qr(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(eA.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[r,A,n]=NC(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,A,n),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const s=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,A,n),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),s}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const t=this.getLayer(),r=t.getSource(),A=e.viewState,n=!e.viewHints[Ii.ANIMATING]&&!e.viewHints[Ii.INTERACTING],s=!pn(this.previousExtent_,e.extent),o=this.sourceRevision_<r.getRevision();if(o&&(this.sourceRevision_=r.getRevision()),n&&(s||o)){const a=A.projection,g=A.resolution,l=t instanceof Ko?t.getRenderBuffer():0,c=xl(e.extent,l*g);r.loadFeatures(c,g,a),this.ready=!1;const u=this.helper.makeProjectionTransform(e,Et());this.styleRenderer_.generateBuffers(this.batch_,u).then(I=>{this.buffers_&&this.disposeBuffers(this.buffers_),this.buffers_=I,this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,t,r,A,n){let s=r;t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),Dl(this.currentFrameStateTransform_,s*n,0),this.buffers_&&this.styleRenderer_.render(this.buffers_,e,()=>{this.applyUniforms_(this.buffers_.invertVerticesTransform),this.helper.applyHitDetectionUniform(t)});while(++s<A)}forEachFeatureAtCoordinate(e,t,r,A,n){if(er(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderer_||!this.hitDetectionEnabled_)return;const s=qr(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],g=TC(a),l=this.batch_.getFeatureFromRef(g);if(l)return A(l,this.getLayer(),null)}disposeBuffers(e){const t=r=>{for(const A of r)A&&this.helper.deleteBuffer(A)};e.pointBuffers&&t(e.pointBuffers),e.lineStringBuffers&&t(e.lineStringBuffers),e.polygonBuffers&&t(e.polygonBuffers)}disposeInternal(){this.buffers_&&this.disposeBuffers(this.buffers_),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){Xs(e)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const vr={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},qb=["#00f","#0ff","#0f0","#ff0","#f00"];class Jb extends Ko{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.on,this.once,this.un,this.filter_=e.filter??!0,this.styleVariables_=e.variables||{},this.gradient_=null,this.addChangeListener(vr.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:qb),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(vr.BLUR)}getGradient(){return this.get(vr.GRADIENT)}getRadius(){return this.get(vr.RADIUS)}handleGradientChanged_(){this.gradient_=zb(this.getGradient())}setBlur(e){const t=this.get(vr.BLUR);if(this.set(vr.BLUR,e),typeof e=="number"&&typeof t=="number"){this.changed();return}this.clearRenderer()}setGradient(e){this.set(vr.GRADIENT,e)}setRadius(e){const t=this.get(vr.RADIUS);if(this.set(vr.RADIUS,e),typeof e=="number"&&typeof t=="number"){this.changed();return}this.clearRenderer()}setFilter(e){this.filter_=e,this.changed(),this.clearRenderer()}setWeight(e){this.weight_=e,this.changed(),this.clearRenderer()}createRenderer(){const e=new RC,t=bc(),r=X(t,this.filter_,yn);let A=X(t,this.getRadius(),Ce),n=X(t,this.getBlur(),Ce);const s={};typeof this.getBlur()=="number"&&(n="a_blur",s.a_blur=()=>this.getBlur(),e.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(A="a_radius",s.a_radius=()=>this.getRadius(),e.addUniform("a_radius","float"));const o={};let a=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const c=typeof this.weight_=="string"?u=>u.get(this.weight_):this.weight_;o.prop_weight={size:1,callback:u=>{const I=c(u);return I!==void 0?Je(I,0,1):1}},a="a_prop_weight",e.addAttribute("a_prop_weight","float")}else{const c=["clamp",this.weight_,0,1];a=X(t,c,Ce)}e.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${n});
  float radius = ${A};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${A} + ${n}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${a})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${a})`).setStrokeWidthExpression(`(${A} + ${n}) * 2.`).setFillColorExpression(`vec4(${a})`).setFragmentDiscardExpression(`!${r}`),_C(e,t);const g=bC(t),l=SC(t,this.styleVariables_);return new GC(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:e,attributes:{...g,...o},uniforms:{...l,...s}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}renderDeclutter(){}}function zb(i){const r=hi(1,256),A=r.createLinearGradient(0,0,1,256),n=1/(i.length-1);for(let s=0,o=i.length;s<o;++s)A.addColorStop(s*n,i[s]);return r.fillStyle=A,r.fillRect(0,0,1,256),r.canvas}class Nc extends kd{constructor(e,t,r,A,n){const s=n!==void 0?wi.IDLE:wi.LOADED;super(e,t,r,s),this.loader_=n!==void 0?n:null,this.canvas_=A,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=wi.ERROR):this.state=wi.LOADED,this.changed()}load(){this.state==wi.IDLE&&(this.state=wi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class jb extends sp{constructor(e){super(e),this.vectorRenderer_=new op(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Et(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=qr(this.coordinateToVectorPixelTransform_,qr(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){var l;const t=e.pixelRatio,r=e.viewState,A=r.resolution,n=e.viewHints,s=this.vectorRenderer_;let o=e.extent;this.layerImageRatio_!==1&&(o=o.slice(0),Pd(o,this.layerImageRatio_));const a=Bt(o)/A,g=fr(o)/A;if(!n[Ii.ANIMATING]&&!n[Ii.INTERACTING]&&!_l(o)){s.useContainer(null,null);const c=s.context,u=e.layerStatesArray[e.layerIndex],I=Object.assign({},u,{opacity:1}),h=Object.assign({},e,{extent:o,size:[a,g],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[I],layerIndex:0,declutter:null}),d=this.getLayer().getDeclutter();d&&(h.declutter={[d]:new ap(9)});const f=new Nc(o,A,t,c.canvas,function(C){s.prepareFrame(h)&&s.replayGroupChanged&&(s.clipping=!1,s.renderFrame(h,null),s.renderDeclutter(h),s.renderDeferred(h),C())});f.addEventListener(Pt.CHANGE,()=>{if(f.getState()!==wi.LOADED)return;this.image=f;const C=f.getPixelRatio(),E=gp(f.getResolution())*t/C;this.renderedResolution=E,this.coordinateToVectorPixelTransform_=Sl(this.coordinateToVectorPixelTransform_,a/2,g/2,1/E,-1/E,0,-r.center[0],-r.center[1])}),f.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!((l=this.getLayer().getSource())!=null&&l.loading)&&!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,r,A,n){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,A,n):super.forEachFeatureAtCoordinate(e,t,r,A,n)}}class Vb extends Ko{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new jb(this)}}class $b extends as{constructor(e,t){const r=t.uniforms||{},A=Et();r[wr.PROJECTION_MATRIX]=A,super(e,{uniforms:r,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new li(Yi,fA),this.instanceAttributesBuffer_=new li(Yi,fA),this.indicesBuffer_=new li(os,fA),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const n=t.attributes?t.attributes.map(function(o){return{name:"a_"+o.name,size:1,type:Ve.FLOAT}}):[];this.attributes=[{name:"a_localPosition",size:2,type:Ve.FLOAT}],this.instanceAttributes=[{name:"a_position",size:2,type:Ve.FLOAT}],this.hitDetectionEnabled_&&(this.instanceAttributes.push({name:"a_hitColor",size:2,type:Ve.FLOAT}),this.instanceAttributes.push({name:"a_featureUid",size:1,type:Ve.FLOAT})),this.instanceAttributes.push(...n),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=Zn(),this.currentTransform_=A,this.renderTransform_=Et(),this.invertRenderTransform_=Et(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=DC(),this.worker_.addEventListener("message",o=>{const a=o.data;if(a.type===In.GENERATE_POINT_BUFFERS){const g=a.projectionTransform;this.verticesBuffer_.fromArrayBuffer(a.vertexAttributesBuffer),this.instanceAttributesBuffer_.fromArrayBuffer(a.instanceAttributesBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.helper.flushBufferData(this.instanceAttributesBuffer_),this.indicesBuffer_.fromArrayBuffer(a.indicesBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=g,Qn(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(o.data.renderInstructions),a.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[Ur(s,si.ADDFEATURE,this.handleSourceFeatureAdded_,this),Ur(s,si.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Ur(s,si.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Ur(s,si.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature(o=>{const a=o.getGeometry();a&&a.getType()==="Point"&&(this.featureCache_[me(o)]={feature:o,properties:o.getProperties(),flatCoordinates:a.getFlatCoordinates()},this.featureCount_++)})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new LC(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(e){const t=e.feature,r=t.getGeometry();r&&r.getType()==="Point"&&(this.featureCache_[me(t)]={feature:t,properties:t.getProperties(),flatCoordinates:r.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureChanged_(e){const t=e.feature,r=me(t),A=this.featureCache_[r],n=t.getGeometry();A?n&&n.getType()==="Point"?(A.properties=t.getProperties(),A.flatCoordinates=n.getFlatCoordinates()):(delete this.featureCache_[r],this.featureCount_--):n&&n.getType()==="Point"&&(this.featureCache_[r]={feature:t,properties:t.getProperties(),flatCoordinates:n.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureDelete_(e){const t=e.feature,r=me(t);r in this.featureCache_&&(delete this.featureCache_[r],this.featureCount_--)}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[r,A,n]=NC(e,this.getLayer());return this.renderWorlds(e,!1,r,A,n),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,A,n),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),r=t.getSource(),A=e.viewState,n=!e.viewHints[Ii.ANIMATING]&&!e.viewHints[Ii.INTERACTING],s=!pn(this.previousExtent_,e.extent),o=this.sourceRevision_<r.getRevision();if(o&&(this.sourceRevision_=r.getRevision()),n&&(s||o)){const a=A.projection,g=A.resolution,l=t instanceof Ko?t.getRenderBuffer():0,c=xl(e.extent,l*g);r.loadFeatures(c,g,a),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),!0}rebuildBuffers_(e){const t=Et();this.helper.makeProjectionTransform(e,t);const A=(this.hitDetectionEnabled_?5:2)+this.customAttributes.length,n=A*this.featureCount_,s=this.renderInstructions_&&this.renderInstructions_.length===n?this.renderInstructions_:new Float32Array(n);this.renderInstructions_=null;let o=[];const a=[];let g=-1;e.viewState.projection;for(const c in this.featureCache_){const u=this.featureCache_[c];if(o[0]=u.flatCoordinates[0],o[1]=u.flatCoordinates[1],qr(t,o),s[++g]=o[0],s[++g]=o[1],this.hitDetectionEnabled_){const I=xC(g+3,a);s[++g]=I[0],s[++g]=I[1],s[++g]=Number(c)}for(let I=0;I<this.customAttributes.length;I++){const h=this.customAttributes[I].callback(u.feature,u.properties);s[++g]=h}}const l={id:++this.lastSentId,type:In.GENERATE_POINT_BUFFERS,renderInstructions:s.buffer,customAttributesSize:A-2};l.projectionTransform=t,this.ready=!1,this.worker_.postMessage(l,[s.buffer])}forEachFeatureAtCoordinate(e,t,r,A,n){if(er(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const s=qr(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],g=TC(a),l=this.renderInstructions_[g],c=Math.floor(l).toString(),I=this.getLayer().getSource().getFeatureByUid(c);if(I)return A(I,this.getLayer(),null)}renderWorlds(e,t,r,A,n){let s=r;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));const o=this.instanceAttributes.reduce((g,l)=>g+(l.size||1),0),a=this.instanceAttributesBuffer_.getSize()/o;do{this.helper.bindBuffer(this.indicesBuffer_),this.helper.bindBuffer(this.verticesBuffer_),this.helper.enableAttributes(this.attributes),this.helper.bindBuffer(this.instanceAttributesBuffer_),this.helper.enableAttributesInstanced(this.instanceAttributes),this.helper.makeProjectionTransform(e,this.currentTransform_),Dl(this.currentTransform_,s*n,0),Bn(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const g=this.indicesBuffer_.getSize();this.helper.drawElementsInstanced(0,g,a)}while(++s<A)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(e){Xs(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class Zb extends Tl{constructor(e){const t=Object.assign({},e);super(t),this.styleVariables_=e.variables||{},this.parseResult_=Yg(e.style,this.styleVariables_,e.filter),this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){const e=Object.keys(this.parseResult_.attributes).map(t=>({name:t,...this.parseResult_.attributes[t]}));return new $b(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}function AI(i,e){const t=`
    attribute vec2 ${Ps.TEXTURE_COORD};
    uniform mat4 ${ie.TILE_TRANSFORM};
    uniform float ${ie.TEXTURE_PIXEL_WIDTH};
    uniform float ${ie.TEXTURE_PIXEL_HEIGHT};
    uniform float ${ie.TEXTURE_RESOLUTION};
    uniform float ${ie.TEXTURE_ORIGIN_X};
    uniform float ${ie.TEXTURE_ORIGIN_Y};
    uniform float ${ie.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Ps.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${ie.TEXTURE_ORIGIN_X} + ${ie.TEXTURE_RESOLUTION} * ${ie.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${ie.TEXTURE_ORIGIN_Y} - ${ie.TEXTURE_RESOLUTION} * ${ie.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${ie.TILE_TRANSFORM} * vec4(${Ps.TEXTURE_COORD}, ${ie.DEPTH}, 1.0);
    }
  `,r={...bc(),bandCount:e},A=[];if(i.color!==void 0){const c=X(r,i.color,Ot);A.push(`color = ${c};`)}if(i.contrast!==void 0){const c=X(r,i.contrast,Ce);A.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.exposure!==void 0){const c=X(r,i.exposure,Ce);A.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.saturation!==void 0){const c=X(r,i.saturation,Ce);A.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(i.gamma!==void 0){const c=X(r,i.gamma,Ce);A.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(i.brightness!==void 0){const c=X(r,i.brightness,Ce);A.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const n={},s=Object.keys(r.variables).length;if(s>1&&!i.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<s;++c){const u=r.variables[Object.keys(r.variables)[c]];if(!(u.name in i.variables))throw new Error(`Missing '${u.name}' in style variables`);const I=ia(u.name);n[I]=function(){let h=i.variables[u.name];return typeof h=="string"&&(h=bA(h)),h!==void 0?h:-9999999}}const o=Object.keys(n).map(function(c){return`uniform float ${c};`}),a=Math.ceil(e/4);o.push(`uniform sampler2D ${ie.TILE_TEXTURE_ARRAY}[${a}];`),r.paletteTextures&&o.push(`uniform sampler2D ${mC}[${r.paletteTextures.length}];`);const g=Object.keys(r.functions).map(function(c){return r.functions[c]}),l=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${ie.RENDER_EXTENT};
    uniform float ${ie.TRANSITION_ALPHA};
    uniform float ${ie.TEXTURE_PIXEL_WIDTH};
    uniform float ${ie.TEXTURE_PIXEL_HEIGHT};
    uniform float ${ie.RESOLUTION};
    uniform float ${ie.ZOOM};

    ${o.join(`
`)}

    ${g.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${ie.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${ie.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${ie.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${ie.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${ie.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${A.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${ie.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:l,uniforms:n,paletteTextures:r.paletteTextures}}class vC extends lp{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(mg.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const e=this.getSource();if(e)if(e.getState()==="loading"){const t=()=>{e.getState()==="ready"&&(e.removeEventListener("change",t),this.setStyle(this.style_))};e.addEventListener("change",t)}else this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=AI(this.style_,this.getSourceBandCount_());return new pb(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,t){const r=this.getRenderer();let A;for(let n=0,s=t.length;n<s;++n)this.renderedSource_=t[n],r.prepareFrame(e)&&(A=r.renderFrame(e));return A}render(e,t){this.rendered=!0;const r=e.viewState,A=this.getSources(e.extent,r.resolution);let n=!0;for(let o=0,a=A.length;o<a;++o){const g=A[o],l=g.getState();if(l=="loading"){const c=()=>{g.getState()=="ready"&&(g.removeEventListener("change",c),this.changed())};g.addEventListener("change",c)}n=n&&l=="ready"}const s=this.renderSources(e,A);if(this.getRenderer().renderComplete&&n)return this.renderedResolution_=r.resolution,s;if(this.renderedResolution_>.5*r.resolution){const o=this.getSources(e.extent,this.renderedResolution_).filter(a=>!A.includes(a));if(o.length>0)return this.renderSources(e,o)}return s}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){const t=AI(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}vC.prototype.dispose;class Wb extends Tl{constructor(e){const t=Object.assign({},e);super(t),this.styleVariables_=e.variables||{},this.style_=e.style,this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){return new GC(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}setStyle(e){this.style_=e,this.clearRenderer(),this.changed()}}class MC{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=hf,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Pe(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Pe(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return _t()}readFeature(e,t){return _t()}readFeatures(e,t){return _t()}readGeometry(e,t){return _t()}readProjection(e){return _t()}writeFeature(e,t){return _t()}writeFeatures(e,t){return _t()}writeGeometry(e,t){return _t()}}function na(i,e,t){const r=t?Pe(t.featureProjection):null,A=t?Pe(t.dataProjection):null;let n=i;if(r&&A&&!Tt(r,A)){e&&(n=i.clone());const s=e?r:A,o=e?A:r;s.getUnits()==="tile-pixels"?n.transform(s,o):n.applyTransform(rf(s,o))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),o=function(a){for(let g=0,l=a.length;g<l;++g)a[g]=Math.round(a[g]*s)/s;return a};n===i&&(n=i.clone()),n.applyTransform(o)}return n}const Xb={Point:tf,LineString:uf,Polygon:ef,MultiPoint:cf,MultiLineString:lf,MultiPolygon:gf};function eR(i,e,t){return Array.isArray(e[0])?(py(i,0,e,t)||(i=i.slice(),yy(i,0,e,t)),i):(my(i,0,e,t)||(i=i.slice(),Qy(i,0,e,t)),i)}function kC(i,e){var n;const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>kC({...i,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const A=t.layout.length;return na(new Sn(r,r==="Polygon"?eR(t.flatCoordinates,t.ends,A):t.flatCoordinates,(n=t.ends)==null?void 0:n.flat(),A,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function Gc(i,e){if(!i)return null;if(Array.isArray(i)){const r=i.map(A=>Gc(A,e));return new Ky(r)}const t=Xb[i.type];return na(new t(i.flatCoordinates,i.layout||"XY",i.ends),!1,e)}class tR extends MC{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Rs(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Rs(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return _t()}readFeaturesFromObject(e,t){return _t()}readGeometry(e,t){return this.readGeometryFromObject(Rs(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return _t()}readProjection(e){return this.readProjectionFromObject(Rs(e))}readProjectionFromObject(e){return _t()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return _t()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return _t()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return _t()}}function Rs(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}class Kg extends tR{constructor(e){e=e||{},super(),this.dataProjection=Pe(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Pe(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const A=vc(r.geometry);if(this.featureClass===Sn)return kC({geometry:A,id:r.id,properties:r.properties},t);const n=new hf;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&n.setGeometryName(r.geometry_name),n.setGeometry(Gc(A,t)),"id"in r&&n.setId(r.id),r.properties&&n.setProperties(r.properties,!0),n}readFeaturesFromObject(e,t){const r=e;let A=null;if(r.type==="FeatureCollection"){const n=e;A=[];const s=n.features;for(let o=0,a=s.length;o<a;++o){const g=this.readFeatureFromObject(s[o],t);g&&A.push(g)}}else A=[this.readFeatureFromObject(e,t)];return A.flat()}readGeometryFromObject(e,t){return rR(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Pe(t.properties.name);else if(t.type==="EPSG")r=Pe("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},A=e.getId();if(A!==void 0&&(r.id=A),!e.hasProperties())return r;const n=e.getProperties(),s=e.getGeometry();return s&&(r.geometry=Hg(s,t),delete n[e.getGeometryName()]),Zd(n)||(r.properties=n),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let A=0,n=e.length;A<n;++A)r.push(this.writeFeatureObject(e[A],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return Hg(e,this.adaptOptions(t))}}function vc(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=AR(i);break}case"LineString":{t=nR(i);break}case"Polygon":{t=gR(i);break}case"MultiPoint":{t=oR(i);break}case"MultiLineString":{t=sR(i);break}case"MultiPolygon":{t=aR(i);break}case"GeometryCollection":{t=iR(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function rR(i,e){const t=vc(i);return Gc(t,e)}function iR(i,e){return i.geometries.map(function(r){return vc(r)})}function AR(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:kA(e.length)}}function nR(i){var r;const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:kA(((r=e[0])==null?void 0:r.length)||2)}}function sR(i){var n,s;const e=i.coordinates,t=((s=(n=e[0])==null?void 0:n[0])==null?void 0:s.length)||2,r=[],A=Af(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:A,layout:kA(t)}}function oR(i){var t;const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:kA(((t=e[0])==null?void 0:t.length)||2)}}function aR(i){var n,s;const e=i.coordinates,t=[],r=((s=(n=e[0])==null?void 0:n[0])==null?void 0:s[0].length)||2,A=wy(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:A,layout:kA(r)}}function gR(i){var n,s;const e=i.coordinates,t=[],r=(s=(n=e[0])==null?void 0:n[0])==null?void 0:s.length,A=Af(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:A,layout:kA(r)}}function Hg(i,e){i=na(i,!0,e);const t=i.getType();let r;switch(t){case"Point":{r=dR(i);break}case"LineString":{r=cR(i);break}case"Polygon":{r=fR(i,e);break}case"MultiPoint":{r=hR(i);break}case"MultiLineString":{r=uR(i);break}case"MultiPolygon":{r=IR(i,e);break}case"GeometryCollection":{r=lR(i,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function lR(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(r){return Hg(r,e)})}}function cR(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function uR(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function hR(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function IR(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function dR(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function fR(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}function Mc(i,e){return PC(i,e,[]).join("")}function PC(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)t.push(i.nodeValue);else{let r;for(r=i.firstChild;r;r=r.nextSibling)PC(r,e,t)}return t}function CR(i){return"documentElement"in i}function ER(i){return new DOMParser().parseFromString(i,"application/xml")}function qg(i,e){return function(t,r){const A=i.call(this,t,r);A!==void 0&&r[r.length-1].push(A)}}function kt(i,e,t){return function(r,A){const n=i.call(this,r,A);if(n!==void 0){const s=A[A.length-1],o=r.localName;let a;o in s?a=s[o]:(a=[],s[o]=a),a.push(n)}}}function Z(i,e,t){return function(r,A){const n=i.call(this,r,A);if(n!==void 0){const s=A[A.length-1],o=r.localName;s[o]=n}}}function Fe(i,e,t){t=t!==void 0?t:{};let r,A;for(r=0,A=i.length;r<A;++r)t[i[r]]=e;return t}function BR(i,e,t,r){let A;for(A=e.firstElementChild;A;A=A.nextElementSibling){const n=i[A.namespaceURI];if(n!==void 0){const s=n[A.localName];s!==void 0&&s.call(r,A,t)}}}function Ue(i,e,t,r,A){return r.push(i),BR(e,t,r,A),r.pop()}class UC{read(e){if(!e)return null;if(typeof e=="string"){const t=ER(e);return this.readFromDocument(t)}return CR(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){_t()}}const pR="http://www.w3.org/1999/xlink";function kc(i){return i.getAttributeNS(pR,"href")}function yR(i){const e=Mc(i,!1);return mR(e)}function mR(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function oi(i){const e=Mc(i,!1);return QR(e)}function QR(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function Ee(i){return Mc(i,!1).trim()}const Kt=[null,"http://www.opengis.net/ows/1.1"],wR=Fe(Kt,{ServiceIdentification:Z(VR),ServiceProvider:Z(ZR),OperationsMetadata:Z(zR)});class _R extends UC{constructor(){super()}readFromNode(e){const t=Ue({},wR,e,[]);return t||null}}const SR=Fe(Kt,{DeliveryPoint:Z(Ee),City:Z(Ee),AdministrativeArea:Z(Ee),PostalCode:Z(Ee),Country:Z(Ee),ElectronicMailAddress:Z(Ee)}),bR=Fe(Kt,{Value:kt(WR)}),RR=Fe(Kt,{AllowedValues:Z(UR)}),DR=Fe(Kt,{Phone:Z(jR),Address:Z(PR)}),xR=Fe(Kt,{HTTP:Z(qR)}),TR=Fe(Kt,{Get:kt(HR),Post:void 0}),FR=Fe(Kt,{DCP:Z(KR)}),LR=Fe(Kt,{Operation:JR}),NR=Fe(Kt,{Voice:Z(Ee),Facsimile:Z(Ee)}),GR=Fe(Kt,{Constraint:kt(OR)}),vR=Fe(Kt,{IndividualName:Z(Ee),PositionName:Z(Ee),ContactInfo:Z(YR)}),MR=Fe(Kt,{Abstract:Z(Ee),AccessConstraints:Z(Ee),Fees:Z(Ee),Title:Z(Ee),ServiceTypeVersion:Z(Ee),ServiceType:Z(Ee)}),kR=Fe(Kt,{ProviderName:Z(Ee),ProviderSite:Z(kc),ServiceContact:Z($R)});function PR(i,e){return Ue({},SR,i,e)}function UR(i,e){return Ue({},bR,i,e)}function OR(i,e){const t=i.getAttribute("name");if(t)return Ue({name:t},RR,i,e)}function YR(i,e){return Ue({},DR,i,e)}function KR(i,e){return Ue({},xR,i,e)}function HR(i,e){const t=kc(i);if(t)return Ue({href:t},GR,i,e)}function qR(i,e){return Ue({},TR,i,e)}function JR(i,e){const t=i.getAttribute("name"),r=Ue({},FR,i,e);if(!r)return;const A=e[e.length-1];A[t]=r}function zR(i,e){return Ue({},LR,i,e)}function jR(i,e){return Ue({},NR,i,e)}function VR(i,e){return Ue({},MR,i,e)}function $R(i,e){return Ue({},vR,i,e)}function ZR(i,e){return Ue({},kR,i,e)}function WR(i,e){return Ee(i)}const Gr=[null,"http://www.opengis.net/wmts/1.0"],qA=[null,"http://www.opengis.net/ows/1.1"],XR=Fe(Gr,{Contents:Z(lD)});let eD=class extends UC{constructor(){super(),this.owsParser_=new _R}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=Ue(r,XR,e,[]),r||null):null}};const tD=Fe(Gr,{Layer:kt(cD),TileMatrixSet:kt(uD)}),rD=Fe(Gr,{Style:kt(hD),Format:kt(Ee),TileMatrixSetLink:kt(ID),Dimension:kt(dD),ResourceURL:kt(fD)},Fe(qA,{Title:Z(Ee),Abstract:Z(Ee),WGS84BoundingBox:Z(YC),BoundingBox:kt(CD),Identifier:Z(Ee)})),iD=Fe(Gr,{LegendURL:kt(ED)},Fe(qA,{Title:Z(Ee),Identifier:Z(Ee)})),AD=Fe(Gr,{TileMatrixSet:Z(Ee),TileMatrixSetLimits:Z(pD)}),nD=Fe(Gr,{TileMatrixLimits:qg(yD)}),sD=Fe(Gr,{TileMatrix:Z(Ee),MinTileRow:Z(oi),MaxTileRow:Z(oi),MinTileCol:Z(oi),MaxTileCol:Z(oi)}),oD=Fe(Gr,{Default:Z(Ee),Value:kt(Ee)},Fe(qA,{Identifier:Z(Ee)})),OC=Fe(qA,{LowerCorner:qg(Jg),UpperCorner:qg(Jg)}),aD=Fe(Gr,{WellKnownScaleSet:Z(Ee),TileMatrix:kt(BD)},Fe(qA,{SupportedCRS:Z(Ee),Identifier:Z(Ee),BoundingBox:Z(YC)})),gD=Fe(Gr,{TopLeftCorner:Z(Jg),ScaleDenominator:Z(yR),TileWidth:Z(oi),TileHeight:Z(oi),MatrixWidth:Z(oi),MatrixHeight:Z(oi)},Fe(qA,{Identifier:Z(Ee)}));function lD(i,e){return Ue({},tD,i,e)}function cD(i,e){return Ue({},rD,i,e)}function uD(i,e){return Ue({},aD,i,e)}function hD(i,e){const t=Ue({},iD,i,e);if(!t)return;const r=i.getAttribute("isDefault")==="true";return t.isDefault=r,t}function ID(i,e){return Ue({},AD,i,e)}function dD(i,e){return Ue({},oD,i,e)}function fD(i,e){const t=i.getAttribute("format"),r=i.getAttribute("template"),A=i.getAttribute("resourceType"),n={};return t&&(n.format=t),r&&(n.template=r),A&&(n.resourceType=A),n}function YC(i,e){const t=Ue([],OC,i,e);if(t.length==2)return Hl(t)}function CD(i,e){const t=i.getAttribute("crs"),r=Ue([],OC,i,e);if(r.length==2)return{extent:Hl(r),crs:t}}function ED(i,e){const t={};return t.format=i.getAttribute("format"),t.href=kc(i),t}function Jg(i,e){const t=Ee(i).split(/\s+/);if(!t||t.length!=2)return;const r=+t[0],A=+t[1];if(!(isNaN(r)||isNaN(A)))return[r,A]}function BD(i,e){return Ue({},gD,i,e)}function pD(i,e){return Ue([],nD,i,e)}function yD(i,e){return Ue({},sD,i,e)}const mD={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},nI={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class QD extends Wy{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Ao(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,r,A,n,s,o,a){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,A,n,s,o,a)}getTile(e,t,r,A){const n=this.getOrCreateTile(e,t,r,A);if(!n)return null;const s=A.viewState,o=s.resolution,a=A.viewHints,g=this.getLayer().getSource(),l=g.getTileGridForProjection(s.projection),c=!(a[ri.ANIMATING]||a[ri.INTERACTING]),u=l.getZForResolution(o,g.zDirection)===e;return c&&u?n.wantedResolution=o:n.wantedResolution||(n.wantedResolution=l.getResolution(e)),n}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const A=this.getLayer(),n=A.getRevision(),s=A.getRenderOrder()||null,o=e.wantedResolution,a=e.getReplayState(A);if(!a.dirty&&a.renderedResolution===o&&a.renderedRevision==n&&a.renderedPixelRatio===t&&a.renderedRenderOrder==s)return;const g=A.getSource(),l=!!A.getDeclutter(),c=g.getTileGrid(),I=g.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),h=g.getSourceTiles(t,r,e),d=sr(A);delete e.hitDetectionImageData[d],e.executorGroups[d]=[],a.dirty=!1;for(let f=0,C=h.length;f<C;++f){const E=h[f];if(E.getState()!=Re.LOADED)continue;const B=g.getProjection(),m=E.tileCoord;let p=c.getTileCoordExtent(m);r&&B&&!Tt(r,B)&&(p=xi(p,B,r,32));const y=es(I,p),Q=Di(y,A.getRenderBuffer()*o,this.tempExtent),_=ro(p,y)?null:Q,w=new Hy(0,y,o,t),S=jy(o,t),R=function(N,v){let z;const q=N.getStyleFunction()||A.getStyleFunction();if(q&&(z=q(N,o)),z){const $=this.renderFeature(N,S,z,w,l,v);a.dirty=a.dirty||$}},F=E.getFeatures();s&&s!==a.renderedRenderOrder&&F.sort(s);for(let N=0,v=F.length;N<v;++N){let z=F[N];r&&E.projection&&!Tt(r,E.projection)&&(z=z.clone(),z.getGeometry().applyTransform(rf(E.projection,r))),(!_||Pr(_,z.getGeometry().getExtent()))&&R.call(this,z,N)}const M=w.finish(),G=A.getRenderMode()!=="vector"&&l&&h.length===1?null:y,x=new qy(G,o,t,g.getOverlaps(),M,A.getRenderBuffer(),!0);e.executorGroups[d].push(x)}a.renderedRevision=n,a.renderedPixelRatio=t,a.renderedRenderOrder=s,a.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,A,n){var B,m;const s=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(t.viewState.projection),c=Hl([e]);Di(c,s*r,c);const u={},I=function(p,y,Q){let _=p.getId();_===void 0&&(_=sr(p));const w=u[_];if(w){if(w!==!0&&Q<w.distanceSq){if(Q===0)return u[_]=!0,n.splice(n.lastIndexOf(w),1),A(p,a,y);w.geometry=y,w.distanceSq=Q}}else{if(Q===0)return u[_]=!0,A(p,a,y);n.push(u[_]={feature:p,layer:a,geometry:y,distanceSq:Q,callback:A})}},h=this.renderedTiles,d=sr(a),f=a.getDeclutter(),C=f?(m=(B=t.declutter)==null?void 0:B[f])==null?void 0:m.all().map(p=>p.value):null;let E;e:for(let p=0,y=h.length;p<y;++p){const Q=h[p],_=l.getTileCoordExtent(Q.wrappedTileCoord);if(!Pr(_,c))continue;const w=Q.executorGroups[d];for(let S=0,R=w.length;S<R;++S)if(E=w[S].forEachFeatureAtCoordinate(e,s,o,r,I,C),E)break e}return E}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const A=this.getLayer(),n=A.getSource(),s=this.renderedProjection,o=s.getExtent(),a=this.renderedResolution,g=n.getTileGridForProjection(s),l=Yl(this.renderedPixelToCoordinateTransform_,e.slice()),c=g.getTileCoordForCoordAndResolution(l,a).toString(),u=this.renderedTiles.find(B=>B.tileCoord.toString()===c&&B.getState()===Re.LOADED);if(!u||u.loadingSourceTiles>0){t([]);return}n.getWrapX()&&s.canWrapX()&&!_n(o,g.getTileCoordExtent(u.tileCoord))&&_y(l,s);const I=sr(A),h=g.getTileCoordExtent(u.wrappedTileCoord),d=nf(h),f=[(l[0]-d[0])/a,(d[1]-l[1])/a],C=u.getSourceTiles().reduce((B,m)=>B.concat(m.getFeatures()),[]);let E=u.hitDetectionImageData[I];if(!E){const B=$d(g.getTileSize(g.getZForResolution(a,n.zDirection))),m=this.renderedRotation_,p=[this.getRenderTransform(g.getTileCoordCenter(u.wrappedTileCoord),a,0,Ma,B[0]*Ma,B[1]*Ma,0)];E=Jy(B,p,C,A.getStyleFunction(),g.getTileCoordExtent(u.wrappedTileCoord),u.getReplayState(A).renderedResolution,m),u.hitDetectionImageData[I]=E}t(zy(f,C,E))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const n=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=n.getZForResolution(this.renderedResolution),o={};return r.forEach(a=>{if(a.tileCoord[0]!==s||a.getState()!==Re.LOADED)return;const g=a.getSourceTiles();for(let l=0,c=g.length;l<c;++l){const u=g[l],I=u.getKey();if(I in o)continue;o[I]=!0;const h=u.tileCoord;if(Pr(e,n.getTileCoordExtent(h))){const d=u.getFeatures();if(d)for(let f=0,C=d.length;f<C;++f){const E=d[f],B=E.getGeometry();Pr(e,B.getExtent())&&t.push(E)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var u;const r=this.context,A=r.globalAlpha;r.globalAlpha=t.opacity;const n=e.viewHints,s=!(n[ri.ANIMATING]||n[ri.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],a=this.getLayer().getDeclutter(),g=a?(u=e.declutter)==null?void 0:u[a]:void 0,l=sr(this.getLayer()),c=this.renderedTiles;for(let I=0,h=c.length;I<h;++I){const d=c[I],f=d.executorGroups[l];if(f)for(let C=f.length-1;C>=0;--C)f[C].execute(this.context,o,this.getTileRenderTransform(d,e),e.viewState.rotation,s,lh,g)}r.globalAlpha=A}renderDeferredInternal(e){const t=this.renderedTiles,r=sr(this.getLayer()),A=t.reduce((a,g,l)=>(g.executorGroups[r].forEach(c=>a.push({executorGroup:c,index:l})),a),[]),n=A.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,g=A.length;a<g;++a){const l=A[a].executorGroup.getDeferredZIndexContexts();for(const c in l)s[c]=!0}Object.keys(s).map(Number).sort(Sy).forEach(a=>{n.forEach((g,l)=>{g[a]&&(g[a].forEach(c=>{const{executorGroup:u,index:I}=A[l],h=u.getRenderedContext(),d=h.globalAlpha;h.globalAlpha=this.renderedOpacity_;const f=this.tileClipContexts_[I];f&&f.draw(h),c.draw(h),f&&h.restore(),h.globalAlpha=d,c.clear()}),g[a].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,A=t.viewState,n=A.center,s=A.resolution,o=A.rotation,a=t.size,g=Math.round(a[0]*r),l=Math.round(a[1]*r),u=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),I=e.tileCoord,h=u.getTileCoordExtent(e.wrappedTileCoord),d=u.getTileCoordExtent(I,this.tempExtent)[0]-h[0];return Sg(va(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(n,s,o,r,g,l,d))}postRender(e,t){var p;const r=t.viewHints,A=!(r[ri.ANIMATING]||r[ri.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const n=this.getLayer(),s=n.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const a=n.getDeclutter(),g=a?nI[s].filter(y=>!lh.includes(y)):nI[s],l=t.viewState,c=l.rotation,u=n.getSource(),h=u.getTileGridForProjection(l.projection).getZForResolution(l.resolution,u.zDirection),d=this.renderedTiles,f=[],C=[],E=[],B=sr(n);let m=!0;for(let y=d.length-1;y>=0;--y){const Q=d[y];m=m&&!Q.getReplayState(n).dirty;const _=Q.executorGroups[B].filter(x=>x.hasExecutors(g));if(_.length===0)continue;const w=this.getTileRenderTransform(Q,t),S=Q.tileCoord[0];let R=!1;const F=_[0].getClipCoords(w);let M=e,G;if(F){G=new Zy,M=G.getContext();for(let x=0,N=f.length;x<N;++x)if(h!==S&&S<C[x]){const v=f[x];Pr([F[0],F[3],F[4],F[7]],[v[0],v[3],v[4],v[7]])&&(R||(M.save(),R=!0),M.beginPath(),M.moveTo(F[0],F[1]),M.lineTo(F[2],F[3]),M.lineTo(F[4],F[5]),M.lineTo(F[6],F[7]),M.moveTo(v[6],v[7]),M.lineTo(v[4],v[5]),M.lineTo(v[2],v[3]),M.lineTo(v[0],v[1]),M.clip())}f.push(F),C.push(S)}for(let x=0,N=_.length;x<N;++x)_[x].execute(e,[e.canvas.width,e.canvas.height],w,c,A,g,(p=t.declutter)==null?void 0:p[a]);R&&(M===e?M.restore():E[y]=G)}e.globalAlpha=o,this.ready=m,this.tileClipContexts_=E,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,A,n,s){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let a=0,g=r.length;a<g;++a)o=ch(A,e,r[a],t,this.boundHandleStyleImageChange_,void 0,n,s)||o;else o=ch(A,e,r,t,this.boundHandleStyleImageChange_,void 0,n,s);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),A=t.getRevision(),n=e.wantedResolution;return r.renderedTileResolution!==n||r.renderedTileRevision!==A}renderTileImage_(e,t){const r=this.getLayer(),A=e.getReplayState(r),n=r.getRevision(),s=e.executorGroups[sr(r)];A.renderedTileRevision=n;const o=e.wrappedTileCoord,a=o[0],g=r.getSource();let l=t.pixelRatio;const u=t.viewState.projection,I=g.getTileGridForProjection(u),h=I.getResolution(e.tileCoord[0]),d=t.pixelRatio/e.wantedResolution*h,f=I.getResolution(a),C=e.getContext();l=Math.round(Math.max(l,d/l));const E=g.getTilePixelSize(a,l,u);C.canvas.width=E[0],C.canvas.height=E[1];const B=l/d;if(B!==1){const Q=sh(this.tmpTransform_);va(Q,B,B),C.setTransform.apply(C,Q)}const m=I.getTileCoordExtent(o,this.tempExtent),p=d/f,y=sh(this.tmpTransform_);va(y,p,-p),by(y,-m[0],-m[3]);for(let Q=0,_=s.length;Q<_;++Q)s[Q].execute(C,[C.canvas.width*B,C.canvas.height*B],y,0,!0,mD[r.getRenderMode()],null);A.renderedTileResolution=e.wantedResolution}}class CA extends Ry{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const A=e.renderMode||"hybrid";Dy(A=="hybrid"||A=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=A,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new QD(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Bs.PRELOAD)}getUseInterimTilesOnError(){return this.get(Bs.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Bs.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Bs.USE_INTERIM_TILES_ON_ERROR,e)}}class Pc extends MC{constructor(e){super(),e=e||{},this.dataProjection=new sf({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Sn,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,A){e.pos=t.geometry;const n=e.readVarint()+e.pos;let s=1,o=0,a=0,g=0,l=0,c=0;for(;e.pos<n;){if(!o){const u=e.readVarint();s=u&7,o=u>>3}if(o--,s===1||s===2)a+=e.readSVarint(),g+=e.readSVarint(),s===1&&l>c&&(A.push(l),c=l),r.push(a,g),l+=2;else if(s===7)l>c&&(r.push(r[c],r[c+1]),l+=2);else throw new Error("Invalid command found in the PBF")}l>c&&(A.push(l),c=l)}createFeature_(e,t,r){const A=t.type;if(A===0)return null;let n;const s=t.properties;let o;this.idProperty_?(o=s[this.idProperty_],delete s[this.idProperty_]):o=t.id,s[this.layerName_]=t.layer.name;const a=[],g=[];this.readRawGeometry_(e,t,a,g);const l=RD(A,g.length);if(this.featureClass===Sn)n=new this.featureClass(l,a,g,2,s,o),n.transform(r.dataProjection);else{let c;if(l=="Polygon"){const h=xy(a,g);c=h.length>1?new gf(a,"XY",h):new ef(a,"XY",g)}else c=l==="Point"?new tf(a,"XY"):l==="LineString"?new uf(a,"XY"):l==="MultiPoint"?new cf(a,"XY"):l==="MultiLineString"?new lf(a,"XY",g):null;const u=this.featureClass;n=new u,this.geometryName_&&n.setGeometryName(this.geometryName_);const I=na(c,!1,r);n.setGeometry(I),o!==void 0&&n.setId(o),n.setProperties(s,!0)}return n}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const A=Pe(t.dataProjection);A.setWorldExtent(t.extent),t.dataProjection=A;const n=new cp(e),s=n.readFields(wD,{}),o=[];for(const a in s){if(r&&!r.includes(a))continue;const g=s[a],l=g?[0,0,g.extent,g.extent]:null;A.setExtent(l);for(let c=0,u=g.length;c<u;++c){const I=bD(n,g,c),h=this.createFeature_(n,I,t);h!==null&&o.push(h)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function wD(i,e,t){if(i===3){const r={keys:[],values:[],features:[]},A=t.readVarint()+t.pos;t.readFields(_D,r,A),r.length=r.features.length,r.length&&(e[r.name]=r)}}function _D(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let r=null;const A=t.readVarint()+t.pos;for(;t.pos<A;)i=t.readVarint()>>3,r=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(r)}}function SD(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const A=e.layer.keys[t.readVarint()],n=e.layer.values[t.readVarint()];e.properties[A]=n}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function bD(i,e,t){i.pos=e.features[t];const r=i.readVarint()+i.pos,A={layer:e,type:0,properties:{}};return i.readFields(SD,A,r),A}function RD(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}var jt=Uint8Array,cA=Uint16Array,DD=Int32Array,KC=new jt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HC=new jt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xD=new jt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qC=function(i,e){for(var t=new cA(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];for(var A=new DD(t[30]),r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)A[n]=n-t[r]<<5|r;return{b:t,r:A}},JC=qC(KC,2),zC=JC.b,TD=JC.r;zC[28]=258,TD[258]=28;var FD=qC(HC,0),LD=FD.b,zg=new cA(32768);for(var Ke=0;Ke<32768;++Ke){var Wr=(Ke&43690)>>1|(Ke&21845)<<1;Wr=(Wr&52428)>>2|(Wr&13107)<<2,Wr=(Wr&61680)>>4|(Wr&3855)<<4,zg[Ke]=((Wr&65280)>>8|(Wr&255)<<8)>>1}var dn=function(i,e,t){for(var r=i.length,A=0,n=new cA(e);A<r;++A)i[A]&&++n[i[A]-1];var s=new cA(e);for(A=1;A<e;++A)s[A]=s[A-1]+n[A-1]<<1;var o;if(t){o=new cA(1<<e);var a=15-e;for(A=0;A<r;++A)if(i[A])for(var g=A<<4|i[A],l=e-i[A],c=s[i[A]-1]++<<l,u=c|(1<<l)-1;c<=u;++c)o[zg[c]>>a]=g}else for(o=new cA(r),A=0;A<r;++A)i[A]&&(o[A]=zg[s[i[A]-1]++]>>15-i[A]);return o},gs=new jt(288);for(var Ke=0;Ke<144;++Ke)gs[Ke]=8;for(var Ke=144;Ke<256;++Ke)gs[Ke]=9;for(var Ke=256;Ke<280;++Ke)gs[Ke]=7;for(var Ke=280;Ke<288;++Ke)gs[Ke]=8;var jC=new jt(32);for(var Ke=0;Ke<32;++Ke)jC[Ke]=5;var ND=dn(gs,9,1),GD=dn(jC,5,1),za=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},cr=function(i,e,t){var r=e/8|0;return(i[r]|i[r+1]<<8)>>(e&7)&t},ja=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},vD=function(i){return(i+7)/8|0},MD=function(i,e,t){return(t==null||t>i.length)&&(t=i.length),new jt(i.subarray(e,t))},kD=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Jt=function(i,e,t){var r=new Error(e||kD[i]);if(r.code=i,Error.captureStackTrace&&Error.captureStackTrace(r,Jt),!t)throw r;return r},Uc=function(i,e,t,r){var A=i.length,n=0;if(!A||e.f&&!e.l)return t||new jt(0);var s=!t,o=s||e.i!=2,a=e.i;s&&(t=new jt(A*3));var g=function(Nt){var bt=t.length;if(Nt>bt){var Gt=new jt(Math.max(bt*2,Nt));Gt.set(t),t=Gt}},l=e.f||0,c=e.p||0,u=e.b||0,I=e.l,h=e.d,d=e.m,f=e.n,C=A*8;do{if(!I){l=cr(i,c,1);var E=cr(i,c+1,3);if(c+=3,E)if(E==1)I=ND,h=GD,d=9,f=5;else if(E==2){var y=cr(i,c,31)+257,Q=cr(i,c+10,15)+4,_=y+cr(i,c+5,31)+1;c+=14;for(var w=new jt(_),S=new jt(19),R=0;R<Q;++R)S[xD[R]]=cr(i,c+R*3,7);c+=Q*3;for(var F=za(S),M=(1<<F)-1,G=dn(S,F,1),R=0;R<_;){var x=G[cr(i,c,M)];c+=x&15;var B=x>>4;if(B<16)w[R++]=B;else{var N=0,v=0;for(B==16?(v=3+cr(i,c,3),c+=2,N=w[R-1]):B==17?(v=3+cr(i,c,7),c+=3):B==18&&(v=11+cr(i,c,127),c+=7);v--;)w[R++]=N}}var z=w.subarray(0,y),q=w.subarray(y);d=za(z),f=za(q),I=dn(z,d,1),h=dn(q,f,1)}else Jt(1);else{var B=vD(c)+4,m=i[B-4]|i[B-3]<<8,p=B+m;if(p>A){a&&Jt(0);break}o&&g(u+m),t.set(i.subarray(B,p),u),e.b=u+=m,e.p=c=p*8,e.f=l;continue}if(c>C){a&&Jt(0);break}}o&&g(u+131072);for(var $=(1<<d)-1,re=(1<<f)-1,Qe=c;;Qe=c){var N=I[ja(i,c)&$],te=N>>4;if(c+=N&15,c>C){a&&Jt(0);break}if(N||Jt(2),te<256)t[u++]=te;else if(te==256){Qe=c,I=null;break}else{var P=te-254;if(te>264){var R=te-257,Me=KC[R];P=cr(i,c,(1<<Me)-1)+zC[R],c+=Me}var Le=h[ja(i,c)&re],fe=Le>>4;Le||Jt(3),c+=Le&15;var q=LD[fe];if(fe>3){var Me=HC[fe];q+=ja(i,c)&(1<<Me)-1,c+=Me}if(c>C){a&&Jt(0);break}o&&g(u+131072);var Ze=u+P;if(u<q){var Oe=n-q,tt=Math.min(q,Ze);for(Oe+u<0&&Jt(3);u<tt;++u)t[u]=r[Oe+u]}for(;u<Ze;++u)t[u]=t[u-q]}}e.l=I,e.p=Qe,e.b=u,e.f=l,I&&(l=1,e.m=d,e.d=h,e.n=f)}while(!l);return u!=t.length&&s?MD(t,0,u):t.subarray(0,u)},PD=new jt(0),UD=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&Jt(6,"invalid gzip data");var e=i[3],t=10;e&4&&(t+=(i[10]|i[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!i[t++]);return t+(e&2)},OD=function(i){var e=i.length;return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0},YD=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&Jt(6,"invalid zlib data"),(i[1]>>5&1)==1&&Jt(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function KD(i,e){return Uc(i,{i:2},e,e)}function HD(i,e){var t=UD(i);return t+8>i.length&&Jt(6,"invalid gzip data"),Uc(i.subarray(t,-8),{i:2},new jt(OD(i)),e)}function qD(i,e){return Uc(i.subarray(YD(i),-4),{i:2},e,e)}function JD(i,e){return i[0]==31&&i[1]==139&&i[2]==8?HD(i,e):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?KD(i,e):qD(i,e)}var zD=typeof TextDecoder<"u"&&new TextDecoder,jD=0;try{zD.decode(PD,{stream:!0}),jD=1}catch{}var VD=Object.defineProperty,$D=Math.pow,ve=(i,e)=>VD(i,"name",{value:e,configurable:!0}),ut=(i,e,t)=>new Promise((r,A)=>{var n=a=>{try{o(t.next(a))}catch(g){A(g)}},s=a=>{try{o(t.throw(a))}catch(g){A(g)}},o=a=>a.done?r(a.value):Promise.resolve(a.value).then(n,s);o((t=t.apply(i,e)).next())});ve((i,e)=>{let t=!1,r="",A=L.GridLayer.extend({createTile:ve((n,s)=>{let o=document.createElement("img"),a=new AbortController,g=a.signal;return o.cancel=()=>{a.abort()},t||(i.getHeader().then(l=>{l.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):l.tileType===2?r="image/png":l.tileType===3?r="image/jpeg":l.tileType===4?r="image/webp":l.tileType===5&&(r="image/avif")}),t=!0),i.getZxy(n.z,n.x,n.y,g).then(l=>{if(l){let c=new Blob([l.data],{type:r}),u=window.URL.createObjectURL(c);o.src=u}else o.style.display="none";o.cancel=void 0,s(void 0,o)}).catch(l=>{if(l.name!=="AbortError")throw l}),o},"createTile"),_removeTile:ve(function(n){let s=this._tiles[n];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[n],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(n)}))},"_removeTile")});return new A(e)},"leafletRasterLayer");var ZD=ve(i=>(e,t)=>{if(t instanceof AbortController)return i(e,t);let r=new AbortController;return i(e,r).then(A=>t(void 0,A.data,A.cacheControl||"",A.expires||""),A=>t(A)).catch(A=>t(A)),{cancel:ve(()=>r.abort(),"cancel")}},"v3compat"),WD=class{constructor(e){this.tilev4=ve((t,r)=>ut(this,null,function*(){if(t.type==="json"){let I=t.url.substr(10),h=this.tiles.get(I);if(h||(h=new Rn(I),this.tiles.set(I,h)),this.metadata){let f=yield h.getTileJson(t.url);return r.signal.throwIfAborted(),{data:f}}let d=yield h.getHeader();return r.signal.throwIfAborted(),(d.minLon>=d.maxLon||d.minLat>=d.maxLat)&&console.error(`Bounds of PMTiles archive ${d.minLon},${d.minLat},${d.maxLon},${d.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:d.minZoom,maxzoom:d.maxZoom,bounds:[d.minLon,d.minLat,d.maxLon,d.maxLat]}}}let A=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),n=t.url.match(A);if(!n)throw new Error("Invalid PMTiles protocol URL");let s=n[1],o=this.tiles.get(s);o||(o=new Rn(s),this.tiles.set(s,o));let a=n[2],g=n[3],l=n[4],c=yield o.getHeader(),u=yield o==null?void 0:o.getZxy(+a,+g,+l,r.signal);if(r.signal.throwIfAborted(),u)return{data:new Uint8Array(u.data),cacheControl:u.cacheControl,expires:u.expires};if(c.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=ZD(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ve(WD,"Protocol");function VC(i,e){return(e>>>0)*4294967296+(i>>>0)}ve(VC,"toNum");function $C(i,e){let t=e.buf,r=t[e.pos++],A=(r&112)>>4;if(r<128||(r=t[e.pos++],A|=(r&127)<<3,r<128)||(r=t[e.pos++],A|=(r&127)<<10,r<128)||(r=t[e.pos++],A|=(r&127)<<17,r<128)||(r=t[e.pos++],A|=(r&127)<<24,r<128)||(r=t[e.pos++],A|=(r&1)<<31,r<128))return VC(i,A);throw new Error("Expected varint not more than 10 bytes")}ve($C,"readVarintRemainder");function AA(i){let e=i.buf,t=e[i.pos++],r=t&127;return t<128||(t=e[i.pos++],r|=(t&127)<<7,t<128)||(t=e[i.pos++],r|=(t&127)<<14,t<128)||(t=e[i.pos++],r|=(t&127)<<21,t<128)?r:(t=e[i.pos],r|=(t&15)<<28,$C(r,i))}ve(AA,"readVarint");function Oc(i,e,t,r,A){return A===0?r!==0?[i-1-t,i-1-e]:[t,e]:[e,t]}ve(Oc,"rotate");function ZC(i,e,t){if(i>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>=1<<i||t>=1<<i)throw new Error("tile x/y outside zoom level bounds");let r=((1<<i)*(1<<i)-1)/3,A=i-1,[n,s]=[e,t];for(let o=1<<A;o>0;o>>=1){let a=n&o,g=s&o;r+=(3*a^g)*(1<<A),[n,s]=Oc(o,n,s,a,g),A--}return r}ve(ZC,"zxyToTileId");function WC(i){let e=3*i+1;return e<4294967296?31-Math.clz32(e):63-Math.clz32(e/4294967296)}ve(WC,"tileIdToZ");function XD(i){let e=WC(i)>>1;if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let t=((1<<e)*(1<<e)-1)/3,r=i-t,A=0,n=0,s=1<<e;for(let o=1;o<s;o<<=1){let a=o&r/2,g=o&(r^a);[A,n]=Oc(o,A,n,a,g),r=r/2,A+=a,n+=g}return[e,A,n]}ve(XD,"tileIdToZxy");var ex=(i=>(i[i.Unknown=0]="Unknown",i[i.None=1]="None",i[i.Gzip=2]="Gzip",i[i.Brotli=3]="Brotli",i[i.Zstd=4]="Zstd",i))(ex||{});function sa(i,e){return ut(this,null,function*(){if(e===1||e===0)return i;if(e===2){if(typeof globalThis.DecompressionStream>"u")return JD(new Uint8Array(i));let t=new Response(i).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}ve(sa,"defaultDecompress");var nA=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(nA||{});function XC(i){return i===1?".mvt":i===2?".png":i===3?".jpg":i===4?".webp":i===5?".avif":""}ve(XC,"tileTypeExt");var tx=127;function eE(i,e){let t=0,r=i.length-1;for(;t<=r;){let A=r+t>>1,n=e-i[A].tileId;if(n>0)t=A+1;else if(n<0)r=A-1;else return i[A]}return r>=0&&(i[r].runLength===0||e-i[r].tileId<i[r].runLength)?i[r]:null}ve(eE,"findTile");var rx=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return ut(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};ve(rx,"FileSource");var tE=class{constructor(e,t=new Headers){var r,A;this.url=e,this.customHeaders=t,this.mustReload=!1;let n="";"navigator"in globalThis&&(n=(A=(r=globalThis.navigator)==null?void 0:r.userAgent)!=null?A:"");let s=n.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(n);this.chromeWindowsNoCache=!1,s&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,A){return ut(this,null,function*(){let n,s;r?s=r:(n=new AbortController,s=n.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let a;this.mustReload?a="reload":this.chromeWindowsNoCache&&(a="no-store");let g=yield fetch(this.url,{signal:s,cache:a,headers:o});if(e===0&&g.status===416){let u=g.headers.get("Content-Range");if(!u||!u.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let I=+u.substr(8);g=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${I-1}`}})}let l=g.headers.get("Etag");if(l!=null&&l.startsWith("W/")&&(l=null),g.status===416||A&&l&&l!==A)throw this.mustReload=!0,new jg(`Server returned non-matching ETag ${A} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(g.status>=300)throw new Error(`Bad response code: ${g.status}`);let c=g.headers.get("Content-Length");if(g.status===200&&(!c||+c>t))throw n&&n.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield g.arrayBuffer(),etag:l||void 0,cacheControl:g.headers.get("Cache-Control")||void 0,expires:g.headers.get("Expires")||void 0}})}};ve(tE,"FetchSource");var ix=tE;function Ar(i,e){let t=i.getUint32(e+4,!0),r=i.getUint32(e+0,!0);return t*$D(2,32)+r}ve(Ar,"getUint64");function rE(i,e){let t=new DataView(i),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Ar(t,8),rootDirectoryLength:Ar(t,16),jsonMetadataOffset:Ar(t,24),jsonMetadataLength:Ar(t,32),leafDirectoryOffset:Ar(t,40),leafDirectoryLength:Ar(t,48),tileDataOffset:Ar(t,56),tileDataLength:Ar(t,64),numAddressedTiles:Ar(t,72),numTileEntries:Ar(t,80),numTileContents:Ar(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}ve(rE,"bytesToHeader");function Yc(i){let e={buf:new Uint8Array(i),pos:0},t=AA(e),r=[],A=0;for(let n=0;n<t;n++){let s=AA(e);r.push({tileId:A+s,offset:0,length:0,runLength:1}),A+=s}for(let n=0;n<t;n++)r[n].runLength=AA(e);for(let n=0;n<t;n++)r[n].length=AA(e);for(let n=0;n<t;n++){let s=AA(e);s===0&&n>0?r[n].offset=r[n-1].offset+r[n-1].length:r[n].offset=s-1}return r}ve(Yc,"deserializeIndex");var iE=class extends Error{};ve(iE,"EtagMismatch");var jg=iE;function Kc(i,e){return ut(this,null,function*(){let t=yield i.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,tx),A=rE(r,t.etag),n=t.data.slice(A.rootDirectoryOffset,A.rootDirectoryOffset+A.rootDirectoryLength),s=`${i.getKey()}|${A.etag||""}|${A.rootDirectoryOffset}|${A.rootDirectoryLength}`,o=Yc(yield e(n,A.internalCompression));return[A,[s,o.length,o]]})}ve(Kc,"getHeaderAndRoot");function Hc(i,e,t,r,A){return ut(this,null,function*(){let n=yield i.getBytes(t,r,void 0,A.etag),s=yield e(n.data,A.internalCompression),o=Yc(s);if(o.length===0)throw new Error("Empty directory is invalid");return o})}ve(Hc,"getDirectory");var Ax=class{constructor(e=100,t=!0,r=sa){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return ut(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let A=yield Kc(e,this.decompress);return A[1]&&this.cache.set(A[1][0],{lastUsed:this.counter++,data:A[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:A[0]}),this.prune(),A[0]})}getDirectory(e,t,r,A){return ut(this,null,function*(){let n=`${e.getKey()}|${A.etag||""}|${t}|${r}`,s=this.cache.get(n);if(s)return s.lastUsed=this.counter++,s.data;let o=yield Hc(e,this.decompress,t,r,A);return this.cache.set(n,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,A)=>{r.lastUsed<e&&(e=r.lastUsed,t=A)}),t&&this.cache.delete(t)}}invalidate(e){return ut(this,null,function*(){this.cache.delete(e.getKey())})}};ve(Ax,"ResolvedValueCache");var AE=class{constructor(e=100,t=!0,r=sa){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return ut(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let A=new Promise((n,s)=>{Kc(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),n(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:A}),A})}getDirectory(e,t,r,A){return ut(this,null,function*(){let n=`${e.getKey()}|${A.etag||""}|${t}|${r}`,s=this.cache.get(n);if(s)return s.lastUsed=this.counter++,yield s.data;let o=new Promise((a,g)=>{Hc(e,this.decompress,t,r,A).then(l=>{a(l),this.prune()}).catch(l=>{g(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,A)=>{r.lastUsed<e&&(e=r.lastUsed,t=A)}),t&&this.cache.delete(t)}}invalidate(e){return ut(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((A,n)=>{this.getHeader(e).then(s=>{A(),this.invalidations.delete(t)}).catch(s=>{n(s)})});this.invalidations.set(t,r)})}};ve(AE,"SharedPromiseCache");var nx=AE,nE=class{constructor(e,t,r){typeof e=="string"?this.source=new ix(e):this.source=e,r?this.decompress=r:this.decompress=sa,t?this.cache=t:this.cache=new nx}getHeader(){return ut(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,A){return ut(this,null,function*(){let n=ZC(e,t,r),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let g=0;g<=3;g++){let l=yield this.cache.getDirectory(this.source,o,a,s),c=eE(l,n);if(c){if(c.runLength>0){let u=yield this.source.getBytes(s.tileDataOffset+c.offset,c.length,A,s.etag);return{data:yield this.decompress(u.data,s.tileCompression),cacheControl:u.cacheControl,expires:u.expires}}o=s.leafDirectoryOffset+c.offset,a=c.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,A){return ut(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,A)}catch(n){if(n instanceof jg)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,A);throw n}})}getMetadataAttempt(){return ut(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),A=new TextDecoder("utf-8");return JSON.parse(A.decode(r))})}getMetadata(){return ut(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof jg)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return ut(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),A=XC(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${A}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};ve(nE,"PMTiles");var Rn=nE,sE=Object.defineProperty,sI=Object.getOwnPropertySymbols,sx=Object.prototype.hasOwnProperty,ox=Object.prototype.propertyIsEnumerable,oI=(i,e,t)=>e in i?sE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Eo=(i,e)=>{for(var t in e||(e={}))sx.call(e,t)&&oI(i,t,e[t]);if(sI)for(var t of sI(e))ox.call(e,t)&&oI(i,t,e[t]);return i},oa=(i,e)=>sE(i,"name",{value:e,configurable:!0}),ax=(i,e,t)=>new Promise((r,A)=>{var n=a=>{try{o(t.next(a))}catch(g){A(g)}},s=a=>{try{o(t.throw(a))}catch(g){A(g)}},o=a=>a.done?r(a.value):Promise.resolve(a.value).then(n,s);o((t=t.apply(i,e)).next())}),oE=class extends If{constructor(e){super(Eo(Eo({},e),{state:"loading"})),this.loadImage=oa(r=>new Promise((A,n)=>{const s=new Image;s.addEventListener("load",()=>A(s)),s.addEventListener("error",()=>n(new Error("load failed"))),s.src=r}),"loadImage");const t=new Rn(e.url);t.getHeader().then(r=>{const A=e.projection===void 0?"EPSG:3857":e.projection;this.tileGrid=e.tileGrid||ts({extent:Jo(A),maxResolution:e.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,tileSize:e.tileSize}),this.setLoader((n,s,o)=>ax(this,null,function*(){const a=yield t.getZxy(n,s,o);if(!a)return new Uint8Array;const g=URL.createObjectURL(new Blob([a.data])),l=yield this.loadImage(g);return URL.revokeObjectURL(g),l})),this.setState("ready")})}};oa(oE,"PMTilesRasterSource");var aI=oE,aE=class extends is{constructor(e){super(Eo(Eo({},e),{state:"loading",url:"pmtiles://{z}/{x}/{y}",format:e.format||new Pc})),this.tileLoadFunction=oa((t,r)=>{const A=t,n=new RegExp(/pmtiles:\/\/(\d+)\/(\d+)\/(\d+)/),s=r.match(n);if(!(s&&s.length>=4))throw Error("Could not parse tile URL");const o=+s[1],a=+s[2],g=+s[3];A.setLoader((l,c,u)=>{this.pmtiles_.getZxy(o,a,g).then(I=>{if(I){const h=A.getFormat();A.setFeatures(h.readFeatures(I.data,{extent:l,featureProjection:u})),A.setState(Re.LOADED)}else A.setFeatures([]),A.setState(Re.EMPTY)}).catch(I=>{A.setFeatures([]),A.setState(Re.ERROR)})})},"tileLoadFunction"),this.pmtiles_=new Rn(e.url),this.pmtiles_.getHeader().then(t=>{const r=e.projection||"EPSG:3857",A=e.extent||Jo(r);this.tileGrid=e.tileGrid||ts({extent:A,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:e.tileSize||512}),this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}};oa(aE,"PMTilesVectorSource");var gx=aE;class lx extends Ul{constructor(e){super(Ui.ERROR),this.error=e}}const cx="https://stac-extensions.github.io/label/v1.*/schema.json",gE=new gA({color:"rgba(0,0,0,0)"});function lE(i,e,t="rgba(255,255,255,0.4)",r=5){let A=gE;t&&(A=new gA({color:t}));const n=new sn({color:i,width:e});return new _i({image:new of({fill:A,stroke:n,radius:r}),fill:A,stroke:n})}const ux=lE("#3399CC",3),gI=lE("#ff9933",2,null);function hx(i,e){const t={url:i.getAbsoluteUrl()};let r=i,A=i.getBands();A.length===1&&(r=A[0],A=[]);const{minimum:n,maximum:s}=r.getMinMaxValues();if(typeof n=="number"&&(t.min=n),typeof s=="number"&&(t.max=s),typeof t.min!="number"&&typeof t.max!="number"&&A.length>1)for(const a of A){const{minimum:g,maximum:l}=a.getMinMaxValues();typeof g=="number"&&(typeof t.min>"u"||g<t.min)&&(t.min=g),typeof l=="number"&&(typeof t.max>"u"||l>t.max)&&(t.max=l)}const o=r.getNoDataValues();if(o.length>0)t.nodata=o[0];else if(A.length>1){let a;for(const g of A){const l=g.getNoDataValues();if(l.length>0){if(typeof a>"u")a=l[0];else if(a!==l[0]){a=void 0;break}}}typeof a<"u"&&(t.nodata=a)}if(e.length>0)t.bands=e;else{const a=i.findVisualBands();a&&(t.bands=[a.red.getIndex()+1,a.green.getIndex()+1,a.blue.getIndex()+1])}return t}async function Ix(i){try{const{fromProjectionCode:e,fromEPSGCode:t}=await At(async()=>{const{fromProjectionCode:r,fromEPSGCode:A}=await import("./proj4.DQNLM3fS.js");return{fromProjectionCode:r,fromEPSGCode:A}},__vite__mapDeps([22,12,11]));return typeof e=="function"?await e(i):await t(i)}catch{return null}}async function lI(i,e=void 0){return void 0||e}function cI(i,e){const t=i.clone();return e.hasOnlyBounds()||t.setFill(gE),t}function dx(i){let e=i.href;if(e.includes("{s}"))if(Array.isArray(i["href:servers"])&&i["href:servers"].length>0){const t=Math.random()*i["href:servers"].length|0;e=e.replace("{s}",i["href:servers"][t])}else return null;return e}function uI(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"}function fx(i){return((i.fileDirectory.NewSubfileType||0)&4)===4}function Cx(i,e){if(!i)return!1;if(i===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,r=vt;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}const hI="STATISTICS_MAXIMUM",II="STATISTICS_MINIMUM",Va=256;let $a;function Ex(){return $a||($a=new uQ),$a}function Bx(i){try{return i.getBoundingBox(!0)}catch{return[0,0,i.getWidth(),i.getHeight()]}}function px(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function yx(i,e){try{return i.getResolution(e)}catch{return[e.getWidth()/i.getWidth(),e.getHeight()/i.getHeight()]}}async function dI(i,e,t,r){const A=i[e];if(A&&A!==32767){const n="EPSG:"+A;let s=Pe(n);if(!s&&r&&(s=await Ix(n)),!s){const o=Gy(i[t]);o&&(s=new sf({code:n,units:o}))}return s||null}}async function mx(i,e){const t=i.geoKeys;if(!t)return null;const r=await dI(t,"ProjectedCSTypeGeoKey","ProjLinearUnitsGeoKey",e);return r||await dI(t,"GeographicTypeGeoKey","GeogAngularUnitsGeoKey",e)}function Qx(i){return i.getImageCount().then(function(e){const t=new Array(e);for(let r=0;r<e;++r)t[r]=i.getImage(r);return Promise.all(t)})}function wx(i,e){let t;return i.blob?t=MQ(i.blob):i.overviews?t=kQ(i.url,i.overviews,e):t=vQ(i.url,e),t.then(Qx)}function on(i,e,t,r,A){if(Array.isArray(i)){const n=i.length;if(!Array.isArray(e)||n!=e.length){const s=new Error(r);throw A(s),s}for(let s=0;s<n;++s)on(i[s],e[s],t,r,A);return}if(e=e,Math.abs(i-e)>t*i)throw new Error(r)}function _x(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function Sx(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}let cE=class extends If{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.loadMissingProjection_=e.loadMissingProjection||!1,this.setKey(this.sourceInfo_.map(n=>n.url).join(","));const r=this,A=new Array(t);for(let n=0;n<t;++n)A[n]=wx(this.sourceInfo_[n],this.sourceOptions_);Promise.all(A).then(function(n){return r.configure_(n)}).catch(function(n){oh(n),r.error_=n,r.setState("error")})}getError(){return this.error_}async determineProjection(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const A=t[r],n=await mx(A,this.loadMissingProjection_);if(n){this.projection=n;break}}}determineTransformMatrix(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const n=t[r].fileDirectory.ModelTransformation;if(n){const[s,o,a,g,l,c,u,I]=n,h=Sg(Sg([1/Math.sqrt(s*s+l*l),0,0,-1/Math.sqrt(o*o+c*c),g,I],[s,l,o,c,0,0]),[1,0,0,1,-g,-I]);this.transformMatrix=h,this.addAlpha_=!0;break}}}async configure_(e){let t,r,A,n,s;const o=new Array(e.length),a=new Array(e.length),g=new Array(e.length);let l=0;const c=e.length;for(let f=0;f<c;++f){const C=[],E=[];e[f].forEach(w=>{fx(w)?E.push(w):C.push(w)});const B=C.length;if(E.length>0&&E.length!==B)throw new Error(`Expected one mask per image found ${E.length} masks and ${B} images`);let m,p;const y=new Array(B),Q=new Array(B),_=new Array(B);a[f]=new Array(B),g[f]=new Array(B);for(let w=0;w<B;++w){const S=C[w],R=S.getGDALNoData();g[f][w]=S.getGDALMetadata(0),a[f][w]=R;const F=this.sourceInfo_[f].bands;o[f]=F?F.length:S.getSamplesPerPixel();const M=B-(w+1);m||(m=Bx(S)),p||(p=px(S));const G=yx(S,C[0]);_[M]=G[0];const x=[S.getTileWidth(),S.getTileHeight()];x[0]!==x[1]&&x[1]<Va&&(x[0]=Va,x[1]=Va),y[M]=x;const N=G[0]/Math.abs(G[1]);Q[M]=[x[0],x[1]/N]}if(t?es(t,m,t):t=m,!r)r=p;else{const w=`Origin mismatch for source ${f}, got [${p}] but expected [${r}]`;on(r,p,0,w,this.viewRejector)}if(!s)s=_,this.resolutionFactors_[f]=1;else{s.length-l>_.length&&(l=s.length-_.length);const w=s[s.length-1]/_[_.length-1];this.resolutionFactors_[f]=w;const S=_.map(F=>F*=w),R=`Resolution mismatch for source ${f}, got [${S}] but expected [${s}]`;on(s.slice(l,s.length),S,.02,R,this.viewRejector)}A?on(A.slice(l,A.length),Q,.01,`Tile size mismatch for source ${f}`,this.viewRejector):A=Q,n?on(n.slice(l,n.length),y,0,`Tile size mismatch for source ${f}`,this.viewRejector):n=y,this.sourceImagery_[f]=C.reverse(),this.sourceMasks_[f]=E.reverse()}for(let f=0,C=this.sourceImagery_.length;f<C;++f){const E=this.sourceImagery_[f];for(;E.length<s.length;)E.unshift(void 0)}this.getProjection()||await this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=o,this.nodataValues_=a,this.metadata_=g;e:for(let f=0;f<c;++f){if(this.sourceInfo_[f].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[f].length){this.addAlpha_=!0;break}const C=a[f],E=this.sourceInfo_[f].bands;if(E){for(let B=0;B<E.length;++B)if(C[E[B]-1]!==null){this.addAlpha_=!0;break e}continue}for(let B=0;B<C.length;++B)if(C[B]!==null){this.addAlpha_=!0;break e}}let u=this.addAlpha_?1:0;for(let f=0;f<c;++f)u+=o[f];this.bandCount=u;const I=new Ol({extent:t,minZoom:l,origin:r,resolutions:s,tileSizes:A});this.tileGrid=I,this.setTileSizes(n),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const h=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let d=t;if(this.transformMatrix){const f=Ty(Ao(),this.transformMatrix.slice()),C=vy(E=>Yl(f,E));d=Xd(t,C)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:Ly(MA(d),this.projection),extent:Fy(d,this.projection),zoom:h})}loadTile_(e,t,r,A){const n=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(s*2),a=this.nodataValues_,g=this.sourceInfo_,l=Ex();for(let c=0;c<s;++c){const u=g[c],I=this.resolutionFactors_[c],h=[Math.round(t*(n[0]*I)),Math.round(r*(n[1]*I)),Math.round((t+1)*(n[0]*I)),Math.round((r+1)*(n[1]*I))],d=this.sourceImagery_[c][e];let f;u.bands&&(f=u.bands.map(function(p){return p-1}));let C;"nodata"in u&&u.nodata!==null?C=u.nodata:f?C=f.map(function(p){return a[c][p]}):C=a[c];const E={window:h,width:n[0],height:n[1],samples:f,fillValue:C,pool:l,interleave:!1,signal:A.signal};Cx(this.convertToRGB_,d)?o[c]=d.readRGB(E):o[c]=d.readRasters(E);const B=s+c,m=this.sourceMasks_[c][e];if(!m){o[B]=Promise.resolve(null);continue}o[B]=m.readRasters({window:h,width:n[0],height:n[1],samples:[0],pool:l,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch(function(c){throw oh(c),c})}composeTile_(e,t){const r=this.metadata_,A=this.sourceInfo_,n=this.sourceImagery_.length,s=this.bandCount,o=this.samplesPerPixel_,a=this.nodataValues_,g=this.normalize_,l=this.addAlpha_,c=e[0]*e[1],u=c*s;let I;g?I=new Uint8Array(u):I=new Float32Array(u);let h=0;for(let d=0;d<c;++d){let f=l;for(let C=0;C<n;++C){const E=A[C];let B=E.min,m=E.max,p,y;if(g){const Q=r[C][0];B===void 0&&(Q&&II in Q?B=parseFloat(Q[II]):B=_x(t[C][0])),m===void 0&&(Q&&hI in Q?m=parseFloat(Q[hI]):m=Sx(t[C][0])),p=255/(m-B),y=-B*p}for(let Q=0;Q<o[C];++Q){const _=t[C][Q][d];let w;if(g?w=Ny(p*_+y,0,255):w=_,!l)I[h]=w;else{let S=E.nodata;if(S===void 0){let F;E.bands?F=E.bands[Q]-1:F=Q,S=a[C][F]}const R=isNaN(S);(!R&&_!==S||R&&!isNaN(_))&&(f=!1,I[h]=w)}h++}if(!f){const Q=n+C,_=t[Q];_&&!_[0][d]&&(f=!0)}}l&&(f||(I[h]=255),h++)}return I}};cE.prototype.getView;class Ye{constructor(e){this.name=e}toString(){return this.name}}Ye.GeoTIFF=new Ye("GeoTIFF");Ye.ImageStatic=new Ye("ImageStatic");Ye.PMTilesRaster=new Ye("PMTilesRaster");Ye.PMTilesVector=new Ye("PMTilesVector");Ye.TileJSON=new Ye("TileJSON");Ye.TileWMS=new Ye("TileWMS");Ye.WMTS=new Ye("WMTS");Ye.XYZ=new Ye("XYZ");class qc extends af{constructor(e){const t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.children_=null,this.childrenOptions_=e.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||ux,this.collectionStyle_=e.collectionStyle||gI,this.boundsLayer_=null,this.disableMigration_=e.disableMigration||!1,this.map_=null,this.eventQueue_=[],e.httpRequestFn&&(this.fetch_=e.httpRequestFn),e.data){try{this.configure_(e.data,e.url,e.children,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");this.fetch_(e.url).then(r=>this.configure_(r,e.url,e.children,e.assets,e.bands)).catch(r=>this.handleError_(r))}async fetch_(e,t="json"){const r=await fetch(e);if(!r.ok)throw new Error(`Unexpected response from ${e}: ${r.status}`);return t==="json"?await r.json():t==="text"?await r.text():null}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var e;if(this.getLayers().getLength()>1)return!1;const r=(e=this.getData())===null||e===void 0?void 0:e.getBoundingBox();return!r||Pl(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(e){this.dispatch_(new lx(e))}configure_(e,t=null,r=null,A=null,n=[]){let s;e instanceof ps||e instanceof XA?s=e:(s=ms(e,!this.disableMigration_),t&&t.includes("://")&&s.setAbsoluteUrl(t)),this.set("stac",s),this.bands_=n,this.boundsLayer_=this.addFootprint_();const o=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(cI(this.boundsStyle_,this))};this.getLayers().on("add",o),this.getLayers().on("remove",o);const a=l=>this.handleError_(l),g=[];r&&g.push(this.setChildren(r,null,!1).catch(a)),A&&g.push(this.setAssets(A,!1).catch(a)),Promise.all(g).then(()=>this.updateLayers().catch(a)),this.dispatch_("sourceready")}dispatch_(e){this.eventQueue_.push(e),this.flush_()}flush_(){if(this.map_){for(const e of this.eventQueue_)this.dispatchEvent(e);this.eventQueue_=[]}}setMap_(e){this.map_!==e&&(this.map_=e,this.flush_())}async addChildren_(e,t={}){const r=e.map(A=>{const n={data:A,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},s=new qc(Object.assign(n,t));return s.on("sourceready",()=>{s.map_&&this.setMap_(s.map_)}),this.addLayer_(s,null),s});return await Promise.all(r)}async addPreviewImage_(e){const t=await lI(e,"EPSG:4326"),r=e.getContext().getBoundingBoxes();if(r.length!==1)return;const A=r[0];let n={url:e.getAbsoluteUrl(),projection:t,imageExtent:xi(A,"EPSG:4326",t),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(n=await this.getSourceOptions_(Ye.ImageStatic,n,e));const s=new Zo({source:new HQ(n)});return this.addLayer_(s,e),s}async addLayerForLink(e){const t=dx(e);if(!t)return;const r={attributions:e.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},A=async(s,o)=>(this.getSourceOptions_&&(o=await this.getSourceOptions_(s,o,e)),o),n=[];switch(e.rel){case"pmtiles":const o=await new Rn(r.url).getHeader();let a;switch(o.tileType){case nA.Mvt:a=new gx(await A(Ye.PMTilesVector,r));break;case nA.Avif:case nA.Jpeg:case nA.Png:case nA.Webp:a=new aI(await A(Ye.PMTilesRaster,r));break;default:return}n.push(a);break;case"tilejson":n.push(new lc(await A(Ye.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const c in e["wms:layers"]){const u=e["wms:layers"][c]||"";let I="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][c]=="string"&&(I=e["wms:styles"][c]);const h=Object.assign({LAYERS:u,STYLES:I},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(h.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(h.FORMAT=e.type);const d=await A(Ye.TileWMS,Object.assign({},r,{params:h}));n.push(new r0(d))}break;case"wmts":const g=await this.getWmtsCapabilities_(t,e["wmts:encoding"]);if(!g)return;let l=[];Array.isArray(e["wmts:layer"])?l=e["wmts:layer"]:typeof e["wmts:layer"]=="string"&&(l=[e["wmts:layer"]]);for(const c of l){let u=Object.assign({},r,{layer:c,requestEncoding:e["wmts:encoding"]==="rest"?"REST":"KVP"});typeof e.type=="string"&&e.type.startsWith("image/")&&(u.format=e.type),u=await A(Ye.WMTS,u);const I=A0(g,u);if(I!==null){if(typeof e.uriTemplate=="string"){let h=e.uriTemplate;const d=ka(e.variables)?e.variables:{};for(const f in d){const C=d[f];let E;if(uI(C.const)?E=C.const:uI(C.default)?E=C.default:Array.isArray(C.enum)&&C.enum.length>0&&(E=C.enum[0]),typeof E<"u")h=h.replaceAll(`{${f}}`,String(E));else continue}delete I.urls,I.url=h}n.push(new i0(I))}}break;case"xyz":n.push(new ah(await A(Ye.XYZ,r)));break;default:return}return n.map(s=>{let o;return s instanceof is?o=new CA({source:s,declutter:!0}):s instanceof aI?o=new uh({source:s}):o=new oo({source:s}),this.addLayer_(o,e),o})}async addGeoTiff_(e){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let r={sources:[hx(e,this.bands_)],convertToRGB:"auto",loadMissingProjection:!0};const A=await lI();A&&(r.projection=A),this.getSourceOptions_&&(r=await this.getSourceOptions_(Ye.GeoTIFF,r,e));const n=new cE(r),s=new Promise((o,a)=>{n.on("error",a),n.on("change",()=>{n.getState()==="error"?a(n.getError()):o()})});try{await s;const o=new uh({source:n});return this.addLayer_(o,e),o}catch(o){if(this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);this.handleError_(o)}}async addTileLayerForImagery_(e){let t=this.buildTileUrlTemplate_(e);t instanceof Promise&&(t=await t);let r={crossOrigin:this.crossOrigin_,url:t};this.getSourceOptions_&&(r=await this.getSourceOptions_(Ye.XYZ,r,e));const A=new oo({source:new ah(r)});return this.addLayer_(A,e),A}addLayer_(e,t=null,r=0){t&&e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null;const t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=Am(t.getBoundingBox()):e=t.toGeoJSON(),e){const r=this.createGeoJsonLayer_(e,cI(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,t,1),r}return null}async addGeoJson_(e){try{const t=await this.fetch_(e.getAbsoluteUrl()),r=this.createGeoJsonLayer_(t);return this.addLayer_(r,e),r}catch(t){this.handleError_(t)}}createGeoJsonLayer_(e,t=null,r=!0){const A=new Kg,n=new un({format:A,loader:(s,o,a)=>{e=nm(e);const g=A.readFeatures(e,{featureProjection:a});n.addFeatures(g)}});return t||(t=gI),new jo({source:n,style:t,visible:r})}async addLabelExtension_(){const e=this.getData();if(!(e instanceof ao))return;let t=e.getAssetsWithRoles(["labels","labels-vector"],!0),r;t.length>1&&(r=t.find(n=>n.roles.includes("labels-vector"))),r||(r=e.getAsset("vector_labels")),r||(t=e.getAssets().filter(n=>n.type===hh&&!n.roles),t.length===1&&(r=t[0]));const A=e.getLinksWithRels(["source"]);if(r&&A.length>0){const n=A.map(async o=>{try{const a=await this.fetch_(o.getAbsoluteUrl());return ms(a)}catch(a){return this.handleError_(a),null}}),s=(await Promise.all(n)).filter(o=>o instanceof XA);await this.addChildren_(s,{displayFootprint:!1})}try{await this.addGeoJson_(r)}catch(n){this.handleError_(n)}}async updateLayers(e=!0){const t=this.getLayers();for(let n=t.getLength()-1;n>=0;n--){const s=t.item(n);s.get("stac")&&!s.get("bounds")&&t.removeAt(n)}const r=this.getData();if(Array.isArray(this.displayWebMapLink_)){const n=this.getWebMapLinks().map(async s=>await this.addLayerForLink(s));await Promise.all(n)}this.children_&&await this.addChildren_(this.children_,this.childrenOptions_);const A=this.getAssets();if(A){const n=A.map(async s=>{if(s){if(s.type===hh)return await this.addGeoJson_(s);if(s.isGeoTIFF())return await this.addGeoTiff_(s);if(s.canBrowserDisplayImage())return await this.addPreviewImage_(s)}});await Promise.all(n)}if(this.hasOnlyBounds()){if(r instanceof cc)await this.addChildren_(r.getAll(),this.childrenOptions_);else if(r instanceof XA){if(r.isItem()&&r.supportsExtension(cx)&&r.getMetadata("label:type")==="vector"){await this.addLabelExtension_(),e&&this.dispatch_("layersready");return}const n=this.getWebMapLinks();if(n.length>0)await this.addLayerForLink(n[0]);else{const s=r.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);let o;if(s&&this.displayOverview_&&(o=await this.addGeoTiff_(s)),this.displayPreview_&&(!s||!o)){const a=r.getThumbnails(!0,"overview");a.length>0&&await this.addPreviewImage_(a[0])}}}}e&&this.dispatch_("layersready")}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){const e=this.getData();if(e instanceof ps)return[];let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let r=e.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(A=>{if(typeof A=="string"){const n=r.find(s=>s.id===A);return n||null}return A}).filter(A=>!!A):r.sort((A,n)=>{const s=t.indexOf(A.rel),o=t.indexOf(n.rel);return s-o}),r}async setAssets(e,t=!0){if(e!==this.assets_){if(Array.isArray(e)){const r=this.getData();this.assets_=e.map(A=>r instanceof XA&&typeof A=="string"?r.getAsset(A):A instanceof ps?A:new ps(A))}else this.assets_=null;t&&await this.updateLayers()}}async setChildren(e,t=null,r=!0){e instanceof zf?this.children_=e.getAll():e instanceof Jf?this.children_=e.getAll():ka(e)&&e.type==="FeatureCollection"?this.children_=ms(e,!this.disableMigration_).getAll():Array.isArray(e)?this.children_=e.map(A=>A instanceof XA?A:ms(A,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.children_&&ka(t)&&(this.childrenOptions_=t),r&&await this.updateLayers()}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;const e=this.map_.getView();if(!e)return;let t;const r=this.getData();r&&(t=r.getBoundingBox());const A=this.getChildren();if(A){const n=A.map(s=>s.getBoundingBox());t=ql(n)}if(t)return xi(t,"EPSG:4326",e.getProjection())}getLayerState(){const e=super.getLayerState();return e.extent=void 0,e}getAttributions(){const e=[],t=this.getData();if(t){const r=t.getMetadata("attribution");r&&r.push(r)}return e}getSource(){return null}async getWmtsCapabilities_(e,t="kvp"){try{const r=new URL(e);t!=="rest"&&(r.searchParams.set("service","wmts"),r.searchParams.set("request","GetCapabilities"));const A=await this.fetch_(r.toString(),"text");return new eD().read(A)}catch{return null}}}var bx=8,Rx={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Dx={"*":{type:"source"}},xx=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Tx={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},Fx={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Lx={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Nx={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Gx={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},vx={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Mx={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},kx=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Px={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Ux={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Ox={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Yx={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Kx={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Hx={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},qx={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Jx={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},zx={type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},jx={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Vx={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},$x={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Zx={type:"array",value:"expression_name",minimum:1},Wx={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Xx={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},e1={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},t1={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},r1=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],i1={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},A1={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},n1={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},s1={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},o1={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},a1={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},g1={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},l1={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},c1={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},u1={"*":{type:"string"}},h1={type:"array",value:"interpolation_name",minimum:1},I1={type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}},d1={$version:bx,$root:Rx,sources:Dx,source:xx,source_vector:Tx,source_raster:Fx,source_raster_dem:Lx,source_geojson:Nx,source_video:Gx,source_image:vx,layer:Mx,layout:kx,layout_background:Px,layout_fill:Ux,layout_circle:Ox,layout_heatmap:Yx,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:Kx,layout_symbol:Hx,layout_raster:qx,layout_hillshade:Jx,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:zx,filter_operator:jx,geometry_type:Vx,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:$x,expression:Zx,light:Wx,sky:Xx,terrain:e1,projection:t1,paint:r1,paint_fill:i1,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:A1,paint_circle:n1,paint_heatmap:s1,paint_symbol:o1,paint_raster:a1,paint_hillshade:g1,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:l1,transition:c1,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:u1,interpolation:h1,interpolation_name:I1};const f1=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function C1(i,e){const t={};for(const r in i)r!=="ref"&&(t[r]=i[r]);return f1.forEach(r=>{r in e&&(t[r]=e[r])}),t}function uE(i){i=i.slice();const e=Object.create(null);for(let t=0;t<i.length;t++)e[i[t].id]=i[t];for(let t=0;t<i.length;t++)"ref"in i[t]&&(i[t]=C1(i[t],e[i[t].ref]));return i}class Sr extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Jc{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,A]of t)this.bindings[r]=A}concat(e){return new Jc(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const aa={kind:"null"},O={kind:"number"},le={kind:"string"},oe={kind:"boolean"},Dr={kind:"color"},ga={kind:"projectionDefinition"},Ti={kind:"object"},Ae={kind:"value"},E1={kind:"error"},la={kind:"collator"},ca={kind:"formatted"},ua={kind:"padding"},Dn={kind:"colorArray"},ha={kind:"numberArray"},ls={kind:"resolvedImage"},Ia={kind:"variableAnchorOffsetCollection"};function Vt(i,e){return{kind:"array",itemType:i,N:e}}function ze(i){if(i.kind==="array"){const e=ze(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const B1=[aa,O,le,oe,Dr,ga,ca,Ti,Vt(Ae),ua,ha,Dn,ls,Ia];function xn(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!xn(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const t of B1)if(!xn(t,e))return null}}return`Expected ${ze(i)} but found ${ze(e)} instead.`}function zc(i,e){return e.some(t=>t.kind===i.kind)}function Fi(i,e){return e.some(t=>t==="null"?i===null:t==="array"?Array.isArray(i):t==="object"?i&&!Array.isArray(i)&&typeof i=="object":t===typeof i)}function Xr(i,e){return i.kind==="array"&&e.kind==="array"?i.itemType.kind===e.itemType.kind&&typeof i.N=="number":i.kind===e.kind}const hE=.96422,IE=1,dE=.82521,fE=4/29,EA=6/29,CE=3*EA*EA,p1=EA*EA*EA,y1=Math.PI/180,m1=180/Math.PI;function EE(i){return i=i%360,i<0&&(i+=360),i}function BE([i,e,t,r]){i=Za(i),e=Za(e),t=Za(t);let A,n;const s=Wa((.2225045*i+.7168786*e+.0606169*t)/IE);i===e&&e===t?A=n=s:(A=Wa((.4360747*i+.3850649*e+.1430804*t)/hE),n=Wa((.0139322*i+.0971045*e+.7141733*t)/dE));const o=116*s-16;return[o<0?0:o,500*(A-s),200*(s-n),r]}function Za(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Wa(i){return i>p1?Math.pow(i,1/3):i/CE+fE}function pE([i,e,t,r]){let A=(i+16)/116,n=isNaN(e)?A:A+e/500,s=isNaN(t)?A:A-t/200;return A=IE*eg(A),n=hE*eg(n),s=dE*eg(s),[Xa(3.1338561*n-1.6168667*A-.4906146*s),Xa(-.9787684*n+1.9161415*A+.033454*s),Xa(.0719453*n-.2289914*A+1.4052427*s),r]}function Xa(i){return i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055,i<0?0:i>1?1:i}function eg(i){return i>EA?i*i*i:CE*(i-fE)}function Q1(i){const[e,t,r,A]=BE(i),n=Math.sqrt(t*t+r*r);return[Math.round(n*1e4)?EE(Math.atan2(r,t)*m1):NaN,n,e,A]}function w1([i,e,t,r]){return i=isNaN(i)?0:i*y1,pE([t,Math.cos(i)*e,Math.sin(i)*e,r])}function _1([i,e,t,r]){i=EE(i),e/=100,t/=100;function A(n){const s=(n+i/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(s-3,9-s,1))}return[A(0),A(8),A(4),r]}const S1=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function yE(i,e){return S1(i,e)?i[e]:void 0}function b1(i){if(i=i.toLowerCase().trim(),i==="transparent")return[0,0,0,0];const e=yE(R1,i);if(e){const[A,n,s]=e;return[A/255,n/255,s/255,1]}if(i.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(i)){const n=i.length<6?1:2;let s=1;return[Ds(i.slice(s,s+=n)),Ds(i.slice(s,s+=n)),Ds(i.slice(s,s+=n)),Ds(i.slice(s,s+n)||"ff")]}if(i.startsWith("rgb")){const A=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=i.match(A);if(n){const[s,o,a,g,l,c,u,I,h,d,f,C]=n,E=[g||" ",u||" ",d].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const B=[a,c,h].join(""),m=B==="%%%"?100:B===""?255:0;if(m){const p=[sA(+o/m,0,1),sA(+l/m,0,1),sA(+I/m,0,1),f?fI(+f,C):1];if(CI(p))return p}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=i.match(t);if(r){const[A,n,s,o,a,g,l,c,u]=r,I=[s||" ",a||" ",l].join("");if(I==="  "||I==="  /"||I===",,"||I===",,,"){const h=[+n,sA(+o,0,100),sA(+g,0,100),c?fI(+c,u):1];if(CI(h))return _1(h)}}}function Ds(i){return parseInt(i.padEnd(2,i),16)/255}function fI(i,e){return sA(e?i/100:i,0,1)}function sA(i,e,t){return Math.min(Math.max(e,i),t)}function CI(i){return!i.some(Number.isNaN)}const R1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Li(i,e,t){return i+t*(e-i)}function Tn(i,e,t){return i.map((r,A)=>Li(r,e[A],t))}class Te{constructor(e,t,r,A=1,n=!0){this.r=e,this.g=t,this.b=r,this.a=A,n||(this.r*=A,this.g*=A,this.b*=A,A||this.overwriteGetter("rgb",[e,t,r,A]))}static parse(e){if(e instanceof Te)return e;if(typeof e!="string")return;const t=b1(e);if(t)return new Te(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:A}=this,n=A||1/0;return this.overwriteGetter("rgb",[e/n,t/n,r/n,A])}get hcl(){return this.overwriteGetter("hcl",Q1(this.rgb))}get lab(){return this.overwriteGetter("lab",BE(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,A]=this.rgb;return`rgba(${[e,t,r].map(n=>Math.round(n*255)).join(",")},${A})`}static interpolate(e,t,r,A="rgb"){switch(A){case"rgb":{const[n,s,o,a]=Tn(e.rgb,t.rgb,r);return new Te(n,s,o,a,!1)}case"hcl":{const[n,s,o,a]=e.hcl,[g,l,c,u]=t.hcl;let I,h;if(!isNaN(n)&&!isNaN(g)){let B=g-n;g>n&&B>180?B-=360:g<n&&n-g>180&&(B+=360),I=n+r*B}else isNaN(n)?isNaN(g)?I=NaN:(I=g,(o===1||o===0)&&(h=l)):(I=n,(c===1||c===0)&&(h=s));const[d,f,C,E]=w1([I,h??Li(s,l,r),Li(o,c,r),Li(a,u,r)]);return new Te(d,f,C,E,!1)}case"lab":{const[n,s,o,a]=pE(Tn(e.lab,t.lab,r));return new Te(n,s,o,a,!1)}}}}Te.black=new Te(0,0,0,1);Te.white=new Te(1,1,1,1);Te.transparent=new Te(0,0,0,0);Te.red=new Te(1,0,0,1);class jc{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const D1=["bottom","center","top"];class Vg{constructor(e,t,r,A,n,s){this.text=e,this.image=t,this.scale=r,this.fontStack=A,this.textColor=n,this.verticalAlign=s}}class Hr{constructor(e){this.sections=e}static fromString(e){return new Hr([new Vg(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Hr?e:Hr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Ir{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ir)return e;if(typeof e=="number")return new Ir([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Ir(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Ir(Tn(e.values,t.values,r))}}class dr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof dr)return e;if(typeof e=="number")return new dr([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new dr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new dr(Tn(e.values,t.values,r))}}class Zt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Zt)return e;if(typeof e=="string"){const r=Te.parse(e);return r?new Zt([r]):void 0}if(!Array.isArray(e))return;const t=[];for(const r of e){if(typeof r!="string")return;const A=Te.parse(r);if(!A)return;t.push(A)}return new Zt(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r,A="rgb"){const n=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)n.push(Te.interpolate(e.values[s],t.values[s],r,A));return new Zt(n)}}class $e extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const x1=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class xr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof xr)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],A=e[t+1];if(typeof r!="string"||!x1.has(r)||!Array.isArray(A)||A.length!==2||typeof A[0]!="number"||typeof A[1]!="number")return}return new xr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const A=e.values,n=t.values;if(A.length!==n.length)throw new $e(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let o=0;o<A.length;o+=2){if(A[o]!==n[o])throw new $e(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${A[o]}, to[${o}]: ${n[o]}`);s.push(A[o]);const[a,g]=A[o+1],[l,c]=n[o+1];s.push([Li(a,l,r),Li(g,c,r)])}return new xr(s)}}class Ci{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ci({name:e,available:!1}):null}}class ur{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new ur(e,t,r)}static parse(e){if(e instanceof ur)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new ur(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new ur(e.from,e.to,e.transition);if(typeof e=="string")return new ur(e,e,1)}}function mE(i,e,t,r){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[i,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[i,e,t,r]:[i,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fn(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof ur||i instanceof Te||i instanceof jc||i instanceof Hr||i instanceof Ir||i instanceof dr||i instanceof Zt||i instanceof xr||i instanceof Ci)return!0;if(Array.isArray(i)){for(const e of i)if(!Fn(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!Fn(i[e]))return!1;return!0}else return!1}function st(i){if(i===null)return aa;if(typeof i=="string")return le;if(typeof i=="boolean")return oe;if(typeof i=="number")return O;if(i instanceof Te)return Dr;if(i instanceof ur)return ga;if(i instanceof jc)return la;if(i instanceof Hr)return ca;if(i instanceof Ir)return ua;if(i instanceof dr)return ha;if(i instanceof Zt)return Dn;if(i instanceof xr)return Ia;if(i instanceof Ci)return ls;if(Array.isArray(i)){const e=i.length;let t;for(const r of i){const A=st(r);if(!t)t=A;else{if(t===A)continue;t=Ae;break}}return Vt(t||Ae,e)}else return Ti}function fn(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof Te||i instanceof ur||i instanceof Hr||i instanceof Ir||i instanceof dr||i instanceof Zt||i instanceof xr||i instanceof Ci?i.toString():JSON.stringify(i)}class RA{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Fn(e[1]))return t.error("invalid value");const r=e[1];let A=st(r);const n=t.expectedType;return A.kind==="array"&&A.N===0&&n&&n.kind==="array"&&(typeof n.N!="number"||n.N===0)&&(A=n),new RA(A,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const xs={string:le,number:O,boolean:oe,object:Ti};class hr{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,A;const n=e[0];if(n==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in xs)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=xs[g],r++}else o=Ae;let a;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],r++}A=Vt(o,a)}else{if(!xs[n])throw new Error(`Types doesn't contain name = ${n}`);A=xs[n]}const s=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Ae);if(!o)return null;s.push(o)}return new hr(A,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(xn(this.type,st(r))){if(t===this.args.length-1)throw new $e(`Expected value to be of type ${ze(this.type)}, but found ${ze(st(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const EI={"to-boolean":oe,"to-color":Dr,"to-number":O,"to-string":le};class ai{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!EI[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const A=EI[r],n=[];for(let s=1;s<e.length;s++){const o=t.parse(e[s],s,Ae);if(!o)return null;n.push(o)}return new ai(A,n)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const A of this.args){if(t=A.evaluate(e),r=null,t instanceof Te)return t;if(typeof t=="string"){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=mE(t[0],t[1],t[2],t[3]),!r))return new Te(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new $e(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const A=Ir.parse(t);if(A)return A}throw new $e(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const r of this.args){t=r.evaluate(e);const A=dr.parse(t);if(A)return A}throw new $e(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const r of this.args){t=r.evaluate(e);const A=Zt.parse(t);if(A)return A}throw new $e(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const A=xr.parse(t);if(A)return A}throw new $e(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const A=Number(t);if(!isNaN(A))return A}throw new $e(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Hr.fromString(fn(this.args[0].evaluate(e)));case"resolvedImage":return Ci.fromString(fn(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return fn(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const T1=["Unknown","Point","LineString","Polygon"];class QE{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?T1[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Te.parse(e),this._parseColorCache.set(e,t)),t}}class da{constructor(e,t,r=[],A,n=new Jc,s=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=n,this.errors=s,this.expectedType=A,this._isConstant=t}parse(e,t,r,A,n={}){return t?this.concat(t,r,A)._parse(e,n):this._parse(e,n)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(A,n,s){return s==="assert"?new hr(n,[A]):s==="coerce"?new ai(n,[A]):A}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const A=e[0];if(typeof A!="string")return this.error(`Expression name must be a string, but found ${typeof A} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const n=this.registry[A];if(n){let s=n.parse(e,this);if(!s)return null;if(this.expectedType){const o=this.expectedType,a=s.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&a.kind==="value")s=r(s,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&["string","array"].includes(a.kind)||["color","formatted","resolvedImage"].includes(o.kind)&&["value","string"].includes(a.kind)||["padding","numberArray"].includes(o.kind)&&["value","number","array"].includes(a.kind)||o.kind==="colorArray"&&["value","string","array"].includes(a.kind)||o.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(a.kind))s=r(s,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,a))return null}if(!(s instanceof RA)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const o=new QE;try{s=new RA(s.type,s.evaluate(o))}catch(a){return this.error(a.message),null}}return s}return this.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const A=typeof e=="number"?this.path.concat(e):this.path,n=r?this.scope.concat(r):this.scope;return new da(this.registry,this._isConstant,A,t||null,n,this.errors)}error(e,...t){const r=`${this.key}${t.map(A=>`[${A}]`).join("")}`;this.errors.push(new Sr(r,e))}checkSubtype(e,t){const r=xn(e,t);return r&&this.error(r),r}}class fa{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let n=1;n<e.length-1;n+=2){const s=e[n];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,n);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=t.parse(e[n+1],n+1);if(!o)return null;r.push([s,o])}const A=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return A?new fa(r,A):null}outputDefined(){return this.result.outputDefined()}}class Ca{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Ca(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Vc{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,O),A=t.parse(e[2],2,Vt(t.expectedType||Ae));if(!r||!A)return null;const n=A.type;return new Vc(n.itemType,r,A)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new $e(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new $e(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new $e(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class $c{constructor(e,t){this.type=oe,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ae),A=t.parse(e[2],2,Ae);return!r||!A?null:zc(r.type,[oe,le,O,aa,Ae])?new $c(r,A):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ze(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Fi(t,["boolean","string","number","null"]))throw new $e(`Expected first argument to be of type boolean, string, number or null, but found ${ze(st(t))} instead.`);if(!Fi(r,["string","array"]))throw new $e(`Expected second argument to be of type array or string, but found ${ze(st(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Bo{constructor(e,t,r){this.type=O,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ae),A=t.parse(e[2],2,Ae);if(!r||!A)return null;if(!zc(r.type,[oe,le,O,aa,Ae]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ze(r.type)} instead`);if(e.length===4){const n=t.parse(e[3],3,O);return n?new Bo(r,A,n):null}else return new Bo(r,A)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Fi(t,["boolean","string","number","null"]))throw new $e(`Expected first argument to be of type boolean, string, number or null, but found ${ze(st(t))} instead.`);let A;if(this.fromIndex&&(A=this.fromIndex.evaluate(e)),Fi(r,["string"])){const n=r.indexOf(t,A);return n===-1?-1:[...r.slice(0,n)].length}else{if(Fi(r,["array"]))return r.indexOf(t,A);throw new $e(`Expected second argument to be of type array or string, but found ${ze(st(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Zc{constructor(e,t,r,A,n,s){this.inputType=e,this.type=t,this.input=r,this.cases=A,this.outputs=n,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,A;t.expectedType&&t.expectedType.kind!=="value"&&(A=t.expectedType);const n={},s=[];for(let g=2;g<e.length-1;g+=2){let l=e[g];const c=e[g+1];Array.isArray(l)||(l=[l]);const u=t.concat(g);if(l.length===0)return u.error("Expected at least one branch label.");for(const h of l){if(typeof h!="number"&&typeof h!="string")return u.error("Branch labels must be numbers or strings.");if(typeof h=="number"&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof h=="number"&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(!r)r=st(h);else if(u.checkSubtype(r,st(h)))return null;if(typeof n[String(h)]<"u")return u.error("Branch labels must be unique.");n[String(h)]=s.length}const I=t.parse(c,g,A);if(!I)return null;A=A||I.type,s.push(I)}const o=t.parse(e[1],1,Ae);if(!o)return null;const a=t.parse(e[e.length-1],e.length-1,A);return!a||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new Zc(r,A,o,n,s,a)}evaluate(e){const t=this.input.evaluate(e);return(st(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Wc{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const A=[];for(let s=1;s<e.length-1;s+=2){const o=t.parse(e[s],s,oe);if(!o)return null;const a=t.parse(e[s+1],s+1,r);if(!a)return null;A.push([o,a]),r=r||a.type}const n=t.parse(e[e.length-1],e.length-1,r);if(!n)return null;if(!r)throw new Error("Can't infer output type");return new Wc(r,A,n)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class po{constructor(e,t,r,A){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=A}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ae),A=t.parse(e[2],2,O);if(!r||!A)return null;if(!zc(r.type,[Vt(Ae),le,Ae]))return t.error(`Expected first argument to be of type array or string, but found ${ze(r.type)} instead`);if(e.length===4){const n=t.parse(e[3],3,O);return n?new po(r.type,r,A,n):null}else return new po(r.type,r,A)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let A;if(this.endIndex&&(A=this.endIndex.evaluate(e)),Fi(t,["string"]))return[...t].slice(r,A).join("");if(Fi(t,["array"]))return t.slice(r,A);throw new $e(`Expected first argument to be of type array or string, but found ${ze(st(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function wE(i,e){const t=i.length-1;let r=0,A=t,n=0,s,o;for(;r<=A;)if(n=Math.floor((r+A)/2),s=i[n],o=i[n+1],s<=e){if(n===t||e<o)return n;r=n+1}else if(s>e)A=n-1;else throw new $e("Input is not a number.");return 0}class Ea{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[A,n]of r)this.labels.push(A),this.outputs.push(n)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,O);if(!r)return null;const A=[];let n=null;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);for(let s=1;s<e.length;s+=2){const o=s===1?-1/0:e[s],a=e[s+1],g=s,l=s+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(A.length&&A[A.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const c=t.parse(a,l,n);if(!c)return null;n=n||c.type,A.push([o,c])}return new Ea(n,r,A)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const A=this.input.evaluate(e);if(A<=t[0])return r[0].evaluate(e);const n=t.length;if(A>=t[n-1])return r[n-1].evaluate(e);const s=wE(t,A);return r[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function F1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var tg,BI;function L1(){if(BI)return tg;BI=1,tg=i;function i(e,t,r,A){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(A-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=A}return i.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,A=0;A<8;A++){var n=this.sampleCurveX(r)-e;if(Math.abs(n)<t)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r=r-n/s}var o=0,a=1;for(r=e,A=0;A<20&&(n=this.sampleCurveX(r),!(Math.abs(n-e)<t));A++)e>n?o=r:a=r,r=(a-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},tg}var N1=L1(),G1=F1(N1);class Tr{constructor(e,t,r,A,n){this.type=e,this.operator=t,this.interpolation=r,this.input=A,this.labels=[],this.outputs=[];for(const[s,o]of n)this.labels.push(s),this.outputs.push(o)}static interpolationFactor(e,t,r,A){let n=0;if(e.name==="exponential")n=rg(t,e.base,r,A);else if(e.name==="linear")n=rg(t,1,r,A);else if(e.name==="cubic-bezier"){const s=e.controlPoints;n=new G1(s[0],s[1],s[2],s[3]).solve(rg(t,1,r,A))}return n}static parse(e,t){let[r,A,n,...s]=e;if(!Array.isArray(A)||A.length===0)return t.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){const g=A[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:g}}else if(A[0]==="cubic-bezier"){const g=A.slice(1);if(g.length!==4||g.some(l=>typeof l!="number"||l<0||l>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(A[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(n=t.parse(n,2,O),!n)return null;const o=[];let a=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&t.expectedType!=Dn?a=Dr:t.expectedType&&t.expectedType.kind!=="value"&&(a=t.expectedType);for(let g=0;g<s.length;g+=2){const l=s[g],c=s[g+1],u=g+3,I=g+4;if(typeof l!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(o.length&&o[o.length-1][0]>=l)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',u);const h=t.parse(c,I,a);if(!h)return null;a=a||h.type,o.push([l,h])}return!Xr(a,O)&&!Xr(a,ga)&&!Xr(a,Dr)&&!Xr(a,ua)&&!Xr(a,ha)&&!Xr(a,Dn)&&!Xr(a,Ia)&&!Xr(a,Vt(O))?t.error(`Type ${ze(a)} is not interpolatable.`):new Tr(a,r,A,n,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const A=this.input.evaluate(e);if(A<=t[0])return r[0].evaluate(e);const n=t.length;if(A>=t[n-1])return r[n-1].evaluate(e);const s=wE(t,A),o=t[s],a=t[s+1],g=Tr.interpolationFactor(this.interpolation,A,o,a),l=r[s].evaluate(e),c=r[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Li(l,c,g);case"color":return Te.interpolate(l,c,g);case"padding":return Ir.interpolate(l,c,g);case"colorArray":return Zt.interpolate(l,c,g);case"numberArray":return dr.interpolate(l,c,g);case"variableAnchorOffsetCollection":return xr.interpolate(l,c,g);case"array":return Tn(l,c,g);case"projectionDefinition":return ur.interpolate(l,c,g)}case"interpolate-hcl":switch(this.type.kind){case"color":return Te.interpolate(l,c,g,"hcl");case"colorArray":return Zt.interpolate(l,c,g,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Te.interpolate(l,c,g,"lab");case"colorArray":return Zt.interpolate(l,c,g,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function rg(i,e,t,r){const A=r-t,n=i-t;return A===0?0:e===1?n/A:(Math.pow(e,n)-1)/(Math.pow(e,A)-1)}class Ln{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const A=t.expectedType;A&&A.kind!=="value"&&(r=A);const n=[];for(const o of e.slice(1)){const a=t.parse(o,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!a)return null;r=r||a.type,n.push(a)}if(!r)throw new Error("No output type");return A&&n.some(o=>xn(A,o.type))?new Ln(Ae,n):new Ln(r,n)}evaluate(e){let t=null,r=0,A;for(const n of this.args)if(r++,t=n.evaluate(e),t&&t instanceof Ci&&!t.available&&(A||(A=t.name),t=null,r===this.args.length&&(t=A)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function pI(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function v1(i,e,t){return e===t}function M1(i,e,t){return e!==t}function k1(i,e,t){return e<t}function P1(i,e,t){return e>t}function U1(i,e,t){return e<=t}function O1(i,e,t){return e>=t}function _E(i,e,t,r){return r.compare(e,t)===0}function Y1(i,e,t,r){return!_E(i,e,t,r)}function K1(i,e,t,r){return r.compare(e,t)<0}function H1(i,e,t,r){return r.compare(e,t)>0}function q1(i,e,t,r){return r.compare(e,t)<=0}function J1(i,e,t,r){return r.compare(e,t)>=0}function JA(i,e,t){const r=i!=="=="&&i!=="!=";return class SE{constructor(n,s,o){this.type=oe,this.lhs=n,this.rhs=s,this.collator=o,this.hasUntypedArgument=n.type.kind==="value"||s.type.kind==="value"}static parse(n,s){if(n.length!==3&&n.length!==4)return s.error("Expected two or three arguments.");const o=n[0];let a=s.parse(n[1],1,Ae);if(!a)return null;if(!pI(o,a.type))return s.concat(1).error(`"${o}" comparisons are not supported for type '${ze(a.type)}'.`);let g=s.parse(n[2],2,Ae);if(!g)return null;if(!pI(o,g.type))return s.concat(2).error(`"${o}" comparisons are not supported for type '${ze(g.type)}'.`);if(a.type.kind!==g.type.kind&&a.type.kind!=="value"&&g.type.kind!=="value")return s.error(`Cannot compare types '${ze(a.type)}' and '${ze(g.type)}'.`);r&&(a.type.kind==="value"&&g.type.kind!=="value"?a=new hr(g.type,[a]):a.type.kind!=="value"&&g.type.kind==="value"&&(g=new hr(a.type,[g])));let l=null;if(n.length===4){if(a.type.kind!=="string"&&g.type.kind!=="string"&&a.type.kind!=="value"&&g.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(l=s.parse(n[3],3,la),!l)return null}return new SE(a,g,l)}evaluate(n){const s=this.lhs.evaluate(n),o=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const a=st(s),g=st(o);if(a.kind!==g.kind||!(a.kind==="string"||a.kind==="number"))throw new $e(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${a.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const a=st(s),g=st(o);if(a.kind!=="string"||g.kind!=="string")return e(n,s,o)}return this.collator?t(n,s,o,this.collator.evaluate(n)):e(n,s,o)}eachChild(n){n(this.lhs),n(this.rhs),this.collator&&n(this.collator)}outputDefined(){return!0}}}const z1=JA("==",v1,_E),j1=JA("!=",M1,Y1),V1=JA("<",k1,K1),$1=JA(">",P1,H1),Z1=JA("<=",U1,q1),W1=JA(">=",O1,J1);class Ba{constructor(e,t,r){this.type=la,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const A=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,oe);if(!A)return null;const n=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,oe);if(!n)return null;let s=null;return r.locale&&(s=t.parse(r.locale,1,le),!s)?null:new Ba(A,n,s)}evaluate(e){return new jc(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Xc{constructor(e,t,r,A,n){this.type=le,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=A,this.maxFractionDigits=n}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,O);if(!r)return null;const A=e[2];if(typeof A!="object"||Array.isArray(A))return t.error("NumberFormat options argument must be an object.");let n=null;if(A.locale&&(n=t.parse(A.locale,1,le),!n))return null;let s=null;if(A.currency&&(s=t.parse(A.currency,1,le),!s))return null;let o=null;if(A["min-fraction-digits"]&&(o=t.parse(A["min-fraction-digits"],1,O),!o))return null;let a=null;return A["max-fraction-digits"]&&(a=t.parse(A["max-fraction-digits"],1,O),!a)?null:new Xc(r,n,s,o,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class eu{constructor(e){this.type=ca,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const A=[];let n=!1;for(let s=1;s<=e.length-1;++s){const o=e[s];if(n&&typeof o=="object"&&!Array.isArray(o)){n=!1;let a=null;if(o["font-scale"]&&(a=t.parse(o["font-scale"],1,O),!a))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,Vt(le)),!g))return null;let l=null;if(o["text-color"]&&(l=t.parse(o["text-color"],1,Dr),!l))return null;let c=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!D1.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(c=t.parse(o["vertical-align"],1,le),!c)return null}const u=A[A.length-1];u.scale=a,u.font=g,u.textColor=l,u.verticalAlign=c}else{const a=t.parse(e[s],1,Ae);if(!a)return null;const g=a.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,A.push({content:a,scale:null,font:null,textColor:null,verticalAlign:null})}}return new eu(A)}evaluate(e){const t=r=>{const A=r.content.evaluate(e);return st(A)===ls?new Vg("",A,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new Vg(fn(A),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Hr(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class tu{constructor(e){this.type=ls,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,le);return r?new tu(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Ci.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class ru{constructor(e){this.type=O,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${ze(r.type)} instead.`):new ru(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new $e(`Expected value to be of type string or array, but found ${ze(st(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Fr=8192;function X1(i,e){const t=e2(i[0]),r=r2(i[1]),A=Math.pow(2,e.z);return[Math.round(t*A*Fr),Math.round(r*A*Fr)]}function iu(i,e){const t=Math.pow(2,e.z),r=(i[0]/Fr+e.x)/t,A=(i[1]/Fr+e.y)/t;return[t2(r),i2(A)]}function e2(i){return(180+i)/360}function t2(i){return i*360-180}function r2(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function i2(i){return 360/Math.PI*Math.atan(Math.exp((180-i*360)*Math.PI/180))-90}function cs(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function Nn(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function A2(i,e,t){return e[1]>i[1]!=t[1]>i[1]&&i[0]<(t[0]-e[0])*(i[1]-e[1])/(t[1]-e[1])+e[0]}function n2(i,e,t){const r=i[0]-e[0],A=i[1]-e[1],n=i[0]-t[0],s=i[1]-t[1];return r*s-n*A===0&&r*n<=0&&A*s<=0}function pa(i,e,t,r){const A=[e[0]-i[0],e[1]-i[1]],n=[r[0]-t[0],r[1]-t[1]];return g2(n,A)===0?!1:!!(yI(i,e,t,r)&&yI(t,r,i,e))}function s2(i,e,t){for(const r of t)for(let A=0;A<r.length-1;++A)if(pa(i,e,r[A],r[A+1]))return!0;return!1}function zA(i,e,t=!1){let r=!1;for(const A of e)for(let n=0;n<A.length-1;n++){if(n2(i,A[n],A[n+1]))return t;A2(i,A[n],A[n+1])&&(r=!r)}return r}function o2(i,e){for(const t of e)if(zA(i,t))return!0;return!1}function bE(i,e){for(const t of i)if(!zA(t,e))return!1;for(let t=0;t<i.length-1;++t)if(s2(i[t],i[t+1],e))return!1;return!0}function a2(i,e){for(const t of e)if(bE(i,t))return!0;return!1}function g2(i,e){return i[0]*e[1]-i[1]*e[0]}function yI(i,e,t,r){const A=i[0]-t[0],n=i[1]-t[1],s=e[0]-t[0],o=e[1]-t[1],a=r[0]-t[0],g=r[1]-t[1],l=A*g-a*n,c=s*g-a*o;return l>0&&c<0||l<0&&c>0}function Au(i,e,t){const r=[];for(let A=0;A<i.length;A++){const n=[];for(let s=0;s<i[A].length;s++){const o=X1(i[A][s],t);cs(e,o),n.push(o)}r.push(n)}return r}function RE(i,e,t){const r=[];for(let A=0;A<i.length;A++){const n=Au(i[A],e,t);r.push(n)}return r}function DE(i,e,t,r){if(i[0]<t[0]||i[0]>t[2]){const A=r*.5;let n=i[0]-t[0]>A?-r:t[0]-i[0]>A?r:0;n===0&&(n=i[0]-t[2]>A?-r:t[2]-i[0]>A?r:0),i[0]+=n}cs(e,i)}function l2(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function mI(i,e,t,r){const A=Math.pow(2,r.z)*Fr,n=[r.x*Fr,r.y*Fr],s=[];for(const o of i)for(const a of o){const g=[a.x+n[0],a.y+n[1]];DE(g,e,t,A),s.push(g)}return s}function QI(i,e,t,r){const A=Math.pow(2,r.z)*Fr,n=[r.x*Fr,r.y*Fr],s=[];for(const o of i){const a=[];for(const g of o){const l=[g.x+n[0],g.y+n[1]];cs(e,l),a.push(l)}s.push(a)}if(e[2]-e[0]<=A/2){l2(e);for(const o of s)for(const a of o)DE(a,e,t,A)}return s}function c2(i,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],A=i.canonicalID();if(e.type==="Polygon"){const n=Au(e.coordinates,r,A),s=mI(i.geometry(),t,r,A);if(!Nn(t,r))return!1;for(const o of s)if(!zA(o,n))return!1}if(e.type==="MultiPolygon"){const n=RE(e.coordinates,r,A),s=mI(i.geometry(),t,r,A);if(!Nn(t,r))return!1;for(const o of s)if(!o2(o,n))return!1}return!0}function u2(i,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],A=i.canonicalID();if(e.type==="Polygon"){const n=Au(e.coordinates,r,A),s=QI(i.geometry(),t,r,A);if(!Nn(t,r))return!1;for(const o of s)if(!bE(o,n))return!1}if(e.type==="MultiPolygon"){const n=RE(e.coordinates,r,A),s=QI(i.geometry(),t,r,A);if(!Nn(t,r))return!1;for(const o of s)if(!a2(o,n))return!1}return!0}class Ni{constructor(e,t){this.type=oe,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Fn(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const A=[];for(const n of r.features){const{type:s,coordinates:o}=n.geometry;s==="Polygon"&&A.push(o),s==="MultiPolygon"&&A.push(...o)}if(A.length){const n={type:"MultiPolygon",coordinates:A};return new Ni(r,n)}}else if(r.type==="Feature"){const A=r.geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new Ni(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Ni(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return c2(e,this.geometries);if(e.geometryType()==="LineString")return u2(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class xE{constructor(e=[],t=(r,A)=>r<A?-1:r>A?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,A=t[e];for(;e>0;){const n=e-1>>1,s=t[n];if(r(A,s)>=0)break;t[e]=s,e=n}t[e]=A}_down(e){const{data:t,compare:r}=this,A=this.length>>1,n=t[e];for(;e<A;){let s=(e<<1)+1;const o=s+1;if(o<this.length&&r(t[o],t[s])<0&&(s=o),r(t[s],n)>=0)break;t[e]=t[s],e=s}t[e]=n}}function h2(i,e){if(i.length<=1)return[i];const r=[];let A,n;for(const s of i){const o=I2(s);o!==0&&(s.area=Math.abs(o),n===void 0&&(n=o<0),n===o<0?(A&&r.push(A),A=[s]):A.push(s))}return A&&r.push(A),r}function I2(i){let e=0;for(let t=0,r=i.length,A=r-1,n,s;t<r;A=t++)n=i[t],s=i[A],e+=(s.x-n.x)*(n.y+s.y);return e}const d2=6378.137,wI=1/298.257223563,_I=wI*(2-wI),SI=Math.PI/180;class nu{constructor(e){const t=SI*d2*1e3,r=Math.cos(e*SI),A=1/(1-_I*(1-r*r)),n=Math.sqrt(A);this.kx=t*n*r,this.ky=t*n*A*(1-_I)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,A=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+A*A)}pointOnLine(e,t){let r=1/0,A,n,s,o;for(let a=0;a<e.length-1;a++){let g=e[a][0],l=e[a][1],c=this.wrap(e[a+1][0]-g)*this.kx,u=(e[a+1][1]-l)*this.ky,I=0;(c!==0||u!==0)&&(I=(this.wrap(t[0]-g)*this.kx*c+(t[1]-l)*this.ky*u)/(c*c+u*u),I>1?(g=e[a+1][0],l=e[a+1][1]):I>0&&(g+=c/this.kx*I,l+=u/this.ky*I)),c=this.wrap(t[0]-g)*this.kx,u=(t[1]-l)*this.ky;const h=c*c+u*u;h<r&&(r=h,A=g,n=l,s=a,o=I)}return{point:[A,n],index:s,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const $g=100,Zg=50;function TE(i,e){return e[0]-i[0]}function yo(i){return i[1]-i[0]+1}function zr(i,e){return i[1]>=i[0]&&i[1]<e}function Wg(i,e){if(i[0]>i[1])return[null,null];const t=yo(i);if(e){if(t===2)return[i,null];const A=Math.floor(t/2);return[[i[0],i[0]+A],[i[0]+A,i[1]]]}if(t===1)return[i,null];const r=Math.floor(t/2)-1;return[[i[0],i[0]+r],[i[0]+r+1,i[1]]]}function Xg(i,e){if(!zr(e,i.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)cs(t,i[r]);return t}function el(i){const e=[1/0,1/0,-1/0,-1/0];for(const t of i)for(const r of t)cs(e,r);return e}function bI(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function su(i,e,t){if(!bI(i)||!bI(e))return NaN;let r=0,A=0;return i[2]<e[0]&&(r=e[0]-i[2]),i[0]>e[2]&&(r=i[0]-e[2]),i[1]>e[3]&&(A=i[1]-e[3]),i[3]<e[1]&&(A=e[1]-i[3]),t.distance([0,0],[r,A])}function bi(i,e,t){const r=t.pointOnLine(e,i);return t.distance(i,r.point)}function ou(i,e,t,r,A){const n=Math.min(bi(i,[t,r],A),bi(e,[t,r],A)),s=Math.min(bi(t,[i,e],A),bi(r,[i,e],A));return Math.min(n,s)}function f2(i,e,t,r,A){if(!(zr(e,i.length)&&zr(r,t.length)))return 1/0;let s=1/0;for(let o=e[0];o<e[1];++o){const a=i[o],g=i[o+1];for(let l=r[0];l<r[1];++l){const c=t[l],u=t[l+1];if(pa(a,g,c,u))return 0;s=Math.min(s,ou(a,g,c,u,A))}}return s}function C2(i,e,t,r,A){if(!(zr(e,i.length)&&zr(r,t.length)))return NaN;let s=1/0;for(let o=e[0];o<=e[1];++o)for(let a=r[0];a<=r[1];++a)if(s=Math.min(s,A.distance(i[o],t[a])),s===0)return s;return s}function E2(i,e,t){if(zA(i,e,!0))return 0;let r=1/0;for(const A of e){const n=A[0],s=A[A.length-1];if(n!==s&&(r=Math.min(r,bi(i,[s,n],t)),r===0))return r;const o=t.pointOnLine(A,i);if(r=Math.min(r,t.distance(i,o.point)),r===0)return r}return r}function B2(i,e,t,r){if(!zr(e,i.length))return NaN;for(let n=e[0];n<=e[1];++n)if(zA(i[n],t,!0))return 0;let A=1/0;for(let n=e[0];n<e[1];++n){const s=i[n],o=i[n+1];for(const a of t)for(let g=0,l=a.length,c=l-1;g<l;c=g++){const u=a[c],I=a[g];if(pa(s,o,u,I))return 0;A=Math.min(A,ou(s,o,u,I,r))}}return A}function RI(i,e){for(const t of i)for(const r of t)if(zA(r,e,!0))return!0;return!1}function p2(i,e,t,r=1/0){const A=el(i),n=el(e);if(r!==1/0&&su(A,n,t)>=r)return r;if(Nn(A,n)){if(RI(i,e))return 0}else if(RI(e,i))return 0;let s=1/0;for(const o of i)for(let a=0,g=o.length,l=g-1;a<g;l=a++){const c=o[l],u=o[a];for(const I of e)for(let h=0,d=I.length,f=d-1;h<d;f=h++){const C=I[f],E=I[h];if(pa(c,u,C,E))return 0;s=Math.min(s,ou(c,u,C,E,t))}}return s}function DI(i,e,t,r,A,n){if(!n)return;const s=su(Xg(r,n),A,t);s<e&&i.push([s,n,[0,0]])}function Ts(i,e,t,r,A,n,s){if(!n||!s)return;const o=su(Xg(r,n),Xg(A,s),t);o<e&&i.push([o,n,s])}function mo(i,e,t,r,A=1/0){let n=Math.min(r.distance(i[0],t[0][0]),A);if(n===0)return n;const s=new xE([[0,[0,i.length-1],[0,0]]],TE),o=el(t);for(;s.length>0;){const a=s.pop();if(a[0]>=n)continue;const g=a[1],l=e?Zg:$g;if(yo(g)<=l){if(!zr(g,i.length))return NaN;if(e){const c=B2(i,g,t,r);if(isNaN(c)||c===0)return c;n=Math.min(n,c)}else for(let c=g[0];c<=g[1];++c){const u=E2(i[c],t,r);if(n=Math.min(n,u),n===0)return 0}}else{const c=Wg(g,e);DI(s,n,r,i,o,c[0]),DI(s,n,r,i,o,c[1])}}return n}function Qo(i,e,t,r,A,n=1/0){let s=Math.min(n,A.distance(i[0],t[0]));if(s===0)return s;const o=new xE([[0,[0,i.length-1],[0,t.length-1]]],TE);for(;o.length>0;){const a=o.pop();if(a[0]>=s)continue;const g=a[1],l=a[2],c=e?Zg:$g,u=r?Zg:$g;if(yo(g)<=c&&yo(l)<=u){if(!zr(g,i.length)&&zr(l,t.length))return NaN;let I;if(e&&r)I=f2(i,g,t,l,A),s=Math.min(s,I);else if(e&&!r){const h=i.slice(g[0],g[1]+1);for(let d=l[0];d<=l[1];++d)if(I=bi(t[d],h,A),s=Math.min(s,I),s===0)return s}else if(!e&&r){const h=t.slice(l[0],l[1]+1);for(let d=g[0];d<=g[1];++d)if(I=bi(i[d],h,A),s=Math.min(s,I),s===0)return s}else I=C2(i,g,t,l,A),s=Math.min(s,I)}else{const I=Wg(g,e),h=Wg(l,r);Ts(o,s,A,i,t,I[0],h[0]),Ts(o,s,A,i,t,I[0],h[1]),Ts(o,s,A,i,t,I[1],h[0]),Ts(o,s,A,i,t,I[1],h[1])}}return s}function y2(i,e){const t=i.geometry(),r=t.flat().map(s=>iu([s.x,s.y],i.canonical));if(t.length===0)return NaN;const A=new nu(r[0][1]);let n=1/0;for(const s of e){switch(s.type){case"Point":n=Math.min(n,Qo(r,!1,[s.coordinates],!1,A,n));break;case"LineString":n=Math.min(n,Qo(r,!1,s.coordinates,!0,A,n));break;case"Polygon":n=Math.min(n,mo(r,!1,s.coordinates,A,n));break}if(n===0)return n}return n}function m2(i,e){const t=i.geometry(),r=t.flat().map(s=>iu([s.x,s.y],i.canonical));if(t.length===0)return NaN;const A=new nu(r[0][1]);let n=1/0;for(const s of e){switch(s.type){case"Point":n=Math.min(n,Qo(r,!0,[s.coordinates],!1,A,n));break;case"LineString":n=Math.min(n,Qo(r,!0,s.coordinates,!0,A,n));break;case"Polygon":n=Math.min(n,mo(r,!0,s.coordinates,A,n));break}if(n===0)return n}return n}function Q2(i,e){const t=i.geometry();if(t.length===0||t[0].length===0)return NaN;const r=h2(t).map(s=>s.map(o=>o.map(a=>iu([a.x,a.y],i.canonical)))),A=new nu(r[0][0][0][1]);let n=1/0;for(const s of e)for(const o of r){switch(s.type){case"Point":n=Math.min(n,mo([s.coordinates],!1,o,A,n));break;case"LineString":n=Math.min(n,mo(s.coordinates,!0,o,A,n));break;case"Polygon":n=Math.min(n,p2(o,s.coordinates,A,n));break}if(n===0)return n}return n}function ig(i){return i.type==="MultiPolygon"?i.coordinates.map(e=>({type:"Polygon",coordinates:e})):i.type==="MultiLineString"?i.coordinates.map(e=>({type:"LineString",coordinates:e})):i.type==="MultiPoint"?i.coordinates.map(e=>({type:"Point",coordinates:e})):[i]}class Gi{constructor(e,t){this.type=O,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Fn(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Gi(r,r.features.map(A=>ig(A.geometry)).flat());if(r.type==="Feature")return new Gi(r,ig(r.geometry));if("type"in r&&"coordinates"in r)return new Gi(r,ig(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return y2(e,this.geometries);if(e.geometryType()==="LineString")return m2(e,this.geometries);if(e.geometryType()==="Polygon")return Q2(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class us{constructor(e){this.type=Ae,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return r==null?t.error("Global state property must be defined."):typeof r!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new us(r)}evaluate(e){var t;const r=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!r||Object.keys(r).length===0?null:yE(r,this.key)}eachChild(){}outputDefined(){return!1}}const ya={"==":z1,"!=":j1,">":$1,"<":V1,">=":W1,"<=":Z1,array:hr,at:Vc,boolean:hr,case:Wc,coalesce:Ln,collator:Ba,format:eu,image:tu,in:$c,"index-of":Bo,interpolate:Tr,"interpolate-hcl":Tr,"interpolate-lab":Tr,length:ru,let:fa,literal:RA,match:Zc,number:hr,"number-format":Xc,object:hr,slice:po,step:Ea,string:hr,"to-boolean":ai,"to-color":ai,"to-number":ai,"to-string":ai,var:Ca,within:Ni,distance:Gi,"global-state":us};class Wt{constructor(e,t,r,A){this.name=e,this.type=t,this._evaluate=r,this.args=A}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],A=Wt.definitions[r];if(!A)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(A)?A[0]:A.type,s=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,o=s.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let a=null;for(const[g,l]of o){a=new da(t.registry,wo,t.path,null,t.scope);const c=[];let u=!1;for(let I=1;I<e.length;I++){const h=e[I],d=Array.isArray(g)?g[I-1]:g.type,f=a.parse(h,1+c.length,d);if(!f){u=!0;break}c.push(f)}if(!u){if(Array.isArray(g)&&g.length!==c.length){a.error(`Expected ${g.length} arguments, but found ${c.length} instead.`);continue}for(let I=0;I<c.length;I++){const h=Array.isArray(g)?g[I]:g.type,d=c[I];a.concat(I+1).checkSubtype(h,d.type)}if(a.errors.length===0)return new Wt(r,n,l,c)}}if(o.length===1)t.errors.push(...a.errors);else{const l=(o.length?o:s).map(([u])=>_2(u)).join(" | "),c=[];for(let u=1;u<e.length;u++){const I=t.parse(e[u],1+c.length);if(!I)return null;c.push(ze(I.type))}t.error(`Expected arguments of type ${l}, but found (${c.join(", ")}) instead.`)}return null}static register(e,t){Wt.definitions=t;for(const r in t)e[r]=Wt}}function xI(i,[e,t,r,A]){e=e.evaluate(i),t=t.evaluate(i),r=r.evaluate(i);const n=A?A.evaluate(i):1,s=mE(e,t,r,n);if(s)throw new $e(s);return new Te(e/255,t/255,r/255,n,!1)}function TI(i,e){return i in e}function Ag(i,e){const t=e[i];return typeof t>"u"?null:t}function w2(i,e,t,r){for(;t<=r;){const A=t+r>>1;if(e[A]===i)return!0;e[A]>i?r=A-1:t=A+1}return!1}function pi(i){return{type:i}}Wt.register(ya,{error:[E1,[le],(i,[e])=>{throw new $e(e.evaluate(i))}],typeof:[le,[Ae],(i,[e])=>ze(st(e.evaluate(i)))],"to-rgba":[Vt(O,4),[Dr],(i,[e])=>{const[t,r,A,n]=e.evaluate(i).rgb;return[t*255,r*255,A*255,n]}],rgb:[Dr,[O,O,O],xI],rgba:[Dr,[O,O,O,O],xI],has:{type:oe,overloads:[[[le],(i,[e])=>TI(e.evaluate(i),i.properties())],[[le,Ti],(i,[e,t])=>TI(e.evaluate(i),t.evaluate(i))]]},get:{type:Ae,overloads:[[[le],(i,[e])=>Ag(e.evaluate(i),i.properties())],[[le,Ti],(i,[e,t])=>Ag(e.evaluate(i),t.evaluate(i))]]},"feature-state":[Ae,[le],(i,[e])=>Ag(e.evaluate(i),i.featureState||{})],properties:[Ti,[],i=>i.properties()],"geometry-type":[le,[],i=>i.geometryType()],id:[Ae,[],i=>i.id()],zoom:[O,[],i=>i.globals.zoom],"heatmap-density":[O,[],i=>i.globals.heatmapDensity||0],elevation:[O,[],i=>i.globals.elevation||0],"line-progress":[O,[],i=>i.globals.lineProgress||0],accumulated:[Ae,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[O,pi(O),(i,e)=>{let t=0;for(const r of e)t+=r.evaluate(i);return t}],"*":[O,pi(O),(i,e)=>{let t=1;for(const r of e)t*=r.evaluate(i);return t}],"-":{type:O,overloads:[[[O,O],(i,[e,t])=>e.evaluate(i)-t.evaluate(i)],[[O],(i,[e])=>-e.evaluate(i)]]},"/":[O,[O,O],(i,[e,t])=>e.evaluate(i)/t.evaluate(i)],"%":[O,[O,O],(i,[e,t])=>e.evaluate(i)%t.evaluate(i)],ln2:[O,[],()=>Math.LN2],pi:[O,[],()=>Math.PI],e:[O,[],()=>Math.E],"^":[O,[O,O],(i,[e,t])=>Math.pow(e.evaluate(i),t.evaluate(i))],sqrt:[O,[O],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[O,[O],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[O,[O],(i,[e])=>Math.log(e.evaluate(i))],log2:[O,[O],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[O,[O],(i,[e])=>Math.sin(e.evaluate(i))],cos:[O,[O],(i,[e])=>Math.cos(e.evaluate(i))],tan:[O,[O],(i,[e])=>Math.tan(e.evaluate(i))],asin:[O,[O],(i,[e])=>Math.asin(e.evaluate(i))],acos:[O,[O],(i,[e])=>Math.acos(e.evaluate(i))],atan:[O,[O],(i,[e])=>Math.atan(e.evaluate(i))],min:[O,pi(O),(i,e)=>Math.min(...e.map(t=>t.evaluate(i)))],max:[O,pi(O),(i,e)=>Math.max(...e.map(t=>t.evaluate(i)))],abs:[O,[O],(i,[e])=>Math.abs(e.evaluate(i))],round:[O,[O],(i,[e])=>{const t=e.evaluate(i);return t<0?-Math.round(-t):Math.round(t)}],floor:[O,[O],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[O,[O],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[oe,[le,Ae],(i,[e,t])=>i.properties()[e.value]===t.value],"filter-id-==":[oe,[Ae],(i,[e])=>i.id()===e.value],"filter-type-==":[oe,[le],(i,[e])=>i.geometryType()===e.value],"filter-<":[oe,[le,Ae],(i,[e,t])=>{const r=i.properties()[e.value],A=t.value;return typeof r==typeof A&&r<A}],"filter-id-<":[oe,[Ae],(i,[e])=>{const t=i.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[oe,[le,Ae],(i,[e,t])=>{const r=i.properties()[e.value],A=t.value;return typeof r==typeof A&&r>A}],"filter-id->":[oe,[Ae],(i,[e])=>{const t=i.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[oe,[le,Ae],(i,[e,t])=>{const r=i.properties()[e.value],A=t.value;return typeof r==typeof A&&r<=A}],"filter-id-<=":[oe,[Ae],(i,[e])=>{const t=i.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[oe,[le,Ae],(i,[e,t])=>{const r=i.properties()[e.value],A=t.value;return typeof r==typeof A&&r>=A}],"filter-id->=":[oe,[Ae],(i,[e])=>{const t=i.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[oe,[Ae],(i,[e])=>e.value in i.properties()],"filter-has-id":[oe,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[oe,[Vt(le)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[oe,[Vt(Ae)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[oe,[le,Vt(Ae)],(i,[e,t])=>t.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[oe,[le,Vt(Ae)],(i,[e,t])=>w2(i.properties()[e.value],t.value,0,t.value.length-1)],all:{type:oe,overloads:[[[oe,oe],(i,[e,t])=>e.evaluate(i)&&t.evaluate(i)],[pi(oe),(i,e)=>{for(const t of e)if(!t.evaluate(i))return!1;return!0}]]},any:{type:oe,overloads:[[[oe,oe],(i,[e,t])=>e.evaluate(i)||t.evaluate(i)],[pi(oe),(i,e)=>{for(const t of e)if(t.evaluate(i))return!0;return!1}]]},"!":[oe,[oe],(i,[e])=>!e.evaluate(i)],"is-supported-script":[oe,[le],(i,[e])=>{const t=i.globals&&i.globals.isSupportedScript;return t?t(e.evaluate(i)):!0}],upcase:[le,[le],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[le,[le],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[le,pi(Ae),(i,e)=>e.map(t=>fn(t.evaluate(i))).join("")],"resolved-locale":[le,[la],(i,[e])=>e.evaluate(i).resolvedLocale()]});function _2(i){return Array.isArray(i)?`(${i.map(ze).join(", ")})`:`(${ze(i.type)}...)`}function wo(i){if(i instanceof Ca)return wo(i.boundExpression);if(i instanceof Wt&&i.name==="error")return!1;if(i instanceof Ba)return!1;if(i instanceof Ni)return!1;if(i instanceof Gi)return!1;if(i instanceof us)return!1;const e=i instanceof ai||i instanceof hr;let t=!0;return i.eachChild(r=>{e?t=t&&wo(r):t=t&&r instanceof RA}),t?au(i)&&lu(i,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function au(i){if(i instanceof Wt){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof Ni||i instanceof Gi)return!1;let e=!0;return i.eachChild(t=>{e&&!au(t)&&(e=!1)}),e}function gu(i){if(i instanceof Wt&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(t=>{e&&!gu(t)&&(e=!1)}),e}function lu(i,e){if(i instanceof Wt&&e.indexOf(i.name)>=0)return!1;let t=!0;return i.eachChild(r=>{t&&!lu(r,e)&&(t=!1)}),t}function tl(i){return{result:"success",value:i}}function oA(i){return{result:"error",value:i}}function S2(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function b2(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function R2(i){return!!i.expression&&i.expression.interpolated}function FE(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&st(i)===Ti}class D2{constructor(e,t,r){this.expression=e,this._warningHistory={},this._evaluator=new QE,this._defaultValue=t?L2(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=r}evaluateWithoutErrorHandling(e,t,r,A,n,s){return this._globalState&&(e=DA(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=A,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,A,n,s){this._globalState&&(e=DA(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=A,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=s||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new $e(`Expected value to be one of ${Object.keys(this._enumValues).map(a=>JSON.stringify(a)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function x2(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in ya}function LE(i,e,t){const r=new da(ya,wo,[],e?F2(e):void 0),A=r.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?tl(new D2(A,e,t)):oA(r.errors)}class FI{constructor(e,t,r){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!gu(t.expression),this.globalStateRefs=ma(t.expression),this._globalState=r}evaluateWithoutErrorHandling(e,t,r,A,n,s){return this._globalState&&(e=DA(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,r,A,n,s)}evaluate(e,t,r,A,n,s){return this._globalState&&(e=DA(e,this._globalState)),this._styleExpression.evaluate(e,t,r,A,n,s)}}class LI{constructor(e,t,r,A,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!gu(t.expression),this.globalStateRefs=ma(t.expression),this.interpolationType=A,this._globalState=n}evaluateWithoutErrorHandling(e,t,r,A,n,s){return this._globalState&&(e=DA(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,r,A,n,s)}evaluate(e,t,r,A,n,s){return this._globalState&&(e=DA(e,this._globalState)),this._styleExpression.evaluate(e,t,r,A,n,s)}interpolationFactor(e,t,r){return this.interpolationType?Tr.interpolationFactor(this.interpolationType,e,t,r):0}}function T2(i,e,t){const r=LE(i,e,t);if(r.result==="error")return r;const A=r.value.expression,n=au(A);if(!n&&!S2(e))return oA([new Sr("","data expressions not supported")]);const s=lu(A,["zoom"]);if(!s&&!b2(e))return oA([new Sr("","zoom expressions not supported")]);const o=Os(A);if(!o&&!s)return oA([new Sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Sr)return oA([o]);if(o instanceof Tr&&!R2(e))return oA([new Sr("",'"interpolate" expressions cannot be used with this property')]);if(!o)return tl(n?new FI("constant",r.value,t):new FI("source",r.value,t));const a=o instanceof Tr?o.interpolation:void 0;return tl(n?new LI("camera",r.value,o.labels,a,t):new LI("composite",r.value,o.labels,a,t))}function Os(i){let e=null;if(i instanceof fa)e=Os(i.result);else if(i instanceof Ln){for(const t of i.args)if(e=Os(t),e)break}else(i instanceof Ea||i instanceof Tr)&&i.input instanceof Wt&&i.input.name==="zoom"&&(e=i);return e instanceof Sr||i.eachChild(t=>{const r=Os(t);r instanceof Sr?e=r:!e&&r?e=new Sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Sr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function ma(i,e=new Set){return i instanceof us&&e.add(i.key),i.eachChild(t=>{ma(t,e)}),e}function F2(i){const e={color:Dr,string:le,number:O,enum:le,boolean:oe,formatted:ca,padding:ua,numberArray:ha,colorArray:Dn,projectionDefinition:ga,resolvedImage:ls,variableAnchorOffsetCollection:Ia};return i.type==="array"?Vt(e[i.value]||Ae,i.length):e[i.type]}function L2(i){if(i.type==="color"&&FE(i.default))return new Te(0,0,0,0);switch(i.type){case"color":return Te.parse(i.default)||null;case"padding":return Ir.parse(i.default)||null;case"numberArray":return dr.parse(i.default)||null;case"colorArray":return Zt.parse(i.default)||null;case"variableAnchorOffsetCollection":return xr.parse(i.default)||null;case"projectionDefinition":return ur.parse(i.default)||null;default:return i.default===void 0?null:i.default}}function DA(i,e){const{zoom:t,heatmapDensity:r,elevation:A,lineProgress:n,isSupportedScript:s,accumulated:o}=i??{};return{zoom:t,heatmapDensity:r,elevation:A,lineProgress:n,isSupportedScript:s,accumulated:o,globalState:e}}function NE(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!NE(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const N2={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function G2(i,e){if(i==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};NE(i)||(i=_o(i));const t=LE(i,N2,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));{const r=GE(i);return{filter:(A,n,s)=>t.value.evaluate(A,n,{},s),needGeometry:r,getGlobalStateRefs:()=>ma(t.value.expression)}}}function v2(i,e){return i<e?-1:i>e?1:0}function GE(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let e=1;e<i.length;e++)if(GE(i[e]))return!0;return!1}function _o(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?ng(i[1],i[2],"=="):e==="!="?Fs(ng(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?ng(i[1],i[2],e):e==="any"?M2(i.slice(1)):e==="all"?["all"].concat(i.slice(1).map(_o)):e==="none"?["all"].concat(i.slice(1).map(_o).map(Fs)):e==="in"?NI(i[1],i.slice(2)):e==="!in"?Fs(NI(i[1],i.slice(2))):e==="has"?GI(i[1]):e==="!has"?Fs(GI(i[1])):!0}function ng(i,e,t){switch(i){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,i,e]}}function M2(i){return["any"].concat(i.map(_o))}function NI(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",i,["literal",e.sort(v2)]]:["filter-in-small",i,["literal",e]]}}function GI(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Fs(i){return["!",i]}function Gn(i){return typeof i=="object"?["literal",i]:i}function k2(i,e){let t=i.stops;if(!t)return P2(i,e);const r=t&&typeof t[0][0]=="object",A=r||i.property!==void 0,n=r||!A;return t=t.map(s=>!A&&e.tokens&&typeof s[1]=="string"?[s[0],K2(s[1])]:[s[0],Gn(s[1])]),r?U2(i,e,t):n?Y2(i,e,t):rl(i,e,t)}function P2(i,e){const t=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,i.default];{const r=[e.type==="color"?"to-color":e.type,t,Gn(i.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function cu(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function U2(i,e,t){const r={},A={},n=[];for(let o=0;o<t.length;o++){const a=t[o],g=a[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:i.type,property:i.property,default:i.default},A[g]=[],n.push(g)),A[g].push([a[0].value,a[1]])}if(hu({},e)==="exponential"){const o=[cu(i),["linear"],["zoom"]];for(const a of n){const g=rl(r[a],e,A[a]);BA(o,a,g,!1)}return o}else{const o=["step",["zoom"]];for(const a of n){const g=rl(r[a],e,A[a]);BA(o,a,g,!0)}return uu(o),o}}function O2(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function vI(i,e){const t=Gn(O2(i.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function rl(i,e,t){const r=hu(i,e),A=["get",i.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const n=["case"];for(const s of t)n.push(["==",A,s[0]],s[1]);return n.push(vI(i,e)),n}else if(r==="categorical"){const n=["match",A];for(const s of t)BA(n,s[0],s[1],!1);return n.push(vI(i,e)),n}else if(r==="interval"){const n=["step",["number",A]];for(const s of t)BA(n,s[0],s[1],!0);return uu(n),i.default===void 0?n:["case",["==",["typeof",A],"number"],n,Gn(i.default)]}else if(r==="exponential"){const n=i.base!==void 0?i.base:1,s=[cu(i),n===1?["linear"]:["exponential",n],["number",A]];for(const o of t)BA(s,o[0],o[1],!1);return i.default===void 0?s:["case",["==",["typeof",A],"number"],s,Gn(i.default)]}else throw new Error(`Unknown property function type ${r}`)}function Y2(i,e,t,r=["zoom"]){const A=hu(i,e);let n,s=!1;if(A==="interval")n=["step",r],s=!0;else if(A==="exponential"){const o=i.base!==void 0?i.base:1;n=[cu(i),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${A}"`);for(const o of t)BA(n,o[0],o[1],s);return uu(n),n}function uu(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function BA(i,e,t,r){i.length>3&&e===i[i.length-2]||(r&&i.length===2||i.push(e),i.push(t))}function hu(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function K2(i){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let A=t.exec(i);A!==null;A=t.exec(i)){const n=i.slice(r,t.lastIndex-A[0].length);r=t.lastIndex,n.length>0&&e.push(n),e.push(["get",A[1]])}if(e.length===1)return i;if(r<i.length)e.push(i.slice(r));else if(e.length===2)return["to-string",e[1]];return e}const H2=d1;var MI={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},tn=" ",kI=/(italic|oblique)$/i,PI={};function il(i,e,t){var r=PI[i];if(!r){Array.isArray(i)||(i=[i]);for(var A=400,n="normal",s=[],o,a,g=0,l=i.length;g<l;++g){var c=i[g],u=c.split(" "),I=u[u.length-1].toLowerCase();I=="normal"||I=="italic"||I=="oblique"?(n=a?n:I,a=!0,u.pop(),I=u[u.length-1].toLowerCase()):kI.test(I)&&(I=I.replace(kI,""),n=a?n:u[u.length-1].replace(I,""),a=!0);for(var h in MI){var d=u.length>1?u[u.length-2].toLowerCase():"";if(I==h||I==h.replace("-","")||d+"-"+I==h){A=o?A:MI[h],u.pop(),d&&h.startsWith(d)&&u.pop();break}}!o&&typeof I=="number"&&(A=I,o=!0);var f=u.join(tn).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");f.indexOf(tn)!==-1&&(f='"'+f+'"'),s.push(f)}r=PI[i]=[n,A,s]}return r[0]+tn+r[1]+tn+e+"px"+(t?"/"+t:"")+tn+r[2]}const vE="https://api.mapbox.com";function Iu(i){const e="mapbox://";return i.indexOf(e)!==0?"":i.slice(e.length)}function q2(i,e,t){if(typeof i=="string")return[{id:"default",url:UI(i,e,t)}];for(const r of i)r.url=UI(r.url,e,t);return i}function UI(i,e,t){const r=Iu(i);if(!r)return decodeURI(new URL(i,t).href);const A="sprites/";if(r.indexOf(A)!==0)throw new Error(`unexpected sprites url: ${i}`);const n=r.slice(A.length);return`${vE}/styles/v1/${n}/sprite?access_token=${e}`}function So(i,e){const t=Iu(i);if(!t)return decodeURI(new URL(i,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${i}`);const A=t.slice(r.length);return`${vE}/styles/v1/${A}?&access_token=${e}`}const J2=["a","b","c","d"];function Ys(i,e,t,r){const A=new URL(i,r||location.href),n=Iu(i);if(!n)return e?(A.searchParams.has(t)||A.searchParams.set(t,e),[decodeURI(A.href)]):[decodeURI(A.href)];if(n==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${n}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return J2.map(s=>`https://${s}.tiles.mapbox.com/v4/${n}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const wt=Object.freeze({}),OI={},YI={};let z2=0;function du(i){return i.id||(i.id=z2++),i.id}function j2(i,e){return du(i)+"."+sr(e)}function ME(i){let e=OI[i.id];return e||(e={},OI[du(i)]=e),e}function V2(i){let e=YI[i.id];return e||(e={},YI[du(i)]=e),e}function sg(i){return i*Math.PI/180}const Cr=function(){const i=[];for(let e=78271.51696402048;i.length<=24;e/=2)i.push(e);return i}();function Qa(i,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(i,e);const t=document.createElement("canvas");return t.width=i,t.height=e,t}function bo(i,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<i&&t+1<r){const n=e[t]/e[t+1];return t+Math.log(e[t]/i)/Math.log(n)}return r-1}function an(i,e){const t=Math.floor(i),r=Math.pow(2,i-t);return e[t]/r}const tA={};function xA(i,e,t={},r){if(e in tA)return r&&(r.url=tA[e][0].url),tA[e][1];const A=t.transformRequest&&t.transformRequest(e,i)||e,n=function(a){return delete tA[e],Promise.reject(new Error("Error fetching source "+e))},s=function(a){return delete tA[e],a.ok?a.json():Promise.reject(new Error("Error fetching source "+e))},o=no(()=>A).then(a=>a instanceof Response?(r&&(r.url=a.url),s(a)):(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.url=a.url),fetch(a).then(s).catch(n))).catch(n);return tA[e]=[A,o],o}function kE(i,e){if(typeof i=="string")if(i.trim().startsWith("{"))try{const t=JSON.parse(i);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return i=So(i,e.accessToken),xA("Style",i,e);else return Promise.resolve(i)}const KI={};function PE(i,e,t={}){const r=[e,JSON.stringify(i)].toString();let A=KI[r];if(!A||t.transformRequest){let n;t.transformRequest&&(n=(o,a)=>{const g=t.transformRequest&&t.transformRequest(a,"Tiles")||a;if(o instanceof Ef)o.setLoader((l,c,u)=>{const I=function(h){h.arrayBuffer().then(d=>{const C=o.getFormat().readFeatures(d,{extent:l,featureProjection:u});o.setFeatures(C)})};no(()=>g).then(h=>{if(h instanceof Response)return I(h);fetch(h).then(I).catch(d=>o.setState(Re.ERROR))}).catch(h=>o.setState(Re.ERROR))});else{const l=o.getImage();no(()=>g).then(c=>{if(typeof c=="string"){l.src=c;return}const u=I=>I.blob().then(h=>{const d=URL.createObjectURL(h);l.addEventListener("load",()=>URL.revokeObjectURL(d)),l.addEventListener("error",()=>URL.revokeObjectURL(d)),l.src=d});if(c instanceof Response)return u(c);fetch(c).then(u).catch(I=>o.setState(Re.ERROR))}).catch(c=>o.setState(Re.ERROR))}});const s=i.url;if(s&&!i.tiles){const o=Ys(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))A=Promise.resolve({tileJson:Object.assign({},i,{url:void 0,tiles:o}),tileLoadFunction:n});else{const a={};A=xA("Source",o[0],t,a).then(function(g){return g.tiles=g.tiles.map(function(l){return g.scheme==="tms"&&(l=l.replace("{y}","{-y}")),Ys(l,t.accessToken,t.accessTokenParam||"access_token",a.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:n})})}}else i.tiles?(i=Object.assign({},i,{tiles:i.tiles.map(function(o){return i.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Ys(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),A=Promise.resolve({tileJson:Object.assign({},i),tileLoadFunction:n})):A=Promise.reject(new Error("source has no `tiles` nor `url`"));KI[r]=A}return A}function HI(i,e,t,r){const A=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],n=Qa(A[0],A[1]),s=n.getContext("2d");s.drawImage(i,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=s.getImageData(0,0,A[0],A[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const a=o.data;for(let g=0,l=o.width;g<l;++g)for(let c=0,u=o.height;c<u;++c){const I=(c*l+g)*4;a[I+3]>0&&s.arc(g,c,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),n}function $2(i,e,t){const r=Math.max(0,Math.min(1,(t-i)/(e-i)));return r*r*(3-2*r)}function qI(i,e,t){const r=Qa(e.width,e.height),A=r.getContext("2d");A.drawImage(i,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const n=A.getImageData(0,0,e.width,e.height),s=n.data;for(let o=0,a=n.width;o<a;++o)for(let g=0,l=n.height;g<l;++g){const c=(g*a+o)*4,u=s[c+3]/255,I=.75,h=.1,d=$2(I-h,I+h,u);d>0?(s[c+0]=Math.round(255*t.r*d),s[c+1]=Math.round(255*t.g*d),s[c+2]=Math.round(255*t.b*d),s[c+3]=Math.round(255*d)):s[c+3]=0}return A.putImageData(n,0,0),r}const Z2=Array(256).join("");function Al(i,e){if(e>=.05){let t="";const r=i.split(`
`),A=Z2.slice(0,Math.round(e/.1));for(let n=0,s=r.length;n<s;++n)n>0&&(t+=`
`),t+=r[n].split("").join(A);return t}return i}let og;function UE(){return og||(og=Qa(1,1).getContext("2d")),og}function W2(i,e){if(/\d+ \d+/.test(i)){const[t,r]=i.split(" ").map(Number);return t<=e&&e<=r}return i==e}function yi(i,e){return UE().measureText(i).width+(i.length-1)*e}const Ro={};My.on("propertychange",()=>{for(const i in Ro)delete Ro[i]});function nl(i,e,t,r){if(i.indexOf(`
`)!==-1){const s=i.split(`
`),o=[];for(let a=0,g=s.length;a<g;++a)o.push(nl(s[a],e,t,r));return o.join(`
`)}const A=t+","+e+","+i+","+r;let n=Ro[A];if(!n){const s=i.split(" ");if(s.length>1){const o=UE();o.font=e;const g=o.measureText("M").width*t;let l="";const c=[];for(let u=0,I=s.length;u<I;++u){const h=s[u],d=l+(l?" ":"")+h;yi(d,r)<=g?l=d:(l&&c.push(l),l=h)}l&&c.push(l);for(let u=0,I=c.length;u<I&&I>1;++u){const h=c[u];if(yi(h,r)<g*.35){const d=u>0?yi(c[u-1],r):1/0,f=u<I-1?yi(c[u+1],r):1/0;c.splice(u,1),I-=1,d<f?(c[u-1]+=" "+h,u-=1):c[u]=h+" "+c[u]}}for(let u=0,I=c.length-1;u<I;++u){const h=c[u],d=c[u+1];if(yi(h,r)>g*.7&&yi(d,r)<g*.6){const f=h.split(" "),C=f.pop();yi(C,r)<g*.2&&(c[u]=f.join(" "),c[u+1]=C+" "+d),I-=1}}n=c.join(`
`)}else n=i;n=Al(n,r),Ro[A]=n}return n}const X2=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],JI={};function eT(i,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(zo)return i;let t;for(let r=0,A=i.length;r<A;++r){const n=i[r];if(n in JI)continue;JI[n]=!0;const o=il(n,16).split(" ");t||(t=[]),t.push([o.slice(3).join(" ").replace(/"/g,""),o[1],o[0]])}return t&&(async()=>{await document.fonts.ready;for(let r=0,A=t.length;r<A;++r){const n=t[r],s=n[0];if(X2.includes(s))continue;const o=n[1],a=n[2];if(!(await document.fonts.load(`${a} ${o} 16px "${s}"`)).some(l=>l.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&W2(l.weight,o)&&l.style===a)){const l=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",o).replace("{-fontstyle}",a.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a);if(!document.querySelector('link[href="'+l+'"]')){const c=document.createElement("link");c.href=l,c.rel="stylesheet",document.head.appendChild(c)}}}})(),i}const tT={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},rT={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},iT=function(i,e){const t=T2(i,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},Ft={zoom:0,distanceFromCenter:0};Wt.register(ya,{...Wt.definitions,pitch:[{kind:"number"},[],i=>Ft.pitch||90],"distance-from-center":[{kind:"number"},[],i=>Ft.distanceFromCenter||0]});let Ls,ag;function J(i,e,t,r,A,n){const s=i.id;A||(A={},console.warn("No functionCache provided to getValue()")),A[s]||(A[s]={});const o=A[s];if(!o[t]){let a=(i[e]||wt)[t];const g=H2[`${e}_${i.type}`][t];a===void 0&&(a=g.default);let l=x2(a);if(!l&&FE(a)&&(a=k2(a,g),l=!0),l){const c=iT(a,g);o[t]=c.evaluate.bind(c)}else{const c=g.type;(c==="color"||c==="colorArray")&&(a=Te.parse(a)),o[t]=function(){return a}}}return o[t](Ft,r,n)}function zI(i,e,t,r){return J(i,"layout",`${t}-allow-overlap`,e,r)?J(i,"layout",`${t}-ignore-placement`,e,r)?"none":"obstacle":"declutter"}function AT(i,e,t,r){if(r||console.warn("No filterCache provided to evaluateFilter()"),!(i in r))try{r[i]=G2(e).filter}catch(A){console.warn("Filter will evaluate to false: "+A.message),r[i]=function(){return!1}}return r[i](Ft,t)}function ti(i,e){if(i){if(i.a===0||e===0)return;const t=i.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(i.r*255/t)+","+Math.round(i.g*255/t)+","+Math.round(i.b*255/t)+","+t*e+")"}return i}const nT=/\{[^{}}]*\}/g;function gg(i,e){return i.replace(nT,function(t){return e[t.slice(1,-1)]||""})}function jI(i,e){let t=i.split(":")[0];return t===i&&(t="default"),e[t]}const sT={};function oT(i,e,t,r=Cr,A=void 0,n=void 0,s=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");sT[j2(e,i)]=Array.from(arguments);const a={};(typeof n=="string"||n instanceof Request||n instanceof Response||n instanceof Promise)&&(n={default:n});for(const p in n){const y=n[p];no(()=>y).then(async Q=>{let _;if(typeof Image<"u"){const w=new Image;if(typeof Q=="string")w.crossOrigin="anonymous",w.src=Q;else{let S;Q instanceof Request?S=await fetch(Q):Q instanceof Response&&(S=Q);const R=await S.blob();_=URL.createObjectURL(R),w.src=_}w.addEventListener("load",function S(){w.removeEventListener("load",S),a[p]={image:w,size:[w.width,w.height]},i.changed(),_&&URL.revokeObjectURL(_)}),w.addEventListener("error",function S(){URL.revokeObjectURL(_),w.removeEventListener("error",S)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const w=self;w.postMessage({action:"loadImage",src:Q}),w.addEventListener("message",function(R){R.data.action==="imageLoaded"&&R.data.src===Q&&(a[p]={image:R.data.image,size:[R.data.image.width,R.data.image.height]})})}})}const g=uE(e.layers),l={},c=[],u={},I={},h=ME(e),d=V2(e);let f;for(let p=0,y=g.length;p<y;++p){const Q=g[p],_=Q.id;if(typeof t=="string"&&Q.source==t||Array.isArray(t)&&t.indexOf(_)!==-1){const w=Q["source-layer"];if(f){if(Q.source!==f)throw new Error(`Layer "${_}" does not use source "${f}`)}else{f=Q.source;const R=e.sources[f];if(!R)throw new Error(`Source "${f}" is not defined`);const F=R.type;if(F!=="vector"&&F!=="geojson")throw new Error(`Source "${f}" is not of type "vector" or "geojson", but "${F}"`)}let S=l[w];S||(S=[],l[w]=S),S.push({layer:Q,index:p}),c.push(_)}}const C=new sn,E=new gA,B=[],m=function(p,y,Q){var z,q,$;const _=(($=(q=(z=i.getSource)==null?void 0:z.call(i))==null?void 0:q.format_)==null?void 0:$.layerName_)??"mvt:layer",w=p.getProperties(),S=l[w[_]];if(!S)return;let R=r.indexOf(y);R==-1&&(R=bo(y,r)),Ft.zoom=R,Ft.distanceFromCenter=0;const F=p.getGeometry(),M=tT[F.getType()],G=i.get("map");if(G&&G instanceof so&&M===1){const re=G.getSize();if(re){const Qe=G.getView().getCenter(),te=MA(F.getExtent());Ft.distanceFromCenter=ky(Qe,te)/y/re[1]}}const x={id:p.getId(),properties:w,type:M},N=i.get("mapbox-featurestate")[p.getId()];let v=-1;for(let re=0,Qe=S.length;re<Qe;++re){const te=S[re],P=te.layer,Me=P.id;if(Q!==void 0&&Q!==Me)continue;const Le=P.layout||wt,fe=P.paint||wt;if(Le.visibility==="none"||"minzoom"in P&&R<P.minzoom||"maxzoom"in P&&R>=P.maxzoom)continue;const Ze=P.filter;if(!Ze||AT(Me,Ze,x,d)){let Oe,tt,Nt,bt,Gt,H;const Vr=te.index;if(M==3&&(P.type=="fill"||P.type=="fill-extrusion"))if(tt=J(P,"paint",P.type+"-opacity",x,h,N),P.type+"-pattern"in fe){const je=J(P,"paint",P.type+"-pattern",x,h,N);if(je){const qe=typeof je=="string"?gg(je,w):je.toString(),ke=jI(qe,a);if(A&&A[qe]&&ke){++v,H=B[v],(!H||!H.getFill()||H.getStroke()||H.getText())&&(H=new _i({fill:new gA}),B[v]=H),Nt=H.getFill(),H.setZIndex(Vr);const Ne=qe+"."+tt;let ot=I[Ne];if(!ot){const de=A[qe],_e=Qa(de.width,de.height),lt=_e.getContext("2d");lt.globalAlpha=tt,lt.drawImage(ke.image,de.x,de.y,de.width,de.height,0,0,de.width,de.height),ot=lt.createPattern(_e,"repeat"),I[Ne]=ot}Nt.setColor(ot)}}}else Oe=ti(J(P,"paint",P.type+"-color",x,h,N),tt),P.type+"-outline-color"in fe&&(Gt=ti(J(P,"paint",P.type+"-outline-color",x,h,N),tt)),Gt||(Gt=Oe),(Oe||Gt)&&(++v,H=B[v],(!H||Oe&&!H.getFill()||!Oe&&H.getFill()||Gt&&!H.getStroke()||!Gt&&H.getStroke()||H.getText())&&(H=new _i({fill:Oe?new gA:void 0,stroke:Gt?new sn:void 0}),B[v]=H),Oe&&(Nt=H.getFill(),Nt.setColor(Oe)),Gt&&(bt=H.getStroke(),bt.setColor(Gt),bt.setWidth(.5)),H.setZIndex(Vr));if(M!=1&&P.type=="line"){"line-pattern"in fe?Oe=void 0:Oe=ti(J(P,"paint","line-color",x,h,N),J(P,"paint","line-opacity",x,h,N));const je=J(P,"paint","line-width",x,h,N);Oe&&je>0&&(++v,H=B[v],(!H||!H.getStroke()||H.getFill()||H.getText())&&(H=new _i({stroke:new sn}),B[v]=H),bt=H.getStroke(),bt.setLineCap(J(P,"layout","line-cap",x,h,N)),bt.setLineJoin(J(P,"layout","line-join",x,h,N)),bt.setMiterLimit(J(P,"layout","line-miter-limit",x,h,N)),bt.setColor(Oe),bt.setWidth(je),bt.setLineDash(fe["line-dasharray"]?J(P,"paint","line-dasharray",x,h,N).map(function(qe){return qe*je}):null),H.setZIndex(Vr))}let Vi=!1,we=null,Yu=0,$i,Rt,xa;if((M==1||M==2)&&"icon-image"in Le){const je=J(P,"layout","icon-image",x,h,N);if(je){$i=typeof je=="string"?gg(je,w):je.toString();let qe;const ke=o?o(i,$i):void 0,Ne=jI($i,a);if(A&&A[$i]&&Ne||ke){const ot=J(P,"layout","icon-rotation-alignment",x,h,N);if(M==2){const de=p.getGeometry();if(de.getFlatMidpoint||de.getFlatMidpoints){const _e=de.getExtent();if(Math.sqrt(Math.max(Math.pow((_e[2]-_e[0])/y,2),Math.pow((_e[3]-_e[1])/y,2)))>150){const dt=de.getType()==="MultiLineString"?de.getFlatMidpoints():de.getFlatMidpoint();if(ag||(Ls=[NaN,NaN],ag=new Sn("Point",Ls,[],2,{},void 0)),qe=ag,Ls[0]=dt[0],Ls[1]=dt[1],J(P,"layout","symbol-placement",x,h,N)==="line"&&ot==="map"){const lr=de.getStride(),Dt=de.getFlatCoordinates();for(let Ht=0,We=Dt.length-lr;Ht<We;Ht+=lr){const yt=Dt[Ht],tr=Dt[Ht+1],Xe=Dt[Ht+lr],Zr=Dt[Ht+lr+1],CB=Math.min(yt,Xe),EB=Math.max(yt,Xe),Fa=dt[0],BB=dt[1],pB=(Zr-tr)*(Fa-yt)-(Xe-yt)*(BB-tr);if(Math.abs(pB)<.001&&Fa<=EB&&Fa>=CB){Yu=Math.atan2(tr-Zr,Xe-yt);break}}}}}}if(M!==2||qe){const de=J(P,"layout","icon-size",x,h,N),_e=fe["icon-color"]!==void 0?J(P,"paint","icon-color",x,h,N):null;if(!_e||_e.a!==0){const lt=J(P,"paint","icon-halo-color",x,h,N),dt=J(P,"paint","icon-halo-width",x,h,N);let Br=`${$i}.${de}.${dt}.${lt}`;if(_e!==null&&(Br+=`.${_e}`),Rt=u[Br],!Rt){const lr=zI(P,x,"icon",h);let Dt;"icon-offset"in Le&&(Dt=J(P,"layout","icon-offset",x,h,N).slice(0),Dt[0]*=de,Dt[1]*=-de);let Ht=_e?[_e.r*255,_e.g*255,_e.b*255,_e.a]:void 0;if(ke){const We={color:Ht,rotateWithView:ot==="map",displacement:Dt,declutterMode:lr,scale:de};typeof ke=="string"?We.src=ke:(We.img=ke,We.imgSize=[ke.width,ke.height]),Rt=new gh(We)}else{const We=A[$i];let yt,tr,Xe;if(dt)We.sdf?(yt=HI(qI(Ne.image,We,_e||[0,0,0,1]),{x:0,y:0,width:We.width,height:We.height,pixelRatio:We.pixelRatio},dt,lt),Ht=void 0):yt=HI(Ne.image,We,dt,lt);else{if(We.sdf&&!Ne.unSDFed){const Zr=qI(Ne.image,{x:0,y:0,width:Ne.size[0],height:Ne.size[1]},{r:1,g:1,b:1});Ne.image=Zr,Ne.unSDFed=!0}yt=Ne.image,tr=[We.width,We.height],Xe=[We.x,We.y]}Rt=new gh({color:Ht,img:yt,imgSize:Ne.size,size:tr,offset:Xe,rotateWithView:ot==="map",scale:de/We.pixelRatio,displacement:Dt,declutterMode:lr})}u[Br]=Rt}}Rt&&(++v,H=B[v],(!H||!H.getImage()||H.getFill()||H.getStroke())&&(H=new _i,B[v]=H),H.setGeometry(qe),Rt.setRotation(Yu+sg(J(P,"layout","icon-rotate",x,h,N))),Rt.setOpacity(J(P,"paint","icon-opacity",x,h,N)),Rt.setAnchor(rT[J(P,"layout","icon-anchor",x,h,N)]),H.setImage(Rt),we=H.getText(),H.setText(void 0),H.setZIndex(Vr),Vi=!0,xa=!1)}else xa=!0}}}if(M==1&&P.type==="circle"){++v,H=B[v],(!H||!H.getImage()||H.getFill()||H.getStroke())&&(H=new _i,B[v]=H);const je="circle-radius"in fe?J(P,"paint","circle-radius",x,h,N):5,qe=ti(J(P,"paint","circle-stroke-color",x,h,N),J(P,"paint","circle-stroke-opacity",x,h,N)),ke=J(P,"paint","circle-translate",x,h,N),Ne=ti(J(P,"paint","circle-color",x,h,N),J(P,"paint","circle-opacity",x,h,N)),ot=J(P,"paint","circle-stroke-width",x,h,N),de=je+"."+qe+"."+Ne+"."+ot+"."+ke[0]+"."+ke[1];Rt=u[de],Rt||(Rt=new of({radius:je,displacement:[ke[0],-ke[1]],stroke:qe&&ot>0?new sn({width:ot,color:qe}):void 0,fill:Ne?new gA({color:Ne}):void 0,declutterMode:"none"}),u[de]=Rt),H.setImage(Rt),we=H.getText(),H.setText(void 0),H.setGeometry(void 0),H.setZIndex(Vr),Vi=!0}let It,$A,ZA,$r,WA,Ta;if("text-field"in Le){$r=Math.round(J(P,"layout","text-size",x,h,N));const je=J(P,"layout","text-font",x,h,N);ZA=J(P,"layout","text-line-height",x,h,N),$A=il(s?s(je,e.metadata?e.metadata["ol:webfonts"]:void 0):je,$r,ZA),$A.includes("sans-serif")||($A+=",sans-serif"),WA=J(P,"layout","text-letter-spacing",x,h,N),Ta=J(P,"layout","text-max-width",x,h,N);const qe=J(P,"layout","text-field",x,h,N);typeof qe=="object"&&qe.sections?qe.sections.length===1?It=qe.toString():It=qe.sections.reduce((ke,Ne,ot)=>{const de=Ne.fontStack?Ne.fontStack.split(","):je,_e=il(s?s(de):de,$r*(Ne.scale||1),ZA);let lt=Ne.text;if(lt===`
`)return ke.push(`
`,""),ke;if(M==2)return ke.push(Al(lt,WA),_e),ke;lt=nl(lt,_e,Ta,WA).split(`
`);for(let dt=0,Br=lt.length;dt<Br;++dt)dt>0&&ke.push(`
`,""),ke.push(lt[dt],_e);return ke},[]):It=gg(qe,w).trim(),tt=J(P,"paint","text-opacity",x,h,N)}if(It&&tt&&!xa){Vi||(++v,H=B[v],(!H||!H.getText()||H.getFill()||H.getStroke())&&(H=new _i,B[v]=H),H.setImage(void 0),H.setGeometry(void 0));const je=zI(P,x,"text",h);H.getText()||H.setText(we),we=H.getText(),(!we||"getDeclutterMode"in we&&we.getDeclutterMode()!==je)&&(we=new Py({padding:[2,2,2,2],declutterMode:je}),H.setText(we));const qe=J(P,"layout","text-transform",x,h,N);qe=="uppercase"?It=Array.isArray(It)?It.map((Xe,Zr)=>Zr%2?Xe:Xe.toUpperCase()):It.toUpperCase():qe=="lowercase"&&(It=Array.isArray(It)?It.map((Xe,Zr)=>Zr%2?Xe:Xe.toLowerCase()):It.toLowerCase());const ke=Array.isArray(It)?It:M==2?Al(It,WA):nl(It,$A,Ta,WA);if(we.setText(ke),we.setFont($A),we.setRotation(sg(J(P,"layout","text-rotate",x,h,N))),typeof we.setKeepUpright=="function"){const Xe=J(P,"layout","text-keep-upright",x,h,N);we.setKeepUpright(Xe)}const Ne=J(P,"layout","text-anchor",x,h,N),ot=Vi||M==1?"point":J(P,"layout","symbol-placement",x,h,N);let de;if(ot==="line-center"?(we.setPlacement("line"),de="center"):we.setPlacement(ot),ot==="line"&&typeof we.setRepeat=="function"){const Xe=J(P,"layout","symbol-spacing",x,h,N);we.setRepeat(Xe*2)}we.setOverflow(ot==="point");let _e=J(P,"paint","text-halo-width",x,h,N);const lt=J(P,"layout","text-offset",x,h,N),dt=J(P,"paint","text-translate",x,h,N);let Br=0,lr=0;if(ot=="point"){de="center",Ne.indexOf("left")!==-1?(de="left",lr=_e):Ne.indexOf("right")!==-1&&(de="right",lr=-_e);const Xe=J(P,"layout","text-rotation-alignment",x,h,N);we.setRotateWithView(Xe=="map")}else we.setMaxAngle(sg(J(P,"layout","text-max-angle",x,h,N))*It.length/ke.length),we.setRotateWithView(!1);we.setTextAlign(de);let Dt="middle";Ne.indexOf("bottom")==0?(Dt="bottom",Br=-_e-.5*(ZA-1)*$r):Ne.indexOf("top")==0&&(Dt="top",Br=_e+.5*(ZA-1)*$r),we.setTextBaseline(Dt);const Ht=J(P,"layout","text-justify",x,h,N);we.setJustify(Ht==="auto"?void 0:Ht),we.setOffsetX(lt[0]*$r+lr+dt[0]),we.setOffsetY(lt[1]*$r+Br+dt[1]),E.setColor(ti(J(P,"paint","text-color",x,h,N),tt)),we.setFill(E);const We=ti(J(P,"paint","text-halo-color",x,h,N),tt);if(We&&_e>0){C.setColor(We),_e*=2;const Xe=.5*$r;C.setWidth(_e<=Xe?_e:Xe),we.setStroke(C)}else we.setStroke(void 0);const yt=J(P,"layout","text-padding",x,h,N),tr=we.getPadding();yt!==tr[0]&&(tr[0]=yt,tr[1]=yt,tr[2]=yt,tr[3]=yt),H.setZIndex(Vr)}}}if(v>-1)return B.length=v+1,B};return i.setStyle(m),i.set("mapbox-layers",c),i.set("mapbox-source",f),i.set("mapbox-featurestate",i.get("mapbox-featurestate")||{}),m}function aT(i,e){const t=i[0],r=t.width,A=t.height,n=t.data,s=new Uint8ClampedArray(n.length),o=e.resolution*2,a=r-1,g=A-1,l=[0,0,0,0],c=2*Math.PI,u=Math.PI/2,I=Math.PI*e.sunEl/180,h=Math.PI*e.sunAz/180,d=Math.cos(I),f=Math.sin(I),C=e.highlightColor,E=e.shadowColor,B=e.accentColor,m=e.encoding;let p,y,Q,_,w,S,R,F,M,G,x,N,v,z,q,$,re,Qe,te,P,Me,Le;function fe(Ze,Oe="mapbox"){if(Oe==="mapbox")return(Ze[0]*256*256+Ze[1]*256+Ze[2])*.1-1e4;if(Oe==="terrarium")return Ze[0]*256+Ze[1]+Ze[2]/256-32768}for(y=0;y<=g;++y)for(w=y===0?0:y-1,S=y===g?g:y+1,p=0;p<=a;++p)Q=p===0?0:p-1,_=p===a?a:p+1,R=(y*r+Q)*4,l[0]=n[R],l[1]=n[R+1],l[2]=n[R+2],l[3]=n[R+3],F=e.vert*fe(l,m),R=(y*r+_)*4,l[0]=n[R],l[1]=n[R+1],l[2]=n[R+2],l[3]=n[R+3],M=e.vert*fe(l,m),G=(M-F)/o,R=(w*r+p)*4,l[0]=n[R],l[1]=n[R+1],l[2]=n[R+2],l[3]=n[R+3],F=e.vert*fe(l,m),R=(S*r+p)*4,l[0]=n[R],l[1]=n[R+1],l[2]=n[R+2],l[3]=n[R+3],M=e.vert*fe(l,m),x=(M-F)/o,v=Math.atan2(x,-G),v<0?v=u-v:v>u?v=c-v+u:v=u-v,N=Math.atan(Math.sqrt(G*G+x*x)),Le=f*Math.cos(N)+d*Math.sin(N)*Math.cos(h-v),z=Math.cos(N),q=255*Le,te=Math.min(Math.max(2*e.sunEl,0),1),P=1.875-e.opacity*1.75,Me=e.opacity!==.5?u*((Math.pow(P,N)-1)/(Math.pow(P,u)-1)):N,re={r:(1-z)*B.r*te*255,g:(1-z)*B.g*te*255,b:(1-z)*B.b*te*255,a:(1-z)*B.a*te*255},$=Math.abs(((v+h)/Math.PI+.5)%2-1),Qe={r:(C.r*(1-$)+E.r*$)*q,g:(C.g*(1-$)+E.g*$)*q,b:(C.b*(1-$)+E.b*$)*q,a:(C.a*(1-$)+E.a*$)*q},R=(y*r+p)*4,s[R]=re.r*(1-$)+Qe.r,s[R+1]=re.g*(1-$)+Qe.g,s[R+2]=re.b*(1-$)+Qe.b,s[R+3]=n[R+3]*e.opacity*te*Math.sin(Me);return new ImageData(s,r,A)}function gT(i,e){const t=i[0],r=t.width,A=t.height,n=t.data,s=new Uint8ClampedArray(n.length),o=r-1,a=A-1,g=[0,0,0,0];let l,c,u;function I(_){return _>0?1/(1-_):1+_}function h(_){return _>0?1-1/(1.001-_):-_}function d(_){_*=Math.PI/180;const w=Math.sin(_),S=Math.cos(_);return[(2*S+1)/3,(-Math.sqrt(3)*w-S+1)/3,(Math.sqrt(3)*w-S+1)/3]}const f=h(e.saturation),C=I(e.contrast),E=d(e.hueRotate),B=E,m=[E[2],E[0],E[1]],p=[E[1],E[2],E[0]],y=e.brightnessLow,Q=e.brightnessHigh;for(c=0;c<=a;++c)for(l=0;l<=o;++l){u=(c*r+l)*4,g[0]=n[u],g[1]=n[u+1],g[2]=n[u+2],g[3]=n[u+3];const _=g[0],w=g[1],S=g[2],R=(N,v)=>{let z=0;for(let q=0;q<N.length;q++)z+=N[q]*v[q];return z};let F=R([_,w,S],B),M=R([_,w,S],m),G=R([_,w,S],p);const x=(F+M+G)/3;F+=(x-F)*f,M+=(x-M)*f,G+=(x-G)*f,F=(F-.5)*C+.5,M=(M-.5)*C+.5,G=(G-.5)*C+.5,F=y*(255-F)+Q*F,M=y*(255-M)+Q*M,G=y*(255-G)+Q*G,s[u]=F,s[u+1]=M,s[u+2]=G,s[u+3]=g[3]}return new ImageData(s,r,A)}function lT(i,e=512){return i.getExtent()?ts({extent:i.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Cr}function OE(i,e){return e.accessToken||(e=Object.assign({},e),new URL(i).searchParams.forEach((r,A)=>{e.accessToken=r,e.accessTokenParam=A})),e}function cT(i,e,t="",r={},A=void 0){let n,s,o,a,g=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,a=o.source||o.layers,r=o):a=t,typeof r=="string"?(n=r,o={}):(n=r.styleUrl,o=r),o.updateSource===!1&&(g=!1),A||(A=o.resolutions),!n&&typeof e=="string"&&!e.trim().startsWith("{")&&(n=e),n&&(n=n.startsWith("data:")?location.href:So(n,o.accessToken),o=OE(n,o)),new Promise(function(l,c){kE(e,o).then(function(u){if(u.version!=8)return c(new Error("glStyle version 8 required."));if(!(i instanceof jo||i instanceof CA))return c(new Error("Can only apply to VectorLayer or VectorTileLayer"));const I=i instanceof CA?"vector":"geojson";if(a?Array.isArray(a)?s=u.layers.find(function(m){return m.id===a[0]}).source:s=a:(s=u.layers.find(function(m){return m.source&&u.sources[m.source].type===I}).source,a=s),!s)return c(new Error(`No ${I} source found in the glStyle.`));function h(){if(!g)return Promise.resolve();if(i instanceof CA)return HE(u.sources[s],n,o).then(function(Q){const _=i.getSource();_?Q!==_&&(_.setTileUrlFunction(Q.getTileUrlFunction()),typeof _.setUrls=="function"&&typeof Q.getUrls=="function"&&_.setUrls(Q.getUrls()),_.format_||(_.format_=Q.format_),_.getAttributions()||_.setAttributions(Q.getAttributions()),_.getTileLoadFunction()===Hf&&_.setTileLoadFunction(Q.getTileLoadFunction()),Tt(_.getProjection(),Q.getProjection())&&(_.tileGrid=Q.getTileGrid())):i.setSource(Q);const w=i.getSource().getTileGrid();!isFinite(i.getMaxResolution())&&!isFinite(i.getMinZoom())&&w.getMinZoom()>0&&i.setMaxResolution(an(Math.max(0,w.getMinZoom()-1e-12),w.getResolutions()))});const m=u.sources[s];let p=i.getSource();(!p||p.get("mapbox-source")!==m)&&(p=JE(m,n,o));const y=i.getSource();return y?p!==y&&(y.getAttributions()||y.setAttributions(p.getAttributions()),y.format_||(y.format_=p.getFormat()),y.url_=p.getUrl()):i.setSource(p),Promise.resolve()}let d,f;const C={},E={};function B(){if(!f&&(!u.sprite||C)){if(o.projection&&!A){const Q=Pe(o.projection).getUnits();Q!=="m"&&(A=Cr.map(_=>_/bg[Q]))}let m;const p=i.getSource();p instanceof is&&p.format_ instanceof Pc&&(m=p.format_.layerName_),f=oT(i,u,a,A,C,E,(y,Q=o.webfonts)=>eT(y,Q),o.getImage,m),i.getStyle()?h().then(l).catch(c):c(new Error(`Nothing to show for source [${s}]`))}else f?(i.setStyle(f),h().then(l).catch(c)):c(new Error("Something went wrong trying to apply style."))}if(u.sprite){const m=q2(u.sprite,o.accessToken,n||location.href);d=zo?1:window.devicePixelRatio>=1.5?.5:1;const p=d==.5?"@2x":"";Promise.all(m.map(function(y){const Q=new URL(y.url);let _=Q.origin+Q.pathname+p+".json"+Q.search;return new Promise(function(w,S){xA("Sprite",_,o).then(w).catch(function(R){_=Q.origin+Q.pathname+".json"+Q.search,xA("Sprite",_,o).then(w).catch(S)})}).then(function(w){w===void 0&&c(new Error("No sprites found."));let S;if(S=Q.origin+Q.pathname+p+".png"+Q.search,o.transformRequest){const R=o.transformRequest(S,"SpriteImage")||S;(R instanceof Request||R instanceof Promise)&&(S=R)}E[y.id]=S;for(const R in w){const F=y.id=="default"?R:`${y.id}:${R}`;C[F]=w[R]}}).catch(function(w){c(new Error(`Sprites cannot be loaded: ${_}: ${w.message}`))})})).then(B).catch(c)}else B()}).catch(c)})}function YE(i,e){let t;return i.some(function(r){if(r.id==e)return t=r.source,!0}),t}function uT(i,e){const t=i.bounds;if(t){const r=Rg([t[0],t[1]],e),A=Rg([t[2],t[3]],e);return[r[0],r[1],A[0],A[1]]}return Pe(e).getExtent()}function KE(i,e,t){const r=new lc({tileJSON:e,tileSize:i.tileSize||e.tileSize||512}),A=r.getTileJSON(),n=r.getTileGrid(),s=Pe(t.projection||"EPSG:3857"),o=uT(A,s),a=s.getExtent(),g=A.minzoom||0,l=A.maxzoom||22,c={attributions:r.getAttributions(),projection:s,tileGrid:new Ol({origin:a?nf(a):n.getOrigin(0),extent:o||n.getExtent(),minZoom:g,resolutions:lT(s,e.tileSize).slice(0,l+1),tileSize:n.getTileSize(0)})};return Array.isArray(A.tiles)?c.urls=A.tiles:c.url=A.tiles,c}function hT(i,e,t,r){const A={id:i.id,type:i.type},n=i.layout||{},s=i.paint||{};A.paint=s,Ft.zoom=bo(e,t.resolutions||Cr),Ft.distanceFromCenter=0;let o;const a=J(A,"paint","background-color",wt,r);return s["background-opacity"]!==void 0&&(o=J(A,"paint","background-opacity",wt,r)),n.visibility=="none"?void 0:ti(a,o)}function IT(i,e,t){const r=zo?{style:{}}:document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Wd({source:new qo({}),render(A){const n=hT(i,A.viewState.resolution,e,t);return r.style.backgroundColor=n,r}})}function HE(i,e,t){return new Promise(function(r,A){PE(i,e,t).then(function({tileJson:n,tileLoadFunction:s}){const o=KE(i,n,t);o.tileLoadFunction=s,o.format=new Pc({layerName:"mvt:layer"});const a=new is(o);a.set("mapbox-source",i),r(a)}).catch(A)})}function dT(i,e,t){const r=new CA({declutter:!0,visible:!1});return HE(i,e,t).then(function(A){r.setSource(A)}).catch(function(A){r.setSource(void 0)}),r}function qE(i){return`{bbox-${(i?i.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function fT(i,e,t){return new Promise(function(r,A){PE(i,e,t).then(function({tileJson:n,tileLoadFunction:s}){const o=new lc({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:n});o.tileGrid=KE(i,n,t).tileGrid,t.projection&&(o.projection=Pe(t.projection));const a=o.getTileUrlFunction();s&&o.setTileLoadFunction(s),o.setTileUrlFunction(function(g,l,c){const u=qE(c);let I=a(g,l,c);if(I.indexOf(u)!=-1){const h=o.getTileGrid().getTileCoordExtent(g);I=I.replace(u,h.toString())}return I}),o.set("mapbox-source",i),r(o)}).catch(function(n){A(n)})})}function fu(i,e,t){const r=new oo;return fT(i,e,t).then(function(A){r.setSource(A)}).catch(function(){r.setSource(void 0)}),r}function CT(i,e,t){const r=fu(i,e,t);return new Zo({source:new gc({operationType:"image",operation:gT,sources:[r]})})}function ET(i,e,t){const r=fu(i,e,t);return new Zo({source:new gc({operationType:"image",operation:aT,sources:[r]})})}function JE(i,e,t){const r=t.projection?new Kg({dataProjection:t.projection}):new Kg,A=i.data,n={};if(typeof A=="string"){const[o]=Ys(A,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const g=(c,u,I)=>{const h=qE(I);return o.replace(h,`${c.join(",")}`)},l=new un({attributions:i.attribution,format:r,loader:(c,u,I,h,d)=>{const f=typeof g=="function"?g(c,u,I):g;xA("GeoJSON",f,t).then(C=>{const E=l.getFormat().readFeatures(C,{featureProjection:I});l.addFeatures(E),h(E)}).catch(C=>{l.removeLoadedExtent(c),d()})},strategy:Vy});return l.set("mapbox-source",i),l}const a=new un({attributions:i.attribution,format:r,url:o,loader:(g,l,c,u,I)=>{xA("GeoJSON",o,t).then(h=>{const d=a.getFormat().readFeatures(h,{featureProjection:c});a.addFeatures(d),u(d)}).catch(h=>{a.removeLoadedExtent(g),I()})}});return a}n.features=r.readFeatures(A,{featureProjection:"EPSG:3857"});const s=new un(Object.assign({attributions:i.attribution,format:r},n));return s.set("mapbox-source",i),s}function BT(i,e,t){return new jo({declutter:!0,source:JE(i,e,t),visible:!1})}function pT(i,e,t){let r=null;return function(A){i.paint&&"raster-opacity"in i.paint&&A.frameState.viewState.zoom!==r&&(r=A.frameState.viewState.zoom,delete t[i.id],yT(i,e,r,t))}}function yT(i,e,t,r){Ft.zoom=t,Ft.distanceFromCenter=0;const A=J(i,"paint","raster-opacity",wt,r);e.setOpacity(A)}function mT(i,e){function t(){const r=e.get("mapbox-style");if(!r)return;const A=uE(r.layers),n=i.get("mapbox-layers"),s=A.filter(function(o){return n.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});i.get("visible")!==s&&i.setVisible(s)}i.on("change",t),t()}function QT(i,e,t,r){const A=ME(i),n=i.layers,s=t.type;let o=t.source||YE(n,t.ref);const a=i.sources[o];let g;if(s=="background")g=IT(t,r,A),o=void 0;else if(a.type=="vector")g=dT(a,e,r);else if(a.type=="raster"){const l=["raster-saturation","raster-contrast","raster-brightness-max","raster-brightness-min","raster-hue-rotate"];!!Object.keys(t.paint||{}).find(u=>l.includes(u))?(g=CT(a,e,r),g.getSource().on("beforeoperations",function(u){Ft.zoom=bo(u.resolution,r.resolutions||Cr),Ft.distanceFromCenter=0;const I=u.data;I.saturation=J(t,"paint","raster-saturation",wt,A),I.contrast=J(t,"paint","raster-contrast",wt,A),I.brightnessHigh=J(t,"paint","raster-brightness-max",wt,A),I.brightnessLow=J(t,"paint","raster-brightness-min",wt,A),I.hueRotate=J(t,"paint","raster-hue-rotate",wt,A)})):g=fu(a,e,r),g.setVisible(t.layout?t.layout.visibility!=="none":!0),g.on("prerender",pT(t,g,A))}else if(a.type=="geojson")g=BT(a,e,r);else if(a.type=="raster-dem"&&t.type=="hillshade"){const l=ET(a,e,r);g=l,l.getSource().on("beforeoperations",function(c){const u=c.data;u.resolution=Oy(r.projection||"EPSG:3857",c.resolution,MA(c.extent),"m"),Ft.zoom=bo(c.resolution,r.resolutions||Cr),Ft.distanceFromCenter=0,u.encoding=a.encoding,u.vert=5*J(t,"paint","hillshade-exaggeration",wt,A),u.sunAz=J(t,"paint","hillshade-illumination-direction",wt,A),u.sunEl=35,u.opacity=.3,u.highlightColor=J(t,"paint","hillshade-highlight-color",wt,A),u.shadowColor=J(t,"paint","hillshade-shadow-color",wt,A),u.accentColor=J(t,"paint","hillshade-accent-color",wt,A)}),g.setVisible(t.layout?t.layout.visibility!=="none":!0)}return g&&g.set("mapbox-source",o),g}function VI(i,e,t,r){const A=[];let n=null;if(e instanceof so){if(n=e.getView(),!n.isDef()&&!n.getRotation()&&!n.getResolutions()){const c=r.projection?Pe(r.projection):n.getProjection();n=new Uy(Object.assign(n.getProperties(),{maxResolution:Cr[0]/bg[c.getUnits()],projection:r.projection||n.getProjection()})),e.setView(n)}"center"in i&&!n.getCenter()&&n.setCenter(Rg(i.center,n.getProjection())),"zoom"in i&&n.getZoom()===void 0&&n.setResolution(Cr[0]/bg[n.getProjection().getUnits()]/Math.pow(2,i.zoom)),(!n.getCenter()||n.getZoom()===void 0)&&n.fit(n.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",i),e.set("mapbox-metadata",{styleUrl:t,options:r});const s=i.layers;let o=[],a,g,l;for(let c=0,u=s.length;c<u;++c){const I=s[c],h=I.type;if(h=="heatmap"){console.debug(`layers[${c}].type "${h}" not supported`);continue}else l=I.source||YE(s,I.ref),(!l||l!=g)&&(o.length&&(A.push($I(a,o,i,t,e,r)),o=[]),a=QT(i,t,I,r),a instanceof jo||a instanceof CA||(o=[]),g=a.get("mapbox-source")),o.push(I.id)}return A.push($I(a,o,i,t,e,r)),Promise.all(A)}function wT(i,e,t={}){let r,A;if(zo){if(!(i instanceof so)&&!(i instanceof af))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");A=i}else typeof i=="string"||i instanceof HTMLElement?A=new so({target:i}):A=i;if(typeof e=="string"){const n=e.startsWith("data:")?location.href:So(e,t.accessToken);t=OE(n,t),r=new Promise(function(s,o){kE(e,t).then(function(a){VI(a,A,n,t).then(function(){s(A)}).catch(o)}).catch(function(a){o(new Error(`Could not load ${e}: ${a.message}`))})})}else r=new Promise(function(n,s){VI(e,A,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:So(t.styleUrl,t.accessToken),t).then(function(){n(A)}).catch(s)});return r}function $I(i,e,t,r,A,n={}){let s=24,o=0;const a=t.layers;for(let g=0,l=a.length;g<l;++g){const c=a[g];e.indexOf(c.id)!==-1&&(s=Math.min("minzoom"in c?c.minzoom:0,s),o=Math.max("maxzoom"in c?c.maxzoom:24,o))}return new Promise(function(g,l){const c=function(){const I=i.getSource();if(!I||I.getState()==="error"){l(new Error("Error accessing data for source "+i.get("mapbox-source")));return}if("getTileGrid"in I){const h=I.getTileGrid();if(h){const d=h.getMinZoom();(s>0||d>0)&&i.setMaxResolution(Math.min(an(Math.max(0,s-1e-12),Cr),an(Math.max(0,d-1e-12),h.getResolutions()))),o<24&&i.setMinResolution(an(o,Cr))}}else s>0&&i.setMaxResolution(an(Math.max(0,s-1e-12),Cr));I instanceof un||I instanceof is?cT(i,t,e,Object.assign({styleUrl:r},n)).then(function(){mT(i,A),g()}).catch(l):g()};i.set("mapbox-layers",e);const u=A.getLayers();u.getArray().indexOf(i)===-1&&u.push(i),i.getSource()?c():i.once("change:source",c)})}class _T extends up{constructor(e={}){const{mapboxStyle:t,applyOptions:r,...A}=e;super(A),t&&this.applyMapboxStyle(t,r)}applyMapboxStyle(e,t){return wT(this,e,t)}}hp(sm);window.eoxMapAdvancedOlLayers={Graticule:ZS,Heatmap:Jb,Layer:Tl,VectorImage:Vb,WebGLPoints:Zb,WebGLTile:vC,WebGLVector:Wb,STAC:qc,MapboxStyle:_T};function ST(i){const e=i[0],t=new Array(e);let r=1<<e-1,A,n;for(A=0;A<e;++A)n=48,i[1]&r&&(n+=1),i[2]&r&&(n+=2),t[A]=String.fromCharCode(n),r>>=1;return t.join("")}const bT='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class RT extends jr{constructor(e){const t=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:pe("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=t,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const r=(e.url||"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/")+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(A=>A.json()).then(A=>this.handleImageryMetadataResponse(A))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const t=e.resourceSets[0].resources[0],r=this.maxZoom_==-1?t.zoomMax:this.maxZoom_,A=this.getProjection(),n=Wn(A),s=this.hidpi_?2:1,o=t.imageWidth==t.imageHeight?t.imageWidth/s:[t.imageWidth/s,t.imageHeight/s],a=Xn({extent:n,minZoom:t.zoomMin,maxZoom:r,tileSize:o});this.tileGrid=a;const g=this.culture_,l=this.hidpi_,c=this.placeholderTiles_;if(this.tileUrlFunction=Fl(t.imageUrlSubdomains.map(function(u){const I=[0,0,0],h=t.imageUrl.replace("{subdomain}",u).replace("{culture}",g);return function(d,f,C){if(!d)return;Qg(d[0],d[1],d[2],I);const E=new URL(h.replace("{quadkey}",ST(I))),B=E.searchParams;return l&&(B.set("dpi","d1"),B.set("device","mobile")),c===!0?B.delete("n"):c===!1&&B.set("n","z"),E.toString()}})),t.imageryProviders){const u=Ll(pe("EPSG:4326"),this.getProjection());this.setAttributions(I=>{const h=[],d=I.viewState,f=this.getTileGrid(),C=f.getZForResolution(d.resolution,this.zDirection),B=f.getTileCoordForCoordAndZ(d.center,C)[0];return t.imageryProviders.map(function(m){let p=!1;const y=m.coverageAreas;for(let Q=0,_=y.length;Q<_;++Q){const w=y[Q];if(B>=w.zoomMin&&B<=w.zoomMax){const S=w.bbox,R=[S[1],S[0],S[3],S[2]],F=SA(R,u);if(_A(F,I.extent)){p=!0;break}}}p&&h.push(m.attribution)}),h.push(bT),h})}this.setState("ready")}}class DT extends Ud{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:e.maxZoom!==void 0?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(e){Object.assign(this.config_,e),this.initializeMap_()}setConfig(e){this.config_=e||{},this.initializeMap_()}initializeMap_(){const e=JSON.stringify(this.config_);if(this.templateCache_[e]){this.applyTemplate_(this.templateCache_[e]);return}let t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,e)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",t),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(e,t){const r=t.target;if(!r.status||r.status>=200&&r.status<300){let A;try{A=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(A),this.templateCache_[e]=A,this.setState("ready")}else this.setState("error")}handleInitError_(e){this.setState("error")}applyTemplate_(e){const t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)}}const xT=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,TT=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class FT{constructor(e){this.gl_=e,this.program_=sl(e,TT,xT),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,A,n,s,o,a,g,l,c,u,I){const h=this.gl_;a===void 0&&(a=A),g===void 0&&(g=n),s===void 0&&(s=t),o===void 0&&(o=r),l===void 0&&(l=s),c===void 0&&(c=o),u===void 0&&(u=h.canvas.width),I===void 0&&(I=h.canvas.height),h.bindTexture(h.TEXTURE_2D,e),h.useProgram(this.program_),h.bindBuffer(h.ARRAY_BUFFER,this.positionBuffer),h.enableVertexAttribArray(this.positionLocation),h.vertexAttribPointer(this.positionLocation,2,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,this.texcoordBuffer),h.enableVertexAttribArray(this.texcoordLocation),h.vertexAttribPointer(this.texcoordLocation,2,h.FLOAT,!1,0,0);let d=kg(0,u,0,I,-1,1);d=WS(d,a,g,0),d=jh(d,l,c,1),h.uniformMatrix4fv(this.matrixLocation,!1,d);let f=XS(A/t,n/r,0);f=jh(f,s/t,o/r,1),h.uniformMatrix4fv(this.textureMatrixLocation,!1,f),h.uniform1i(this.textureLocation,0),h.drawArrays(h.TRIANGLES,0,this.positions.length/2)}}function ZI(i,e,t){const r=i.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){const A=i.getShaderInfoLog(r);throw A===null?new Error("Shader info log creation failed"):new Error(A)}return r}function sl(i,e,t){const r=i.createProgram(),A=ZI(i,i.VERTEX_SHADER,t),n=ZI(i,i.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(i.attachShader(r,A),i.attachShader(r,n),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw i.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const LT=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,NT=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,GT=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,vT=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function MT(i,e,t,r){let A;return t&&t.length?A=t.shift():Ip?A=new OffscreenCanvas(i||300,e||300):A=document.createElement("canvas"),i&&(A.width=i),e&&(A.height=e),A.getContext("webgl",r)}function kT(i){const e=i.canvas;e.width=1,e.height=1,i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)}const WI=[];function PT(i,e,t,r,A,n,s,o,a,g,l,c,u,I){const h=Math.round(r*e),d=Math.round(r*t);i.canvas.width=h,i.canvas.height=d;let f,C;if(C=i.createTexture(),i.bindTexture(i.TEXTURE_2D,C),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),u?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,h,d,0,i.RGBA,l,null),f=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,f),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,C,0),f===null)throw new Error("Could not create framebuffer");if(C===null)throw new Error("Could not create texture");if(a.length===0)return{width:h,height:d,framebuffer:f,texture:C};const E=Zn();a.forEach(function(S,R,F){dp(E,S.extent)});let B,m,p;const y=1/A;{if(B=i.createTexture(),C===null)throw new Error("Could not create texture");m=Math.round(Bt(E)*y),p=Math.round(fr(E)*y);const S=i.getParameter(i.MAX_TEXTURE_SIZE),R=Math.max(m,p),F=R>S?S/R:1,M=Math.round(m*F),G=Math.round(p*F);i.bindTexture(i.TEXTURE_2D,B),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),u?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,M,G,0,i.RGBA,l,null);const x=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,x),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,B,0);const N=new FT(i);a.forEach(function(v,z,q){const $=(v.extent[0]-E[0])*y*F,re=-(v.extent[3]-E[3])*y*F,Qe=Bt(v.extent)*y*F,te=fr(v.extent)*y*F;if(i.bindFramebuffer(i.FRAMEBUFFER,x),i.viewport(0,0,M,G),v.clipExtent){const P=(v.clipExtent[0]-E[0])*y*F,Me=-(v.clipExtent[3]-E[3])*y*F,Le=Bt(v.clipExtent)*y*F,fe=fr(v.clipExtent)*y*F;i.enable(i.SCISSOR_TEST),i.scissor(u?P:Math.round(P),u?Me:Math.round(Me),u?Le:Math.round(P+Le)-Math.round(P),u?fe:Math.round(Me+fe)-Math.round(Me))}N.drawImage(v.texture,v.width,v.height,g,g,v.width-2*g,v.height-2*g,u?$:Math.round($),u?re:Math.round(re),u?Qe:Math.round($+Qe)-Math.round($),u?te:Math.round(re+te)-Math.round(re),M,G),i.disable(i.SCISSOR_TEST)}),i.deleteFramebuffer(x)}const Q=wg(s),_=wg(E),w=S=>{const R=(S[0][0]-Q[0])/n*r,F=-(S[0][1]-Q[1])/n*r,M=(S[1][0]-Q[0])/n*r,G=-(S[1][1]-Q[1])/n*r,x=(S[2][0]-Q[0])/n*r,N=-(S[2][1]-Q[1])/n*r;return{u1:M,v1:G,u0:R,v0:F,u2:x,v2:N}};i.bindFramebuffer(i.FRAMEBUFFER,f),i.viewport(0,0,h,d);{const S=[],R=[],F=sl(i,vT,GT);i.useProgram(F);const M=i.getUniformLocation(F,"u_texture");i.bindTexture(i.TEXTURE_2D,B),i.uniform1i(M,0),o.getTriangles().forEach(function($,re,Qe){const te=$.source,P=$.target,{u1:Me,v1:Le,u0:fe,v0:Ze,u2:Oe,v2:tt}=w(P),Nt=(te[0][0]-_[0])/A/m,bt=-(te[0][1]-_[1])/A/p,Gt=(te[1][0]-_[0])/A/m,H=-(te[1][1]-_[1])/A/p,Vr=(te[2][0]-_[0])/A/m,Vi=-(te[2][1]-_[1])/A/p;S.push(Me,Le,fe,Ze,Oe,tt),R.push(Gt,H,Nt,bt,Vr,Vi)});const G=kg(0,h,d,0,-1,1),x=i.getUniformLocation(F,"u_matrix");i.uniformMatrix4fv(x,!1,G);const N=i.getAttribLocation(F,"a_position"),v=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,v),i.bufferData(i.ARRAY_BUFFER,new Float32Array(S),i.STATIC_DRAW),i.vertexAttribPointer(N,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(N);const z=i.getAttribLocation(F,"a_texcoord"),q=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,q),i.bufferData(i.ARRAY_BUFFER,new Float32Array(R),i.STATIC_DRAW),i.vertexAttribPointer(z,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(z),i.drawArrays(i.TRIANGLES,0,S.length/2)}if(c){const S=sl(i,NT,LT);i.useProgram(S);const R=kg(0,h,d,0,-1,1),F=i.getUniformLocation(S,"u_matrix");i.uniformMatrix4fv(F,!1,R);const M=Array.isArray(c)?c:[0,0,0,255],G=i.getUniformLocation(S,"u_val");i.uniform4fv(G,M);const x=i.getAttribLocation(S,"a_position"),N=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,N),i.vertexAttribPointer(x,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(x);const v=o.getTriangles().reduce(function(z,q){const $=q.target,{u1:re,v1:Qe,u0:te,v0:P,u2:Me,v2:Le}=w($);return z.concat([re,Qe,te,P,te,P,Me,Le,Me,Le,re,Qe])},[]);i.bufferData(i.ARRAY_BUFFER,new Float32Array(v),i.STATIC_DRAW),i.drawArrays(i.LINES,0,v.length/2)}return{width:h,height:d,framebuffer:f,texture:C}}class UT extends Rl{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),A=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?A?br(r,A):r:A;const n=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent();let o=this.sourceTileGrid_.getExtent();const a=s?br(n,s):n;if(Zu(a)===0){this.state=Ie.EMPTY;return}r&&(o?o=br(o,r):o=r);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),l=e.targetProj,c=fp(t,l,a,g);if(!isFinite(c)||c<=0){this.state=Ie.EMPTY;return}const u=e.errorThreshold!==void 0?e.errorThreshold:Cp;if(this.triangulation_=new Ep(t,l,a,o,c*u,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=Ie.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let I=this.triangulation_.calculateSourceExtent();if(o&&(t.canWrapX()?(I[1]=Je(I[1],o[1],o[3]),I[3]=Je(I[3],o[1],o[3])):I=br(I,o)),!Zu(I))this.state=Ie.EMPTY;else{let h=0,d=0;t.canWrapX()&&(h=Bt(r),d=Math.floor((I[0]-r[0])/h)),Bp(I.slice(),t,!0).forEach(C=>{const E=this.sourceTileGrid_.getTileRangeForExtentAndZ(C,this.sourceZ_),B=e.getTileFunction;for(let m=E.minX;m<=E.maxX;m++)for(let p=E.minY;p<=E.maxY;p++){const y=B(this.sourceZ_,m,p,this.pixelRatio_);if(y){const Q=d*h;this.sourceTiles_.push({tile:y,offset:Q})}}++d}),this.sourceTiles_.length===0&&(this.state=Ie.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(m=>{var re;const p=m.tile;if(!p||p.getState()!==Ie.LOADED)return;const y=p.getSize(),Q=this.gutter_;let _;const w=pg(p.getData());w?_=w:(t=!0,_=pp(yg(p.getData())));const S=[y[0]+2*Q,y[1]+2*Q],R=_ instanceof Float32Array,F=S[0]*S[1],M=R?Float32Array:Uint8ClampedArray,G=new M(_.buffer),x=M.BYTES_PER_ELEMENT,N=x*G.length/F,v=G.byteLength/S[1],z=Math.floor(v/x/S[0]),q=this.sourceTileGrid_.getTileCoordExtent(p.tileCoord);q[0]+=m.offset,q[2]+=m.offset;const $=(re=this.clipExtent_)==null?void 0:re.slice();$&&($[0]+=m.offset,$[2]+=m.offset),e.push({extent:q,clipExtent:$,data:G,dataType:M,bytesPerPixel:N,pixelSize:S,bandCount:z})}),this.sourceTiles_.length=0,e.length===0){this.state=Ie.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],A=this.targetTileGrid_.getTileSize(r),n=typeof A=="number"?A:A[0],s=typeof A=="number"?A:A[1],o=Math.round(n*this.pixelRatio_),a=Math.round(s*this.pixelRatio_),g=this.targetTileGrid_.getResolution(r),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),u=e[0].bandCount,I=new e[0].dataType(u*o*a),h=MT(o,a,WI,{premultipliedAlpha:!1,antialias:!1});let d;const f=h.RGBA;let C;e[0].dataType==Float32Array?(C=h.FLOAT,h.getExtension("WEBGL_color_buffer_float"),h.getExtension("OES_texture_float"),h.getExtension("EXT_float_blend"),d=h.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(C=h.UNSIGNED_BYTE,d=this.interpolate);const E=4,B=Math.ceil(u/E);for(let m=B-1;m>=0;--m){const p=[];for(let M=0,G=e.length;M<G;++M){const x=e[M],N=x.pixelSize,v=N[0],z=N[1],q=new x.dataType(E*v*z),$=x.data;let re=m*E;for(let te=0,P=q.length;te<P;te+=E)q[te]=$[re],q[te+1]=$[re+1],q[te+2]=$[re+2],q[te+3]=$[re+3],re+=u;const Qe=h.createTexture();h.bindTexture(h.TEXTURE_2D,Qe),d?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST)),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texImage2D(h.TEXTURE_2D,0,f,v,z,0,f,C,q),p.push({extent:x.extent,clipExtent:x.clipExtent,texture:Qe,width:v,height:z})}const{framebuffer:y,width:Q,height:_}=PT(h,n,s,this.pixelRatio_,l,g,c,this.triangulation_,p,this.gutter_,C,this.renderEdges_,d),w=Q,S=_*E,R=new e[0].dataType(w*S);h.bindFramebuffer(h.FRAMEBUFFER,y),h.readPixels(0,0,Q,_,h.RGBA,C,R);let F=m*E;for(let M=0,G=R.length;M<G;M+=E){const x=(w-1-(M/S|0))*S+M%S;I[F]=R[x],I[F+1]=R[x+1],I[F+2]=R[x+2],I[F+3]=R[x+3],F+=u}}if(kT(h),WI.push(h.canvas),t){const m=hi(n,s),p=new ImageData(I,n);m.putImageData(p,0,0),this.reprojData_=m.canvas}else this.reprojData_=I;this.reprojSize_=[o,a],this.state=Ie.LOADED,this.changed()}load(){if(this.state!==Ie.IDLE&&this.state!==Ie.ERROR)return;this.state=Ie.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r!==Ie.IDLE&&r!==Ie.LOADING)return;e++;const A=Ur(t,Pt.CHANGE,()=>{const n=t.getState();(n==Ie.LOADED||n==Ie.ERROR||n==Ie.EMPTY)&&(Xs(A),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(A)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==Ie.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xs),this.sourcesListenerKeys_=null}}class hs extends Nl{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let r=e.tileGrid;r===void 0&&t&&(r=Xn({extent:Wn(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:r,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?gr(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.referrerPolicy_=e.referrerPolicy,this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?gr(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return(!t||ks(t,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,r,A,n,s){const o=this.tileGrid||this.getTileGridForProjection(n||A),a=Math.max.apply(null,o.getResolutions().map((h,d)=>{const f=gr(o.getTileSize(d)),C=this.getTileSize(d);return Math.max(C[0]/f[0],C[1]/f[1])})),g=this.getTileGridForProjection(A),l=[e,t,r],c=this.getTileCoordForTileUrlFunction(l,A),u=Object.assign({sourceProj:n||A,sourceTileGrid:o,targetProj:A,targetTileGrid:g,tileCoord:l,wrappedTileCoord:c,pixelRatio:a,gutter:this.gutter_,getTileFunction:(h,d,f,C)=>this.getTile(h,d,f,C,void 0,s),transformMatrix:this.transformMatrix},this.tileOptions),I=new UT(u);return I.key=this.getKey(),I}getTile(e,t,r,A,n,s){var y;const o=this.getProjection();if(n&&(o&&!ks(o,n)||this.transformMatrix))return this.getReprojTile_(e,t,r,n,o,s);const a=this.getTileSize(e),g=this.loader_,l=new AbortController,c={signal:l.signal,crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},u=this.getTileCoordForTileUrlFunction([e,t,r]);if(!u)return null;const I=this.getKey(),h=yp(this,I,e,t,r);if(s&&s.containsKey(h))return s.get(h);const d=u[0],f=u[1],C=u[2],E=(y=this.getTileGrid())==null?void 0:y.getFullTileRange(d);E&&(c.maxY=E.getHeight()-1);function B(){return wp(function(){return g(d,f,C,c)})}const m=Object.assign({tileCoord:[e,t,r],loader:B,size:a,controller:l},this.tileOptions),p=new Rl(m);return p.key=this.getKey(),p.addEventListener(Pt.CHANGE,this.handleTileChange_),s==null||s.set(h,p),p}handleTileChange_(e){const t=e.target,r=me(t),A=t.getState();let n;A==Ie.LOADING?(this.tileLoadingKeys_[r]=!0,n=Ga.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],n=A==Ie.ERROR?Ga.TILELOADERROR:A==Ie.LOADED?Ga.TILELOADEND:void 0),n&&this.dispatchEvent(new mp(n,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ks(t,e))&&!this.transformMatrix)return this.tileGrid;const r=me(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Qp(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,t){const r=pe(e);if(r){const A=me(r);A in this.tileGridForProjection_||(this.tileGridForProjection_[A]=t)}}}function lg(i,e,t){const r=typeof i=="object"?i.outer:i,A=r.slice(0,r.indexOf(">")+1),n=['"',"'"];for(let s=0;s<n.length;s++){const o=n[s],a=e+"\\="+o+"([^"+o+"]*)"+o,l=new RegExp(a).exec(A);if(l)return l[1]}}function OT(i,e,t){const A=new RegExp(e).exec(i.slice(t));return A?t+A.index:-1}function cg(i,e,t){const A=new RegExp(e).exec(i.slice(t));return A?t+A.index+A[0].length-1:-1}function XI(i,e){const t=new RegExp(e,"g"),r=i.match(t);return r?r.length:0}function YT(i,e,t){const r=t&&t.debug||!1,A=!(t&&typeof t.nested===!1),n=t&&t.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const s=OT(i,`<${e}[ 
>/]`,n);if(r&&console.log("[xml-utils] start:",s),s===-1)return;const o=i.slice(s+e.length);let a=cg(o,"^[^<]*[ /]>",0);const g=a!==-1&&o[a-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",g),g===!1)if(A){let I=0,h=1,d=0;for(;(a=cg(o,"[ /]"+e+">",I))!==-1;){const f=o.substring(I,a+1);if(h+=XI(f,"<"+e+`[ 
	>]`),d+=XI(f,"</"+e+">"),d>=h)break;I=a}}else a=cg(o,"[ /]"+e+">",0);const l=s+e.length+a+1;if(r&&console.log("[xml-utils] end:",l),l===-1)return;const c=i.slice(s,l);let u;return g?u=null:u=c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),{inner:u,outer:c,start:s,end:l}}function KT(i,e,t){const r=[];let n=0,s;for(;s=YT(i,e,{debug:!1,startIndex:n});)n=s.start+1+e.length,r.push(s);return r}const T=Object.freeze({BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,SBYTE:6,UNDEFINED:7,SSHORT:8,SLONG:9,SRATIONAL:10,FLOAT:11,DOUBLE:12,IFD:13,LONG8:16,SLONG8:17,IFD8:18}),HT=Object.freeze({[T.BYTE]:1,[T.ASCII]:1,[T.SBYTE]:1,[T.UNDEFINED]:1,[T.SHORT]:2,[T.SSHORT]:2,[T.LONG]:4,[T.SLONG]:4,[T.FLOAT]:4,[T.IFD]:4,[T.RATIONAL]:8,[T.SRATIONAL]:8,[T.DOUBLE]:8,[T.LONG8]:8,[T.SLONG8]:8,[T.IFD8]:8});function vn(i){const e=HT[i];if(e===void 0)throw new RangeError(`Invalid field type: ${i}`);return e}const qT=[{tag:254,name:"NewSubfileType",fieldTypes:T.LONG},{tag:255,name:"SubfileType",type:T.SHORT},{tag:256,name:"ImageWidth",type:T.SHORT},{tag:257,name:"ImageLength",type:T.SHORT},{tag:258,name:"BitsPerSample",type:T.SHORT,isArray:!0,eager:!0},{tag:259,name:"Compression",type:T.SHORT},{tag:262,name:"PhotometricInterpretation",type:T.SHORT},{tag:263,name:"Threshholding",type:T.SHORT},{tag:264,name:"CellWidth",type:T.SHORT},{tag:265,name:"CellLength",type:T.SHORT},{tag:266,name:"FillOrder",type:T.SHORT},{tag:269,name:"DocumentName",type:T.ASCII},{tag:270,name:"ImageDescription",type:T.ASCII},{tag:271,name:"Make",type:T.ASCII},{tag:272,name:"Model",type:T.ASCII},{tag:273,name:"StripOffsets",type:T.SHORT,isArray:!0},{tag:274,name:"Orientation",type:T.SHORT},{tag:277,name:"SamplesPerPixel",type:T.SHORT},{tag:278,name:"RowsPerStrip",type:T.SHORT},{tag:279,name:"StripByteCounts",type:T.LONG,isArray:!0},{tag:280,name:"MinSampleValue",type:T.SHORT,isArray:!0},{tag:281,name:"MaxSampleValue",type:T.SHORT,isArray:!0},{tag:282,name:"XResolution",type:T.RATIONAL},{tag:283,name:"YResolution",type:T.RATIONAL},{tag:284,name:"PlanarConfiguration",fieldTypes:T.SHORT},{tag:285,name:"PageName",type:T.ASCII},{tag:286,name:"XPosition",type:T.RATIONAL},{tag:287,name:"YPosition",type:T.RATIONAL},{tag:288,name:"FreeOffsets",type:T.LONG},{tag:289,name:"FreeByteCounts",type:T.LONG},{tag:290,name:"GrayResponseUnit",type:T.SHORT},{tag:291,name:"GrayResponseCurve",type:T.SHORT,isArray:!0},{tag:292,name:"T4Options",type:T.LONG},{tag:293,name:"T6Options",type:T.LONG},{tag:296,name:"ResolutionUnit",type:T.SHORT},{tag:297,name:"PageNumber",type:T.SHORT,isArray:!0},{tag:301,name:"TransferFunction",type:T.SHORT,isArray:!0},{tag:305,name:"Software",type:T.ASCII},{tag:306,name:"DateTime",type:T.ASCII},{tag:315,name:"Artist",type:T.ASCII},{tag:316,name:"HostComputer",type:T.ASCII},{tag:317,name:"Predictor",type:T.SHORT},{tag:318,name:"WhitePoint",type:T.RATIONAL,isArray:!0},{tag:319,name:"PrimaryChromaticities",type:T.RATIONAL,isArray:!0},{tag:320,name:"ColorMap",type:T.SHORT,isArray:!0},{tag:321,name:"HalftoneHints",type:T.SHORT,isArray:!0},{tag:322,name:"TileWidth",type:T.SHORT},{tag:323,name:"TileLength",type:T.SHORT},{tag:324,name:"TileOffsets",type:T.LONG,isArray:!0},{tag:325,name:"TileByteCounts",type:T.SHORT,isArray:!0},{tag:332,name:"InkSet",type:T.SHORT},{tag:333,name:"InkNames",type:T.ASCII},{tag:334,name:"NumberOfInks",type:T.SHORT},{tag:336,name:"DotRange",type:T.BYTE,isArray:!0},{tag:337,name:"TargetPrinter",type:T.ASCII},{tag:338,name:"ExtraSamples",type:T.BYTE,isArray:!0},{tag:339,name:"SampleFormat",type:T.SHORT,isArray:!0,eager:!0},{tag:340,name:"SMinSampleValue",isArray:!0},{tag:341,name:"SMaxSampleValue",isArray:!0},{tag:342,name:"TransferRange",type:T.SHORT,isArray:!0},{tag:512,name:"JPEGProc",type:T.SHORT},{tag:513,name:"JPEGInterchangeFormat",type:T.LONG},{tag:514,name:"JPEGInterchangeFormatLngth",type:T.LONG},{tag:515,name:"JPEGRestartInterval",type:T.SHORT},{tag:517,name:"JPEGLosslessPredictors",type:T.SHORT,isArray:!0},{tag:518,name:"JPEGPointTransforms",type:T.SHORT,isArray:!0},{tag:519,name:"JPEGQTables",type:T.LONG,isArray:!0},{tag:520,name:"JPEGDCTables",type:T.LONG,isArray:!0},{tag:521,name:"JPEGACTables",type:T.LONG,isArray:!0},{tag:529,name:"YCbCrCoefficients",type:T.RATIONAL,isArray:!0},{tag:530,name:"YCbCrSubSampling",type:T.SHORT,isArray:!0},{tag:531,name:"YCbCrPositioning",type:T.SHORT},{tag:532,name:"ReferenceBlackWhite",type:T.LONG,isArray:!0},{tag:33432,name:"Copyright",type:T.ASCII},{tag:326,name:"BadFaxLines"},{tag:327,name:"CleanFaxData"},{tag:343,name:"ClipPath"},{tag:328,name:"ConsecutiveBadFaxLines"},{tag:433,name:"Decode"},{tag:434,name:"DefaultImageColor"},{tag:346,name:"Indexed"},{tag:347,name:"JPEGTables",isArray:!0,eager:!0},{tag:559,name:"StripRowCounts",isArray:!0},{tag:330,name:"SubIFDs",isArray:!0},{tag:344,name:"XClipPathUnits"},{tag:345,name:"YClipPathUnits"},{tag:37378,name:"ApertureValue"},{tag:40961,name:"ColorSpace"},{tag:36868,name:"DateTimeDigitized"},{tag:36867,name:"DateTimeOriginal"},{tag:34665,name:"Exif IFD",type:T.LONG},{tag:36864,name:"ExifVersion"},{tag:33434,name:"ExposureTime"},{tag:41728,name:"FileSource"},{tag:37385,name:"Flash"},{tag:40960,name:"FlashpixVersion"},{tag:33437,name:"FNumber"},{tag:42016,name:"ImageUniqueID"},{tag:37384,name:"LightSource"},{tag:37500,name:"MakerNote"},{tag:37377,name:"ShutterSpeedValue"},{tag:37510,name:"UserComment"},{tag:33723,name:"IPTC"},{tag:34412,name:"CZ_LSMINFO"},{tag:34675,name:"ICC Profile"},{tag:700,name:"XMP"},{tag:42112,name:"GDAL_METADATA"},{tag:42113,name:"GDAL_NODATA",type:T.ASCII},{tag:34377,name:"Photoshop"},{tag:33550,name:"ModelPixelScale",type:T.DOUBLE,isArray:!0,eager:!0},{tag:33922,name:"ModelTiepoint",type:T.DOUBLE,isArray:!0,eager:!0},{tag:34264,name:"ModelTransformation",type:T.DOUBLE,isArray:!0,eager:!0},{tag:34735,name:"GeoKeyDirectory",type:T.SHORT,isArray:!0,eager:!0},{tag:34736,name:"GeoDoubleParams",type:T.DOUBLE,isArray:!0,eager:!0},{tag:34737,name:"GeoAsciiParams",type:T.ASCII,eager:!0},{tag:50674,name:"LercParameters",eager:!0}],zE={},Mn={};function JT(i,e,t,r=!1,A=!1){zE[e]=i,Mn[i]={tag:i,name:e,type:typeof t=="string"?T[t]:t,isArray:r,eager:A}}for(const i of qT)JT(i.tag,i.name,i.type,i.isArray,i.eager);function Ns(i){return typeof i=="number"?i:zE[i]}const Mt={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},zT={Unspecified:0},yv={AddCompression:1},mv={None:0,Deflate:1,Zstandard:2},Ks=Object.freeze({1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"}),jT={};for(const i in Ks)Ks.hasOwnProperty(i)&&(jT[Ks[i]]=parseInt(i,10));function VT(i,e){const{width:t,height:r}=i,A=new Uint8Array(t*r*3);let n;for(let s=0,o=0;s<i.length;++s,o+=3)n=256-i[s]/e*256,A[o]=n,A[o+1]=n,A[o+2]=n;return A}function $T(i,e){const{width:t,height:r}=i,A=new Uint8Array(t*r*3);let n;for(let s=0,o=0;s<i.length;++s,o+=3)n=i[s]/e*256,A[o]=n,A[o+1]=n,A[o+2]=n;return A}function ZT(i,e){const{width:t,height:r}=i,A=new Uint8Array(t*r*3),n=e.length/3,s=e.length/3*2;for(let o=0,a=0;o<i.length;++o,a+=3){const g=i[o];A[a]=e[g]/65536*256,A[a+1]=e[g+n]/65536*256,A[a+2]=e[g+s]/65536*256}return A}function WT(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let A=0,n=0;A<i.length;A+=4,n+=3){const s=i[A],o=i[A+1],a=i[A+2],g=i[A+3];r[n]=255*((255-s)/256)*((255-g)/256),r[n+1]=255*((255-o)/256)*((255-g)/256),r[n+2]=255*((255-a)/256)*((255-g)/256)}return r}function XT(i){const{width:e,height:t}=i,r=new Uint8ClampedArray(e*t*3);for(let A=0,n=0;A<i.length;A+=3,n+=3){const s=i[A],o=i[A+1],a=i[A+2];r[n]=s+1.402*(a-128),r[n+1]=s-.34414*(o-128)-.71414*(a-128),r[n+2]=s+1.772*(o-128)}return r}const eF=.95047,tF=1,rF=1.08883;function iF(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let A=0,n=0;A<i.length;A+=3,n+=3){const s=i[A+0],o=i[A+1]<<24>>24,a=i[A+2]<<24>>24;let g=(s+16)/116,l=o/500+g,c=g-a/200,u,I,h;l=eF*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),g=tF*(g*g*g>.008856?g*g*g:(g-16/116)/7.787),c=rF*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=l*3.2406+g*-1.5372+c*-.4986,I=l*-.9689+g*1.8758+c*.0415,h=l*.0557+g*-.204+c*1.057,u=u>.0031308?1.055*u**(1/2.4)-.055:12.92*u,I=I>.0031308?1.055*I**(1/2.4)-.055:12.92*I,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,r[n]=Math.max(0,Math.min(1,u))*255,r[n+1]=Math.max(0,Math.min(1,I))*255,r[n+2]=Math.max(0,Math.min(1,h))*255}return r}const Ki=new Map;async function Hs(i){const e=!i.hasTag("StripOffsets");return{tileWidth:e?await i.loadValue("TileWidth"):await i.loadValue("ImageWidth"),tileHeight:e?await i.loadValue("TileLength"):await i.loadValue("RowsPerStrip")||await i.loadValue("ImageLength"),planarConfiguration:await i.loadValue("PlanarConfiguration"),bitsPerSample:await i.loadValue("BitsPerSample"),predictor:await i.loadValue("Predictor")||1}}function AF(i,e,t=Hs,r=!0){Array.isArray(i)||(i=[i]),i.forEach(A=>{Ki.set(A,{importFn:e,decoderParameterFn:t,preferWorker:r})})}async function nF(i,e){if(!Ki.has(i))throw new Error(`Unknown compression method identifier: ${i}`);const{decoderParameterFn:t}=Ki.get(i);return t(e)}async function jE(i,e){if(!Ki.has(i))throw new Error(`Unknown compression method identifier: ${i}`);const{importFn:t}=Ki.get(i),r=await t();return new r(e)}function sF(i){if(!Ki.has(i))throw new Error(`Unknown compression method identifier: ${i}`);return Ki.get(i).preferWorker}const oF=[{cases:[void 0,1],importFn:()=>At(()=>import("./raw.BbSiPsaC.js"),__vite__mapDeps([23,24])).then(i=>i.default),preferWorker:!1},{cases:5,importFn:()=>At(()=>import("./lzw.C2ZJtbg-.js"),__vite__mapDeps([25,24])).then(i=>i.default)},{cases:6,importFn:()=>{throw new Error("old style JPEG compression is not supported.")}},{cases:7,importFn:()=>At(()=>import("./jpeg.fySNabLN.js"),__vite__mapDeps([26,24])).then(i=>i.default),decoderParameterFn:async i=>({...await Hs(i),JPEGTables:await i.loadValue("JPEGTables")})},{cases:[8,32946],importFn:()=>At(()=>import("./deflate.BUfJ4wkD.js"),__vite__mapDeps([27,5,24])).then(i=>i.default)},{cases:32773,importFn:()=>At(()=>import("./packbits.DzgHDI4c.js"),__vite__mapDeps([28,24])).then(i=>i.default)},{cases:34887,importFn:()=>At(()=>import("./lerc.C76vfu5R.js"),__vite__mapDeps([29,5,8,9,24,10,11,12,13,14,15,16,17,18,19])).then(async i=>(await i.zstd.init(),i)).then(i=>i.default),decoderParameterFn:async i=>({...await Hs(i),LercParameters:await i.loadValue("LercParameters")})},{cases:5e4,importFn:()=>At(()=>import("./zstd.CMUcIeqH.js"),__vite__mapDeps([30,24])).then(async i=>(await i.zstd.init(),i)).then(i=>i.default)},{cases:50001,importFn:()=>At(()=>import("./webimage.BnbWdYiS.js"),__vite__mapDeps([31,24])).then(i=>i.default),decoderParameterFn:async i=>({...await Hs(i),samplesPerPixel:await i.loadValue("SamplesPerPixel")||4}),preferWorker:!1}];for(const i of oF){const{cases:e,importFn:t,decoderParameterFn:r,preferWorker:A}=i;AF(e,t,r,A)}function wa(i,e,t,r=1){return new(Object.getPrototypeOf(i)).constructor(e*t*r)}function aF(i,e,t,r,A){const n=e/r,s=t/A;return i.map(o=>{const a=wa(o,r,A);for(let g=0;g<A;++g){const l=Math.min(Math.round(s*g),t-1);for(let c=0;c<r;++c){const u=Math.min(Math.round(n*c),e-1),I=o[l*e+u];a[g*r+c]=I}}return a})}function pA(i,e,t){return(1-t)*i+t*e}function gF(i,e,t,r,A){const n=e/r,s=t/A;return i.map(o=>{const a=wa(o,r,A);for(let g=0;g<A;++g){const l=s*g,c=Math.floor(l),u=Math.min(Math.ceil(l),t-1);for(let I=0;I<r;++I){const h=n*I,d=h%1,f=Math.floor(h),C=Math.min(Math.ceil(h),e-1),E=o[c*e+f],B=o[c*e+C],m=o[u*e+f],p=o[u*e+C],y=pA(pA(E,B,d),pA(m,p,d),l%1);a[g*r+I]=y}}return a})}function lF(i,e,t,r,A,n="nearest"){switch(n.toLowerCase()){case"nearest":return aF(i,e,t,r,A);case"bilinear":case"linear":return gF(i,e,t,r,A);default:throw new Error(`Unsupported resampling method: '${n}'`)}}function cF(i,e,t,r,A,n){const s=e/r,o=t/A,a=wa(i,r,A,n);for(let g=0;g<A;++g){const l=Math.min(Math.round(o*g),t-1);for(let c=0;c<r;++c){const u=Math.min(Math.round(s*c),e-1);for(let I=0;I<n;++I){const h=i[l*e*n+u*n+I];a[g*r*n+c*n+I]=h}}}return a}function uF(i,e,t,r,A,n){const s=e/r,o=t/A,a=wa(i,r,A,n);for(let g=0;g<A;++g){const l=o*g,c=Math.floor(l),u=Math.min(Math.ceil(l),t-1);for(let I=0;I<r;++I){const h=s*I,d=h%1,f=Math.floor(h),C=Math.min(Math.ceil(h),e-1);for(let E=0;E<n;++E){const B=i[c*e*n+f*n+E],m=i[c*e*n+C*n+E],p=i[u*e*n+f*n+E],y=i[u*e*n+C*n+E],Q=pA(pA(B,m,d),pA(p,y,d),l%1);a[g*r*n+I*n+E]=Q}}}return a}function hF(i,e,t,r,A,n,s="nearest"){switch(s.toLowerCase()){case"nearest":return cF(i,e,t,r,A,n);case"bilinear":case"linear":return uF(i,e,t,r,A,n);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function IF(i,e,t){let r=0;for(let A=e;A<t;++A)r+=i[A];return r}function ol(i,e,t){switch(i){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function dF(i,e){return(i===1||i===2)&&e<=32&&e%8===0?!1:!(i===3&&(e===16||e===32||e===64))}function fF(i,e,t,r,A,n,s){const o=new DataView(i),a=t===2?s*n:s*n*r,g=t===2?1:r,l=ol(e,A,a),c=parseInt("1".repeat(A),2);if(e===1){let u;t===1?u=r*A:u=A;let I=n*u;I&7&&(I=I+7&-8);for(let h=0;h<s;++h){const d=h*I;for(let f=0;f<n;++f){const C=d+f*g*A;for(let E=0;E<g;++E){const B=C+E*A,m=(h*n+f)*g+E,p=Math.floor(B/8),y=B%8;if(y+A<=8)l[m]=o.getUint8(p)>>8-A-y&c;else if(y+A<=16)l[m]=o.getUint16(p)>>16-A-y&c;else if(y+A<=24){const Q=o.getUint16(p)<<8|o.getUint8(p+2);l[m]=Q>>24-A-y&c}else l[m]=o.getUint32(p)>>32-A-y&c}}}}return l.buffer}class VE{constructor(e,t,r,A){this.fileDirectory=e,this.littleEndian=t,this.tiles=r?{}:null,this.isTiled=!e.hasTag("StripOffsets");const n=e.getValue("PlanarConfiguration")??1;if(n!==1&&n!==2)throw new Error("Invalid planar configuration.");this.planarConfiguration=n,this.source=A}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.fileDirectory.parseGeoKeyDirectory()}getWidth(){return this.fileDirectory.getValue("ImageWidth")}getHeight(){return this.fileDirectory.getValue("ImageLength")}getSamplesPerPixel(){return this.fileDirectory.hasTag("SamplesPerPixel")?this.fileDirectory.getValue("SamplesPerPixel"):1}getTileWidth(){return this.isTiled?this.fileDirectory.getValue("TileWidth"):this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.getValue("TileLength"):this.fileDirectory.hasTag("RowsPerStrip")?Math.min(this.fileDirectory.getValue("RowsPerStrip"),this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.getValue("BitsPerSample").length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){const t=this.fileDirectory.getValue("BitsPerSample");if(e>=t.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(t[e]/8)}getReaderForSample(e){const t=this.fileDirectory.hasTag("SampleFormat")?this.fileDirectory.getValue("SampleFormat")[e]:1,r=this.fileDirectory.getValue("BitsPerSample")[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(A,n){return Vo(this,A,n)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.hasTag("SampleFormat")?this.fileDirectory.getValue("SampleFormat")[e]:1}getBitsPerSample(e=0){return this.fileDirectory.getValue("BitsPerSample")[e]}getArrayForSample(e,t){const r=this.getSampleFormat(e),A=this.getBitsPerSample(e);return ol(r,A,t)}async getTileOrStrip(e,t,r,A,n){const s=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:g}=this;if(this.planarConfiguration===1?a=t*s+e:this.planarConfiguration===2&&(a=r*s*o+t*s+e),a===void 0)throw new Error("Could not determine tile or strip index.");let l,c;if(this.isTiled?(l=await this.fileDirectory.loadValueIndexed("TileOffsets",a),c=await this.fileDirectory.loadValueIndexed("TileByteCounts",a)):(l=await this.fileDirectory.loadValueIndexed("StripOffsets",a),c=await this.fileDirectory.loadValueIndexed("StripByteCounts",a)),c===0){const h=this.getBlockHeight(t)*this.getTileWidth(),d=this.planarConfiguration===2?this.getSampleByteSize(r):this.getBytesPerPixel(),f=new ArrayBuffer(h*d);return this.getArrayForSample(r,f).fill(this.getGDALNoData()||0),{x:e,y:t,sample:r,data:f}}const u=(await this.source.fetch([{offset:l,length:c}],n))[0];let I;return g===null||!g[a]?(I=(async()=>{let h=await A.decode(u);const d=this.getSampleFormat(),f=this.getBitsPerSample();return dF(d,f)&&(h=fF(h,d,this.planarConfiguration,this.getSamplesPerPixel(),f,this.getTileWidth(),this.getBlockHeight(t))),h})(),g!==null&&(g[a]=I)):I=g[a],{x:e,y:t,sample:r,data:await I}}async _readRaster(e,t,r,A,n,s,o,a,g){const l=this.getTileWidth(),c=this.getTileHeight(),u=this.getWidth(),I=this.getHeight(),h=Math.max(Math.floor(e[0]/l),0),d=Math.min(Math.ceil(e[2]/l),Math.ceil(u/l)),f=Math.max(Math.floor(e[1]/c),0),C=Math.min(Math.ceil(e[3]/c),Math.ceil(I/c)),E=e[2]-e[0];let B=this.getBytesPerPixel();const m=[],p=[];for(let w=0;w<t.length;++w)this.planarConfiguration===1?m.push(IF(await this.fileDirectory.loadValue("BitsPerSample"),0,t[w])/8):m.push(0),p.push(this.getReaderForSample(t[w]));const y=[],{littleEndian:Q}=this;for(let w=f;w<C;++w)for(let S=h;S<d;++S){let R;this.planarConfiguration===1&&(R=this.getTileOrStrip(S,w,0,n,g));for(let F=0;F<t.length;++F){const M=F,G=t[F];if(this.planarConfiguration===2&&(B=this.getSampleByteSize(G),R=this.getTileOrStrip(S,w,G,n,g)),!R)throw new Error("Could not get tile or strip data.");const x=R.then(N=>{const v=N.data,z=new DataView(v),q=this.getBlockHeight(N.y),$=N.y*c,re=N.x*l,Qe=$+q,te=(N.x+1)*l,P=p[M],Me=Math.min(q,q-(Qe-e[3]),I-$),Le=Math.min(l,l-(te-e[2]),u-re);for(let fe=Math.max(0,e[1]-$);fe<Me;++fe)for(let Ze=Math.max(0,e[0]-re);Ze<Le;++Ze){const Oe=(fe*l+Ze)*B,tt=P.call(z,Oe+m[M],Q);let Nt;A?(Nt=(fe+$-e[1])*E*t.length+(Ze+re-e[0])*t.length+M,r[Nt]=tt):(Nt=(fe+$-e[1])*E+Ze+re-e[0],r[M][Nt]=tt)}});y.push(x)}}if(await Promise.all(y),s&&e[2]-e[0]!==s||o&&e[3]-e[1]!==o){let w;A?w=hF(r,e[2]-e[0],e[3]-e[1],s,o,t.length,a):w=lF(r,e[2]-e[0],e[3]-e[1],s,o,a);const S=w;return S.width=s??e[2]-e[0],S.height=o??e[3]-e[1],S}const _=r;return _.width=s||e[2]-e[0],_.height=o||e[3]-e[1],_}async readRasters(e={}){const{window:t,samples:r=[],pool:A=null,width:n,height:s,resampleMethod:o,fillValue:a,signal:g}=e,l="interleave"in e&&e.interleave,c=t||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const u=c[2]-c[0],I=c[3]-c[1],h=u*I,d=this.getSamplesPerPixel();if(!r||!r.length)for(let p=0;p<d;++p)r.push(p);else for(let p=0;p<r.length;++p)if(r[p]>=d)return Promise.reject(new RangeError(`Invalid sample index '${r[p]}'.`));let f;if(l){const p=this.fileDirectory.hasTag("SampleFormat")?Math.max.apply(null,this.fileDirectory.getValue("SampleFormat")):1,y=Math.max.apply(null,this.fileDirectory.getValue("BitsPerSample"));if(f=ol(p,y,h*r.length),a){if(Array.isArray(a))throw new Error("When reading interleaved data, fillValue must be a single number.");f.fill(a)}}else{f=[];for(let p=0;p<r.length;++p){const y=this.getArrayForSample(r[p],h);Array.isArray(a)&&p<a.length?y.fill(a[p]):a&&!Array.isArray(a)&&y.fill(a),f.push(y)}}const C=this.fileDirectory.getValue("Compression")||1,E=await nF(C,this.fileDirectory),B=A?A.bindParameters(C,E):await jE(C,E);return await this._readRaster(c,r,f,l,B,n,s,o,g)}async readRGB(e={}){const{window:t,pool:r=null,width:A,height:n,resampleMethod:s,enableAlpha:o=!1,signal:a}=e,g=("interleave"in e&&e.interleave)??!1,l=t||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=this.fileDirectory.getValue("PhotometricInterpretation");if(c===Mt.RGB){let B=[0,1,2];if(this.fileDirectory.getValue("ExtraSamples")!==zT.Unspecified&&o){B=[];for(let m=0;m<this.fileDirectory.getValue("BitsPerSample").length;m+=1)B.push(m)}return this.readRasters({window:t,interleave:g,samples:B,pool:r,width:A,height:n,resampleMethod:s,signal:a})}let u;switch(c){case Mt.WhiteIsZero:case Mt.BlackIsZero:case Mt.Palette:u=[0];break;case Mt.CMYK:u=[0,1,2,3];break;case Mt.YCbCr:case Mt.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const I={window:l,interleave:!0,samples:u,pool:r,width:A,height:n,resampleMethod:s,signal:a},{fileDirectory:h}=this,d=await this.readRasters(I),f=2**this.getBitsPerSample(0);let C;switch(c){case Mt.WhiteIsZero:C=VT(d,f);break;case Mt.BlackIsZero:C=$T(d,f);break;case Mt.Palette:C=ZT(d,await h.loadValue("ColorMap"));break;case Mt.CMYK:C=WT(d);break;case Mt.YCbCr:C=XT(d);break;case Mt.CIELab:C=iF(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!g){const B=new Uint8Array(C.length/3),m=new Uint8Array(C.length/3),p=new Uint8Array(C.length/3);for(let y=0,Q=0;y<C.length;y+=3,++Q)B[Q]=C[y],m[Q]=C[y+1],p[Q]=C[y+2];C=[B,m,p]}const E=C;return E.width=d.width,E.height=d.height,E}async getTiePoints(){if(!this.fileDirectory.hasTag("ModelTiepoint"))return[];const e=await this.fileDirectory.loadValue("ModelTiepoint"),t=[];for(let r=0;r<e.length;r+=6)t.push({i:e[r],j:e[r+1],k:e[r+2],x:e[r+3],y:e[r+4],z:e[r+5]});return t}async getGDALMetadata(e=null){const t={};if(!this.fileDirectory.hasTag("GDAL_METADATA"))return null;const r=await this.fileDirectory.loadValue("GDAL_METADATA");let A=KT(r,"Item");e===null?A=A.filter(n=>lg(n,"sample")===void 0):A=A.filter(n=>Number(lg(n,"sample"))===e);for(let n=0;n<A.length;++n){const s=A[n];t[lg(s,"name")]=s.inner}return t}getGDALNoData(){if(!this.fileDirectory.hasTag("GDAL_NODATA"))return null;const e=this.fileDirectory.getValue("GDAL_NODATA");return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.getValue("ModelTiepoint"),t=this.fileDirectory.getValue("ModelTransformation");if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.getValue("ModelPixelScale"),r=this.fileDirectory.getValue("ModelTransformation");if(t)return[t[0],-t[1],t[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){const[A,n,s]=e.getResolution();return[A*e.getWidth()/this.getWidth(),n*e.getHeight()/this.getHeight(),s*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){var e;return((e=this.getGeoKeys())==null?void 0:e.GTRasterTypeGeoKey)===1}getBoundingBox(e=!1){const t=this.getHeight(),r=this.getWidth();if(this.fileDirectory.hasTag("ModelTransformation")&&!e){const[A,n,s,o,a,g,l,c]=this.fileDirectory.getValue("ModelTransformation"),I=[[0,0],[0,t],[r,0],[r,t]].map(([f,C])=>[o+A*f+n*C,c+a*f+g*C]),h=I.map(f=>f[0]),d=I.map(f=>f[1]);return[Math.min(...h),Math.min(...d),Math.max(...h),Math.max(...d)]}else{const A=this.getOrigin(),n=this.getResolution(),s=A[0],o=A[1],a=s+n[0]*r,g=o+n[1]*t;return[Math.min(s,a),Math.min(o,g),Math.max(s,a),Math.max(o,g)]}}}class CF{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const r=this.getUint32(e,t),A=this.getUint32(e+4,t);let n;if(t){if(n=r+2**32*A,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*r+A,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}getInt64(e,t){let r=0;const A=(this._dataView.getUint8(e+(t?7:0))&128)>0;let n=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(t?s:7-s));A&&(n?o!==0&&(o=~(o-1)&255,n=!1):o=~o&255),r+=o*256**s}return A&&(r=-r),r}getUint8(e){return this._dataView.getUint8(e)}getInt8(e){return this._dataView.getInt8(e)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return Vo(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Do{constructor(e,t,r,A){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=A}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),r=this.readUint32(e+4);let A;if(this._littleEndian){if(A=t+2**32*r,!Number.isSafeInteger(A))throw new Error(`${A} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return A}if(A=2**32*t+r,!Number.isSafeInteger(A))throw new Error(`${A} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return A}readInt64(e){let t=0;const r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let A=!0;for(let n=0;n<8;n++){let s=this._dataView.getUint8(e+(this._littleEndian?n:7-n));r&&(A?s!==0&&(s=~(s-1)&255,A=!1):s=~s&255),t+=s*256**n}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const EF=typeof Worker<"u"?Worker:void 0;function BF(){const i='const A=new Map;async function I(A){const I=!A.hasTag("StripOffsets");return{tileWidth:I?await A.loadValue("TileWidth"):await A.loadValue("ImageWidth"),tileHeight:I?await A.loadValue("TileLength"):await A.loadValue("RowsPerStrip")||await A.loadValue("ImageLength"),planarConfiguration:await A.loadValue("PlanarConfiguration"),bitsPerSample:await A.loadValue("BitsPerSample"),predictor:await A.loadValue("Predictor")||1}}function g(g,B,C=I,Q=!0){Array.isArray(g)||(g=[g]),g.forEach((I=>{A.set(I,{importFn:B,decoderParameterFn:C,preferWorker:Q})}))}const B=[{cases:[void 0,1],importFn:()=>Promise.resolve().then((function(){return e})).then((A=>A.default)),preferWorker:!1},{cases:5,importFn:()=>Promise.resolve().then((function(){return o})).then((A=>A.default))},{cases:6,importFn:()=>{throw new Error("old style JPEG compression is not supported.")}},{cases:7,importFn:()=>Promise.resolve().then((function(){return w})).then((A=>A.default)),decoderParameterFn:async A=>({...await I(A),JPEGTables:await A.loadValue("JPEGTables")})},{cases:[8,32946],importFn:()=>Promise.resolve().then((function(){return Qg})).then((A=>A.default))},{cases:32773,importFn:()=>Promise.resolve().then((function(){return ig})).then((A=>A.default))},{cases:34887,importFn:()=>Promise.resolve().then((function(){return Rg})).then((async A=>(await A.zstd.init(),A))).then((A=>A.default)),decoderParameterFn:async A=>({...await I(A),LercParameters:await A.loadValue("LercParameters")})},{cases:5e4,importFn:()=>Promise.resolve().then((function(){return Jg})).then((async A=>(await A.zstd.init(),A))).then((A=>A.default))},{cases:50001,importFn:()=>Promise.resolve().then((function(){return Hg})).then((A=>A.default)),decoderParameterFn:async A=>({...await I(A),samplesPerPixel:await A.loadValue("SamplesPerPixel")||4}),preferWorker:!1}];for(const A of B){const{cases:I,importFn:B,decoderParameterFn:C,preferWorker:Q}=A;g(I,B,C,Q)}const C=globalThis;function Q(A,I){let g=A.length-I,B=0;do{for(let g=I;g>0;g--)A[B+I]+=A[B],B++;g-=I}while(g>0)}function E(A,I,g){let B=0,C=A.length;const Q=C/g;for(;C>I;){for(let g=I;g>0;--g)A[B+I]+=A[B],++B;C-=I}const E=A.slice();for(let I=0;I<Q;++I)for(let B=0;B<g;++B)A[g*I+B]=E[(g-B-1)*Q+I]}C.addEventListener("message",(async I=>{const{compression:g,decoderParameters:B,buffer:Q,...E}=I.data;try{const I=await async function(I,g){if(!A.has(I))throw new Error(`Unknown compression method identifier: ${I}`);const{importFn:B}=A.get(I);return new(await B())(g)}(g,B),i=await I.decode(Q);C.postMessage({decoded:i,...E},{transfer:[i]})}catch(A){C.postMessage({error:A.message,...E})}}));class i{constructor(A){this.parameters=A}decodeBlock(A){throw new Error("decodeBlock not implemented")}async decode(A){const I=await this.decodeBlock(A),{tileWidth:g,tileHeight:B,predictor:C,bitsPerSample:i,planarConfiguration:e}=this.parameters;return 1!==C?function(A,I,g,B,C,i){if(!I||1===I)return A;for(let A=0;A<C.length;++A){if(C[A]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(C[A]!==C[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const e=C[0]/8,a=2===i?1:C.length;for(let i=0;i<B&&!(i*a*g*e>=A.byteLength);++i){let B;if(2===I){switch(C[0]){case 8:B=new Uint8Array(A,i*a*g*e,a*g*e);break;case 16:B=new Uint16Array(A,i*a*g*e,a*g*e/2);break;case 32:B=new Uint32Array(A,i*a*g*e,a*g*e/4);break;default:throw new Error(`Predictor 2 not allowed with ${C[0]} bits per sample.`)}Q(B,a)}else 3===I&&(B=new Uint8Array(A,i*a*g*e,a*g*e),E(B,a,e))}return A}(I,C,g,B,i,e):I}}var e=Object.freeze({__proto__:null,default:class extends i{decodeBlock(A){return A}}});function a(A,I){for(let g=I.length-1;g>=0;g--)A.push(I[g]);return A}function t(A){const I=new Uint16Array(4093),g=new Uint8Array(4093);for(let A=0;A<=257;A++)I[A]=4096,g[A]=A;let B=258,C=9,Q=0;function E(){B=258,C=9}function i(A){const I=function(A,I,g){const B=I%8,C=Math.floor(I/8),Q=8-B,E=I+g-8*(C+1);let i=8*(C+2)-(I+g);const e=8*(C+2)-I;if(i=Math.max(0,i),C>=A.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;let a=A[C]&2**(8-B)-1;a<<=g-Q;let t=a;if(C+1<A.length){let I=A[C+1]>>>i;I<<=Math.max(0,g-e),t+=I}if(E>8&&C+2<A.length){const B=8*(C+3)-(I+g);t+=A[C+2]>>>B}return t}(A,Q,C);return Q+=C,I}function e(A,C){return g[B]=C,I[B]=A,B++,B-1}function t(A){const B=[];for(let C=A;4096!==C;C=I[C])B.push(g[C]);return B}const o=[];E();const s=new Uint8Array(A);let r,D=i(s);for(;257!==D;){if(256===D){for(E(),D=i(s);256===D;)D=i(s);if(257===D)break;if(D>256)throw new Error(`corrupted code at scanline ${D}`);a(o,t(D)),r=D}else if(D<B){const A=t(D);a(o,A),e(r,A[A.length-1]),r=D}else{const A=t(r);if(!A)throw new Error(`Bogus entry. Not in dictionary, ${r} / ${B}, position: ${Q}`);a(o,A),o.push(A[A.length-1]),e(r,A[A.length-1]),r=D}B+1>=2**C&&(12===C?r=void 0:C++),D=i(s)}return new Uint8Array(o)}var o=Object.freeze({__proto__:null,default:class extends i{decodeBlock(A){return t(A).buffer}}});const s=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function r(A,I){let g=0;const B=[];let C=16;for(;C>0&&!A[C-1];)--C;B.push({children:[],index:0});let Q,E=B[0];for(let i=0;i<C;i++){for(let C=0;C<A[i];C++){if(E=B.pop(),!E)throw new Error("buildHuffmanTable: codeLength mismatch");for(E.children[E.index]=I[g];E.index>0;)if(E=B.pop(),!E)throw new Error("buildHuffmanTable: codeLength mismatch");for(E.index++,B.push(E);B.length<=i;)B.push(Q={children:[],index:0}),E.children[E.index]=Q.children,E=Q;g++}i+1<C&&(B.push(Q={children:[],index:0}),E.children[E.index]=Q.children,E=Q)}return B[0].children}function D(A,I,g,B,C,Q,E,i,e){const{mcusPerLine:a,progressive:t}=g,o=I;let r=I,D=0,n=0;function h(){if(n>0)return n--,D>>n&1;if(D=A[r++],255===D){const I=A[r++];if(I)throw new Error(`unexpected marker: ${(D<<8|I).toString(16)}`)}return n=7,D>>>7}function w(A){let I,g=A;for(;null!==(I=h());){if(g=g[I],"number"==typeof g)return g;if("object"!=typeof g)throw new Error("invalid huffman sequence")}return null}function y(A){let I=A,g=0;for(;I>0;){const A=h();if(null===A)return;g=g<<1|A,--I}return g}function G(A){const I=y(A);if(void 0!==I)return I>=1<<A-1?I:I+(-1<<A)+1}let S=0;let N,c=0;function d(A,I,g,B,C){const Q=g%a,E=(g/a|0)*A.v+B,i=Q*A.h+C;I(A,A.blocks[E][i])}function F(A,I,g){const B=g/A.blocksPerLine|0,C=g%A.blocksPerLine;I(A,A.blocks[B][C])}const l=B.length;let k,R,L,U,f,Y;Y=t?0===Q?0===i?function(A,I){const g=w(A.huffmanTableDC),B=G(g);if(void 0===B)throw new Error("Unexpected end of data in DC coefficient decoding");const C=0===g?0:B<<e;A.pred+=C,I[0]=A.pred}:function(A,I){I[0]|=h()<<e}:0===i?function(A,I){if(S>0)return void S--;let g=Q;const B=E;for(;g<=B;){const B=w(A.huffmanTableAC);if(null===B)throw new Error("Unexpected end of data in AC coefficient decoding");const C=15&B,Q=B>>4;if(0===C){if(Q<15){const A=y(Q);if(void 0===A)throw new Error("Unexpected end of data in AC coefficient decoding");S=A+(1<<Q)-1;break}g+=16}else{g+=Q;const A=s[g],B=G(C);if(void 0===B)throw new Error("Unexpected end of data in AC coefficient decoding");I[A]=B*(1<<e),g++}}}:function(A,I){let g=Q;const B=E;let C=0;for(;g<=B;){const B=s[g],Q=I[B]<0?-1:1;switch(c){case 0:{const I=w(A.huffmanTableAC);if(null===I)throw new Error("Unexpected end of data in AC coefficient decoding");const g=15&I;if(C=I>>4,0===g)if(C<15){const A=y(C);if(void 0===A)throw new Error("Unexpected end of data in AC coefficient decoding");S=A+(1<<C),c=4}else C=16,c=1;else{if(1!==g)throw new Error("invalid ACn encoding");N=G(g),c=C?2:3}continue}case 1:case 2:I[B]?I[B]+=(h()<<e)*Q:(C--,0===C&&(c=2===c?3:0));break;case 3:I[B]?I[B]+=(h()<<e)*Q:(I[B]=N<<e,c=0);break;case 4:I[B]&&(I[B]+=(h()<<e)*Q)}g++}4===c&&(S--,0===S&&(c=0))}:function(A,I){const g=w(A.huffmanTableDC),B=0===g?0:G(g);A.pred+=B,I[0]=A.pred;let C=1;for(;C<64;){const g=w(A.huffmanTableAC);if(null===g)throw new Error("Unexpected end of data in AC coefficient decoding");const B=15&g,Q=g>>4;if(0===B){if(Q<15)break;C+=16}else C+=Q,I[s[C]]=G(B),C++}};let K,u,M=0;u=1===l?B[0].blocksPerLine*B[0].blocksPerColumn:a*g.mcusPerColumn;const J=C||u;for(;M<u;){for(R=0;R<l;R++)B[R].pred=0;if(S=0,1===l)for(k=B[0],f=0;f<J;f++)F(k,Y,M),M++;else for(f=0;f<J;f++){for(R=0;R<l;R++){k=B[R];const{h:A,v:I}=k;for(L=0;L<I;L++)for(U=0;U<A;U++)d(k,Y,M,L,U)}if(M++,M===u)break}if(n=0,K=A[r]<<8|A[r+1],K<65280)throw new Error("marker was not found");if(!(K>=65488&&K<=65495))break;r+=2}return r-o}function n(A,I){const g=[],{blocksPerLine:B,blocksPerColumn:C}=I,Q=B<<3,E=new Int32Array(64),i=new Uint8Array(64);function e(A,g,B){const C=I.quantizationTable;let Q,E,i,e,a,t,o,s,r;const D=B;let n;for(n=0;n<64;n++)D[n]=A[n]*C[n];for(n=0;n<8;++n){const A=8*n;0!==D[1+A]||0!==D[2+A]||0!==D[3+A]||0!==D[4+A]||0!==D[5+A]||0!==D[6+A]||0!==D[7+A]?(Q=5793*D[0+A]+128>>8,E=5793*D[4+A]+128>>8,i=D[2+A],e=D[6+A],a=2896*(D[1+A]-D[7+A])+128>>8,s=2896*(D[1+A]+D[7+A])+128>>8,t=D[3+A]<<4,o=D[5+A]<<4,r=Q-E+1>>1,Q=Q+E+1>>1,E=r,r=3784*i+1567*e+128>>8,i=1567*i-3784*e+128>>8,e=r,r=a-o+1>>1,a=a+o+1>>1,o=r,r=s+t+1>>1,t=s-t+1>>1,s=r,r=Q-e+1>>1,Q=Q+e+1>>1,e=r,r=E-i+1>>1,E=E+i+1>>1,i=r,r=2276*a+3406*s+2048>>12,a=3406*a-2276*s+2048>>12,s=r,r=799*t+4017*o+2048>>12,t=4017*t-799*o+2048>>12,o=r,D[0+A]=Q+s,D[7+A]=Q-s,D[1+A]=E+o,D[6+A]=E-o,D[2+A]=i+t,D[5+A]=i-t,D[3+A]=e+a,D[4+A]=e-a):(r=5793*D[0+A]+512>>10,D[0+A]=r,D[1+A]=r,D[2+A]=r,D[3+A]=r,D[4+A]=r,D[5+A]=r,D[6+A]=r,D[7+A]=r)}for(n=0;n<8;++n){const A=n;0!==D[8+A]||0!==D[16+A]||0!==D[24+A]||0!==D[32+A]||0!==D[40+A]||0!==D[48+A]||0!==D[56+A]?(Q=5793*D[0+A]+2048>>12,E=5793*D[32+A]+2048>>12,i=D[16+A],e=D[48+A],a=2896*(D[8+A]-D[56+A])+2048>>12,s=2896*(D[8+A]+D[56+A])+2048>>12,t=D[24+A],o=D[40+A],r=Q-E+1>>1,Q=Q+E+1>>1,E=r,r=3784*i+1567*e+2048>>12,i=1567*i-3784*e+2048>>12,e=r,r=a-o+1>>1,a=a+o+1>>1,o=r,r=s+t+1>>1,t=s-t+1>>1,s=r,r=Q-e+1>>1,Q=Q+e+1>>1,e=r,r=E-i+1>>1,E=E+i+1>>1,i=r,r=2276*a+3406*s+2048>>12,a=3406*a-2276*s+2048>>12,s=r,r=799*t+4017*o+2048>>12,t=4017*t-799*o+2048>>12,o=r,D[0+A]=Q+s,D[56+A]=Q-s,D[8+A]=E+o,D[48+A]=E-o,D[16+A]=i+t,D[40+A]=i-t,D[24+A]=e+a,D[32+A]=e-a):(r=5793*B[n+0]+8192>>14,D[0+A]=r,D[8+A]=r,D[16+A]=r,D[24+A]=r,D[32+A]=r,D[40+A]=r,D[48+A]=r,D[56+A]=r)}for(n=0;n<64;++n){const A=128+(D[n]+8>>4);g[n]=A<0?0:A>255?255:A}}for(let A=0;A<C;A++){const C=A<<3;for(let A=0;A<8;A++)g.push(new Uint8Array(Q));for(let Q=0;Q<B;Q++){e(I.blocks[A][Q],i,E);let B=0;const a=Q<<3;for(let A=0;A<8;A++){const I=g[C+A];for(let A=0;A<8;A++)I[a+A]=i[B++]}}}return g}class h{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.frames=[]}resetFrames(){this.frames=[]}parse(A){let I=0;function g(){const g=A[I]<<8|A[I+1];return I+=2,g}function B(){const B=g(),C=A.subarray(I,I+B-2);return I+=C.length,C}function C(A){let I,g,B=0,C=0;for(g in A.components)A.components.hasOwnProperty(g)&&(I=A.components[g],B<I.h&&(B=I.h),C<I.v&&(C=I.v));const Q=Math.ceil(A.samplesPerLine/8/B),E=Math.ceil(A.scanLines/8/C);for(g in A.components)if(A.components.hasOwnProperty(g)){I=A.components[g];const i=Math.ceil(Math.ceil(A.samplesPerLine/8)*I.h/B),e=Math.ceil(Math.ceil(A.scanLines/8)*I.v/C),a=Q*I.h,t=E*I.v,o=[];for(let A=0;A<t;A++){const A=[];for(let I=0;I<a;I++)A.push(new Int32Array(64));o.push(A)}I.blocksPerLine=i,I.blocksPerColumn=e,I.blocks=o}A.maxH=B,A.maxV=C,A.mcusPerLine=Q,A.mcusPerColumn=E}let Q=g();if(65496!==Q)throw new Error("SOI not found");for(Q=g();65497!==Q;){switch(Q){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const A=B();65504===Q&&74===A[0]&&70===A[1]&&73===A[2]&&70===A[3]&&0===A[4]&&(this.jfif={version:{major:A[5],minor:A[6]},densityUnits:A[7],xDensity:A[8]<<8|A[9],yDensity:A[10]<<8|A[11],thumbWidth:A[12],thumbHeight:A[13],thumbData:A.subarray(14,14+3*A[12]*A[13])}),65518===Q&&65===A[0]&&100===A[1]&&111===A[2]&&98===A[3]&&101===A[4]&&0===A[5]&&(this.adobe={version:A[6],flags0:A[7]<<8|A[8],flags1:A[9]<<8|A[10],transformCode:A[11]});break}case 65499:{const B=g()+I-2;for(;I<B;){const B=A[I++],C=new Int32Array(64);if(B>>4==0)for(let g=0;g<64;g++){C[s[g]]=A[I++]}else{if(B>>4!=1)throw new Error("DQT: invalid table spec");for(let A=0;A<64;A++){C[s[A]]=g()}}this.quantizationTables[15&B]=C}break}case 65472:case 65473:case 65474:{g();const B={extended:65473===Q,progressive:65474===Q,precision:A[I++],scanLines:g(),samplesPerLine:g(),components:{},componentsOrder:[]},E=A[I++];let i;for(let g=0;g<E;g++){i=A[I];const g=A[I+1]>>4,C=15&A[I+1],Q=A[I+2];B.componentsOrder.push(i),B.components[i]={h:g,v:C,quantizationIdx:Q},I+=3}C(B),this.frames.push(B);break}case 65476:{const B=g();for(let g=2;g<B;){const B=A[I++],C=new Uint8Array(16);let Q=0;for(let g=0;g<16;g++,I++)C[g]=A[I],Q+=C[g];const E=new Uint8Array(Q);for(let g=0;g<Q;g++,I++)E[g]=A[I];g+=17+Q,B>>4==0?this.huffmanTablesDC[15&B]=r(C,E):this.huffmanTablesAC[15&B]=r(C,E)}break}case 65501:g(),this.resetInterval=g();break;case 65498:{g();const B=A[I++],C=[],Q=this.frames[0];for(let g=0;g<B;g++){const g=Q.components[A[I++]],B=A[I++];g.huffmanTableDC=this.huffmanTablesDC[B>>4],g.huffmanTableAC=this.huffmanTablesAC[15&B],C.push(g)}const E=A[I++],i=A[I++],e=A[I++],a=D(A,I,Q,C,this.resetInterval,E,i,e>>4,15&e);I+=a;break}case 65535:255!==A[I]&&I--;break;default:if(255===A[I-3]&&A[I-2]>=192&&A[I-2]<=254){I-=3;break}throw new Error(`unknown JPEG marker ${Q.toString(16)}`)}Q=g()}}getResult(){const{frames:A}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let A=0;A<this.frames.length;A++){const I=this.frames[A].components;for(const A of Object.keys(I))I[A].quantizationTable=this.quantizationTables[I[A].quantizationIdx],delete I[A].quantizationIdx}const I=A[0],{components:g,componentsOrder:B}=I,C=[],Q=I.samplesPerLine,E=I.scanLines;for(let A=0;A<B.length;A++){const Q=g[B[A]];C.push({lines:n(0,Q),scaleX:Q.h/I.maxH,scaleY:Q.v/I.maxV})}const i=new Uint8Array(Q*E*C.length);let e=0;for(let A=0;A<E;++A)for(let I=0;I<Q;++I)for(let g=0;g<C.length;++g){const B=C[g];i[e]=B.lines[0|A*B.scaleY][0|I*B.scaleX],++e}return i}}var w=Object.freeze({__proto__:null,default:class extends i{constructor(A){super(A),this.reader=new h,A.JPEGTables&&this.reader.parse(A.JPEGTables)}decodeBlock(A){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(A)),this.reader.getResult().buffer}}});\n/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */function y(A){let I=A.length;for(;--I>=0;)A[I]=0}const G=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),S=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);y(d);const F=new Array(60);y(F);const l=new Array(512);y(l);const k=new Array(256);y(k);const R=new Array(29);y(R);const L=new Array(30);function U(A,I,g,B,C){this.static_tree=A,this.extra_bits=I,this.extra_base=g,this.elems=B,this.max_length=C,this.has_stree=A&&A.length}let f,Y,K;function u(A,I){this.dyn_tree=A,this.max_code=0,this.stat_desc=I}y(L);const M=A=>A<256?l[A]:l[256+(A>>>7)],J=(A,I)=>{A.pending_buf[A.pending++]=255&I,A.pending_buf[A.pending++]=I>>>8&255},H=(A,I,g)=>{A.bi_valid>16-g?(A.bi_buf|=I<<A.bi_valid&65535,J(A,A.bi_buf),A.bi_buf=I>>16-A.bi_valid,A.bi_valid+=g-16):(A.bi_buf|=I<<A.bi_valid&65535,A.bi_valid+=g)},m=(A,I,g)=>{H(A,g[2*I],g[2*I+1])},p=(A,I)=>{let g=0;do{g|=1&A,A>>>=1,g<<=1}while(--I>0);return g>>>1},q=(A,I,g)=>{const B=new Array(16);let C,Q,E=0;for(C=1;C<=15;C++)B[C]=E=E+g[C-1]<<1;for(Q=0;Q<=I;Q++){let I=A[2*Q+1];0!==I&&(A[2*Q]=p(B[I]++,I))}},b=A=>{let I;for(I=0;I<286;I++)A.dyn_ltree[2*I]=0;for(I=0;I<30;I++)A.dyn_dtree[2*I]=0;for(I=0;I<19;I++)A.bl_tree[2*I]=0;A.dyn_ltree[512]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0},x=A=>{A.bi_valid>8?J(A,A.bi_buf):A.bi_valid>0&&(A.pending_buf[A.pending++]=A.bi_buf),A.bi_buf=0,A.bi_valid=0},O=(A,I,g,B)=>{const C=2*I,Q=2*g;return A[C]<A[Q]||A[C]===A[Q]&&B[I]<=B[g]},T=(A,I,g)=>{const B=A.heap[g];let C=g<<1;for(;C<=A.heap_len&&(C<A.heap_len&&O(I,A.heap[C+1],A.heap[C],A.depth)&&C++,!O(I,B,A.heap[C],A.depth));)A.heap[g]=A.heap[C],g=C,C<<=1;A.heap[g]=B},_=(A,I,g)=>{let B,C,Q,E,i=0;if(0!==A.last_lit)do{B=A.pending_buf[A.d_buf+2*i]<<8|A.pending_buf[A.d_buf+2*i+1],C=A.pending_buf[A.l_buf+i],i++,0===B?m(A,C,I):(Q=k[C],m(A,Q+256+1,I),E=G[Q],0!==E&&(C-=R[Q],H(A,C,E)),B--,Q=M(B),m(A,Q,g),E=S[Q],0!==E&&(B-=L[Q],H(A,B,E)))}while(i<A.last_lit);m(A,256,I)},Z=(A,I)=>{const g=I.dyn_tree,B=I.stat_desc.static_tree,C=I.stat_desc.has_stree,Q=I.stat_desc.elems;let E,i,e,a=-1;for(A.heap_len=0,A.heap_max=573,E=0;E<Q;E++)0!==g[2*E]?(A.heap[++A.heap_len]=a=E,A.depth[E]=0):g[2*E+1]=0;for(;A.heap_len<2;)e=A.heap[++A.heap_len]=a<2?++a:0,g[2*e]=1,A.depth[e]=0,A.opt_len--,C&&(A.static_len-=B[2*e+1]);for(I.max_code=a,E=A.heap_len>>1;E>=1;E--)T(A,g,E);e=Q;do{E=A.heap[1],A.heap[1]=A.heap[A.heap_len--],T(A,g,1),i=A.heap[1],A.heap[--A.heap_max]=E,A.heap[--A.heap_max]=i,g[2*e]=g[2*E]+g[2*i],A.depth[e]=(A.depth[E]>=A.depth[i]?A.depth[E]:A.depth[i])+1,g[2*E+1]=g[2*i+1]=e,A.heap[1]=e++,T(A,g,1)}while(A.heap_len>=2);A.heap[--A.heap_max]=A.heap[1],((A,I)=>{const g=I.dyn_tree,B=I.max_code,C=I.stat_desc.static_tree,Q=I.stat_desc.has_stree,E=I.stat_desc.extra_bits,i=I.stat_desc.extra_base,e=I.stat_desc.max_length;let a,t,o,s,r,D,n=0;for(s=0;s<=15;s++)A.bl_count[s]=0;for(g[2*A.heap[A.heap_max]+1]=0,a=A.heap_max+1;a<573;a++)t=A.heap[a],s=g[2*g[2*t+1]+1]+1,s>e&&(s=e,n++),g[2*t+1]=s,t>B||(A.bl_count[s]++,r=0,t>=i&&(r=E[t-i]),D=g[2*t],A.opt_len+=D*(s+r),Q&&(A.static_len+=D*(C[2*t+1]+r)));if(0!==n){do{for(s=e-1;0===A.bl_count[s];)s--;A.bl_count[s]--,A.bl_count[s+1]+=2,A.bl_count[e]--,n-=2}while(n>0);for(s=e;0!==s;s--)for(t=A.bl_count[s];0!==t;)o=A.heap[--a],o>B||(g[2*o+1]!==s&&(A.opt_len+=(s-g[2*o+1])*g[2*o],g[2*o+1]=s),t--)}})(A,I),q(g,a,A.bl_count)},P=(A,I,g)=>{let B,C,Q=-1,E=I[1],i=0,e=7,a=4;for(0===E&&(e=138,a=3),I[2*(g+1)+1]=65535,B=0;B<=g;B++)C=E,E=I[2*(B+1)+1],++i<e&&C===E||(i<a?A.bl_tree[2*C]+=i:0!==C?(C!==Q&&A.bl_tree[2*C]++,A.bl_tree[32]++):i<=10?A.bl_tree[34]++:A.bl_tree[36]++,i=0,Q=C,0===E?(e=138,a=3):C===E?(e=6,a=3):(e=7,a=4))},v=(A,I,g)=>{let B,C,Q=-1,E=I[1],i=0,e=7,a=4;for(0===E&&(e=138,a=3),B=0;B<=g;B++)if(C=E,E=I[2*(B+1)+1],!(++i<e&&C===E)){if(i<a)do{m(A,C,A.bl_tree)}while(0!=--i);else 0!==C?(C!==Q&&(m(A,C,A.bl_tree),i--),m(A,16,A.bl_tree),H(A,i-3,2)):i<=10?(m(A,17,A.bl_tree),H(A,i-3,3)):(m(A,18,A.bl_tree),H(A,i-11,7));i=0,Q=C,0===E?(e=138,a=3):C===E?(e=6,a=3):(e=7,a=4)}};let j=!1;const W=(A,I,g,B)=>{H(A,0+(B?1:0),3),((A,I,g,B)=>{x(A),B&&(J(A,g),J(A,~g)),A.pending_buf.set(A.window.subarray(I,I+g),A.pending),A.pending+=g})(A,I,g,!0)};var V=(A,I,g,B)=>{let C,Q,E=0;A.level>0?(2===A.strm.data_type&&(A.strm.data_type=(A=>{let I,g=4093624447;for(I=0;I<=31;I++,g>>>=1)if(1&g&&0!==A.dyn_ltree[2*I])return 0;if(0!==A.dyn_ltree[18]||0!==A.dyn_ltree[20]||0!==A.dyn_ltree[26])return 1;for(I=32;I<256;I++)if(0!==A.dyn_ltree[2*I])return 1;return 0})(A)),Z(A,A.l_desc),Z(A,A.d_desc),E=(A=>{let I;for(P(A,A.dyn_ltree,A.l_desc.max_code),P(A,A.dyn_dtree,A.d_desc.max_code),Z(A,A.bl_desc),I=18;I>=3&&0===A.bl_tree[2*c[I]+1];I--);return A.opt_len+=3*(I+1)+5+5+4,I})(A),C=A.opt_len+3+7>>>3,Q=A.static_len+3+7>>>3,Q<=C&&(C=Q)):C=Q=g+5,g+4<=C&&-1!==I?W(A,I,g,B):4===A.strategy||Q===C?(H(A,2+(B?1:0),3),_(A,d,F)):(H(A,4+(B?1:0),3),((A,I,g,B)=>{let C;for(H(A,I-257,5),H(A,g-1,5),H(A,B-4,4),C=0;C<B;C++)H(A,A.bl_tree[2*c[C]+1],3);v(A,A.dyn_ltree,I-1),v(A,A.dyn_dtree,g-1)})(A,A.l_desc.max_code+1,A.d_desc.max_code+1,E+1),_(A,A.dyn_ltree,A.dyn_dtree)),b(A),B&&x(A)},z={_tr_init:A=>{j||((()=>{let A,I,g,B,C;const Q=new Array(16);for(g=0,B=0;B<28;B++)for(R[B]=g,A=0;A<1<<G[B];A++)k[g++]=B;for(k[g-1]=B,C=0,B=0;B<16;B++)for(L[B]=C,A=0;A<1<<S[B];A++)l[C++]=B;for(C>>=7;B<30;B++)for(L[B]=C<<7,A=0;A<1<<S[B]-7;A++)l[256+C++]=B;for(I=0;I<=15;I++)Q[I]=0;for(A=0;A<=143;)d[2*A+1]=8,A++,Q[8]++;for(;A<=255;)d[2*A+1]=9,A++,Q[9]++;for(;A<=279;)d[2*A+1]=7,A++,Q[7]++;for(;A<=287;)d[2*A+1]=8,A++,Q[8]++;for(q(d,287,Q),A=0;A<30;A++)F[2*A+1]=5,F[2*A]=p(A,5);f=new U(d,G,257,286,15),Y=new U(F,S,0,30,15),K=new U(new Array(0),N,0,19,7)})(),j=!0),A.l_desc=new u(A.dyn_ltree,f),A.d_desc=new u(A.dyn_dtree,Y),A.bl_desc=new u(A.bl_tree,K),A.bi_buf=0,A.bi_valid=0,b(A)},_tr_stored_block:W,_tr_flush_block:V,_tr_tally:(A,I,g)=>(A.pending_buf[A.d_buf+2*A.last_lit]=I>>>8&255,A.pending_buf[A.d_buf+2*A.last_lit+1]=255&I,A.pending_buf[A.l_buf+A.last_lit]=255&g,A.last_lit++,0===I?A.dyn_ltree[2*g]++:(A.matches++,I--,A.dyn_ltree[2*(k[g]+256+1)]++,A.dyn_dtree[2*M(I)]++),A.last_lit===A.lit_bufsize-1),_tr_align:A=>{H(A,2,3),m(A,256,d),(A=>{16===A.bi_valid?(J(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):A.bi_valid>=8&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)})(A)}};var X=(A,I,g,B)=>{let C=65535&A|0,Q=A>>>16&65535|0,E=0;for(;0!==g;){E=g>2e3?2e3:g,g-=E;do{C=C+I[B++]|0,Q=Q+C|0}while(--E);C%=65521,Q%=65521}return C|Q<<16|0};const $=new Uint32Array((()=>{let A,I=[];for(var g=0;g<256;g++){A=g;for(var B=0;B<8;B++)A=1&A?3988292384^A>>>1:A>>>1;I[g]=A}return I})());var AA=(A,I,g,B)=>{const C=$,Q=B+g;A^=-1;for(let g=B;g<Q;g++)A=A>>>8^C[255&(A^I[g])];return-1^A},IA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},gA={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:BA,_tr_stored_block:CA,_tr_flush_block:QA,_tr_tally:EA,_tr_align:iA}=z,{Z_NO_FLUSH:eA,Z_PARTIAL_FLUSH:aA,Z_FULL_FLUSH:tA,Z_FINISH:oA,Z_BLOCK:sA,Z_OK:rA,Z_STREAM_END:DA,Z_STREAM_ERROR:nA,Z_DATA_ERROR:hA,Z_BUF_ERROR:wA,Z_DEFAULT_COMPRESSION:yA,Z_FILTERED:GA,Z_HUFFMAN_ONLY:SA,Z_RLE:NA,Z_FIXED:cA,Z_DEFAULT_STRATEGY:dA,Z_UNKNOWN:FA,Z_DEFLATED:lA}=gA,kA=(A,I)=>(A.msg=IA[I],I),RA=A=>(A<<1)-(A>4?9:0),LA=A=>{let I=A.length;for(;--I>=0;)A[I]=0};let UA=(A,I,g)=>(I<<A.hash_shift^g)&A.hash_mask;const fA=A=>{const I=A.state;let g=I.pending;g>A.avail_out&&(g=A.avail_out),0!==g&&(A.output.set(I.pending_buf.subarray(I.pending_out,I.pending_out+g),A.next_out),A.next_out+=g,I.pending_out+=g,A.total_out+=g,A.avail_out-=g,I.pending-=g,0===I.pending&&(I.pending_out=0))},YA=(A,I)=>{QA(A,A.block_start>=0?A.block_start:-1,A.strstart-A.block_start,I),A.block_start=A.strstart,fA(A.strm)},KA=(A,I)=>{A.pending_buf[A.pending++]=I},uA=(A,I)=>{A.pending_buf[A.pending++]=I>>>8&255,A.pending_buf[A.pending++]=255&I},MA=(A,I,g,B)=>{let C=A.avail_in;return C>B&&(C=B),0===C?0:(A.avail_in-=C,I.set(A.input.subarray(A.next_in,A.next_in+C),g),1===A.state.wrap?A.adler=X(A.adler,I,C,g):2===A.state.wrap&&(A.adler=AA(A.adler,I,C,g)),A.next_in+=C,A.total_in+=C,C)},JA=(A,I)=>{let g,B,C=A.max_chain_length,Q=A.strstart,E=A.prev_length,i=A.nice_match;const e=A.strstart>A.w_size-262?A.strstart-(A.w_size-262):0,a=A.window,t=A.w_mask,o=A.prev,s=A.strstart+258;let r=a[Q+E-1],D=a[Q+E];A.prev_length>=A.good_match&&(C>>=2),i>A.lookahead&&(i=A.lookahead);do{if(g=I,a[g+E]===D&&a[g+E-1]===r&&a[g]===a[Q]&&a[++g]===a[Q+1]){Q+=2,g++;do{}while(a[++Q]===a[++g]&&a[++Q]===a[++g]&&a[++Q]===a[++g]&&a[++Q]===a[++g]&&a[++Q]===a[++g]&&a[++Q]===a[++g]&&a[++Q]===a[++g]&&a[++Q]===a[++g]&&Q<s);if(B=258-(s-Q),Q=s-258,B>E){if(A.match_start=I,E=B,B>=i)break;r=a[Q+E-1],D=a[Q+E]}}}while((I=o[I&t])>e&&0!=--C);return E<=A.lookahead?E:A.lookahead},HA=A=>{const I=A.w_size;let g,B,C,Q,E;do{if(Q=A.window_size-A.lookahead-A.strstart,A.strstart>=I+(I-262)){A.window.set(A.window.subarray(I,I+I),0),A.match_start-=I,A.strstart-=I,A.block_start-=I,B=A.hash_size,g=B;do{C=A.head[--g],A.head[g]=C>=I?C-I:0}while(--B);B=I,g=B;do{C=A.prev[--g],A.prev[g]=C>=I?C-I:0}while(--B);Q+=I}if(0===A.strm.avail_in)break;if(B=MA(A.strm,A.window,A.strstart+A.lookahead,Q),A.lookahead+=B,A.lookahead+A.insert>=3)for(E=A.strstart-A.insert,A.ins_h=A.window[E],A.ins_h=UA(A,A.ins_h,A.window[E+1]);A.insert&&(A.ins_h=UA(A,A.ins_h,A.window[E+3-1]),A.prev[E&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=E,E++,A.insert--,!(A.lookahead+A.insert<3)););}while(A.lookahead<262&&0!==A.strm.avail_in)},mA=(A,I)=>{let g,B;for(;;){if(A.lookahead<262){if(HA(A),A.lookahead<262&&I===eA)return 1;if(0===A.lookahead)break}if(g=0,A.lookahead>=3&&(A.ins_h=UA(A,A.ins_h,A.window[A.strstart+3-1]),g=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),0!==g&&A.strstart-g<=A.w_size-262&&(A.match_length=JA(A,g)),A.match_length>=3)if(B=EA(A,A.strstart-A.match_start,A.match_length-3),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=3){A.match_length--;do{A.strstart++,A.ins_h=UA(A,A.ins_h,A.window[A.strstart+3-1]),g=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart}while(0!=--A.match_length);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=UA(A,A.ins_h,A.window[A.strstart+1]);else B=EA(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(B&&(YA(A,!1),0===A.strm.avail_out))return 1}return A.insert=A.strstart<2?A.strstart:2,I===oA?(YA(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(YA(A,!1),0===A.strm.avail_out)?1:2},pA=(A,I)=>{let g,B,C;for(;;){if(A.lookahead<262){if(HA(A),A.lookahead<262&&I===eA)return 1;if(0===A.lookahead)break}if(g=0,A.lookahead>=3&&(A.ins_h=UA(A,A.ins_h,A.window[A.strstart+3-1]),g=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=2,0!==g&&A.prev_length<A.max_lazy_match&&A.strstart-g<=A.w_size-262&&(A.match_length=JA(A,g),A.match_length<=5&&(A.strategy===GA||3===A.match_length&&A.strstart-A.match_start>4096)&&(A.match_length=2)),A.prev_length>=3&&A.match_length<=A.prev_length){C=A.strstart+A.lookahead-3,B=EA(A,A.strstart-1-A.prev_match,A.prev_length-3),A.lookahead-=A.prev_length-1,A.prev_length-=2;do{++A.strstart<=C&&(A.ins_h=UA(A,A.ins_h,A.window[A.strstart+3-1]),g=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart)}while(0!=--A.prev_length);if(A.match_available=0,A.match_length=2,A.strstart++,B&&(YA(A,!1),0===A.strm.avail_out))return 1}else if(A.match_available){if(B=EA(A,0,A.window[A.strstart-1]),B&&YA(A,!1),A.strstart++,A.lookahead--,0===A.strm.avail_out)return 1}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(B=EA(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<2?A.strstart:2,I===oA?(YA(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(YA(A,!1),0===A.strm.avail_out)?1:2};function qA(A,I,g,B,C){this.good_length=A,this.max_lazy=I,this.nice_length=g,this.max_chain=B,this.func=C}const bA=[new qA(0,0,0,0,((A,I)=>{let g=65535;for(g>A.pending_buf_size-5&&(g=A.pending_buf_size-5);;){if(A.lookahead<=1){if(HA(A),0===A.lookahead&&I===eA)return 1;if(0===A.lookahead)break}A.strstart+=A.lookahead,A.lookahead=0;const B=A.block_start+g;if((0===A.strstart||A.strstart>=B)&&(A.lookahead=A.strstart-B,A.strstart=B,YA(A,!1),0===A.strm.avail_out))return 1;if(A.strstart-A.block_start>=A.w_size-262&&(YA(A,!1),0===A.strm.avail_out))return 1}return A.insert=0,I===oA?(YA(A,!0),0===A.strm.avail_out?3:4):(A.strstart>A.block_start&&(YA(A,!1),A.strm.avail_out),1)})),new qA(4,4,8,4,mA),new qA(4,5,16,8,mA),new qA(4,6,32,32,mA),new qA(4,4,16,16,pA),new qA(8,16,32,32,pA),new qA(8,16,128,128,pA),new qA(8,32,128,256,pA),new qA(32,128,258,1024,pA),new qA(32,258,258,4096,pA)];function xA(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lA,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),LA(this.dyn_ltree),LA(this.dyn_dtree),LA(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),LA(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),LA(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const OA=A=>{if(!A||!A.state)return kA(A,nA);A.total_in=A.total_out=0,A.data_type=FA;const I=A.state;return I.pending=0,I.pending_out=0,I.wrap<0&&(I.wrap=-I.wrap),I.status=I.wrap?42:113,A.adler=2===I.wrap?0:1,I.last_flush=eA,BA(I),rA},TA=A=>{const I=OA(A);var g;return I===rA&&((g=A.state).window_size=2*g.w_size,LA(g.head),g.max_lazy_match=bA[g.level].max_lazy,g.good_match=bA[g.level].good_length,g.nice_match=bA[g.level].nice_length,g.max_chain_length=bA[g.level].max_chain,g.strstart=0,g.block_start=0,g.lookahead=0,g.insert=0,g.match_length=g.prev_length=2,g.match_available=0,g.ins_h=0),I},_A=(A,I,g,B,C,Q)=>{if(!A)return nA;let E=1;if(I===yA&&(I=6),B<0?(E=0,B=-B):B>15&&(E=2,B-=16),C<1||C>9||g!==lA||B<8||B>15||I<0||I>9||Q<0||Q>cA)return kA(A,nA);8===B&&(B=9);const i=new xA;return A.state=i,i.strm=A,i.wrap=E,i.gzhead=null,i.w_bits=B,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=C+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+3-1)/3),i.window=new Uint8Array(2*i.w_size),i.head=new Uint16Array(i.hash_size),i.prev=new Uint16Array(i.w_size),i.lit_bufsize=1<<C+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new Uint8Array(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=I,i.strategy=Q,i.method=g,TA(A)};var ZA={deflateInit:(A,I)=>_A(A,I,lA,15,8,dA),deflateInit2:_A,deflateReset:TA,deflateResetKeep:OA,deflateSetHeader:(A,I)=>A&&A.state?2!==A.state.wrap?nA:(A.state.gzhead=I,rA):nA,deflate:(A,I)=>{let g,B;if(!A||!A.state||I>sA||I<0)return A?kA(A,nA):nA;const C=A.state;if(!A.output||!A.input&&0!==A.avail_in||666===C.status&&I!==oA)return kA(A,0===A.avail_out?wA:nA);C.strm=A;const Q=C.last_flush;if(C.last_flush=I,42===C.status)if(2===C.wrap)A.adler=0,KA(C,31),KA(C,139),KA(C,8),C.gzhead?(KA(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),KA(C,255&C.gzhead.time),KA(C,C.gzhead.time>>8&255),KA(C,C.gzhead.time>>16&255),KA(C,C.gzhead.time>>24&255),KA(C,9===C.level?2:C.strategy>=SA||C.level<2?4:0),KA(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(KA(C,255&C.gzhead.extra.length),KA(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(A.adler=AA(A.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(KA(C,0),KA(C,0),KA(C,0),KA(C,0),KA(C,0),KA(C,9===C.level?2:C.strategy>=SA||C.level<2?4:0),KA(C,3),C.status=113);else{let I=lA+(C.w_bits-8<<4)<<8,g=-1;g=C.strategy>=SA||C.level<2?0:C.level<6?1:6===C.level?2:3,I|=g<<6,0!==C.strstart&&(I|=32),I+=31-I%31,C.status=113,uA(C,I),0!==C.strstart&&(uA(C,A.adler>>>16),uA(C,65535&A.adler)),A.adler=1}if(69===C.status)if(C.gzhead.extra){for(g=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>g&&(A.adler=AA(A.adler,C.pending_buf,C.pending-g,g)),fA(A),g=C.pending,C.pending!==C.pending_buf_size));)KA(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>g&&(A.adler=AA(A.adler,C.pending_buf,C.pending-g,g)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(73===C.status)if(C.gzhead.name){g=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>g&&(A.adler=AA(A.adler,C.pending_buf,C.pending-g,g)),fA(A),g=C.pending,C.pending===C.pending_buf_size)){B=1;break}B=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,KA(C,B)}while(0!==B);C.gzhead.hcrc&&C.pending>g&&(A.adler=AA(A.adler,C.pending_buf,C.pending-g,g)),0===B&&(C.gzindex=0,C.status=91)}else C.status=91;if(91===C.status)if(C.gzhead.comment){g=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>g&&(A.adler=AA(A.adler,C.pending_buf,C.pending-g,g)),fA(A),g=C.pending,C.pending===C.pending_buf_size)){B=1;break}B=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,KA(C,B)}while(0!==B);C.gzhead.hcrc&&C.pending>g&&(A.adler=AA(A.adler,C.pending_buf,C.pending-g,g)),0===B&&(C.status=103)}else C.status=103;if(103===C.status&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&fA(A),C.pending+2<=C.pending_buf_size&&(KA(C,255&A.adler),KA(C,A.adler>>8&255),A.adler=0,C.status=113)):C.status=113),0!==C.pending){if(fA(A),0===A.avail_out)return C.last_flush=-1,rA}else if(0===A.avail_in&&RA(I)<=RA(Q)&&I!==oA)return kA(A,wA);if(666===C.status&&0!==A.avail_in)return kA(A,wA);if(0!==A.avail_in||0!==C.lookahead||I!==eA&&666!==C.status){let g=C.strategy===SA?((A,I)=>{let g;for(;;){if(0===A.lookahead&&(HA(A),0===A.lookahead)){if(I===eA)return 1;break}if(A.match_length=0,g=EA(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,g&&(YA(A,!1),0===A.strm.avail_out))return 1}return A.insert=0,I===oA?(YA(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(YA(A,!1),0===A.strm.avail_out)?1:2})(C,I):C.strategy===NA?((A,I)=>{let g,B,C,Q;const E=A.window;for(;;){if(A.lookahead<=258){if(HA(A),A.lookahead<=258&&I===eA)return 1;if(0===A.lookahead)break}if(A.match_length=0,A.lookahead>=3&&A.strstart>0&&(C=A.strstart-1,B=E[C],B===E[++C]&&B===E[++C]&&B===E[++C])){Q=A.strstart+258;do{}while(B===E[++C]&&B===E[++C]&&B===E[++C]&&B===E[++C]&&B===E[++C]&&B===E[++C]&&B===E[++C]&&B===E[++C]&&C<Q);A.match_length=258-(Q-C),A.match_length>A.lookahead&&(A.match_length=A.lookahead)}if(A.match_length>=3?(g=EA(A,1,A.match_length-3),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0):(g=EA(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++),g&&(YA(A,!1),0===A.strm.avail_out))return 1}return A.insert=0,I===oA?(YA(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(YA(A,!1),0===A.strm.avail_out)?1:2})(C,I):bA[C.level].func(C,I);if(3!==g&&4!==g||(C.status=666),1===g||3===g)return 0===A.avail_out&&(C.last_flush=-1),rA;if(2===g&&(I===aA?iA(C):I!==sA&&(CA(C,0,0,!1),I===tA&&(LA(C.head),0===C.lookahead&&(C.strstart=0,C.block_start=0,C.insert=0))),fA(A),0===A.avail_out))return C.last_flush=-1,rA}return I!==oA?rA:C.wrap<=0?DA:(2===C.wrap?(KA(C,255&A.adler),KA(C,A.adler>>8&255),KA(C,A.adler>>16&255),KA(C,A.adler>>24&255),KA(C,255&A.total_in),KA(C,A.total_in>>8&255),KA(C,A.total_in>>16&255),KA(C,A.total_in>>24&255)):(uA(C,A.adler>>>16),uA(C,65535&A.adler)),fA(A),C.wrap>0&&(C.wrap=-C.wrap),0!==C.pending?rA:DA)},deflateEnd:A=>{if(!A||!A.state)return nA;const I=A.state.status;return 42!==I&&69!==I&&73!==I&&91!==I&&103!==I&&113!==I&&666!==I?kA(A,nA):(A.state=null,113===I?kA(A,hA):rA)},deflateSetDictionary:(A,I)=>{let g=I.length;if(!A||!A.state)return nA;const B=A.state,C=B.wrap;if(2===C||1===C&&42!==B.status||B.lookahead)return nA;if(1===C&&(A.adler=X(A.adler,I,g,0)),B.wrap=0,g>=B.w_size){0===C&&(LA(B.head),B.strstart=0,B.block_start=0,B.insert=0);let A=new Uint8Array(B.w_size);A.set(I.subarray(g-B.w_size,g),0),I=A,g=B.w_size}const Q=A.avail_in,E=A.next_in,i=A.input;for(A.avail_in=g,A.next_in=0,A.input=I,HA(B);B.lookahead>=3;){let A=B.strstart,I=B.lookahead-2;do{B.ins_h=UA(B,B.ins_h,B.window[A+3-1]),B.prev[A&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=A,A++}while(--I);B.strstart=A,B.lookahead=2,HA(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=2,B.match_available=0,A.next_in=E,A.input=i,A.avail_in=Q,B.wrap=C,rA},deflateInfo:"pako deflate (from Nodeca project)"};const PA=(A,I)=>Object.prototype.hasOwnProperty.call(A,I);var vA=function(A){const I=Array.prototype.slice.call(arguments,1);for(;I.length;){const g=I.shift();if(g){if("object"!=typeof g)throw new TypeError(g+"must be non-object");for(const I in g)PA(g,I)&&(A[I]=g[I])}}return A},jA=A=>{let I=0;for(let g=0,B=A.length;g<B;g++)I+=A[g].length;const g=new Uint8Array(I);for(let I=0,B=0,C=A.length;I<C;I++){let C=A[I];g.set(C,B),B+=C.length}return g};let WA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){WA=!1}const VA=new Uint8Array(256);for(let A=0;A<256;A++)VA[A]=A>=252?6:A>=248?5:A>=240?4:A>=224?3:A>=192?2:1;VA[254]=VA[254]=1;var zA=A=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(A);let I,g,B,C,Q,E=A.length,i=0;for(C=0;C<E;C++)g=A.charCodeAt(C),55296==(64512&g)&&C+1<E&&(B=A.charCodeAt(C+1),56320==(64512&B)&&(g=65536+(g-55296<<10)+(B-56320),C++)),i+=g<128?1:g<2048?2:g<65536?3:4;for(I=new Uint8Array(i),Q=0,C=0;Q<i;C++)g=A.charCodeAt(C),55296==(64512&g)&&C+1<E&&(B=A.charCodeAt(C+1),56320==(64512&B)&&(g=65536+(g-55296<<10)+(B-56320),C++)),g<128?I[Q++]=g:g<2048?(I[Q++]=192|g>>>6,I[Q++]=128|63&g):g<65536?(I[Q++]=224|g>>>12,I[Q++]=128|g>>>6&63,I[Q++]=128|63&g):(I[Q++]=240|g>>>18,I[Q++]=128|g>>>12&63,I[Q++]=128|g>>>6&63,I[Q++]=128|63&g);return I},XA=(A,I)=>{const g=I||A.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(A.subarray(0,I));let B,C;const Q=new Array(2*g);for(C=0,B=0;B<g;){let I=A[B++];if(I<128){Q[C++]=I;continue}let E=VA[I];if(E>4)Q[C++]=65533,B+=E-1;else{for(I&=2===E?31:3===E?15:7;E>1&&B<g;)I=I<<6|63&A[B++],E--;E>1?Q[C++]=65533:I<65536?Q[C++]=I:(I-=65536,Q[C++]=55296|I>>10&1023,Q[C++]=56320|1023&I)}}return((A,I)=>{if(I<65534&&A.subarray&&WA)return String.fromCharCode.apply(null,A.length===I?A:A.subarray(0,I));let g="";for(let B=0;B<I;B++)g+=String.fromCharCode(A[B]);return g})(Q,C)},$A=(A,I)=>{(I=I||A.length)>A.length&&(I=A.length);let g=I-1;for(;g>=0&&128==(192&A[g]);)g--;return g<0||0===g?I:g+VA[A[g]]>I?g:I};var AI=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const II=Object.prototype.toString,{Z_NO_FLUSH:gI,Z_SYNC_FLUSH:BI,Z_FULL_FLUSH:CI,Z_FINISH:QI,Z_OK:EI,Z_STREAM_END:iI,Z_DEFAULT_COMPRESSION:eI,Z_DEFAULT_STRATEGY:aI,Z_DEFLATED:tI}=gA;function oI(A){this.options=vA({level:eI,method:tI,chunkSize:16384,windowBits:15,memLevel:8,strategy:aI},A||{});let I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new AI,this.strm.avail_out=0;let g=ZA.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(g!==EI)throw new Error(IA[g]);if(I.header&&ZA.deflateSetHeader(this.strm,I.header),I.dictionary){let A;if(A="string"==typeof I.dictionary?zA(I.dictionary):"[object ArrayBuffer]"===II.call(I.dictionary)?new Uint8Array(I.dictionary):I.dictionary,g=ZA.deflateSetDictionary(this.strm,A),g!==EI)throw new Error(IA[g]);this._dict_set=!0}}oI.prototype.push=function(A,I){const g=this.strm,B=this.options.chunkSize;let C,Q;if(this.ended)return!1;for(Q=I===~~I?I:!0===I?QI:gI,"string"==typeof A?g.input=zA(A):"[object ArrayBuffer]"===II.call(A)?g.input=new Uint8Array(A):g.input=A,g.next_in=0,g.avail_in=g.input.length;;)if(0===g.avail_out&&(g.output=new Uint8Array(B),g.next_out=0,g.avail_out=B),(Q===BI||Q===CI)&&g.avail_out<=6)this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;else{if(C=ZA.deflate(g,Q),C===iI)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),C=ZA.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===EI;if(0!==g.avail_out){if(Q>0&&g.next_out>0)this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;else if(0===g.avail_in)break}else this.onData(g.output)}return!0},oI.prototype.onData=function(A){this.chunks.push(A)},oI.prototype.onEnd=function(A){A===EI&&(this.result=jA(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var sI=function(A,I){let g,B,C,Q,E,i,e,a,t,o,s,r,D,n,h,w,y,G,S,N,c,d,F,l;const k=A.state;g=A.next_in,F=A.input,B=g+(A.avail_in-5),C=A.next_out,l=A.output,Q=C-(I-A.avail_out),E=C+(A.avail_out-257),i=k.dmax,e=k.wsize,a=k.whave,t=k.wnext,o=k.window,s=k.hold,r=k.bits,D=k.lencode,n=k.distcode,h=(1<<k.lenbits)-1,w=(1<<k.distbits)-1;A:do{r<15&&(s+=F[g++]<<r,r+=8,s+=F[g++]<<r,r+=8),y=D[s&h];I:for(;;){if(G=y>>>24,s>>>=G,r-=G,G=y>>>16&255,0===G)l[C++]=65535&y;else{if(!(16&G)){if(0==(64&G)){y=D[(65535&y)+(s&(1<<G)-1)];continue I}if(32&G){k.mode=12;break A}A.msg="invalid literal/length code",k.mode=30;break A}S=65535&y,G&=15,G&&(r<G&&(s+=F[g++]<<r,r+=8),S+=s&(1<<G)-1,s>>>=G,r-=G),r<15&&(s+=F[g++]<<r,r+=8,s+=F[g++]<<r,r+=8),y=n[s&w];g:for(;;){if(G=y>>>24,s>>>=G,r-=G,G=y>>>16&255,!(16&G)){if(0==(64&G)){y=n[(65535&y)+(s&(1<<G)-1)];continue g}A.msg="invalid distance code",k.mode=30;break A}if(N=65535&y,G&=15,r<G&&(s+=F[g++]<<r,r+=8,r<G&&(s+=F[g++]<<r,r+=8)),N+=s&(1<<G)-1,N>i){A.msg="invalid distance too far back",k.mode=30;break A}if(s>>>=G,r-=G,G=C-Q,N>G){if(G=N-G,G>a&&k.sane){A.msg="invalid distance too far back",k.mode=30;break A}if(c=0,d=o,0===t){if(c+=e-G,G<S){S-=G;do{l[C++]=o[c++]}while(--G);c=C-N,d=l}}else if(t<G){if(c+=e+t-G,G-=t,G<S){S-=G;do{l[C++]=o[c++]}while(--G);if(c=0,t<S){G=t,S-=G;do{l[C++]=o[c++]}while(--G);c=C-N,d=l}}}else if(c+=t-G,G<S){S-=G;do{l[C++]=o[c++]}while(--G);c=C-N,d=l}for(;S>2;)l[C++]=d[c++],l[C++]=d[c++],l[C++]=d[c++],S-=3;S&&(l[C++]=d[c++],S>1&&(l[C++]=d[c++]))}else{c=C-N;do{l[C++]=l[c++],l[C++]=l[c++],l[C++]=l[c++],S-=3}while(S>2);S&&(l[C++]=l[c++],S>1&&(l[C++]=l[c++]))}break}}break}}while(g<B&&C<E);S=r>>3,g-=S,r-=S<<3,s&=(1<<r)-1,A.next_in=g,A.next_out=C,A.avail_in=g<B?B-g+5:5-(g-B),A.avail_out=C<E?E-C+257:257-(C-E),k.hold=s,k.bits=r};const rI=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),DI=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nI=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hI=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var wI=(A,I,g,B,C,Q,E,i)=>{const e=i.bits;let a,t,o,s,r,D,n=0,h=0,w=0,y=0,G=0,S=0,N=0,c=0,d=0,F=0,l=null,k=0;const R=new Uint16Array(16),L=new Uint16Array(16);let U,f,Y,K=null,u=0;for(n=0;n<=15;n++)R[n]=0;for(h=0;h<B;h++)R[I[g+h]]++;for(G=e,y=15;y>=1&&0===R[y];y--);if(G>y&&(G=y),0===y)return C[Q++]=20971520,C[Q++]=20971520,i.bits=1,0;for(w=1;w<y&&0===R[w];w++);for(G<w&&(G=w),c=1,n=1;n<=15;n++)if(c<<=1,c-=R[n],c<0)return-1;if(c>0&&(0===A||1!==y))return-1;for(L[1]=0,n=1;n<15;n++)L[n+1]=L[n]+R[n];for(h=0;h<B;h++)0!==I[g+h]&&(E[L[I[g+h]]++]=h);if(0===A?(l=K=E,D=19):1===A?(l=rI,k-=257,K=DI,u-=257,D=256):(l=nI,K=hI,D=-1),F=0,h=0,n=w,r=Q,S=G,N=0,o=-1,d=1<<G,s=d-1,1===A&&d>852||2===A&&d>592)return 1;for(;;){U=n-N,E[h]<D?(f=0,Y=E[h]):E[h]>D?(f=K[u+E[h]],Y=l[k+E[h]]):(f=96,Y=0),a=1<<n-N,t=1<<S,w=t;do{t-=a,C[r+(F>>N)+t]=U<<24|f<<16|Y|0}while(0!==t);for(a=1<<n-1;F&a;)a>>=1;if(0!==a?(F&=a-1,F+=a):F=0,h++,0==--R[n]){if(n===y)break;n=I[g+E[h]]}if(n>G&&(F&s)!==o){for(0===N&&(N=G),r+=w,S=n-N,c=1<<S;S+N<y&&(c-=R[S+N],!(c<=0));)S++,c<<=1;if(d+=1<<S,1===A&&d>852||2===A&&d>592)return 1;o=F&s,C[o]=G<<24|S<<16|r-Q|0}}return 0!==F&&(C[r+F]=n-N<<24|64<<16|0),i.bits=G,0};const{Z_FINISH:yI,Z_BLOCK:GI,Z_TREES:SI,Z_OK:NI,Z_STREAM_END:cI,Z_NEED_DICT:dI,Z_STREAM_ERROR:FI,Z_DATA_ERROR:lI,Z_MEM_ERROR:kI,Z_BUF_ERROR:RI,Z_DEFLATED:LI}=gA,UI=A=>(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24);function fI(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const YI=A=>{if(!A||!A.state)return FI;const I=A.state;return A.total_in=A.total_out=I.total=0,A.msg="",I.wrap&&(A.adler=1&I.wrap),I.mode=1,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new Int32Array(852),I.distcode=I.distdyn=new Int32Array(592),I.sane=1,I.back=-1,NI},KI=A=>{if(!A||!A.state)return FI;const I=A.state;return I.wsize=0,I.whave=0,I.wnext=0,YI(A)},uI=(A,I)=>{let g;if(!A||!A.state)return FI;const B=A.state;return I<0?(g=0,I=-I):(g=1+(I>>4),I<48&&(I&=15)),I&&(I<8||I>15)?FI:(null!==B.window&&B.wbits!==I&&(B.window=null),B.wrap=g,B.wbits=I,KI(A))},MI=(A,I)=>{if(!A)return FI;const g=new fI;A.state=g,g.window=null;const B=uI(A,I);return B!==NI&&(A.state=null),B};let JI,HI,mI=!0;const pI=A=>{if(mI){JI=new Int32Array(512),HI=new Int32Array(32);let I=0;for(;I<144;)A.lens[I++]=8;for(;I<256;)A.lens[I++]=9;for(;I<280;)A.lens[I++]=7;for(;I<288;)A.lens[I++]=8;for(wI(1,A.lens,0,288,JI,0,A.work,{bits:9}),I=0;I<32;)A.lens[I++]=5;wI(2,A.lens,0,32,HI,0,A.work,{bits:5}),mI=!1}A.lencode=JI,A.lenbits=9,A.distcode=HI,A.distbits=5},qI=(A,I,g,B)=>{let C;const Q=A.state;return null===Q.window&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new Uint8Array(Q.wsize)),B>=Q.wsize?(Q.window.set(I.subarray(g-Q.wsize,g),0),Q.wnext=0,Q.whave=Q.wsize):(C=Q.wsize-Q.wnext,C>B&&(C=B),Q.window.set(I.subarray(g-B,g-B+C),Q.wnext),(B-=C)?(Q.window.set(I.subarray(g-B,g),0),Q.wnext=B,Q.whave=Q.wsize):(Q.wnext+=C,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=C))),0};var bI={inflateReset:KI,inflateReset2:uI,inflateResetKeep:YI,inflateInit:A=>MI(A,15),inflateInit2:MI,inflate:(A,I)=>{let g,B,C,Q,E,i,e,a,t,o,s,r,D,n,h,w,y,G,S,N,c,d,F=0;const l=new Uint8Array(4);let k,R;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return FI;g=A.state,12===g.mode&&(g.mode=13),E=A.next_out,C=A.output,e=A.avail_out,Q=A.next_in,B=A.input,i=A.avail_in,a=g.hold,t=g.bits,o=i,s=e,d=NI;A:for(;;)switch(g.mode){case 1:if(0===g.wrap){g.mode=13;break}for(;t<16;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(2&g.wrap&&35615===a){g.check=0,l[0]=255&a,l[1]=a>>>8&255,g.check=AA(g.check,l,2,0),a=0,t=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&a)<<8)+(a>>8))%31){A.msg="incorrect header check",g.mode=30;break}if((15&a)!==LI){A.msg="unknown compression method",g.mode=30;break}if(a>>>=4,t-=4,c=8+(15&a),0===g.wbits)g.wbits=c;else if(c>g.wbits){A.msg="invalid window size",g.mode=30;break}g.dmax=1<<g.wbits,A.adler=g.check=1,g.mode=512&a?10:12,a=0,t=0;break;case 2:for(;t<16;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(g.flags=a,(255&g.flags)!==LI){A.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){A.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=a>>8&1),512&g.flags&&(l[0]=255&a,l[1]=a>>>8&255,g.check=AA(g.check,l,2,0)),a=0,t=0,g.mode=3;case 3:for(;t<32;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}g.head&&(g.head.time=a),512&g.flags&&(l[0]=255&a,l[1]=a>>>8&255,l[2]=a>>>16&255,l[3]=a>>>24&255,g.check=AA(g.check,l,4,0)),a=0,t=0,g.mode=4;case 4:for(;t<16;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}g.head&&(g.head.xflags=255&a,g.head.os=a>>8),512&g.flags&&(l[0]=255&a,l[1]=a>>>8&255,g.check=AA(g.check,l,2,0)),a=0,t=0,g.mode=5;case 5:if(1024&g.flags){for(;t<16;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}g.length=a,g.head&&(g.head.extra_len=a),512&g.flags&&(l[0]=255&a,l[1]=a>>>8&255,g.check=AA(g.check,l,2,0)),a=0,t=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(r=g.length,r>i&&(r=i),r&&(g.head&&(c=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Uint8Array(g.head.extra_len)),g.head.extra.set(B.subarray(Q,Q+r),c)),512&g.flags&&(g.check=AA(g.check,B,r,Q)),i-=r,Q+=r,g.length-=r),g.length))break A;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(0===i)break A;r=0;do{c=B[Q+r++],g.head&&c&&g.length<65536&&(g.head.name+=String.fromCharCode(c))}while(c&&r<i);if(512&g.flags&&(g.check=AA(g.check,B,r,Q)),i-=r,Q+=r,c)break A}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(0===i)break A;r=0;do{c=B[Q+r++],g.head&&c&&g.length<65536&&(g.head.comment+=String.fromCharCode(c))}while(c&&r<i);if(512&g.flags&&(g.check=AA(g.check,B,r,Q)),i-=r,Q+=r,c)break A}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;t<16;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(a!==(65535&g.check)){A.msg="header crc mismatch",g.mode=30;break}a=0,t=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),A.adler=g.check=0,g.mode=12;break;case 10:for(;t<32;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}A.adler=g.check=UI(a),a=0,t=0,g.mode=11;case 11:if(0===g.havedict)return A.next_out=E,A.avail_out=e,A.next_in=Q,A.avail_in=i,g.hold=a,g.bits=t,dI;A.adler=g.check=1,g.mode=12;case 12:if(I===GI||I===SI)break A;case 13:if(g.last){a>>>=7&t,t-=7&t,g.mode=27;break}for(;t<3;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}switch(g.last=1&a,a>>>=1,t-=1,3&a){case 0:g.mode=14;break;case 1:if(pI(g),g.mode=20,I===SI){a>>>=2,t-=2;break A}break;case 2:g.mode=17;break;case 3:A.msg="invalid block type",g.mode=30}a>>>=2,t-=2;break;case 14:for(a>>>=7&t,t-=7&t;t<32;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if((65535&a)!=(a>>>16^65535)){A.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&a,a=0,t=0,g.mode=15,I===SI)break A;case 15:g.mode=16;case 16:if(r=g.length,r){if(r>i&&(r=i),r>e&&(r=e),0===r)break A;C.set(B.subarray(Q,Q+r),E),i-=r,Q+=r,e-=r,E+=r,g.length-=r;break}g.mode=12;break;case 17:for(;t<14;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(g.nlen=257+(31&a),a>>>=5,t-=5,g.ndist=1+(31&a),a>>>=5,t-=5,g.ncode=4+(15&a),a>>>=4,t-=4,g.nlen>286||g.ndist>30){A.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;t<3;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}g.lens[L[g.have++]]=7&a,a>>>=3,t-=3}for(;g.have<19;)g.lens[L[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,k={bits:g.lenbits},d=wI(0,g.lens,0,19,g.lencode,0,g.work,k),g.lenbits=k.bits,d){A.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;F=g.lencode[a&(1<<g.lenbits)-1],h=F>>>24,w=F>>>16&255,y=65535&F,!(h<=t);){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(y<16)a>>>=h,t-=h,g.lens[g.have++]=y;else{if(16===y){for(R=h+2;t<R;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(a>>>=h,t-=h,0===g.have){A.msg="invalid bit length repeat",g.mode=30;break}c=g.lens[g.have-1],r=3+(3&a),a>>>=2,t-=2}else if(17===y){for(R=h+3;t<R;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}a>>>=h,t-=h,c=0,r=3+(7&a),a>>>=3,t-=3}else{for(R=h+7;t<R;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}a>>>=h,t-=h,c=0,r=11+(127&a),a>>>=7,t-=7}if(g.have+r>g.nlen+g.ndist){A.msg="invalid bit length repeat",g.mode=30;break}for(;r--;)g.lens[g.have++]=c}}if(30===g.mode)break;if(0===g.lens[256]){A.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,k={bits:g.lenbits},d=wI(1,g.lens,0,g.nlen,g.lencode,0,g.work,k),g.lenbits=k.bits,d){A.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,k={bits:g.distbits},d=wI(2,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,k),g.distbits=k.bits,d){A.msg="invalid distances set",g.mode=30;break}if(g.mode=20,I===SI)break A;case 20:g.mode=21;case 21:if(i>=6&&e>=258){A.next_out=E,A.avail_out=e,A.next_in=Q,A.avail_in=i,g.hold=a,g.bits=t,sI(A,s),E=A.next_out,C=A.output,e=A.avail_out,Q=A.next_in,B=A.input,i=A.avail_in,a=g.hold,t=g.bits,12===g.mode&&(g.back=-1);break}for(g.back=0;F=g.lencode[a&(1<<g.lenbits)-1],h=F>>>24,w=F>>>16&255,y=65535&F,!(h<=t);){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(w&&0==(240&w)){for(G=h,S=w,N=y;F=g.lencode[N+((a&(1<<G+S)-1)>>G)],h=F>>>24,w=F>>>16&255,y=65535&F,!(G+h<=t);){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}a>>>=G,t-=G,g.back+=G}if(a>>>=h,t-=h,g.back+=h,g.length=y,0===w){g.mode=26;break}if(32&w){g.back=-1,g.mode=12;break}if(64&w){A.msg="invalid literal/length code",g.mode=30;break}g.extra=15&w,g.mode=22;case 22:if(g.extra){for(R=g.extra;t<R;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}g.length+=a&(1<<g.extra)-1,a>>>=g.extra,t-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;F=g.distcode[a&(1<<g.distbits)-1],h=F>>>24,w=F>>>16&255,y=65535&F,!(h<=t);){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(0==(240&w)){for(G=h,S=w,N=y;F=g.distcode[N+((a&(1<<G+S)-1)>>G)],h=F>>>24,w=F>>>16&255,y=65535&F,!(G+h<=t);){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}a>>>=G,t-=G,g.back+=G}if(a>>>=h,t-=h,g.back+=h,64&w){A.msg="invalid distance code",g.mode=30;break}g.offset=y,g.extra=15&w,g.mode=24;case 24:if(g.extra){for(R=g.extra;t<R;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}g.offset+=a&(1<<g.extra)-1,a>>>=g.extra,t-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){A.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(0===e)break A;if(r=s-e,g.offset>r){if(r=g.offset-r,r>g.whave&&g.sane){A.msg="invalid distance too far back",g.mode=30;break}r>g.wnext?(r-=g.wnext,D=g.wsize-r):D=g.wnext-r,r>g.length&&(r=g.length),n=g.window}else n=C,D=E-g.offset,r=g.length;r>e&&(r=e),e-=r,g.length-=r;do{C[E++]=n[D++]}while(--r);0===g.length&&(g.mode=21);break;case 26:if(0===e)break A;C[E++]=g.length,e--,g.mode=21;break;case 27:if(g.wrap){for(;t<32;){if(0===i)break A;i--,a|=B[Q++]<<t,t+=8}if(s-=e,A.total_out+=s,g.total+=s,s&&(A.adler=g.check=g.flags?AA(g.check,C,s,E-s):X(g.check,C,s,E-s)),s=e,(g.flags?a:UI(a))!==g.check){A.msg="incorrect data check",g.mode=30;break}a=0,t=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;t<32;){if(0===i)break A;i--,a+=B[Q++]<<t,t+=8}if(a!==(4294967295&g.total)){A.msg="incorrect length check",g.mode=30;break}a=0,t=0}g.mode=29;case 29:d=cI;break A;case 30:d=lI;break A;case 31:return kI;default:return FI}return A.next_out=E,A.avail_out=e,A.next_in=Q,A.avail_in=i,g.hold=a,g.bits=t,(g.wsize||s!==A.avail_out&&g.mode<30&&(g.mode<27||I!==yI))&&qI(A,A.output,A.next_out,s-A.avail_out),o-=A.avail_in,s-=A.avail_out,A.total_in+=o,A.total_out+=s,g.total+=s,g.wrap&&s&&(A.adler=g.check=g.flags?AA(g.check,C,s,A.next_out-s):X(g.check,C,s,A.next_out-s)),A.data_type=g.bits+(g.last?64:0)+(12===g.mode?128:0)+(20===g.mode||15===g.mode?256:0),(0===o&&0===s||I===yI)&&d===NI&&(d=RI),d},inflateEnd:A=>{if(!A||!A.state)return FI;let I=A.state;return I.window&&(I.window=null),A.state=null,NI},inflateGetHeader:(A,I)=>{if(!A||!A.state)return FI;const g=A.state;return 0==(2&g.wrap)?FI:(g.head=I,I.done=!1,NI)},inflateSetDictionary:(A,I)=>{const g=I.length;let B,C,Q;return A&&A.state?(B=A.state,0!==B.wrap&&11!==B.mode?FI:11===B.mode&&(C=1,C=X(C,I,g,0),C!==B.check)?lI:(Q=qI(A,I,g,g),Q?(B.mode=31,kI):(B.havedict=1,NI))):FI},inflateInfo:"pako inflate (from Nodeca project)"};var xI=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const OI=Object.prototype.toString,{Z_NO_FLUSH:TI,Z_FINISH:_I,Z_OK:ZI,Z_STREAM_END:PI,Z_NEED_DICT:vI,Z_STREAM_ERROR:jI,Z_DATA_ERROR:WI,Z_MEM_ERROR:VI}=gA;function zI(A){this.options=vA({chunkSize:65536,windowBits:15,to:""},A||{});const I=this.options;I.raw&&I.windowBits>=0&&I.windowBits<16&&(I.windowBits=-I.windowBits,0===I.windowBits&&(I.windowBits=-15)),!(I.windowBits>=0&&I.windowBits<16)||A&&A.windowBits||(I.windowBits+=32),I.windowBits>15&&I.windowBits<48&&0==(15&I.windowBits)&&(I.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new AI,this.strm.avail_out=0;let g=bI.inflateInit2(this.strm,I.windowBits);if(g!==ZI)throw new Error(IA[g]);if(this.header=new xI,bI.inflateGetHeader(this.strm,this.header),I.dictionary&&("string"==typeof I.dictionary?I.dictionary=zA(I.dictionary):"[object ArrayBuffer]"===OI.call(I.dictionary)&&(I.dictionary=new Uint8Array(I.dictionary)),I.raw&&(g=bI.inflateSetDictionary(this.strm,I.dictionary),g!==ZI)))throw new Error(IA[g])}function XI(A,I){const g=new zI(I);if(g.push(A),g.err)throw g.msg||IA[g.err];return g.result}zI.prototype.push=function(A,I){const g=this.strm,B=this.options.chunkSize,C=this.options.dictionary;let Q,E,i;if(this.ended)return!1;for(E=I===~~I?I:!0===I?_I:TI,"[object ArrayBuffer]"===OI.call(A)?g.input=new Uint8Array(A):g.input=A,g.next_in=0,g.avail_in=g.input.length;;){for(0===g.avail_out&&(g.output=new Uint8Array(B),g.next_out=0,g.avail_out=B),Q=bI.inflate(g,E),Q===vI&&C&&(Q=bI.inflateSetDictionary(g,C),Q===ZI?Q=bI.inflate(g,E):Q===WI&&(Q=vI));g.avail_in>0&&Q===PI&&g.state.wrap>0&&0!==A[g.next_in];)bI.inflateReset(g),Q=bI.inflate(g,E);switch(Q){case jI:case WI:case vI:case VI:return this.onEnd(Q),this.ended=!0,!1}if(i=g.avail_out,g.next_out&&(0===g.avail_out||Q===PI))if("string"===this.options.to){let A=$A(g.output,g.next_out),I=g.next_out-A,C=XA(g.output,A);g.next_out=I,g.avail_out=B-I,I&&g.output.set(g.output.subarray(A,A+I),0),this.onData(C)}else this.onData(g.output.length===g.next_out?g.output:g.output.subarray(0,g.next_out));if(Q!==ZI||0!==i){if(Q===PI)return Q=bI.inflateEnd(this.strm),this.onEnd(Q),this.ended=!0,!0;if(0===g.avail_in)break}}return!0},zI.prototype.onData=function(A){this.chunks.push(A)},zI.prototype.onEnd=function(A){A===ZI&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=jA(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var $I={Inflate:zI,inflate:XI,inflateRaw:function(A,I){return(I=I||{}).raw=!0,XI(A,I)},ungzip:XI,constants:gA};const{Inflate:Ag,inflate:Ig,inflateRaw:gg,ungzip:Bg}=$I;var Cg=Ig;var Qg=Object.freeze({__proto__:null,default:class extends i{decodeBlock(A){return Cg(new Uint8Array(A)).buffer}}});var Eg,ig=Object.freeze({__proto__:null,default:class extends i{decodeBlock(A){const I=new DataView(A),g=[];for(let B=0;B<A.byteLength;++B){let A=I.getInt8(B);if(A<0){const C=I.getUint8(B+1);A=-A;for(let I=0;I<=A;++I)g.push(C);B+=1}else{for(let C=0;C<=A;++C)g.push(I.getUint8(B+C+1));B+=A+1}}return new Uint8Array(g).buffer}}}),eg={exports:{}};Eg=eg,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var A,I,g,B,C,Q,E,i,e,a,t,o,s,r,D,n,h=(A={defaultNoDataValue:-34027999387901484e22,decode:function(Q,E){var i=(E=E||{}).encodedMaskData||null===E.encodedMaskData,e=C(Q,E.inputOffset||0,i),a=null!==E.noDataValue?E.noDataValue:A.defaultNoDataValue,t=I(e,E.pixelType||Float32Array,E.encodedMaskData,a,E.returnMask),o={width:e.width,height:e.height,pixelData:t.resultPixels,minValue:t.minValue,maxValue:e.pixels.maxValue,noDataValue:a};return t.resultMask&&(o.maskData=t.resultMask),E.returnEncodedMask&&e.mask&&(o.encodedMaskData=e.mask.bitset?e.mask.bitset:null),E.returnFileInfo&&(o.fileInfo=g(e),E.computeUsedBitDepths&&(o.fileInfo.bitDepths=B(e))),o}},I=function(A,I,g,B,C){var E,i,e,a=0,t=A.pixels.numBlocksX,o=A.pixels.numBlocksY,s=Math.floor(A.width/t),r=Math.floor(A.height/o),D=2*A.maxZError,n=Number.MAX_VALUE;g=g||(A.mask?A.mask.bitset:null),i=new I(A.width*A.height),C&&g&&(e=new Uint8Array(A.width*A.height));for(var h,w,y=new Float32Array(s*r),G=0;G<=o;G++){var S=G!==o?r:A.height%o;if(0!==S)for(var N=0;N<=t;N++){var c=N!==t?s:A.width%t;if(0!==c){var d,F,l,k,R=G*A.width*r+N*s,L=A.width-c,U=A.pixels.blocks[a];if(U.encoding<2?(0===U.encoding?d=U.rawData:(Q(U.stuffedData,U.bitsPerPixel,U.numValidPixels,U.offset,D,y,A.pixels.maxValue),d=y),F=0):l=2===U.encoding?0:U.offset,g)for(w=0;w<S;w++){for(7&R&&(k=g[R>>3],k<<=7&R),h=0;h<c;h++)7&R||(k=g[R>>3]),128&k?(e&&(e[R]=1),n=n>(E=U.encoding<2?d[F++]:l)?E:n,i[R++]=E):(e&&(e[R]=0),i[R++]=B),k<<=1;R+=L}else if(U.encoding<2)for(w=0;w<S;w++){for(h=0;h<c;h++)n=n>(E=d[F++])?E:n,i[R++]=E;R+=L}else for(n=n>l?l:n,w=0;w<S;w++){for(h=0;h<c;h++)i[R++]=l;R+=L}if(1===U.encoding&&F!==U.numValidPixels)throw"Block and Mask do not match";a++}}}return{resultPixels:i,resultMask:e,minValue:n}},g=function(A){return{fileIdentifierString:A.fileIdentifierString,fileVersion:A.fileVersion,imageType:A.imageType,height:A.height,width:A.width,maxZError:A.maxZError,eofOffset:A.eofOffset,mask:A.mask?{numBlocksX:A.mask.numBlocksX,numBlocksY:A.mask.numBlocksY,numBytes:A.mask.numBytes,maxValue:A.mask.maxValue}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,numBytes:A.pixels.numBytes,maxValue:A.pixels.maxValue,noDataValue:A.noDataValue}}},B=function(A){for(var I=A.pixels.numBlocksX*A.pixels.numBlocksY,g={},B=0;B<I;B++){var C=A.pixels.blocks[B];0===C.encoding?g.float32=!0:1===C.encoding?g[C.bitsPerPixel]=!0:g[0]=!0}return Object.keys(g)},C=function(A,I,g){var B={},C=new Uint8Array(A,I,10);if(B.fileIdentifierString=String.fromCharCode.apply(null,C),"CntZImage"!==B.fileIdentifierString.trim())throw"Unexpected file identifier string: "+B.fileIdentifierString;I+=10;var Q=new DataView(A,I,24);if(B.fileVersion=Q.getInt32(0,!0),B.imageType=Q.getInt32(4,!0),B.height=Q.getUint32(8,!0),B.width=Q.getUint32(12,!0),B.maxZError=Q.getFloat64(16,!0),I+=24,!g)if(Q=new DataView(A,I,16),B.mask={},B.mask.numBlocksY=Q.getUint32(0,!0),B.mask.numBlocksX=Q.getUint32(4,!0),B.mask.numBytes=Q.getUint32(8,!0),B.mask.maxValue=Q.getFloat32(12,!0),I+=16,B.mask.numBytes>0){var E=new Uint8Array(Math.ceil(B.width*B.height/8)),i=(Q=new DataView(A,I,B.mask.numBytes)).getInt16(0,!0),e=2,a=0;do{if(i>0)for(;i--;)E[a++]=Q.getUint8(e++);else{var t=Q.getUint8(e++);for(i=-i;i--;)E[a++]=t}i=Q.getInt16(e,!0),e+=2}while(e<B.mask.numBytes);if(-32768!==i||a<E.length)throw"Unexpected end of mask RLE encoding";B.mask.bitset=E,I+=B.mask.numBytes}else 0==(B.mask.numBytes|B.mask.numBlocksY|B.mask.maxValue)&&(B.mask.bitset=new Uint8Array(Math.ceil(B.width*B.height/8)));Q=new DataView(A,I,16),B.pixels={},B.pixels.numBlocksY=Q.getUint32(0,!0),B.pixels.numBlocksX=Q.getUint32(4,!0),B.pixels.numBytes=Q.getUint32(8,!0),B.pixels.maxValue=Q.getFloat32(12,!0),I+=16;var o=B.pixels.numBlocksX,s=B.pixels.numBlocksY,r=o+(B.width%o>0?1:0),D=s+(B.height%s>0?1:0);B.pixels.blocks=new Array(r*D);for(var n=0,h=0;h<D;h++)for(var w=0;w<r;w++){var y=0,G=A.byteLength-I;Q=new DataView(A,I,Math.min(10,G));var S={};B.pixels.blocks[n++]=S;var N=Q.getUint8(0);if(y++,S.encoding=63&N,S.encoding>3)throw"Invalid block encoding ("+S.encoding+")";if(2!==S.encoding){if(0!==N&&2!==N){if(N>>=6,S.offsetType=N,2===N)S.offset=Q.getInt8(1),y++;else if(1===N)S.offset=Q.getInt16(1,!0),y+=2;else{if(0!==N)throw"Invalid block offset type";S.offset=Q.getFloat32(1,!0),y+=4}if(1===S.encoding)if(N=Q.getUint8(y),y++,S.bitsPerPixel=63&N,N>>=6,S.numValidPixelsType=N,2===N)S.numValidPixels=Q.getUint8(y),y++;else if(1===N)S.numValidPixels=Q.getUint16(y,!0),y+=2;else{if(0!==N)throw"Invalid valid pixel count type";S.numValidPixels=Q.getUint32(y,!0),y+=4}}var c;if(I+=y,3!==S.encoding)if(0===S.encoding){var d=(B.pixels.numBytes-1)/4;if(d!==Math.floor(d))throw"uncompressed block has invalid length";c=new ArrayBuffer(4*d),new Uint8Array(c).set(new Uint8Array(A,I,4*d));var F=new Float32Array(c);S.rawData=F,I+=4*d}else if(1===S.encoding){var l=Math.ceil(S.numValidPixels*S.bitsPerPixel/8),k=Math.ceil(l/4);c=new ArrayBuffer(4*k),new Uint8Array(c).set(new Uint8Array(A,I,l)),S.stuffedData=new Uint32Array(c),I+=l}}else I++}return B.eofOffset=I,B},Q=function(A,I,g,B,C,Q,E){var i,e,a,t=(1<<I)-1,o=0,s=0,r=Math.ceil((E-B)/C),D=4*A.length-Math.ceil(I*g/8);for(A[A.length-1]<<=8*D,i=0;i<g;i++){if(0===s&&(a=A[o++],s=32),s>=I)e=a>>>s-I&t,s-=I;else{var n=I-s;e=(a&t)<<n&t,e+=(a=A[o++])>>>(s=32-n)}Q[i]=e<r?B+e*C:E}return Q},A),w=(E=function(A,I,g,B,C,Q,E,i){var e,a,t,o,s,r=(1<<g)-1,D=0,n=0,h=4*A.length-Math.ceil(g*B/8);if(A[A.length-1]<<=8*h,C)for(e=0;e<B;e++)0===n&&(t=A[D++],n=32),n>=g?(a=t>>>n-g&r,n-=g):(a=(t&r)<<(o=g-n)&r,a+=(t=A[D++])>>>(n=32-o)),I[e]=C[a];else for(s=Math.ceil((i-Q)/E),e=0;e<B;e++)0===n&&(t=A[D++],n=32),n>=g?(a=t>>>n-g&r,n-=g):(a=(t&r)<<(o=g-n)&r,a+=(t=A[D++])>>>(n=32-o)),I[e]=a<s?Q+a*E:i},i=function(A,I,g,B,C,Q){var E,i=(1<<I)-1,e=0,a=0,t=0,o=0,s=0,r=[],D=4*A.length-Math.ceil(I*g/8);A[A.length-1]<<=8*D;var n=Math.ceil((Q-B)/C);for(a=0;a<g;a++)0===o&&(E=A[e++],o=32),o>=I?(s=E>>>o-I&i,o-=I):(s=(E&i)<<(t=I-o)&i,s+=(E=A[e++])>>>(o=32-t)),r[a]=s<n?B+s*C:Q;return r.unshift(B),r},e=function(A,I,g,B,C,Q,E,i){var e,a,t,o,s=(1<<g)-1,r=0,D=0,n=0;if(C)for(e=0;e<B;e++)0===D&&(t=A[r++],D=32,n=0),D>=g?(a=t>>>n&s,D-=g,n+=g):(a=t>>>n&s,D=32-(o=g-D),a|=((t=A[r++])&(1<<o)-1)<<g-o,n=o),I[e]=C[a];else{var h=Math.ceil((i-Q)/E);for(e=0;e<B;e++)0===D&&(t=A[r++],D=32,n=0),D>=g?(a=t>>>n&s,D-=g,n+=g):(a=t>>>n&s,D=32-(o=g-D),a|=((t=A[r++])&(1<<o)-1)<<g-o,n=o),I[e]=a<h?Q+a*E:i}return I},a=function(A,I,g,B,C,Q){var E,i=(1<<I)-1,e=0,a=0,t=0,o=0,s=0,r=0,D=[],n=Math.ceil((Q-B)/C);for(a=0;a<g;a++)0===o&&(E=A[e++],o=32,r=0),o>=I?(s=E>>>r&i,o-=I,r+=I):(s=E>>>r&i,o=32-(t=I-o),s|=((E=A[e++])&(1<<t)-1)<<I-t,r=t),D[a]=s<n?B+s*C:Q;return D.unshift(B),D},t=function(A,I,g,B){var C,Q,E,i,e=(1<<g)-1,a=0,t=0,o=4*A.length-Math.ceil(g*B/8);for(A[A.length-1]<<=8*o,C=0;C<B;C++)0===t&&(E=A[a++],t=32),t>=g?(Q=E>>>t-g&e,t-=g):(Q=(E&e)<<(i=g-t)&e,Q+=(E=A[a++])>>>(t=32-i)),I[C]=Q;return I},o=function(A,I,g,B){var C,Q,E,i,e=(1<<g)-1,a=0,t=0,o=0;for(C=0;C<B;C++)0===t&&(E=A[a++],t=32,o=0),t>=g?(Q=E>>>o&e,t-=g,o+=g):(Q=E>>>o&e,t=32-(i=g-t),Q|=((E=A[a++])&(1<<i)-1)<<g-i,o=i),I[C]=Q;return I},s={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(A){for(var I=65535,g=65535,B=A.length,C=Math.floor(B/2),Q=0;C;){var E=C>=359?359:C;C-=E;do{I+=A[Q++]<<8,g+=I+=A[Q++]}while(--E);I=(65535&I)+(I>>>16),g=(65535&g)+(g>>>16)}return 1&B&&(g+=I+=A[Q]<<8),((g=(65535&g)+(g>>>16))<<16|(I=(65535&I)+(I>>>16)))>>>0},readHeaderInfo:function(A,I){var g=I.ptr,B=new Uint8Array(A,g,6),C={};if(C.fileIdentifierString=String.fromCharCode.apply(null,B),0!==C.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+C.fileIdentifierString;g+=6;var Q,E=new DataView(A,g,8),i=E.getInt32(0,!0);if(C.fileVersion=i,g+=4,i>=3&&(C.checksum=E.getUint32(4,!0),g+=4),E=new DataView(A,g,12),C.height=E.getUint32(0,!0),C.width=E.getUint32(4,!0),g+=8,i>=4?(C.numDims=E.getUint32(8,!0),g+=4):C.numDims=1,E=new DataView(A,g,40),C.numValidPixel=E.getUint32(0,!0),C.microBlockSize=E.getInt32(4,!0),C.blobSize=E.getInt32(8,!0),C.imageType=E.getInt32(12,!0),C.maxZError=E.getFloat64(16,!0),C.zMin=E.getFloat64(24,!0),C.zMax=E.getFloat64(32,!0),g+=40,I.headerInfo=C,I.ptr=g,i>=3&&(Q=i>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(A,g-Q,C.blobSize-14))!==C.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(A,I){var g=I.headerInfo,B=this.getDataTypeArray(g.imageType),C=g.numDims*this.getDataTypeSize(g.imageType),Q=this.readSubArray(A,I.ptr,B,C),E=this.readSubArray(A,I.ptr+C,B,C);I.ptr+=2*C;var i,e=!0;for(i=0;i<g.numDims;i++)if(Q[i]!==E[i]){e=!1;break}return g.minValues=Q,g.maxValues=E,e},readSubArray:function(A,I,g,B){var C;if(g===Uint8Array)C=new Uint8Array(A,I,B);else{var Q=new ArrayBuffer(B);new Uint8Array(Q).set(new Uint8Array(A,I,B)),C=new g(Q)}return C},readMask:function(A,I){var g,B,C=I.ptr,Q=I.headerInfo,E=Q.width*Q.height,i=Q.numValidPixel,e=new DataView(A,C,4),a={};if(a.numBytes=e.getUint32(0,!0),C+=4,(0===i||E===i)&&0!==a.numBytes)throw"invalid mask";if(0===i)g=new Uint8Array(Math.ceil(E/8)),a.bitset=g,B=new Uint8Array(E),I.pixels.resultMask=B,C+=a.numBytes;else if(a.numBytes>0){g=new Uint8Array(Math.ceil(E/8));var t=(e=new DataView(A,C,a.numBytes)).getInt16(0,!0),o=2,s=0,r=0;do{if(t>0)for(;t--;)g[s++]=e.getUint8(o++);else for(r=e.getUint8(o++),t=-t;t--;)g[s++]=r;t=e.getInt16(o,!0),o+=2}while(o<a.numBytes);if(-32768!==t||s<g.length)throw"Unexpected end of mask RLE encoding";B=new Uint8Array(E);var D=0,n=0;for(n=0;n<E;n++)7&n?(D=g[n>>3],D<<=7&n):D=g[n>>3],128&D&&(B[n]=1);I.pixels.resultMask=B,a.bitset=g,C+=a.numBytes}return I.ptr=C,I.mask=a,!0},readDataOneSweep:function(A,I,g,B){var C,Q=I.ptr,E=I.headerInfo,i=E.numDims,e=E.width*E.height,a=E.imageType,t=E.numValidPixel*s.getDataTypeSize(a)*i,o=I.pixels.resultMask;if(g===Uint8Array)C=new Uint8Array(A,Q,t);else{var r=new ArrayBuffer(t);new Uint8Array(r).set(new Uint8Array(A,Q,t)),C=new g(r)}if(C.length===e*i)I.pixels.resultPixels=B?s.swapDimensionOrder(C,e,i,g,!0):C;else{I.pixels.resultPixels=new g(e*i);var D=0,n=0,h=0,w=0;if(i>1){if(B){for(n=0;n<e;n++)if(o[n])for(w=n,h=0;h<i;h++,w+=e)I.pixels.resultPixels[w]=C[D++]}else for(n=0;n<e;n++)if(o[n])for(w=n*i,h=0;h<i;h++)I.pixels.resultPixels[w+h]=C[D++]}else for(n=0;n<e;n++)o[n]&&(I.pixels.resultPixels[n]=C[D++])}return Q+=t,I.ptr=Q,!0},readHuffmanTree:function(A,I){var g=this.HUFFMAN_LUT_BITS_MAX,B=new DataView(A,I.ptr,16);if(I.ptr+=16,B.getInt32(0,!0)<2)throw"unsupported Huffman version";var C=B.getInt32(4,!0),Q=B.getInt32(8,!0),E=B.getInt32(12,!0);if(Q>=E)return!1;var i=new Uint32Array(E-Q);s.decodeBits(A,I,i);var e,a,t,o,D=[];for(e=Q;e<E;e++)D[a=e-(e<C?0:C)]={first:i[e-Q],second:null};var n=A.byteLength-I.ptr,h=Math.ceil(n/4),w=new ArrayBuffer(4*h);new Uint8Array(w).set(new Uint8Array(A,I.ptr,n));var y,G=new Uint32Array(w),S=0,N=0;for(y=G[0],e=Q;e<E;e++)(o=D[a=e-(e<C?0:C)].first)>0&&(D[a].second=y<<S>>>32-o,32-S>=o?32===(S+=o)&&(S=0,y=G[++N]):(S+=o-32,y=G[++N],D[a].second|=y>>>32-S));var c=0,d=0,F=new r;for(e=0;e<D.length;e++)void 0!==D[e]&&(c=Math.max(c,D[e].first));d=c>=g?g:c;var l,k,R,L,U,f=[];for(e=Q;e<E;e++)if((o=D[a=e-(e<C?0:C)].first)>0)if(l=[o,a],o<=d)for(k=D[a].second<<d-o,R=1<<d-o,t=0;t<R;t++)f[k|t]=l;else for(k=D[a].second,U=F,L=o-1;L>=0;L--)k>>>L&1?(U.right||(U.right=new r),U=U.right):(U.left||(U.left=new r),U=U.left),0!==L||U.val||(U.val=l[1]);return{decodeLut:f,numBitsLUTQick:d,numBitsLUT:c,tree:F,stuffedData:G,srcPtr:N,bitPos:S}},readHuffman:function(A,I,g,B){var C,Q,E,i,e,a,t,o,r,D=I.headerInfo.numDims,n=I.headerInfo.height,h=I.headerInfo.width,w=h*n,y=this.readHuffmanTree(A,I),G=y.decodeLut,S=y.tree,N=y.stuffedData,c=y.srcPtr,d=y.bitPos,F=y.numBitsLUTQick,l=y.numBitsLUT,k=0===I.headerInfo.imageType?128:0,R=I.pixels.resultMask,L=0;d>0&&(c++,d=0);var U,f=N[c],Y=1===I.encodeMode,K=new g(w*D),u=K;if(D<2||Y){for(U=0;U<D;U++)if(D>1&&(u=new g(K.buffer,w*U,w),L=0),I.headerInfo.numValidPixel===h*n)for(o=0,a=0;a<n;a++)for(t=0;t<h;t++,o++){if(Q=0,e=i=f<<d>>>32-F,32-d<F&&(e=i|=N[c+1]>>>64-d-F),G[e])Q=G[e][1],d+=G[e][0];else for(e=i=f<<d>>>32-l,32-d<l&&(e=i|=N[c+1]>>>64-d-l),C=S,r=0;r<l;r++)if(!(C=i>>>l-r-1&1?C.right:C.left).left&&!C.right){Q=C.val,d=d+r+1;break}d>=32&&(d-=32,f=N[++c]),E=Q-k,Y?(E+=t>0?L:a>0?u[o-h]:L,E&=255,u[o]=E,L=E):u[o]=E}else for(o=0,a=0;a<n;a++)for(t=0;t<h;t++,o++)if(R[o]){if(Q=0,e=i=f<<d>>>32-F,32-d<F&&(e=i|=N[c+1]>>>64-d-F),G[e])Q=G[e][1],d+=G[e][0];else for(e=i=f<<d>>>32-l,32-d<l&&(e=i|=N[c+1]>>>64-d-l),C=S,r=0;r<l;r++)if(!(C=i>>>l-r-1&1?C.right:C.left).left&&!C.right){Q=C.val,d=d+r+1;break}d>=32&&(d-=32,f=N[++c]),E=Q-k,Y?(t>0&&R[o-1]?E+=L:a>0&&R[o-h]?E+=u[o-h]:E+=L,E&=255,u[o]=E,L=E):u[o]=E}}else for(o=0,a=0;a<n;a++)for(t=0;t<h;t++)if(o=a*h+t,!R||R[o])for(U=0;U<D;U++,o+=w){if(Q=0,e=i=f<<d>>>32-F,32-d<F&&(e=i|=N[c+1]>>>64-d-F),G[e])Q=G[e][1],d+=G[e][0];else for(e=i=f<<d>>>32-l,32-d<l&&(e=i|=N[c+1]>>>64-d-l),C=S,r=0;r<l;r++)if(!(C=i>>>l-r-1&1?C.right:C.left).left&&!C.right){Q=C.val,d=d+r+1;break}d>=32&&(d-=32,f=N[++c]),E=Q-k,u[o]=E}I.ptr=I.ptr+4*(c+1)+(d>0?4:0),I.pixels.resultPixels=K,D>1&&!B&&(I.pixels.resultPixels=s.swapDimensionOrder(K,w,D,g))},decodeBits:function(A,I,g,B,C){var Q=I.headerInfo,s=Q.fileVersion,r=0,D=A.byteLength-I.ptr>=5?5:A.byteLength-I.ptr,n=new DataView(A,I.ptr,D),h=n.getUint8(0);r++;var w=h>>6,y=0===w?4:3-w,G=(32&h)>0,S=31&h,N=0;if(1===y)N=n.getUint8(r),r++;else if(2===y)N=n.getUint16(r,!0),r+=2;else{if(4!==y)throw"Invalid valid pixel count type";N=n.getUint32(r,!0),r+=4}var c,d,F,l,k,R,L,U,f,Y=2*Q.maxZError,K=Q.numDims>1?Q.maxValues[C]:Q.zMax;if(G){for(I.counter.lut++,U=n.getUint8(r),r++,l=Math.ceil((U-1)*S/8),k=Math.ceil(l/4),d=new ArrayBuffer(4*k),F=new Uint8Array(d),I.ptr+=r,F.set(new Uint8Array(A,I.ptr,l)),L=new Uint32Array(d),I.ptr+=l,f=0;U-1>>>f;)f++;l=Math.ceil(N*f/8),k=Math.ceil(l/4),d=new ArrayBuffer(4*k),(F=new Uint8Array(d)).set(new Uint8Array(A,I.ptr,l)),c=new Uint32Array(d),I.ptr+=l,R=s>=3?a(L,S,U-1,B,Y,K):i(L,S,U-1,B,Y,K),s>=3?e(c,g,f,N,R):E(c,g,f,N,R)}else I.counter.bitstuffer++,f=S,I.ptr+=r,f>0&&(l=Math.ceil(N*f/8),k=Math.ceil(l/4),d=new ArrayBuffer(4*k),(F=new Uint8Array(d)).set(new Uint8Array(A,I.ptr,l)),c=new Uint32Array(d),I.ptr+=l,s>=3?null==B?o(c,g,f,N):e(c,g,f,N,!1,B,Y,K):null==B?t(c,g,f,N):E(c,g,f,N,!1,B,Y,K))},readTiles:function(A,I,g,B){var C=I.headerInfo,Q=C.width,E=C.height,i=Q*E,e=C.microBlockSize,a=C.imageType,t=s.getDataTypeSize(a),o=Math.ceil(Q/e),r=Math.ceil(E/e);I.pixels.numBlocksY=r,I.pixels.numBlocksX=o,I.pixels.ptr=0;var D,n,h,w,y,G,S,N,c,d,F=0,l=0,k=0,R=0,L=0,U=0,f=0,Y=0,K=0,u=0,M=0,J=0,H=0,m=0,p=0,q=new g(e*e),b=E%e||e,x=Q%e||e,O=C.numDims,T=I.pixels.resultMask,_=I.pixels.resultPixels,Z=C.fileVersion>=5?14:15,P=C.zMax;for(k=0;k<r;k++)for(L=k!==r-1?e:b,R=0;R<o;R++)for(u=k*Q*e+R*e,M=Q-(U=R!==o-1?e:x),N=0;N<O;N++){if(O>1?(d=_,u=k*Q*e+R*e,_=new g(I.pixels.resultPixels.buffer,i*N*t,i),P=C.maxValues[N]):d=null,f=A.byteLength-I.ptr,n={},p=0,Y=(D=new DataView(A,I.ptr,Math.min(10,f))).getUint8(0),p++,c=C.fileVersion>=5?4&Y:0,K=Y>>6&255,(Y>>2&Z)!=(R*e>>3&Z))throw"integrity issue";if(c&&0===N)throw"integrity issue";if((y=3&Y)>3)throw I.ptr+=p,"Invalid block encoding ("+y+")";if(2!==y)if(0===y){if(c)throw"integrity issue";if(I.counter.uncompressed++,I.ptr+=p,J=(J=L*U*t)<(H=A.byteLength-I.ptr)?J:H,h=new ArrayBuffer(J%t==0?J:J+t-J%t),new Uint8Array(h).set(new Uint8Array(A,I.ptr,J)),w=new g(h),m=0,T)for(F=0;F<L;F++){for(l=0;l<U;l++)T[u]&&(_[u]=w[m++]),u++;u+=M}else for(F=0;F<L;F++){for(l=0;l<U;l++)_[u++]=w[m++];u+=M}I.ptr+=m*t}else if(G=s.getDataTypeUsed(c&&a<6?4:a,K),S=s.getOnePixel(n,p,G,D),p+=s.getDataTypeSize(G),3===y)if(I.ptr+=p,I.counter.constantoffset++,T)for(F=0;F<L;F++){for(l=0;l<U;l++)T[u]&&(_[u]=c?Math.min(P,d[u]+S):S),u++;u+=M}else for(F=0;F<L;F++){for(l=0;l<U;l++)_[u]=c?Math.min(P,d[u]+S):S,u++;u+=M}else if(I.ptr+=p,s.decodeBits(A,I,q,S,N),p=0,c)if(T)for(F=0;F<L;F++){for(l=0;l<U;l++)T[u]&&(_[u]=q[p++]+d[u]),u++;u+=M}else for(F=0;F<L;F++){for(l=0;l<U;l++)_[u]=q[p++]+d[u],u++;u+=M}else if(T)for(F=0;F<L;F++){for(l=0;l<U;l++)T[u]&&(_[u]=q[p++]),u++;u+=M}else for(F=0;F<L;F++){for(l=0;l<U;l++)_[u++]=q[p++];u+=M}else{if(c)if(T)for(F=0;F<L;F++)for(l=0;l<U;l++)T[u]&&(_[u]=d[u]),u++;else for(F=0;F<L;F++)for(l=0;l<U;l++)_[u]=d[u],u++;I.counter.constant++,I.ptr+=p}}O>1&&!B&&(I.pixels.resultPixels=s.swapDimensionOrder(I.pixels.resultPixels,i,O,g))},formatFileInfo:function(A){return{fileIdentifierString:A.headerInfo.fileIdentifierString,fileVersion:A.headerInfo.fileVersion,imageType:A.headerInfo.imageType,height:A.headerInfo.height,width:A.headerInfo.width,numValidPixel:A.headerInfo.numValidPixel,microBlockSize:A.headerInfo.microBlockSize,blobSize:A.headerInfo.blobSize,maxZError:A.headerInfo.maxZError,pixelType:s.getPixelType(A.headerInfo.imageType),eofOffset:A.eofOffset,mask:A.mask?{numBytes:A.mask.numBytes}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,maxValue:A.headerInfo.zMax,minValue:A.headerInfo.zMin,noDataValue:A.noDataValue}}},constructConstantSurface:function(A,I){var g=A.headerInfo.zMax,B=A.headerInfo.zMin,C=A.headerInfo.maxValues,Q=A.headerInfo.numDims,E=A.headerInfo.height*A.headerInfo.width,i=0,e=0,a=0,t=A.pixels.resultMask,o=A.pixels.resultPixels;if(t)if(Q>1){if(I)for(i=0;i<Q;i++)for(a=i*E,g=C[i],e=0;e<E;e++)t[e]&&(o[a+e]=g);else for(e=0;e<E;e++)if(t[e])for(a=e*Q,i=0;i<Q;i++)o[a+Q]=C[i]}else for(e=0;e<E;e++)t[e]&&(o[e]=g);else if(Q>1&&B!==g)if(I)for(i=0;i<Q;i++)for(a=i*E,g=C[i],e=0;e<E;e++)o[a+e]=g;else for(e=0;e<E;e++)for(a=e*Q,i=0;i<Q;i++)o[a+i]=C[i];else for(e=0;e<E*Q;e++)o[e]=g},getDataTypeArray:function(A){var I;switch(A){case 0:I=Int8Array;break;case 1:I=Uint8Array;break;case 2:I=Int16Array;break;case 3:I=Uint16Array;break;case 4:I=Int32Array;break;case 5:I=Uint32Array;break;case 6:default:I=Float32Array;break;case 7:I=Float64Array}return I},getPixelType:function(A){var I;switch(A){case 0:I="S8";break;case 1:I="U8";break;case 2:I="S16";break;case 3:I="U16";break;case 4:I="S32";break;case 5:I="U32";break;case 6:default:I="F32";break;case 7:I="F64"}return I},isValidPixelValue:function(A,I){if(null==I)return!1;var g;switch(A){case 0:g=I>=-128&&I<=127;break;case 1:g=I>=0&&I<=255;break;case 2:g=I>=-32768&&I<=32767;break;case 3:g=I>=0&&I<=65536;break;case 4:g=I>=-2147483648&&I<=2147483647;break;case 5:g=I>=0&&I<=4294967296;break;case 6:g=I>=-34027999387901484e22&&I<=34027999387901484e22;break;case 7:g=I>=-17976931348623157e292&&I<=17976931348623157e292;break;default:g=!1}return g},getDataTypeSize:function(A){var I=0;switch(A){case 0:case 1:I=1;break;case 2:case 3:I=2;break;case 4:case 5:case 6:I=4;break;case 7:I=8;break;default:I=A}return I},getDataTypeUsed:function(A,I){var g=A;switch(A){case 2:case 4:g=A-I;break;case 3:case 5:g=A-2*I;break;case 6:g=0===I?A:1===I?2:1;break;case 7:g=0===I?A:A-2*I+1;break;default:g=A}return g},getOnePixel:function(A,I,g,B){var C=0;switch(g){case 0:C=B.getInt8(I);break;case 1:C=B.getUint8(I);break;case 2:C=B.getInt16(I,!0);break;case 3:C=B.getUint16(I,!0);break;case 4:C=B.getInt32(I,!0);break;case 5:C=B.getUInt32(I,!0);break;case 6:C=B.getFloat32(I,!0);break;case 7:C=B.getFloat64(I,!0);break;default:throw"the decoder does not understand this pixel type"}return C},swapDimensionOrder:function(A,I,g,B,C){var Q=0,E=0,i=0,e=0,a=A;if(g>1)if(a=new B(I*g),C)for(Q=0;Q<I;Q++)for(e=Q,i=0;i<g;i++,e+=I)a[e]=A[E++];else for(Q=0;Q<I;Q++)for(e=Q,i=0;i<g;i++,e+=I)a[E++]=A[e];return a}},r=function(A,I,g){this.val=A,this.left=I,this.right=g},{decode:function(A,I){var g=(I=I||{}).noDataValue,B=0,C={};C.ptr=I.inputOffset||0,C.pixels={},s.readHeaderInfo(A,C);var Q=C.headerInfo,E=Q.fileVersion,i=s.getDataTypeArray(Q.imageType);if(E>5)throw"unsupported lerc version 2."+E;s.readMask(A,C),Q.numValidPixel===Q.width*Q.height||C.pixels.resultMask||(C.pixels.resultMask=I.maskData);var e=Q.width*Q.height;C.pixels.resultPixels=new i(e*Q.numDims),C.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var a,t=!I.returnPixelInterleavedDims;if(0!==Q.numValidPixel)if(Q.zMax===Q.zMin)s.constructConstantSurface(C,t);else if(E>=4&&s.checkMinMaxRanges(A,C))s.constructConstantSurface(C,t);else{var o=new DataView(A,C.ptr,2),r=o.getUint8(0);if(C.ptr++,r)s.readDataOneSweep(A,C,i,t);else if(E>1&&Q.imageType<=1&&Math.abs(Q.maxZError-.5)<1e-5){var D=o.getUint8(1);if(C.ptr++,C.encodeMode=D,D>2||E<4&&D>1)throw"Invalid Huffman flag "+D;D?s.readHuffman(A,C,i,t):s.readTiles(A,C,i,t)}else s.readTiles(A,C,i,t)}C.eofOffset=C.ptr,I.inputOffset?(a=C.headerInfo.blobSize+I.inputOffset-C.ptr,Math.abs(a)>=1&&(C.eofOffset=I.inputOffset+C.headerInfo.blobSize)):(a=C.headerInfo.blobSize-C.ptr,Math.abs(a)>=1&&(C.eofOffset=C.headerInfo.blobSize));var n={width:Q.width,height:Q.height,pixelData:C.pixels.resultPixels,minValue:Q.zMin,maxValue:Q.zMax,validPixelCount:Q.numValidPixel,dimCount:Q.numDims,dimStats:{minValues:Q.minValues,maxValues:Q.maxValues},maskData:C.pixels.resultMask};if(C.pixels.resultMask&&s.isValidPixelValue(Q.imageType,g)){var h=C.pixels.resultMask;for(B=0;B<e;B++)h[B]||(n.pixelData[B]=g);n.noDataValue=g}return C.noDataValue=g,I.returnFileInfo&&(n.fileInfo=s.formatFileInfo(C)),n},getBandCount:function(A){for(var I=0,g=0,B={ptr:0,pixels:{}};g<A.byteLength-58;)s.readHeaderInfo(A,B),g+=B.headerInfo.blobSize,I++,B.ptr=g;return I}}),y=(D=new ArrayBuffer(4),n=new Uint8Array(D),new Uint32Array(D)[0]=1,1===n[0]),G={decode:function(A,I){if(!y)throw"Big endian system is not supported.";var g,B,C=(I=I||{}).inputOffset||0,Q=new Uint8Array(A,C,10),E=String.fromCharCode.apply(null,Q);if("CntZImage"===E.trim())g=h,B=1;else{if("Lerc2"!==E.substring(0,5))throw"Unexpected file identifier string: "+E;g=w,B=2}for(var i,e,a,t,o,s,r=0,D=A.byteLength-10,n=[],G={width:0,height:0,pixels:[],pixelType:I.pixelType,mask:null,statistics:[]},S=0;C<D;){var N=g.decode(A,{inputOffset:C,encodedMaskData:i,maskData:a,returnMask:0===r,returnEncodedMask:0===r,returnFileInfo:!0,returnPixelInterleavedDims:I.returnPixelInterleavedDims,pixelType:I.pixelType||null,noDataValue:I.noDataValue||null});C=N.fileInfo.eofOffset,a=N.maskData,0===r&&(i=N.encodedMaskData,G.width=N.width,G.height=N.height,G.dimCount=N.dimCount||1,G.pixelType=N.pixelType||N.fileInfo.pixelType,G.mask=a),B>1&&(a&&n.push(a),N.fileInfo.mask&&N.fileInfo.mask.numBytes>0&&S++),r++,G.pixels.push(N.pixelData),G.statistics.push({minValue:N.minValue,maxValue:N.maxValue,noDataValue:N.noDataValue,dimStats:N.dimStats})}if(B>1&&S>1){for(s=G.width*G.height,G.bandMasks=n,(a=new Uint8Array(s)).set(n[0]),t=1;t<n.length;t++)for(e=n[t],o=0;o<s;o++)a[o]=a[o]&e[o];G.maskData=a}return G}};Eg.exports?Eg.exports=G:this.Lerc=G}();var ag=eg.exports;let tg,og,sg;const rg={env:{emscripten_notify_memory_growth:A=>{sg=new Uint8Array(og.exports.memory.buffer)}}};const Dg="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AikACDcACCAHIDo3AAAgEUEZSA0BIARBGGohBANAIAIpABAhOiAEIAIpABg3AAggBCA6NwAAIAIpACAhOiAEIAIpACg3ABggBCA6NwAQIAJBIGohAiAEQSBqIgQgCkkNAAsMAQsCQAJAIAUoAswCIhEgBUHgAWogJUEHcUEMbGoiDygCACICaiIHIBxLDQAgCSAPKAIEIgogAmoiBmogG0sNACAGQSBqIBQgCWtNDQELIAUgDygCCDYCoAEgBSAPKQIANwOYASAJIBQgBUGYAWogBUHMAmogHCALIBcgIhAgIQYMAQsgAiAJaiEEIA8oAgghFSARKQAAITogCSARKQAINwAIIAkgOjcAAAJAIAJBEUkNACARKQAQITogCSARKQAYNwAYIAkgOjcAECACQRBrQRFIDQAgEUEQaiECIAlBIGohEgNAIAIpABAhOiASIAIpABg3AAggEiA6NwAAIAIpACAhOiASIAIpACg3ABggEiA6NwAQIAJBIGohAiASQSBqIhIgBEkNAAsLIAQgFWshAiAFIAc2AswCIAQgC2sgFUkEQCAVIAQgF2tLDQwgIiAiIAIgC2siD2oiByAKak8EQCAKRQ0CIAQgByAK/AoAAAwCC0EAIA9rIgIEQCAEIAcgAvwKAAALIAogD2ohCiAEIA9rIQQgCyECCyAVQRBPBEAgAikAACE6IAQgAikACDcACCAEIDo3AAAgCkERSA0BIAQgCmohByAEQRBqIQQDQCACKQAQITogBCACKQAYNwAIIAQgOjcAACACKQAgITogBCACKQAoNwAYIAQgOjcAECACQSBqIQIgBEEgaiIEIAdJDQALDAELAkAgFUEHTQRAIAQgAi0AADoAACAEIAItAAE6AAEgBCACLQACOgACIAQgAi0AAzoAAyAEIAIgFUECdCIHQeAaaigCAGoiAigAADYABCACIAdBgBtqKAIAayECDAELIAQgAikAADcAAAsgCkEJSQ0AIAQgCmohDyAEQQhqIgcgAkEIaiICa0EPTARAA0AgByACKQAANwAAIAJBCGohAiAHQQhqIgcgD0kNAAwCCwALIAIpAAAhOiAHIAIpAAg3AAggByA6NwAAIApBGUgNACAEQRhqIQQDQCACKQAQITogBCACKQAYNwAIIAQgOjcAACACKQAgITogBCACKQAoNwAYIAQgOjcAECACQSBqIQIgBEEgaiIEIA9JDQALCyAGQYh/SwRAIAYhAwwLCyAFQeABaiAlQQdxQQxsaiICIA02AgggAiAMNgIEIAIgEDYCAAsgBiAJaiEJICVBAWohJSAQIC1qIAxqIS0MAQsLIAUoArABIAUoArQBRw0HIAUoAqwBQSBHDQcgDiAoayEQA0ACQCAOIBBMBEBBACECA0AgAkEDRg0CIDIgAkECdCIDaiADICZqKAIANgIAIAJBAWohAgwACwALIAVB4AFqIBBBB3FBDGxqIQoCfwJAIAgoAoTsAUECRgRAIAUoAswCIg8gCigCACIEaiIHIAgoAoDsASICSwRAIAIgD0cEQCACIA9rIgIgFCAJa0sNCyAJIA8gAhAfIAogBCACayIENgIAIAIgCWohCQsgBSAWNgLMAiAIQQA2AoTsAQJAAkACQCAEQYCABEoNACAJIAooAgQiDSAEaiIGaiAbSw0AIAZBIGogFCAJa00NAQsgBSAKKAIINgJQIAUgCikCADcDSCAJIBQgBUHIAGogBUHMAmogGSALIBcgIhAgIQYMAQsgBCAWaiEHIAQgCWohDCAKKAIIIQogFikAACE6IAkgFikACDcACCAJIDo3AAACQCAEQRFJDQAgHikAACE6IAkgHikACDcAGCAJIDo3ABAgBEEQa0ERSA0AIAlBIGohAiAeIQQDQCAEKQAQITogAiAEKQAYNwAIIAIgOjcAACAEKQAgITogAiAEKQAoNwAYIAIgOjcAECAEQSBqIQQgAkEgaiICIAxJDQALCyAMIAprIQIgBSAHNgLMAiAMIAtrIApJBEAgCiAMIBdrSw0PICIgIiACIAtrIgdqIgQgDWpPBEAgDUUNAiAMIAQgDfwKAAAMAgtBACAHayICBEAgDCAEIAL8CgAACyAHIA1qIQ0gDCAHayEMIAshAgsgCkEQTwRAIAIpAAAhOiAMIAIpAAg3AAggDCA6NwAAIA1BEUgNASAMIA1qIQcgDEEQaiEEA0AgAikAECE6IAQgAikAGDcACCAEIDo3AAAgAikAICE6IAQgAikAKDcAGCAEIDo3ABAgAkEgaiECIARBIGoiBCAHSQ0ACwwBCwJAIApBB00EQCAMIAItAAA6AAAgDCACLQABOgABIAwgAi0AAjoAAiAMIAItAAM6AAMgDCACIApBAnQiBEHgGmooAgBqIgIoAAA2AAQgAiAEQYAbaigCAGshAgwBCyAMIAIpAAA3AAALIA1BCUkNACAMIA1qIQcgDEEIaiIEIAJBCGoiAmtBD0wEQANAIAQgAikAADcAACACQQhqIQIgBEEIaiIEIAdJDQAMAgsACyACKQAAITogBCACKQAINwAIIAQgOjcAACANQRlIDQAgDEEYaiEEA0AgAikAECE6IAQgAikAGDcACCAEIDo3AAAgAikAICE6IAQgAikAKDcAGCAEIDo3ABAgAkEgaiECIARBIGoiBCAHSQ0ACwsgBkGJf08EQCAGIQMMDgsgGSEcIAYgCWoMAwsgB0EgayECAkACQCAHIBxLDQAgCSAKKAIEIhIgBGoiDGogAksNACAMQSBqIBQgCWtNDQELIAUgCigCCDYCYCAFIAopAgA3A1ggCSAUIAIgBUHYAGogBUHMAmogHCALIBcgIhAhIQwMAgsgBCAJaiEGIAooAgghCiAPKQAAITogCSAPKQAINwAIIAkgOjcAAAJAIARBEUkNACAPKQAQITogCSAPKQAYNwAYIAkgOjcAECAEQRBrQRFIDQAgD0EQaiECIAlBIGohBANAIAIpABAhOiAEIAIpABg3AAggBCA6NwAAIAIpACAhOiAEIAIpACg3ABggBCA6NwAQIAJBIGohAiAEQSBqIgQgBkkNAAsLIAYgCmshAiAFIAc2AswCIAYgC2sgCkkEQCAKIAYgF2tLDQ0gIiAiIAIgC2siB2oiBCASak8EQCASRQ0DIAYgBCAS/AoAAAwDC0EAIAdrIgIEQCAGIAQgAvwKAAALIAcgEmohEiAGIAdrIQYgCyECCyAKQRBPBEAgAikAACE6IAYgAikACDcACCAGIDo3AAAgEkERSA0CIAYgEmohByAGQRBqIQQDQCACKQAQITogBCACKQAYNwAIIAQgOjcAACACKQAgITogBCACKQAoNwAYIAQgOjcAECACQSBqIQIgBEEgaiIEIAdJDQALDAILAkAgCkEHTQRAIAYgAi0AADoAACAGIAItAAE6AAEgBiACLQACOgACIAYgAi0AAzoAAyAGIAIgCkECdCIEQeAaaigCAGoiAigAADYABCACIARBgBtqKAIAayECDAELIAYgAikAADcAAAsgEkEJSQ0BIAYgEmohByAGQQhqIgQgAkEIaiICa0EPTARAA0AgBCACKQAANwAAIAJBCGohAiAE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",ng=Object.freeze({BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,SBYTE:6,UNDEFINED:7,SSHORT:8,SLONG:9,SRATIONAL:10,FLOAT:11,DOUBLE:12,IFD:13,LONG8:16,SLONG8:17,IFD8:18});Object.freeze({[ng.BYTE]:1,[ng.ASCII]:1,[ng.SBYTE]:1,[ng.UNDEFINED]:1,[ng.SHORT]:2,[ng.SSHORT]:2,[ng.LONG]:4,[ng.SLONG]:4,[ng.FLOAT]:4,[ng.IFD]:4,[ng.RATIONAL]:8,[ng.SRATIONAL]:8,[ng.DOUBLE]:8,[ng.LONG8]:8,[ng.SLONG8]:8,[ng.IFD8]:8});const hg=[{tag:254,name:"NewSubfileType",fieldTypes:ng.LONG},{tag:255,name:"SubfileType",type:ng.SHORT},{tag:256,name:"ImageWidth",type:ng.SHORT},{tag:257,name:"ImageLength",type:ng.SHORT},{tag:258,name:"BitsPerSample",type:ng.SHORT,isArray:!0,eager:!0},{tag:259,name:"Compression",type:ng.SHORT},{tag:262,name:"PhotometricInterpretation",type:ng.SHORT},{tag:263,name:"Threshholding",type:ng.SHORT},{tag:264,name:"CellWidth",type:ng.SHORT},{tag:265,name:"CellLength",type:ng.SHORT},{tag:266,name:"FillOrder",type:ng.SHORT},{tag:269,name:"DocumentName",type:ng.ASCII},{tag:270,name:"ImageDescription",type:ng.ASCII},{tag:271,name:"Make",type:ng.ASCII},{tag:272,name:"Model",type:ng.ASCII},{tag:273,name:"StripOffsets",type:ng.SHORT,isArray:!0},{tag:274,name:"Orientation",type:ng.SHORT},{tag:277,name:"SamplesPerPixel",type:ng.SHORT},{tag:278,name:"RowsPerStrip",type:ng.SHORT},{tag:279,name:"StripByteCounts",type:ng.LONG,isArray:!0},{tag:280,name:"MinSampleValue",type:ng.SHORT,isArray:!0},{tag:281,name:"MaxSampleValue",type:ng.SHORT,isArray:!0},{tag:282,name:"XResolution",type:ng.RATIONAL},{tag:283,name:"YResolution",type:ng.RATIONAL},{tag:284,name:"PlanarConfiguration",fieldTypes:ng.SHORT},{tag:285,name:"PageName",type:ng.ASCII},{tag:286,name:"XPosition",type:ng.RATIONAL},{tag:287,name:"YPosition",type:ng.RATIONAL},{tag:288,name:"FreeOffsets",type:ng.LONG},{tag:289,name:"FreeByteCounts",type:ng.LONG},{tag:290,name:"GrayResponseUnit",type:ng.SHORT},{tag:291,name:"GrayResponseCurve",type:ng.SHORT,isArray:!0},{tag:292,name:"T4Options",type:ng.LONG},{tag:293,name:"T6Options",type:ng.LONG},{tag:296,name:"ResolutionUnit",type:ng.SHORT},{tag:297,name:"PageNumber",type:ng.SHORT,isArray:!0},{tag:301,name:"TransferFunction",type:ng.SHORT,isArray:!0},{tag:305,name:"Software",type:ng.ASCII},{tag:306,name:"DateTime",type:ng.ASCII},{tag:315,name:"Artist",type:ng.ASCII},{tag:316,name:"HostComputer",type:ng.ASCII},{tag:317,name:"Predictor",type:ng.SHORT},{tag:318,name:"WhitePoint",type:ng.RATIONAL,isArray:!0},{tag:319,name:"PrimaryChromaticities",type:ng.RATIONAL,isArray:!0},{tag:320,name:"ColorMap",type:ng.SHORT,isArray:!0},{tag:321,name:"HalftoneHints",type:ng.SHORT,isArray:!0},{tag:322,name:"TileWidth",type:ng.SHORT},{tag:323,name:"TileLength",type:ng.SHORT},{tag:324,name:"TileOffsets",type:ng.LONG,isArray:!0},{tag:325,name:"TileByteCounts",type:ng.SHORT,isArray:!0},{tag:332,name:"InkSet",type:ng.SHORT},{tag:333,name:"InkNames",type:ng.ASCII},{tag:334,name:"NumberOfInks",type:ng.SHORT},{tag:336,name:"DotRange",type:ng.BYTE,isArray:!0},{tag:337,name:"TargetPrinter",type:ng.ASCII},{tag:338,name:"ExtraSamples",type:ng.BYTE,isArray:!0},{tag:339,name:"SampleFormat",type:ng.SHORT,isArray:!0,eager:!0},{tag:340,name:"SMinSampleValue",isArray:!0},{tag:341,name:"SMaxSampleValue",isArray:!0},{tag:342,name:"TransferRange",type:ng.SHORT,isArray:!0},{tag:512,name:"JPEGProc",type:ng.SHORT},{tag:513,name:"JPEGInterchangeFormat",type:ng.LONG},{tag:514,name:"JPEGInterchangeFormatLngth",type:ng.LONG},{tag:515,name:"JPEGRestartInterval",type:ng.SHORT},{tag:517,name:"JPEGLosslessPredictors",type:ng.SHORT,isArray:!0},{tag:518,name:"JPEGPointTransforms",type:ng.SHORT,isArray:!0},{tag:519,name:"JPEGQTables",type:ng.LONG,isArray:!0},{tag:520,name:"JPEGDCTables",type:ng.LONG,isArray:!0},{tag:521,name:"JPEGACTables",type:ng.LONG,isArray:!0},{tag:529,name:"YCbCrCoefficients",type:ng.RATIONAL,isArray:!0},{tag:530,name:"YCbCrSubSampling",type:ng.SHORT,isArray:!0},{tag:531,name:"YCbCrPositioning",type:ng.SHORT},{tag:532,name:"ReferenceBlackWhite",type:ng.LONG,isArray:!0},{tag:33432,name:"Copyright",type:ng.ASCII},{tag:326,name:"BadFaxLines"},{tag:327,name:"CleanFaxData"},{tag:343,name:"ClipPath"},{tag:328,name:"ConsecutiveBadFaxLines"},{tag:433,name:"Decode"},{tag:434,name:"DefaultImageColor"},{tag:346,name:"Indexed"},{tag:347,name:"JPEGTables",isArray:!0,eager:!0},{tag:559,name:"StripRowCounts",isArray:!0},{tag:330,name:"SubIFDs",isArray:!0},{tag:344,name:"XClipPathUnits"},{tag:345,name:"YClipPathUnits"},{tag:37378,name:"ApertureValue"},{tag:40961,name:"ColorSpace"},{tag:36868,name:"DateTimeDigitized"},{tag:36867,name:"DateTimeOriginal"},{tag:34665,name:"Exif IFD",type:ng.LONG},{tag:36864,name:"ExifVersion"},{tag:33434,name:"ExposureTime"},{tag:41728,name:"FileSource"},{tag:37385,name:"Flash"},{tag:40960,name:"FlashpixVersion"},{tag:33437,name:"FNumber"},{tag:42016,name:"ImageUniqueID"},{tag:37384,name:"LightSource"},{tag:37500,name:"MakerNote"},{tag:37377,name:"ShutterSpeedValue"},{tag:37510,name:"UserComment"},{tag:33723,name:"IPTC"},{tag:34412,name:"CZ_LSMINFO"},{tag:34675,name:"ICC Profile"},{tag:700,name:"XMP"},{tag:42112,name:"GDAL_METADATA"},{tag:42113,name:"GDAL_NODATA",type:ng.ASCII},{tag:34377,name:"Photoshop"},{tag:33550,name:"ModelPixelScale",type:ng.DOUBLE,isArray:!0,eager:!0},{tag:33922,name:"ModelTiepoint",type:ng.DOUBLE,isArray:!0,eager:!0},{tag:34264,name:"ModelTransformation",type:ng.DOUBLE,isArray:!0,eager:!0},{tag:34735,name:"GeoKeyDirectory",type:ng.SHORT,isArray:!0,eager:!0},{tag:34736,name:"GeoDoubleParams",type:ng.DOUBLE,isArray:!0,eager:!0},{tag:34737,name:"GeoAsciiParams",type:ng.ASCII,eager:!0},{tag:50674,name:"LercParameters",eager:!0}],wg={},yg={};function Gg(A,I,g,B=!1,C=!1){wg[I]=A,yg[A]={tag:A,name:I,type:"string"==typeof g?ng[g]:g,isArray:B,eager:C}}for(const A of hg)Gg(A.tag,A.name,A.type,A.isArray,A.eager);const Sg=1,Ng=0,cg=1,dg=2,Fg=Object.freeze({1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"}),lg={};for(const A in Fg)Fg.hasOwnProperty(A)&&(lg[Fg[A]]=parseInt(A,10));const kg=new class{init(){return tg||(tg="undefined"!=typeof fetch?fetch(`data:application/wasm;base64,${Dg}`).then((A=>A.arrayBuffer())).then((A=>WebAssembly.instantiate(A,rg))).then(this._init):WebAssembly.instantiate(Buffer.from(Dg,"base64"),rg).then(this._init),tg)}_init(A){og=A.instance,rg.env.emscripten_notify_memory_growth(0)}decode(A,I=0){if(!og)throw new Error("ZSTDDecoder: Await .init() before decoding.");const g=A.byteLength,B=og.exports.malloc(g);sg.set(A,B),I=I||Number(og.exports.ZSTD_findDecompressedSize(B,g));const C=og.exports.malloc(I),Q=og.exports.ZSTD_decompress(C,I,B,g),E=sg.slice(C,C+Q);return og.exports.free(B),og.exports.free(C),E}};var Rg=Object.freeze({__proto__:null,zstd:kg,default:class extends i{decodeBlock(A){const I=this.parameters.LercParameters[Sg];switch(I){case Ng:break;case cg:A=Cg(new Uint8Array(A)).buffer;break;case dg:A=kg.decode(new Uint8Array(A)).buffer;break;default:throw new Error(`Unsupported LERC additional compression method identifier: ${I}`)}return ag.decode(A,{returnPixelInterleavedDims:1===this.parameters.planarConfiguration}).pixels[0].buffer}}});let Lg,Ug,fg,Yg;const Kg={env:{emscripten_notify_memory_growth:A=>{fg=new Uint8Array(Ug.exports.memory.buffer),Yg=new DataView(fg.buffer)}}};const ug="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QQhyIQBBACEDA0AgACADTQ0DIANBQGshAwwACwALQWwhCiAOIA5B/ABqIA5B+ABqIAUgBhAGIgJBiH9LDQEgDigCeCIDIARLDQEgACAOIA4oAnwgByAIIAMgDRAlIAEgADYCACACIQoMAQtBbCEKCyAOQYABaiQAIAoLcAEEfyAAQgA3AgAgAgRAIAFBCmohBiABKAIEIQRBACECQQAhAQNAIAEgBHZFBEAgAiAGIAFBA3RqLQAAIgUgAiAFSxshAiABQQFqIQEgAyAFQRZLaiEDDAELCyAAIAI2AgQgACADQQggBGt0NgIACwuuAQEEfyABIAIoAgQiAyABKAIEaiIENgIEIAAgA0ECdEGwGWooAgAgASgCAEEAIARrdnE2AgACQCAEQSFPBEAgAUGwGjYCCAwBCyABKAIIIgMgASgCEE8EQCABEAwMAQsgAyABKAIMIgVGDQAgASADIAMgBWsgBEEDdiIGIAMgBmsgBUkbIgNrIgU2AgggASAEIANBA3RrNgIEIAEgBSgAADYCAAsgACACQQhqNgIEC40CAgN/AX4gACACaiEEAkACQCACQQhOBEAgACABayICQXlIDQELA0AgACAETw0CIAAgAS0AADoAACAAQQFqIQAgAUEBaiEBDAALAAsCQAJAIAJBb0sNACAAIARBIGsiAksNACABKQAAIQYgACABKQAINwAIIAAgBjcAACACIABrIgVBEU4EQCAAQRBqIQAgASEDA0AgAykAECEGIAAgAykAGDcACCAAIAY3AAAgAykAICEGIAAgAykAKDcAGCAAIAY3ABAgA0EgaiEDIABBIGoiACACSQ0ACwsgASAFaiEBDAELIAAhAgsDQCACIARPDQEgAiABLQAAOgAAIAJBAWohAiABQQFqIQEMAAsACwvfAQEGf0G6fyEKAkAgAigCBCIIIAIoAgAiCWoiDSABIABrSw0AQWwhCiAJIAQgAygCACILa0sNACAAIAlqIgQgAigCCCIMayECIAAgAUEgayIBIAsgCUEAEDMgAyAJIAtqNgIAAkACQCAEIAVrIAxPBEAgAiEFDAELIAwgBCAGa0sNAiAHIAcgAiAFayIDaiICIAhqTwRAIAhFDQIgBCACIAj8CgAADAILQQAgA2siAARAIAQgAiAA/AoAAAsgAyAIaiEIIAQgA2shBAsgBCABIAUgCEEBEDML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",Mg=new class{init(){return Lg||(Lg="undefined"!=typeof fetch?fetch(`data:application/wasm;base64,${ug}`).then((A=>A.arrayBuffer())).then((A=>WebAssembly.instantiate(A,Kg))).then(this._init):WebAssembly.instantiate(Buffer.from(ug,"base64"),Kg).then(this._init),Lg)}_init(A){Ug=A.instance,Kg.env.emscripten_notify_memory_growth(0)}decode(A,I=0){if(!Ug)throw new Error("ZSTDDecoder: Await .init() before decoding.");const g=A.byteLength,B=Ug.exports.malloc(g);if(fg.set(A,B),0===I&&(I=Number(Ug.exports.ZSTD_findDecompressedSize(B,g))),-1===I){Ug.exports.free(B);const I=[];for(const g of this.decodeStreaming([A]))I.push(g);if(1===I.length)return I[0];const g=I.reduce(((A,I)=>A+I.byteLength),0),C=new Uint8Array(g);let Q=0;for(const A of I)C.set(A,Q),Q+=A.byteLength;return C}const C=Ug.exports.malloc(I),Q=Ug.exports.ZSTD_decompress(C,I,B,g),E=fg.slice(C,C+Q);return Ug.exports.free(B),Ug.exports.free(C),E}*decodeStreaming(A){if(!Ug)throw new Error("ZSTDDecoder: Await .init() before decoding.");const I=Ug.exports.ZSTD_DStreamInSize(),g=Ug.exports.malloc(I),B=Ug.exports.ZSTD_DStreamOutSize(),C=Ug.exports.malloc(B),Q=Ug.exports.ZSTD_createDCtx(),E=Ug.exports.malloc(12),i=Ug.exports.malloc(12);let e=0;for(const I of A){const A=Ug.exports.malloc(I.byteLength);for(fg.set(I,A),Yg.setInt32(E,A,!0),Yg.setInt32(E+4,I.byteLength,!0),Yg.setInt32(E+4+4,0,!0);Yg.getUint32(E+4+4,!0)<Yg.getUint32(E+4,!0);){Yg.setInt32(i,C,!0),Yg.setInt32(i+4,B,!0),Yg.setInt32(i+4+4,0,!0),e=Ug.exports.ZSTD_decompressStream(Q,i,E);const A=Yg.getUint32(i+4+4,!0);yield fg.slice(C,C+A)}Ug.exports.free(A)}if(Ug.exports.ZSTD_freeDCtx(Q),Ug.exports.free(g),Ug.exports.free(C),Ug.exports.free(E),Ug.exports.free(i),0!==e)throw new Error("Incomplete stream, more data expected.")}};var Jg=Object.freeze({__proto__:null,zstd:Mg,default:class extends i{decodeBlock(A){return Mg.decode(new Uint8Array(A)).buffer}}});var Hg=Object.freeze({__proto__:null,default:class extends i{constructor(A){if(super(A),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available")}async decodeBlock(A){const I=new Blob([A]),g=await createImageBitmap(I);let B;"undefined"!=typeof document?(B=document.createElement("canvas"),B.width=g.width,B.height=g.height):B=new OffscreenCanvas(g.width,g.height);const C=B.getContext("2d");C.drawImage(g,0,0);const Q=C.getImageData(0,0,g.width,g.height).data,E=this.parameters.samplesPerPixel||4;if(4===E)return Q.buffer;if(3===E){const A=new Uint8ClampedArray(g.width*g.height*3);for(let I=0,g=0;I<A.length;I+=3,g+=4)A[I]=Q[g],A[I+1]=Q[g+1],A[I+2]=Q[g+2];return A.buffer}throw new Error(`Unsupported SamplesPerPixel value: ${E}`)}}});';return new EF(typeof Buffer<"u"?"data:application/javascript;base64,"+Buffer.from(i,"binary").toString("base64"):URL.createObjectURL(new Blob([i],{type:"application/javascript"})))}const pF=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class yF{constructor(e){this.worker=e,this.worker.addEventListener("message",t=>this._onWorkerMessage(t)),this.jobIdCounter=0,this.jobs=new Map}newJobId(){return this.jobIdCounter++}getJobCount(){return this.jobs.size}_onWorkerMessage(e){const{jobId:t,error:r,...A}=e.data,n=this.jobs.get(t);this.jobs.delete(t),r?n.reject(new Error(r)):n.resolve(A)}submitJob(e,t=void 0){const r=this.newJobId();let A,n;const s=new Promise((o,a)=>{A=o,n=a});return this.jobs.set(r,{resolve:A,reject:n}),this.worker.postMessage({...e,jobId:r},{transfer:t}),s}terminate(){this.worker.terminate()}}const mF=new FinalizationRegistry(i=>{i.terminate()});class QF{constructor(e=pF,t=BF){this.workerWrappers=null,e&&(this.workerWrappers=(async()=>{const r=[];for(let A=0;A<e;A++){const n=t(),s=new yF(n);r.push(s),mF.register(s,n,s)}return r})())}bindParameters(e,t){return{decode:async r=>{if(sF(e)&&this.workerWrappers){const A=(await this.workerWrappers).reduce((s,o)=>s.getJobCount()<o.getJobCount()?s:o),{decoded:n}=await A.submitJob({compression:e,decoderParameters:t,buffer:r},[r]);return n}else return(await jE(e,t)).decode(r)}}}async destroy(){this.workerWrappers&&((await this.workerWrappers).forEach(e=>{e.terminate()}),this.workerWrappers=null)}}const ed=`\r
\r
`;function $E(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const e={};for(const[t,r]of i)e[t.toLowerCase()]=r;return e}function wF(i){const e=i.split(`\r
`).map(t=>{const r=t.split(":").map(A=>A.trim());return r[0]=r[0].toLowerCase(),r});return $E(e)}function _F(i){if(!i)return{type:null,params:{}};const[e,...t]=i.split(";").map(A=>A.trim()),r=t.map(A=>A.split("="));return{type:e,params:$E(r)}}function al(i){let e=NaN,t=NaN,r=NaN;return i&&([,e,t,r]=(i.match(/bytes (\d+)-(\d+)\/(\d+)/)||[]).map(Number)),{start:e,end:t,total:r}}function SF(i,e){let t=null;const r=new TextDecoder("ascii"),A=[],n=`--${e}`,s=`${n}--`;for(let o=0;o<10;++o)r.decode(new Uint8Array(i,o,n.length))===n&&(t=o);if(t===null)throw new Error("Could not find initial boundary");for(;t<i.byteLength;){const o=r.decode(new Uint8Array(i,t,Math.min(n.length+1024,i.byteLength-t)));if(o.length===0||o.startsWith(s))break;if(!o.startsWith(n))throw new Error("Part does not start with boundary");const a=o.substr(n.length+2);if(a.length===0)break;const g=a.indexOf(ed),l=wF(a.substr(0,g)),{start:c,end:u,total:I}=al(l["content-range"]),h=t+n.length+g+ed.length,d=u+1-c;A.push({headers:l,data:i.slice(h,h+d),offset:c,length:d,fileSize:I}),t=h+d+4}return A}class Cu{async fetch(e,t){return Promise.all(e.map(r=>this.fetchSlice(r,t)))}async fetchSlice(e,t){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}async function bF(i){return new Promise(e=>setTimeout(e,i))}function RF(i,e){const t=Array.isArray(i)?i:Array.from(i),r=Array.isArray(e)?e:Array.from(e);return t.map((A,n)=>[A,r[n]])}class TA extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,TA),this.name="AbortError"}}class DF extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const xF=DF;class TF{constructor(e,t,r){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}}class td{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}}class FF extends Cu{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Uf({maxSize:r,onEviction:(A,n)=>{this.evictedBlocks.set(A,n)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const r=[],A=[],n=[];this.evictedBlocks.clear();for(const{offset:u,length:I}of e){let h=u+I;const{fileSize:d}=this;d!==null&&(h=Math.min(h,d));const f=Math.floor(u/this.blockSize)*this.blockSize;for(let C=f;C<h;C+=this.blockSize){const E=Math.floor(C/this.blockSize);!this.blockCache.has(E)&&!this.blockRequests.has(E)&&(this.blockIdsToFetch.add(E),A.push(E)),this.blockRequests.has(E)&&r.push(this.blockRequests.get(E)),n.push(E)}}await bF(),this.fetchBlocks(t);const s=[];for(const u of A)this.blockRequests.has(u)&&s.push(this.blockRequests.get(u));await Promise.allSettled(r),await Promise.allSettled(s);const o=[],a=n.filter(u=>this.abortedBlockIds.has(u)||!this.blockCache.has(u));if(a.forEach(u=>this.blockIdsToFetch.add(u)),a.length>0&&t&&!t.aborted){this.fetchBlocks();for(const u of a){const I=this.blockRequests.get(u);if(!I)throw new Error(`Block ${u} is not in the block requests`);o.push(I)}await Promise.allSettled(o)}if(t&&t.aborted)throw new TA("Request was aborted");const g=n.map(u=>this.blockCache.get(u)||this.evictedBlocks.get(u)),l=g.filter(u=>!u);if(l.length)throw new xF(l,"Request failed");const c=new Map(RF(n,g));return this.readSliceData(e,c)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let A=0;A<t.length;++A){const n=t[A];for(const s of n.blockIds)this.blockRequests.set(s,(async()=>{try{const o=(await r)[A],a=s*this.blockSize,g=a-o.offset,l=Math.min(g+this.blockSize,o.data.byteLength),c=o.data.slice(g,l),u=new TF(a,c.byteLength,c);this.blockCache.set(s,u),this.abortedBlockIds.delete(s)}catch(o){if(o.name==="AbortError")o.signal=e,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw o}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((s,o)=>s-o);if(t.length===0)return[];let r=[],A=null;const n=[];for(const s of t)A===null||A+1===s?(r.push(s),A=s):(n.push(new td(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],A=s);return n.push(new td(r[0]*this.blockSize,r.length*this.blockSize,r)),n}readSliceData(e,t){return e.map(r=>{let A=r.offset+r.length;this.fileSize!==null&&(A=Math.min(this.fileSize,A));const n=Math.floor(r.offset/this.blockSize),s=Math.floor((A-1)/this.blockSize),o=new ArrayBuffer(r.length),a=new Uint8Array(o);for(let g=n;g<=s;++g){const l=t.get(g);if(!l)continue;const c=l.offset-r.offset,u=l.top-A;let I=0,h=0,d;c<0?I=-c:c>0&&(h=c),u<0?d=l.length-I:d=A-l.offset-I;const f=new Uint8Array(l.data,I,d);a.set(f,h)}return o})}}class Eu{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Bu{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class LF extends Eu{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class NF extends Bu{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const r=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new LF(r)}}class GF extends Eu{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class vF extends Bu{constructRequest(e,t){return new Promise((r,A)=>{const n=new XMLHttpRequest;n.open("GET",this.url),n.responseType="arraybuffer";for(const[s,o]of Object.entries(e))n.setRequestHeader(s,o);n.onload=()=>{const s=n.response;r(new GF(n,s))},n.onerror=A,n.onabort=()=>A(new TA("Request aborted")),n.send(),t&&(t.aborted&&n.abort(),t.addEventListener("abort",()=>n.abort()))})}async request({headers:e=void 0,signal:t=void 0}={}){return await this.constructRequest(e,t)}}class MF extends Eu{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class kF extends Bu{constructor(e){super(e),this.parsedUrl=dA.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",dA)}constructRequest(e,t){return new Promise((r,A)=>{const n=this.httpApi.get({...this.parsedUrl,headers:e},s=>{const o=new Promise(a=>{const g=[];s.on("data",l=>{g.push(l)}),s.on("end",()=>{const l=Buffer.concat(g).buffer;a(l)}),s.on("error",A)});r(new MF(s,o))});n.on("error",A),t&&(t.aborted&&n.destroy(new TA("Request aborted")),t.addEventListener("abort",()=>n.destroy(new TA("Request aborted"))))})}async request({headers:e=void 0,signal:t=void 0}={}){return await this.constructRequest(e,t)}}class pu extends Cu{constructor(e,{headers:t,maxRanges:r=0,allowFullFile:A}={}){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=A,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,t))))}async fetchSlices(e,t){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:A,length:n})=>`${A}-${A+n}`).join(",")}`},signal:t});if(r.ok)if(r.status===206){const{type:A,params:n}=_F(r.getHeader("content-type"));if(A==="multipart/byteranges"){const c=SF(await r.getData(),n.boundary);return this._fileSize=c[0].fileSize||null,c}const s=await r.getData(),{start:o,end:a,total:g}=al(r.getHeader("content-range"));this._fileSize=g||null;const l=[{data:s,offset:o,length:a-o}];if(e.length>1){const c=await Promise.all(e.slice(1).map(u=>this.fetchSlice(u,t)));return l.concat(c)}return l}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const A=await r.getData();return this._fileSize=A.byteLength,[{data:A,offset:0,length:A.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:r,length:A}=e,n=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+A}`},signal:t});if(n.ok)if(n.status===206){const s=await n.getData(),{total:o}=al(n.getHeader("content-range"));return this._fileSize=o||null,{data:s,offset:r,length:A}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await n.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function yu(i,{blockSize:e,cacheSize:t}){return e===null?i:new FF(i,{blockSize:e,cacheSize:t})}function PF(i,{headers:e={},credentials:t,maxRanges:r=0,allowFullFile:A=!1,...n}={}){const s=new NF(i,t),o=new pu(s,{headers:e,maxRanges:r,allowFullFile:A});return yu(o,n)}function UF(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...A}={}){const n=new vF(i),s=new pu(n,{headers:e,maxRanges:t,allowFullFile:r});return yu(s,A)}function OF(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...A}={}){const n=new kF(i),s=new pu(n,{headers:e,maxRanges:t,allowFullFile:r});return yu(s,A)}function gl(i,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?PF(i,t):typeof XMLHttpRequest<"u"?UF(i,t):OF(i,t)}class YF extends Cu{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise((r,A)=>{const n=this.file.slice(e.offset,e.offset+e.length),s=new FileReader;s.onload=()=>r(s.result),s.onerror=A,s.onabort=A,s.readAsArrayBuffer(n),t&&t.addEventListener("abort",()=>s.abort())})}}function KF(i){return new YF(i)}function uA(i,e){switch(i){case T.BYTE:case T.ASCII:case T.UNDEFINED:return new Uint8Array(e);case T.SBYTE:return new Int8Array(e);case T.SHORT:return new Uint16Array(e);case T.SSHORT:return new Int16Array(e);case T.LONG:case T.IFD:return new Uint32Array(e);case T.SLONG:return new Int32Array(e);case T.LONG8:case T.IFD8:return new Array(e);case T.SLONG8:return new Array(e);case T.RATIONAL:return new Uint32Array(e*2);case T.SRATIONAL:return new Int32Array(e*2);case T.FLOAT:return new Float32Array(e);case T.DOUBLE:return new Float64Array(e);default:throw new RangeError(`Invalid field type: ${i}`)}}function hA(i,e){switch(e){case T.BYTE:case T.ASCII:case T.UNDEFINED:return i.readUint8;case T.SBYTE:return i.readInt8;case T.SHORT:return i.readUint16;case T.SSHORT:return i.readInt16;case T.LONG:case T.IFD:return i.readUint32;case T.SLONG:return i.readInt32;case T.LONG8:case T.IFD8:return i.readUint64;case T.SLONG8:return i.readInt64;case T.RATIONAL:return i.readUint32;case T.SRATIONAL:return i.readInt32;case T.FLOAT:return i.readFloat32;case T.DOUBLE:return i.readFloat64;default:throw new RangeError(`Invalid field type: ${e}`)}}function gn(i=null,e,t,r,A,n,s=!1){const o=vn(r),a=i||uA(r,A),g=r===T.RATIONAL||r===T.SRATIONAL;if(g)for(let l=0;l<A;l+=2)a[l]=e.call(t,n+l*o),a[l+1]=e.call(t,n+(l*o+4));else for(let l=0;l<A;++l)a[l]=e.call(t,n+l*o);return r===T.ASCII?new TextDecoder("utf-8").decode(a):A===1&&!s&&!g?a[0]:a}class HF{constructor(e,t,r,A,n){this.source=e,this.arrayOffset=t,this.littleEndian=r,this.fieldType=A,this.length=n,this.data=uA(A,n),this.itemSize=vn(A),this.maskBitmap=new Uint8Array(Math.ceil(n/8)),this.fetchIndexPromises=new Map,this.fullFetchPromise=null}async loadAll(){return this.fullFetchPromise||(this.fullFetchPromise=this.source.fetch([{offset:this.arrayOffset,length:this.itemSize*this.length}]).then(e=>{const t=new Do(e[0],this.arrayOffset,!0,!1),r=gn(this.data,hA(t,this.fieldType),t,this.fieldType,this.length,this.arrayOffset,!0);return this.maskBitmap.fill(255),this.fetchIndexPromises.clear(),r})),this.fullFetchPromise}async get(e){if(e<0||e>=this.data.length)throw new RangeError(`Index ${e} out of bounds for length ${this.data.length}`);const t=Math.floor(e/8),r=1<<e%8,A=this.arrayOffset+e*this.itemSize;if(!(this.maskBitmap[t]&r)){if(!this.fetchIndexPromises.has(e)){const n=this.source.fetch([{offset:A,length:this.itemSize}]).then(s=>{const o=new Do(s[0],this.arrayOffset+e*this.itemSize,!0,!1),g=hA(o,this.fieldType).call(o,A);return this.data[e]=g,this.maskBitmap[t]|=r,this.fetchIndexPromises.delete(e),g});this.fetchIndexPromises.set(e,n)}return this.fetchIndexPromises.get(e)}return this.data[e]}}class qF{constructor(e,t,r,A){this.actualizedFields=e,this.deferredFields=t,this.deferredFieldsBeingResolved=new Map,this.deferredArrays=r,this.nextIFDByteOffset=A}hasTag(e){const t=Ns(e);return this.actualizedFields.has(t)||this.deferredFields.has(t)||this.deferredArrays.has(t)}getValue(e){const t=Ns(e);if(this.deferredFields.has(t)||this.deferredArrays.has(t)){const r=Mn[t],A=(r==null?void 0:r.name)||`Tag${t}`;throw new Error(`Field '${A}' (${t}) is deferred. Use loadValue() to load it asynchronously.`)}if(this.actualizedFields.has(t))return this.actualizedFields.get(t)}async loadValue(e){const t=Ns(e);if(this.actualizedFields.has(t))return this.actualizedFields.get(t);if(this.deferredFieldsBeingResolved.has(t))return this.deferredFieldsBeingResolved.get(t);if(this.deferredFields.has(t)){const r=this.deferredFields.get(t);this.deferredFields.delete(t);const A=(async()=>{try{const n=await r();return this.actualizedFields.set(t,n),n}finally{this.deferredFieldsBeingResolved.delete(t)}})();return this.deferredFieldsBeingResolved.set(t,A),A}if(this.deferredArrays.has(t))return this.deferredArrays.get(t).loadAll()}async loadValueIndexed(e,t){const r=Ns(e);if(this.actualizedFields.has(r))return this.actualizedFields.get(r)[t];if(this.deferredArrays.has(r))return this.deferredArrays.get(r).get(t);if(this.hasTag(r))return(await this.loadValue(r))[t]}parseGeoKeyDirectory(){const e=this.getValue("GeoKeyDirectory");if(!e)return null;const t={};for(let r=4;r<=e[3]*4;r+=4){const A=Ks[e[r]],n=e[r+1]||null,s=e[r+2],o=e[r+3];let a=null;if(!n)a=o;else{if(a=this.getValue(n),typeof a>"u"||a===null)throw new Error(`Could not get value of geoKey '${A}'.`);typeof a=="string"?a=a.substring(o,o+s-1):a.subarray&&(a=a.subarray(o,o+s),s===1&&(a=a[0]))}t[A]=a}return t}toObject(){const e={};for(const[t,r]of this.actualizedFields.entries()){const A=Mn[t],n=A?A.name:`Tag${t}`;e[n]=r}return e}}class JF{constructor(e,t,r,A=!1){this.source=e,this.littleEndian=t,this.bigTiff=r,this.eager=A}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new Do((await this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){var u,I;const t=this.bigTiff?20:12,r=this.bigTiff?8:2;let A=await this.getSlice(e);const n=this.bigTiff?A.readUint64(e):A.readUint16(e),s=n*(t+(this.bigTiff?16:6));A.covers(e,s)||(A=await this.getSlice(e,s));const o=new Map,a=new Map,g=new Map;let l=e+(this.bigTiff?8:2);for(let h=0;h<n;l+=t,++h){const d=A.readUint16(l),f=A.readUint16(l+2),C=this.bigTiff?A.readUint64(l+4):A.readUint32(l+4);let E=null,B=null,m=null;const p=vn(f),y=l+(this.bigTiff?12:8),Q=(u=Mn[d])==null?void 0:u.isArray,_=((I=Mn[d])==null?void 0:I.eager)||this.eager;if(p*C<=(this.bigTiff?8:4))E=gn(uA(f,C),hA(A,f),A,f,C,y,Q);else{const w=A.readOffset(y),S=vn(f)*C;if(A.covers(w,S))E=gn(uA(f,C),hA(A,f),A,f,C,w,Q);else if(_){const R=await this.getSlice(w,S);E=gn(uA(f,C),hA(R,f),R,f,C,w,Q)}else Q?m=new HF(this.source,w,this.littleEndian,f,C):B=async()=>{const R=await this.getSlice(w,S);return gn(uA(f,C),hA(R,f),R,f,C,w,Q)}}E!==null?o.set(d,E):B!==null?a.set(d,B):m!==null&&g.set(d,m)}const c=A.readOffset(e+r+t*n);return new qF(o,a,g,c)}}function ug(i,e,t,r){let A=null,n=null;const s=vn(e);switch(e){case T.BYTE:case T.ASCII:case T.UNDEFINED:A=new Uint8Array(t),n=i.readUint8;break;case T.SBYTE:A=new Int8Array(t),n=i.readInt8;break;case T.SHORT:A=new Uint16Array(t),n=i.readUint16;break;case T.SSHORT:A=new Int16Array(t),n=i.readInt16;break;case T.LONG:case T.IFD:A=new Uint32Array(t),n=i.readUint32;break;case T.SLONG:A=new Int32Array(t),n=i.readInt32;break;case T.LONG8:case T.IFD8:A=new Array(t),n=i.readUint64;break;case T.SLONG8:A=new Array(t),n=i.readInt64;break;case T.RATIONAL:A=new Uint32Array(t*2),n=i.readUint32;break;case T.SRATIONAL:A=new Int32Array(t*2),n=i.readInt32;break;case T.FLOAT:A=new Float32Array(t),n=i.readFloat32;break;case T.DOUBLE:A=new Float64Array(t),n=i.readFloat64;break}if(A===null||n===null)throw new RangeError(`Invalid field type: ${e}`);if(e===T.RATIONAL||e===T.SRATIONAL)for(let o=0;o<t;o+=2)A[o]=n.call(i,r+o*s),A[o+1]=n.call(i,r+(o*s+4));else for(let o=0;o<t;++o)A[o]=n.call(i,r+o*s);return e===T.ASCII?new TextDecoder("utf-8").decode(A):A}class Gs extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class ZE{async getImage(e=0){throw new Error("Not implemented")}async getImageCount(){throw new Error("Not implemented")}async readRasters(e={}){const{window:t,width:r,height:A}=e;let{resX:n,resY:s,bbox:o}=e;const a=await this.getImage();let g=a;const l=await this.getImageCount(),c=a.getBoundingBox();if(t&&o)throw new Error('Both "bbox" and "window" passed.');if(r||A){if(t){const[h,d]=a.getOrigin(),[f,C]=a.getResolution();o=[h+t[0]*f,d+t[1]*C,h+t[2]*f,d+t[3]*C]}const I=o||c;if(r){if(n)throw new Error("Both width and resX passed");n=(I[2]-I[0])/r}if(A){if(s)throw new Error("Both width and resY passed");s=(I[3]-I[1])/A}}if(n||s){const I=[];for(let h=0;h<l;++h){const d=await this.getImage(h),f=d.fileDirectory.getValue("SubfileType"),C=d.fileDirectory.getValue("NewSubfileType");(h===0||f===2||C&1)&&I.push(d)}I.sort((h,d)=>h.getWidth()-d.getWidth());for(let h=0;h<I.length;++h){const d=I[h],f=(c[2]-c[0])/d.getWidth(),C=(c[3]-c[1])/d.getHeight();if(g=d,n&&n>f||s&&s>C)break}}let u=t;if(o){const[I,h]=a.getOrigin(),[d,f]=g.getResolution(a);u=[Math.round((o[0]-I)/d),Math.round((o[1]-h)/f),Math.round((o[2]-I)/d),Math.round((o[3]-h)/f)],u=[Math.min(u[0],u[2]),Math.min(u[1],u[3]),Math.max(u[0],u[2]),Math.max(u[1],u[3])]}return g.readRasters({...e,window:u})}}class FA extends ZE{constructor(e,t,r,A,n={}){super(),this.source=e,this.parser=new JF(e,t,r,!1),this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=A,this.cache=n.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new Do((await this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parser.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof Gs?new Gs(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new Gs(e);return this.parser.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){return new VE(await this.requestIFD(e),this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(r){if(r instanceof Gs)t=!1;else throw r}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100;let A=await this.getSlice(e,r);if(t===ug(A,T.ASCII,t.length,e)){const s=ug(A,T.ASCII,r,e).split(`
`)[0],o=Number(s.split("=")[1].split(" ")[0])+s.length;o>r&&(A=await this.getSlice(e,o));const a=ug(A,T.ASCII,o,e);this.ghostValues={},a.split(`
`).filter(g=>g.length>0).map(g=>g.split("=")).forEach(([g,l])=>{this.ghostValues[g]=l})}return this.ghostValues}static async fromSource(e,t,r){const A=(await e.fetch([{offset:0,length:1024}],r))[0],n=new CF(A),s=n.getUint16(0,0);let o;if(s===18761)o=!0;else if(s===19789)o=!1;else throw new TypeError("Invalid byte order value.");const a=n.getUint16(2,o);let g;if(a===42)g=!1;else if(a===43){if(g=!0,n.getUint16(4,o)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const l=g?n.getUint64(8,o):n.getUint32(4,o);return new FA(e,o,g,l,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class zF extends ZE{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parser.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parser.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){if(await this.getImageCount(),!this.imageCounts)throw new Error("Image counts not available");await this.parseFileDirectoriesPerFile();let t=0,r=0;for(let A=0;A<this.imageFiles.length;A++){const n=this.imageFiles[A];for(let s=0;s<this.imageCounts[A];s++){if(e===t)return new VE(await n.requestIFD(r),n.littleEndian,n.cache,n.source);t++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((t,r)=>t+r,0),this.imageCount}}async function jF(i,e={},t){return FA.fromSource(gl(i,e),void 0,t)}async function VF(i,e){return FA.fromSource(KF(i),void 0,e)}async function $F(i,e=[],t={},r){const A=await FA.fromSource(gl(i,t),void 0,r),n=await Promise.all(e.map(s=>FA.fromSource(gl(s,t),void 0,r)));return new zF(A,n)}function ZF(i){return((i.fileDirectory.getValue("NewSubfileType")||0)&4)===4}function WF(i,e){if(!i)return!1;if(i===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.getValue("PhotometricInterpretation"),r=Mt;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}const rd="STATISTICS_MAXIMUM",id="STATISTICS_MINIMUM",hg=256;let Ig;function XF(){return Ig||(Ig=new QF),Ig}function eL(i){try{return i.getBoundingBox(!0)}catch{return[0,0,i.getWidth(),i.getHeight()]}}function tL(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function rL(i,e){try{return i.getResolution(e)}catch{return[e.getWidth()/i.getWidth(),e.getHeight()/i.getHeight()]}}function iL(i){const e=i.getGeoKeys();if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let r=pe(t);if(!r){const A=Wu(e.ProjLinearUnitsGeoKey);A&&(r=new Xu({code:t,units:A}))}return r}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let r=pe(t);if(!r){const A=Wu(e.GeogAngularUnitsGeoKey);A&&(r=new Xu({code:t,units:A}))}return r}return null}function AL(i){return i.getImageCount().then(function(e){const t=new Array(e);for(let r=0;r<e;++r)t[r]=i.getImage(r);return Promise.all(t)})}function nL(i,e){let t;return i.blob?t=VF(i.blob):i.overviews?t=$F(i.url,i.overviews,e):t=jF(i.url,e),t.then(AL)}function ln(i,e,t,r,A){if(Array.isArray(i)){const n=i.length;if(!Array.isArray(e)||n!=e.length){const s=new Error(r);throw A(s),s}for(let s=0;s<n;++s)ln(i[s],e[s],t,r,A);return}if(e=e,Math.abs(i-e)>t*i)throw new Error(r)}function sL(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function oL(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}class WE extends hs{constructor(e){super({attributions:e.attributions,state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(n=>n.url).join(","));const r=this,A=new Array(t);for(let n=0;n<t;++n)A[n]=nL(this.sourceInfo_[n],this.sourceOptions_);Promise.all(A).then(function(n){r.configure_(n)}).catch(function(n){wn(n),r.error_=n,r.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const A=t[r],n=iL(A);if(n){this.projection=n;break}}}determineTransformMatrix(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const n=t[r].fileDirectory.getValue("ModelTransformation");if(n){const[s,o,a,g,l,c,u,I]=n,h=Bn(Bn([1/Math.sqrt(s*s+l*l),0,0,-1/Math.sqrt(o*o+c*c),g,I],[s,l,o,c,0,0]),[1,0,0,1,-g,-I]);this.transformMatrix=h,this.addAlpha_=!0;break}}}configure_(e){let t,r,A,n,s;const o=new Array(e.length),a=new Array(e.length),g=new Array(e.length);let l=0;const c=e.length;for(let f=0;f<c;++f){const C=[],E=[];e[f].forEach(w=>{ZF(w)?E.push(w):C.push(w)});const B=C.length;if(E.length>0&&E.length!==B)throw new Error(`Expected one mask per image found ${E.length} masks and ${B} images`);let m,p;const y=new Array(B),Q=new Array(B),_=new Array(B);a[f]=new Array(B),g[f]=new Array(B);for(let w=0;w<B;++w){const S=C[w],R=S.getGDALNoData();g[f][w]=S.getGDALMetadata(0),a[f][w]=R;const F=this.sourceInfo_[f].bands;o[f]=F?F.length:S.getSamplesPerPixel();const M=B-(w+1);m||(m=eL(S)),p||(p=tL(S));const G=rL(S,C[0]);_[M]=G[0];const x=[S.getTileWidth(),S.getTileHeight()];x[0]!==x[1]&&x[1]<hg&&(x[0]=hg,x[1]=hg),y[M]=x;const N=G[0]/Math.abs(G[1]);Q[M]=[x[0],x[1]/N]}if(t?br(t,m,t):t=m,!r)r=p;else{const w=`Origin mismatch for source ${f}, got [${p}] but expected [${r}]`;ln(r,p,0,w,this.viewRejector)}if(!s)s=_,this.resolutionFactors_[f]=1;else{s.length-l>_.length&&(l=s.length-_.length);const w=s[s.length-1]/_[_.length-1];this.resolutionFactors_[f]=w;const S=_.map(F=>F*=w),R=`Resolution mismatch for source ${f}, got [${S}] but expected [${s}]`;ln(s.slice(l,s.length),S,.02,R,this.viewRejector)}A?ln(A.slice(l,A.length),Q,.01,`Tile size mismatch for source ${f}`,this.viewRejector):A=Q,n?ln(n.slice(l,n.length),y,0,`Tile size mismatch for source ${f}`,this.viewRejector):n=y,this.sourceImagery_[f]=C.reverse(),this.sourceMasks_[f]=E.reverse()}for(let f=0,C=this.sourceImagery_.length;f<C;++f){const E=this.sourceImagery_[f];for(;E.length<s.length;)E.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=o,this.nodataValues_=a,this.metadata_=g;e:for(let f=0;f<c;++f){if(this.sourceInfo_[f].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[f].length){this.addAlpha_=!0;break}const C=a[f],E=this.sourceInfo_[f].bands;if(E){for(let B=0;B<E.length;++B)if(C[E[B]-1]!==null){this.addAlpha_=!0;break e}continue}for(let B=0;B<C.length;++B)if(C[B]!==null){this.addAlpha_=!0;break e}}let u=this.addAlpha_?1:0;for(let f=0;f<c;++f)u+=o[f];this.bandCount=u;const I=new Gl({extent:t,minZoom:l,origin:r,resolutions:s,tileSizes:A});this.tileGrid=I,this.setTileSizes(n),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const h=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let d=t;if(this.transformMatrix){const f=Qn(Et(),this.transformMatrix.slice()),C=_p(E=>qr(f,E));d=SA(t,C)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:Yd(Yr(d),this.projection),extent:Od(d,this.projection),zoom:h})}loadTile_(e,t,r,A){const n=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(s*2),a=this.nodataValues_,g=this.sourceInfo_,l=XF();for(let c=0;c<s;++c){const u=g[c],I=this.resolutionFactors_[c],h=[Math.round(t*(n[0]*I)),Math.round(r*(n[1]*I)),Math.round((t+1)*(n[0]*I)),Math.round((r+1)*(n[1]*I))],d=this.sourceImagery_[c][e];let f;u.bands&&(f=u.bands.map(function(p){return p-1}));let C;"nodata"in u&&u.nodata!==null?C=u.nodata:f?C=f.map(function(p){return a[c][p]}):C=a[c];const E={window:h,width:n[0],height:n[1],samples:f,fillValue:C,pool:l,interleave:!1,signal:A.signal};WF(this.convertToRGB_,d)?o[c]=d.readRGB(E):o[c]=d.readRasters(E);const B=s+c,m=this.sourceMasks_[c][e];if(!m){o[B]=Promise.resolve(null);continue}o[B]=m.readRasters({window:h,width:n[0],height:n[1],samples:[0],pool:l,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch(function(c){throw wn(c),c})}async composeTile_(e,t){const r=this.metadata_,A=this.sourceInfo_,n=this.sourceImagery_.length,s=this.bandCount,o=this.samplesPerPixel_,a=this.nodataValues_,g=this.normalize_,l=this.addAlpha_,c=e[0]*e[1],u=c*s;let I;g?I=new Uint8Array(u):I=new Float32Array(u);let h=0;for(let d=0;d<c;++d){let f=l;for(let C=0;C<n;++C){const E=A[C];let B=E.min,m=E.max,p,y;if(g){const Q=await r[C][0];B===void 0&&(Q&&id in Q?B=parseFloat(Q[id]):B=sL(t[C][0])),m===void 0&&(Q&&rd in Q?m=parseFloat(Q[rd]):m=oL(t[C][0])),p=255/(m-B),y=-B*p}for(let Q=0;Q<o[C];++Q){const _=t[C][Q][d];let w;if(g?w=Je(p*_+y,0,255):w=_,!l)I[h]=w;else{let S=E.nodata;if(S===void 0){let F;E.bands?F=E.bands[Q]-1:F=Q,S=a[C][F]}const R=isNaN(S);(!R&&_!==S||R&&!isNaN(_))&&(f=!1,I[h]=w)}h++}if(!f){const Q=n+C,_=t[Q];_&&!_[0][d]&&(f=!0)}}l&&(f||(I[h]=255),h++)}return I}}WE.prototype.getView;var qt;class XE{constructor(e,t,r){ft(this,qt);typeof e=="number"?rt(this,qt,new Uint8Array(e)):e instanceof ArrayBuffer?rt(this,qt,new Uint8Array(e,t,r)):rt(this,qt,new Uint8Array(Array.from(e,A=>A?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return ge(this,qt).byteOffset}get byteLength(){return ge(this,qt).byteLength}get buffer(){return ge(this,qt).buffer}get length(){return ge(this,qt).length}get(e){let t=ge(this,qt)[e];return typeof t=="number"?t!==0:t}set(e,t){ge(this,qt)[e]=t?1:0}fill(e){ge(this,qt).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}qt=new WeakMap;var mA;class mu{constructor(e,t,r,A){j(this,"_data");j(this,"chars");ft(this,mA);if(this.chars=e,rt(this,mA,new TextEncoder),typeof t=="number")this._data=new Uint8Array(t*e);else if(t instanceof ArrayBuffer)A&&(A=A*e),this._data=new Uint8Array(t,r,A);else{let n=Array.from(t);this._data=new Uint8Array(n.length*e);for(let s=0;s<n.length;s++)this.set(s,n[s])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const t=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(t).replace(/\x00/g,"")}set(e,t){const r=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);r.fill(0),r.set(ge(this,mA).encode(t))}fill(e){const t=ge(this,mA).encode(e);for(let r=0;r<this.length;r++)this._data.set(t,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}mA=new WeakMap;var mt;const Mu=class Mu{constructor(e,t,r,A){ft(this,mt);j(this,"chars");if(this.chars=e,typeof t=="number")rt(this,mt,new Int32Array(t*e));else if(t instanceof ArrayBuffer)A&&(A*=e),rt(this,mt,new Int32Array(t,r,A));else{const n=t,s=new Mu(e,1);rt(this,mt,new Int32Array(function*(){for(let o of n)s.set(0,o),yield*ge(s,mt)}()))}}get BYTES_PER_ELEMENT(){return ge(this,mt).BYTES_PER_ELEMENT*this.chars}get byteLength(){return ge(this,mt).byteLength}get byteOffset(){return ge(this,mt).byteOffset}get buffer(){return ge(this,mt).buffer}get length(){return ge(this,mt).length/this.chars}get(e){const t=this.chars*e;let r="";for(let A=0;A<this.chars;A++)r+=String.fromCodePoint(ge(this,mt)[t+A]);return r.replace(/\u0000/g,"")}set(e,t){const r=this.chars*e,A=ge(this,mt).subarray(r,r+this.chars);A.fill(0);for(let n=0;n<this.chars;n++)A[n]=t.codePointAt(n)??0}fill(e){this.set(0,e);let t=ge(this,mt).subarray(0,this.chars);for(let r=1;r<this.length;r++)ge(this,mt).set(t,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};mt=new WeakMap;let kn=Mu;function Is(i){const e=new TextDecoder().decode(i);return JSON.parse(e)}function Ad(i,e){const t=e/2,r=e-1;let A=0;for(let n=0;n<i.length;n+=e)for(let s=0;s<t;s+=1)A=i[n+s],i[n+s]=i[n+r-s],i[n+r-s]=A}function eB(i){if(i==="v2:object")return globalThis.Array;let e=i.match(/v2:([US])(\d+)/);if(e){let[,r,A]=e;return(r==="U"?kn:mu).bind(null,Number(A))}if(i==="string")return globalThis.Array;let t={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float16:globalThis.Float16Array,float32:Float32Array,float64:Float64Array,bool:XE}[i];return at(t,`Unknown or unsupported data_type: ${i}`),t}function Hi(i,e){const t=i.length;typeof e=="string"&&(e=e==="C"?Array.from({length:t},(n,s)=>s):Array.from({length:t},(n,s)=>t-1-s)),at(t===e.length,"Order length must match the number of dimensions.");let r=1,A=new Array(t);for(let n=e.length-1;n>=0;n--)A[e[n]]=r,r*=i[e[n]];return A}function aL({name:i,configuration:e}){if(i==="default"){const t=(e==null?void 0:e.separator)??"/";return r=>["c",...r].join(t)}if(i==="v2"){const t=(e==null?void 0:e.separator)??".";return r=>r.join(t)||"0"}throw new Error(`Unknown chunk key encoding: ${i}`)}function gL(i){if(i==="|O")return{data_type:"v2:object"};let e=i.match(/^([<|>])(.*)$/);at(e,`Invalid dtype: ${i}`);let[,t,r]=e,A={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f2:"float16",f4:"float32",f8:"float64"}[r]??(r.startsWith("S")||r.startsWith("U")?`v2:${r}`:void 0);return at(A,`Unsupported or unknown dtype: ${i}`),t==="|"?{data_type:A}:{data_type:A,endian:t==="<"?"little":"big"}}function lL(i,e={}){let t=[],r=gL(i.dtype);i.order==="F"&&t.push({name:"transpose",configuration:{order:"F"}}),"endian"in r&&r.endian==="big"&&t.push({name:"bytes",configuration:{endian:"big"}});for(let{id:A,...n}of i.filters??[])t.push({name:A,configuration:n});if(i.compressor){let{id:A,...n}=i.compressor;t.push({name:A,configuration:n})}return{zarr_format:3,node_type:"array",shape:i.shape,data_type:r.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:i.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:i.dimension_separator??"."}},codecs:t,fill_value:i.fill_value,attributes:e}}function cL(i,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function uL(i,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return i===e;let t=i==="bool";if(e==="boolean")return t;let r=i.startsWith("v2:U")||i.startsWith("v2:S")||i==="string";if(e==="string")return r;let A=i==="int64"||i==="uint64";if(e==="bigint")return A;let n=i==="v2:object";return e==="object"?n:!r&&!A&&!t&&!n}function hL(i){return(i==null?void 0:i.name)==="sharding_indexed"}function tB(i){return(i.data_type==="uint64"||i.data_type==="int64")&&i.fill_value!=null?BigInt(i.fill_value):i.fill_value}function rB(i,...e){if(!e.some(t=>i instanceof t))throw i}function at(i,e=""){if(!i)throw new Error(e)}async function iB(i,{format:e,signal:t}){const r=i instanceof Response?i:new Response(i);at(r.body,"Response does not contain body.");try{return await new Response(r.body.pipeThrough(new DecompressionStream(e),{signal:t})).arrayBuffer()}catch{throw t==null||t.throwIfAborted(),new Error(`Failed to decode ${e}`)}}class Qu{constructor(e,t){j(this,"kind","array_to_array");at(e.keepbits>=0,"keepbits must be zero or positive")}static fromConfig(e,t){return new Qu(e,t)}encode(e){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(e){return e}}const nd=IL();function IL(){const i=new Uint32Array([305419896]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)[0]!==18}function sd(i){return"BYTES_PER_ELEMENT"in i?i.BYTES_PER_ELEMENT:4}var Un,Ai,On,Yn,QA;const ku=class ku{constructor(e,t){j(this,"kind","array_to_bytes");ft(this,Un);ft(this,Ai);ft(this,On);ft(this,Yn);ft(this,QA);rt(this,QA,e==null?void 0:e.endian),rt(this,Ai,eB(t.data_type)),rt(this,Yn,t.shape),rt(this,Un,Hi(t.shape,"C"));const r=new(ge(this,Ai))(0);rt(this,On,r.BYTES_PER_ELEMENT)}static fromConfig(e,t){return new ku(e,t)}encode(e){let t=new Uint8Array(e.data.buffer);return nd&&ge(this,QA)==="big"&&Ad(t,sd(ge(this,Ai))),t}decode(e){return nd&&ge(this,QA)==="big"&&Ad(e,sd(ge(this,Ai))),{data:new(ge(this,Ai))(e.buffer,e.byteOffset,e.byteLength/ge(this,On)),shape:ge(this,Yn),stride:ge(this,Un)}}};Un=new WeakMap,Ai=new WeakMap,On=new WeakMap,Yn=new WeakMap,QA=new WeakMap;let xo=ku;class wu{constructor(){j(this,"kind","bytes_to_bytes")}static fromConfig(){return new wu}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}class _u{constructor(){j(this,"kind","bytes_to_bytes")}static fromConfig(e){return new _u}encode(e){throw new Error("Gzip encoding is not enabled by default. Please register a custom codec with `numcodecs/gzip`.")}async decode(e){const t=await iB(e,{format:"gzip"});return new Uint8Array(t)}}function dL(i,e){return at(!Number.isNaN(e),"JsonCodec allow_nan is false but NaN was encountered during encoding."),at(e!==Number.POSITIVE_INFINITY,"JsonCodec allow_nan is false but Infinity was encountered during encoding."),at(e!==Number.NEGATIVE_INFINITY,"JsonCodec allow_nan is false but -Infinity was encountered during encoding."),e}function fL(i,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{}):e}var Kn,Hn;const Pu=class Pu{constructor(e={}){j(this,"configuration");j(this,"kind","array_to_bytes");ft(this,Kn);ft(this,Hn);this.configuration=e;const{encoding:t="utf-8",skipkeys:r=!1,ensure_ascii:A=!0,check_circular:n=!0,allow_nan:s=!0,sort_keys:o=!0,indent:a,strict:g=!0}=e;let l=e.separators;l||(a?l=[", ",": "]:l=[",",":"]),rt(this,Kn,{encoding:t,skipkeys:r,ensure_ascii:A,check_circular:n,allow_nan:s,indent:a,separators:l,sort_keys:o}),rt(this,Hn,{strict:g})}static fromConfig(e){return new Pu(e)}encode(e){const{indent:t,encoding:r,ensure_ascii:A,check_circular:n,allow_nan:s,sort_keys:o}=ge(this,Kn);at(r==="utf-8","JsonCodec does not yet support non-utf-8 encoding.");const a=[];at(n,"JsonCodec does not yet support skipping the check for circular references during encoding."),s||a.push(dL),o&&a.push(fL);const g=Array.from(e.data);g.push("|O"),g.push(e.shape);let l;a.length&&(l=(u,I)=>{let h=I;for(let d of a)h=d(u,h);return h});let c=JSON.stringify(g,l,t);return A&&(c=c.replace(/[\u007F-\uFFFF]/g,u=>{const I=`0000${u.charCodeAt(0).toString(16)}`;return`\\u${I.substring(I.length-4)}`})),new TextEncoder().encode(c)}decode(e){const{strict:t}=ge(this,Hn);at(t,"JsonCodec does not yet support non-strict decoding.");const r=Is(e),A=r.pop();r.pop(),at(A,"0D not implemented for JsonCodec.");const n=Hi(A,"C");return{data:r,shape:A,stride:n}}};Kn=new WeakMap,Hn=new WeakMap;let ll=Pu;function od(i){return i instanceof XE||i instanceof mu||i instanceof kn?new Proxy(i,{get(t,r){return t.get(Number(r))},set(t,r,A){return t.set(Number(r),A),!0}}):i}function CL(i,e){let t;return i.data instanceof mu||i.data instanceof kn?t=new i.constructor(i.data.length,i.data.chars):t=new i.constructor(i.data.length),{data:t,shape:i.shape,stride:Hi(i.shape,e)}}function EL(i,e){let t=CL(i,e),r=i.shape.length,A=i.data.length,n=Array(r).fill(0),s=od(i.data),o=od(t.data);for(let a=0;a<A;a++){let g=0;for(let l=0;l<r;l++)g+=n[l]*t.stride[l];o[g]=s[a],n[0]+=1;for(let l=0;l<r;l++)if(n[l]===i.shape[l]){if(l+1===r)break;n[l]=0,n[l+1]+=1}}return t}function BL(i){let e=i.shape.length;return at(e===i.stride.length,"Shape and stride must have the same length."),i.stride.map((t,r)=>({stride:t,index:r})).sort((t,r)=>r.stride-t.stride).map(t=>t.index)}function pL(i,e){let t=BL(i);return at(t.length===e.length,"Orders must match"),t.every((r,A)=>r===e[A])}var qn,wA;const Uu=class Uu{constructor(e,t){j(this,"kind","array_to_array");ft(this,qn);ft(this,wA);let r=e.order??"C",A=t.shape.length,n=new Array(A),s=new Array(A);if(r==="C")for(let o=0;o<A;++o)n[o]=o,s[o]=o;else if(r==="F")for(let o=0;o<A;++o)n[o]=A-o-1,s[o]=A-o-1;else n=r,n.forEach((o,a)=>{at(s[o]===void 0,`Invalid permutation: ${JSON.stringify(r)}`),s[o]=a});rt(this,qn,n),rt(this,wA,s)}static fromConfig(e,t){return new Uu(e,t)}encode(e){return pL(e,ge(this,wA))?e:EL(e,ge(this,wA))}decode(e){return{data:e.data,shape:e.shape,stride:Hi(e.shape,ge(this,qn))}}};qn=new WeakMap,wA=new WeakMap;let cl=Uu;var Jn,zn;const Ou=class Ou{constructor(e){j(this,"kind","array_to_bytes");ft(this,Jn);ft(this,zn);rt(this,Jn,e),rt(this,zn,Hi(e,"C"))}static fromConfig(e,t){return new Ou(t.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let t=new TextDecoder,r=new DataView(e.buffer),A=Array(r.getUint32(0,!0)),n=4;for(let s=0;s<A.length;s++){let o=r.getUint32(n,!0);n+=4,A[s]=t.decode(e.buffer.slice(n,n+o)),n+=o}return{data:A,shape:ge(this,Jn),stride:ge(this,zn)}}};Jn=new WeakMap,zn=new WeakMap;let ul=Ou;class Su{constructor(){j(this,"kind","bytes_to_bytes")}static fromConfig(e){return new Su}encode(e){throw new Error("Zlib encoding is not enabled by default. Please register a codec with `numcodecs/zlib`.")}async decode(e){const t=await iB(e,{format:"deflate"});return new Uint8Array(t)}}function yL(){return new Map().set("blosc",()=>At(()=>import("./blosc.nNxqTOai.js"),__vite__mapDeps([32,33])).then(i=>i.default)).set("lz4",()=>At(()=>import("./lz4.COuoZ_ur.js"),__vite__mapDeps([34,33])).then(i=>i.default)).set("zstd",()=>At(()=>import("./zstd.CtzXwP91.js"),__vite__mapDeps([35,33])).then(i=>i.default)).set("gzip",()=>_u).set("zlib",()=>Su).set("transpose",()=>cl).set("bytes",()=>xo).set("crc32c",()=>wu).set("vlen-utf8",()=>ul).set("json2",()=>ll).set("bitround",()=>Qu)}const mL=yL();function hl(i){let e;return{async encode(t){e||(e=await ad(i));for(const A of e.array_to_array)t=await A.encode(t);let r=await e.array_to_bytes.encode(t);for(const A of e.bytes_to_bytes)r=await A.encode(r);return r},async decode(t){e||(e=await ad(i));for(let A=e.bytes_to_bytes.length-1;A>=0;A--)t=await e.bytes_to_bytes[A].decode(t);let r=await e.array_to_bytes.decode(t);for(let A=e.array_to_array.length-1;A>=0;A--)r=await e.array_to_array[A].decode(r);return r}}}async function ad(i){let e=i.codecs.map(async n=>{var o;let s=await((o=mL.get(n.name))==null?void 0:o());return at(s,`Unknown codec: ${n.name}`),{Codec:s,meta:n}}),t=[],r,A=[];for await(let{Codec:n,meta:s}of e){let o=n.fromConfig(s.configuration,i);switch(o.kind){case"array_to_array":t.push(o);break;case"array_to_bytes":r=o;break;default:A.push(o)}}return r||(at(QL(i),`Cannot encode ${i.data_type} to bytes without a codec`),r=xo.fromConfig({endian:"little"},i)),{array_to_array:t,array_to_bytes:r,bytes_to_bytes:A}}function QL(i){return i.data_type!=="v2:object"&&i.data_type!=="string"}class ds extends Error{constructor(e,t={}){super(`Node not found: ${e}`,t),this.name="NodeNotFoundError"}}class bu extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const gd=18446744073709551615n;function wL(i,e,t,r){at(i.store.getRange,"Store does not support range requests");let A=i.store.getRange.bind(i.store),n=e.map((a,g)=>a/r.chunk_shape[g]),s=hl({data_type:"uint64",shape:[...n,2],codecs:r.index_codecs}),o={};return async(a,g)=>{let l=a.map((B,m)=>Math.floor(B/n[m])),c=i.resolve(t(l)).path,u;if(c in o)u=o[c];else{let B=4,m=16*n.reduce((y,Q)=>y*Q,1),p=await A(c,{suffixLength:m+B},g);u=o[c]=p?await s.decode(p):null}if(u===null)return;let{data:I,shape:h,stride:d}=u,f=a.map((B,m)=>B%h[m]).reduce((B,m,p)=>B+m*d[p],0),C=I[f],E=I[f+1];if(!(C===gd&&E===gd))return A(c,{offset:Number(C),length:Number(E)},g)}}class jA{constructor(e,t="/"){j(this,"store");j(this,"path");this.store=e,this.path=t}resolve(e){let t=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new jA(this.store,decodeURIComponent(new URL(e,t).pathname))}}var jn;class Ru extends jA{constructor(t,r,A){super(t,r);j(this,"kind","group");ft(this,jn);rt(this,jn,A)}get attrs(){return ge(this,jn).attributes}}jn=new WeakMap;function ld(i){var t;const e=i.find(r=>r.name==="transpose");return((t=e==null?void 0:e.configuration)==null?void 0:t.order)??"C"}const cn=Symbol("zarrita.context");function _L(i){return i[cn]}function SL(i,e){let{configuration:t}=e.codecs.find(hL)??{},r={encode_chunk_key:aL(e.chunk_key_encoding),TypedArray:eB(e.data_type),fill_value:e.fill_value};if(t){let n=ld(t.codecs);return{...r,kind:"sharded",chunk_shape:t.chunk_shape,codec:hl({data_type:e.data_type,shape:t.chunk_shape,codecs:t.codecs}),get_strides(s){return Hi(s,n)},get_chunk_bytes:wL(i,e.chunk_grid.configuration.chunk_shape,r.encode_chunk_key,t)}}let A=ld(e.codecs);return{...r,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:hl({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(n){return Hi(n,A)},async get_chunk_bytes(n,s){let o=r.encode_chunk_key(n),a=i.resolve(o).path;return i.store.get(a,s)}}}var bd,Rd,Ri,Dd;let To=(Dd=class extends(Rd=jA,bd=cn,Rd){constructor(t,r,A){super(t,r);j(this,"kind","array");ft(this,Ri);j(this,bd);rt(this,Ri,{...A,fill_value:tB(A)}),this[cn]=SL(this,A)}get attrs(){return ge(this,Ri).attributes}get shape(){return ge(this,Ri).shape}get chunks(){return this[cn].chunk_shape}get dtype(){return ge(this,Ri).data_type}async getChunk(t,r){let A=this[cn],n=await A.get_chunk_bytes(t,r);if(!n){let s=A.chunk_shape.reduce((a,g)=>a*g,1),o=new A.TypedArray(s);return o.fill(A.fill_value),{data:o,shape:A.chunk_shape,stride:A.get_strides(A.chunk_shape)}}return A.codec.decode(n)}is(t){return uL(this.dtype,t)}},Ri=new WeakMap,Dd);function*bL(i,e,t=1){e===void 0&&(e=i,i=0);for(let r=i;r<e;r+=t)yield r}function*RL(...i){if(i.length===0)return;const e=i.map(r=>r[Symbol.iterator]()),t=e.map(r=>r.next());if(t.some(r=>r.done))throw new Error("Input contains an empty iterator.");for(let r=0;;){if(t[r].done){if(e[r]=i[r][Symbol.iterator](),t[r]=e[r].next(),++r>=e.length)return}else yield t.map(({value:A})=>A),r=0;t[r]=e[r].next()}}function DL({start:i,stop:e,step:t},r){if(t===0)throw new Error("slice step cannot be zero");t=t??1;const A=t<0,[n,s]=A?[-1,r-1]:[0,r];return i===null?i=A?s:n:i<0?(i+=r,i<n&&(i=n)):i>s&&(i=s),e===null?e=A?n:s:e<0?(e+=r,e<n&&(e=n)):e>s&&(e=s),[i,e,t]}function Fo(i,e,t=null){return e===void 0&&(e=i,i=null),{start:i,stop:e,step:t}}function xL(){const i=[];return{add:e=>i.push(e()),onIdle:()=>Promise.all(i)}}class Du extends Error{constructor(e){super(e),this.name="IndexError"}}function TL(i,e){throw new Du(`too many indicies for array; expected ${e.length}, got ${i.length}`)}function FL(i){throw new Du(`index out of bounds for dimension with length ${i}`)}function LL(){throw new Du("only slices with step >= 1 are supported")}function NL(i,e){i.length>e.length&&TL(i,e)}function GL(i,e){return i=Math.trunc(i),i<0&&(i=e+i),(i>=e||i<0)&&FL(e),i}class vL{constructor({dim_sel:e,dim_len:t,dim_chunk_len:r}){j(this,"dim_sel");j(this,"dim_len");j(this,"dim_chunk_len");j(this,"nitems");e=GL(e,t),this.dim_sel=e,this.dim_len=t,this.dim_chunk_len=r,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),t=e*this.dim_chunk_len,r=this.dim_sel-t;yield{dim_chunk_ix:e,dim_chunk_sel:r}}}class cd{constructor({dim_sel:e,dim_len:t,dim_chunk_len:r}){j(this,"start");j(this,"stop");j(this,"step");j(this,"dim_len");j(this,"dim_chunk_len");j(this,"nitems");j(this,"nchunks");const[A,n,s]=DL(e,t);this.start=A,this.stop=n,this.step=s,this.step<1&&LL(),this.dim_len=t,this.dim_chunk_len=r,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),t=Math.ceil(this.stop/this.dim_chunk_len);for(const r of bL(e,t)){const A=r*this.dim_chunk_len,n=Math.min(this.dim_len,(r+1)*this.dim_chunk_len),s=n-A;let o=0,a=0;if(this.start<A){const I=(A-this.start)%this.step;I&&(a+=this.step-I),o=Math.ceil((A-this.start)/this.step)}else a=this.start-A;const g=this.stop>n?s:this.stop-A,l=[a,g,this.step],c=Math.ceil((g-a)/this.step),u=[o,o+c,1];yield{dim_chunk_ix:r,dim_chunk_sel:l,dim_out_sel:u}}}}function ML(i,e){let t=[];return i===null?t=e.map(r=>Fo(null)):Array.isArray(i)&&(t=i.map(r=>r??Fo(null))),NL(t,e),t}class kL{constructor({selection:e,shape:t,chunk_shape:r}){j(this,"dim_indexers");j(this,"shape");this.dim_indexers=ML(e,t).map((A,n)=>new(typeof A=="number"?vL:cd)({dim_sel:A,dim_len:t[n],dim_chunk_len:r[n]})),this.shape=this.dim_indexers.filter(A=>A instanceof cd).map(A=>A.nitems)}*[Symbol.iterator](){for(const e of RL(...this.dim_indexers)){const t=e.map(A=>A.dim_chunk_ix),r=e.map(A=>"dim_out_sel"in A?{from:A.dim_chunk_sel,to:A.dim_out_sel}:{from:A.dim_chunk_sel,to:null});yield{chunk_coords:t,mapping:r}}}}function PL(i,e){return"get"in i?i.get(e):i[e]}async function UL(i,e,t,r){var a;let A=_L(i),n=new kL({selection:e,shape:i.shape,chunk_shape:i.chunks}),s=r.prepare(new A.TypedArray(n.shape.reduce((g,l)=>g*l,1)),n.shape,A.get_strides(n.shape)),o=((a=t.create_queue)==null?void 0:a.call(t))??xL();for(const{chunk_coords:g,mapping:l}of n)o.add(async()=>{let{data:c,shape:u,stride:I}=await i.getChunk(g,t.opts),h=r.prepare(c,u,I);r.set_from_chunk(s,h,l)});return await o.onIdle(),n.shape.length===0?PL(s.data,0):s}function xu(i,e=0,t){let r=t??i.length-e;return{length:r,subarray(A,n=r){return xu(i,e+A,n-A)},set(A,n=0){for(let s=0;s<A.length;s++)i[e+n+s]=A.get(s)},get(A){return i[e+A]}}}function dg(i){return globalThis.Array.isArray(i.data)?{data:xu(i.data),stride:i.stride,bytes_per_element:1}:{data:new Uint8Array(i.data.buffer,i.data.byteOffset,i.data.byteLength),stride:i.stride,bytes_per_element:i.data.BYTES_PER_ELEMENT}}function OL(i){return"chars"in i?i.constructor.bind(null,i.chars):i.constructor}function YL(i,e){if(globalThis.Array.isArray(i.data))return xu([e]);let t=OL(i.data),r=new t([e]);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}const KL={prepare(i,e,t){return{data:i,shape:e,stride:t}},set_scalar(i,e,t){let r=dg(i);Il(r,e,YL(i,t),r.bytes_per_element)},set_from_chunk(i,e,t){let r=dg(i);qs(r,dg(e),r.bytes_per_element,t)}};async function HL(i,e=null,t={}){return UL(i,e,t,KL)}function AB(i,e,t){return t<0&&e<i?Math.floor((i-e-1)/-t)+1:i<e?Math.floor((e-i-1)/t)+1:0}function Il(i,e,t,r){if(e.length===0){i.data.set(t,0);return}const[A,...n]=e,[s,...o]=i.stride;if(typeof A=="number"){const u=i.data.subarray(s*A*r);Il({data:u,stride:o},n,t,r);return}const[a,g,l]=A,c=AB(a,g,l);if(n.length===0){for(let u=0;u<c;u++)i.data.set(t,s*(a+l*u)*r);return}for(let u=0;u<c;u++){const I=i.data.subarray(s*(a+l*u)*r);Il({data:I,stride:o},n,t,r)}}function qs(i,e,t,r){const[A,...n]=r,[s,...o]=i.stride,[a,...g]=e.stride;if(A.from===null){if(n.length===0){i.data.set(e.data.subarray(0,t),A.to*t);return}qs({data:i.data.subarray(s*A.to*t),stride:o},e,t,n);return}if(A.to===null){if(n.length===0){let C=A.from*t;i.data.set(e.data.subarray(C,C+t),0);return}qs(i,{data:e.data.subarray(a*A.from*t),stride:g},t,n);return}const[l,c,u]=A.to,[I,h,d]=A.from,f=AB(l,c,u);if(n.length===0){if(u===1&&d===1&&s===1&&a===1){let C=I*t,E=f*t;i.data.set(e.data.subarray(C,C+E),l*t);return}for(let C=0;C<f;C++){let E=a*(I+d*C)*t;i.data.set(e.data.subarray(E,E+t),s*(l+u*C)*t)}return}for(let C=0;C<f;C++)qs({data:i.data.subarray(s*(l+C*u)*t),stride:o},{data:e.data.subarray(a*(I+C*d)*t),stride:g},t,n)}let _a=qL();function qL(){let i=new WeakMap;function e(t){let r=i.get(t)??{v2:0,v3:0};return i.set(t,r),r}return{increment(t,r){e(t)[r]+=1},version_max(t){let r=e(t);return r.v3>r.v2?"v3":"v2"}}}async function JL(i){let e=await i.store.get(i.resolve(".zattrs").path);return e?Is(e):{}}async function zL(i,e={}){let t="store"in i?i:new jA(i),r={};return(e.attrs??!0)&&(r=await JL(t)),e.kind==="array"?ud(t,r):e.kind==="group"?hd(t,r):ud(t,r).catch(A=>(rB(A,ds),hd(t,r)))}async function ud(i,e){let{path:t}=i.resolve(".zarray"),r=await i.store.get(t);if(!r)throw new ds("v2 array",{cause:new bu(t)});return _a.increment(i.store,"v2"),new To(i.store,i.path,lL(Is(r),e))}async function hd(i,e){let{path:t}=i.resolve(".zgroup"),r=await i.store.get(t);if(!r)throw new ds("v2 group",{cause:new bu(t)});return _a.increment(i.store,"v2"),new Ru(i.store,i.path,cL(Is(r),e))}async function jL(i){let{store:e,path:t}=i.resolve("zarr.json"),r=await i.store.get(t);if(!r)throw new ds("v3 array or group",{cause:new bu(t)});let A=Is(r);return A.node_type==="array"&&(A.fill_value=tB(A)),A.node_type==="array"?new To(e,i.path,A):new Ru(e,i.path,A)}async function VL(i,e={}){let t="store"in i?i:new jA(i),r=await jL(t);if(_a.increment(t.store,"v3"),e.kind===void 0||e.kind==="array"&&r instanceof To||e.kind==="group"&&r instanceof Ru)return r;let A=r instanceof To?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${A}.`)}async function Or(i,e={}){let t="store"in i?i.store:i,r=_a.version_max(t),A=r==="v2"?Or.v2:Or.v3,n=r==="v2"?Or.v3:Or.v2;return A(i,e).catch(s=>(rB(s,ds),n(i,e)))}Or.v2=zL;Or.v3=VL;function Tu(i,e,t,r){const A=document.createElement("script"),n="olc_"+me(e);function s(){delete window[n],A.parentNode.removeChild(A)}A.async=!0,A.src=i+(i.includes("?")?"&":"?")+"callback="+n;const o=setTimeout(function(){s(),t&&t()},1e4);window[n]=function(a){clearTimeout(o),s(),e(a)},document.head.appendChild(A)}class $L extends Error{constructor(e){const t="Unexpected response status: "+e.status;super(t),this.name="ResponseError",this.response=e}}class ZL extends Error{constructor(e){super("Failed to issue request"),this.name="ClientError",this.client=e}}function nB(i){return new Promise(function(e,t){function r(s){const o=s.target;if(!o.status||o.status>=200&&o.status<300){let a;try{a=JSON.parse(o.responseText)}catch(g){const l="Error parsing response text as JSON: "+g.message;t(new Error(l));return}e(a);return}t(new $L(o))}function A(s){t(new ZL(s.target))}const n=new XMLHttpRequest;n.addEventListener("load",r),n.addEventListener("error",A),n.open("GET",i),n.setRequestHeader("Accept","application/json"),n.send()})}function sB(i,e){return e.includes("://")?e:new URL(e,i).href}const WL={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},XL={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function oB(i,e){if(!e.length)return i;const t=new URL(i,"file:/");if(t.pathname.split("/").includes("collections"))return wn('The "collections" query parameter cannot be added to collection endpoints'),i;const r=e.map(s=>encodeURIComponent(s)).join(",");t.searchParams.append("collections",r);const A=i.split("?")[0],n=decodeURIComponent(t.searchParams.toString());return`${A}?${n}`}function eN(i,e,t){let r,A;for(let n=0;n<i.length;++n){const s=i[n];if(s.rel==="item"){if(s.type===e){r=s.href;break}(WL[s.type]||!A&&s.type.startsWith("image/"))&&(A=s.href)}}if(!r)if(A)r=A;else throw new Error('Could not find "item" link');return t&&(r=oB(r,t)),r}function tN(i,e,t,r){let A,n;const s={};for(let o=0;o<i.length;++o){const a=i[o];if(s[a.type]=a.href,a.rel==="item"){if(a.type===e){A=a.href;break}XL[a.type]&&(n=a.href)}}if(!A&&t)for(let o=0;o<t.length;++o){const a=t[o];if(s[a]){A=s[a];break}}if(!A)if(n)A=n;else throw new Error('Could not find "item" link');return r&&(A=oB(A,r)),A}function dl(i,e,t,r){let A=i.projection;if(!A&&(typeof e.crs=="string"?A=pe(e.crs):"uri"in e.crs&&(A=pe(e.crs.uri)),!A))throw new Error(`Unsupported CRS: ${JSON.stringify(e.crs)}`);const n=e.orderedAxes,o=!(n?n.slice(0,2).map(y=>y.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):A.getAxisOrientation()).startsWith("en"),a=e.tileMatrices.sort(function(y,Q){return Q.cellSize-y.cellSize}),g={};for(let y=0;y<a.length;++y){const Q=a[y];g[Q.id]=Q}const l={},c=[];if(r)for(let y=0;y<r.length;++y){const Q=r[y],_=Q.tileMatrix,w=g[_],S=a.indexOf(w);c[S]=_,l[_]=Q}else for(let y=0;y<a.length;++y){const Q=a[y].id;c.push(Q)}const u=c.length,I=new Array(u),h=new Array(u),d=new Array(u),f=new Array(u),C=[-1/0,-1/0,1/0,1/0];for(let y=0;y<u;++y){const Q=c[y],_=g[Q],w=_.pointOfOrigin;o?I[y]=[w[1],w[0]]:I[y]=w,h[y]=_.cellSize,d[y]=[_.matrixWidth,_.matrixHeight],f[y]=[_.tileWidth,_.tileHeight];const S=l[Q];if(S){const R=_.cellSize*_.tileWidth,F=I[y][0]+S.minTileCol*R,M=I[y][0]+(S.maxTileCol+1)*R,G=_.cellSize*_.tileHeight,x=_.cornerOfOrigin==="bottomLeft";let N,v;x?(N=I[y][1]+S.minTileRow*G,v=I[y][1]+(S.maxTileRow+1)*G):(N=I[y][1]-(S.maxTileRow+1)*G,v=I[y][1]-S.minTileRow*G),br(C,[F,N,M,v],C)}}const E=new vl({origins:I,resolutions:h,sizes:d,tileSizes:f,extent:r?C:void 0,matrixIds:c});if(!t)return{grid:E,projection:A};const B=i.context,m=i.url;function p(y,Q,_){if(!y)return;const w=c[y[0]],S=g[w],R=S.cornerOfOrigin==="bottomLeft",F={tileMatrix:w,tileCol:y[1],tileRow:R?-y[2]-1:y[2]};if(r){const G=l[S.id];if(F.tileCol<G.minTileCol||F.tileCol>G.maxTileCol||F.tileRow<G.minTileRow||F.tileRow>G.maxTileRow)return}Object.assign(F,{z:F.tileMatrix,x:F.tileCol,y:F.tileRow},B);const M=t.replace(/\{(\w+?)\}/g,function(G,x){return F[x]});return sB(m,M)}return{grid:E,projection:A,urlTemplate:t,urlFunction:p}}function rN(i,e){const t=e.tileMatrixSetLimits;let r;if(e.dataType==="map")r=eN(e.links,i.mediaType,i.collections);else if(e.dataType==="vector")r=tN(e.links,i.mediaType,i.supportedMediaTypes,i.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(e.tileMatrixSet)return dl(i,e.tileMatrixSet,r,t);const A=e.links.find(o=>o.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!A)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const n=A.href,s=sB(i.url,n);return nB(s).then(function(o){return dl(i,o,r,t)})}function aB(i){return nB(i.url).then(function(e){return rN(i,e)})}const iN=["d35379db-88df-4056-af3a-620245f8e347","f17cb550-5864-4468-aeb7-f3180cfb622f","689b58e2-cf7b-45e0-9fff-9cfc0883d6b4"];class AN extends hs{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,wrapX:e.wrapX}),this.url_=e.url,this.group_=e.group,this.error_=null,this.root_=null,this.consolidatedMetadata_=null,this.bands_=e.bands,this.bandsByLevel_=null,this.fillValue_,this.resampleMethod_=e.resample||"linear",this.bandCount=this.bands_.length,this.setLoader(this.loadTile_.bind(this)),this.tileGrid,this.configure_().then(()=>{this.setState("ready")}).catch(t=>{this.error_=t,this.setState("error")})}async configure_(){const e=new em(this.url_);this.root_=await Or(e,{kind:"group"});try{this.consolidatedMetadata_=JSON.parse(new TextDecoder().decode(await e.get(this.root_.resolve("zarr.json").path))).consolidated_metadata.metadata}catch{}const r=(await Or(this.root_.resolve(this.group_),{kind:"group"})).attrs;if("zarr_conventions"in r&&Array.isArray(r.zarr_conventions)&&iN.every(n=>r.zarr_conventions.find(s=>s.uuid===n))&&"layout"in r.multiscales){const{tileGrid:n,projection:s,bandsByLevel:o,fillValue:a}=nN(r,this.consolidatedMetadata_,this.group_,this.bands_);this.bandsByLevel_=o,this.tileGrid=n,this.projection=s,this.fillValue_=a}if("tile_matrix_set"in r.multiscales){const{tileGrid:n,projection:s}=sN(r);this.tileGrid=n,this.projection||(this.projection=s)}if(!this.tileGrid)throw new Error("Could not determine tile grid");const A=this.tileGrid.getExtent();setTimeout(()=>{this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:this.tileGrid.getResolutions(),center:Yd(Yr(A),this.projection),extent:Od(A,this.projection),zoom:1})})}async loadTile_(e,t,r,A){const n=this.tileGrid.getResolutions(),s=this.tileGrid.getResolution(e),o=this.tileGrid.getTileCoordExtent([e,t,r]),a=[],g=[];for(const I of this.bands_){let h,d,f=0;if(!this.bandsByLevel_)h=this.tileGrid.getMatrixId(e),d=s,f=e;else for(let _=0;_<n.length;_+=1){const w=n[_];if(h&&w<s)break;const S=this.tileGrid.getMatrixId(_);this.bandsByLevel_[S].includes(I)&&(h=S,d=this.tileGrid.getResolution(_),f=_)}if(!h||!d)throw new Error(`Could not find available resolution for band ${I}`);const C=this.tileGrid.getOrigin(f),E=Math.round((o[0]-C[0])/d),B=Math.round((o[2]-C[0])/d),m=Math.round((C[1]-o[3])/d),p=Math.round((C[1]-o[1])/d),y=`${this.group_}/${h}/${I}`,Q=await Or(this.root_.resolve(y),{kind:"array"});a.push(HL(Q,[Fo(m,p),Fo(E,B)])),g.push(d)}const l=await Promise.all(a),[c,u]=gr(this.tileGrid.getTileSize(e));return oN(l,g,c,u,s,this.resampleMethod_,this.fillValue_||0)}}function nN(i,e,t,r){const A=i.multiscales,n=i["spatial:bbox"],s=pe(i["proj:code"]),o=[],a=e?{}:null;let g;for(const c of A.layout){const u=c["spatial:transform"],I=u[0],h=[u[2],u[5]],d=c.asset;if(o.push({matrixId:d,resolution:I,origin:h}),e){const f=[];for(const C of r){const E=e[`${t}/${d}/${C}`];E&&(f.push(C),g===void 0&&(g=E.fill_value))}a[d]=f}}return o.sort((c,u)=>u.resolution-c.resolution),{tileGrid:new vl({extent:n,origins:o.map(c=>c.origin),resolutions:o.map(c=>c.resolution),matrixIds:o.map(c=>c.matrixId)}),projection:s,bandsByLevel:a,fillValue:g}}function sN(i){const e=i.multiscales,t=e.tile_matrix_set,r=e.tile_matrix_limits,A=t.tileMatrices.length,n=new Array(A);let s=!1;for(let g=0;g<A;g+=1){const l=t.tileMatrices[g],c=l.id;(l.tileWidth>512||l.tileHeight>512)&&(s=!0),n[g]=r[c]}const o=dl({},t,void 0,n);let a=o.grid;return s&&(a=new vl({tileSize:512,extent:a.getExtent(),origins:a.getOrigins(),resolutions:a.getResolutions(),matrixIds:a.getMatrixIds()})),{tileGrid:a,projection:o.projection}}function oN(i,e,t,r,A,n,s){const o=i.length,a=new Float32Array(t*r*o);for(let g=0;g<r;g++)for(let l=0;l<t;l++)for(let c=0;c<o;++c){const u=i[c],I=u.shape[0],h=u.shape[1],d=A/e[c];let f=s;if(d===1)g<I&&l<h&&(f=u.data[g*h+l]);else{const C=g*d,E=l*d;switch(n){case"nearest":{const B=Math.round(C),m=Math.round(E);B<I&&m<h&&(f=u.data[B*h+m]);break}case"linear":{const B=Math.floor(C),m=Math.floor(E);if(B<I&&m<h){const p=Math.min(B+1,I-1),y=Math.min(m+1,h-1),Q=u.data[B*h+m],_=u.data[B*h+y],w=u.data[p*h+m],S=u.data[p*h+y],R=E-m,F=C-B;f=(1-F)*((1-R)*Q+R*_)+F*((1-R)*w+R*S)}break}default:throw new Error(`Unsupported resample method: ${n}`)}}isNaN(f)&&(f=s),a[o*(g*t+l)+c]=f}return a}const aN=22;class gN extends jr{constructor(e){const t=!!e.highDpi;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const r={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(r.imageFormat=e.imageFormat),e.scale&&(r.scale=e.scale),t&&(r.highDpi=!0),e.layerTypes&&(r.layerTypes=e.layerTypes),e.styles&&(r.styles=e.styles),e.overlay===!0&&(r.overlay=!0),e.apiOptions&&(r.apiOptions=e.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_;const A=e.url||"https://tile.googleapis.com/";this.createSessionUrl_=A+"v1/createSession",this.tileUrl_=A+"v1/2dtiles",this.attributionUrl_=A+"tile/v1/viewport",this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e=this.createSessionUrl_+"?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(e,t);if(!r.ok){try{const u=await r.json();this.error_=new Error(u.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const A=await r.json(),n=this.getTilePixelRatio(1),s=[A.tileWidth/n,A.tileHeight/n];this.tileGrid=Xn({extent:Wn(this.getProjection()),maxZoom:aN,tileSize:s});const o=A.session;this.sessionTokenValue_=o;const a=this.apiKey_,g=this.tileUrl_;this.tileUrlFunction=function(u,I,h){const d=u[0],f=u[1],C=u[2];return`${g}/${d}/${f}/${C}?session=${o}&key=${a}`};const l=parseInt(A.expiry,10)*1e3,c=Math.max(l-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),c),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[Ii.ANIMATING]||e.viewHints[Ii.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,r]=eh(Sp(e.extent),e.viewState.projection),[A,n]=eh(bp(e.extent),e.viewState.projection),a=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${n}&south=${r}&east=${A}&west=${t}`;if(this.previousViewportExtent_==a)return this.previousViewportAttribution_;this.previousViewportExtent_=a;const g=this.sessionTokenValue_,l=this.apiKey_,u=`${this.attributionUrl_}?session=${g}&key=${l}&${a}`;return this.previousViewportAttribution_=await fetch(u).then(I=>I.json()).then(I=>I.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let gB=class extends bl{constructor(e,t,r,A,n,s,o){super(t,r,A,n,s,o),this.zoomifyImage_=null,this.tileSize_=e}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=super.getImage();if(this.state==Ie.LOADED){const t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;const r=hi(t[0],t[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e}};class lN extends jr{constructor(e){const t=e.size,r=e.tierSizeCalculation!==void 0?e.tierSizeCalculation:"default",A=e.tilePixelRatio||1,n=t[0],s=t[1],o=[],a=e.tileSize||_g;let g=a*A;switch(r){case"default":for(;n>g||s>g;)o.push([Math.ceil(n/g),Math.ceil(s/g)]),g+=g;break;case"truncated":let y=n,Q=s;for(;y>g||Q>g;)o.push([Math.ceil(y/g),Math.ceil(Q/g)]),y>>=1,Q>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}o.push([1,1]),o.reverse();const l=[A],c=[0];for(let y=1,Q=o.length;y<Q;y++)l.push(A<<y),c.push(o[y-1][0]*o[y-1][1]+c[y-1]);l.reverse();const u=new Gl({tileSize:a,extent:e.extent||[0,-s,n,0],resolutions:l});let I=e.url;I&&!I.includes("{TileGroup}")&&!I.includes("{tileIndex}")&&(I+="{TileGroup}/{z}-{x}-{y}.jpg");const h=Kd(I);let d=a*A;function f(y){return function(Q,_,w){if(!Q)return;const S=Q[0],R=Q[1],F=Q[2],M=R+F*o[S][0],G=(M+c[S])/d|0,x={z:S,x:R,y:F,tileIndex:M,TileGroup:"TileGroup"+G};return y.replace(/\{(\w+?)\}/g,function(N,v){return x[v]})}}const C=Fl(h.map(f)),E=gB.bind(null,gr(a*A));super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:A,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:E,tileGrid:u,tileUrlFunction:C,transition:e.transition}),this.zDirection=e.zDirection;const B=u.getTileCoordForCoordAndResolution(Yr(u.getExtent()),l[l.length-1]),m=C(B,1,null),p=new Image;p.addEventListener("error",()=>{d=a,this.changed()}),p.src=m}}function rn(i){return i.toLocaleString("en",{maximumFractionDigits:10})}class cN extends jr{constructor(e){const t=e||{};let r=t.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const A=t.version||nt.VERSION2,n=t.sizes||[],s=t.size;er(s!=null&&Array.isArray(s)&&s.length==2&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,"Missing or invalid `size`");const o=s[0],a=s[1],g=t.tileSize,l=t.tilePixelRatio||1,c=t.format||"jpg",u=t.quality||(t.version==nt.VERSION1?"native":"default");let I=t.resolutions||[];const h=t.supports||[],d=t.extent||[0,-a,o,0],f=n!=null&&Array.isArray(n)&&n.length>0,C=g!==void 0&&(typeof g=="number"&&Number.isInteger(g)&&g>0||Array.isArray(g)&&g.length>0),E=h!=null&&Array.isArray(h)&&(h.includes("regionByPx")||h.includes("regionByPct"))&&(h.includes("sizeByWh")||h.includes("sizeByH")||h.includes("sizeByW")||h.includes("sizeByPct"));let B,m,p;if(I.sort(function(w,S){return S-w}),C||E)if(g!=null&&(typeof g=="number"&&Number.isInteger(g)&&g>0?(B=g,m=g):Array.isArray(g)&&g.length>0&&((g.length==1||g[1]==null&&Number.isInteger(g[0]))&&(B=g[0],m=g[0]),g.length==2&&(Number.isInteger(g[0])&&Number.isInteger(g[1])?(B=g[0],m=g[1]):g[0]==null&&Number.isInteger(g[1])&&(B=g[1],m=g[1])))),(B===void 0||m===void 0)&&(B=_g,m=_g),I.length==0){p=Math.max(Math.ceil(Math.log(o/B)/Math.LN2),Math.ceil(Math.log(a/m)/Math.LN2));for(let w=p;w>=0;w--)I.push(Math.pow(2,w))}else{const w=Math.max(...I);p=Math.round(Math.log(w)/Math.LN2)}else if(B=o,m=a,I=[],f){n.sort(function(S,R){return S[0]-R[0]}),p=-1;const w=[];for(let S=0;S<n.length;S++){const R=o/n[S][0];if(I.length>0&&I[I.length-1]==R){w.push(S);continue}I.push(R),p++}if(w.length>0)for(let S=0;S<w.length;S++)n.splice(w[S]-S,1)}else I.push(1),n.push([o,a]),p=0;const y=new Gl({tileSize:[B,m],extent:d,origin:wg(d),resolutions:I}),Q=function(w,S,R){let F,M;const G=w[0];if(G>p)return;const x=w[1],N=w[2],v=I[G];if(!(x===void 0||N===void 0||v===void 0||x<0||Math.ceil(o/v/B)<=x||N<0||Math.ceil(a/v/m)<=N)){if(E||C){const z=x*B*v,q=N*m*v;let $=B*v,re=m*v,Qe=B,te=m;if(z+$>o&&($=o-z),q+re>a&&(re=a-q),z+B*v>o&&(Qe=Math.floor((o-z+v-1)/v)),q+m*v>a&&(te=Math.floor((a-q+v-1)/v)),z==0&&$==o&&q==0&&re==a)F="full";else if(!E||h.includes("regionByPx"))F=z+","+q+","+$+","+re;else if(h.includes("regionByPct")){const P=rn(z/o*100),Me=rn(q/a*100),Le=rn($/o*100),fe=rn(re/a*100);F="pct:"+P+","+Me+","+Le+","+fe}A==nt.VERSION3&&(!E||h.includes("sizeByWh"))?M=Qe+","+te:!E||h.includes("sizeByW")?M=Qe+",":h.includes("sizeByH")?M=","+te:h.includes("sizeByWh")?M=Qe+","+te:h.includes("sizeByPct")&&(M="pct:"+rn(100/v))}else if(F="full",f){const z=n[G][0],q=n[G][1];A==nt.VERSION3?z==o&&q==a?M="max":M=z+","+q:z==o?M="full":M=z+","}else M=A==nt.VERSION3?"max":"full";return r+F+"/"+M+"/0/"+u+"."+c}},_=gB.bind(null,gr(g||256).map(function(w){return w*l}));super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:_,tileGrid:y,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:Q,transition:t.transition}),this.zDirection=t.zDirection}}function lB(i,e,t,r,A,n){const s=A.getCode().split(/:(?=\d+$)/).pop(),o=t/r,a=[th(Bt(e)/o,rh),th(fr(e)/o,rh)];n.SIZE=a[0]+","+a[1],n.BBOX=e.join(","),n.BBOXSR=s,n.IMAGESR=s,n.DPI=Math.round(n.DPI?n.DPI*r:90*r);const g=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return eo(g,n)}function uN(i){const e=i.load?i.load:vA,t=pe(i.projection||"EPSG:3857"),r=i.ratio??1.5,A=i.crossOrigin??null,n=i.referrerPolicy;return function(s,o,a){a=i.hidpi?a:1;const g={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(g,i.params),s=Hd(s,o,a,r);const l=lB(i.url,s,o,a,t,g),c=new Image;return c.crossOrigin=A,n!==void 0&&(c.referrerPolicy=n),e(c,l).then(u=>{const I=Bt(s)/u.width*a;return{image:u,extent:s,resolution:I,pixelRatio:a}})}}class hN extends zi{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy_=e.referrerPolicy,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Ml,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,A){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==A)&&(this.loaderProjection_=A,this.loader=uN({crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_,params:this.params_,projection:A,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(n,s)=>(this.image.setImage(n),this.imageLoadFunction_(this.image,s),vA(n))})),super.getImageInternal(e,t,r,A))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}class IN extends zi{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,r,A){t=this.findNearestResolution(t);let n=this.canvas_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==t&&n.getPixelRatio()==r&&Js(n.getExtent(),e))return n;e=e.slice(),Pd(e,this.ratio_);const s=Bt(e)/t,o=fr(e)/t,a=[s*r,o*r],g=this.canvasFunction_.call(this,e,t,r,a,A);return g&&(n=new Nc(e,t,r,g)),this.canvas_=n,this.renderedRevision_=this.getRevision(),n}}function dN(i,e,t,r){const A=Bt(i),n=fr(i),s=e[0],o=e[1],a=.0254/r;return o*A>s*n?A*t/(s*a):n*t/(o*a)}function fN(i,e,t,r,A,n,s){const o=dN(t,r,n,s),a=Yr(t),g={OPERATION:A?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:s,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return Object.assign(g,e),eo(i,g)}function CN(i){const e=i.load||vA,t=i.useOverlay??!1,r=i.metersPerUnit||1,A=i.displayDpi||96,n=i.ratio??1,s=i.crossOrigin??null,o=i.referrerPolicy;return function(a,g,l){const c=new Image;c.crossOrigin=s,o!==void 0&&(c.referrerPolicy=o),a=Hd(a,g,l,n);const u=Bt(a)/g,I=fr(a)/g,h=[u*l,I*l],d=fN(i.url,i.params,a,h,t,r,A);return e(c,d).then(f=>({image:f,extent:a,pixelRatio:l}))}}class EN extends zi{constructor(e){super({interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy_=e.referrerPolicy,this.displayDpi_=e.displayDpi!==void 0?e.displayDpi:96,this.params_=Object.assign({},e.params),this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Ml,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.metersPerUnit_=e.metersPerUnit!==void 0?e.metersPerUnit:1,this.ratio_=e.ratio!==void 0?e.ratio:1,this.useOverlay_=e.useOverlay!==void 0?e.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,A){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==A)&&(this.loaderProjection_=A,this.loader=CN({crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(n,s)=>(this.image.setImage(n),this.imageLoadFunction_(this.image,s),vA(n))})),super.getImageInternal(e,t,r,A))}getImageLoadFunction(){return this.imageLoadFunction_}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}changed(){this.image=null,super.changed()}}function BN(i){const e=i.load||vA,t=i.imageExtent,r=i.crossOrigin??null;return()=>{const A=new Image;return A.crossOrigin=r,i.referrerPolicy!==void 0&&(A.referrerPolicy=i.referrerPolicy),e(A,i.url).then(n=>{const s=Bt(t)/n.width,o=fr(t)/n.height;return{image:n,extent:t,resolution:s!==o?[s,o]:o,pixelRatio:1}})}}class pN extends zi{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:Ml;super({attributions:e.attributions,interpolate:e.interpolate,projection:pe(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new kd(this.imageExtent_,void 0,1,BN({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,referrerPolicy:e.referrerPolicy,load:(A,n)=>(this.image.setImage(A),r(this.image,n),vA(A))})),this.image.addEventListener(Pt.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,r,A){return _A(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const yN=new Error("Image failed to load");function cB(i,e,t,r,A){return new Promise((n,s)=>{const o=new Image;o.crossOrigin=A.crossOrigin??null,A.referrerPolicy!==void 0&&(o.referrerPolicy=A.referrerPolicy),o.addEventListener("load",()=>n(o)),o.addEventListener("error",()=>s(yN)),o.src=qd(i,e,t,r,A.maxY)})}function Id(i){return function(e,t,r,A){const n=Rp(i,e,t,r);return cB(n,e,t,r,A)}}function mN(i){return function(e,t,r,A){const n=i(e,t,r,A);return cB(n,e,t,r,A)}}function dd(i){let e;if(Array.isArray(i))e=Id(i);else if(typeof i=="string"){const t=Kd(i);e=Id(t)}else if(typeof i=="function")e=mN(i);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return e}let fd=0;function Cd(i){return Array.isArray(i)?i.join(`
`):typeof i=="string"?i:(++fd,"url-function-key-"+fd)}class uB extends hs{constructor(e){e=e||{};let t=e.loader,r;e.url&&(t=dd(e.url),r=Cd(e.url));const A=t?e.state:"loading",n=e.wrapX===void 0?!0:e.wrapX;super({loader:t,key:r,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize,gutter:e.gutter,maxResolution:e.maxResolution,projection:e.projection,tileGrid:e.tileGrid,state:A,wrapX:n,transition:e.transition,interpolate:e.interpolate!==!1,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,zDirection:e.zDirection})}setUrl(e){const t=dd(e);this.setLoader(t),this.setKey(Cd(e)),this.getState()!=="ready"&&this.setState("ready")}}class QN extends jr{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,context:e.context||null,collections:e.collections};aB(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.projection=e.projection,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){wn(e),this.setState("error")}}class wN extends Dp{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null,collections:e.collections};aB(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.projection=e.projection,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){wn(e),this.setState("error")}}function hB(i){return function(e){const t=e.buffers,r=e.meta,A=e.imageOps,n=e.width,s=e.height,o=t.length,a=t[0].byteLength;if(A){const u=new Array(o);for(let h=0;h<o;++h)u[h]=new ImageData(new Uint8ClampedArray(t[h]),n,s);return i(u,r).data.buffer}const g=new Uint8ClampedArray(a),l=new Array(o),c=new Array(o);for(let u=0;u<o;++u)l[u]=new Uint8ClampedArray(t[u]),c[u]=[0,0,0,0];for(let u=0;u<a;u+=4){for(let h=0;h<o;++h){const d=l[h];c[h][0]=d[u],c[h][1]=d[u+1],c[h][2]=d[u+2],c[h][3]=d[u+3]}const I=i(c,r);g[u]=I[0],g[u+1]=I[1],g[u+2]=I[2],g[u+3]=I[3]}return g.buffer}}function _N(i,e){const r=Object.keys(i.lib||{}).map(function(n){return"const "+n+" = "+i.lib[n].toString()+";"}).concat(["const __minion__ = ("+hB.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),A=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return A.addEventListener("message",e),A}function SN(i,e){const t=hB(i.operation);let r=!1;return{postMessage:function(A){setTimeout(function(){r||e({data:{buffer:t(A),meta:A.meta}})},0)},terminate:function(){r=!0}}}class bN extends Nd{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let A=0;A<t;++A)r[A]=_N(e,this.onWorkerMessage_.bind(this,A));else r[0]=SN(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,A=e.inputs.map(function(a){return a.data.buffer}),n=this.workers_.length;if(this.running_=n,n===1){this.workers_[0].postMessage({buffers:A,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},A);return}const s=e.inputs[0].data.length,o=4*Math.ceil(s/4/n);for(let a=0;a<n;++a){const g=a*o,l=[];for(let c=0,u=A.length;c<u;++c)l.push(A[c].slice(g,g+o));this.workers_[a].postMessage({buffers:l,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},l)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,A;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),A=this.dataLookup_[0].meta;else{const n=e.inputs[0].data.length;r=new Uint8ClampedArray(n),A=new Array(t);const s=4*Math.ceil(n/4/t);for(let o=0;o<t;++o){const a=this.dataLookup_[o].buffer,g=o*s;r.set(new Uint8ClampedArray(a),g),A[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),A),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const Ed={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Bd extends Tp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class IB extends zi{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=xN(e.sources);const t=this.changed.bind(this);for(let r=0,A=this.layers_.length;r<A;++r)this.layers_[r].addEventListener(Pt.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new xp(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Et(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:DN(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Et(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:me(this),renderTargets:{}},this.setAttributions(function(r){var n;const A=[];for(let s=0,o=e.sources.length;s<o;++s){const a=e.sources[s],g=a instanceof kl?a:a.getSource();if(!g)continue;const l=(n=g.getAttributions())==null?void 0:n(r);typeof l=="string"?A.push(l):l!==void 0&&A.push(...l)}return A}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new bN({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const A=Object.assign({},this.frameState_);A.viewState=Object.assign({},A.viewState);const n=Yr(e);A.size[0]=Math.ceil(Bt(e)/t),A.size[1]=Math.ceil(fr(e)/t),A.extent=[n[0]-A.size[0]*t/2,n[1]-A.size[1]*t/2,n[0]+A.size[0]*t/2,n[1]+A.size[1]*t/2],A.time=Date.now();const s=A.viewState;return s.center=n,s.projection=r,s.resolution=t,A}allSourcesReady_(){let e=!0,t;for(let r=0,A=this.layers_.length;r<A;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,A){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const n=this.updateFrameState_(e,t,A);if(this.requestedFrameState_=n,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==s||!pn(n.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let n=0;n<t;++n){e.layerIndex=n,e.renderTargets={};const s=RN(this.layers_[n],e);if(s)r[n]=s;else return}const A={};this.dispatchEvent(new Bd(Ed.BEFOREOPERATIONS,e,A)),this.processor_.process(r,A,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,A){if(t||!r)return;const n=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!pn(n,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const a=Math.round(Bt(n)/s),g=Math.round(fr(n)/s);o=hi(a,g),this.renderedImageCanvas_=new Nc(n,s,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Bd(Ed.AFTEROPERATIONS,e,A))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,A=this.layers_.length;r<A&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}IB.prototype.dispose;let mi=null;function RN(i,e){const t=i.getRenderer();if(!t)throw new Error("Unsupported layer type: "+i);if(!t.prepareFrame(e))return null;const r=e.size[0],A=e.size[1];if(r===0||A===0)return null;const n=t.renderFrame(e,null);let s;if(n instanceof HTMLCanvasElement)s=n;else{if(n&&(s=n.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===r&&s.height===A)return s.getContext("2d").getImageData(0,0,r,A)}if(!mi)mi=hi(r,A,void 0,{willReadFrequently:!0});else{const o=mi.canvas;o.width!==r||o.height!==A?mi=hi(r,A,void 0,{willReadFrequently:!0}):mi.clearRect(0,0,r,A)}return mi.drawImage(s,0,0,r,A),mi.getImageData(0,0,r,A)}function DN(i){return i.map(function(e){return e.getLayerState()})}function xN(i){const e=i.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=TN(i[r]);return t}function TN(i){let e;return i instanceof kl?i instanceof Nl?e=new Fp({source:i}):i instanceof zi&&(e=new Lp({source:i})):e=i,e}const FN='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',LN='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',NN='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',GN={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_toner_dark:{extension:"png"},stamen_toner_blacklite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},vN={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_dark:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_blacklite:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class MN extends Ud{constructor(e){const t=e.layer.indexOf("-"),r=t==-1?e.layer:e.layer.slice(0,t),A=vN[r]||{minZoom:0,maxZoom:20,retina:!0},n=GN[e.layer],s=e.apiKey?"?api_key="+e.apiKey:"",o=A.retina&&e.retina?"@2x":"",a=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+o+"."+n.extension+s,g=[FN,LN,Np];e.layer.startsWith("stamen_")&&g.splice(1,0,NN),super({attributions:g,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:A.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:A.minZoom,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,tilePixelRatio:o?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}class kN extends jr{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Zn(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,r,A,n,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const g=Gp(vp(e),o.length);a=o[g]}return lB(a,r,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),A,n,s)}getTilePixelRatio(e){return this.hidpi_?e:1}setParams(e){this.params_=Object.assign({},e),this.setKey(this.getKeyForParams_())}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,r){let A=this.getTileGrid();if(A||(A=this.getTileGridForProjection(r)),A.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);const n=A.getTileCoordExtent(e,this.tmpExtent_);let s=gr(A.getTileSize(e[0]),this.tmpSize);t!=1&&(s=Mp(s,t,this.tmpSize));const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(o,this.params_),this.getRequestUrl_(e,s,n,t,r,o)}}class PN extends uB{constructor(e){e=e||{};const t=e.template||"z:{z} x:{x} y:{y}",r=e.source,A=e.color||"grey";super({transition:0,wrapX:e.wrapX!==void 0?e.wrapX:r!==void 0?r.getWrapX():void 0});const n=()=>{var o;this.projection=e.projection!==void 0?pe(e.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=e.zDirection!==void 0?e.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof hs&&(this.transformMatrix=((o=r.transformMatrix)==null?void 0:o.slice())||null);const s=this.tileGrid;s&&this.setTileSizes(s.getResolutions().map((a,g)=>gr(s.getTileSize(g)).map(l=>Math.max(Math.floor(l),1)))),this.setLoader((a,g,l,c)=>{const u=qd(t,a,g,l,c.maxY),[I,h]=this.getTileSize(a),d=hi(I,h);return d.strokeStyle=A,d.strokeRect(.5,.5,I+.5,h+.5),d.fillStyle=A,d.strokeStyle="white",d.textAlign="center",d.textBaseline="middle",d.font="24px sans-serif",d.lineWidth=4,d.strokeText(u,I/2,h/2,I),d.fillText(u,I/2,h/2,I),Promise.resolve(d.canvas)}),this.setState("ready")};if(r===void 0||r.getState()==="ready")n();else{const s=()=>{r.getState()==="ready"&&(r.removeEventListener(Pt.CHANGE,s),n())};r.addEventListener(Pt.CHANGE,s)}}}class UN extends jr{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:pe("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Tu(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=pe("EPSG:4326"),r=this.getProjection();let A;if(e.bounds!==void 0){const g=Ll(t,r);A=SA(e.bounds,g)}const n=Wn(r),s=e.minzoom||0,o=e.maxzoom||22,a=Xn({extent:n,maxZoom:o,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=a,this.tileUrlFunction=Jd(e.tiles,a),e.attribution&&!this.getAttributions()){const g=A!==void 0?A:n;this.setAttributions(function(l){return _A(g,l.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class ON extends Up{constructor(e,t,r,A,n,s){super(e,t),this.src_=r,this.extent_=A,this.preemptive_=n,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}getImage(){return null}getData(e){if(!this.grid_||!this.keys_)return null;const t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),A=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof A!="string")return null;let n=A.charCodeAt(Math.floor(t*A.length));n>=93&&n--,n>=35&&n--,n-=32;let s=null;if(n in this.keys_){const o=this.keys_[n];this.data_&&o in this.data_?s=this.data_[o]:s=o}return s}forDataAtCoordinate(e,t,r){this.state==Ie.EMPTY&&r===!0?(this.state=Ie.IDLE,Op(this,Pt.CHANGE,A=>{t(this.getData(e))}),this.loadInternal_()):r===!0?setTimeout(()=>{t(this.getData(e))},0):t(this.getData(e))}getKey(){return this.src_}handleError_(){this.state=Ie.ERROR,this.changed()}handleLoad_(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=Ie.LOADED,this.changed()}loadInternal_(){if(this.state==Ie.IDLE)if(this.state=Ie.LOADING,this.jsonp_)Tu(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(e){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(Ie.EMPTY)}}class YN extends Nl{constructor(e){if(super({projection:pe("EPSG:3857"),state:"loading",wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection}),this.preemptive_=e.preemptive!==void 0?e.preemptive:!0,this.tileUrlFunction_=kp,this.template_=void 0,this.jsonp_=e.jsonp||!1,this.tileCache_=new Gd(512),e.url)if(this.jsonp_)Tu(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(e,t,r,A){if(this.tileGrid){const n=this.tileGrid.getZForResolution(t,this.zDirection),s=this.tileGrid.getTileCoordForCoordAndZ(e,n),o=this.getTile(s[0],s[1],s[2],1,this.getProjection());o.getState()==Ie.IDLE&&o.load(),o.forDataAtCoordinate(e,r,A)}else A===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(e){const t=pe("EPSG:4326"),r=this.getProjection();let A;if(e.bounds!==void 0){const l=Ll(t,r);A=SA(e.bounds,l)}const n=Wn(r),s=e.minzoom||0,o=e.maxzoom||22,a=Xn({extent:n,maxZoom:o,minZoom:s});this.tileGrid=a,this.template_=e.template;const g=e.grids;if(!g){this.setState("error");return}if(this.tileUrlFunction_=Jd(g,a),e.attribution){const l=A!==void 0?A:n;this.setAttributions(function(c){return _A(l,c.extent)?[e.attribution]:null})}this.setState("ready")}getTile(e,t,r,A,n){const s=[e,t,r],o=this.getTileCoordForTileUrlFunction(s,n),a=this.tileUrlFunction_(o,A,n),g=`${this.getKey()},${Pp(e,t,r)}`;if(this.tileCache_.containsKey(g))return this.tileCache_.get(g);this.tileCache_.expireCache();const l=new ON(s,a!==void 0?Ie.IDLE:Ie.EMPTY,a!==void 0?a:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache_.set(g,l),l}}class KN extends wl{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const r=t.getGeometry();return er(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,r){var A;(A=this.source)==null||A.loadFeatures(e,t,r),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(Pt.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(Pt.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const r=e===0?0:Math.min(t,e)/e,A=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=t,this.interpolationRatio=r,A&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=Zn(),t=this.distance*this.resolution,r=this.source.getFeatures(),A={};for(let n=0,s=r.length;n<s;n++){const o=r[n];if(!(me(o)in A)){const a=this.geometryFunction(o);if(a){const g=a.getCoordinates();Yp(g,e),xl(e,t,e);const l=this.source.getFeaturesInExtent(e).filter(function(c){const u=me(c);return u in A?!1:(A[u]=!0,!0)});this.features.push(this.createCluster(l,e))}}}}createCluster(e,t){const r=[0,0];for(let o=e.length-1;o>=0;--o){const a=this.geometryFunction(e[o]);a?Kp(r,a.getCoordinates()):e.splice(o,1)}Hp(r,1/e.length);const A=Yr(t),n=this.interpolationRatio,s=new ar([r[0]*(1-n)+A[0]*n,r[1]*(1-n)+A[1]*n]);return this.createCustomCluster_?this.createCustomCluster_(s,e):new Ut({geometry:s,features:e})}}class Lo extends KN{constructor(e={}){super({...e,createCluster:Lo.defaultCreateCluster,geometryFunction:Lo.defaultGeometryFunction})}static defaultCreateCluster(e,t){const r=t.length===1&&t[0].getGeometry()instanceof vi?t[0].getGeometry():e,A=new Ut({geometry:r,features:t});if(t.length===1){const n=t[0];for(const s in n.getProperties())s!=="geometry"&&A.set(s,n.get(s))}return A}static defaultGeometryFunction(e){const t=e&&e.getGeometry();return t instanceof ar?t:t instanceof vi?t.getInteriorPoint():null}}class HN extends jr{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"application/xml")).then(t=>{this.handleCapabilitiesResponse(t,e)})}handleCapabilitiesResponse(e,t){const A=new dC().read(e),n=qp(A,t);this.crossOrigin=n.crossOrigin,this.projection=n.projection,this.tileGrid=n.tileGrid,this.requestEncoding_=n.requestEncoding,this.matrixSet_=n.matrixSet,this.style_=n.style,this.format_=n.format,this.dimensions_=n.dimensions,this.setUrls(n.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=Fl(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.getState()!=="ready"&&this.setState("ready")}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t==="KVP"?eo(e,r):e.replace(/\{(\w+?)\}/g,(s,o)=>o.toLowerCase()in r?r[o.toLowerCase()]:s);const A=this.tileGrid,n=this.dimensions_;return function(s){if(!s)return;const o={TileMatrix:A.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(o,n);let a=e;return t==="KVP"?a=eo(a,o):a=a.replace(/\{(\w+?)\}/g,(g,l)=>o[l]),a}}}const $t=new Uint8Array([102,103,98,3,102,103,98,0]),Rr=4,An=4,nn=4,fs=4,ii=new Int32Array(2),pd=new Float32Array(ii.buffer),yd=new Float64Array(ii.buffer),vs=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var fl;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(fl||(fl={}));class Er{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Er(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return ii[0]=this.readInt32(e),pd[0]}readFloat64(e){return ii[vs?0:1]=this.readInt32(e),ii[vs?1:0]=this.readInt32(e+4),yd[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){pd[0]=t,this.writeInt32(e,ii[0])}writeFloat64(e,t){yd[0]=t,this.writeInt32(e,ii[vs?0:1]),this.writeInt32(e+4,ii[vs?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+An+nn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<nn;t++)e+=String.fromCharCode(this.readInt8(this.position_+An+t));return e}__offset(e,t){const r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const r=this.readInt32(e);e+=An;const A=this.bytes_.subarray(e,e+r);return t===fl.UTF8_BYTES?A:this.text_decoder_.decode(A)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+An}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=nn)throw new Error("FlatBuffers: file identifier must be length "+nn);for(let t=0;t<nn;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+An+t))return!1;return!0}createScalarList(e,t){const r=[];for(let A=0;A<t;++A){const n=e(A);n!==null&&r.push(n)}return r}createObjList(e,t){const r=[];for(let A=0;A<t;++A){const n=e(A);n!==null&&r.push(n.unpack())}return r}}var Se,Ct=((Se={})[Se.Byte=0]="Byte",Se[Se.UByte=1]="UByte",Se[Se.Bool=2]="Bool",Se[Se.Short=3]="Short",Se[Se.UShort=4]="UShort",Se[Se.Int=5]="Int",Se[Se.UInt=6]="UInt",Se[Se.Long=7]="Long",Se[Se.ULong=8]="ULong",Se[Se.Float=9]="Float",Se[Se.Double=10]="Double",Se[Se.String=11]="String",Se[Se.Json=12]="Json",Se[Se.DateTime=13]="DateTime",Se[Se.Binary=14]="Binary",Se);class ct{constructor(){j(this,"bb",null);j(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsColumn(e,t){return(t||new ct).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsColumn(e,t){return e.setPosition(e.position()+fs),(t||new ct).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Ct.Byte}title(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}width(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}precision(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}scale(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}nullable(){let e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}unique(){let e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}primaryKey(){let e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}metadata(e){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}static startColumn(e){e.startObject(11)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldInt8(1,t,Ct.Byte)}static addTitle(e,t){e.addFieldOffset(2,t,0)}static addDescription(e,t){e.addFieldOffset(3,t,0)}static addWidth(e,t){e.addFieldInt32(4,t,-1)}static addPrecision(e,t){e.addFieldInt32(5,t,-1)}static addScale(e,t){e.addFieldInt32(6,t,-1)}static addNullable(e,t){e.addFieldInt8(7,+t,1)}static addUnique(e,t){e.addFieldInt8(8,+t,0)}static addPrimaryKey(e,t){e.addFieldInt8(9,+t,0)}static addMetadata(e,t){e.addFieldOffset(10,t,0)}static endColumn(e){let t=e.endObject();return e.requiredField(t,4),t}static createColumn(e,t,r,A,n,s,o,a,g,l,c,u){return ct.startColumn(e),ct.addName(e,t),ct.addType(e,r),ct.addTitle(e,A),ct.addDescription(e,n),ct.addWidth(e,s),ct.addPrecision(e,o),ct.addScale(e,a),ct.addNullable(e,g),ct.addUnique(e,l),ct.addPrimaryKey(e,c),ct.addMetadata(e,u),ct.endColumn(e)}}var he,Qt=((he={})[he.Unknown=0]="Unknown",he[he.Point=1]="Point",he[he.LineString=2]="LineString",he[he.Polygon=3]="Polygon",he[he.MultiPoint=4]="MultiPoint",he[he.MultiLineString=5]="MultiLineString",he[he.MultiPolygon=6]="MultiPolygon",he[he.GeometryCollection=7]="GeometryCollection",he[he.CircularString=8]="CircularString",he[he.CompoundCurve=9]="CompoundCurve",he[he.CurvePolygon=10]="CurvePolygon",he[he.MultiCurve=11]="MultiCurve",he[he.MultiSurface=12]="MultiSurface",he[he.Curve=13]="Curve",he[he.Surface=14]="Surface",he[he.PolyhedralSurface=15]="PolyhedralSurface",he[he.TIN=16]="TIN",he[he.Triangle=17]="Triangle",he);class xt{constructor(){j(this,"bb",null);j(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsGeometry(e,t){return(t||new xt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGeometry(e,t){return e.setPosition(e.position()+fs),(t||new xt).__init(e.readInt32(e.position())+e.position(),e)}ends(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}endsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}endsArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}xy(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}xyLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}xyArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}z(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}zLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}zArray(){let e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}m(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}mLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}mArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}t(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}tLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}tArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}tm(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}tmLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):Qt.Unknown}parts(e,t){let r=this.bb.__offset(this.bb_pos,18);return r?(t||new xt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}partsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGeometry(e){e.startObject(8)}static addEnds(e,t){e.addFieldOffset(0,t,0)}static createEndsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startEndsVector(e,t){e.startVector(4,t,4)}static addXy(e,t){e.addFieldOffset(1,t,0)}static createXyVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}static startXyVector(e,t){e.startVector(8,t,8)}static addZ(e,t){e.addFieldOffset(2,t,0)}static createZVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}static startZVector(e,t){e.startVector(8,t,8)}static addM(e,t){e.addFieldOffset(3,t,0)}static createMVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}static startMVector(e,t){e.startVector(8,t,8)}static addT(e,t){e.addFieldOffset(4,t,0)}static createTVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}static startTVector(e,t){e.startVector(8,t,8)}static addTm(e,t){e.addFieldOffset(5,t,0)}static createTmVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startTmVector(e,t){e.startVector(8,t,8)}static addType(e,t){e.addFieldInt8(6,t,Qt.Unknown)}static addParts(e,t){e.addFieldOffset(7,t,0)}static createPartsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startPartsVector(e,t){e.startVector(4,t,4)}static endGeometry(e){return e.endObject()}static createGeometry(e,t,r,A,n,s,o,a,g){return xt.startGeometry(e),xt.addEnds(e,t),xt.addXy(e,r),xt.addZ(e,A),xt.addM(e,n),xt.addT(e,s),xt.addTm(e,o),xt.addType(e,a),xt.addParts(e,g),xt.endGeometry(e)}}class or{constructor(){j(this,"bb",null);j(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFeature(e,t){return(t||new or).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFeature(e,t){return e.setPosition(e.position()+fs),(t||new or).__init(e.readInt32(e.position())+e.position(),e)}geometry(e){let t=this.bb.__offset(this.bb_pos,4);return t?(e||new xt).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}properties(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}propertiesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}propertiesArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}columns(e,t){let r=this.bb.__offset(this.bb_pos,8);return r?(t||new ct).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFeature(e){e.startObject(3)}static addGeometry(e,t){e.addFieldOffset(0,t,0)}static addProperties(e,t){e.addFieldOffset(1,t,0)}static createPropertiesVector(e,t){e.startVector(1,t.length,1);for(let r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector()}static startPropertiesVector(e,t){e.startVector(1,t,1)}static addColumns(e,t){e.addFieldOffset(2,t,0)}static createColumnsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startColumnsVector(e,t){e.startVector(4,t,4)}static endFeature(e){return e.endObject()}static finishFeatureBuffer(e,t){e.finish(t)}static finishSizePrefixedFeatureBuffer(e,t){e.finish(t,void 0,!0)}static createFeature(e,t,r,A){return or.startFeature(e),or.addGeometry(e,t),or.addProperties(e,r),or.addColumns(e,A),or.endFeature(e)}}function fg(i,e){let t=[];for(let r=0;r<i.length;r+=2){let A=[i[r],i[r+1]];e&&A.push(e[r>>1]),t.push(A)}return t}new TextEncoder;let md=new TextDecoder;function qN(i,e){let t={};if(!e||e.length===0)return t;let r=i.propertiesArray();if(!r)return t;let A=new DataView(r.buffer,r.byteOffset),n=i.propertiesLength(),s=0;for(;s<n;){let o=A.getUint16(s,!0);s+=2;let a=e[o],g=a.name;switch(a.type){case Ct.Bool:t[g]=!!A.getUint8(s),s+=1;break;case Ct.Byte:t[g]=A.getInt8(s),s+=1;break;case Ct.UByte:t[g]=A.getUint8(s),s+=1;break;case Ct.Short:t[g]=A.getInt16(s,!0),s+=2;break;case Ct.UShort:t[g]=A.getUint16(s,!0),s+=2;break;case Ct.Int:t[g]=A.getInt32(s,!0),s+=4;break;case Ct.UInt:t[g]=A.getUint32(s,!0),s+=4;break;case Ct.Long:t[g]=Number(A.getBigInt64(s,!0)),s+=8;break;case Ct.ULong:t[g]=Number(A.getBigUint64(s,!0)),s+=8;break;case Ct.Float:t[g]=A.getFloat32(s,!0),s+=4;break;case Ct.Double:t[g]=A.getFloat64(s,!0),s+=8;break;case Ct.DateTime:case Ct.String:{let l=A.getUint32(s,!0);s+=4,t[g]=md.decode(r.subarray(s,s+l)),s+=l;break}case Ct.Json:{let l=A.getUint32(s,!0);s+=4;let c=md.decode(r.subarray(s,s+l));t[g]=JSON.parse(c),s+=l;break}case Ct.Binary:{let l=A.getUint32(s,!0);s+=4,t[g]=r.subarray(s,s+l),s+=l;break}default:throw Error(`Unknown type ${a.type}`)}}return t}const Fu=new Uint8Array(0);function JN(){return this._source.cancel()}function zN(i,e){if(!i.length)return e;if(!e.length)return i;var t=new Uint8Array(i.length+e.length);return t.set(i),t.set(e,i.length),t}function jN(){var i=this,e=i._array.subarray(i._index);return i._source.read().then(function(t){return i._array=Fu,i._index=0,t.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:zN(e,t.value)}})}function VN(i){if((i|=0)<0)throw new Error("invalid length");var e=this,t=this._array.length-this._index;if(this._index+i<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=i));var r=new Uint8Array(i);return r.set(this._array.subarray(this._index)),function A(){return e._source.read().then(function(n){return n.done?(e._array=Fu,e._index=0,t>0?r.subarray(0,t):null):t+n.value.length>=i?(e._array=n.value,e._index=i-t,r.set(n.value.subarray(0,i-t),t),r):(r.set(n.value,t),t+=n.value.length,A())})}()}function $N(i){return typeof i.slice=="function"?i:new Sa(typeof i.read=="function"?i:i.getReader())}function Sa(i){this._source=i,this._array=Fu,this._index=0}Sa.prototype.read=jN;Sa.prototype.slice=VN;Sa.prototype.cancel=JN;class nr{constructor(){j(this,"bb",null);j(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCrs(e,t){return(t||new nr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCrs(e,t){return e.setPosition(e.position()+fs),(t||new nr).__init(e.readInt32(e.position())+e.position(),e)}org(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}code(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}wkt(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}codeString(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}static startCrs(e){e.startObject(6)}static addOrg(e,t){e.addFieldOffset(0,t,0)}static addCode(e,t){e.addFieldInt32(1,t,0)}static addName(e,t){e.addFieldOffset(2,t,0)}static addDescription(e,t){e.addFieldOffset(3,t,0)}static addWkt(e,t){e.addFieldOffset(4,t,0)}static addCodeString(e,t){e.addFieldOffset(5,t,0)}static endCrs(e){return e.endObject()}static createCrs(e,t,r,A,n,s,o){return nr.startCrs(e),nr.addOrg(e,t),nr.addCode(e,r),nr.addName(e,A),nr.addDescription(e,n),nr.addWkt(e,s),nr.addCodeString(e,o),nr.endCrs(e)}}class No{constructor(){j(this,"bb",null);j(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsHeader(e,t){return(t||new No).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsHeader(e,t){return e.setPosition(e.position()+fs),(t||new No).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}envelope(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}envelopeLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}envelopeArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}geometryType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Qt.Unknown}hasZ(){let e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasM(){let e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasT(){let e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasTm(){let e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}columns(e,t){let r=this.bb.__offset(this.bb_pos,18);return r?(t||new ct).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}featuresCount(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}indexNodeSize(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}crs(e){let t=this.bb.__offset(this.bb_pos,24);return t?(e||new nr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}title(e){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}metadata(e){let t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}static startHeader(e){e.startObject(14)}static addName(e,t){e.addFieldOffset(0,t,0)}static addEnvelope(e,t){e.addFieldOffset(1,t,0)}static createEnvelopeVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}static startEnvelopeVector(e,t){e.startVector(8,t,8)}static addGeometryType(e,t){e.addFieldInt8(2,t,Qt.Unknown)}static addHasZ(e,t){e.addFieldInt8(3,+t,0)}static addHasM(e,t){e.addFieldInt8(4,+t,0)}static addHasT(e,t){e.addFieldInt8(5,+t,0)}static addHasTm(e,t){e.addFieldInt8(6,+t,0)}static addColumns(e,t){e.addFieldOffset(7,t,0)}static createColumnsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startColumnsVector(e,t){e.startVector(4,t,4)}static addFeaturesCount(e,t){e.addFieldInt64(8,t,BigInt("0"))}static addIndexNodeSize(e,t){e.addFieldInt16(9,t,16)}static addCrs(e,t){e.addFieldOffset(10,t,0)}static addTitle(e,t){e.addFieldOffset(11,t,0)}static addDescription(e,t){e.addFieldOffset(12,t,0)}static addMetadata(e,t){e.addFieldOffset(13,t,0)}static endHeader(e){return e.endObject()}static finishHeaderBuffer(e,t){e.finish(t)}static finishSizePrefixedHeaderBuffer(e,t){e.finish(t,void 0,!0)}}function ba(i){let e=No.getSizePrefixedRootAsHeader(i),t=e.featuresCount(),r=e.indexNodeSize(),A=[];for(let o=0;o<e.columnsLength();o++){let a=e.columns(o);if(!a)throw Error("Column unexpectedly missing");if(!a.name())throw Error("Column name unexpectedly missing");A.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}let n=e.crs(),s=n?{org:n.org(),code:n.code(),name:n.name(),description:n.description(),wkt:n.wkt(),code_string:n.codeString()}:null;return{geometryType:e.geometryType(),columns:A,envelope:e.envelopeLength()>0?e.envelopeArray():null,featuresCount:Number(t),indexNodeSize:r,crs:s,title:e.title(),description:e.description(),metadata:e.metadata()}}const Po=class Po{constructor(){j(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(e){if(e<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}};j(Po,"global",new Po);let Go=Po;const ZN=40,WN=16;function Ra(i,e){e=Math.min(Math.max(+e,2),65535);let t=i,r=t;do r+=t=Math.ceil(t/e);while(t!==1);return 40*r}function XN(i,e){if(e<2)throw Error("Node size must be at least 2");if(i===0)throw Error("Number of items must be greater than 0");let t=i,r=t,A=[t];do r+=t=Math.ceil(t/e),A.push(t);while(t!==1);let n=[];for(let o of(t=r,A))n.push(t-o),t-=o;let s=[];for(let o=0;o<A.length;o++)s.push([n[o],n[o]+A[o]]);return s}async function*dB(i,e,t,r){class A{constructor(I,h){j(this,"_level");j(this,"nodes");this._level=h,this.nodes=I}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(I){this.nodes[1]=I}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:n,minY:s,maxX:o,maxY:a}=t,g=XN(i,e),l=g[0][0],c=[new A([0,1],g.length-1)];for(;c.length!==0;){let u=c.shift(),I=u.startNodeIdx(),h=I>=l,d=(()=>{let[,E]=g[u.level()],B=Math.min(u.endNodeIdx()+e,E);return h&&B<E?B+1:B})(),f=d-I,C=new DataView(await r(40*I,40*f));for(let E=I;E<d;E++){let B=E-I,m=40*B;if(o<C.getFloat64(m+0,!0)||a<C.getFloat64(m+8,!0)||n>C.getFloat64(m+16,!0)||s>C.getFloat64(m+24,!0))continue;let p=C.getBigUint64(m+32,!0);if(h){let w=(()=>{if(E<i-1){let R=(B+1)*40;return C.getBigUint64(R+32,!0)-p}return null})(),S=E-l;yield[Number(p),S,Number(w)];continue}let y=Go.global.extraRequestThreshold()/40,Q=c[c.length-1];if(Q!==void 0&&Q.level()===u.level()-1&&p<Q.endNodeIdx()+y){Q.extendEndNodeIdx(Number(p));continue}let _=(()=>{let w=u.level()-1;return new A([Number(p),Number(p)+1],w)})();Q!==void 0&&(Q.level(),_.level()),c.push(_)}}}class Lu{constructor(e,t,r,A){j(this,"bytes");j(this,"header");j(this,"headerLength");j(this,"indexLength");this.bytes=e,this.header=t,this.headerLength=r,this.indexLength=A}static open(e){if(!e.subarray(0,3).every((s,o)=>$t[o]===s))throw Error("Not a FlatGeobuf file");let t=new DataView(e.buffer).getUint32($t.length,!0);if(t>10485760||t<8)throw Error("Invalid header size");let r=e.subarray($t.length,$t.length+Rr+t),A=ba(new Er(r)),n=Ra(A.featuresCount,A.indexNodeSize);return new Lu(e,A,t,n)}async*selectBbox(e){let t=this.lengthBeforeTree(),r=async(A,n)=>{let s=t+A;return this.bytes.slice(s,s+n).buffer};for await(let A of dB(this.header.featuresCount,this.header.indexNodeSize,e,r)){let[n,s]=A,o=this.readFeature(n);yield{id:s,feature:o}}}lengthBeforeTree(){return $t.length+Rr+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}readFeature(e){let t=e+this.lengthBeforeFeatures(),r=new DataView(this.bytes.buffer).getUint32(t,!0),A=this.bytes.subarray(t+4,t+4+r),n=new Uint8Array(r+Rr);n.set(A,Rr);let s=new Er(n);return or.getSizePrefixedRootAsFeature(s)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cl=function(i,e){return Cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var A in r)r.hasOwnProperty(A)&&(t[A]=r[A])},Cl(i,e)};function eG(i,e){Cl(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function LA(i,e,t,r){function A(n){return n instanceof t?n:new t(function(s){s(n)})}return new(t||(t=Promise))(function(n,s){function o(l){try{g(r.next(l))}catch(c){s(c)}}function a(l){try{g(r.throw(l))}catch(c){s(c)}}function g(l){l.done?n(l.value):A(l.value).then(o,a)}g((r=r.apply(i,[])).next())})}function di(i,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,A,n,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(g){return function(l){return a([g,l])}}function a(g){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,A&&(n=g[0]&2?A.return:g[0]?A.throw||((n=A.return)&&n.call(A),0):A.next)&&!(n=n.call(A,g[1])).done)return n;switch(A=0,n&&(g=[g[0]&2,n.value]),g[0]){case 0:case 1:n=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,A=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){t.label=g[1];break}if(g[0]===6&&t.label<n[1]){t.label=n[1],n=g;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(g);break}n[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(l){g=[6,l],A=0}finally{r=n=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function VA(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pn(i){return this instanceof Pn?(this.v=i,this):new Pn(i)}function tG(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),A,n=[];return A={},s("next"),s("throw"),s("return"),A[Symbol.asyncIterator]=function(){return this},A;function s(u){r[u]&&(A[u]=function(I){return new Promise(function(h,d){n.push([u,I,h,d])>1||o(u,I)})})}function o(u,I){try{a(r[u](I))}catch(h){c(n[0][3],h)}}function a(u){u.value instanceof Pn?Promise.resolve(u.value.v).then(g,l):c(n[0][2],u)}function g(u){o("next",u)}function l(u){o("throw",u)}function c(u,I){u(I),n.shift(),n.length&&o(n[0][0],n[0][1])}}var fB=function(i){eG(e,i);function e(t){var r=i.call(this,t)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return e}(Error);(function(){function i(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),i.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();(function(){function i(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();(function(){function i(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();function El(i){i!=null&&typeof i.then=="function"&&i.then(ko,ko)}var Cg=0,Qd=1,qi=2,vo=3,Bl=4,Mo=1024,ko=function(){};function yA(i){var e=i.err,t=Promise.resolve(i.execution).then(function(r){if(e!=null)throw e;return r});return i.err=void 0,i.execution=t.then(function(){},function(){}),i.pending===void 0?t:i.pending.then(function(){return t})}function Si(i,e){var t=i.state>=vo;return Promise.resolve(e).then(function(r){return!t&&i.state>=Bl?yA(i).then(function(A){return{value:A,done:!0}}):{value:r,done:t}})}function Nu(i,e){var t,r;if(!(i.state>=qi))if(i.state=qi,i.onnext(),i.onstop(),i.err==null&&(i.err=e),i.pushes.length===0&&(typeof i.buffer>"u"||i.buffer.empty))Cn(i);else try{for(var A=VA(i.pushes),n=A.next();!n.done;n=A.next()){var s=n.value;s.resolve()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(r=A.return)&&r.call(A)}finally{if(t)throw t.error}}}function Cn(i){var e,t;if(!(i.state>=vo)){i.state<qi&&Nu(i),i.state=vo,i.buffer=void 0;try{for(var r=VA(i.nexts),A=r.next();!A.done;A=r.next()){var n=A.value,s=i.pending===void 0?yA(i):i.pending.then(function(){return yA(i)});n.resolve(Si(i,s))}}catch(o){e={error:o}}finally{try{A&&!A.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}i.pushes=[],i.nexts=[]}}function wd(i){i.state>=Bl||(i.state<vo&&Cn(i),i.state=Bl)}function rG(i,e){if(El(e),i.pushes.length>=Mo)throw new fB("No more than "+Mo+" pending calls to push are allowed on a single repeater.");if(i.state>=qi)return Promise.resolve(void 0);var t=i.pending===void 0?Promise.resolve(e):i.pending.then(function(){return e});t=t.catch(function(a){i.state<qi&&(i.err=a),wd(i)});var r;if(i.nexts.length){var A=i.nexts.shift();A.resolve(Si(i,t)),i.nexts.length?r=Promise.resolve(i.nexts[0].value):typeof i.buffer<"u"&&!i.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(a){return i.onnext=a})}else typeof i.buffer<"u"&&!i.buffer.full?(i.buffer.add(t),r=Promise.resolve(void 0)):r=new Promise(function(a){return i.pushes.push({resolve:a,value:t})});var n=!0,s={},o=r.catch(function(a){if(n)throw a});return s.then=function(a,g){return n=!1,Promise.prototype.then.call(r,a,g)},s.catch=function(a){return n=!1,Promise.prototype.catch.call(r,a)},s.finally=r.finally.bind(r),i.pending=t.then(function(){return o}).catch(function(a){i.err=a,wd(i)}),s}function iG(i){var e=Nu.bind(null,i),t=new Promise(function(r){return i.onstop=r});return e.then=t.then.bind(t),e.catch=t.catch.bind(t),e.finally=t.finally.bind(t),e}function AG(i){if(!(i.state>=Qd)){i.state=Qd;var e=rG.bind(null,i),t=iG(i);i.execution=new Promise(function(r){return r(i.executor(e,t))}),i.execution.catch(function(){return Nu(i)})}}var Ms=new WeakMap,Cs=function(){function i(e,t){Ms.set(this,{executor:e,buffer:t,err:void 0,state:Cg,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:ko,onstop:ko})}return i.prototype.next=function(e){El(e);var t=Ms.get(this);if(t===void 0)throw new Error("WeakMap error");if(t.nexts.length>=Mo)throw new fB("No more than "+Mo+" pending calls to next are allowed on a single repeater.");if(t.state<=Cg&&AG(t),t.onnext(e),typeof t.buffer<"u"&&!t.buffer.empty){var r=Si(t,t.buffer.remove());if(t.pushes.length){var A=t.pushes.shift();t.buffer.add(A.value),t.onnext=A.resolve}return r}else if(t.pushes.length){var n=t.pushes.shift();return t.onnext=n.resolve,Si(t,n.value)}else if(t.state>=qi)return Cn(t),Si(t,yA(t));return new Promise(function(s){return t.nexts.push({resolve:s,value:e})})},i.prototype.return=function(e){El(e);var t=Ms.get(this);if(t===void 0)throw new Error("WeakMap error");return Cn(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),Si(t,yA(t))},i.prototype.throw=function(e){var t=Ms.get(this);if(t===void 0)throw new Error("WeakMap error");return t.state<=Cg||t.state>=qi||typeof t.buffer<"u"&&!t.buffer.empty?(Cn(t),t.err==null&&(t.err=e),Si(t,yA(t))):this.next(Promise.reject(e))},i.prototype[Symbol.asyncIterator]=function(){return this},i.race=nG,i.merge=sG,i.zip=oG,i.latest=aG,i}();function Da(i,e){var t,r,A=[],n=function(g){g!=null&&typeof g[Symbol.asyncIterator]=="function"?A.push(g[Symbol.asyncIterator]()):g!=null&&typeof g[Symbol.iterator]=="function"?A.push(g[Symbol.iterator]()):A.push(function(){return tG(this,arguments,function(){return di(this,function(u){switch(u.label){case 0:return e.yieldValues?[4,Pn(g)]:[3,3];case 1:return[4,u.sent()];case 2:u.sent(),u.label=3;case 3:return e.returnValues?[4,Pn(g)]:[3,5];case 4:return[2,u.sent()];case 5:return[2]}})})}())};try{for(var s=VA(i),o=s.next();!o.done;o=s.next()){var a=o.value;n(a)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return A}function nG(i){var e=this,t=Da(i,{returnValues:!0});return new Cs(function(r,A){return LA(e,void 0,void 0,function(){var n,s,o,a,g,l;return di(this,function(c){switch(c.label){case 0:if(!t.length)return A(),[2];s=!1,A.then(function(){n(),s=!0}),c.label=1;case 1:c.trys.push([1,,5,7]),a=void 0,g=0,l=function(){var u,I,h,d,f,C;return di(this,function(E){switch(E.label){case 0:u=g;try{for(I=(f=void 0,VA(t)),h=I.next();!h.done;h=I.next())d=h.value,Promise.resolve(d.next()).then(function(B){B.done?(A(),o===void 0&&(o=B)):g===u&&(g++,n(B))},function(B){return A(B)})}catch(B){f={error:B}}finally{try{h&&!h.done&&(C=I.return)&&C.call(I)}finally{if(f)throw f.error}}return[4,new Promise(function(B){return n=B})];case 1:return a=E.sent(),a===void 0?[3,3]:[4,r(a.value)];case 2:E.sent(),E.label=3;case 3:return[2]}})},c.label=2;case 2:return s?[3,4]:[5,l()];case 3:return c.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return A(),[4,Promise.race(t.map(function(u){return u.return&&u.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}function sG(i){var e=this,t=Da(i,{yieldValues:!0});return new Cs(function(r,A){return LA(e,void 0,void 0,function(){var n,s,o,a=this;return di(this,function(g){switch(g.label){case 0:if(!t.length)return A(),[2];n=[],s=!1,A.then(function(){var l,c;s=!0;try{for(var u=VA(n),I=u.next();!I.done;I=u.next()){var h=I.value;h()}}catch(d){l={error:d}}finally{try{I&&!I.done&&(c=u.return)&&c.call(u)}finally{if(l)throw l.error}}}),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,Promise.all(t.map(function(l,c){return LA(a,void 0,void 0,function(){var u,I;return di(this,function(h){switch(h.label){case 0:h.trys.push([0,,6,9]),h.label=1;case 1:return s?[3,5]:(Promise.resolve(l.next()).then(function(d){return n[c](d)},function(d){return A(d)}),[4,new Promise(function(d){n[c]=d})]);case 2:return u=h.sent(),u===void 0?[3,4]:u.done?(o=u,[2]):[4,r(u.value)];case 3:h.sent(),h.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return I=l.return,I?[4,l.return()]:[3,8];case 7:I=h.sent(),h.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return g.sent(),[2,o&&o.value];case 3:return A(),[7];case 4:return[2]}})})})}function oG(i){var e=this,t=Da(i,{returnValues:!0});return new Cs(function(r,A){return LA(e,void 0,void 0,function(){var n,s,o,a;return di(this,function(g){switch(g.label){case 0:if(!t.length)return A(),[2,[]];s=!1,A.then(function(){n(),s=!0}),g.label=1;case 1:g.trys.push([1,,6,8]),g.label=2;case 2:return s?[3,5]:(Promise.all(t.map(function(l){return l.next()})).then(function(l){return n(l)},function(l){return A(l)}),[4,new Promise(function(l){return n=l})]);case 3:return o=g.sent(),o===void 0?[2]:(a=o.map(function(l){return l.value}),o.some(function(l){return l.done})?[2,a]:[4,r(a)]);case 4:return g.sent(),[3,2];case 5:return[3,8];case 6:return A(),[4,Promise.all(t.map(function(l){return l.return&&l.return()}))];case 7:return g.sent(),[7];case 8:return[2]}})})})}function aG(i){var e=this,t=Da(i,{yieldValues:!0,returnValues:!0});return new Cs(function(r,A){return LA(e,void 0,void 0,function(){var n,s,o,a,g,l=this;return di(this,function(c){switch(c.label){case 0:if(!t.length)return A(),[2,[]];s=[],o=!1,A.then(function(){var u,I;n();try{for(var h=VA(s),d=h.next();!d.done;d=h.next()){var f=d.value;f()}}catch(C){u={error:C}}finally{try{d&&!d.done&&(I=h.return)&&I.call(h)}finally{if(u)throw u.error}}o=!0}),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(t.map(function(u){return u.next()})).then(function(u){return n(u)},function(u){return A(u)}),[4,new Promise(function(u){return n=u})];case 2:return a=c.sent(),a===void 0?[2]:(g=a.map(function(u){return u.value}),a.every(function(u){return u.done})?[2,g]:[4,r(g.slice())]);case 3:return c.sent(),[4,Promise.all(t.map(function(u,I){return LA(l,void 0,void 0,function(){var h;return di(this,function(d){switch(d.label){case 0:if(a[I].done)return[2,a[I].value];d.label=1;case 1:return o?[3,4]:(Promise.resolve(u.next()).then(function(f){return s[I](f)},function(f){return A(f)}),[4,new Promise(function(f){return s[I]=f})]);case 2:return h=d.sent(),h===void 0?[2,a[I].value]:h.done?[2,h.value]:(g[I]=h.value,[4,r(g.slice())]);case 3:return d.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,c.sent()];case 5:return A(),[4,Promise.all(t.map(function(u){return u.return&&u.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}class Gu{constructor(e,t,r,A,n,s={}){j(this,"headerClient");j(this,"header");j(this,"headerLength");j(this,"indexLength");j(this,"nocache");j(this,"headers");this.headerClient=e,this.header=t,this.headerLength=r,this.indexLength=A,this.nocache=n,this.headers=s}static async open(e,t,r={}){let A,n=new _d(e,t,r),s=2024+(()=>{let l,c=0;for(l=0;l<3;l++)c+=WN**l*ZN;return c})();if(!new Uint8Array(await n.getRange(0,8,s,"header")).subarray(0,3).every((l,c)=>$t[c]===l))throw Error("Not a FlatGeobuf file");if((A=new DataView(await n.getRange(8,4,s,"header")).getUint32(0,!0))>10485760||A<8)throw Error("Invalid header size");let o=await n.getRange($t.length,Rr+A,s,"header"),a=ba(new Er(new Uint8Array(o)));if(a.indexNodeSize===0)throw Error("No index found, cannot read features filtered by bbox");let g=Ra(a.featuresCount,a.indexNodeSize);return new Gu(n,a,A,g,t,r)}async*selectBbox(e){let t=this.lengthBeforeTree(),r=this.headerClient,A=async(a,g)=>r.getRange(t+a,g,0,"index"),n=[],s=[];for await(let a of dB(this.header.featuresCount,this.header.indexNodeSize,e,A)){let[g,l]=a,[,,c]=a;if(c||(c=4),s.length===0){s.push([g,c,l]);continue}let u=s[s.length-1];g-(u[0]+u[1])>Go.global.extraRequestThreshold()&&(n.push(s),s=[]),s.push([g,c,l])}this.headerClient.logUsage("header+index"),s.length>0&&n.push(s);let o=n.flatMap(a=>this.readFeatureBatch(a,this.nocache));yield*Cs.merge(o)}lengthBeforeTree(){return $t.length+Rr+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(e){return new _d(this.headerClient.httpClient,e,this.headers)}async*readFeatureBatch(e,t){let[r]=e[0],[A,n]=e[e.length-1],s=this.buildFeatureClient(t),o=A+n-r;for(let[a,,g]of e){let l=await this.readFeature(s,a,o);yield{id:g,feature:l},o=0}s.logUsage("feature")}async readFeature(e,t,r){let A,n=t+this.lengthBeforeFeatures();A=new DataView(await e.getRange(n,4,r,"feature length")).getUint32(0,!0);let s=new Uint8Array(await e.getRange(n+4,A,r,"feature data")),o=new Uint8Array(A+Rr);o.set(s,Rr);let a=new Er(o);return or.getSizePrefixedRootAsFeature(a)}}class _d{constructor(e,t,r={}){j(this,"httpClient");j(this,"bytesEverUsed",0);j(this,"bytesEverFetched",0);j(this,"buffer",new ArrayBuffer(0));j(this,"head",0);if(typeof e=="string")this.httpClient=new Sd(e,t,r);else if(e instanceof Sd)this.httpClient=e;else throw Error("Unknown source")}async getRange(e,t,r,A){this.bytesEverUsed+=t;let n=e-this.head,s=n+t;if(n>=0&&s<=this.buffer.byteLength)return this.buffer.slice(n,s);let o=Math.max(t,r);return this.bytesEverFetched+=o,this.buffer=await this.httpClient.getRange(e,o,A),this.head=e,this.buffer.slice(0,t)}logUsage(e){e.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}class Sd{constructor(e,t,r={}){j(this,"url");j(this,"nocache");j(this,"headers");j(this,"requestsEverMade",0);j(this,"bytesEverRequested",0);this.url=e,this.nocache=t,this.headers=r}async getRange(e,t,r){this.requestsEverMade+=1,this.bytesEverRequested+=t;let A=`bytes=${e}-${e+t-1}`,n=new Headers(this.headers);return n.set("Range",A),this.nocache&&n.set("Cache-Control","no-cache, no-store"),await(await fetch(this.url,{headers:n})).arrayBuffer()}}async function*gG(i,e,t,r){if(!i.subarray(0,3).every((c,u)=>$t[u]===c))throw Error("Not a FlatGeobuf file");if(t){let c=Lu.open(i);for await(let u of c.selectBbox(t))yield e(u.id,u.feature,c.header);return}let A=new Er(i),n=A.readUint32($t.length);A.setPosition($t.length);let s=ba(A),o=$t.length+Rr+n,{indexNodeSize:a,featuresCount:g}=s;a>0&&(o+=Ra(g,a));let l=0;for(;o<A.capacity();){let c=A.readUint32(o);A.setPosition(o);let u=or.getSizePrefixedRootAsFeature(A);yield e(l++,u,s),o+=Rr+c}}async function*lG(i,e,t){let r,A=$N(i),n=async d=>await A.slice(d),s=new Uint8Array(await n(8));if(!s.subarray(0,3).every((d,f)=>$t[f]===d))throw Error("Not a FlatGeobuf file");let o=new Uint8Array(await n(4)),a=new Er(o),g=a.readUint32(0),l=new Uint8Array(await n(g));(s=new Uint8Array(o.length+l.length)).set(o),s.set(l,o.length);let c=ba(a=new Er(s)),{indexNodeSize:u,featuresCount:I}=c;if(u>0){let d=Ra(I,u);await n(d)}let h=0;for(;r=await uG(n,c,e,h++);)yield r}async function*cG(i,e,t,r,A=!1,n={}){let s=await Gu.open(i,A,n);for await(let o of s.selectBbox(e))yield t(o.id,o.feature,s.header)}async function uG(i,e,t,r){let A=new Uint8Array(await i(4,"feature length"));if(A.byteLength===0)return;let n=new Er(A),s=n.readUint32(0);A=new Uint8Array(await i(s,"feature data"));let o=new Uint8Array(s+4);return o.set(A,4),n=new Er(o),t(r,or.getSizePrefixedRootAsFeature(n),e)}function pl(i,e){let t=e;if(t===Qt.Unknown&&(t=i.type()),t===Qt.GeometryCollection){let A=[];for(let n=0;n<i.partsLength();n++){let s=i.parts(n),o=s.type();A.push(pl(s,o))}return{type:Qt[t],geometries:A}}if(t===Qt.MultiPolygon){let A=[];for(let n=0;n<i.partsLength();n++)A.push(pl(i.parts(n),Qt.Polygon));return{type:Qt[t],coordinates:A.map(n=>n.coordinates)}}let r=function(A,n){let s=A.xyArray(),o=A.zArray();switch(n){case Qt.Point:{let a=Array.from(s);return o&&a.push(o[0]),a}case Qt.MultiPoint:case Qt.LineString:return fg(s,o);case Qt.MultiLineString:case Qt.Polygon:return function(a,g,l){let c;if(!l||l.length===0)return[fg(a,g)];let u=0,I=Array.from(l).map(h=>a.slice(u,u=h<<1));return g&&(u=0,c=Array.from(l).map(h=>g.slice(u,u=h))),I.map((h,d)=>fg(h,c?c[d]:void 0))}(s,o,A.endsArray())}}(i,t);return{type:Qt[t],coordinates:r}}function vu(i,e,t){let r=t.columns;return{type:"Feature",id:i,geometry:pl(e.geometry(),t.geometryType),properties:qN(e,r)}}async function*hG(i,e,t){yield*gG(i,vu,e)}function IG(i,e){return lG(i,vu)}function dG(i,e,t,r=!1,A={}){return cG(i,e,vu,t,r,A)}function fG(i,e,t,r=!1,A={}){return i instanceof Uint8Array?hG(i,e):i instanceof ReadableStream?IG(i):dG(i,e,t,r,A)}class CG extends wl{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX,strategy:Jp}),this.dataProjection=e.projection||zp.dataProjection,this.resourceURL=e.url,super.setLoader(this.loader)}fgbBoundingBox(e,t){const r=jp(e,t.getCode(),this.dataProjection);return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(e,t,r,A,n){const s=this.fgbBoundingBox(e,r);try{if(s.minX!==-1/0){const o=[],a=fG(this.resourceURL,s),g=new Vp({featureProjection:r,dataProjection:this.dataProjection});for await(const l of a){const c=g.readFeature(l);o.push(c)}super.clear(),super.addFeatures(o),A(o)}}catch{n()}}}window.eoxMapAdvancedOlSources={BingMaps:RT,CartoDB:DT,Cluster:Lo,DataTile:hs,GeoTIFF:WE,GeoZarr:AN,Google:gN,IIIF:cN,Image:zi,ImageArcGISRest:hN,ImageCanvas:IN,ImageMapGuide:EN,ImageStatic:pN,ImageTile:uB,OGCMapTile:QN,OGCVectorTile:wN,Raster:IB,Source:kl,StadiaMaps:MN,TileArcGISRest:kN,TileDebug:PN,TileImage:jr,TileJSON:UN,UrlTile:$p,UTFGrid:YN,Zoomify:lN,WMTSCapabilities:HN,FlatGeoBuf:CG};const _v=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{yv as L,EF as W,mv as a,TG as b,FG as c,_v as i};
