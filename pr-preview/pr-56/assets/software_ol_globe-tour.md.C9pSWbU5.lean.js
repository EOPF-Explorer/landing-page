const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/cesium.D1kdIPAG.js","assets/app.F8sUN9yU.js","assets/chunks/olcs.SoiykAlE.js"])))=>i.map(i=>d[i]);
import{an as pa,aq as ca,ar as l,az as ha,aw as N,aA as ka,aB as va,aC as ua,aD as Ea,aE as ba,aF as ga,aG as ma,aH as Z,aI as ya,aa as p,ab as c,ad as t,ak as R,ac as Ca,al as U,aJ as h,aK as k,aj as r,ae as H,af as X,ag as fa,ah as Fa}from"./app.F8sUN9yU.js";import{_ as xa}from"./chunks/openlayers-logo.mV03A5FU.js";import{c as Sa}from"./chunks/index.KPY1M44e.js";const Ba={key:0,class:"warning"},Ta={key:1,style:{display:"grid","grid-template-columns":"1fr 400px",gap:"20px"}},Da={class:"tour-controls",style:{height:"600px","overflow-y":"auto"}},Ia={class:"control-group"},Pa={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"10px"}},Aa={class:"control-group"},wa={class:"control-group"},Ma={class:"control-group"},La={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr",gap:"10px"}},_a={class:"control-group"},Ra={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr",gap:"10px"}},Ua={class:"control-group"},Va={class:"control-group"},za={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"10px"}},Oa={class:"control-group"},Na={key:0,class:"control-group"},Ga={class:"tour-script"},qa=["onClick"],Wa={style:{"font-size":"0.85em",color:"#666"}},$a=["onClick"],ja={class:"control-group"},Ya={class:"button-group"},Za={class:"control-group"},Ha={class:"tour-script"},Xa={style:{"font-size":"0.9em",color:"#666"}},Ja={key:0,style:{"font-size":"0.85em",color:"#888"}},et=JSON.parse('{"title":"OpenLayers - 3D Globe Tour Mode (Experimental)","description":"","frontmatter":{"title":"OpenLayers - 3D Globe Tour Mode (Experimental)","layout":"page"},"headers":[],"relativePath":"software/ol/globe-tour.md","filePath":"software/ol/globe-tour.md"}'),Ka={name:"software/ol/globe-tour.md"},Qa=Object.assign(Ka,{setup(at){let V=null,s=null;const M=l(null),z=l(),o=l(!0);let G=null,n=null;const S=l("456c1e23-47f2-4567-98cf-dcde378a05f7"),g=l("2026-01-22"),I=l("2026-01-23"),m=l(""),y=l("");let B={serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23",cloudCover:"",additionalParams:""};const v=l(4.5),T=l(43.5),P=l(5e6),C=l(0),A=l(-90),L=l(0),u=l(!1),O=l(1e3),E=l([{lon:4.5,lat:43.5,alt:5e6,heading:0,pitch:-90,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23"},{lon:6.8,lat:45.8,alt:1e5,heading:45,pitch:-45,duration:3,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.8,alt:5e4,heading:135,pitch:-30,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.8,alt:5e4,heading:225,pitch:-30,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.8,alt:5e4,heading:315,pitch:-30,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.95,lat:45.8,alt:12e3,heading:270,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.91,lat:45.91,alt:1e4,heading:225,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.95,alt:12e3,heading:180,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.69,lat:45.91,alt:1e4,heading:135,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.65,lat:45.8,alt:12e3,heading:90,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.69,lat:45.69,alt:1e4,heading:45,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.65,alt:12e3,heading:0,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.91,lat:45.69,alt:1e4,heading:315,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:2.3,lat:48.9,alt:1e6,heading:0,pitch:-60,duration:3,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23"},{lon:12.1702,lat:46.5315,alt:3050,heading:282.97,pitch:-22.7,duration:3,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23"}]),f=l(0),b=l([]),F=l(""),D=l(6.8),_=l(45.8),J="https://s3.explorer.eopf.copernicus.eu/esa-zarr-sentinel-explorer-fra/tests-output/sentinel-2-l2a-staging/S2A_MSIL2A_20251227T100441_N0511_R122_T33TVF_20251227T121715.zarr",K="https://api.explorer.eopf.copernicus.eu/openeo/services/xyz";function q(){const e=encodeURIComponent(`["${g.value}","${I.value}"]`);let a=`${K}/${S.value}/tiles/{z}/{x}/{y}?time=${e}`;return m.value&&(a+=`&cloud_cover=${m.value}`),y.value&&(a+=`&${y.value}`),a}function W(){if(!n||!o.value)return;const a=n.getCesiumScene().imageryLayers;B={serviceId:S.value,timeStart:g.value,timeEnd:I.value,cloudCover:m.value,additionalParams:y.value},a.length>1&&a.remove(a.get(1));const i=q();console.log("Updating XYZ layer:",i);const d=new s.UrlTemplateImageryProvider({url:i,maximumLevel:18,credit:"Sentinel Data Â© ESA/Copernicus via OpenEO"});a.addImageryProvider(d)}function Q(){if(!n||!o.value)return;n.getCesiumScene().camera.setView({destination:s.Cartesian3.fromDegrees(v.value,T.value,P.value),orientation:{heading:s.Math.toRadians(C.value),pitch:s.Math.toRadians(A.value),roll:s.Math.toRadians(L.value)}}),console.log("Camera set to:",{lon:v.value,lat:T.value,alt:P.value,heading:C.value,pitch:A.value,roll:L.value})}function aa(){if(!n||!o.value)return;n.getCesiumScene().camera.flyTo({destination:s.Cartesian3.fromDegrees(v.value,T.value,P.value),orientation:{heading:s.Math.toRadians(C.value),pitch:s.Math.toRadians(A.value),roll:s.Math.toRadians(L.value)},duration:2})}function $(){if(!n||!o.value)return;const a=n.getCesiumScene().camera,i=a.positionCartographic;v.value=parseFloat(s.Math.toDegrees(i.longitude).toFixed(4)),T.value=parseFloat(s.Math.toDegrees(i.latitude).toFixed(4)),P.value=parseFloat(i.height.toFixed(0)),C.value=parseFloat(s.Math.toDegrees(a.heading).toFixed(2)),A.value=parseFloat(s.Math.toDegrees(a.pitch).toFixed(2)),L.value=parseFloat(s.Math.toDegrees(a.roll).toFixed(2))}function ta(){E.value.push({lon:v.value,lat:T.value,alt:P.value,heading:C.value,pitch:A.value,duration:3,serviceId:S.value,timeStart:g.value,timeEnd:I.value,cloudCover:m.value,additionalParams:y.value})}function ia(){if(u.value){Y();return}if(!n||!o.value){alert("Please enable 3D mode first");return}u.value=!0,f.value=0,j()}function j(){if(!u.value||f.value>=E.value.length){Y();return}const e=E.value[f.value],i=n.getCesiumScene().camera;if(console.log(`Tour step ${f.value+1}/${E.value.length}:`,e),e.serviceId){const d={serviceId:e.serviceId,timeStart:e.timeStart||g.value,timeEnd:e.timeEnd||I.value,cloudCover:e.cloudCover||"",additionalParams:e.additionalParams||""};(d.serviceId!==B.serviceId||d.timeStart!==B.timeStart||d.timeEnd!==B.timeEnd||d.cloudCover!==B.cloudCover||d.additionalParams!==B.additionalParams)&&(S.value=d.serviceId,g.value=d.timeStart,I.value=d.timeEnd,m.value=d.cloudCover,y.value=d.additionalParams,W())}i.flyTo({destination:s.Cartesian3.fromDegrees(e.lon,e.lat,e.alt),orientation:{heading:s.Math.toRadians(e.heading||0),pitch:s.Math.toRadians(e.pitch||-90),roll:0},duration:e.duration||2,complete:()=>{f.value++,u.value&&setTimeout(j,O.value)}})}function Y(){u.value=!1,f.value=0}function sa(){E.value=[]}function ea(){if(!n||!o.value){alert("Please enable 3D mode first");return}if(!F.value.trim()){alert("Please enter a name for the marker");return}const a=n.getCesiumScene().entities.add({position:s.Cartesian3.fromDegrees(D.value,_.value),point:{pixelSize:10,color:s.Color.RED,outlineColor:s.Color.WHITE,outlineWidth:2},label:{text:F.value,font:"14px sans-serif",fillColor:s.Color.WHITE,outlineColor:s.Color.BLACK,outlineWidth:2,style:s.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new s.Cartesian2(0,-15),disableDepthTestDistance:Number.POSITIVE_INFINITY}});b.value.push({id:a.id,name:F.value,lon:D.value,lat:_.value,entity:a}),console.log("Marker added:",F.value,D.value,_.value),F.value=""}function na(e){if(!n||!o.value)return;const a=b.value[e];n.getCesiumScene().entities.removeById(a.id),b.value.splice(e,1)}function la(){if(!n||!o.value)return;const e=n.getCesiumScene();b.value.forEach(a=>{e.entities.removeById(a.id)}),b.value=[]}function da(){!n||!o.value||($(),D.value=v.value,_.value=T.value)}function ra(e){if(!n||!o.value)return;n.getCesiumScene().camera.flyTo({destination:s.Cartesian3.fromDegrees(e.lon,e.lat,5e4),orientation:{heading:0,pitch:s.Math.toRadians(-45),roll:0},duration:2})}ca(()=>{M.value=Sa(),M.value&&ha(()=>{oa()})});async function oa(){if(z.value)try{s||(s=await N(()=>import("./chunks/cesium.D1kdIPAG.js").then(x=>x.C),__vite__mapDeps([0,1])),await N(()=>import("./chunks/cesium.D1kdIPAG.js").then(x=>x.w),__vite__mapDeps([0,1])),typeof window<"u"&&(window.CESIUM_BASE_URL="/node_modules/cesium/Build/Cesium/",window.Cesium=s)),V||(V=(await N(()=>import("./chunks/olcs.SoiykAlE.js"),__vite__mapDeps([2,1]))).default);const e=new ka({url:J,group:"measurements/reflectance",bands:["b04","b03","b02"]});G=new va({layers:[new Z({source:new ya}),new Z({source:e,style:{gamma:1.5,color:["color",["interpolate",["linear"],["band",1],0,0,.5,255],["interpolate",["linear"],["band",2],0,0,.5,255],["interpolate",["linear"],["band",3],0,0,.5,255],["case",["==",["+",["band",1],["band",2],["band",3]],0],0,1]]}})],target:z.value,view:ua(e,Ea(1),ba(2),ga(),ma(2))}),n=new V({map:G});const a=n.getCesiumScene();a.globe.enableLighting=!1,a.globe.showGroundAtmosphere=!0,a.imageryLayers.removeAll(),a.imageryLayers.addImageryProvider(new s.OpenStreetMapImageryProvider({url:"https://tile.openstreetmap.org/"}));const i=q(),d=new s.UrlTemplateImageryProvider({url:i,maximumLevel:18,credit:"Sentinel Data Â© ESA/Copernicus via OpenEO"});a.imageryLayers.addImageryProvider(d),setTimeout(()=>{n.setEnabled(!0),a.camera.setView({destination:s.Cartesian3.fromDegrees(4.5,43.5,5e6),orientation:{heading:0,pitch:s.Math.toRadians(-90),roll:0}}),s.createWorldTerrainAsync({requestWaterMask:!0,requestVertexNormals:!0}).then(x=>{a.terrainProvider=x}).catch(x=>{console.warn("Could not load terrain:",x)})},500)}catch(e){console.error("Failed to initialize map:",e)}}return(e,a)=>(c(),p("div",null,[a[30]||(a[30]=t("h2",{id:"_3d-globe-tour-mode-experimental",tabindex:"-1"},[U("3D Globe Tour Mode - Experimental "),t("img",{src:xa,alt:"OpenLayers Logo",style:{height:"100px","vertical-align":"middle","margin-left":"8px",float:"right"}}),U(),t("a",{class:"header-anchor link",href:"#_3d-globe-tour-mode-experimental","aria-label":'Permalink to "3D Globe Tour Mode - Experimental <img src="/assets/openlayers-logo.png" alt="OpenLayers Logo" style="height:100px; vertical-align:middle; margin-left:8px; float:right;" />"'},"â€‹")],-1)),a[31]||(a[31]=t("p",null,"This experimental page demonstrates advanced camera control and automated tours on the 3D globe, plus dynamic XYZ layer parameter control.",-1)),M.value===!1?(c(),p("div",Ba," âš ï¸ **WebGL Not Supported**: Your browser doesn't support WebGL, which is required for 3D globe visualization. ")):R("",!0),a[32]||(a[32]=t("h3",{id:"live-demo",tabindex:"-1"},[U("Live Demo "),t("a",{class:"header-anchor link",href:"#live-demo","aria-label":'Permalink to "Live Demo"'},"â€‹")],-1)),M.value?(c(),p("div",Ta,[t("div",{ref_key:"mapRef",ref:z,class:"map-container",style:{height:"600px"}},null,512),t("div",Da,[a[23]||(a[23]=t("h3",{style:{"margin-top":"0"}},"XYZ Layer Parameters",-1)),t("div",Ia,[a[9]||(a[9]=t("label",null,"Service ID",-1)),h(t("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>S.value=i),type:"text"},null,512),[[k,S.value]])]),t("div",Pa,[t("div",Aa,[a[10]||(a[10]=t("label",null,"Time Start",-1)),h(t("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>g.value=i),type:"date"},null,512),[[k,g.value]])]),a[11]||(a[11]=t("pre",null,[t("code",null,`<div class="control-group">
  <label>Time End</label>
  <input v-model="timeEnd" type="date" />
</div>
`)],-1))]),t("div",wa,[a[12]||(a[12]=t("label",null,"Cloud Cover (0-100, optional)",-1)),h(t("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>m.value=i),type:"number",min:"0",max:"100",placeholder:"Leave empty for no filter"},null,512),[[k,m.value]])]),t("div",Ma,[a[13]||(a[13]=t("label",null,"Additional Parameters (e.g., param1=value1Â¶m2=value2)",-1)),h(t("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>y.value=i),type:"text",placeholder:"custom=value"},null,512),[[k,y.value]])]),t("p",null,[t("button",{onClick:W,class:"button"},"ðŸ”„ Update Layer")]),a[24]||(a[24]=t("hr",{style:{margin:"20px 0"}},null,-1)),a[25]||(a[25]=t("h3",null,"Camera Position Control",-1)),t("div",La,[t("div",_a,[a[14]||(a[14]=t("label",null,"Longitude",-1)),h(t("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>v.value=i),type:"number",step:"0.1"},null,512),[[k,v.value,void 0,{number:!0}]])]),a[15]||(a[15]=t("pre",null,[t("code",null,`<div class="control-group">
  <label>Latitude</label>
  <input v-model.number="latitude" type="number" step="0.1" />
</div>

<div class="control-group">
  <label>Altitude (m)</label>
  <input v-model.number="altitude" type="number" step="1000" />
</div>
`)],-1))]),t("div",Ra,[t("div",Ua,[a[16]||(a[16]=t("label",null,"Heading (Â°)",-1)),h(t("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>C.value=i),type:"number",step:"1",min:"-180",max:"180"},null,512),[[k,C.value,void 0,{number:!0}]])]),a[17]||(a[17]=t("pre",null,[t("code",null,`<div class="control-group">
  <label>Pitch (Â°)</label>
  <input v-model.number="pitch" type="number" step="1" min="-90" max="0" />
</div>

<div class="control-group">
  <label>Roll (Â°)</label>
  <input v-model.number="roll" type="number" step="1" min="-180" max="180" />
</div>
`)],-1))]),t("div",{class:"button-group"},[t("button",{onClick:Q,class:"button"},"ðŸ“ Set Position (Instant)"),t("button",{onClick:aa,class:"button"},"âœˆï¸ Fly To Position"),t("button",{onClick:$,class:"button"},"ðŸ“¸ Get Current Position")]),a[26]||(a[26]=t("hr",{style:{margin:"20px 0"}},null,-1)),a[27]||(a[27]=t("h3",null,"Markers / Pinpoints",-1)),t("div",Va,[a[18]||(a[18]=t("label",null,"Marker Name",-1)),h(t("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>F.value=i),type:"text",placeholder:"e.g., Mont Blanc"},null,512),[[k,F.value]])]),t("div",za,[t("div",Oa,[a[19]||(a[19]=t("label",null,"Longitude",-1)),h(t("input",{"onUpdate:modelValue":a[7]||(a[7]=i=>D.value=i),type:"number",step:"0.0001"},null,512),[[k,D.value,void 0,{number:!0}]])]),a[20]||(a[20]=t("pre",null,[t("code",null,`<div class="control-group">
  <label>Latitude</label>
  <input v-model.number="markerLat" type="number" step="0.0001" />
</div>
`)],-1))]),t("div",{class:"button-group"},[t("button",{onClick:ea,class:"button"},"ðŸ“ Add Marker"),t("button",{onClick:da,class:"button"},"ðŸ“ Use Current Pos"),t("button",{onClick:la,class:"button"},"ðŸ—‘ï¸ Clear All")]),b.value.length>0?(c(),p("div",Na,[t("label",null,"Active Markers ("+r(b.value.length)+")",1),t("div",Ga,[(c(!0),p(H,null,X(b.value,(i,d)=>(c(),p("div",{key:i.id,style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"8px","padding-bottom":"8px","border-bottom":"1px solid #ddd"}},[t("div",{style:{flex:"1",cursor:"pointer"},onClick:w=>ra(i)},[t("strong",null,r(i.name),1),a[21]||(a[21]=t("br",null,null,-1)),t("span",Wa,r(i.lon.toFixed(4))+"Â°, "+r(i.lat.toFixed(4))+"Â°",1)],8,qa),t("button",{onClick:w=>na(d),class:"button",style:{padding:"4px 8px","font-size":"0.9em"}},"âŒ",8,$a)]))),128))])])):R("",!0),a[28]||(a[28]=t("hr",{style:{margin:"20px 0"}},null,-1)),a[29]||(a[29]=t("h3",null,"Tour Mode",-1)),t("div",ja,[a[22]||(a[22]=t("label",null,"Tour Speed (ms between steps)",-1)),h(t("input",{"onUpdate:modelValue":a[8]||(a[8]=i=>O.value=i),type:"number",step:"100",min:"0"},null,512),[[k,O.value,void 0,{number:!0}]])]),t("div",Ya,[t("button",{onClick:ia,class:fa(["button",{active:u.value}])},r(u.value?"â¹ï¸ Stop Tour":"â–¶ï¸ Start Tour"),3),t("button",{onClick:ta,class:"button"},"âž• Add Current to Tour"),t("button",{onClick:sa,class:"button"},"ðŸ—‘ï¸ Clear Tour")]),t("div",Za,[t("label",null,"Tour Script ("+r(E.value.length)+" steps)",1),t("div",Ha,[(c(!0),p(H,null,X(E.value,(i,d)=>(c(),p("div",{key:d,style:Fa({fontWeight:f.value===d&&u.value?"bold":"normal",marginBottom:"8px",paddingBottom:"8px",borderBottom:d<E.value.length-1?"1px solid #ddd":"none"})},[t("div",null,[t("strong",null,r(d+1)+".",1),U(" Lon: "+r(i.lon)+", Lat: "+r(i.lat)+", Alt: "+r(i.alt)+"m",1)]),t("div",Xa,"Camera: H="+r(i.heading)+"Â°, P="+r(i.pitch)+"Â°, Duration="+r(i.duration)+"s",1),i.serviceId?(c(),p("div",Ja,"Time: "+r(i.timeStart)+" to "+r(i.timeEnd),1)):R("",!0)],4))),128))])])])])):R("",!0),a[33]||(a[33]=Ca("",17))]))}}),nt=pa(Qa,[["__scopeId","data-v-1b0c6991"]]);export{et as __pageData,nt as default};
