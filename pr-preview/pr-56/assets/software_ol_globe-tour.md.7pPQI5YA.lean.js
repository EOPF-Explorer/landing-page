const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/olcs.Cqh799zv.js","assets/chunks/cesium.DzXtLnwn.js"])))=>i.map(i=>d[i]);
import{_ as G,V as ka,O as va}from"./chunks/olcs.Cqh799zv.js";import{b as c}from"./chunks/runtime-dom.esm-bundler.CVWPxwnJ.js";import{_ as ua}from"./chunks/openlayers-logo.mV03A5FU.js";import{M as fa}from"./chunks/Map.hMK3qLcu.js";import{W as $}from"./chunks/WebGLTile.D_NuozSC.js";import{G as Ea}from"./chunks/GeoZarr.Cq1O2qMX.js";/* empty css                  */import{c as ba}from"./chunks/index.KPY1M44e.js";import{_ as ga}from"./chunks/plugin-vue_export-helper.DlAUqK2U.js";import{l as ma,j as d,D as ya,c as h,o as k,i as e,f as O,M as Ca,a as V,K as v,t as r,F as X,s as H,n as Fa,C as Sa}from"./chunks/runtime-core.esm-bundler.MgDDUQih.js";import"./chunks/cesium.DzXtLnwn.js";import"./chunks/open.BWDyXGuR.js";const xa={key:0,class:"warning"},Ba={key:1,style:{display:"grid","grid-template-columns":"1fr 400px",gap:"20px"}},Ta={class:"tour-controls",style:{height:"600px","overflow-y":"auto"}},Ia={class:"control-group"},Da={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"10px"}},Aa={class:"control-group"},Ma={class:"control-group"},Pa={class:"control-group"},wa={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr",gap:"10px"}},La={class:"control-group"},_a={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr",gap:"10px"}},za={class:"control-group"},Oa={class:"control-group"},Va={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"10px"}},Na={class:"control-group"},Ua={key:0,class:"control-group"},Ra={class:"tour-script"},Ga=["onClick"],Ya={style:{"font-size":"0.85em",color:"#666"}},Wa=["onClick"],qa={class:"control-group"},ja={class:"button-group"},Ja={class:"control-group"},Za={class:"tour-script"},$a={style:{"font-size":"0.9em",color:"#666"}},Xa={key:0,style:{"font-size":"0.85em",color:"#888"}},he=JSON.parse('{"title":"OpenLayers - 3D Globe Tour Mode (Experimental)","description":"","frontmatter":{"title":"OpenLayers - 3D Globe Tour Mode (Experimental)","layout":"page"},"headers":[],"relativePath":"software/ol/globe-tour.md","filePath":"software/ol/globe-tour.md"}'),Ha={name:"software/ol/globe-tour.md"},Ka=Object.assign(Ha,{setup(Qa){let N=null,i=null;const w=d(null),U=d(),o=d(!0);let x=null,l=null;const B=d("456c1e23-47f2-4567-98cf-dcde378a05f7"),g=d("2026-01-22"),A=d("2026-01-23"),m=d(""),y=d("");let T={serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23",cloudCover:"",additionalParams:""};const u=d(4.5),I=d(43.5),M=d(5e6),C=d(0),P=d(-90),L=d(0),f=d(!1),R=d(1e3),E=d([{lon:4.5,lat:43.5,alt:5e6,heading:0,pitch:-90,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23"},{lon:6.8,lat:45.8,alt:1e5,heading:45,pitch:-45,duration:3,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.8,alt:5e4,heading:135,pitch:-30,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.8,alt:5e4,heading:225,pitch:-30,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.8,alt:5e4,heading:315,pitch:-30,duration:2,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.95,lat:45.8,alt:12e3,heading:270,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.91,lat:45.91,alt:1e4,heading:225,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.95,alt:12e3,heading:180,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.69,lat:45.91,alt:1e4,heading:135,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.65,lat:45.8,alt:12e3,heading:90,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.69,lat:45.69,alt:1e4,heading:45,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.8,lat:45.65,alt:12e3,heading:0,pitch:-15,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:6.91,lat:45.69,alt:1e4,heading:315,pitch:-20,duration:0,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-23",timeEnd:"2026-01-24"},{lon:2.3,lat:48.9,alt:1e6,heading:0,pitch:-60,duration:3,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23"},{lon:12.1702,lat:46.5315,alt:3050,heading:282.97,pitch:-22.7,duration:3,serviceId:"456c1e23-47f2-4567-98cf-dcde378a05f7",timeStart:"2026-01-22",timeEnd:"2026-01-23"}]),F=d(0),b=d([]),S=d(""),D=d(6.8),_=d(45.8),K="https://s3.explorer.eopf.copernicus.eu/esa-zarr-sentinel-explorer-fra/tests-output/sentinel-2-l2a-staging/S2A_MSIL2A_20251227T100441_N0511_R122_T33TVF_20251227T121715.zarr",Q="https://api.explorer.eopf.copernicus.eu/openeo/services/xyz";function Y(){const s=encodeURIComponent(`["${g.value}","${A.value}"]`);let a=`${Q}/${B.value}/tiles/{z}/{x}/{y}?time=${s}`;return m.value&&(a+=`&cloud_cover=${m.value}`),y.value&&(a+=`&${y.value}`),a}function W(){if(!l||!o.value)return;const a=l.getCesiumScene().imageryLayers;T={serviceId:B.value,timeStart:g.value,timeEnd:A.value,cloudCover:m.value,additionalParams:y.value},a.length>1&&a.remove(a.get(1));const t=Y();console.log("Updating XYZ layer:",t);const n=new i.UrlTemplateImageryProvider({url:t,maximumLevel:18,credit:"Sentinel Data Â© ESA/Copernicus via OpenEO"});a.addImageryProvider(n)}function aa(){if(!l||!o.value)return;l.getCesiumScene().camera.setView({destination:i.Cartesian3.fromDegrees(u.value,I.value,M.value),orientation:{heading:i.Math.toRadians(C.value),pitch:i.Math.toRadians(P.value),roll:i.Math.toRadians(L.value)}}),console.log("Camera set to:",{lon:u.value,lat:I.value,alt:M.value,heading:C.value,pitch:P.value,roll:L.value})}function ea(){if(!l||!o.value)return;l.getCesiumScene().camera.flyTo({destination:i.Cartesian3.fromDegrees(u.value,I.value,M.value),orientation:{heading:i.Math.toRadians(C.value),pitch:i.Math.toRadians(P.value),roll:i.Math.toRadians(L.value)},duration:2})}function q(){if(!l||!o.value)return;const a=l.getCesiumScene().camera,t=a.positionCartographic;u.value=parseFloat(i.Math.toDegrees(t.longitude).toFixed(4)),I.value=parseFloat(i.Math.toDegrees(t.latitude).toFixed(4)),M.value=parseFloat(t.height.toFixed(0)),C.value=parseFloat(i.Math.toDegrees(a.heading).toFixed(2)),P.value=parseFloat(i.Math.toDegrees(a.pitch).toFixed(2)),L.value=parseFloat(i.Math.toDegrees(a.roll).toFixed(2))}function ta(){E.value.push({lon:u.value,lat:I.value,alt:M.value,heading:C.value,pitch:P.value,duration:3,serviceId:B.value,timeStart:g.value,timeEnd:A.value,cloudCover:m.value,additionalParams:y.value})}function ia(){if(f.value){J();return}if(!l||!o.value){alert("Please enable 3D mode first");return}f.value=!0,F.value=0,j()}function j(){if(!f.value||F.value>=E.value.length){J();return}const s=E.value[F.value],t=l.getCesiumScene().camera;if(console.log(`Tour step ${F.value+1}/${E.value.length}:`,s),s.serviceId){const n={serviceId:s.serviceId,timeStart:s.timeStart||g.value,timeEnd:s.timeEnd||A.value,cloudCover:s.cloudCover||"",additionalParams:s.additionalParams||""};(n.serviceId!==T.serviceId||n.timeStart!==T.timeStart||n.timeEnd!==T.timeEnd||n.cloudCover!==T.cloudCover||n.additionalParams!==T.additionalParams)&&(B.value=n.serviceId,g.value=n.timeStart,A.value=n.timeEnd,m.value=n.cloudCover,y.value=n.additionalParams,W())}t.flyTo({destination:i.Cartesian3.fromDegrees(s.lon,s.lat,s.alt),orientation:{heading:i.Math.toRadians(s.heading||0),pitch:i.Math.toRadians(s.pitch||-90),roll:0},duration:s.duration||2,complete:()=>{F.value++,f.value&&setTimeout(j,R.value)}})}function J(){f.value=!1,F.value=0}function sa(){E.value=[]}function na(){if(!l||!o.value){alert("Please enable 3D mode first");return}if(!S.value.trim()){alert("Please enter a name for the marker");return}const a=l.getCesiumScene().entities.add({position:i.Cartesian3.fromDegrees(D.value,_.value),point:{pixelSize:10,color:i.Color.RED,outlineColor:i.Color.WHITE,outlineWidth:2},label:{text:S.value,font:"14px sans-serif",fillColor:i.Color.WHITE,outlineColor:i.Color.BLACK,outlineWidth:2,style:i.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new i.Cartesian2(0,-15),disableDepthTestDistance:Number.POSITIVE_INFINITY}});b.value.push({id:a.id,name:S.value,lon:D.value,lat:_.value,entity:a}),console.log("Marker added:",S.value,D.value,_.value),S.value=""}function la(s){if(!l||!o.value)return;const a=b.value[s];l.getCesiumScene().entities.removeById(a.id),b.value.splice(s,1)}function da(){if(!l||!o.value)return;const s=l.getCesiumScene();b.value.forEach(a=>{s.entities.removeById(a.id)}),b.value=[]}function ra(){!l||!o.value||(q(),D.value=u.value,_.value=I.value)}function oa(s){if(!l||!o.value)return;l.getCesiumScene().camera.flyTo({destination:i.Cartesian3.fromDegrees(s.lon,s.lat,5e4),orientation:{heading:0,pitch:i.Math.toRadians(-45),roll:0},duration:2})}ma(()=>{w.value=ba(),w.value&&ya(()=>{pa()})});async function pa(){if(U.value)try{if(!i&&(i=await G(()=>import("./chunks/cesium.DzXtLnwn.js").then(p=>p.C),[]),typeof window<"u")){await G(()=>import("./chunks/cesium.DzXtLnwn.js").then(ha=>ha.w),[]);const p=!1;window.CESIUM_BASE_URL=p?"/node_modules/cesium/Build/Cesium/":"/",window.Cesium=i,i.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZWYyOGFkZC0wYzY3LTQwYzUtYjkyNC1iNzFiMDJhNTc1ZWMiLCJpZCI6Mzg4NzYwLCJpYXQiOjE3NzA2NDE3OTB9.YtJeGJVM-72pePu1lNFy8p3AHhODAAhsy65LxYp8ums"}N||(N=(await G(()=>import("./chunks/olcs.Cqh799zv.js").then(p=>p.ch),__vite__mapDeps([0,1]))).default);const s=new Ea({url:K,group:"measurements/reflectance",bands:["b04","b03","b02"]});x=new fa({layers:[new $({source:new va}),new $({source:s,style:{gamma:1.5,color:["color",["interpolate",["linear"],["band",1],0,0,.5,255],["interpolate",["linear"],["band",2],0,0,.5,255],["interpolate",["linear"],["band",3],0,0,.5,255],["case",["==",["+",["band",1],["band",2],["band",3]],0],0,1]]}})],target:U.value,view:new ka({center:[0,0],zoom:2,projection:"EPSG:3857"})});const a=x.getTarget(),t=x.getView();if(console.log("Map initialization check:",{target:!!a,view:!!t}),!a||!t){console.error("Map not properly initialized:",{target:a,view:t});return}l=new N({map:x});const n=l.getCesiumScene();n.globe.enableLighting=!1,n.globe.showGroundAtmosphere=!0,n.imageryLayers.removeAll(),n.imageryLayers.addImageryProvider(new i.OpenStreetMapImageryProvider({url:"https://tile.openstreetmap.org/"}));const z=Y(),ca=new i.UrlTemplateImageryProvider({url:z,maximumLevel:18,credit:"Sentinel Data Â© ESA/Copernicus via OpenEO"});n.imageryLayers.addImageryProvider(ca),x.once("rendercomplete",()=>{setTimeout(()=>{l.setEnabled(!0),n.camera.setView({destination:i.Cartesian3.fromDegrees(4.5,43.5,5e6),orientation:{heading:0,pitch:i.Math.toRadians(-90),roll:0}});try{const p=i.Terrain.fromWorldTerrain({requestWaterMask:!0,requestVertexNormals:!0});n.setTerrain(p),console.log("World terrain loaded successfully")}catch(p){console.warn("Could not load terrain:",p)}},500)}),x.render()}catch(s){console.error("Failed to initialize map:",s)}}return(s,a)=>(k(),h("div",null,[a[30]||(a[30]=e("h2",{id:"_3d-globe-tour-mode-experimental",tabindex:"-1"},[V("3D Globe Tour Mode - Experimental "),e("img",{src:ua,alt:"OpenLayers Logo",style:{height:"100px","vertical-align":"middle","margin-left":"8px",float:"right"}}),V(),e("a",{class:"header-anchor link",href:"#_3d-globe-tour-mode-experimental","aria-label":'Permalink to "3D Globe Tour Mode - Experimental <img src="/assets/openlayers-logo.png" alt="OpenLayers Logo" style="height:100px; vertical-align:middle; margin-left:8px; float:right;" />"'},"â€‹")],-1)),a[31]||(a[31]=e("p",null,"This experimental page demonstrates advanced camera control and automated tours on the 3D globe, plus dynamic XYZ layer parameter control.",-1)),w.value===!1?(k(),h("div",xa," âš ï¸ **WebGL Not Supported**: Your browser doesn't support WebGL, which is required for 3D globe visualization. ")):O("",!0),a[32]||(a[32]=e("h3",{id:"live-demo",tabindex:"-1"},[V("Live Demo "),e("a",{class:"header-anchor link",href:"#live-demo","aria-label":'Permalink to "Live Demo"'},"â€‹")],-1)),w.value?(k(),h("div",Ba,[e("div",{ref_key:"mapRef",ref:U,class:"map-container",style:{height:"600px"}},null,512),e("div",Ta,[a[23]||(a[23]=e("h3",{style:{"margin-top":"0"}},"XYZ Layer Parameters",-1)),e("div",Ia,[a[9]||(a[9]=e("label",null,"Service ID",-1)),v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>B.value=t),type:"text"},null,512),[[c,B.value]])]),e("div",Da,[e("div",Aa,[a[10]||(a[10]=e("label",null,"Time Start",-1)),v(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>g.value=t),type:"date"},null,512),[[c,g.value]])]),a[11]||(a[11]=e("pre",null,[e("code",null,`<div class="control-group">
  <label>Time End</label>
  <input v-model="timeEnd" type="date" />
</div>
`)],-1))]),e("div",Ma,[a[12]||(a[12]=e("label",null,"Cloud Cover (0-100, optional)",-1)),v(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>m.value=t),type:"number",min:"0",max:"100",placeholder:"Leave empty for no filter"},null,512),[[c,m.value]])]),e("div",Pa,[a[13]||(a[13]=e("label",null,"Additional Parameters (e.g., param1=value1Â¶m2=value2)",-1)),v(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>y.value=t),type:"text",placeholder:"custom=value"},null,512),[[c,y.value]])]),e("p",null,[e("button",{onClick:W,class:"button"},"ðŸ”„ Update Layer")]),a[24]||(a[24]=e("hr",{style:{margin:"20px 0"}},null,-1)),a[25]||(a[25]=e("h3",null,"Camera Position Control",-1)),e("div",wa,[e("div",La,[a[14]||(a[14]=e("label",null,"Longitude",-1)),v(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>u.value=t),type:"number",step:"0.1"},null,512),[[c,u.value,void 0,{number:!0}]])]),a[15]||(a[15]=e("pre",null,[e("code",null,`<div class="control-group">
  <label>Latitude</label>
  <input v-model.number="latitude" type="number" step="0.1" />
</div>

<div class="control-group">
  <label>Altitude (m)</label>
  <input v-model.number="altitude" type="number" step="1000" />
</div>
`)],-1))]),e("div",_a,[e("div",za,[a[16]||(a[16]=e("label",null,"Heading (Â°)",-1)),v(e("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>C.value=t),type:"number",step:"1",min:"-180",max:"180"},null,512),[[c,C.value,void 0,{number:!0}]])]),a[17]||(a[17]=e("pre",null,[e("code",null,`<div class="control-group">
  <label>Pitch (Â°)</label>
  <input v-model.number="pitch" type="number" step="1" min="-90" max="0" />
</div>

<div class="control-group">
  <label>Roll (Â°)</label>
  <input v-model.number="roll" type="number" step="1" min="-180" max="180" />
</div>
`)],-1))]),e("div",{class:"button-group"},[e("button",{onClick:aa,class:"button"},"ðŸ“ Set Position (Instant)"),e("button",{onClick:ea,class:"button"},"âœˆï¸ Fly To Position"),e("button",{onClick:q,class:"button"},"ðŸ“¸ Get Current Position")]),a[26]||(a[26]=e("hr",{style:{margin:"20px 0"}},null,-1)),a[27]||(a[27]=e("h3",null,"Markers / Pinpoints",-1)),e("div",Oa,[a[18]||(a[18]=e("label",null,"Marker Name",-1)),v(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>S.value=t),type:"text",placeholder:"e.g., Mont Blanc"},null,512),[[c,S.value]])]),e("div",Va,[e("div",Na,[a[19]||(a[19]=e("label",null,"Longitude",-1)),v(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>D.value=t),type:"number",step:"0.0001"},null,512),[[c,D.value,void 0,{number:!0}]])]),a[20]||(a[20]=e("pre",null,[e("code",null,`<div class="control-group">
  <label>Latitude</label>
  <input v-model.number="markerLat" type="number" step="0.0001" />
</div>
`)],-1))]),e("div",{class:"button-group"},[e("button",{onClick:na,class:"button"},"ðŸ“ Add Marker"),e("button",{onClick:ra,class:"button"},"ðŸ“ Use Current Pos"),e("button",{onClick:da,class:"button"},"ðŸ—‘ï¸ Clear All")]),b.value.length>0?(k(),h("div",Ua,[e("label",null,"Active Markers ("+r(b.value.length)+")",1),e("div",Ra,[(k(!0),h(X,null,H(b.value,(t,n)=>(k(),h("div",{key:t.id,style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"8px","padding-bottom":"8px","border-bottom":"1px solid #ddd"}},[e("div",{style:{flex:"1",cursor:"pointer"},onClick:z=>oa(t)},[e("strong",null,r(t.name),1),a[21]||(a[21]=e("br",null,null,-1)),e("span",Ya,r(t.lon.toFixed(4))+"Â°, "+r(t.lat.toFixed(4))+"Â°",1)],8,Ga),e("button",{onClick:z=>la(n),class:"button",style:{padding:"4px 8px","font-size":"0.9em"}},"âŒ",8,Wa)]))),128))])])):O("",!0),a[28]||(a[28]=e("hr",{style:{margin:"20px 0"}},null,-1)),a[29]||(a[29]=e("h3",null,"Tour Mode",-1)),e("div",qa,[a[22]||(a[22]=e("label",null,"Tour Speed (ms between steps)",-1)),v(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>R.value=t),type:"number",step:"100",min:"0"},null,512),[[c,R.value,void 0,{number:!0}]])]),e("div",ja,[e("button",{onClick:ia,class:Fa(["button",{active:f.value}])},r(f.value?"â¹ï¸ Stop Tour":"â–¶ï¸ Start Tour"),3),e("button",{onClick:ta,class:"button"},"âž• Add Current to Tour"),e("button",{onClick:sa,class:"button"},"ðŸ—‘ï¸ Clear Tour")]),e("div",Ja,[e("label",null,"Tour Script ("+r(E.value.length)+" steps)",1),e("div",Za,[(k(!0),h(X,null,H(E.value,(t,n)=>(k(),h("div",{key:n,style:Sa({fontWeight:F.value===n&&f.value?"bold":"normal",marginBottom:"8px",paddingBottom:"8px",borderBottom:n<E.value.length-1?"1px solid #ddd":"none"})},[e("div",null,[e("strong",null,r(n+1)+".",1),V(" Lon: "+r(t.lon)+", Lat: "+r(t.lat)+", Alt: "+r(t.alt)+"m",1)]),e("div",$a,"Camera: H="+r(t.heading)+"Â°, P="+r(t.pitch)+"Â°, Duration="+r(t.duration)+"s",1),t.serviceId?(k(),h("div",Xa,"Time: "+r(t.timeStart)+" to "+r(t.timeEnd),1)):O("",!0)],4))),128))])])])])):O("",!0),a[33]||(a[33]=Ca("",17))]))}}),ke=ga(Ka,[["__scopeId","data-v-8ef13b8c"]]);export{he as __pageData,ke as default};
