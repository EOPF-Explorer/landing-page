import{an as T,aq as N,ar as l,az as L,aL as M,aA as S,aH as C,aB as q,aC as R,aD as j,aE as G,aF as P,aG as $,aI as z,aa as y,ab as F,ad as s,ak as D,ac as m,al as c,aJ as f,aK as g,aj as B,aM as O}from"./app.F8sUN9yU.js";import{_ as H}from"./chunks/openlayers-logo.mV03A5FU.js";import{c as W}from"./chunks/index.KPY1M44e.js";const U={key:0,class:"warning"},Z={key:1,class:"demo-section"},J={class:"controls"},Q={class:"control-row"},Y={class:"value-display"},K={class:"control-row"},X={class:"value-display"},la=JSON.parse('{"title":"OpenLayers - NDVI Calculation","description":"","frontmatter":{"title":"OpenLayers - NDVI Calculation","layout":"page"},"headers":[],"relativePath":"software/ol/ndvi.md","filePath":"software/ol/ndvi.md"}'),aa={name:"software/ol/ndvi.md"},sa=Object.assign(aa,{setup(ia){const d=l(null),o=l();let A=null,p=null;const r=l("#8B4513"),E=l("#00FF00"),n=l(-.5),h=l(.7),b="https://s3.explorer.eopf.copernicus.eu/esa-zarr-sentinel-explorer-fra/tests-output/sentinel-2-l2a-staging/S2A_MSIL2A_20251227T100441_N0511_R122_T33TVF_20251227T121715.zarr",v=10;function u(){const i={},a=O([r.value,E.value]).mode("lab"),t=(h.value-n.value)/v;for(let e=0;e<=v;++e){const k=a(e/v).rgb(),I=n.value+e*t;i[`value${e}`]=I,i[`red${e}`]=k[0],i[`green${e}`]=k[1],i[`blue${e}`]=k[2]}return i}function _(){const i=[];for(let a=0;a<=v;++a){i[a*2]=["var",`value${a}`];const t=["var",`red${a}`],e=["var",`green${a}`],k=["var",`blue${a}`];i[a*2+1]=["color",t,e,k]}return i}const V=["/",["-",["band",2],["band",1]],["+",["band",2],["band",1]]];function w(){p&&p.updateStyleVariables(u())}N(()=>{d.value=W(),d.value&&L(()=>{x()})}),M([r,E,n,h],w);function x(){if(o.value)try{const i=new S({url:b,group:"measurements/reflectance",bands:["b04","b8a"]});p=new C({source:i,style:{variables:u(),color:["interpolate",["linear"],V,..._()]}}),A=new q({layers:[new C({source:new z}),p],target:o.value,view:R(i,j(1),G(2),P(),$(2))})}catch(i){console.error("Failed to initialize map:",i)}}return(i,a)=>(F(),y("div",null,[a[7]||(a[7]=s("h2",{id:"openlayers-ndvi-calculation",tabindex:"-1"},[c("OpenLayers - NDVI Calculation "),s("img",{src:H,alt:"OpenLayers Logo",style:{height:"100px","vertical-align":"middle","margin-left":"8px",float:"right"}}),c(),s("a",{class:"header-anchor link",href:"#openlayers-ndvi-calculation","aria-label":'Permalink to "OpenLayers - NDVI Calculation <img src="/assets/openlayers-logo.png" alt="OpenLayers Logo" style="height:100px; vertical-align:middle; margin-left:8px; float:right;" />"'},"​")],-1)),a[8]||(a[8]=s("p",null,"This example demonstrates real-time calculation of the Normalized Difference Vegetation Index (NDVI) directly in the browser using WebGL expressions.",-1)),d.value===!1?(F(),y("div",U," ⚠️ **WebGL Not Supported**: Your browser doesn't support WebGL, which is required for GeoZarr visualization and NDVI calculation. ")):D("",!0),a[9]||(a[9]=s("h3",{id:"live-demo",tabindex:"-1"},[c("Live Demo "),s("a",{class:"header-anchor link",href:"#live-demo","aria-label":'Permalink to "Live Demo"'},"​")],-1)),d.value?(F(),y("div",Z,[s("div",{ref_key:"mapRef",ref:o,class:"map-container"},null,512),a[4]||(a[4]=m("",1))])):D("",!0),s("div",J,[s("div",Q,[a[5]||(a[5]=s("label",null,"Min NDVI",-1)),f(s("input",{type:"range","onUpdate:modelValue":a[0]||(a[0]=t=>n.value=t),min:"-1.0",max:"-0.1",step:"0.01"},null,512),[[g,n.value,void 0,{number:!0}]]),s("span",Y,B(n.value.toFixed(1)),1),f(s("input",{type:"color","onUpdate:modelValue":a[1]||(a[1]=t=>r.value=t)},null,512),[[g,r.value]])]),s("div",K,[a[6]||(a[6]=s("label",null,"Max NDVI",-1)),f(s("input",{type:"range","onUpdate:modelValue":a[2]||(a[2]=t=>h.value=t),min:"0.1",max:"1.0",step:"0.01"},null,512),[[g,h.value,void 0,{number:!0}]]),s("span",X,B(h.value.toFixed(1)),1),f(s("input",{type:"color","onUpdate:modelValue":a[3]||(a[3]=t=>E.value=t)},null,512),[[g,E.value]])])]),a[10]||(a[10]=m("",8))]))}}),ha=T(sa,[["__scopeId","data-v-7309a0fe"]]);export{la as __pageData,ha as default};
