import{d as lt,q as T,w as k,r as tt,u as mt}from"./extent.ASDbTExA.js";function sn(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function _t(t,n){let e=!0;for(let s=t.length-1;s>=0;--s)if(t[s]!=n[s]){e=!1;break}return e}function rn(t,n){const e=Math.cos(n),s=Math.sin(n),r=t[0]*e-t[1]*s,o=t[1]*e+t[0]*s;return t[0]=r,t[1]=o,t}function on(t,n){return t[0]*=n,t[1]*=n,t}function Tt(t,n){const e=t[0]-n[0],s=t[1]-n[1];return e*e+s*s}function cn(t,n){return Math.sqrt(Tt(t,n))}function an(t,n){if(n.canWrapX()){const e=lt(n.getExtent()),s=xt(t,n,e);s&&(t[0]-=s*e)}return t}function xt(t,n,e){const s=n.getExtent();let r=0;return n.canWrapX()&&(t[0]<s[0]||t[0]>s[2])&&(e=e||lt(s),r=Math.floor((t[0]-s[0])/e)),r}const St=63710088e-1;function nt(t,n,e){e=e||St;const s=T(t[1]),r=T(n[1]),o=(r-s)/2,c=T(n[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(c)*Math.sin(c)*Math.cos(s)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Ct(...t){console.warn(...t)}function fn(...t){console.error(...t)}const Gt={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function ln(t){return Gt[t]}const z={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class K{constructor(n){this.code_=n.code,this.units_=n.units,this.extent_=n.extent!==void 0?n.extent:null,this.worldExtent_=n.worldExtent!==void 0?n.worldExtent:null,this.axisOrientation_=n.axisOrientation!==void 0?n.axisOrientation:"enu",this.global_=n.global!==void 0?n.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=n.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=n.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||z[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(n){this.global_=n,this.canWrapX_=!!(n&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(n){this.defaultTileGrid_=n}setExtent(n){this.extent_=n,this.canWrapX_=!!(this.global_&&n)}setWorldExtent(n){this.worldExtent_=n}setGetPointResolution(n){this.getPointResolutionFunc_=n}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const A=6378137,S=Math.PI*A,Ut=[-S,-S,S,S],Rt=[-180,-85,180,85],L=A*Math.log(Math.tan(Math.PI/2));class x extends K{constructor(n){super({code:n,units:"m",extent:Ut,global:!0,worldExtent:Rt,getPointResolution:function(e,s){return e/Math.cosh(s[1]/A)}})}}const et=[new x("EPSG:3857"),new x("EPSG:102100"),new x("EPSG:102113"),new x("EPSG:900913"),new x("http://www.opengis.net/def/crs/EPSG/0/3857"),new x("http://www.opengis.net/gml/srs/epsg.xml#3857")];function It(t,n,e,s){const r=t.length;e=e>1?e:2,s=s??e,n===void 0&&(e>2?n=t.slice():n=new Array(r));for(let o=0;o<r;o+=s){n[o]=S*t[o]/180;let c=A*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));c>L?c=L:c<-L&&(c=-L),n[o+1]=c}return n}function At(t,n,e,s){const r=t.length;e=e>1?e:2,s=s??e,n===void 0&&(e>2?n=t.slice():n=new Array(r));for(let o=0;o<r;o+=s)n[o]=180*t[o]/S,n[o+1]=360*Math.atan(Math.exp(t[o+1]/A))/Math.PI-90;return n}const bt=6378137,st=[-180,-90,180,90],yt=Math.PI*bt/180;class m extends K{constructor(n,e){super({code:n,units:"degrees",extent:st,axisOrientation:e,global:!0,metersPerUnit:yt,worldExtent:st})}}const rt=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let B={};function Ft(t){return B[t]||B[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function qt(t,n){B[t]=n}let C={};function I(t,n,e){const s=t.getCode(),r=n.getCode();s in C||(C[s]={}),C[s][r]=e}function N(t,n){return t in C&&n in C[t]?C[t][n]:null}const O=.9996,u=.00669438,D=u*u,X=D*u,_=u/(1-u),ot=Math.sqrt(1-u),G=(1-ot)/(1+ot),ut=G*G,Q=ut*G,Y=Q*G,ht=Y*G,gt=1-u/4-3*D/64-5*X/256,Lt=3*u/8+3*D/32+45*X/1024,Ot=15*D/256+45*X/1024,$t=35*X/3072,Dt=3/2*G-27/32*Q+269/512*ht,Xt=21/16*ut-55/32*Y,Wt=151/96*Q-417/128*ht,Nt=1097/512*Y,$=6378137;function vt(t,n,e){const s=t-5e5,c=(e.north?n:n-1e7)/O/($*gt),a=c+Dt*Math.sin(2*c)+Xt*Math.sin(4*c)+Wt*Math.sin(6*c)+Nt*Math.sin(8*c),f=Math.sin(a),i=f*f,l=Math.cos(a),M=f/l,h=M*M,E=h*h,g=1-u*i,b=Math.sqrt(1-u*i),y=$/b,F=(1-u)/g,d=_*l**2,U=d*d,P=s/(y*O),q=P*P,R=q*P,j=R*P,p=j*P,wt=p*P,Mt=a-M/F*(q/2-j/24*(5+3*h+10*d-4*U-9*_))+wt/720*(61+90*h+298*d+45*E-252*_-3*U);let W=(P-R/6*(1+2*h+d)+p/120*(5-2*d+28*h-3*U+8*_+24*E))/l;return W=k(W+T(dt(e.number)),-Math.PI,Math.PI),[tt(W),tt(Mt)]}const ct=-80,at=84,kt=-180,zt=180;function Bt(t,n,e){t=k(t,kt,zt),n<ct?n=ct:n>at&&(n=at);const s=T(n),r=Math.sin(s),o=Math.cos(s),c=r/o,a=c*c,f=a*a,i=T(t),l=dt(e.number),M=T(l),h=$/Math.sqrt(1-u*r**2),E=_*o**2,g=o*k(i-M,-Math.PI,Math.PI),b=g*g,y=b*g,F=y*g,d=F*g,U=d*g,P=$*(gt*s-Lt*Math.sin(2*s)+Ot*Math.sin(4*s)-$t*Math.sin(6*s)),q=O*h*(g+y/6*(1-a+E)+d/120*(5-18*a+f+72*E-58*_))+5e5;let R=O*(P+h*c*(b/2+F/24*(5-a+9*E+4*E**2)+U/720*(61-58*a+f+600*E-330*_)));return e.north||(R+=1e7),[q,R]}function dt(t){return(t-1)*6-180+3}const Jt=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Pt(t){let n=0;for(const r of Jt){const o=t.match(r);if(o){n=parseInt(o[1]);break}}if(!n)return null;let e=0,s=!1;return n>32700&&n<32761?e=n-32700:n>32600&&n<32661&&(s=!0,e=n-32600),e?{number:e,north:s}:null}function ft(t,n){return function(e,s,r,o){const c=e.length;r=r>1?r:2,o=o??r,s||(r>2?s=e.slice():s=new Array(c));for(let a=0;a<c;a+=o){const f=e[a],i=e[a+1],l=t(f,i,n);s[a]=l[0],s[a+1]=l[1]}return s}}function Ht(t){return Pt(t)?new K({code:t,units:"m"}):null}function Kt(t){const n=Pt(t.getCode());return n?{forward:ft(Bt,n),inverse:ft(vt,n)}:null}const Qt=[Kt],Yt=[Ht];let J=!0;function Zt(t){J=!1}function Z(t,n){if(n!==void 0){for(let e=0,s=t.length;e<s;++e)n[e]=t[e];n=n}else n=t.slice();return n}function H(t){qt(t.getCode(),t),I(t,t,Z)}function Vt(t){t.forEach(H)}function w(t){if(typeof t!="string")return t;const n=Ft(t);if(n)return n;for(const e of Yt){const s=e(t);if(s)return s}return null}function un(t,n,e,s){t=w(t);let r;const o=t.getPointResolutionFunc();if(o){if(r=o(n,e),s&&s!==t.getUnits()){const c=t.getMetersPerUnit();c&&(r=r*c/z[s])}}else{const c=t.getUnits();if(c=="degrees"&&!s||s=="degrees")r=n;else{const a=V(t,w("EPSG:4326"));if(!a&&c!=="degrees")r=n*t.getMetersPerUnit();else{let i=[e[0]-n/2,e[1],e[0]+n/2,e[1],e[0],e[1]-n/2,e[0],e[1]+n/2];i=a(i,i,2);const l=nt(i.slice(0,2),i.slice(2,4)),M=nt(i.slice(4,6),i.slice(6,8));r=(l+M)/2}const f=s?z[s]:t.getMetersPerUnit();f!==void 0&&(r/=f)}}return r}function it(t){Vt(t),t.forEach(function(n){t.forEach(function(e){n!==e&&I(n,e,Z)})})}function jt(t,n,e,s){t.forEach(function(r){n.forEach(function(o){I(r,o,e),I(o,r,s)})})}function hn(t,n){return t?typeof t=="string"?w(t):t:w(n)}function gn(t){return function(n,e,s,r){const o=n.length;s=s!==void 0?s:2,r=r??s,e=e!==void 0?e:new Array(o);for(let c=0;c<o;c+=r){const a=t(n.slice(c,c+s)),f=a.length;for(let i=0,l=r;i<l;++i)e[c+i]=i>=f?n[c+i]:a[i]}return e}}function dn(t,n){return Zt(),pt(t,"EPSG:4326",n!==void 0?n:"EPSG:3857")}function Pn(t,n){if(t===n)return!0;const e=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||V(t,n)===Z)&&e}function V(t,n){const e=t.getCode(),s=n.getCode();let r=N(e,s);if(r)return r;let o=null,c=null;for(const f of Qt)o||(o=f(t)),c||(c=f(n));if(!o&&!c)return null;const a="EPSG:4326";if(c)if(o)r=v(o.inverse,c.forward);else{const f=N(e,a);f&&(r=v(f,c.forward))}else{const f=N(a,s);f&&(r=v(o.inverse,f))}return r&&(H(t),H(n),I(t,n,r)),r}function v(t,n){return function(e,s,r,o){return s=t(e,s,r,o),n(s,s,r,o)}}function Et(t,n){const e=w(t),s=w(n);return V(e,s)}function pt(t,n,e){const s=Et(n,e);if(!s){const r=w(n).getCode(),o=w(e).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return s(t,void 0,t.length)}function En(t,n,e,s){const r=Et(n,e);return mt(t,r,void 0,s)}let tn=null;function wn(){return tn}function Mn(t,n){return t}function mn(t,n){return J&&!_t(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(J=!1,Ct("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function _n(t,n){return t}function Tn(t,n){return t}function nn(){it(et),it(rt),jt(rt,et,It,At)}nn();export{z as M,K as P,dn as a,mn as b,_n as c,cn as d,Pn as e,Tn as f,w as g,Mn as h,V as i,wn as j,Et as k,hn as l,sn as m,_t as n,Zt as o,on as p,Ct as q,rn as r,Tt as s,En as t,pt as u,un as v,an as w,gn as x,fn as y,ln as z};
